/*! For license information please see analysis.f2aab53920268e249f5b.js.LICENSE.txt */
/*!
 * sense-client@7.144.6
 * 
 * Copyright(C) 2021 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[91],{"+/9P":function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("p8SL");var o=r("YvUk");var l=r("/ZiB");var c=r("oQEK");var s=r("26BU");var u=r("6vEY");var d=r("WLS8");var f=r("mFzD");var p=r("wGBp");var v=r("0g17");var m=r("/NZN");var h=r("MK7S");var b=r("sTbi");var g=r("R82R");var y=r("6uJb");var w=r("NGs5");var E=r("dJ5t");var S=r("4nJ1");function O(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){O(i,a,n,o,l,"next",e)}function l(e){O(i,a,n,o,l,"throw",e)}o(void 0)}))}}function k(e,t){return I(e)||q(e,t)||D(e,t)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function q(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function I(e){if(Array.isArray(e))return e}var T=Object(g["a"])((function(e){return{switchWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(1)},infoIcon:{marginLeft:"-5px"},titleError:{opacity:1,fontSize:"12px",marginBottom:"-20px",paddingTop:"4px",display:"block",color:e.palette.error.main},titleOk:{opacity:0},dialogInputWrapper:{padding:"5px 0 30px 0"},messageTextArea:{margin:"5px 0 30px 0"},subText:{color:e.palette.text.disabled,display:"inline"},dialogFooter:{backgroundColor:e.palette.background.paper,borderTop:"1px solid ".concat(e.palette.divider)}}}));function A(e){var t=e.close,r=e.show;var g=Object(a["useState"])(""),O=k(g,2),j=O[0],D=O[1];var C=Object(a["useState"])(""),q=k(C,2),I=q[0],A=q[1];var P=Object(a["useState"])(true),M=k(P,2),N=M[0],R=M[1];var L=Object(a["useState"])(false),V=k(L,2),_=V[0],B=V[1];var F=Object(a["useState"])(true),H=k(F,2),z=H[0],W=H[1];var G=T();function $(){return U.apply(this,arguments)}function U(){U=x(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return w["a"].getBookmarkTitles();case 2:t=n.sent;r="Bookmarks.DefaultName";a=E["a"].generateUniqueName(r,t);D(S["a"].ellipseText(a,255));case 6:case"end":return n.stop()}}),e)})));return U.apply(this,arguments)}function Y(){w["a"].setCreating(true);w["a"].createBookmark(N,_,j,I);t();$()}function X(){B(!_)}function K(){R(!N)}var Q=function(){var e=x(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return w["a"].getBookmarkTitles();case 2:r=n.sent;a=E["a"].isNameValid(t,r);W(a);case 5:case"end":return n.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();var Z=function e(t){D(t.target.value);Q(t.target.value)};var J=function e(t){A(t.target.value)};function ee(){$();R(true);B(false);A("");W(true)}return n.a.createElement(i["a"],{className:G.addBookmarkDialog,"qva-outside-ignore-for":"nav-bookmark","data-keep-navigator-open":true,onEnter:ee,open:r,maxWidth:"sm",fullWidth:true},n.a.createElement(o["a"],{className:G.dialogTitle},n.a.createElement(l["a"],{variant:"h5"},y["default"].get("Bookmarks.Dialog.Create")),n.a.createElement(c["a"],{onClick:t,"data-tid":"close-add-bookmark-dialog"},n.a.createElement(h["a"],null))),n.a.createElement(n.a.Fragment,null,n.a.createElement(s["a"],null,n.a.createElement("span",null,y["default"].get("Bookmarks.Dialog.Title")),n.a.createElement("div",{className:G.dialogInputWrapper},n.a.createElement(u["a"],{className:G.dialogInput,onChange:Z,value:j,fullWidth:true,error:!z,"data-tid":"add-bookmark-title-input"}),z?null:n.a.createElement("span",{className:z?G.titleOk:G.titleError},y["default"].get(""===j?"Bookmarks.EmptyTitle":"Bookmarks.DuplicateTitle"))),n.a.createElement("span",null,y["default"].get("Bookmarks.Dialog.Description")," ",n.a.createElement("div",{className:G.subText},y["default"].get("Bookmarks.Dialog.Optional"))),n.a.createElement("div",{className:G.messageTextArea},n.a.createElement(u["a"],{multiline:true,fullWidth:true,rows:5,type:"text",onChange:J,"data-tid":"add-bookmark-description-input"})),n.a.createElement("div",{className:G.switchWrapper},n.a.createElement(d["a"],{className:G.formControlLabel,control:n.a.createElement(f["a"],{checked:N,onChange:K,"data-tid":"add-bookmark-sheet-switch"}),label:y["default"].get("Bookmarks.Dialog.SaveSheetLocation")})),n.a.createElement("div",{className:G.switchWrapper},n.a.createElement(d["a"],{className:G.formControlLabel,control:n.a.createElement(f["a"],{checked:_,onChange:X,"data-tid":"add-bookmark-save-layout-switch"}),label:y["default"].get("Bookmarks.Dialog.SaveLayout")}),n.a.createElement(p["a"],{title:y["default"].get("Bookmarks.Dialog.LayoutTooltip"),placement:"right"},n.a.createElement("div",null,n.a.createElement(b["a"],{className:G.infoIcon}))))),n.a.createElement(v["a"],{className:G.dialogFooter},n.a.createElement(m["a"],{variant:"contained",color:"primary",onClick:Y,disabled:!z,"data-tid":"add-bookmark-create-button"},y["default"].get("Bookmarks.Dialog.CreateButton")))))}t["a"]=A},"/EBH":function(e,t,r){"use strict";r.r(t);var a=r("TmNk");var n=r.n(a);var i=r("mWu2");var o=r("5Hbw");var l='<div class="qv-property-panel">\n\t<div ng-if="!isInvalid && isLinked" class="overlay">\n\t\t<div class="overlay-content">\n\t\t\t<section>\n\t\t\t\t<div class="icon lui-icon lui-icon--link"></div>\n\t\t\t\t<p class="title" q-translation="Object.Linked.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p class="message" q-translation="Object.Linked.NoEdit.PropPanel.Text" ng-if="!showEditMasterPropsBtn"></p>\n\t\t\t\t<p class="message" q-translation="Object.Linked.Edit.PropPanel.Text" ng-if="showEditMasterPropsBtn"></p>\n\t\t\t\t<button class="lui-button" qva-activate="editMasterProps()" ng-if="showEditMasterPropsBtn" tid="edit-master-item">\n\t\t\t\t\t<span q-translation="Common.Edit"></span>\n\t\t\t\t</button>\n\t\t\t</section>\n\t\t</div>\n\t</div>\n  <div ng-if="!isInvalid && isExternalChart" class="overlay">\n    <div class="overlay-content">\n      <section>\n        <div class="icon lui-icon lui-icon--link"></div>\n        <p class="title" q-translation="DynamicView.DynamicChart"></p>\n        <p class="message" q-translation="DynamicView.PropertyPanel.Edit.Description"></p>\n        <button class="lui-button" qva-activate="editSourceApp()" ng-disabled="canEditSourceApp()" tid="edit-source-app">\n          <span q-translation="DynamicView.PropertyPanel.Edit.Label"></span>\n        </button>\n      </section>\n    </div>\n  </div>\n\t<div ng-if="isInvalid" class="overlay">\n\t\t<div class="overlay-content">\n\t\t\t<section>\n\t\t\t\t<p class="title" q-translation="Object.Invalid.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p q-translation="Object.Invalid.NoEdit.PropPanel.Text"></p>\n\t\t\t</section>\n\t\t</div>\n\t</div>\n\t<div ng-if="!isLinked  && !isExternalChart && isPatched && !ignorePatches" class="overlay">\n\t\t<div class="overlay-content">\n\t\t\t<section>\n\t\t\t\t<div class="lui-icon lui-icon--control"></div>\n\t\t\t\t<p class="title" q-translation="Object.VisualExploration.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p q-translation="Object.VisualExploration.NoEdit.PropPanel.Text"></p>\n\t\t\t</section>\n\n\t\t\t<div class="space"></div>\n\t\t\t<section>\n\t\t\t\t<button class="lui-button" qva-activate="savePatches()">\n\t\t\t\t\t<span q-translation="Common.Apply"></span>\n\t\t\t\t</button>\n\t\t\t</section>\n\n\t\t\t<div class="space"></div>\n\t\t\t<section>\n\t\t\t\t<button class="lui-button" qva-activate="clearPatches()">\n\t\t\t\t\t<span q-translation="Common.Discard"></span>\n\t\t\t\t</button>\n\t\t\t</section>\n\t\t</div>\n\t</div>\n\n\t<div include-pp-component x-component="headerComponent" x-definition="headerComponentDefinition" x-data="data" x-args="args"></div>\n\n\t<div class="property-content" ng-if="(!isLinked && !isPatched && isReady) || ignorePatches" include-pp-component x-component="rootComponent" x-args="args" x-definition="definition" x-data="data"></div>\n\n  \t<qv-property-sub-panel ng-repeat="subPanel in subPanels"></qv-property-sub-panel>\n</div>\n';var c=r("uVcZ");var s=r("cC4h");var u=r("2Hli");var d=r("6Z/P");var f=r("5xMv");var p=r("4nJ1");var v=r("6uJb");var m=r("/2No");var h=r("xiWV");var b=r("a7yF");var g='<div class="qv-property-sub-panel" ng-class="classes" ng-style="style">\n\t<div class="property-sub-header" ng-click="stepOut()">\n\t\t<div class="header-wrapper">\n\t\t\t<div class="back-navigation">\n\t\t\t\t<span class="lui-icon back-icon  lui-icon--previous  lui-icon--small"></span>\n\t\t\t</div>\n\t\t\t<div class="text-wrapper">\n\t\t\t\t<div class="navigation-title">\n\t\t\t\t\t{{getTitle()}}\n\t\t\t\t</div>\n\t\t\t\t<div class="navigation-sub-title">\n\t\t\t\t\t{{subTitle}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="property-sub-content" include-pp-component\n\t\t x-component="subPanel.component"\n\t\t x-definition="subPanel.definition"\n\t\t x-data="subPanel.data"\n\t\t x-args="subPanel.args">\n\t</div>\n\n\t<div ng-if="footerButtons" class="property-sub-footer">\n\t\t<button ng-repeat="btn in footerButtons" class="lui-button lui-button--block" qva-activate="btn.action($event)">\n\t\t\t<span class="lui-button__text" q-translation="{{btn.translation}}"></span>\n\t\t\t<span ng-if="btn.icon" class="lui-button__icon lui-icon lui-icon--{{btn.icon}}" q-title-translation="{{btn.translation}}"></span>\n\t\t</button>\n\t</div>\n</div>';var y=r("bTsw");var w=r("/5Yl");i["default"].directive("qvPropertySubPanel",[function(){return{template:g,restrict:"E",replace:true,controller:["$scope","$timeout",function(e,t){var r="100%";var a={show:true,hide:true};var n="items.data";var i=e.subPanel;var o=i.options;var l=o.layoutPath;var s=o.propertiesPath;var d=null;var f=o.dataPath||n;o.transitions=p["a"].extend({},a,o.transitions);e.classes={transitions:o.transitions.show};e.style={width:o.width||r,right:"-".concat(o.width||r),top:0,zIndex:21};e.getTitle=function(){if("function"===typeof o.title)return o.title(i.data,i.args.handler);return o.title};e.subTitle=o.subTitle;o.footer&&(e.footerButtons=o.footer.items.filter((function(e){return"button"===e.type})));m();function v(){var t=p["a"].extend({},e.args);var r=t.properties;var a=t.layout;l&&(a=u["a"].getValue(t.layout,l));t.layout=a;var n=r;s&&(n=u["a"].getValue(r,s));if(!n){e.stepOut();return}t.properties=n;if(d){t.handler=d;t.handler.setProperties(n);t.handler.setLayout(a)}i.args=t;i.data=n}function m(){var r=o.definition;var a=w["a"].mapDefinition(r);var n=u["a"].getValue(a,f);d=n?new y["a"]({app:e.args.app,dimensionDefinition:n.dimension||{},measureDefinition:n.measure||{}}):null;i.component=c["a"].findComponent(r);i.definition=a;o.activePath&&o.definition.cacheKey&&e.args.cache.put("accordion_path_".concat(o.definition.cacheKey),o.activePath);v();t((function(){e.style.right=0;e.style.opacity=1}))}function h(t){var r=e.subPanels.map((function(e){return e.options.id}));var a=r.indexOf(t);if(-1===a)return;e.subPanels.splice(a,1);"function"===typeof o.stepOutCallback&&o.stepOutCallback(t)}function b(a){if(a||!o.transitions.hide){e.subPanel=null;h(o.id);return}e.classes.transitions=o.transitions.hide;e.style.right="-".concat(o.width||r);e.style.opacity=0;t(h.bind(null,o.id),300)}e.stepOut=b;i.directiveHook.close=b;e.$watch("data",(function(){v()}))}]}}]);i["default"].directive("qvPropertyPanel",[function(){return{template:l,restrict:"E",replace:true,scope:{ignorePatches:"<"},controller:["$scope",function(e){var t={};e.subPanels=[];f["a"].selectedObject&&f["a"].selectedObject.getAllPropertyPanelContent().then((function(e){if(e){var t={components:null,localeInfo:null,app:null,ext:null,globalChangeListeners:null,handler:null};p["a"].extend(t,e);g(t)}})).catch((function(){}));function r(r){e.title=u["a"].getValue(r,e.titleRef||"title");e.subtitle=r.subtitle;e.isInvalid=r.qError||"invalid"===t.type;o["a"].inClient()&&(e.isPatched=r.qHasSoftPatches)}function a(e){return e.model.app.getObject(e.properties.qExtendsId).then((function(e){return e.getLayout().then((function(e){return e.permissions.update}))}))}e.$on("$destroy",(function(){t.model&&t.model.Invalidated.unbind(l)}));function l(){t.model.getLayout().then((function(n){var i=n.visualization||n.qInfo&&n.qInfo.qType;if(!i)return;if(i!==t.type&&"odagNavPoint"!==i){t.type=i;return}e.$broadcast("layoutchanged",n);r(n);t.model.getProperties().then((function(r){if(r.qInfo.qId!==t.model.id&&"widget"!==t.type)return;e.args.prevProperties=r;r=p["a"].extend(true,{},r);e.data=r;e.args.properties=r;t.properties=r;t.handler&&t.handler.setProperties(r);e.isLinked=!!r.qExtendsId;e.isExternalChart=!!e.args.ext&&!!e.args.ext.hasExternalChildren;e.$broadcast("datachanged",r);e.isLinked&&a(t).then((function(t){e.showEditMasterPropsBtn=t}))}))}))}function b(r){r=r||e.data;n.a.applyModifiers({model:t.model,properties:r}).then((function(){var a,n,i,o;var l=null!==(a=null===(n=t)||void 0===n||null===(i=n.handler)||void 0===i?void 0:i.globalChangeListeners)&&void 0!==a?a:null===(o=t)||void 0===o?void 0:o.globalChangeListeners;l&&l.forEach((function(t){t&&"function"===typeof t&&t(r,e.args.handler,e.args)}));t.model.setProperties(r)}))}e.$on("saveProperties",(function(e,t){e.stopPropagation();b(t)}));e.$on("updateContent",(function(e,t){e.preventDefault();g(t)}));function g(n){w(null,{all:true});e.subPanels.length=0;s["a"].loadComponents().then((function(){t.model&&t.model.Invalidated.unbind(l);var i=p["a"].extend(true,{},n.properties);var o={prevProperties:null,properties:i,saveProperties:b,cache:n.cache,layout:n.layout,model:n.model,localeInfo:n.localeInfo,app:n.app,ext:n.ext,yMirrorMode:n.yMirrorMode};if(n.handler){n.handler.setProperties(i);n.handler.setLayout(n.layout);o.handler=n.handler}e.data=i;e.definition=n.definition;e.args=o;e.args.iconName=n.iconName;e.args.headerLabel=n.headerLabel;e.args.headerAction=n.headerAction;e.iconName=n.iconName;e.isLinked=!!i.qExtendsId;e.isExternalChart=!!o.ext&&(!!o.ext.hasExternalChildren||!!o.layout.hasExternalChildren);if(e.isExternalChart){e.externalSourceApp=o.ext.externalApp||o.layout.children[0].externalReference.app;h["a"].isDynamicViewAvailable(n.app).then((function(t){e.dynamicViewEnabled=t}))}e.showEditMasterPropsBtn=false;e.isLinked&&a(n).then((function(t){e.showEditMasterPropsBtn=t}));e.headerComponentDefinition={type:"items",component:"header-with-switch",translation:e.data.title};e.headerComponent=p["a"].extend({},c["a"].findComponent({type:"items",component:"header-with-switch"}));e.rootComponent=p["a"].extend({},c["a"].findComponent(n.definition));t=n;n.model.Invalidated.bind(l);r(n.layout);e.isReady=true;var s=t.definition.interceptor;if(s&&"function"===typeof s){var u=s(e);if(u&&"function"===typeof u.then){e.isReady=false;u.then((function(){e.isReady=true}))}}(n.model.isInvalid||n.model.isValidating)&&l()}))}var y=e.$root.$on("showSubPanel",(function(t,r){t.preventDefault();if(!r.id)throw new Error("A sub-panel need to have an id specified!");if(!r.triggerId)throw new Error("A sub-panel need to have a triggerId specified!");var a=e.subPanels.some((function(e){return e.options.triggerId===r.triggerId||e.options.id===r.id}));a||e.subPanels.push({directiveHook:{},options:r})}));function w(t,r){r=r||{};var a=e.subPanels||[];if(!a.length)return;if(r.hasOwnProperty("id")){if(!r.id)throw Error("PP: Invalid subpanel ID");var n=a.filter((function(e){return e.options.id===r.id}));n.length&&n[0].directiveHook.close()}else if(r.all){var i=void 0===r.forceClose||r.forceClose;a.forEach((function(e){e.directiveHook.close(i)}))}else a[a.length-1].directiveHook.close()}var E=e.$root.$on("hideSubPanel",w);e.savePatches=function(){t.model.getEffectiveProperties().then((function(e){t.model.setProperties(e).then((function(){t.model.clearSoftPatches()}))}))};e.clearPatches=function(){t.model.clearSoftPatches()};e.editMasterProps=function(){i["default"].getService("qvConfirmDialog").show({message:v["default"].get("Object.Master.EditWarning.Text"),icon:"cogwheel"}).closed.then((function(e){e&&d["a"].editMaster(t.properties.qExtendsId,t.properties.qInfo.qType)}))};e.editSourceApp=function(){var t="".concat(m["a"].rootPath,"sense/app/").concat(e.externalSourceApp);window.open(t,"_blank")};e.canEditSourceApp=function(){return!e.externalSourceApp||!e.dynamicViewEnabled};e.$on("$destroy",(function(){y();E()}))}]}}])},"0vOn":function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("/NZN");var o=r("Xyu7");var l=r("4hM2");var c=r("0ghn");var s=r("R82R");var u=r("4nJ1");var d=r("MGTR");var f=r("9TP3");var p=r("n+X2");var v=r("+/9P");var m=r("UIGF");function h(e,t){return E(e)||w(e,t)||g(e,t)||b()}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function w(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function E(e){if(Array.isArray(e))return e}var S=Object(s["a"])((function(e){return{bookmarkButton:{maxWidth:"56px",whiteSpace:"nowrap"},buttonSelected:{backgroundColor:e.palette.action.selected}}}));var O=function e(t){var r=t.tid,s=t.canCreate;var b=S();var g=u["a"].getParameterByName("app");var y=Object(f["a"])(g),w=h(y,1),E=w[0];var O=Object(p["a"])(E),x=h(O,1),k=x[0];var j=Object(a["useState"])(false),D=h(j,2),C=D[0],q=D[1];var I=Object(a["useState"])(false),T=h(I,2),A=T[0],P=T[1];var M=Object(c["c"])();var N=function e(t){var r=!A;m["a"].toggle({pressed:r,close:function e(){return P(false)}},t.currentTarget,{create:!!s&&k.permissions.createBookmark,small:false});P(r)};var R=function e(){q(!C)};Object(a["useEffect"])((function(){d["a"].subscribe("/bookmarks/open-create-bm",R);return function(){d["a"].unsubscribe("/bookmarks/open-create-bm",R)}}),[]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(v["a"],{close:R,onEscape:R,show:C}),n.a.createElement(i["a"],{tid:r,"data-testid":"toolbar-bookmarks-button",className:"".concat(b.bookmarkButton," ").concat(A?b.buttonSelected:""),"qva-outside-ignore-for":"nav-bookmark",title:M("Common.Bookmarks"),onClick:N,endIcon:n.a.createElement(o["a"],{size:"small"})},n.a.createElement(l["a"],null)))};t["a"]=O},"3Pmj":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var a=r("mXGw");var n=r.n(a);function i(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function l(e){i(o,a,n,l,c,"next",e)}function c(e){i(o,a,n,l,c,"throw",e)}l(void 0)}))}}function l(e,t){return f(e)||d(e,t)||s(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function f(e){if(Array.isArray(e))return e}function p(e){var t=Object(a["useState"])(),r=l(t,2),n=r[0],i=r[1];var c=Object(a["useState"])(),s=l(c,2),u=s[0],d=s[1];Object(a["useEffect"])((function(){var t=true;function r(){return a.apply(this,arguments)}function a(){a=o(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function r(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return e.getLayout(true);case 3:a=n.sent;if(t){d();i(a)}n.next=10;break;case 7:n.prev=7;n.t0=n["catch"](0);if(t){d(n.t0);i()}case 10:case"end":return n.stop()}}),r,null,[[0,7]])})));return a.apply(this,arguments)}if(e){r();e.Invalidated.bind(r)}return function(){t=false;e&&e.Invalidated.unbind(r)}}),[e&&e.id]);return[n,u]}},"62JT":function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i=r("mWu2");var o='<lui-popover ng-hide="!show" class="story-library-popover" tid="snapshot-library-popover"\n\t\t\t ng-style="{ \'width\': input.width,  \'min-width\': input.width }">\n\t<lui-popover-header>\n\t\t<div class="qv-story-library-header" q-translation="{{currentLibrary.translation}}"></div>\n\t</lui-popover-header>\n\n\t<lui-popover-body>\n\t\t<div story-library-draggable class="qv-story-library-content"\n\t\t\t ng-class="{\'story-mini-library\': showMiniLibrary,\n\t\t\t\t\t\t\'qv-snapshot-library\': snapshots,\n\t\t\t\t\t\t\'qv-text-library\': texts,\n\t\t\t\t\t\t\'qv-shape-library\': shapes,\n\t\t\t\t\t\t\'qv-effect-library\': effects}">\n\n\t\t\t\x3c!-- SNAPSHOTS INCLUDING CATEGORIES --\x3e\n\t\t\t<div ng-if="snapshots">\n\t\t\t\t<ul class="qv-expandable-list">\n\t\t\t\t\t<li ng-repeat="category in categories | orderBy:\'rank\'" class="expandable-item ng-scope" ng-class="{ \'empty\': category.isEmpty }">\n\n\t\t\t\t\t\t<div class="qv-expandable-list-header"\n\t\t\t\t\t\t\t ng-click="expandClicked(category)"\n\t\t\t\t\t\t\t ng-if="!category.isEmpty"\n\t\t\t\t\t\t\t ng-class="{ \'expanded\': category.expanded }">\n\t\t\t\t\t\t\t<span ng-class="{ \'lui-icon\': true, \'lui-icon--triangle-right\' : !category.expanded, \'lui-icon--triangle-bottom\': category.expanded }"></span>\n\t\t\t\t\t\t\t<div class="text ng-binding" q-translation="{{ category.translate }}"></div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<ul class="lui-list"\n\t\t\t\t\t\t\tng-show="category.expanded"\n\t\t\t\t\t\t\tng-class="{ \'expanded\': category.expanded }">\n\n\t\t\t\t\t\t\t<li ng-repeat="snapshot in snapshots | orderBy:\'qData.timestamp\':true | filterDate:this"\n\t\t\t\t\t\t\t\tng-class="{ \'qv-draggable\': !inEdit && !showMiniLibrary, \'edit\': inEdit }"\n\t\t\t\t\t\t\t\tclass="qv-story-library-item lui-list__item snapshot"\n\t\t\t\t\t\t\t\tng-dblclick="itemDblClick(snapshot)">\n\n\t\t\t\t\t\t\t\t<div ng-show="isEmpty" class="snapshot-empty" q-translation="Storytelling.library.noSnapshots"></div>\n\n\t\t\t\t\t\t\t\t\x3c!-- CHECKBOX TO TIC SNAPSHOT FOR REMOVE --\x3e\n\t\t\t\t\t\t\t\t<lui-checkbox ng-if="inEdit"\n\t\t\t\t\t\t\t\t\t\t\t  class="snapshot-checkbox"\n\t\t\t\t\t\t\t\t\t\t\t  x-model="checkboxTicked"\n\t\t\t\t\t\t\t\t\t\t\t  x-change="onCheckboxClick()"\n\t\t\t\t\t\t\t\t\t\t\t  x-disabled="!snapshot.permissions.remove">\n\t\t\t\t\t\t\t\t</lui-checkbox>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass="snapshot-icon lui-list__aside lui-icon  lui-icon--{{ getIconName( snapshot.qData.visualizationType ) }}">\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<story-items-library-snapshot edit="inEdit" snapshot="snapshot"></story-items-library-snapshot>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div ng-show="empty" class="snapshot-empty" q-translation="Storytelling.library.noSnapshots"></div>\n\n\t\t\t<ul class="lui-list">\n\n\t\t\t\t\x3c!-- TEXT OBJECTS --\x3e\n\t\t\t\t<li ng-repeat="text in texts" ng-class="text.textType" class="qv-story-library-item lui-list__item qv-draggable" ng-dblclick="itemDblClick(text)">\n\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass="text-{{text.textType}}"\n\t\t\t\t\t\t\tq-translation="{{text.title}}">\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\n\t\t\t\t\x3c!-- SHAPES --\x3e\n\t\t\t\t<li ng-repeat="shape in shapes" class="qv-story-library-item shape lui-list__item qv-draggable" ng-dblclick="itemDblClick(shape)">\n\t\t\t\t\t<img\n\t\t\t\t\t\t\tonmousedown="if (event.preventDefault) event.preventDefault()"\n\t\t\t\t\t\t\tdraggable="false"\n\t\t\t\t\t\t\tng-src="{{shape.src}}" />\n\t\t\t\t</li>\n\n\t\t\t\t\x3c!-- EFFECTS --\x3e\n\t\t\t\t<li ng-repeat="effect in effects" class="qv-story-library-item qv-story-library-effect lui-list__item qv-draggable">\n\t\t\t\t\t<span class="effect-icon {{effect.iconClass}}">\n\t\t\t\t\t</span>\n\t\t\t\t\t<p\n\t\t\t\t\t\tclass="effect-title"\n\t\t\t\t\t\tq-translation="{{effect.title}}">\n\t\t\t\t\t</p>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer class="qv-story-library-footer" ng-show="editable">\n\t\t<div ng-hide="snapshots.length < 1 || inEdit">\n\t\t\t<button\n\t\t\t\tng-disabled="!editable"\n\t\t\t\tclass="lui-fade-button"\n\t\t\t\tng-click="enterEdit()"\n\t\t\t\tq-title-translation="Common.Edit"\n\t\t\t\ttid="edit-library-item">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--edit"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div ng-if="inEdit && !empty">\n\t\t\t<button\n\t\t\t\tng-disabled="!isAnyTicked"\n\t\t\t\tclass="lui-fade-button delete"\n\t\t\t\tng-click="deleteSnapshots()"\n\t\t\t\tq-title-translation="Common.Delete"\n\t\t\t\ttid="delete-library-item">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--bin"></span>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button lui-active"\n\t\t\t\tng-click="leaveEdit()"\n\t\t\t\tq-title-translation="Tooltip.StopEdit"\n\t\t\t\tqva-focus="true">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--edit"></span>\n\t\t\t</button>\n\t\t</div>\n\t</lui-popover-footer>\n</lui-popover>\n\n';var l=r("8IgQ");var c=r("Z9ZH");var s=r.n(c);var u=r("wIyQ");var d=r("y7Mh");var f=r("2n0V");var p=r("7WGe");var v=r("z4LI");var m=r("Cv2a");var h=r("6Lvx");var b=r("vdVY");var g={snapshot:{translation:"Storytelling.library.snapshot",type:"snapshot"},text:{translation:"Storytelling.library.text"},shapes:{translation:"Storytelling.library.shape"},effects:{translation:"Storytelling.library.effect"},media:{translation:"Storytelling.library.media"}};function y(e,t,r,a){k(e);e.event=t;e.categories=n.a.extend(true,[],d["a"].timeCategories);n()(e.input.getLibButtonClicked()).addClass("goto-source-indication-border");switch(r){case"snapshot":w(e,a);e.currentLibrary=g.snapshot;break;case"text":E(e);e.currentLibrary=g.text;break;case"shapes":S(e);e.currentLibrary=g.shapes;break;case"effects":O(e);e.currentLibrary=g.effects;break;default:break}}function w(e,t){function r(){p["a"].getLibraryContent(t,r).then((function(t){e.snapshots=t;e.empty=e.snapshots.length<1;e.helperSize={height:15,width:21};e.editable=t.some((function(e){return e.permissions.update||e.permissions.remove}))}))}r()}function E(e){e.texts=d["a"].textTemplates;e.helperSize={height:12,width:12};e.empty=false}function S(e){e.shapes=d["a"].shapeTemplates;e.helperSize={height:6,width:6};e.empty=false}function O(e){e.effects=n.a.extend(true,{},d["a"].effectTemplates);e.helperSize={height:2.5,width:11};e.empty=false}function x(e){var t=n()(".qv-story-library-item.snapshot");var r=[];t.each((function(){n()(this).find("input").prop("checked")&&r.push(n()(this).scope().snapshot.qInfo.qId)}));e.afterRemoveLength=e.snapshots.length-r.length;r.forEach((function(e){p["a"].remove(e)}));e.isAnyTicked=false}function k(e){n()(document).on("keydown.snapshotLibrary",(function(t){D(t)&&e.input.closePopover()}))}function j(){n()(document).off("keydown.snapshotLibrary")}function D(e){var t=(e.ctrlKey||e.metaKey)&&!e.altKey;return t&&(37===e.which||39===e.which)}var C=["$scope","$element",function(e,t){e.show=true;e.showMiniLibrary=v["a"].state!==v["a"].States.editstory;e.currentLibrary=null;e.helperSize=null;e.editable=false;e.inEdit=false;e.empty=false;e.isAnyTicked=false;e.expandClicked=function(e){e.expanded=!e.expanded};e.getIconName=function e(t){return f["a"].getIconName(t)};e.enterEdit=function(){e.inEdit=true};e.leaveEdit=function(){e.inEdit=false;e.isAnyTicked=false};e.deleteSnapshots=function(){x(e)};e.onCheckboxClick=function(){var t=n()(".qv-story-library-content ul");e.isAnyTicked=false;t.children().each((function(){n()(this).find("input").prop("checked")&&(e.isAnyTicked=true)}))};e.hidePopover=function(){e.show=false};e.cleanUp=function(){var t=e.input.getLibButtonClicked();t&&n()(t).removeClass("goto-source-indication-border");j();e.input.cleanUp()};e.itemDblClick=function t(r){if(e.showMiniLibrary)return;e.input.closePopover();v["a"].model.app.getObject(v["a"].slideId).then((function(t){e.snapshots?h["a"].addSnapshot(e,r,t):e.texts?h["a"].addText(e,r,t):e.shapes&&h["a"].addShape(e,r,t)}))};u["a"].on("start.storytellingLibrary",e.input.closePopover);s.a.utils.touch&&t.on("touchforcechange",(function(){}));e.$on("$destroy",(function(){e.cleanUp();u["a"].off("start",e.input.closePopover);s.a.utils.touch&&t.off("touchforcechange");p["a"].unbindList()}));y(e,e.input.event,e.input.library,e.input.objectId)}];var q=C;var I=r("Hm/e");var T=r("acVu");var A;var P;var M=false;function N(e){(e.parent().hasClass("qv-panel-story-right")||e.parent().hasClass("qv-panel-story-sub-toolbar"))&&e.on("mousedown.snapshotLibrary",(function(){M=true}))}function R(e){if(e.parent().hasClass("qv-panel-story-right")||e.parent().hasClass("qv-panel-story-sub-toolbar")){e.off("mousedown.snapshotLibrary");M=false}}function L(e){return M&&e===P}var V=t["a"]={openPopover:function e(t){var r=t.event.currentTarget;var a=!!t.objectId;var c="snapshot"===t.library?350:230;var s=a?300:500;A&&A.close();if(L(r)){R(n()(r));P=null;return}l["a"].load();N(n()(r));P=r;var u={template:o,controller:q,input:{event:t.event,library:t.library,objectId:t.objectId,isZoomed:t.isZoomed,width:c,getLibButtonClicked:function e(){return P},cleanUp:function e(){M||R(n()(r))},closePopover:function e(){if(A){A.close();A=null}}}};var d=r.getBoundingClientRect();var f=window.innerWidth;var p=window.innerHeight;if("snapshot"!==t.library||I["a"].canFitPopoverOutsideElement(d,c+50,s,f,p)){a||(u.dock=Object(T["b"])("NEW_STORY")?"right":"left");u.alignTo=r;A=i["default"].getService("luiPopover").show(u)}else{u.x=t.event.pageX;u.y=t.event.pageY;A=i["default"].getService("luiPopover").showToPosition(u)}A.closed.then((function(){r.blur()}))}}},"6Lvx":function(e,t,r){"use strict";var a=r("4nJ1");var n=r("+nQQ");var i=r("fXVZ");var o=r("1oJt");var l=r("sWge");var c=r("MGTR");function s(e,t){t.visualization="text";t.visualizationType=e.textType;t.ratio=e.maintainRatio;t.style={color:"#6E6E6E",text:""}}function u(e,t){t.visualization="shape";t.visualizationType=e.shape;t.ratio=e.maintainRatio;t.dataPath=e.src;t.style={color:"#000000"}}function d(e,t){t.visualization="image";t.ratio=e.maintainRatio;t.srcPath={qStaticContentUrlDef:null}}function f(e,t,r,a){t.ratio=true;t.visualization="snapshot";t.visualizationType=a;t.style={id:e}}function p(e,t){if(e.layout.qChildList&&e.layout.qChildList.qItems.length>n["a"].maxNumberOfSlideItems)return;var r;t.position["z-index"]=e.layout.qChildList.qItems.length+4;if(t.copiedFromSlide&&t.isEmbeddedSnapshot){r=t.position;delete t.position}o["a"].get().then((function(a){a.startGroup().then((function(o){i["a"].create(t,e).then((function(e){var i=[];var s=false;n["a"].lastObjAdded.id=e.id;if("snapshot"===t.visualization)if(t.copiedFromSlide&&t.isEmbeddedSnapshot){i.push(v(e,r,t.id));if("cut"===t.action){var u=function r(i){if(n["a"].lastObjAdded.id===i){m(e.app,t.id,t.copiedFromSlide).then((function(){a.endGroup(o)}));c["a"].unsubscribe("/story/snapshotReadyForId",r)}};c["a"].subscribe("/story/snapshotReadyForId",u);s=true}}else{i.push(h(e,t));"cut"===t.action&&i.push(m(e.app,t.id,t.copiedFromSlide))}else"cut"===t.action&&i.push(m(e.app,t.id,t.copiedFromSlide));l["a"].all(i).then((function(){s||a.endGroup(o)}))}))}))}))}function v(e,t,r){return e.copyFrom(r).then((function(){return e.getProperties().then((function(r){var n=a["a"].extend(true,r,{position:t});return e.setProperties(n)}))}))}function m(e,t,r){return e.getObject(r).then((function(e){return e.destroyChild(t)}))}function h(e,t){return e.embedSnapshotObject(t.style.id).then((function(){if(t.effectPath)return b(e,t);return}))}function b(e,t){return e.getSnapshotObject().then((function(e){return e.getProperties().then((function(r){var n=a["a"].extend(true,r,t.layout);return e.setProperties(n)}))}))}function g(e){var t=e.object.size.w/e.object.size.h;var r;var a;var i;var o;var l=n["a"].getGridOptions().columns;var c=n["a"].getGridOptions().rows;if(e.parent.w>e.parent.h){r=e.object.size.h/e.parent.h;i=c*r;o=i*t;if(o>l){o=l;i=o/t}}else{a=e.object.size.w/e.parent.w;o=l*a;i=o/t;if(i>c){i=c;o=i*t}}return{rows:Math.round(i),cols:Math.round(o)}}function y(e){var t=n["a"].getGridOptions().cellSize;return{width:t.height*e.helperSize.height,height:t.width*e.helperSize.width}}function w(e,t){var r=n["a"].getGridOptions().cellSize;var a=n["a"].getGridOptions().columns*r.width;var i=e;var o=n["a"].getGridOptions().rows*r.height;var l=t;var c=o/2-l/2;var s=a/2-i/2;c="".concat((Math.round(c/r.height)*r.height/o*100).toString(),"%");s="".concat((Math.round(s/r.width)*r.width/a*100).toString(),"%");return{top:c,left:s}}function E(e,t){var r=S().width;var a=S().height;e="".concat((e/r*100).toString(),"%");t="".concat((t/a*100).toString(),"%");return{width:e,height:t}}function S(){var e=n["a"].getGridOptions().cellSize;var t=n["a"].getGridOptions().columns*e.width;var r=n["a"].getGridOptions().rows*e.height;return{width:t,height:r}}function O(e,t,r){e.width=E(t,r).width;e.height=E(t,r).height;e.top=w(t,r).top;e.left=w(t,r).left;return e}var x={};var k={position:x};t["a"]={addText:function e(t,r,a){if(t.hasOwnProperty("position"))k.position=t.position;else{var i=n["a"].getGridOptions().cellSize;var o=y(t).width;var l=y(t).height;if("title"===r.textType){l=3*i.height;o=19*i.width}k.position=O(k.position,o,l)}s(r,k);p(a,k)},addSnapshot:function e(t,r,a){if(t.hasOwnProperty("position"))k.position=t.position;else{var i=n["a"].getGridOptions().cellSize;var o=r.qData.snapshotData;var l=g(o);var c=n["a"].getGridOptions();var s=l.rows>=c.rows?(c.rows-1)*i.height:i.height*l.rows;var u=l.cols>=c.columns?(c.columns-1)*i.width:i.width*l.cols;k.position=O(k.position,u,s)}f(r.qInfo.qId,k,a,r.qData.visualizationType);p(a,k)},addShape:function e(t,r,a){if(t.hasOwnProperty("position"))k.position=t.position;else{var n=y(t).width;var i=y(t).height;k.position=O(k.position,n,i)}u(r,k);p(a,k)},addMedia:function e(t,r,a){d(r,t);p(a,t)},addItemToSlide:p}},"7Sku":function(e,t,r){"use strict";var a=r("GMLQ");a["a"].directive("qvTransparentOverlay",[function(){return{template:'<div class="transparent-overlay"><div class="transparent-overlay-scroll"></div></div>',replace:true,restrict:"E"}}])},"A+Ht":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var a=r("mXGw");var n=r.n(a);function i(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function l(e){i(o,a,n,l,c,"next",e)}function c(e){i(o,a,n,l,c,"throw",e)}l(void 0)}))}}function l(e,t){return f(e)||d(e,t)||s(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function f(e){if(Array.isArray(e))return e}function p(e,t){var r=Object(a["useState"])(null),n=l(r,2),i=n[0],c=n[1];var s=Object(a["useState"])(null),u=l(s,2),d=u[0],f=u[1];Object(a["useEffect"])((function(){var r=true;function a(){c(null);f(new Error("Object was closed"))}function n(){return l.apply(this,arguments)}function l(){l=o(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function n(o){while(1)switch(o.prev=o.next){case 0:o.prev=0;o.next=3;return t.getObject(e);case 3:i=o.sent;if(r){f(null);c(i);i.Closed.bind(a)}o.next=10;break;case 7:o.prev=7;o.t0=o["catch"](0);if(r){f(o.t0);c(null)}case 10:case"end":return o.stop()}}),n,null,[[0,7]])})));return l.apply(this,arguments)}t&&n();return function(){r=false;i&&i.Closed.unbind(a)}}),[t,e]);return[i,d]}},CHKu:function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("W0B4");var o=r.n(i);var l=r("0ghn");function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return c.apply(this,arguments)}var s=a["createElement"]("g",{fill:"none",fillRule:"evenodd"},a["createElement"]("path",{stroke:"#55565C",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M49.58 96H152.92c3.344 0 6.081-2.72 6.081-6.046V8.046C159 4.72 156.263 2 152.919 2H38.082C34.737 2 32 4.72 32 8.046V42.15M33 13.5h126"}),a["createElement"]("path",{fill:"#55565C",d:"M41 8a1 1 0 11-2 0 1 1 0 012 0m5 0a1 1 0 11-2.001-.001A1 1 0 0146 8m6 0a1 1 0 11-2.001-.001A1 1 0 0152 8"}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",strokeWidth:1.5,d:"M165 96.5h2"}),a["createElement"]("path",{stroke:"#009A4D",strokeDasharray:"3.031 3.031",strokeLinecap:"round",strokeWidth:1.5,d:"M170.743 96h15.319c4.384 0 7.938-2.204 7.938-4.923V6.922C194 4.205 190.446 2 186.062 2H169"}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",strokeWidth:1.5,d:"M167 1.5h-2"}),a["createElement"]("path",{stroke:"#55565C",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M59 8.5h39M41 121.342V53.658C41 51.646 39.358 50 37.351 50H4.649C2.642 50 1 51.646 1 53.658v67.684C1 123.354 2.642 125 4.649 125h32.702c2.007 0 3.649-1.646 3.649-3.658zM1 60.5h40m-40 56h40m-24-61h7m-5 66h3m81-113h7"}),a["createElement"]("path",{stroke:"#55565C",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.349 74.384L7.1 97.848c-.288.511.073 1.152.652 1.152h26.494c.58 0 .94-.641.651-1.152L21.652 74.384a.745.745 0 00-1.303 0zM20.5 81v8m0 4.072v.856m74.849-53.544L82.1 63.846c-.288.513.073 1.154.652 1.154h26.494c.58 0 .94-.641.651-1.154L96.652 40.384a.744.744 0 00-1.303 0zM95.5 47v8m0 4.072v.856"}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",strokeWidth:1.5,d:"M183 77l-6-6m6 7l-6 6m-7-6.5h13m-48-.5l7-6m-7 7l7 6m7-6.5h-14"}));function u(e){return a["createElement"]("svg",c({width:195,height:126},e),s)}var d="../../img/core/Display_size_not_supported_green.d723431452e3c691bc778abd9a7d24d2.svg";var f=function e(t){var r=t.children;var a=Object(l["c"])();return n.a.createElement("div",{className:"qs-view-error","data-tid":"unsupported-device"},n.a.createElement("div",{className:"qs-view-error__center"},n.a.createElement("div",{className:"qs-view-error__image"},n.a.createElement(u,null)),n.a.createElement("div",{className:"qs-view-error__title"},a("UnsupportedDisplaySize.Title")),n.a.createElement("div",{className:"qs-view-error__message"},a("UnsupportedDisplaySize.Message")),r?n.a.createElement("div",null,r):null))};f.propTypes={children:o.a.node};f.defaultProps={children:null};var p=t["a"]=f},CIhp:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var a=r("mXGw");var n=r.n(a);function i(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function l(e){i(o,a,n,l,c,"next",e)}function c(e){i(o,a,n,l,c,"throw",e)}l(void 0)}))}}function l(e,t){return f(e)||d(e,t)||s(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function f(e){if(Array.isArray(e))return e}function p(e){var t=Object(a["useState"])(null),r=l(t,2),n=r[0],i=r[1];var c=Object(a["useState"])(null),s=l(c,2),u=s[0],d=s[1];Object(a["useEffect"])((function(){var t=true;function r(){return a.apply(this,arguments)}function a(){a=o(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function r(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return e.getCurrentSelectionObject();case 3:a=n.sent;if(t){d();i(a)}n.next=11;break;case 7:n.prev=7;n.t0=n["catch"](0);d(n.t0);i();case 11:case"end":return n.stop()}}),r,null,[[0,7]])})));return a.apply(this,arguments)}r();return function(){t=false}}),[e]);return[n,u]}},CXZG:function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i=r("Z9ZH");var o=r.n(i);var l=r("0m+j");function c(e,t,r){var a=false;var i=null;var c=r.cond||function(){return true};var s=r.onStart||function e(){};var u=r.onStop||function e(){};var d=r.isEnabled||function(){return true};function f(e){if("string"===typeof r.elem)return n()(r.elem)[0];if("function"===typeof r.elem)return r.elem(e);return r.elem}function p(e){if("function"===typeof r.info)return r.info(n()(e.target).scope(),e);return r.info}function v(e){n()(e.target).off("remove",v);a.cancel();u(e,true)}e.on("qv-press",t,(function(e){a=null;var t=p(e);if(!d(t,e)){a=false;return}r.allowScroll||o.a.utils.touch||e.preventDefault()}));e.on("qv-swipe",t,(function(e){if(false===a)return;if(true===a){clearTimeout(i);i=null}else if(a){n()(e.target).off("remove",v);a.update(e);a.end(e);u(e,false)}a=false}));e.on("qv-swipecancel",t,(function(e){if(false===a)return;if(true===a){clearTimeout(i);i=null}else if(a){n()(e.target).off("remove",v);a.cancel();u(e,true)}a=false}));e.on("qv-swipestart qv-swipeupdate",t,(function(e){if(false===a)return;if(!a){var t=c(e.gestureData.swipe);if(t){a=true;o.a.WebkitHack.prevent();i=setTimeout((function(){i=null;n()(e.target).on("remove",v);s(e,n()(e.target).scope());var t=f(e);var r=p(e);a=l["a"].startDrag(t,r);a&&a.update(e)}),0)}else false===t&&(a=false)}if(a){e.preventDefault();true!==a&&a.update(e)}}))}t["a"]={addDrag:c}},Cv2a:function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i=r("mWu2");i["default"].filter("filterDate",[function(){return function(e,t){var r=[];var a=(new Date).toDateString();var i=new Date;var o=(i.getDay()+6)%7;i=new Date(i-24*o*60*60*1e3);switch(t.category.name){case"today":n.a.each(e,(function(e,t){new Date(t.qData.timestamp).toDateString()===a&&r.push(t)}));break;case"thisweek":n.a.each(e,(function(e,t){t.qData.timestamp>i.getTime()&&new Date(t.qData.timestamp).toDateString()!==a&&r.push(t)}));break;case"older":n.a.each(e,(function(e,t){new Date(t.qData.timestamp).toDateString()!==a&&t.qData.timestamp<i.getTime()&&r.push(t)}));break;default:return e}t.category.isEmpty=r.length<1;return r}}])},DChB:function(e,t,r){"use strict";function a(e){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return a(e)}var n={};function i(e){var t=e.component;if("string"===typeof t)return n[t];if("object"===a(t))return t;switch(e.type){case"items":return n.items;case"boolean":return n.checkbox;case"array":if(e.items)return n.items;return n.slider;default:throw e.type?new Error('No component found for type" '.concat(e.type,'"')):new Error("Missing component/type in definition")}}function o(e,t){if(n[e])throw new Error("Soft option component already exists: ".concat(e));n[e]=t}t["a"]={findComponent:i,addComponent:o,getComponent:function e(t){return n[t]}}},EnO5:function(e,t,r){"use strict";r.d(t,"b",(function(){return v}));r.d(t,"a",(function(){return h}));var a=r("mXGw");var n=r.n(a);var i=r("R2Yu");var o=r("5ezW");var l=r("4nJ1");function c(e,t){return p(e)||f(e,t)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function f(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function p(e){if(Array.isArray(e))return e}function v(e,t){var r=[];var a=0;var n=new RegExp(l["a"].escapeRegExp(t),"gi");var i=false;while(!i){var o=n.exec(e);if(!o){a<e.length&&r.push({text:e.substring(a),match:false});i=true;return r}o.index>a&&r.push({text:e.substring(a,o.index),match:false});r.push({text:e.substring(o.index,n.lastIndex),match:true});a=n.lastIndex}return r}function m(e,t,r,a){return v(e,t,a).map((function(e){if(e.match)return"<span ".concat(i["a"].encodeForAttr("class",r),">").concat(i["a"].encodeForHTML(e.text),"</span>");return i["a"].encodeForHTML(e.text)})).join("")}function h(e,t){var r=Object(a["useState"])(""),n=c(r,2),i=n[0],l=n[1];Object(a["useEffect"])((function(){var r=o["a"].string(t);if(!r){l(e);return}var a=m(o["a"].string(e),t,"lui-texthighlight",e);l(a)}),[e,t]);return[i]}},"Hm/e":function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i=r("6uJb");var o=r("mWu2");var l='<div class="snapshot-info">\n\t<div id="title-container">\n\t\t<p class="snapshot-title">{{ snapshotTitle }}</p>\t\t\n\t\t<p class="snapshot-date">{{ formattedTimestamp }}</p>\n\t</div>\n\t<div class="annotation-container">\n\t\t<div class="snapshot-annotation"\n\t\t   ng-class="{ \'edit\': edit }"\n\t\t   ng-show="!editingAnnotation"\n\t\t   ng-click="enterEdit( snapshot.permissions.update ) && edit"\n\t\t   title="{{snapshot.qMeta.annotation.length > 0 ? snapshot.qMeta.annotation : \'\'}}"\n\t\t>\n\t\t\t{{snapshot.qMeta.annotation.length > 0 ? snapshot.qMeta.annotation : \'\'}}\n\t\t</div>\n\t\t<div class="snapshot-annotation"\n\t\t   ng-if="editingAnnotation"\n\t\t   ng-class="{ \'editing-title\': editingAnnotation }">\n\t\t\t<textarea type="text" qva-outside="leaveEdit()" qva-focus="editingAnnotation" class="snapshot-annotation-input" maxlength="255" rows="2" ng-model="snapshot.qMeta.annotation"></textarea>\n\t\t</div>\n\t</div>\n</div>\n\n';var c=r("7WGe");var s=r("Cv2a");var u=r("6Lvx");var d=r("vdVY");var f=r("hIk4");function p(e,t){c["a"].get(e).then((function(e){e.getProperties().then((function(r){n.a.extend(true,r,t);e.setProperties(r)}))}))}function v(e,t,r){var a;if("width"===r){a=e.left+e.width/2;return a>0&&a<t}if("height"===r){a=e.top+e.height/2;return a>0&&a<t}return}function m(e,t,r,a,n){return(e.left>t||a-e.right>t)&&v(e,n,"height")||(e.top>r||n-e.bottom>r)&&v(e,a,"width")}o["default"].directive("storyItemsLibrarySnapshot",[function(){return{restrict:"E",replace:true,scope:{edit:"=",snapshot:"="},template:l,link:function e(t,r){var a=new Date(t.snapshot.qData.timestamp);t.formattedTimestamp=Intl.DateTimeFormat(i["default"].locale,{year:"numeric",month:"long",day:"numeric",timeZone:Object(f["c"])()}).format(a);t.id=t.snapshot.qInfo.qId;t.editingAnnotation=false;t.enterEdit=function(e){if(!t.edit)return;if(!e)return;t.editingAnnotation=true};t.snapshot.qData.libraryTitle.length?t.snapshotTitle=t.snapshot.qData.libraryTitle:t.snapshotTitle=i["default"].get("Storytelling.snapshot.Untitled");t.leaveEdit=function(){if(!t.edit||!t.editingAnnotation)return;r.find(".snapshot-title-input").blur();t.editingAnnotation=false;p(t.id,{qMetaDef:{annotation:t.snapshot.qMeta.annotation}});r.off()}}}}]);var h=t["a"]={canFitPopoverOutsideElement:m,isMiddleVisible:v}},IHeB:function(e,t,r){"use strict";var a=r("z5ZW");var n="reload-started-by-scripteditor";function i(){a["a"].publish(n)}function o(e){a["a"].subscribe(n,e)}t["a"]={reloadStarted:i,onReloadStarted:o}},KS3c:function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i=r("mWu2");var o='<div class="qv-panel-sheet" ng-class="{\'qv-custom-size\': isCustomSize()}">\t\n\t<qv-odag-link-drop-help-target></qv-odag-link-drop-help-target>\n\t<div class="sheet-title-container" ng-if="!exp.isSmallDevice" qva-apply-style="sheetTitle.headerBGStyle" tid="{{sheetTitle.tid}}">\n\t\t<div id="sheet-title" qva-activate="onClickSheetTitle()" ng-if="grid.isSheet" class="{{sheetMode}}" ng-class="sheetTitle.sheetTitleClass" ng-style="sheetTitle.fontStyle" data-sheet-id="{{grid.sheetId}}">\n\t\t\t<span class="sheetDraftIndicator" ng-if="grid.isDraft || grid.isDraftOwner" q-translation="{{grid.isDraft ? \'Common.Draft\' : \'Common.Updating\'}}"></span>\n\t\t\t<div class="triangle" ng-if="grid.isDraft || grid.isDraftOwner"></div>\n\t\t\t<span class="pushTitle" ng-if="grid.isDraft || grid.isDraftOwner" q-translation="{{grid.isDraft ? \'Common.Draft\' : \'Common.Updating\'}}"></span>\n\t\t\t<span qva-direction x-dir-text="{{grid.sheetTitle}}" class="sheet-title-text" title="{{grid.sheetTitle}}">{{grid.sheetTitle}}</span>\n\t\t\t<div class="sheet-title-logo-img" ng-if="!!sheetTitle.logoImgSrc">\n\t\t\t\t<img ng-src="{{ sheetTitle.logoImgSrc }}" draggable="false" class="img-no-drag"/>\n\t\t\t</div>\n\t\t\t<div class="sheet-title-bumper" ng-if="sheetTitle.logoPosition === \'center\'"></div>\n\t\t</div>\n\t</div>\n\t<div id="master-info" ng-if="grid.isMaster" qv-master-info model="grid.cells[0].model" ext="grid.cells[0].ext"></div>\n\t<div id="grid-wrap" class="borderbox {{sheetMode}}" ng-class="{ \'grid-wrap-zoom-cell\': !!grid.zoomCell }"  ng-style="grid.permissionStyle" qva-activate="grid.gridToggleActive( )">\n\t\t<div id="hint" qva-context-menu="onHintContextMenu($event)" ng-hide="classifyOnDemandEnabled && grid.hintHidden"></div>\n\t\t<qv-grid model="model" sheet-mode="sheetMode" grid="grid" context-menu-fn="onCellContextMenu" radial-context-menu-fn="onCellRadialContextMenu"></qv-grid>\t\n\t\t<permission-overlay ng-if="grid.isSheet && editmode && model.layout && !model.layout.permissions.update"  model="model" grid="grid" sheet-mode="sheetMode"></permission-overlay>\n\t</div>\n\t<div ng-if="exp.isSmallDevice && !grid.zoomCell && !editmode" class="quick-navigation-wrapper">\n\t\t<qv-quick-navigation is-small-device="exp.isSmallDevice" sheet-title="grid.sheetTitle" font-color="sheetTitle.fontColor" bg-color="sheetTitle.bgColor" logo-img-src="sheetTitle.logoImgSrc" logo-placement="sheetTitle.logoPosition"></qv-quick-navigation>\n\t</div>\n</div>\n';var l=r("d/Ce");var c=r("z4LI");var s=r("5xMv");var u=r("6Z/P");var d=r("MGTR");var f=r("sCDE");function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}function m(e,t,r){t&&v(e.prototype,t);r&&v(e,r);return e}var h=function(){function e(){p(this,e);this.currentState=0}m(e,[{key:"setCurrentState",value:function e(t){t!==this.currentState&&(this.currentState=t)}},{key:"isState",value:function e(t){return this.currentState===t}},{key:"getState",value:function t(r,a,n){var i=e.States.noHint;r&&a&&a.update&&(i=n?e.States.dragHint:e.States.editHint);return i}},{key:"isHintState",value:function t(r,a){return!!r&&r.update&&a&&!this.isState(e.States.noHint)}},{key:"isAuthoringHint",value:function t(){return this.isState(e.States.dragHint)||this.isState(e.States.dropHint)}},{key:"isEditHint",value:function t(){return this.isState(e.States.editHint)}}]);return e}();h.States={noHint:0,dragHint:1,dropHint:2,editHint:3};var b=h;var g='<div class="grid-hint-wrapper" ng-if="hasHint()">\n\t<div class="grid-hint">\n\t\t<div class="grid-hint-stage-0" ng-show="ShowEditHint()" tid="grid-hint-edit">\n\t\t\t<img ng-src="{{ analysisHintImg }}" draggable="false">\n\t\t\t<div class="hint-header" q-translation="SheetView.Content.GettingStarted.Title"></div>\n\t\t\t<div ng-if="!isSmallDevice" class="hint-description" q-translation="SheetView.Content.GettingStarted.Analyse" q-html-translation-indexes=\'["<div class=\\"qv-grid-button lui-buttongroup__button edit-sheet-button\\" ><span class=\\"lui-icon lui-button__icon lui-icon--edit\\"></span><span class=\\"lui-button__text qs-sheet-toolbar-edit-title\\">{{editSheetLabel}}</span></div>"]\'></div>\n\t\t\t<div ng-show="ShowFinishedMessage()" class="hint-description" q-translation="SheetView.Content.GettingStarted.Assets2" q-html-translation-indexes=\'["<i class=\\"lui-icon lui-icon--edit\\"></i>"]\'></div>\n\t\t</div>\n\t\t<div class="grid-hint-editmode" ng-show="ShowAuthoringHint()">\n\t\t\t<div class="stages">\n\t\t\t\t<div class="grid-hint-stage-1" hint-fadein="ShowDragHint" hint-fadeout="ShowDropHint" tid="grid-hint-drag">\n\t\t\t\t\t<div class="hint-animation"></div>\n\t\t\t\t\t<div class="hint-header" q-translation="SheetView.Content.GettingStarted.EditTitle"></div>\n\t\t\t\t\t<div class="hint-description" q-translation="{{hintText}}"></div>\n\t\t\t\t\t<div class="hint-description" q-translation="{{hintTextSecondary}}" q-html-translation-indexes=\'["<div class=\\"qv-grid-button qv-grid-button-edit lui-buttongroup__button\\" ><span class=\\"lui-icon lui-button__icon lui-icon lui-icon--tick\\"></span><span class=\\"lui-button__text qs-sheet-toolbar-edit-title\\">{{hintEditButtonText}}</span></div>"]\'></div>\n\t\t\t\t\t\x3c!-- Navigate between the different assets you can use on your sheet by switching the tabs found on the lower left corner.--\x3e\n\t\t\t\t</div>\n\t\t\t\t<div class="grid-hint-stage-2" ng-if="!dropZones" hint-fadein="ShowDropHint" hint-fadeout="ShowDragHint" style="display: none;">\n\t\t\t\t\t<div class="hint-header"> </div>\n\t\t\t\t\t<div class="hint-description" q-translation="SheetView.Content.GettingStarted.Description2"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>';var y=r("AWT7");var w=r("B52N");var E=r("S1lg");var S={v:"5.6.5",fr:29.9700012207031,ip:0,op:150.000006109625,w:212,h:118,nm:"Comp 2",ddd:0,assets:[{id:"comp_0",layers:[{ddd:0,ind:1,ty:4,nm:"Hand Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:15,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:126,s:[100]},{t:138.000005620855,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[131,117,0],to:[-39.333,-5.5,0],ti:[9.833,3,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[72,99,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:36,s:[72,99,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:67,s:[152,109,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:97,s:[152,109,0],to:[0,0,0],ti:[0,0,0]},{t:120.0000048877,s:[159,79,0]}],ix:2},a:{a:0,k:[13,18,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[.4,1.05],[.8,2.651],[-2.251,-1.101],[0,0],[-2.001,-.149],[0,0],[-1.973,-.629],[0,0],[-2.651,-2.551],[0,0],[8.404,-3.601],[0,0],[1.601,5.502],[-2.252,-.801]],o:[[0,0],[-.4,-1.051],[-.801,-2.651],[2.252,1.1],[0,0],[2.001,.15],[0,0],[1.974,.629],[0,0],[2.652,2.552],[0,0],[-8.406,3.603],[0,0],[-1.601,-5.504],[0,0]],v:[[-6.204,1.35],[-6.454,-1.301],[-13.557,-14.109],[-9.406,-16.51],[-3.456,-7.689],[-1.15,-9.857],[1.594,-7.249],[4.025,-8.277],[6.419,-4.488],[9.255,-4.504],[8.885,7.876],[5.954,14.007],[-3.658,11.417],[-10.176,6.704],[-7.523,-1.301]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[14.347,17.927],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[.8,2.651],[-2.252,-1.1],[0,0],[-2.001,-.15],[0,0],[-1.973,-.629],[0,0],[-2.651,-2.551],[0,0],[8.405,-3.602],[0,0],[1.601,5.503],[-2.251,-.801]],o:[[0,0],[-.401,-1.051],[-.801,-2.652],[2.251,1.101],[0,0],[2.001,.15],[0,0],[1.973,.629],[0,0],[2.651,2.552],[0,0],[-8.405,3.602],[0,0],[-1.601,-5.504],[0,0]],v:[[-4.479,-.171],[-4.878,-1.222],[-11.982,-14.029],[-7.831,-16.431],[-1.883,-7.61],[.424,-9.777],[3.169,-7.169],[5.6,-8.197],[7.993,-4.41],[10.831,-4.424],[10.46,7.956],[7.529,14.087],[-2.083,11.496],[-8.6,6.783],[-5.949,-1.222]],c:true},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"fl",c:{a:0,k:[.999999940162,.999999940162,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:false},{ty:"tr",p:{a:0,k:[12.772,17.848],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:4,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:false}],ip:0,op:150.000006109625,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Selection Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:38,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:67,s:[100]},{t:75.0000030548126,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:36,s:[54,82,0],to:[13.333,1.667,0],ti:[-13,-.833,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:67,s:[134,92,0],to:[13,.833,0],ti:[.333,.833,0]},{t:75.0000030548126,s:[132,87,0]}],ix:2},a:{a:0,k:[13,4,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:30,s:[85,37,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:38,s:[100,100,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:67,s:[100,100,100]},{t:75.0000030548126,s:[0,0,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.104,0],[0,0],[0,1.104],[0,0],[-1.104,0],[0,0],[0,-1.104],[0,0]],o:[[0,0],[-1.104,0],[0,0],[0,-1.104],[0,0],[1.104,0],[0,0],[0,1.104]],v:[[11,4],[-11,4],[-13,2],[-13,-2],[-11,-4],[11,-4],[13,-2],[13,2]],c:true},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"fl",c:{a:0,k:[.145022223977,.501110780005,.154601856306,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:false},{ty:"tr",p:{a:0,k:[13,4],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:false}],ip:30.0000012219251,op:97.000003950891,st:30.0000012219251,bm:0},{ddd:0,ind:5,ty:4,nm:"ChartBorder Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:67,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:75,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:126,s:[100]},{t:138.000005620855,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[96,96,0],ix:2},a:{a:0,k:[96,96,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.209,0],[0,0],[0,-2.209],[0,0],[-2.21,0],[0,0],[0,2.209],[0,0]],o:[[0,0],[-2.21,0],[0,0],[0,2.209],[0,0],[2.209,0],[0,0],[0,-2.209]],v:[[13.781,-14.288],[-13.781,-14.288],[-17.781,-10.288],[-17.781,10.288],[-13.781,14.288],[13.781,14.288],[17.781,10.288],[17.781,-10.288]],c:true},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-1.654],[0,0],[1.654,0],[0,0],[0,1.654],[0,0],[-1.655,0]],o:[[1.654,0],[0,0],[0,1.654],[0,0],[-1.655,0],[0,0],[0,-1.654],[0,0]],v:[[13.781,-13.288],[16.781,-10.288],[16.781,10.288],[13.781,13.288],[-13.781,13.288],[-16.781,10.288],[-16.781,-10.288],[-13.781,-13.288]],c:true},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:false},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:false},{ty:"fl",c:{a:0,k:[.145022223977,.501110780005,.154601856306,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:false},{ty:"tr",p:{a:0,k:[131.234,86.57],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:false}],ip:67.0000027289659,op:150.000006109625,st:7.00000028511585,bm:0},{ddd:0,ind:7,ty:4,nm:"ChartPlate_right Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:53,s:[20]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:67,s:[20]},{t:75.0000030548126,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[96,96,0],ix:2},a:{a:0,k:[96,96,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.209,0],[0,0],[0,2.209],[0,0],[-2.21,0],[0,0],[0,-2.209],[0,0]],o:[[0,0],[-2.21,0],[0,0],[0,-2.209],[0,0],[2.209,0],[0,0],[0,2.209]],v:[[13.781,14.288],[-13.781,14.288],[-17.781,10.288],[-17.781,-10.287],[-13.781,-14.287],[13.781,-14.287],[17.781,-10.287],[17.781,10.288]],c:true},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"fl",c:{a:0,k:[.026204514971,.021821796193,.023235326655,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:false},{ty:"tr",p:{a:0,k:[131.233,86.57],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:false}],ip:57.0000023216576,op:75.0000030548126,st:12.00000048877,bm:0},{ddd:0,ind:9,ty:4,nm:"ChartPlate_left Outlines",sr:1,ks:{o:{a:0,k:20,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[96,96,0],ix:2},a:{a:0,k:[96,96,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.209,0],[0,0],[0,2.209],[0,0],[-2.21,0],[0,0],[0,-2.209],[0,0]],o:[[0,0],[-2.21,0],[0,0],[0,-2.209],[0,0],[2.209,0],[0,0],[0,2.209]],v:[[13.781,14.288],[-13.781,14.288],[-17.781,10.288],[-17.781,-10.287],[-13.781,-14.287],[13.781,-14.287],[17.781,-10.287],[17.781,10.288]],c:true},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"fl",c:{a:0,k:[.026204514971,.021821796193,.023235326655,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:false},{ty:"tr",p:{a:0,k:[91.671,86.57],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:false}],ip:42.0000017106951,op:57.0000023216576,st:12.00000048877,bm:0},{ddd:0,ind:11,ty:4,nm:"Base Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[96,96,0],ix:2},a:{a:0,k:[96,96,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[126.535,61.291],[138.428,61.291]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[144.427,61.291],[148.427,61.291]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.146002990124,.502076810949,.154600106034,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[68.89,67.555],[68.89,136.18]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1.5,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[43.428,113.679],[63.264,113.679]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[43.428,106.021],[63.264,106.021]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[43.428,98.03],[63.264,98.03]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[43.428,90.039],[63.264,90.039]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[43.428,82.046],[63.264,82.046]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[43.428,74.055],[63.264,74.055]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 9",np:2,cix:2,bm:0,ix:9,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-1.06],[1.06,0],[0,1.06],[-1.059,0]],o:[[0,1.06],[-1.059,0],[0,-1.06],[1.06,0]],v:[[1.987,-.001],[0,1.987],[-1.986,-.001],[0,-1.986]],c:true},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"fl",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:false},{ty:"tr",p:{a:0,k:[44.095,61.292],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 10",np:4,cix:2,bm:0,ix:10,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[38.609,67.283],[153.39,67.283]],c:false},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1.5,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 11",np:2,cix:2,bm:0,ix:11,mn:"ADBE Vector Group",hd:false},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,1.761],[0,0],[1.76,0],[0,0],[0,-1.759],[0,0],[-1.76,0],[0,0]],o:[[0,0],[0,-1.759],[0,0],[-1.76,0],[0,0],[0,1.761],[0,0],[1.76,0]],v:[[58.014,37.37],[58.014,-37.37],[54.814,-40.57],[-54.815,-40.57],[-58.015,-37.37],[-58.015,37.37],[-54.815,40.57],[54.814,40.57]],c:true},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:false},{ty:"st",c:{a:0,k:[.258185382918,.223261231067,.254238233379,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1.5,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:false},{ty:"tr",p:{a:0,k:[96,96],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 12",np:2,cix:2,bm:0,ix:12,mn:"ADBE Vector Group",hd:false}],ip:0,op:150.000006109625,st:0,bm:0}]}],layers:[{ddd:0,ind:1,ty:0,nm:"Comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[106,59,0],ix:2},a:{a:0,k:[96,96,0],ix:1},s:{a:0,k:[138.542,138.542,100],ix:6}},ao:0,w:192,h:192,ip:0,op:900.000036657751,st:0,bm:0}],markers:[]};var O=null;var x=false;var k={setup:function e(t){if(!O&&!x){x=true;Object(E["a"])().then((function(e){var r={container:t[0],renderer:"svg",loop:true,autoplay:false,animationData:S};O=e.loadAnimation(r);O.play();x=false}))}},destroy:function e(){if(O){O.stop();O.destroy();O=null;x=false}}};var j=r("/2No");var D=r("6uJb");var C=r("GMLQ");C["a"].directive("hintFadein",["$timeout",function(e){return{restrict:"A",link:function t(r,a,n){r.$watch(n.hintFadein,(function(t){t&&e((function(){a.fadeIn({duration:250})}),250)}))}}}]);C["a"].directive("hintFadeout",[function(){return{restrict:"A",link:function e(t,r,a){t.$watch(a.hintFadeout,(function(e){e&&r.fadeOut({duration:250})}))}}}]);var q=r("acVu");var I={template:g,scope:true,controller:["$scope","$element","$timeout",function(e,t,r){var a=false;var i=null;var o=new b;o.setCurrentState(b.States.editHint);e.isSmallDevice=w["default"].isSmallDevice;function l(t){e.model=t;e.setSheet()}function s(t){e.isSmallDevice=t;e.setState()}Object(f["a"])(e,"model",(function(t){if("story"===t.qInfo.qType)return;a=0===t.cells.length;i=t.permissions;e.setState()}));e.setSheet=function(){e.model.getLayout().then((function(t){if("story"===t.qInfo.qType)return;a=0===t.cells.length;i=t.permissions;e.setState()}))};c["a"].SheetChanged.bind(l);w["default"].ViewChanged.bind(s);var u=e.$watch(c["a"].isInEditMode,(function(){e.setState();e.ShowFinishedMessage()}));function p(){e.ShowDragHint=o.isState(b.States.dragHint);e.ShowDropHint=o.isState(b.States.dropHint)}e.$watch(b.state,p);e.setState=function(){var t=o.getState(a,i,c["a"].isInEditMode(),e.isSmallDevice);t===b.States.editHint?e.setEditHint():t===b.States.dragHint?e.setDragHint():e.setNoHint()};e.analysisHintImg="".concat(j["a"].staticResourcesPath,"assets/images/empty_sheet.svg");e.editSheetLabel=D["default"].get("Toolbar.StartEditing");e.hintEditButtonIcon=Object(q["b"])("SUB_TOOLBAR")?"lui-icon--edit":"lui-icon--tick";e.hintEditButtonText=Object(q["b"])("SUB_TOOLBAR")?D["default"].get("Toolbar.StartEditing"):D["default"].get("Toolbar.DoneEditing");e.hasHint=function(){return o.isHintState(i,c["a"].inSheetView())};e.ShowAuthoringHint=function(){return o.isAuthoringHint()};e.ShowEditHint=function(){return o.isEditHint()};e.ShowFinishedMessage=function(){return c["a"].isInEditMode()};e.setNoHint=function(){k.destroy();o.setCurrentState(b.States.noHint);d["a"].unsubscribe(".sheethint")};e.setEditHint=function(){o.setCurrentState(b.States.editHint);d["a"].unsubscribe(".sheethint")};function v(){d["a"].subscribeOnce("/library/dragstop.sheethint",(function(t){var r=n()("#grid");t.pageX>r.offset().left&&t.pageX<r.offset().left+r.width()&&t.pageY>r.offset().top&&t.pageY<r.offset().top+r.height()&&(a=false);e.setDragHint()}))}e.setDragHint=function(){o.setCurrentState(b.States.dragHint);p();r((function(){k.setup(t.find(".hint-animation"))}));y["a"].load().then((function(t){e.hintText=t.fullMode?"SheetView.Content.GettingStarted.2020Assets":"SheetView.Content.GettingStarted.Library";e.hintTextSecondary="SheetView.Content.GettingStarted.2020Assets2";t.getActiveTabId()||t.expandTab(t.tabs[0])}));d["a"].unsubscribe(".sheethint");d["a"].subscribeOnce("/library/dragstart.sheethint",(function(t){if(t&&"odagLinkItem"===t.dragDropType){e.setNoHint();v()}else e.setDropHint()}))};e.setDropHint=function(){o.setCurrentState(b.States.dropHint);d["a"].unsubscribe(".sheethint");v();p()};if(c["a"].model){e.model=c["a"].model;e.setSheet()}e.$on("$destroy",(function(){u();k.destroy();c["a"].SheetChanged.unbind(l);w["default"].ViewChanged.unbind(s)}));e.dropZones=Object(q["b"])("DROP_ZONES")}]};var T=I;var A=r("aT3D");var P=r("H6Kg");var M=r("jaci");var N=r("k9vo");var R=r("UV1h");var L=r("0m+j");var V=r("Z9ZH");var _=r.n(V);var B='<div id="grid" ng-class="{ \'grid-cell-zoomed\': !!grid.zoomCell, \'resizing\' : grid.gridHandleActive }" data-render-state="0" ng-style="grid.sheetSize">\n\n\t<div ng-if="model.layout" id="snapshotAnnotationsContainer" snapshot-annotations></div>\n\n\t<div ng-if="editmode && !grid.zoomCell && !isSmallDevice" class="qv-gridguide-wrapper">\n\t\t<div ng-repeat="lineStyle in grid.verticalLines" class="qv-gridguide qv-gridguide-vertical" ng-style="lineStyle">\n\t\t\t<div class="qv-gridguide-inner"></div>\n\t\t</div>\n\t\t<div ng-repeat="lineStyle in grid.horizontalLines" class="qv-gridguide qv-gridguide-horizontal" ng-style="lineStyle">\n\t\t\t<div class="qv-gridguide-inner"></div>\n\t\t</div>\n\t</div>\n\n\t<div class="image-container" ng-if="classifyOnDemandEnabled && chartLoading" ng-style="chartLoadingCellStyle">\n\t\t<img ng-src="{{defaultChartImg}}" class="loader-image" />\n\t</div>\n\n\t<div ng-if="!cell.isEmpty || !isSmallDevice" class="cell qv-gridcell qvt-gridcell {{cell.autoMode ? \'auto-mode\' : \'\'}}"\n\t\tng-repeat="cell in grid.cells" qv-grid-cell="cell"\n\t\tng-class="classes" ng-style="cell.style"\n\t\tng-mouseenter="mouseEnter()" ng-mouseleave="mouseLeave()"\n\t\tng-keydown="keyDown( $event )"\n\t\tng-mousedown="mouseDown()"\n\t\tng-mouseup="mouseUp()"\n\t\tqva-activate="onCellClick( cell, $event )"\n\t\tqva-context-menu="contextMenuFn( $event, cell, model, grid )"\n\t\tqva-radial-context-menu="radialContextMenuFn( $event, cell, model, grid )"\n\t\ttabindex="{{tab}}"\n\t\ttid="{{cell.id}}"\n\t\tng-blur="onBlur()"\n    ng-focus="onFocus()">\n\n\t\t<label class="hidden-screen-reader-label" aria-live="assertive">{{gridScreenReader}}</label>\n\t\t<label class="hidden-screen-reader-label" id="sr-cell-status-label" aria-live="assertive"></label>\n\n\t\t<div ng-if="zooming" class="zoomBorder qv-animate"></div>\n\n\t\t<div class="object-and-panel-wrapper">\n\t\t\t<div class="object-wrapper" ng-class="{\'soft-props-open\': cell.showExploreMenu}">\n\t\t\t\t<qv-object tabindex="-1" ng-if="!cell.isEmpty" class="cell-content" object="cell.object" model="cell.model" options="cell.options" zoom-object="grid.toggleZoom(cell)" nav-menu="cell.navMenu" snapshot="cell.snapshot" ></qv-object>\n\t\t\t\t<qva-nav-menu options="cell.options" menu="cell.navMenu"></qva-nav-menu>\n\t\t\t</div>\n\t\t\t<qv-soft-property-panel object="cell.object" ng-if="cell.options.isZoomed && cell.object.hasSoftProperties" can-save-soft-properties="cell.options.canSaveSoftProperties" ng-hide="!cell.showExploreMenu" on-toggle="cell.toggleExploreMenu" show-explore-menu="cell.showExploreMenu"></qv-soft-property-panel>\n\t\t</div>\n\n\t\t<div ng-hide="!cell.showingObjectMenu" class="greyDim qv-animate fade ng-hide"></div>\n\t\t<qv-transparent-overlay ng-if="isSmallDevice && !grid.zoomCell && !cell.object.supportQuickMobile()" qva-activate="grid.zoom(cell)"></qv-transparent-overlay>\n\n\t\t<div ng-if="!isSmallDevice && !grid.zoomCell" ng-repeat="resize in cell.resize track by resize.dir"\n\t\t\tqv-grid-cell-handle\n\t\t\tclass="ignore-context-menu qv-gridresize-point qv-gridresize-{{resize.dir}}">\n\t\t\t<div class="visual-cue ignore-context-menu {{cell.autoMode ? \'auto-mode\' : \'\'}}"></div>\n\t\t</div>\n\n\t\t<div class="qv-grid-cell-position" ng-if="posInfo && !grid.zoomCell && cell.options.isActive && !isSmallDevice">⌖: ({{cell.pos.col}},{{cell.pos.row}}) ⤢ {{cell.pos.colspan}} x {{cell.pos.rowspan}}</div>\n\t</div>\n\n\t<qv-extend-sheet-target grid-model="model" ng-if="editmode && !grid.zoomCell && grid.extend">\n\n\t</qv-extend-sheet-target>\n\n</div>\n';var F={isSmallCell:function e(t){return t.object&&t.object.type&&("text-image"===t.object.type.type||"filterpane"===t.object.type.type)},getSheetMode:function e(t,r,a){if(t.isSmallDevice&&!a&&!r){var n="sheet-list sheet-list-";n+=t.orientation===t.Orientation.portrait?"vertical":"horizontal";return n}return"sheet-grid"}};var H=r("PX8M");var z=r("p3fE");var W=r("UOQJ");var G=r("jWHD");var $=r("4nJ1");function U(e){var t={};var r=n()(".qvt-sheet");var a=r.offset().top;var i=r.offset().left;var o=r.height();var l=r.width();var c=a+o;var s=i+l;var u=e.top;var d=e.bottom;var f=e.left;var p=e.right;if(d<a||u>c||p<i||f>s)return{ignoreRect:true,ignoreLines:t};if(d>c){t.bottom=true;e.bottom=c}if(u<a){t.top=true;e.top=a}if(p>s){t.right=true;e.right=s}if(f<i){t.left=true;e.left=i}return{ignoreRect:false,ignoreLines:t}}var Y={removeRectOverlap:U};var X=r("1oJt");var K=r("p+Qe");var Q=r("TmNk");var Z=r.n(Q);var J=r("RZ9f");var ee={};function te(e){var t=[];var r=$["a"].getValue(e,"qHyperCube.qMeasureInfo");var a;Z.a.hasActiveModifiers({measures:r,layout:e})&&r.forEach((function(e){(e.modifiers||[]).forEach((function(e){if(true!==e.disabled){a={};Object.keys(e).forEach((function(t){a["modifier_".concat(t)]=e[t]}));t.push(a)}}))}));return t}function re(e){var t=[];var r=$["a"].getValue(e,"qHyperCube.qMeasureInfo",[]);var a;r.forEach((function(e){Array.isArray(e.qTrendLines)&&e.qTrendLines.forEach((function(e){a={};Object.keys(e).forEach((function(t){a["trendline_".concat(t)]=e[t]}));t.push(a)}))}));return t}function ae(e){if(!ee[e.layout.qInfo.qId]){ee[e.layout.qInfo.qId]=true;var t=e.cells.filter((function(e){return!e.isEmpty&&"function"===typeof e.getVisualization})).map((function(e){return e.getVisualization()}));return Promise.all(t).then((function(t){var r;var a=t.map((function(e){r={chart_isThirdParty:$["a"].getValue(e,"type.libraryInfo.isThirdParty"),isAutoChart:"auto-chart"===$["a"].getValue(e,"type.type"),chart_renderTime:e.renderTime};r.chart_type=r.isAutoChart?$["a"].getValue(e,"layout.qUndoExclude.generated.visualization",""):$["a"].getValue(e,"type.type","");e.ext&&"function"===typeof e.ext.extendMetrics&&$["a"].extend(r,e.ext.extendMetrics($["a"].getValue(e,"layout")));var t=te(e.layout);Array.isArray(t)&&t.length&&(r.modifiers=t);var a=re(e.layout);a.length&&(r.trendlines=a);var n=$["a"].getValue(e.layout,"tooltip",false);n&&(r.chart_tooltip_custom=!n.auto);return r}));J["a"].trackEvent(J["a"].customEvents.SHEET_RENDERED,{objects:a,sheet_id:e.layout.qInfo.qId})}))}return Promise.resolve()}var ne={trackSheetDetails:ae};var ie=r("Oyoy");var oe=r("Hm/e");var le=r("CXZG");var ce=r("qN0E");var se=r("AyDD");var ue=r("sWge");var de=r("hVRC");var fe=r("g1uV");var pe=r("ymCc");var ve=r("R/ED");var me=r("62JT");var he=r("BUOA");var be=r("U7Ny");function ge(e){return e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)}C["a"].directive("qvGridCell",["$timeout","qvContextMenu",function(e,t){return function(r,a){var i=a.find("#sr-cell-status-label");r.cell.showExploreMenu=false;e((function(){if(r.cell.object){r.cell.object.setOnBlurHandler((function(){ve["a"].setFocus("GenericObject",r.cell);o()}));r.accCallback=function(e,t,n){var i=e===r.cell.pos.col&&t===r.cell.pos.row;r.tab=i?0:-1;!i||n||r.editmode?a.blur():a.focus()};var e=ve["a"].addItem(r.cell.id,r.accCallback,"GenericObject",r.cell.pos.col,r.cell.pos.row);r.tab=e?0:-1}}));r.keyDown=function(e){if(a[0]!==document.activeElement||r.editmode||r.cell.object.selectionsApi&&r.cell.object.selectionsApi.active||r.cell.object.childInSelection)return;switch(e.which){case fe["a"].ARROW_RIGHT:case fe["a"].ARROW_LEFT:case fe["a"].ARROW_UP:case fe["a"].ARROW_DOWN:t.close();0===r.tab&&ve["a"].key(e,"GenericObject");break;case fe["a"].TAB:e.shiftKey&&t.close();break;case fe["a"].ENTER:case fe["a"].SPACE:t.close();if(!r.cell.object.isInvalid){if(e.shiftKey)if(r.cell===r.grid.zoomCell)r.grid.zoom(null);else{r.grid.zoom(r.cell);r.cell.object.focus&&r.cell.object.focus();i.text(D["default"].get("Accessibility.Object.FullScreenMode"))}else{var n=!r.cell.object.viewDataToggled&&r.cell.object.supportViewData();n?r.cell.object.toggleDataView().then((function(){r.cell.object.viewDataToggled&&i.text(D["default"].get("Accessibility.Object.ViewDataMode"))})):r.cell.object.viewDataToggled&&"function"===typeof r.cell.object.dataViewObject.focus?r.cell.object.dataViewObject.focus():"function"===typeof r.cell.object.focus?r.cell.object.focus():i.text(D["default"].get("Accessibility.Object.CannotViewData"))}i.text("")}break;case fe["a"].ESCAPE:!r.grid.zoomCell&&r.cell.object.viewDataToggled?r.cell.object.toggleDataView().then((function(){r.cell.object.viewDataToggled||i.text(D["default"].get("Accessibility.Object.ViewChartMode"))})):r.cell===r.grid.zoomCell&&i.text(D["default"].get("Accessibility.Object.CloseFullScreenMode"));t.close();if(!r.grid.zoomCell){e.preventDefault();e.stopPropagation()}i.text("");break;case fe["a"].F10:if(e.shiftKey){t.close();var l=a.offset();e.pageY=l.top+a.height()/2;e.pageX=l.left+a.width()/2;r.contextMenuFn(e,r.cell,r.model,r.grid,o)}break;default:break}};r.classes={"qv-gridcell-empty":false,active:false,zoom:false,linked:false,animateable:false,"qv-gridcell-invalid":false,"goto-source-indication-border":false,"border-indication-fade-7s":false,"qv-gridcell-acc-focus":false,resizing:false,dragging:false};function o(){a.get(0).focus();r.tab=0}function l(){if(!r.cell.navMenu)return;var t=r.cell;var a=t.object;var n=he["a"].isDisabled(a);var i=!r.grid.gridHandleActive&&!t.isEmpty;var o=t.options&&t.options.isActive;var l=r.cell===r.grid.zoomCell;var s=!!a&&(!a.selectionsApi||a.selectionsApi&&!a.selectionsApi.active)&&!a.childInSelection;var u=!!t.snapshot&&t.snapshot.isAnnotating;var d=c["a"].isInEditMode()&&!(!!r.grid&&r.grid.hasUpdatePermission);var f=c["a"].inMasterObjectView();var p=c["a"].inStoryPlayState();var v=!n&&(o||l||t.mouseOver||u)&&i&&s&&!r.isSmallDevice&&!d&&!f&&(!p||l);r.cell.navMenu.visible=v;var m=R["a"].hasCardLayout();function h(e,t){e&&(m||l||0===t)&&e.updateTitlePadding(t)}v?e((function(){if(t.navMenu&&t.navMenu.getSize){var e=t.navMenu.getSize().width;h(a,e)}}),c["a"].isInEditMode()?0:200):h(a,0);if(v&&r.grid&&r.grid.cells)for(var b=0;b<r.grid.cells.length;b++){var g=r.grid.cells[b];var y=g.options&&g.options.isActive;if(g!==r.cell&&g.navMenu&&g.navMenu.visible&&!y){g.navMenu.visible=false;h(g.object,0)}}}function s(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}r.cell.mouseOver=false;r.cell.toggleExploreMenu=function(e){r.cell.showExploreMenu=void 0!==e?e:!r.cell.showExploreMenu;return r.cell.showExploreMenu};r.mouseEnter=function(){r.cell.mouseOver=true;l()};r.mouseLeave=function(){r.cell.mouseOver=false;l()};if(!r.cell.isEmpty){le["a"].addDrag(a,"",{isEnabled:function e(t,a){var i=n()(a.target).closest(".qv-object-nav").length>0;var o=n()(a.target).closest(".cell-content").length<1;if(o||i)return false;var l=u["a"].isBlocked();var s=ge(document.activeElement)||ge(a);var d=r.cell.object&&r.cell.object.preventDrag;return!s&&!d&&c["a"].isInEditMode()&&!r.grid.zoomCell&&!l},info:function e(){return{type:"gridcell",cell:r.cell}},onStart:function e(){r.grid.toggleActive(r.cell)},elem:"<div class='qv-gridmove-icon'><span class='lui-icon  lui-icon--draggable'></span></div>"});r.cell.snapshot={showCounter:false,snapshotCount:0,isAnnotating:false,dialogOpen:false,snapshotTimer:null,updateCount:function e(){se["a"].getNumberOfSnapshots(r.cell.id).then((function(e){r.cell.snapshot.snapshotCount=e;r.cell.snapshot.disabledSave=false}))},openAnnotation:function t(i){r.cell.snapshot.dialogOpen=true;r.cell.snapshot.disabledSave=true;return e((function(){var e=a.find(".qv-object-nav .lui-icon--camera");if(s(e[0]))return pe["a"].openDialog(e,r.cell.snapshot.closeAnnotation,i,(function(){return r.cell.snapshot.disabledSave}));e[0].scrollIntoView();n()(".qvt-sheet")[0].scrollLeft+=40;return pe["a"].openDialog(e,r.cell.snapshot.closeAnnotation,i,(function(){return r.cell.snapshot.disabledSave}))}))},closeAnnotation:function e(){r.cell.snapshot.dialogOpen=false;r.cell.snapshot.isAnnotating=false;l()},take:function e(t,n){var i=r.cell.object;var o;if(i.supportSnapshot()){o=t?r.cell.snapshot.openAnnotation(n):ue["a"].resolve();o.then((function(e){if(t){var n=!he["a"].isDisabled(i);r.cell.navMenu.active=n;r.cell.navMenu.visible=n;r.cell.snapshot.isAnnotating=true}se["a"].createSnapshot(i,a).then((function(a){r.cell.snapshot.updateCount();t&&(e.currentAnnotationId=a)}))}))}},openLibrary:function e(t,a){t.stopImmediatePropagation();me["a"].openPopover({event:t,library:"snapshot",objectId:r.cell.id,isZoomed:a})}};r.cell.getVisualization().then((function(e){return e.loaded})).then((function(){r.cell.snapshot.updateCount()}))}function d(e,t){if(e===t)return;r.$broadcast("resizeCell")}function f(t,a){if(t===a)return;var n=r.cell;var i=r.grid;var o=r.cell===r.grid.zoomCell;r.changedZoom=true;r.grid.changedZoom=true;r.classes.zoom=o;r.zooming=o||!i.zoomCell&&n===a;r.classes.animateable=r.zooming;r.validatingCell=n.model&&n.model.isValidating?n:null;l();t&&t.object?t.object.setRenderState(0):a&&a.object&&a.object.setRenderState(0);r.zooming?e(p,500):r.$broadcast("resizeCell")}a.on("transitionend.transitionAnimListener webkitTransitionEnd.transitionAnimListener oTransitionEnd.transitionAnimListener MSTransitionEnd.transitionAnimListener",(function(e){var t=e.originalEvent.propertyName;"width"===t&&p()}));a.on("animationend.transitionAnimListener webkitAnimationEnd.transitionAnimListener oAnimationEnd.transitionAnimListener msAnimationEnd.transitionAnimListener",(function(e){var t=e.originalEvent.animationName;if("fadeAwayBorder"===t){r.cell.isHighlighted=false;r.$apply()}}));function p(){var e=r.grid;if(!r.changedZoom)return;r.changedZoom=false;r.grid.changedZoom=false;r.$broadcast("resizeCell");r.zooming=r.zooming&&!(r.validatingCell&&r.validatingCell.model.isValidating);r.classes.animateable=false;e.blockZoomAnimation=false;l();var t=r.cell!==r.grid.zoomCell;if(r.isSmallDevice&&t&&r.cell.isHighlighted){h(r.cell.isHighlighted);a[0].scrollIntoView(true)}}function v(){var e=r.cell===r.grid.activeCell&&r.editmode;r.classes.active=e;r.cell.isEmpty||(r.cell.options.isActive=e)}function m(){r.classes["qv-gridcell-acc-focus"]=!r.editmode&&!r.cell.isEmpty&&r.cell.object&&!r.cell.object.childInSelection&&r.cell.object.selectionsApi&&!r.cell.object.selectionsApi.active&&r.focusBorder}function h(t){e((function(){r.classes["goto-source-indication-border"]=t;r.classes["border-indication-fade-7s"]=t}))}r.cell.onViewModeChanged=function(){l()};r.onCellClick=function(e,t){if(c["a"].isInEditMode()){r.grid.toggleActive(e);t&&t.stopPropagation()}};r.focusBorder=true;r.mouseDown=function(){r.focusBorder=false;m();a.blur()};r.mouseUp=function(){r.focusBorder=true;m();a.blur()};r.$watch("cell.isDragging",(function(){r.classes.dragging=r.cell.isDragging}));r.$watch("cell.isHighlighted",(function(){r.isSmallDevice&&r.cell.isHighlighted?e((function(){r.grid.zoom(r.cell)}),100):h(r.cell.isHighlighted)}));r.$watch("cell.pos.colspan",d);r.$watch("cell.pos.rowspan",d);r.$watch("grid.zoomCell",(function(e,t){f(e,t)}));r.$watch("grid.activeCell",(function(){v();l()}));r.$watch("editmode",(function(t){if(ce["a"].matchSource(r.cell.id)){h(true);e((function(){var e=n()("[tid=".concat(r.cell.id,"]"));e.length&&r.grid.gridService.scrollToPos(e.offset().left,e.offset().top)}))}else{r.classes["goto-source-indication-border"]=false;r.classes["border-indication-fade-7s"]=false}v();if(false===t&&r.cell.object){ve["a"].positionReset("GenericObject",r.cell.id,r.cell.pos.col,r.cell.pos.row);r.focusBorder=true}m()}));r.$watch("cell.isEmpty",(function(e){r.classes["qv-gridcell-empty"]=e}));r.$watch("cell.object.isInvalid",(function(e){r.classes["qv-gridcell-invalid"]=e}));r.$watch("cell.object.isLink",(function(e){r.classes.linked=e}));r.$watch("cell.object.selectionsApi.active",(function(){l();m()}));r.$watch("cell.object.layout.disableCellNavMenu",(function(){l()}));r.$watch("cell.object.childInSelection",(function(){l();m()}));r.$on("objectRenderStateChange",(function(e,t){if(!r.cell.isEmpty){a.attr("data-render-state",t?1:0);r.$emit("cellRenderStateChange",t?1:0);r.zooming&&t&&(r.zooming=false)}}));r.$watch("cell.object.layout.disableNavMenu",(function(){l()}));P["a"].UpdateObjProps.bind(l);r.$on("zoomOnCell",(function(e){r.grid.zoom(r.cell);e.stopPropagation()}));r.$on("zoomOut",(function(e){r.grid.zoom(null);e.stopPropagation()}));r.$on("$destroy",(function(){a.off(".transitionAnimListener");r.cell.object&&ve["a"].removeItem("GenericObject",r.cell.id);P["a"].UpdateObjProps.unbind(l)}))}}]);C["a"].directive("qvGridCellHandle",[function(){return function(e,t){var r={left:{X:true,Y:true},top:{X:true,Y:true},"top-left":{X:true,Y:true},bottom:{X:false,Y:false},right:{X:false,Y:false},"bottom-right":{X:false,Y:false},"top-right":{X:false,Y:true},"bottom-left":{X:true,Y:false}};var a;var i;var o;function l(e){return u["a"].moveObject(o,e)}function c(t,a){de["a"].alignToGrid({rows:e.grid.rows,columns:e.grid.cols},t);var n={col:t.col,row:t.row,colspan:t.colspan,rowspan:t.rowspan};r[e.resize.dir].X&&(n.col-=a.X);r[e.resize.dir].Y&&(n.row-=a.Y);n.colspan+=a.X;n.rowspan+=a.Y;return n}var s={left:true,right:true}[e.resize.dir]||false;var d={top:true,bottom:true}[e.resize.dir]||false;var f={"top-left":true,"top-right":true,"bottom-left":true,"bottom-right":true}[e.resize.dir]||false;var p={deltaX:s||f,deltaY:d||f};t.on("qv-swipestart",(function(l){_.a.WebkitHack.prevent();l.preventDefault();m(true);e.mouseLeave();o=n.a.extend(true,{},e.cell.pos);i={X:0,Y:0};var c=t.closest("#grid");a={X:e.grid.cols/c.width(),Y:e.grid.rows/c.height()};a.X=r[e.resize.dir].X?-a.X:a.X;a.Y=r[e.resize.dir].Y?-a.Y:a.Y}));_()(t[0]).tap({options:{preventDefault:false},start:function e(){m(true)},end:function e(){m(false)}});_()(t[0]).doubletap({options:{preventDefault:false},end:function t(){var r={X:e.resize.expand.X,Y:e.resize.expand.Y};o=n.a.extend(true,{},e.cell.pos);if(0!==r.X||0!==r.Y){e.grid.setCellSize(e.cell,c(e.cell.pos,{X:r.X,Y:0}));e.grid.updateResize(e.cell);e.$apply();e.grid.setCellSize(e.cell,c(e.cell.pos,{X:0,Y:e.resize.expand.Y}));e.grid.updateResize(e.cell);m(false);l(e.cell.pos);e.$apply()}}});e.$on("$destroy",(function(){_()(t[0]).off()}));t.on("qv-swipe",(function(t){_.a.WebkitHack.prevent();t.preventDefault();m(false);v(t);l(e.cell.pos)}));t.on("qv-swipecancel",(function(t){_.a.WebkitHack.prevent();t.preventDefault();m(false);v(t);l(e.cell.pos)}));t.on("qv-swipeupdate",(function(t){_.a.WebkitHack.prevent();t.preventDefault();var r={X:0,Y:0};p.deltaX&&(r.X=Math.round(t.gestureData.swipe.deltaX*a.X));p.deltaY&&(r.Y=Math.round(t.gestureData.swipe.deltaY*a.Y));var n={X:r.X-i.X,Y:r.Y-i.Y};n.X=Math.min(e.resize.expand.X,n.X);n.X=-Math.min(e.resize.contract.X,-n.X);n.Y=Math.min(e.resize.expand.Y,n.Y);n.Y=-Math.min(e.resize.contract.Y,-n.Y);0!==n.X&&(i.X+=n.X);0!==n.Y&&(i.Y+=n.Y);if(0!==n.X||0!==n.Y){e.grid.setCellSize(e.cell,c(o,i));e.grid.updateResize(e.cell);e.$apply()}}));function v(r){if(r.originalEvent){var a=t.closest(".qv-gridcell")[0];var i=n()(r.originalEvent.target).closest(".qv-gridcell")[0];e.grid.gridHandleActive||a!==i||e.mouseEnter()}}function m(t){e.grid.gridHandleActive=t;e.classes.resizing=e.grid.gridHandleActive}}}]);var ye='<div class="info">\n\t<lui-button\n\t    x-variant="success"\n\t\t\tclass="close"\n\t\t\tqva-activate="close()"\n\t\t\tq-translation="Common.Done"></lui-button>\n\t<div class="text">\n\t\t<div q-translation="Object.Master.Editor.Title" class="label"></div>\n\t\t<div><span q-translation="metadata.name" class="label">Name:</span> <span>{{model.layout.qMeta.title}}</span>\n\t\t</div>\n\t\t<div><span q-translation="metadata.description" class="label">Description:</span>\n\t\t\t<span>{{model.layout.descriptionExpression || model.layout.qMeta.description}}</span></div>\n\t\t<div><span q-translation="metadata.tags" class="label">Tags:</span>\n\t\t\t<span>{{model.layout.qMeta.tags.join( ", " )}}</span></div>\n\t</div>\n\t<div class="divider"></div>\n</div>\n';function we(e){e.$watch("model",(function(e,t){t&&t.Closed.unbind(u["a"].closeEditMaster);e&&e.Closed.bind(u["a"].closeEditMaster)}));e.$on("$destroy",(function(){e.model.Closed.unbind(u["a"].closeEditMaster)}))}C["a"].directive("qvMasterInfo",[function(){return{template:ye,scope:{model:"=",ext:"="},link:function e(t){t.close=function(){u["a"].closeEditMaster()};we(t)}}}]);var Ee=r("6dxF");var Se=r("7Sku");var Oe=r("Qa4K");var xe='<div class="drop-target qv-animate extend-sheet-comp">\n\t<div ng-show="!isDrag">\n\t\t<lui-button ng-click="clickExpand()" tid="extend-sheet-button">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--expand-2" ></span>\n\t\t\t<span class="lui-button__text" q-translation="Sheet.ExtendSheet"></span>\n\t\t</lui-button>\n\t</div>\n\t<div ng-show="isDrag" class="drag-overlay" ng-style="borderStyling">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--drop" ></span>\n\t\t\t<span class="lui-button__text" q-translation="Sheet.ExtendSheetDrop"></span>\n\t</div>\n</div>';function ke(e,t,r){e.isDrag=true;var a=t[0].getBoundingClientRect();var i={left:a.left-1,right:a.right-1,top:a.bottom-46,bottom:a.bottom};var o={bottom:true};var l=Y.removeRectOverlap(i).ignoreRect;i.bottom+=9;var c={targetRect:i,drawRect:i,prio:2,ignoreLines:o,enter:function t(){e.borderStyling={"border-color":"transparent"};e.$apply()},leave:function t(){e.borderStyling={};e.$apply()}};e.borderStyling={};e.$apply();t.addClass("active");function s(t){var r={isEmpty:true,pos:{row:0,col:0,rowspan:0,colspan:6}};return e.gridModel.extendSheet(50).then((function(e){var a=e[0];var n=e[1];var i=e[2];r.pos.rowspan=n-a;r.pos.row=n-r.pos.rowspan;r.pos.col=0;r.pos.colspan=i;r.pos.bounds=de["a"].getBounds(r.pos,i,n);t&&(t.pos.bounds=de["a"].recalculateBounds(t.pos,i,a,i,n));return r}))}c.drop={libraryitem:function e(t,r){s().then((function(e){d["a"].publish("/ui/library/addToSheet",{cell:e,item:t.item,event:r});n()(".qvt-sheet").animate({scrollTop:n()(".qvt-sheet").prop("scrollHeight")},1e3)}))},gridcell:function e(t){s(t.cell).then((function(e){var r=e.pos;u["a"].moveObject(t.cell.pos,r).then((function(){n()(".qvt-sheet").animate({scrollTop:n()(".qvt-sheet").prop("scrollHeight")},1e3)}))}))}};l||r.registerDropRect(c)}function je(e,t){t.isDrag=false;e.removeClass("active");n()("#grid").animate({scrollBottom:n()("#grid").offset().top},200)}i["default"].directive("qvExtendSheetTarget",[function(){return{restrict:"E",replace:true,scope:{gridModel:"="},template:xe,link:function e(t,r){t.active=false;t.clickExpand=function(){t.gridModel.extendSheet(50);n()(".qvt-sheet").animate({scrollTop:n()(".qvt-sheet").prop("scrollHeight")},1e3)};var a={accept:{gridcell:function e(){return true},libraryitem:function e(){return true}},start:ke.bind(null,t,r),end:je.bind(null,r,t)};L["a"].registerDropTarget(a);t.$on("$destroy",(function(){L["a"].unregisterDropTarget(a)}))}}}]);var De='<div class="block-permission">\n    <div class="hint-content">\n        <p q-translation="Sheet.NoPermission"></p>\n        <button ng-if="sheetMode" class="lui-button" q-translation="Common.Duplicate" ng-click="duplicateSheet()" tid="duplicate-sheet-btn"></button>\n    </div>\n</div>';var Ce=r("woTi");i["default"].directive("permissionOverlay",[function(){return{template:De,restrict:"E",replace:true,scope:{model:"=",sheetMode:"="},controller:["$scope",function(e){e.duplicateSheet=function(){Object(Ce["a"])(e.model,true)}}]}}]);C["a"].componentDirective("qvGridCellContent",{cell:"="});var qe={RENDERED:1,NOPE:0};var Ie=Object(q["b"])("CLASSIFY_ON_DEMAND");var Te=false;function Ae(e,t){return"field"===e.item.type&&t.isEmpty}function Pe(e,t,r,a){d["a"].publish("/ui/library/addToSheet",{cell:e,item:t.item,event:r,delayClassification:a})}function Me(e){return{libraryitem:function t(r,a){var n=!Object(q["b"])("DISABLE_AUTO_CHART")&&!K["a"].isVariableDefined("DISABLE_AUTO_CHART");if(n&&Ie&&!Te&&Ae(r,e)){Pe(e,r,a,true);Te=true}else Pe(e,r,a)},gridcell:function t(r){var a=e.pos;e.isEmpty?u["a"].moveObject(r.cell.pos,a):e.object&&e.object.ext&&e.object.ext.addChild?X["a"].get().then((function(t){return t.startGroup().then((function(a){return r.cell.model.getFullPropertyTree().then((function(n){return e.object.ext.addChild(r.cell.model.properties,n.qChildren).then((function(){u["a"].removeCell(r.cell);t.endGroup(a)}))}))}))})):u["a"].swapObjects(r.cell.pos,a)},containerItem:function t(r){(e.isEmpty||e.object&&e.object.ext.addChild)&&X["a"].get().then((function(t){return t.startGroup().then((function(a){return r.extractObject().then((function(r){e.isEmpty?u["a"].addObject({cell:e,init:r,template:r.visualization}):e.object.ext.addChild(r);t.endGroup(a)}))}))}))}}}function Ne(e,t,r,a){if(!r.ignoreRect){var n=Me(t);e.registerDropRect({targetRect:r,drawRect:r,drop:n,isEmpty:t.isEmpty,ignoreLines:a})}}function Re(e,t,r,a,n){var i=$["a"].extend(true,{},e);var o=n?4:10;var l=Math.abs(e[t]-e[r]);var c=75;var s=250;var u=800;if(!n)if(l<c)l=-1;else if(l<s){l=c/3;o=1}else if(l>u){l=u/o;o=1}i[r]=e[t]+a*l/o;return i}function Le(e){return"libraryitem"===e.type&&"visualization"===e.item.type}function Ve(e,t){function r(){W["a"].show({title:D["default"].get("Object.Master.Drop.Visualization.Error.Title"),message:D["default"].get("Object.Master.Drop.Visualization.Error.Message")})}t.rect||e.registerDropRect({targetRect:t,drop:r})}function _e(e,t){var r;var a={accept:{libraryitem:function e(){return true},gridcell:function e(){return true},containerItem:function e(){return true}},end:function e(a){t.removeClass(r);"gridcell"===a.info.type&&(a.info.cell.isDragging=false)},start:function a(n){var i;var o;var l;var c={};try{l=t[0].getBoundingClientRect()}catch(e){return}var s=e.grid;e.$root.$emit("hideSubPanel",{all:true,forceClose:false});r="libraryitem"===n.info.type?"dragging library-dragging":"dragging";t.addClass(r);"gridcell"===n.info.type&&(n.info.cell.isDragging=true);function u(e,t){var r=s.rectFor(e,t);var a={left:l.left+l.width/100*r.left+r.margin,top:l.top+l.height/100*r.top+r.margin,right:l.left+l.width/100*(r.left+r.width)-r.margin,bottom:l.top+l.height/100*(r.top+r.height)-r.margin};c={};if(t){var n=Y.removeRectOverlap(a);a.ignoreRect=n.ignoreRect;c=n.ignoreLines}return a}function d(e,t,r,a){var i=z["a"].splitPos(e.pos,a,s.cols,s.rows).pos2;var o=u(i,true);var l;if(e.isEmpty)l={pos:i,isEmpty:true};else{var d={pos:e.pos,split:a};l={pos:d,isEmpty:true}}if(!Y.removeRectOverlap(r).ignoreRect){var f={prio:1,targetRect:r,drawRect:o,cellRect:t,ignoreLines:c,drop:Me(l),isEmpty:e.isEmpty};n.registerDropRect(f)}}if(s.zoomCell){i=u({col:0,row:0,colspan:s.cols,rowspan:s.rows},false);s.isMaster&&Le(n.info)?Ve(n,i):Ne(n,s.zoomCell,i,c);return}var f;var p="state"===$["a"].getValue(n.info,"item.type");if(p){i=u({col:0,row:0,colspan:s.cols,rowspan:s.rows},false);var v=Me(f);n.registerDropRect({prio:-1,targetRect:i,drawRect:i,drop:v,isEmpty:false,ignoreLines:c})}for(var m=0;m<s.cells.length;++m){f=s.cells[m];if("gridcell"===n.info.type&&n.info.cell===f)continue;if(p&&f.isEmpty)continue;if(!f.isEmpty&&!f.object.canReceive(n.info))continue;i=u(f.pos,false);o=u(f.pos,true);Ne(n,f,o,c);if(s.zoomCell||p)continue;if(!f.isEmpty||!Object(q["b"])("DROP_ZONES")){if(z["a"].ifSplit("horizontal",f,s.layout.columns,s.layout.rows)){d(f,o,Re(i,"right","left",-1,f.isEmpty),"right");d(f,o,Re(i,"left","right",1,f.isEmpty),"left")}if(z["a"].ifSplit("vertical",f,s.layout.columns,s.layout.rows)){d(f,o,Re(i,"top","bottom",1,f.isEmpty),"top");d(f,o,Re(i,"bottom","top",-1,f.isEmpty),"bottom")}}}}};L["a"].registerDropTarget(a);e.$on("$destroy",(function(){L["a"].unregisterDropTarget(a)}))}C["a"].directive("qvGrid",["$timeout",function(e){return{template:B,replace:true,restrict:"E",scope:{model:"=",grid:"=",sheetMode:"=",contextMenuFn:"=",radialContextMenuFn:"="},link:function t(r,a){var n=qe.NOPE;var i;var o=false;var l=!!a.closest(".qv-story-sheet").length;var s=r.$watch("grid",(function(){u["a"].setGridElement(a[0]);s()}));r.classifyOnDemandEnabled=Ie;if(Ie){r.defaultChartImg=ie["a"].getImageNameFromChartType("default");d["a"].subscribe("/ui/library/classifyOnDemand",(function(e){if(e&&e.style)r.chartLoadingCellStyle=e.style;else if(e.pos&&e.pos.pos&&e.pos.pos.bounds){var t=e.pos.pos.bounds;r.chartLoadingCellStyle={width:"calc( ".concat(t.width,"% - 4px )"),height:"calc( ".concat(t.height,"% - 4px )"),left:"".concat(t.x,"%"),top:"".concat(t.y,"%")}}r.grid.hintHidden=true;r.chartLoading=true}));d["a"].subscribe("/ui/library/classifcationDone",(function(){r.chartLoading=false}))}r.posInfo=Object(q["b"])("GRID_POS_INFO");r.onFocus=function(){o?r.gridScreenReader="":c["a"].model.getLayout().then((function(e){r.gridScreenReader=D["default"].get("Accessibility.Object.Description",e.qMeta.title)}))};r.onBlur=function(){o=document.activeElement&&document.activeElement.classList&&document.activeElement.classList.contains("qv-gridcell");r.gridScreenReader=""};r.$watch("grid.cells",(function(t,r){if(t===r)return;var o=!t||!t.length||!t.some((function(e){return!e.isEmpty}));if(o&&n!==qe.RENDERED){n=qe.RENDERED;e.cancel(i);i=e((function(){a.attr("data-render-state",n)}),0,false)}u["a"].highlightedCell()}));r.$watch("grid.mobileGrid",(function(){v()}));function f(e,t,a,n){Be(r.grid,t,n)}function p(e){(r.grid.cells||[]).forEach((function(t){t.object&&t.object.setDirection&&t.object.setDirection(e)}))}H["a"].getApp().then((function(e){return e.getLayout()})).then((function(e){r.canCreateSheet=e.permissions.createSheet}));r.$watch(c["a"].isInEditMode,(function(e){r.editmode=e;r.editmode&&r.grid.cells&&r.grid.cells.forEach((function(e){e.object&&e.toggleExploreMenu(false)}))}));r.isAnalysisMode=function(){return c["a"].state===c["a"].States.analysis};_e(r,a);function v(){C["a"].$apply(C["a"].$rootScope,(function(){r.isSmallDevice=w["default"].isSmallDevice;r.sheetMode=F.getSheetMode(w["default"],l,r.grid&&r.grid.mobileGrid);r.grid&&r.grid.cells&&r.grid.cells.forEach((function(e){e.onViewModeChanged&&e.onViewModeChanged()}))}))}v();w["default"].ViewChanged.bind(v);w["default"].OrientationChanged.bind(v);c["a"].StateChanged.bind(f);M["a"].DirectionChanged.bind(p);a.on("scroll",(function(){_.a.preventGestures()}));_.a.utils.touch&&a.on("touchforcechange",(function(){}));r.$on("cellRenderStateChange",(function(t,o){t.stopPropagation();var l=1!==o||r.grid.cells.some((function(e){return e.object&&1!==e.object.renderState}))?0:1;if(l!==n){n=l;e.cancel(i);if(n!==qe.RENDERED)a.attr("data-render-state",n);else{ne.trackSheetDetails(r.grid);i=e((function(){a.attr("data-render-state",n)}),0,false);Ie&&r.grid.hintHidden&&(r.grid.hintHidden=void 0)}}}));r.$on("$destroy",(function(){a.off("scroll");_.a.utils.touch&&a.off("touchforcechange");w["default"].ViewChanged.unbind(v);w["default"].OrientationChanged.unbind(v);c["a"].StateChanged.unbind(f);M["a"].DirectionChanged.unbind(p);if(Ie){d["a"].unsubscribe("/ui/library/classifyOnDemand");d["a"].unsubscribe("/ui/library/classifcationDone")}}))}}}]);function Be(e,t,r){if(t===r||Number.isNaN(+r))return;var a=t===c["a"].States.edit?G["a"].EDIT:G["a"].ANALYSIS;(e&&e.cells||[]).forEach((function(e){e.object&&e.object.setInteractionState&&e.object.setInteractionState(a)}))}var Fe={updateStateUtil:Be};var He=r("CpIe");var ze=r("9/B2");var We='<div class="odag-link-drop-target qv-animate">\n\t<div class="overlay-content">\n\t\t<div class="icon lui-icon lui-icon--sign-post"></div>\n\t\t<p class="title" q-translation="{{title}}"></p>\n\t\t<p q-translation="{{text}}"></p>\n\t</div>\n</div>\n';function Ge(e,t,r){var a=t.parent(".qv-panel-sheet")[0].getBoundingClientRect();var n=2;var i={left:a.left+n,right:a.right-n,top:a.top+n,bottom:a.bottom-n};var o={targetRect:i};e.title="library.addtoODAGToolbar.drop.title";e.text="library.addtoODAGToolbar.drop";t.addClass("active");o.drop=function(){};r.registerDropRect(o)}function $e(e){e.removeClass("active")}i["default"].directive("qvOdagLinkDropHelpTarget",[function(){return{restrict:"E",replace:true,scope:{},template:We,link:function e(t,r){t.active=false;var a={accept:{odagLinkItem:function e(){return true}},start:Ge.bind(null,t,r),end:$e.bind(null,r)};L["a"].registerDropTarget(a);t.$on("$destroy",(function(){L["a"].unregisterDropTarget(a)}))}}}]);var Ue=20;var Ye="";var Xe={};var Ke={center:"logo-center",right:"logo-right",left:"logo-left"};function Qe(e){return e&&"none"!==e}function Ze(e){var t=R["a"].resolveColor(e.sheetTitleBgColor);var r=R["a"].resolveColor(e.sheetTitleGradientColor);return{bgColor:Qe(t)?t:r,bgSecondaryColor:r,fontColor:e.sheetTitleColor,mobileFontColor:e.sheetTitleColor,logoImgSrc:e.sheetLogoThumbnail&&e.sheetLogoThumbnail.qStaticContentUrl.qUrl?N["a"].addBasePath(e.sheetLogoThumbnail.qStaticContentUrl.qUrl):"",logoPosition:e.sheetLogoPosition}}var Je={template:o,restrict:"E",replace:true,scope:{},controller:["$scope","$element","$interval",function(e,t,r){n()("body").addClass("qv-sheet-enabled");e.classifyOnDemandEnabled=Object(q["b"])("CLASSIFY_ON_DEMAND");e.exp={};e.sheetTitle={sheetTitleClass:{},headerBGStyle:"",fontStyle:{},fontColor:"",mobileFontColor:"",bgColor:"",bgSecondaryColor:"",logoImgSrc:"",logoPosition:""};u["a"].start(c["a"].model);function a(t){e.exp.isSmallDevice=t}function o(){e.sheetTitle.headerBGStyle=Ye;e.sheetTitle.fontStyle=n.a.extend(true,{},Xe);if(e.isCustomSize()){e.sheetTitle.headerBGStyle+=" width: ".concat(e.grid.layout.pxWidth-4,"px; min-width: 100%; ");M["a"].isRtl||(e.sheetTitle.fontStyle["min-width"]="".concat(e.grid.layout.pxWidth-30,"px"))}}function d(t,r,a){Ye="";if(Qe(t)){Ye=Qe(r)?A["a"].getCSSLinearGradient("right",[t,r],[0,100]):"background:".concat(t,";");Ye+="border-bottom: 1px solid rgba(0,0,0,0.1);"}else if(Qe(r)){Ye="background:".concat(r,";");Ye+="border-bottom: 1px solid rgba(0,0,0,0.1);"}!Ye||e.sheetTitle.fontColor&&"none"!==e.sheetTitle.fontColor||(e.sheetTitle.mobileFontColor="#b0afae");e.sheetTitle.headerBGStyle=Ye;Xe=a&&"none"!==a?{color:a}:{};e.sheetTitle.fontStyle=n.a.extend(true,{},Xe);o()}function f(t){var r={};Ke[t]&&(r[Ke[t]]=true);r["qv-rtl-layout"]=M["a"].isRtl;e.sheetTitle.sheetTitleClass=r}function p(t){e.sheetTitle.tid="".concat(t.bgColor," ").concat(t.bgSecondaryColor," ").concat(t.fontColor," ").concat(t.logoPosition)}function v(t){var r=Ze(t);n.a.extend(e.sheetTitle,r);d(r.bgColor,r.bgSecondaryColor,r.fontColor);f(r.logoPosition||"right",r.logoImgSrc);p(r);i["default"].$rootScope.$broadcast("refreshPropertyPanel")}function m(){P["a"].UpdateObjProps.bind(v)}function h(){P["a"].UpdateObjProps.unbind(v)}P["a"].getProperties().then((function(e){v(e)}));function b(){R["a"].ThemeChanged.unbind(b);P["a"].getProperties().then((function(e){v(e)}))}R["a"].ThemeChanged.bind(b);m();e.exp.isSmallDevice=w["default"].isSmallDevice;w["default"].ViewChanged.bind(a);e.$watch(u["a"].getGrid,(function(t){e.grid=t}));e.$watch(u["a"].getModel,(function(t){e.model=t;w["default"].isSmallDevice?u["a"].resetSmallDeviceSheetScroll():u["a"].restoreSheetScrollState(0,0)}));e.$watch(c["a"].isInEditMode,(function(t){e.editmode=t}));e.$watch("grid.sheetSize",(function(){o()}));e.onClickSheetTitle=function(){if(e.grid){e.grid.toggleActive(null);c["a"].isInEditMode()&&(s["a"].propertiesOpen=true)}};e.isCustomSize=function(){return e.grid&&!e.grid.zoomCell&&e.grid.layout&&e.grid.layout.layoutOptions&&"CUSTOM"===e.grid.layout.layoutOptions.sheetMode&&!w["default"].isSmallDevice};e.onCellContextMenu=l["a"].onCellContextMenu;e.onCellRadialContextMenu=l["a"].onCellRadialContextMenu;e.onHintContextMenu=l["a"].onHintContextMenu;u["a"].onCellContextMenu=l["a"].onCellContextMenu;t.find("#hint").showComponent(T);ze["a"].set(t);var g=t[0];var y;var E;function S(){g.scrollTop+=E}function O(){r.cancel(y)}function x(e,t){var a=t.pageY;var n=e.targetRect;if(g.scrollTop>=0&&n.top<a&&n.top+Ue>a){E=-20;y=r(S,50,50);return true}if(g.scrollTop<=g.scrollHeight-n.height&&n.bottom>a&&n.bottom-Ue<a){E=20;y=r(S,50,50);return true}return false}var k={start:function e(t){var r;try{r=g.getBoundingClientRect()}catch(e){return}var a={enter:x,leave:O,targetRect:{top:r.top-20,bottom:r.bottom+20,left:r.left,right:r.right,height:r.height,width:r.width}};t.registerScrollRect(a)},end:O};L["a"].registerScrollComponent(k);e.$on("$destroy",(function(){ze["a"].destroy();n()("body").removeClass("qv-sheet-enabled");R["a"].ThemeChanged.unbind(b);w["default"].ViewChanged.unbind(a);u["a"].stop();h();L["a"].unregisterScrollComponent(k)}))}]};i["default"].directive("qvStageSheet",[function(){return Je}]);var et=t["a"]=Je},MFLt:function(e,t,r){"use strict";r.r(t);var a=r("mXGw");var n=r.n(a);var i=r("jr/W");var o=r("6Z/P");var l=r("z4LI");var c=r("W0B4");var s=r.n(c);var u=r("acVu");var d=r("6uJb");var f=r("MGTR");var p=r("4nJ1");var v=r("qIEf");var m=r.n(v);var h=r("mWu2");var b=r("lpis");var g=r("d1VP");var y=r("IfNZ");var w;function E(e,t){var r=y["a"].NavigationMode.sheet;w=h["default"].getService("luiPopover").show({controller:b["a"].controller,template:b["a"].template,dock:"bottom",alignTo:t,outsideIgnore:"nav-".concat(r),container:m()(t).parents(".popover-container,.qs-popover-container")[0],autoFocus:false,input:{showToolbar:true,showNavigation:false,navigationmode:r,isNavigator:true,tid:"sheetNavigator"}});g["a"].open();w.closing.then((function(t){w=null;e.pressed=false;e.close&&e.close();var r=t&&m()(t.target).closest("[data-toolbar-navigator]");r&&r.length||g["a"].close()}))}function S(e,t){if(e.pressed)E(e,t);else{w.close();w=null;g["a"].close()}}var O={toggle:S};var x=r("UIGF");var k=r("ClzF");var j=r("9a/l");var D=r("njJ6");var C=r("0ghn");var q=r("/irJ");var I=r("Y9P5");var T=r("O+L3");function A(e,t){return L(e)||R(e,t)||M(e,t)||P()}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function R(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function L(e){if(Array.isArray(e))return e}var V=function e(){var t=Object(C["c"])();var r=Object(T["a"])(),a=A(r,1),o=a[0];var l=o.mashed;if(Object(u["b"])("SHEET_SHOW_CONDITION")){var c=I["a"].Sheets.currentIndex(o.mashed);l=I["a"].filterSheets(o.mashed,o.mashed[c])}var s=function e(){var t=I["a"].Sheets.getPrevious(l);return t?t.qInfo.qId:""};var d=function e(){var t=I["a"].Sheets.getNext(l);return t?t.qInfo.qId:""};var f=function e(){var r=I["a"].Sheets.getPrevious(l);var a=(null===r||void 0===r?void 0:r.qData.labelExpression)||(null===r||void 0===r?void 0:r.qData.title);return a?t("Tooltip.PreviousSheet",a):null};var p=function e(){var r=I["a"].Sheets.getNext(l);var a=(null===r||void 0===r?void 0:r.qData.labelExpression)||(null===r||void 0===r?void 0:r.qData.title);return a?t("Tooltip.NextSheet",a):null};var v=function e(){var t=I["a"].Sheets.getPrevious(l);q["a"].goToSheet(t.qInfo.qId)};var m=function e(){var t=I["a"].Sheets.getNext(l);q["a"].goToSheet(t.qInfo.qId)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(i["a"],{tid:"btnQuickNavPrevious",className:"qs-sheet-toolbar-previous-sheet-button lui-buttongroup__button",onClick:v,disabled:!I["a"].Sheets.hasPrevious(l),"data-sheet-id":s(),title:f()},n.a.createElement(i["a"].Icon,{name:"previous"})),n.a.createElement(i["a"],{tid:"btnQuickNavNext",className:"qs-sheet-toolbar-next-sheet-button lui-buttongroup__button",onClick:m,disabled:!I["a"].Sheets.hasNext(l),"data-sheet-id":d(),title:p()},n.a.createElement(i["a"].Icon,{name:"next"})))};var _=V;var B=r("+/9P");var F=r("9TP3");var H=r("n+X2");var z=r("A+Ht");var W=r("3Pmj");var G=r("woTi");var $=function e(t){var r=t.sheet,a=t.showText;var o=Object(C["c"])();var l=function e(){Object(G["a"])(r,true)};return n.a.createElement(i["a"],{tid:"duplicate-sheet-when-no-edit-rights-button",title:o("Sheet.NoPermission"),onClick:l},n.a.createElement(i["a"].Icon,{name:"copy"}),a?n.a.createElement(i["a"].Text,{className:"lui-button__text qs-sheet-toolbar-duplicate-sheet"},o("Common.Duplicate")):null)};$.propTypes={sheet:s.a.object.isRequired,showText:s.a.bool};$.defaultProps={showText:false};var U=$;function Y(e,t){return J(e)||Z(e,t)||K(e,t)||X()}function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Z(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function J(e){if(Array.isArray(e))return e}var ee=function e(t){var r=t.urlParameters,o=t.displayMode;var c=Y(r,1),s=c[0];var v=Object(F["a"])(p["a"].getParameterByName("app")),m=Y(v,1),h=m[0];var b=Object(H["a"])(h),g=Y(b,1),y=g[0];var w=Object(z["a"])(s,h),E=Y(w,2),S=E[0],C=E[1];var q=Object(W["a"])(S),I=Y(q,2),T=I[0],A=I[1];var P=Object(a["useState"])(false),M=Y(P,2),N=M[0],R=M[1];var L=Object(a["useState"])(false),V=Y(L,2),G=V[0],$=V[1];var X=Object(a["useState"])(false),K=Y(X,2),Q=K[0],Z=K[1];var J=Object(a["useState"])(false),ee=Y(J,2),te=ee[0],re=ee[1];var ae=function e(){var t=l["a"].state===l["a"].States.edit;var r=t?l["a"].States.analysis:l["a"].States.edit;l["a"].setState(r);k["a"].setSheet(T.qInfo.qId,Object.keys(l["a"].States)[r],p["a"].getParameterByName("app"),null)};var ne=function e(t){var r=!Q;O.toggle({pressed:r,close:function e(){return Z(false)}},t.currentTarget);Z(r)};var ie=function e(t){var r=!G;x["a"].toggle({pressed:r,close:function e(){return $(false)}},t.currentTarget,{create:y.permissions.createBookmark,small:false});$(r)};var oe=function e(){re(!te)};Object(a["useEffect"])((function(){f["a"].subscribe("/bookmarks/open-create-bm",oe);R(true);return function(){f["a"].unsubscribe("/bookmarks/open-create-bm",oe)}}),[]);if(!N&&!T&&!C&&!A)return null;var le=l["a"].state===l["a"].States.edit;var ce=T&&(T.labelExpression||T.qMeta.title);var se=le?"Toolbar.DoneEditing":"Toolbar.StartEditing";var ue=le?"Tooltip.StopEditSheet":"Tooltip.EditSheet";var de=le?"tick":"edit";var fe=(le,"lui-buttongroup__button lui-button--success");var pe=y&&!y.qReadOnly&&y.permissions.createSheet;var ve=T&&T.permissions.update;var me=n.a.createElement(i["a"],{tid:"4dd782",className:fe,title:d["default"].get(ue),onClick:ae},n.a.createElement(i["a"].Icon,{name:de}),o>D["a"].medium?n.a.createElement(i["a"].Text,{className:"lui-button__text qs-sheet-toolbar-edit-title"},d["default"].get(se)):null);var he=!(!T||!Object(u["b"])("SHEET_SHOW_CONDITION")||l["a"].state!==l["a"].States.edit||"sheet"!==T.qInfo.qType)&&!p["a"].evaluateCondition(T.showCondition);return n.a.createElement(n.a.Fragment,null,n.a.createElement(B["a"],{close:oe,onEscape:oe,show:te}),n.a.createElement("div",{className:"qs-popover-container qs-toolbar__element"},j["a"].isFeatureBlacklisted("bookmarks")?null:n.a.createElement(i["a"],{tid:"4e4ab2",className:G?"lui-active":"","qva-outside-ignore-for":"nav-bookmark",title:d["default"].get("Common.Bookmarks"),onClick:ie},n.a.createElement(i["a"].Icon,{name:"bookmark",className:"qs-no-margin"}),n.a.createElement(i["a"].Caret,null))),n.a.createElement(i["b"],{className:"qs-toolbar__element"},S&&pe&&!ve&&!le?n.a.createElement(U,{sheet:S,showText:o>D["a"].medium}):null,n.a.createElement("div",{className:"qs-popover-container lui-buttongroup__button"},n.a.createElement(i["a"],{tid:"4e25a2",className:Q?"lui-active":"","qva-outside-ignore-for":"nav-sheet",title:d["default"].get("Common.Sheets"),onClick:ne},he?n.a.createElement(i["f"],{className:"show-hide-icon lui-button__icon lui-icon lui-icon--view-disabled",title:d["default"].get("Object.Container.FalseShowCondition")}):"",o>D["a"].large&&ce?n.a.createElement(i["a"].Text,{className:"qs-sheet-toolbar-sheet-title lui-button__text"},ce):null,n.a.createElement(i["a"].Icon,{name:"sheet"}),n.a.createElement(i["a"].Caret,null))),o>D["a"].small?n.a.createElement(_,null):null),n.a.createElement("div",{className:"qs-toolbar__element"},ve||le?me:null))};ee.propTypes={displayMode:s.a.number.isRequired,urlParameters:s.a.array.isRequired};var te=ee;var re=r("CHKu");var ae=r("cA4R");var ne=r("4XJH");var ie=r("oON4");var oe='<div class="qv-panel qv-panel-stage borderbox"\n  ng-class="{\'qv-mode-edit\':inEdit, \'no-scroll\': isInSmallDeviceMenu}">\n  <qv-stage-current-selections ng-show="!inEdit" ng-if="app && (isSmallDevice() || !subToolbar)"\n    expand-smart-search-suggested-chart="expandSmartSearchSuggestedChart" app="app" options="curSelOptions"\n    class="qvt-selections"></qv-stage-current-selections>\n  <div class="qv-global-search-container"></div>\n  <div class="qv-explore-selections-container"></div>\n  <div class="qv-panel-content flex-row">\n    <qv-stage-assets ng-if="inEdit" ng-show="state.assetsOpen" app="app"></qv-stage-assets>\n    <div class="qvt-sheet-container">\n      <qv-stage-sheet ng-if="enableSheet" class="qvt-sheet"></qv-stage-sheet>\n      <qv-odag-toolbar class="qv-odag-bar-container" model="navbarModel" ng-if="enableODAGToolbar() && !isSmallDevice()"\n        in-edit-mode="inEdit" stand-alone="standAlone"></qv-odag-toolbar>\n    </div>\n    <div class=\'qv-panel-properties\' ng-if="stateLoaded" ng-show="inEdit && state.propertiesOpen">\n      <qv-property-panel></qv-property-panel>\n    </div>\n  </div>\n\n  <qv-stage-edit-bar ng-if="stateLoaded" ng-show="inEdit && !subToolbar" assets-open="state.assetsOpen"\n    properties-open="state.propertiesOpen"></qv-stage-edit-bar>\n</div>';var le=r("ZQDF");var ce=r("vaoC");var se=r("wIyQ");var ue=r("zkWp");var de=r("5xMv");var fe=r("PX8M");var pe=r("AWT7");var ve=r("B52N");var me=r("jaci");var he=r("p+Qe");var be=r("Hb6E");var ge=r("eg+O");var ye=r("mCu5");var we=r("1Rhw");var Ee=r("Z9ZH");var Se=r.n(Ee);var Oe='<div class="qv-panel-assets "\n  ng-class="{\'qv-panel-assets-expanded\' : assets.tabExpanded, \'qv-panel-assets-collapsed\' : !assets.tabExpanded}">\n  <qv-assets-button-panel assets="assets" is-edit-variable="isEditVariable"></qv-assets-button-panel>\n  <section class="qui-toolsframe" id="assets-tab-container" ng-class="{ \'qv-has-tab-row\': assets.tabs.length > 1 }">\n    <qv-library-drop-target ng-if="assets.tabExpanded"></qv-library-drop-target>\n\n    <header id="toolbox-header">\n      <qv-assets-search-panel query="assets.query" clear-when="assets.query === \'\'"></qv-assets-search-panel>\n\n      <div ng-show="assets.activeTab.hasTableFilter">\n        <qv-assets-table-select table="assets.table"></qv-assets-table-select>\n      </div>\n    </header>\n\n    <div qva-assets-tab="assets.activeTab" component="assets.activeTab.component" class="tab-items-container"></div>\n\n    <div ng-show="assets.activeTab.haveManageDataButtons">\n      <qv-assets-data-buttons app="app"></qv-assets-data-buttons>\n    </div>\n  </section>\n\n\n</div>';var xe=r("CXZG");var ke=r("G1wx");var je=r("qd1e");var De='<div id="assets-table-select" data-help="Library.Table">\n\t<label q-translation="Assets.FieldsTab.Table"></label>\n\t<lui-select x-variant="{{variant}}" x-model="selectedTable" id="fields-tab-tables">\n\t\t<option ng-if="!bdiAdaptEnabled" value="All" q-translation="Common.All.Tables"></option>\n\t\t<option value="{{table}}" ng-repeat="table in tables">{{table}}</option>\n\t</lui-select>\n</div>';var Ce=r("k+Ch");var qe=r("sCDE");var Ie=r("TmCs");var Te=r("3ex9");h["default"].directive("qvAssetsTableSelect",[function(){return{restrict:"E",replace:true,scope:{selectedTable:"=table",variant:"@"},template:De,link:function e(t){function r(e){var r=Ie["a"].getTables(e);t.tables=Te["a"].localeOrderBy(r);t.bdiAdaptEnabled=j["a"].adaptationsEnabled();t.selectedTable&&-1!==t.tables.indexOf(t.selectedTable)||(t.selectedTable="All");t.$parent.assets.tabs&&Te["a"].toggleTableSelect(t.$parent.assets.tabs,r.length>=2);t.bdiAdaptEnabled&&(t.selectedTable=t.tables[0])}Ce["a"].getList().then((function(e){t.listModel=e}));Object(qe["a"])(t,"listModel",r)}}}]);var Ae='<div class="drop-target qv-animate" ng-class="{ error: error }">\n\t<div class=drop-border>\n\t\t<div class="overlay-content">\n\t\t\t<div class="lui-icon lui-icon--link"></div>\n\t\t\t<p class="title" ng-class="{ error: error }" q-translation="{{title}}"></p>\n\t\t\t<p q-translation="{{text}}"></p>\n\t\t</div>\n\t</div>\n</div>\n';var Pe=r("0m+j");var Me=r("XiD7");function Ne(e){var t=e.model.properties.qStateName;return null===t||void 0===t||""===t}function Re(e,t,r){var a=t.parent("#assets-tab-container")[0].getBoundingClientRect();var n={left:a.left+2,right:a.right-2,top:a.top+2,bottom:a.bottom-2};var i={targetRect:n,prio:2};var o=r.info.cell.object.isLink;var l=r.info.cell.object.isInvalid;var c=!Te["a"].permissionToCreate("visualization");var s=Me["a"].typeSupportsMasterVisualizations(r.info.cell.object.type.type);var u=Ne(r.info.cell);var d=r.info.cell.object.layout.hasExternalChildren;var f=!l&&!o&&!c&&s&&u&&!d;if(f){e.error=false;e.title="library.addtoVisualization.drop.title";e.text="library.addtoVisualization.drop";t.addClass("active");i.enter=function(){t.children().addClass("hover")};i.leave=function(){t.children().removeClass("hover")};i.drop=function(e){Me["a"].addObjectInCellToLibrary(e.cell)}}else{i.enter=function(){t.addClass("active")};i.leave=function(){t.removeClass("active")};e.error=true;e.title="library.addtoVisualization.nodrop.title";c?e.text="library.addtoVisualization.nodrop.notpermitted":o?e.text="library.addtoVisualization.nodrop.link":l?e.text="library.addtoVisualization.nodrop.invalid":s&&u||(e.text="library.addtoVisualization.nodrop.notsupported")}r.registerDropRect(i)}function Le(e){e.removeClass("active ");e.children().removeClass("hover")}h["default"].directive("qvLibraryDropTarget",[function(){return{restrict:"E",replace:true,scope:{},template:Ae,link:function e(t,r){t.active=false;var a={accept:{gridcell:function e(){return true}},start:Re.bind(null,t,r),end:Le.bind(null,r)};Pe["a"].registerDropTarget(a);t.$on("$destroy",(function(){Pe["a"].unregisterDropTarget(a)}))}}}]);var Ve=r("MhZw");var _e='<div ng-show="buttons.length > 0" class="assets-data-buttons">\n\t<button ng-repeat="button in buttons" class="lui-fade-button" ng-class="button.class" q-title-translation="{{button.tooltip}}" qva-activate="button.click()">\n\t\t<span ng-if="button.icon" class="lui-fade-button__icon lui-icon" ng-class="button.icon"></span>\n\t\t<span ng-if="button.label" class="lui-fade-button__text assets-data-label" q-translation="{{button.label}}"></span>\n\t</button>\n</div>';var Be=r("vkLz");var Fe=r("Mgwz");var He=r("ai+P");var ze=r("5Pwf");var We=r("0RAe");var Ge=r("v/w5");h["default"].directive("qvAssetsDataButtons",[function(){return{restrict:"E",replace:true,scope:{app:"="},template:_e,link:function e(t){t.buttons=[];ye["a"].get().then((function(e){e.isQDLEnabled()&&t.buttons.push({tooltip:"Assets.FieldsTab.AddData.Tooltip",label:"Common.Add",icon:"lui-icon--add",class:"data-button-add",click:function e(){Ge["a"].showAddData()}});var r=null;e.isScriptEditorHidden()||t.buttons.push({tooltip:"Assets.FieldsTab.RefreshData.Tooltip",class:"data-button-refresh",icon:"lui-icon--reload",click:function e(){if(r)return;var a={active:false,setActive:function e(t){this.active=t},isActive:function e(){return this.active}};Be["a"].init();t.app.getScript().then((function(e){var n=He["a"].createQScriptModelFromRawText(ze["a"].global,t.app.engineApp,e,[],[]);r=h["default"].getService("luiDialog").show({template:Fe["a"].template,controller:Fe["a"].controller,input:{scriptModel:n,progressIndicator:a,onClose:function e(){r=null;We["a"].fadeOutWorkingOverlay()}}})}))}})}))}}}]);var $e='<div id="assets-dynamic-view-select" ng-show="views.length">\n  <div class="dynamic-view-select">\n  <lui-select x-variant="{{variant}}" x-model="selectedView" id="dynamic-views-tab-views" ng-options="view as view.properties.data.name for view in views">\n  </lui-select>\n  </div>\n  <span class="lui-icon lui-icon--more" ng-click="openPreview($event);" qva-context-menu="openContextMenu($event);" q-title-translation="Tooltip.AssetPanel.ExpandWidgetInformation"></span>\n</div>';var Ue=r("Gpt9");var Ye=r("Tf0a");var Xe=r("qdvy");var Ke=r("Oi6C");var Qe='<lui-popover id="library-preview" class="dynamic-view-preview" x-arrow="arrow">\n\n  <lui-popover-body>\n    <h2 class="title">\n      <span qve-highlight text="{{input.name}}" query="input.query"></span>\n    </h2>\n    <h2><span q-translation="library.preview.odag.row.templateapp"></span></h2>\n    <p class="description">{{input.templateApp.name}}</p>\n\n    <span ng-if="input.rowEstExpr == \'1\' && input.rowEstCount == \'1\'">\n    <h2><span q-translation="DynamicView.Dialog.RowLimit"></span></h2>\n    <p class="description" q-translation="DynamicView.Dialog.RowLimit.None"></p>\n    </span>\n\n    <span ng-if="input.rowEstExpr != \'1\' || input.rowEstCount != \'1\'">\n    <h2><span q-translation="library.preview.odag.row.expression"></span></h2>\n    <p class="description">{{input.rowEstExpr}}</p>\n    <h2><span q-translation="library.preview.odag.row.count"></span></h2>\n    <p class="description">{{input.rowEstCount}}</p>\n    </span>\n  </lui-popover-body>\n\n  <lui-popover-footer>\n    <button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n            qva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n      <span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n    </button>\n  </lui-popover-footer>\n</lui-popover>';function Ze(e){var t={template:Qe,controller:["$scope",function(t){t.input=e}],dock:"right",alignTo:e.alignTo[0]};return h["default"].getService("luiPopover").show(t)}var Je={show:Ze};var et=r("xiWV");var tt=r("uqsp");h["default"].directive("qvAssetsDynamicViewSelect",[function(){return{restrict:"E",replace:true,scope:{selectedView:"=dynamicView",variant:"@",app:"=",allowEdit:"=allowEdit",dynViews:"="},template:$e,link:function e(t){function r(e){if(e.length>0){t.views=Te["a"].localeOrderBy(e,(function(e){return e.properties.data.name}));if(t.selectedView){if(-1===t.views.indexOf(t.selectedView)){var r=t.views.filter((function(e){return e.properties.data.id===t.selectedView.id}))[0];t.selectedView=void 0===r?t.views[0]:r}}else{if(t.cachedView){var a=t.views.filter((function(e){return e.properties.data.name===t.cachedView||e.properties.data.name===t.cachedView.properties.data.name}));t.selectedView=a[0];t.cachedView=null}else t.selectedView=t.views[0];t.selectedView.tags=[];t.selectedView.name=t.selectedView.properties.data.name;t.selectedView.id=t.selectedView.properties.data.id}}else{t.selectedView=void 0;t.views=null}}t.$watch("dynViews",r.bind(this));r(t.dynViews);if(t.selectedView){t.cachedView=t.selectedView;t.selectedView=null}Ue["a"].getList(t.app).then((function(e){t.listModel=e}));function a(e){Ye["a"].refresh(e.id,t.app)}function n(e){tt["a"].editDynamicView(t.app,e.id)}function i(e){var r="DynamicView.Delete.Warning";Te["a"].removeDialog(r,(function(){f["a"].publish("/dynamicView/state/change",{viewId:e.id,state:et["a"].VIEW_STATE.DELETE});Ye["a"].get(e.id).then((function(r){et["a"].deleteDynamicView(t.app,e.id,r.properties)}))}))}t.initPreviewManager=function(){var e=this;function r(t){t.item.tags=[];t.item.name=t.item.properties.data.name;t.item.id=t.item.properties.data.id;var r=t.item;var o=t.modelInfo;var l=Xe["a"].getBasePreviewInfo(t);l.templateApp=o.properties.data.templateApp;l.rowEstExpr=o.properties.data.rowEstExpr;l.rowEstCount=o.properties.data.properties.rowEstRange[0].highBound;l.buttons=[];l.buttons.push(Xe["a"].buttonRefresh(a.bind(e),t.closePreview,r));if(e.allowEdit){l.buttons.push(Xe["a"].buttonEdit(n.bind(e),t.closePreview,r));l.buttons.push(Xe["a"].buttonDelete(i.bind(e),t.closePreview,r))}l.close=t.closePreview;Xe["a"].alignPreview(l,t.$element);return Je.show(l)}this.item=t.selectedView;t.previewManager=Xe["a"].previewManagerFactory({getSlowInfo:function e(t){return Xe["a"].getItemInformation(Ye["a"],t.properties.data.id)},createPreview:r,itemDialogHandler:Ke["a"],State:l["a"]})};t.openPreview=function(e){t.previewManager.open(t.selectedView,"",m()(e.currentTarget))};t.openContextMenu=function(e){var r=this;var o=h["default"].getService("qvContextMenu").menu();Xe["a"].getItemInformation(Ye["a"],t.selectedView.properties.data.id).then((function(){o.addItem({translation:"DynamicView.Refresh.View",tid:"refresh-view",select:function e(){a(t.selectedView)}});if(r.allowEdit){o.addItem({translation:"Common.Edit",tid:"edit-view",select:function e(){n(t.selectedView)}});o.addItem({translation:"Common.Delete",tid:"remove-voiew",select:function e(){i(t.seslectedView)}})}Ke["a"].openContextMenu(o,t.selectedView,e)}))};t.initPreviewManager()}}}]);function rt(e){xe["a"].addDrag(e,".library-item",{allowScroll:true,isEnabled:function e(t){if(t.item.disabled||o["a"].isBlocked())return false;if(l["a"].view===l["a"].Views.sheet||l["a"].view===l["a"].Views.object)return l["a"].model.layout.permissions.update;if(l["a"].view===l["a"].Views.masterObject)return true;return false},cond:function e(t){if(ke["a"].treatAsDesktop())return true;if(t.distance>7){var r=65;return t.angle>=180-r&&t.angle<180+r}return},onStart:function e(t,r){f["a"].publish("/library/dragstart",r.item)},onStop:function e(t){f["a"].publish("/library/dragstop",t)},info:function e(t){return{type:t.item.dragDropType?t.item.dragDropType:"libraryitem",item:t.item}},elem:function e(t){var e=t.currentTarget.cloneNode(true);var r="lui-texthighlight";var a;if("div"===t.target.nodeName.toLowerCase()){e=t.target.parentElement.cloneNode(true);a=m()(e).find("ul");a&&a.children.length>0&&m()(e).find("ul").remove()}else if("li"===t.target.nodeName.toLowerCase()){a=m()(t.target).find("ul");if(a&&a.children.length>0&&"ul"!==t.target.parentElement.nodeName.toLowerCase())m()(e).find("ul").remove();else{e=t.target.cloneNode(true);m()(e).find("ul").remove()}}e.className+=" ui-draggable-dragging";m()(e).find(".".concat(r)).removeClass(r);return e}})}var at={template:Oe,restrict:"E",replace:true,scope:{app:"="},controller:["$scope","$element","$timeout",function(e,t,r){pe["a"].load().then((function(a){e.assets=a;e.isEditVariable=a.fullMode;t.on("transitionend",(function(e){"min-width"===e.originalEvent.propertyName&&r(se["a"].force,0)}));function n(){r(a.resize.bind(a),0)}f["a"].subscribe("/resize/end",n);Se.a.utils.touch&&t.on("touchforcechange",(function(){}));e.$on("$destroy",(function(){f["a"].unsubscribe("/resize/end",n);t.off("transitionend");Se.a.utils.touch&&t.off("touchforcechange");a.query=""}))}));rt(t)}]};h["default"].directive("qvStageAssets",[function(){return at}]);var nt=at;var it=r("KS3c");var ot=r("/EBH");var lt='<div class="qv-panel-subtoolbar qv-panel-edit-bar">\n\t<div class="qui-editbarflat qv-assets">\n\t\t<button\n\t\t\t\tng-class="{ \'active\': assetsOpen }"\n\t\t\t\tq-title-translation="{{assetsToggleLabel}}"\n\t\t\t\tng-click="toggleAssets()"\n\t\t\t\tdata-tid="assets-button">\n\t\t\t<span class="lui-icon lui-icon--toggle-left"></span>\n\t\t\t<span class="toggle-label" q-translation="{{assetsToggleLabel}}"></span>\n\t\t</button>\n\t</div>\n\t<div class="qui-editbarflat qv-editbar">\n\t\t<button\n\t\t\t\tclass="editbar-cut"\n\t\t\t\tng-disabled="!cell || !cell.canCut() || inMasterEditView"\n\t\t\t\tq-title-translation="contextMenu.cut"\n\t\t\t\tng-click="onCutClicked()">\n\t\t\t<span class="lui-icon  lui-icon--cut"></span>\n\t\t</button>\n\t\t<button\n\t\t\t\tclass="editbar-copy"\n\t\t\t\tng-disabled="!cell || !cell.canCopy() || inMasterEditView"\n\t\t\t\tq-title-translation="contextMenu.copy"\n\t\t\t\tng-click="onCopyClicked()">\n\t\t\t<span class="lui-icon  lui-icon--copy"></span>\n\t\t</button>\n\t\t<button\n\t\t\t\tclass="editbar-paste"\n\t\t\t\tng-disabled="!hasPasteData || !cell || !cell.paste || inMasterEditView"\n\t\t\t\tq-title-translation="contextMenu.paste"\n\t\t\t\tng-click="onPasteClicked()">\n\t\t\t<span class="lui-icon  lui-icon--paste"></span>\n\t\t</button>\n\t\t<button\n\t\t\t\tclass="editbar-remove"\n\t\t\t\ttid="editbar-remove-button"\n\t\t\t\tng-disabled="inMasterEditView || !cell || !cell.canRemove()"\n\t\t\t\tq-title-translation="Common.Delete"\n\t\t\t\tng-click="onRemoveClicked()">\n\t\t\t<span class="lui-icon  lui-icon--bin"></span>\n\t\t</button>\n\t</div>\n\t<div class="qui-editbarflat qv-undoredo">\n\t\t<button\n\t\t\t\tclass="editbar-undo"\n\t\t\t\tng-disabled="!undoredo.qUndoCount"\n\t\t\t\tq-title-translation="Common.Undo"\n\t\t\t\tng-click="undo($event)">\n\t\t\t<span class="lui-icon  lui-icon--back"></span>\n\t\t\t</button>\n\t\t<button\n\t\t\t\tclass="editbar-redo"\n\t\t\t\tng-disabled="!undoredo.qRedoCount"\n\t\t\t\tq-title-translation="Common.Redo"\n\t\t\t\tng-click="redo($event)">\n\t\t\t<span class="lui-icon  lui-icon--forward"></span>\n\t\t</button>\n\t</div>\n\t<div class="qui-editbarflat qv-properties">\n\t\t<button\n\t\t\t\tng-class="{ \'active\': propertiesOpen }"\n\t\t\t\tq-title-translation="{{propertiesTooltip}}"\n\t\t\t\tng-click="toggleProperties()"\n\t\t\t\tdata-tid="property-panel-btn">\n\t\t\t<span class="toggle-label" q-translation="{{propertiesToggleLabel}}"></span>\n\t\t\t<span class="lui-icon lui-icon--toggle-right"></span>\n\t\t</button>\n\t</div>\n</div>';var ct=r("1oJt");var st=r("4KCR");var ut='<div id="assets-button-panel" class="qui-editbarflat qv-assets">\n\n\t<button ng-repeat="tab in assets.tabs"\n\t\tng-class="{ active: assets.activeTab == tab && assets.tabExpanded, \'loading\': tab.loading}" dock="right"\n\t\tclass="qv-assets-toggle-button" tid="tab_bar_button_{{tab.id}}" qva-activate="assets.activateTab( tab )">\n\t\t<span class="lui-icon  lui-icon--{{tab.button.icon}}"></span>\n\t\t<qv-search-hit-indicator count="tab.hitCount"></qv-search-hit-indicator>\n\t\t<div class="qv-asset-toggle-label" q-translation="{{tab.longname || tab.button.text}}"></div>\n\t</button>\n\n\t<div class="divider"></div>\n\n\t<div class="filler"></div>\n\n\t<div>\n\t\t<div class="divider"></div>\n\t\t<button ng-if="isEditVariable" class="variable qv-assets-toggle-button" ng-class="{ \'active\': variablesOpen }"\n\t\t\ttid="show-variables" title="{{::\'Common.Variables\' | translate}}" lui-title-tooltip dock="right"\n\t\t\tqva-activate="openVariableDialog()">\n\t\t\t<span class="lui-icon  lui-icon--variables"></span>\n\t\t</button>\n\t</div>\n\n</div>';var dt='<div class="lui-modal-background"></div>\n<div class="lui-dialog" id="variable-dialog">\n\t<div class="lui-dialog__header var-header">\n\t\t<div class="lui-dialog__title" q-translation="Common.Variables"></div>\n\t\t<lui-button qva-activate="variableController.createMode( $event )"\n\t\t\t\t\tid="createvariable"\n\t\t\t\t\ttid="create-variable"\n\t\t\t\t\tq-translation="Variable.Dialog.New.Button">\n\t\t</lui-button>\n\t</div>\n\n\t<div class="lui-dialog__body variable-container">\n\t\t<qv-variable-list controller="variableController"></qv-variable-list>\n\t</div>\n\n\n\t<div class="lui-dialog__footer">\n\t\t<lui-button qva-activate="$event.preventDefault(); close()"\n\t\t\t\t\tname="close"\n\t\t\t\t\tng-disabled="variableController.newVariable.state.edit || variableController.newVariable.state.create"\n\t\t\t\t\tq-translation="Common.Close"\n\t\t\t\t\ttid="close">\n\t</div>\n</div>\n\n\n\n';var ft=r("GMLQ");var pt=r("CyFZ");var vt=r("xWKo");function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}function bt(e,t,r){t&&ht(e.prototype,t);r&&ht(e,r);return e}var gt=function(){function e(t){var r=this;mt(this,e);this.app=t;this.variables=[];this.newVariables=[];this.newVariable={};this.validity={name:true};this.treatAsDesktop=ke["a"].treatAsDesktop();this.container=m()(".modal-container");this.container.on("qv-activate",(function(){r.saveVariable();ft["a"].$rootScope.$apply()}))}bt(e,[{key:"saveVariable",value:function e(){this.createVariable();this.editVariable()}},{key:"showDetails",value:function e(t){this.saveVariable();this.isExpanded===t.qInfo.qId||this.isCreateMode()?this.isExpanded=null:this.isExpanded=t.qInfo.qId}},{key:"hideDetails",value:function e(){if(this.isExpanded&&!this.isCreateMode()){this.isExpanded=null;document.body.focus()}}},{key:"createMode",value:function e(t){t.stopPropagation();this.saveVariable();if(this.isCreateMode()){this.newVariable.scrollId=p["a"].generateId();return}this.isExpanded=null;this.newVariable={scrollId:p["a"].generateId(),qName:"",qDefinition:"",tags:[],state:{isNew:false,create:true,edit:false}};this.validity.name=true}},{key:"createVariable",value:function e(){if(this.dialogIsOpen)return;if(!this.isCreateMode())return;this.updateTags();if(this.isAllowedToClose()){this.newVariable={};return}if(!this.validateName(this.variables,this.newVariable)){this.validity.name=false;return}var t={qInfo:{qType:"variable"},qName:this.newVariable.qName,qDefinition:this.newVariable.qDefinition,qComment:this.newVariable.qComment,tags:this.newVariable.tags};this.persist(t);this.newVariables.unshift(this.newVariable.qName);this.newVariable={}}},{key:"remove",value:function e(t,r){t.stopPropagation();var a=this;vt["a"].show({text:"Variable.Dialog.Confirm.Delete"}).then((function(){a.app.destroyVariableById(r.qInfo.qId).then((function(){ft["a"].$rootScope.$emit("clearUndo");a.isEditMode()&&(a.newVariable.state.edit=false)}))}))}},{key:"cancel",value:function e(){this.isEditMode()&&(this.newVariable.state.edit=false);this.newVariable={}}},{key:"editVariable",value:function e(){if(this.dialogIsOpen)return;if(!this.isEditMode())return;this.updateTags();document.body.focus();var t=this.newVariable.qDefinition;var r=this.newVariable.qComment;var a=this.newVariable.tags;this.app.getVariableById(this.newVariable.qId).then((function(e){e.getProperties().then((function(n){n.qDefinition=t;n.qComment=r;n.tags=a;e.setProperties(n).then((function(){ft["a"].$rootScope.$emit("clearUndo")}))}))}));this.newVariable.state.edit=false;this.newVariable={}}},{key:"updateList",value:function e(t){var r=p["a"].extend(true,[],t);var a=[];for(var n=0;n<this.newVariables.length;n++)for(var i=0;i<r.length;i++)if(this.newVariables[n]===t[i].qName){r[i].state={isNew:true};a.push(r[i].qName)}this.newVariables=a;this.variables=this.orderVariableList(r)}},{key:"persist",value:function e(t){this.app.createVariableEx(t).then((function(){ft["a"].$rootScope.$emit("clearUndo")}))}},{key:"openInExpressionDialog",value:function e(t){var r=this;t.preventDefault();this.dialogIsOpen=true;pt["a"].show({expr:this.newVariable.qDefinition,title:this.newVariable.qDefinition?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then((function(e){r.newVariable.qDefinition=e})).finally((function(){r.dialogIsOpen=false}))}},{key:"openEdit",value:function e(t){t.state=t.state||{};t.state.edit=true;this.newVariable.qId=t.qInfo.qId;this.newVariable.state=t.state;this.newVariable.qDefinition=t.qDefinition;this.newVariable.qComment=t.qDescription;this.newVariable.tags=t.qData.tags||[]}},{key:"isCreateMode",value:function e(){return!!this.newVariable.state&&!!this.newVariable.state.create}},{key:"isEditMode",value:function e(){return!!this.newVariable.state&&!!this.newVariable.state.edit}},{key:"isAllowedToClose",value:function e(){return!!this.newVariable.state&&!!this.newVariable.state.create&&!this.newVariable.qName&&!this.newVariable.qDefinition&&!this.newVariable.qComment&&!this.newVariable.tags.length}},{key:"orderVariableList",value:function e(t){var r=this.newVariables.map((function(e){for(var r=0;r<t.length;r++)if(e===t[r].qName)return t[r];return}));var a=t.filter((function(e){return!e.state||!e.state.isNew})).sort((function(e,t){return e.qName.localeCompare(t.qName)}));return r.concat(a)}},{key:"close",value:function e(){this.container.off("qv-activate")}},{key:"validateName",value:function e(t,r){return this.validateNameLength(r)&&!this.validateExistence(t,r)}},{key:"validateNameLength",value:function e(t){return!!t.qName&&!!t.qName.trim()&&t.qName.length<256}},{key:"validateExistence",value:function e(t,r){return 0!==t.filter((function(e){return e.qName===r.qName})).length}}]);return e}();var yt=gt;var wt='<div class="variable-list-container">\n\t<ul class="lui-list variable-list-header">\n\t\t<li class="lui-list__header">\n\t\t\t<div class="lui-list__aside space-placeholder"></div>\n\t\t\t<div class="lui-list__text var-name" q-translation="Common.Name"></div>\n\t\t\t<div class="lui-list__text var-def" q-translation="Variable.Definition"></div>\n\t\t</li>\n\t</ul>\n\n\n\t<ul class="lui-list variable-list" ng-click="$event.stopPropagation()">\n\t\t<li ng-if="!!controller.newVariable">\n\t\t\t\x3c!--Create mode--\x3e\n\t\t\t<div ng-if="controller.newVariable.state.create" qva-outside="controller.createVariable()">\n\t\t\t\t<div class="lui-list__item lui-list__action" qva-scroll-into-view="{ scroll: controller.newVariable.scrollId, scrollSelector: \'.variable-list\' }" qv-escape="controller.cancel()">\n\t\t\t\t\t<div class="lui-list__text variabl-name-header" q-title-translation="Variable.Create.NewVariable" q-translation="Variable.Create.NewVariable"></div>\n\n\t\t\t\t\t<button tid="delete-button" class="lui-fade-button remove-button" ng-click="controller.cancel()" q-title-translation="Common.Delete">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--bin"></span>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button class="lui-fade-button lui-active" ng-click="controller.createVariable()" q-title-translation="Common.Save" data-tid="save">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--edit"></span>\n\t\t\t\t\t</button>\n\n\t\t\t\t</div>\n\t\t\t\t<div class="create-form variable-details">\n\t\t\t\t\t<div class="label" q-translation="metadata.name"></div>\n\t\t\t\t\t<input tid="name-input" type="text" qva-focus="controller.treatAsDesktop" class="lui-input" maxlength="255" placeholder="{{variable.qName}}" ng-model="controller.newVariable.qName" ng-class="{ \'lui-invalid\': !controller.validity.name }" />\n\t\t\t\t\t<div class="label" q-translation="metadata.definition"></div>\n\t\t\t\t\t<tiny-editor value="controller.newVariable.qDefinition" on-open="controller.openInExpressionDialog( $event )"></tiny-editor>\n\t\t\t\t\t<div class="label" q-translation="metadata.description"></div>\n\t\t\t\t\t<textarea tid="description-text" class="lui-textarea" maxlength="512" ng-model="controller.newVariable.qComment"></textarea>\n\t\t\t\t\t<div class="label" q-translation="metadata.tags" ></div>\n\t\t\t\t\t<qv-tagcloud tags="controller.newVariable.tags" update="controller.updateTags"></qv-tagcloud>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\n\t\t<li ng-repeat="variable in controller.variables track by variable.qInfo.qId" data-tid="variable-item">\n\t\t\t\x3c!--Edit mode--\x3e\n\t\t\t<div ng-if="controller.isExpanded == variable.qInfo.qId && variable.state.edit" qva-outside="controller.editVariable()">\n\t\t\t\t<div class="lui-list__item lui-list__action" ng-click="controller.editVariable()" qv-escape="controller.cancel()">\n\t\t\t\t\t<div class="lui-list__text variabl-name-header" title={{variable.qName}}>{{variable.qName}}</div>\n\n\t\t\t\t\t<button tid="delete-button" class="lui-fade-button remove-button" ng-click="controller.remove( $event, variable )" q-title-translation="Common.Delete">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--bin"></span>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button tid="edit-button" class="lui-fade-button lui-active" ng-click="controller.editVariable()" q-title-translation="Common.Save">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--edit"></span>\n\t\t\t\t\t</button>\n\n\t\t\t\t</div>\n\t\t\t\t<div class="create-form variable-details" qva-scroll-into-view="{ scroll: true, scrollSelector: \'.variable-list\' }">\n\t\t\t\t\t<div class="label" q-translation="metadata.definition"></div>\n\t\t\t\t\t<tiny-editor value="controller.newVariable.qDefinition" on-open="controller.openInExpressionDialog( $event )"></tiny-editor>\n\t\t\t\t\t<div class="label" q-translation="metadata.description"></div>\n\t\t\t\t\t<textarea tid="description-text" class="lui-textarea" maxlength="512" ng-model="controller.newVariable.qComment"></textarea>\n\t\t\t\t\t<div class="label" q-translation="metadata.tags"></div>\n\t\t\t\t\t<qv-tagcloud tags="controller.newVariable.tags" update="controller.updateTags"></qv-tagcloud>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!--Read only list--\x3e\n\t\t\t<div ng-if="controller.isExpanded != variable.qInfo.qId" ng-click="controller.showDetails( variable )" class="lui-list__item lui-list__action">\n\t\t\t\t<div class="lui-list__aside space-placeholder lui-icon lui-icon--script" ng-if="variable.qIsScriptCreated" q-title-translation="Variable.Script.Tooltip" data-tid="script-variable"></div>\n\t\t\t\t<div class="lui-list__aside space-placeholder" ng-if="!variable.qIsScriptCreated"></div>\n\t\t\t\t<div class="lui-list__text var-name" title={{variable.qName}}>{{variable.qName}}</div>\n\t\t\t\t<div class="lui-list__text var-def" title={{variable.qDefinition}}>{{variable.qDefinition}}</div>\n\t\t\t\t<div ng-if="variable.state.isNew" q-translation="Common.New" class="newTag">New</div>\n\t\t\t</div>\n\t\t\t<div ng-if="controller.isExpanded == variable.qInfo.qId && !variable.state.edit" qva-scroll-into-view="{ scroll: true, scrollSelector: \'.variable-list\' }" qv-escape="controller.hideDetails()">\n\t\t\t\t<div class="lui-list__item lui-list__action" ng-click="controller.showDetails( variable )">\n\t\t\t\t\t<div class="lui-list__aside space-placeholder lui-icon lui-icon--script" ng-if="variable.qIsScriptCreated" q-title-translation="Variable.Script.Tooltip"></div>\n\t\t\t\t\t<div class="lui-list__text variabl-name-header" title={{variable.qName}}>{{variable.qName}}</div>\n\n\t\t\t\t\t<button ng-if="!variable.qIsScriptCreated" tid="delete-button" class="lui-fade-button remove-button" ng-click="controller.remove( $event, variable )" q-title-translation="Common.Delete">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--bin"></span>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button ng-if="!variable.qIsScriptCreated" tid="edit-button" class="lui-fade-button lui-active" ng-click="controller.openEdit( variable )" q-title-translation="Common.Edit">\n\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--edit"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="variable-details">\n\t\t\t\t\t<div class="var-def-expanded">{{variable.qDefinition}}</div>\n\t\t\t\t\t<div ng-if="!variable.qIsScriptCreated" class="var-description">{{variable.qDescription}}</div>\n\t\t\t\t\t<div ng-if="variable.qIsScriptCreated" class="var-description" q-translation="Variable.Script.Description"></div>\n\t\t\t\t\t<ul class="tags">\n\t\t\t\t\t\t<li ng-repeat="tag in variable.qData.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }">{{tag}}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>\n';var Et=r("zEO2");ft["a"].directive("qvVariableList",[function(){return{template:wt,replace:true,restrict:"E",scope:{controller:"="}}}]);var St=r("Bcg+");var Ot={template:dt,controller:["$scope",function(e){fe["a"].getApp().then((function(t){e.variableController=new yt(t);var r=e.variableController;e.close=function(){r.newVariable.state=r.newVariable.state||{};if(r.newVariable.state.create||r.newVariable.state.edit)return;e.destroyComponent();e.deferredResult.resolve();r.close()};t.getVariableListObject().then((function(t){e.listModel=t;var a=t.layoutSubscribe((function(e){e=e.filter((function(e){return!e.qIsReserved&&!e.qIsConfig}));r.updateList(e)}));e.$on("$destroy",(function(){a.dispose()}))}));e.$watch("variableController.newVariable.qName",(function(){r.validity.name||(r.validity.name=r.validateName(r.variables,r.newVariable))}))}))}]};function xt(){var e=h["default"].getService("luiDialog").show({template:Ot.template,controller:Ot.controller,closeOnOutside:false,showArrow:false});return e}var kt={show:xt};var jt={template:ut,replace:true,restrict:"E",scope:{assets:"=",isEditVariable:"="},controller:["$scope",function(e){e.variablesOpen=false;e.openVariableDialog=function(){e.variablesOpen=true;kt.show().opened.then((function(){e.variablesOpen=false}))}}]};h["default"].directive("qvAssetsButtonPanel",[function(){return jt}]);var Dt=jt;var Ct=r("sWge");var qt=r("7ME1");function It(){delete localStorage["QlikView-clipboard"];delete localStorage["QlikView-clipboardMasterObject"];delete localStorage["QlikView-clipboardMeasures"];delete localStorage["QlikView-clipboardDimensions"];delete localStorage["QlikView-clipboardChildren"]}function Tt(e,t){var r=[];var a=e.length;var n=0;var i=new Ct["a"];0===a&&i.resolve(r);r.length=a;m.a.each(e,(function(o){t.getDimensionProp(e[o]).then((function(e){var t={};t.id=e.qInfo.qId;t.type=e.qInfo.qType;t.grouping=e.qGrouping;t.title=e.title;t.fields=e.qDim.qFieldDefs;r[o]=t;n++;n===a&&i.resolve(r)}))}));return i.promise}function At(e,t){var r=[];var a=e.length;var n=0;var i=new Ct["a"];0===a&&i.resolve(r);r.length=a;m.a.each(e,(function(o){t.getMeasureProp(e[o]).then((function(e){var t={};t.id=e.qInfo.qId;t.title=e.title;t.def=e.qMeasure.qDef;r[o]=t;n++;n===a&&i.resolve(r)}))}));return i.promise}function Pt(e,t,r){var a;var n=[];var i=[];if(e.qHyperCubeDef)for(a=0;a<e.qHyperCubeDef.qDimensions.length;a++)e.qHyperCubeDef.qDimensions[a].qLibraryId&&n.push(e.qHyperCubeDef.qDimensions[a].qLibraryId);if(e.qHyperCubeDef)for(a=0;a<e.qHyperCubeDef.qMeasures.length;a++)e.qHyperCubeDef.qMeasures[a].qLibraryId&&i.push(e.qHyperCubeDef.qMeasures[a].qLibraryId);r.getChildrenFor(e.qInfo.qId).then((function(o){var l=m.a.extend(true,{},e);o.length?localStorage["QlikView-clipboardChildren"]=JSON.stringify(o):delete localStorage["QlikView-clipboardChildren"];for(a=0;a<o.length;a++)o[a].qListObjectDef&&o[a].qListObjectDef.qLibraryId&&n.push(o[a].qListObjectDef.qLibraryId);Tt(n,r).then((function(e){e.length?localStorage["QlikView-clipboardDimensions"]=JSON.stringify(e):delete localStorage["QlikView-clipboardDimensions"]}));At(i,r).then((function(e){e.length?localStorage["QlikView-clipboardMeasures"]=JSON.stringify(e):delete localStorage["QlikView-clipboardMeasures"]}));r.addAppId(l).then((function(){localStorage["QlikView-clipboard"]=JSON.stringify(l);t.resolve()}))}))}function Mt(e,t){var r=new Ct["a"];t.getVisualizationProp(e).then((function(e){if(e.qExtendsId){localStorage["QlikView-clipboardMasterObject"]=JSON.stringify(e);t.getMasterObjectProp(e.qExtendsId).then((function(a){var n=p["a"].extend(true,{},a);n.qInfo.qType=e.qInfo.qType;Pt(n,r,t)}))}else{delete localStorage["QlikView-clipboardMasterObject"];Pt(e,r,t)}}));return r.promise}function Nt(e){var t=JSON.parse(localStorage["QlikView-clipboard"]);var r=new Ct["a"];e.isCopyingBundledImageBetweenApps(t).then((function(e){e&&qt["a"].showDialog([{message:"Object.CopyBetweenApps.BundleImageWarning.Text"}]);r.resolve(t)}));return r.promise}function Rt(e){var t;var r=new Ct["a"];var a=localStorage["QlikView-clipboardMasterObject"];if(a){t=JSON.parse(a);e.masterObjectExists(t.qExtendsId).then((function(){r.resolve(t)}),(function(){Nt(e).then((function(e){delete e.appId;r.resolve(e)}))}))}else Nt(e).then((function(e){delete e.appId;r.resolve(e)}));return r.promise}function Lt(e,t,r,a){var n=new Ct["a"];try{Rt(t).then((function(i){if(!t.hasVisualizationType(i.qInfo.qType)){n.reject(true);return}var o;var l=localStorage["QlikView-clipboardChildren"];o=l?JSON.parse(l):[];e||(e=r.getOptimalCell());e?a.dataCheck(i,t).then((function(){a.childrenDataCheck(o,t).then((function(){n.resolve({cell:e,init:i,children:o,template:i.qInfo.qType})}))})):n.reject(false)}))}catch(e){n.reject(true)}return n.promise}function Vt(e,t,r){this.CopySupport=e;this.GridService=t;this.CopyTranslate=r}Vt.prototype.resetCopyBuffer=It;Vt.prototype.pasteObject=function(e){return Lt(e,this.CopySupport,this.GridService,this.CopyTranslate)};Vt.prototype.copyObject=function(e){if(e.isInvalidObject)return;return Mt(e,this.CopySupport)};Vt.prototype.cutObject=function(e,t){if(e.isInvalidObject){t.removeCell(e);return}return Mt(e,this.CopySupport).then((function(){t.removeCell(e)}))};var _t=Vt;var Bt=r("JbzQ");var Ft=r("X8RK");var Ht=r("Xxft");var zt=r("2n0V");var Wt={};Wt.getDimensionProp=function(e){var t=new Ct["a"];Bt["a"].get(e).then((function(e){e.getProperties().then((function(e){t.resolve(e)}))}));return t.promise};Wt.getMeasureProp=function(e){var t=new Ct["a"];Ft["a"].get(e).then((function(e){e.getProperties().then((function(e){t.resolve(e)}))}));return t.promise};Wt.getVisualizationProp=function(e){var t=new Ct["a"];e.getVisualization?e.getVisualization().then((function(e){e.model.getProperties().then((function(e){t.resolve(e)}))})):t.reject("No Visualization");return t.promise};Wt.getMasterObjectProp=function(e){var t=new Ct["a"];Ht["a"].get(e).then((function(e){e.getProperties().then((function(e){t.resolve(e)}))}));return t.promise};Wt.masterObjectExists=function(e){var t=new Ct["a"];Ht["a"].get(e).then((function(){t.resolve()}),(function(){t.reject()}));return t.promise};Wt.hasVisualizationType=function(e){return zt["a"].getType(e)};Wt.getMeasureList=function(){return Ft["a"].getListLayout()};Wt.getDimensionList=function(){return Bt["a"].getListLayout()};Wt.getChildrenFor=function(e){var t=[];var r=[];var a;return fe["a"].getApp().then((function(n){return n.getObject(e).then((function(e){return e.getChildInfos().then((function(e){for(a=0;a<e.length;++a)t.push(n.getObject(e[a].qId));return Ct["a"].all(t).then((function(e){for(a=0;a<e.length;++a)r.push(e[a].getProperties());return Ct["a"].all(r)}))}))}))}))};Wt.addAppId=function(e){return fe["a"].getApp().then((function(t){e.appId=t.id}))};function Gt(e){var t=new RegExp("^/media/");if("text-image"===e.visualization){if(e.background.url.qStaticContentUrlDef&&t.test(e.background.url.qStaticContentUrlDef.qUrl))return true;for(var r=0;r<e.images.length;r++)if(t.test(e.images[r].url.qStaticContentUrlDef.qUrl))return true}else if("map"===e.visualization)for(var a=0;a<e.gaLayers.length;a++){var n=e.gaLayers[a].image&&e.gaLayers[a].image.qStaticContentUrlDef;if(n&&t.test(n.qUrl))return true}return false}Wt.isCopyingBundledImageBetweenApps=function(e){return fe["a"].getApp().then((function(t){return t.id!==e.appId&&Gt(e)}))};var $t=Wt;var Ut={};function Yt(e,t,r){var a=new Ct["a"];var n=0;var i={dimensionId:e.id,found:false,match:-1,matchtype:0};function o(t){if(t.matchtype>i.matchtype){t.dimensionId=e.id;i=t}}r.length?m.a.each(r,(function(l){if(r[l].qInfo.qType===e.type)if(r[l].qInfo.qId===e.id){o({found:true,match:-1,matchtype:3});n++}else t.getDimensionProp(r[l].qInfo.qId).then((function(t){var c=0;if(t.qDim.qFieldDefs.length===e.fields.length)while(c<t.qDim.qFieldDefs.length){if(t.qDim.qFieldDefs[c]!==e.fields[c])break;c++;o({found:false,match:l,matchtype:1})}n++;n===r.length&&a.resolve(i)}));n===r.length&&a.resolve(i)})):a.resolve(i);return a.promise}function Xt(e,t,r){var a=new Ct["a"];var n=0;r.getDimensionList().then((function(i){m.a.each(t,(function(o){Yt(t[o],r,i).then((function(r){if(!r.found){if(e.qListObjectDef&&r.dimensionId===e.qListObjectDef.qLibraryId){if(r.match<0){a.resolve();return}e.qListObjectDef.qLibraryId=i[r.match].qInfo.qId}if(e.qHyperCubeDef){if(r.match<0){a.resolve();return}e.qHyperCubeDef.qDimensions.length>o&&(e.qHyperCubeDef.qDimensions[o].qLibraryId=i[r.match].qInfo.qId)}}n++;n===t.length&&a.resolve()}))}))}));return a.promise}function Kt(e,t){var r=new Ct["a"];var a=0;var n={found:false,match:-1,matchtype:0};function i(e){e.matchtype>n.matchtype&&(n=e)}t.getMeasureList().then((function(o){o.length?m.a.each(o,(function(l){if(o[l].qInfo.qId===e.id){i({found:true,match:-1,matchtype:3});a++}else t.getMeasureProp(o[l].qInfo.qId).then((function(t){e.def===t.qMeasure.qDef&&i({found:false,match:l,matchtype:1});a++;a===o.length&&r.resolve(n)}));a===o.length&&r.resolve(n)})):r.resolve(n)}));return r.promise}function Qt(e,t,r){var a=new Ct["a"];var n=0;r.getMeasureList().then((function(i){m.a.each(t,(function(o){Kt(t[o],r).then((function(r){if(!r.found){if(r.match<0){a.resolve();return}e.qHyperCubeDef.qMeasures.length&&(e.qHyperCubeDef.qMeasures[o].qLibraryId=i[r.match].qInfo.qId)}n++;n===t.length&&a.resolve()}))}))}));return a.promise}Ut.dataCheck=function(e,t,r){var a=false;var n=false;var i;var o;var l=new Ct["a"];try{i=JSON.parse(localStorage["QlikView-clipboardDimensions"]);Xt(e,i,t).then((function(){a=true;n&&l.resolve()}),(function(){l.reject(r)}))}catch(e){a=true;n&&l.resolve()}try{o=JSON.parse(localStorage["QlikView-clipboardMeasures"]);Qt(e,o,t).then((function(){n=true;a&&l.resolve()}))}catch(e){n=true;a&&l.resolve()}return l.promise};Ut.childrenDataCheck=function(e,t){var r;var a=[];var n=0;var i=new Ct["a"];function o(t){void 0!==t&&a.push(t);n++;if(n===e.length){a.sort();a.length&&e.splice(a.pop(),1);i.resolve()}}if(e.length)for(r=0;r<e.length;r++)this.dataCheck(e[r],t,r).then(o,o);else i.resolve();return i.promise};var Zt=Ut;var Jt=new _t($t,o["a"],Zt);function er(e){return e&&e.grid&&e.grid.gridService?e.grid.gridService:o["a"]}f["a"].subscribe("/copypaste/reset",(function(){Jt.resetCopyBuffer();f["a"].publish("/editbar/pastedata",false)}));f["a"].subscribe("/activeSheet/copyObject",(function(e){Jt.copyObject(e).then((function(){o["a"].deactivateCell(e);f["a"].publish("/editbar/pastedata",true)}))}));f["a"].subscribe("/activeSheet/cutObject",(function(e){Jt.cutObject(e,er(e)).then((function(){o["a"].deactivateCell(e);f["a"].publish("/editbar/pastedata",true)}))}));f["a"].subscribe("/activeSheet/pasteObject",(function(e){o["a"].zoomOut();Jt.pasteObject(e).then((function(t){t.service=er(e);f["a"].publish("/dropAction/newObject",t);t.service.activateCell(e)}),(function(e){if(e){Jt.resetCopyBuffer();f["a"].publish("/editbar/pastedata",false)}}))}));var tr=r("RPgM");var rr=r("9/B2");var ar;var nr;var ir;var or=false;var lr={template:lt,replace:true,restrict:"E",scope:{assetsOpen:"=",propertiesOpen:"="},controller:["$scope",function(e){e.stageState=de["a"];e.inMasterEditView=l["a"].view===l["a"].Views.masterObject;ir=window.localStorage["QlikView-clipboard"]&&window.localStorage["QlikView-clipboard"].length>0;e.hasPasteData=ir;e.undoredo={};e.undoredo.qUndoCount=0;e.undoredo.qRedoCount=0;function t(){e.propertiesToggleLabel=e.propertiesOpen?d["default"].get("editbar.hideProperties"):d["default"].get("editbar.showProperties");de["a"].selectedObject&&"gridCell"===de["a"].selectedObject.type?e.propertiesTooltip=e.propertiesOpen?d["default"].get("editbar.hideChartProperties"):d["default"].get("editbar.showChartProperties"):e.propertiesTooltip=e.propertiesOpen?d["default"].get("editbar.hideSheetProperties"):d["default"].get("editbar.showSheetProperties")}e.assetsToggleLabel=e.assetsOpen?d["default"].get("editbar.hideAssets"):d["default"].get("editbar.showAssets");t();var r=st["a"].hasPending();e.$watch((function(){return st["a"].hasPending()}),(function(e){r=e}));e.undo=function(t){t&&m()(t.target).blur();if(r)return;if(e.undoinfo&&!or){or=true;e.undoinfo.undo().then((function(){or=false}))}};e.redo=function(t){t&&m()(t.target).blur();if(r)return;if(e.undoinfo&&!or){or=true;e.undoinfo.redo().then((function(){or=false}))}};e.clearUndo=function(){e.undoinfo&&e.undoinfo.reset()};f["a"].subscribe("/editbar/undo.editbar",e.undo);f["a"].subscribe("/editbar/redo.editbar",e.redo);e.onCopyClicked=function(){e.cell&&"function"===typeof e.cell.copy&&e.cell.copy()};e.onCutClicked=function(){e.cell&&"function"===typeof e.cell.cut&&e.cell.cut()};e.onPasteClicked=function(){e.cell&&"function"===typeof e.cell.paste&&e.cell.paste()};e.onRemoveClicked=function(){if(e.cell&&"function"===typeof e.cell.remove){e.cell.remove();rr["a"].setSheetAsSelectedObj()}};e.checkPasteData=function(t){ir=t;l["a"].model.getLayout().then((function(r){e.hasPasteData=t&&r.permissions.update;f["a"].publish("editbar/subToolbar/hasPasteData",t&&r.permissions.update);h["default"].$apply(e)}))};var a=e.$root.$on("clearUndo",(function(){e.clearUndo()}));e.$on("$destroy",(function(){a()}));e.stateChanged=function(t,r){if(nr!==t){e.inMasterEditView=t===l["a"].Views.masterObject;f["a"].publish("/editbar/subToolbar/inMasterEditView",t===l["a"].Views.masterObject);nr!==l["a"].Views.story&&nr!==l["a"].Views.overview&&nr!==l["a"].Views.masterObject&&t!==l["a"].Views.story&&t!==l["a"].Views.view&&t!==l["a"].Views.masterObject||e.clearUndo()}ar!==r&&(e.cell=de["a"].selectedObject);nr=t;ar=r};e.sheetChanged=function(){e.checkPasteData(ir);e.clearUndo()};e.toggleAssets=function(){e.assetsOpen=!e.assetsOpen;e.assetsToggleLabel=e.assetsOpen?d["default"].get("editbar.hideAssets"):d["default"].get("editbar.showAssets")};e.toggleProperties=function(){de["a"].togglePropertyPanelByUser()};var n=function t(r){e.$apply((function(){e.assetsOpen=r}))};f["a"].subscribe("editbar/subToolbar/assetsOpen",n);var i=function t(r){e.$apply((function(){e.propertiesOpen=r}))};f["a"].subscribe("editbar/subToolbar/propertiesOpen",i);f["a"].subscribe("/editbar/pastedata.editbar",e.checkPasteData);e.$watch("stageState.selectedObject",(function(r){e.cell=r;t();f["a"].publish("editbar/subToolbar/selectedObject",r)}));e.$watch("stageState.propertiesOpen",(function(){e.propertiesOpen=de["a"].propertiesOpen;t()}));ct["a"].get().then((function(t){e.undoinfo=t;e.undoinfo.reset()}));Object(qe["a"])(e,"undoinfo",(function(t){e.undoredo=t.qUndoInfo}));l["a"].StateChanged.bind(e.stateChanged);l["a"].SheetChanged.bind(e.sheetChanged);e.$on("$destroy",(function(){f["a"].unsubscribe(".editbar");l["a"].StateChanged.unbind(e.stateChanged);l["a"].SheetChanged.unbind(e.sheetChanged)}));l["a"].model&&e.sheetChanged(l["a"].model);e.stateChanged(l["a"].view,l["a"].state);return this}]};h["default"].directive("qvStageEditBar",[function(){return lr}]);var cr=lr;var sr=r("yRTf");var ur=r("U7Ny");var dr=r("r67N");var fr=r("Xb14");var pr=r("plVp");var vr=r("OU/z");var mr=r("R/ED");var hr;var br=false;var gr=sr["a"].createGroup("sheet",10);function yr(){gr.on()}function wr(){h["default"].getService("qvContextMenu").close();fr["a"].close()}function Er(){var e=m()(".qv-dialog").is(":visible");var t=m()(".qui-delayedModal").is(":visible");var r=m()(".qv-hdlm-wizard").is(":visible");var a=m()(".lui-dialog").is(":visible");return e||t||dr["a"].isOpened||r||a}function Sr(){var e=Er();if(!e){wr();Be["a"].saveApp()}}function Or(){br=true;fe["a"].getApp().then((function(e){e.global.getConfiguration().then((function(e){!e.qFeatures.qAutoSave&&br&&gr.registerKeys("ctrl+s",Sr,{allowInInput:true})}))}));yr()}function xr(){br=false;gr.off()}function kr(e){if(e===l["a"].Views.sheet||e===l["a"].Views.object||e===l["a"].Views.masterObject){xr();Or()}else xr()}l["a"].StateChanged.bind(kr);function jr(){if(hr)return Ct["a"].resolve(hr);return l["a"].model.getLayout().then((function(e){hr=e.permissions;return Ct["a"].resolve(hr)}))}function Dr(){var e=pr["a"].isSelectActive();var t=Er();var r=m()(".stage-dimmer").length;var a=!t&&!r&&!e;return a}function Cr(){var e=Dr();if(e){wr();I["a"].Sheets.getAllSheets().then((function(e){var t;var r;if(Object(u["b"])("SHEET_SHOW_CONDITION")&&l["a"].state===l["a"].States.analysis){var a=e.mashed[I["a"].Sheets.currentIndex(e.mashed)];var n=I["a"].filterSheets(e.mashed,a);r=I["a"].Sheets.getPrevious(n)}else r=I["a"].Sheets.getPrevious(e.mashed);r?q["a"].goToSheet(null===(t=r)||void 0===t?void 0:t.qInfo.qId,Object.keys(l["a"].States)[l["a"].state]):null}))}}function qr(){var e=Dr();if(e){wr();I["a"].Sheets.getAllSheets().then((function(e){var t=Object(u["b"])("SHEET_SHOW_CONDITION")&&l["a"].state===l["a"].States.analysis?e.mashedVisible[0]:e.mashed[0];t?q["a"].goToSheet(null===t||void 0===t?void 0:t.qInfo.qId,Object.keys(l["a"].States)[l["a"].state]):null}))}}function Ir(){var e=Dr();if(e){wr();I["a"].Sheets.getAllSheets().then((function(e){var t;var r;if(Object(u["b"])("SHEET_SHOW_CONDITION")&&l["a"].state===l["a"].States.analysis){var a=e.mashed[I["a"].Sheets.currentIndex(e.mashed)];var n=I["a"].filterSheets(e.mashed,a);r=I["a"].Sheets.getNext(n)}else r=I["a"].Sheets.getNext(e.mashed);r?q["a"].goToSheet(null===(t=r)||void 0===t?void 0:t.qInfo.qId,Object.keys(l["a"].States)[l["a"].state]):null}))}}function Tr(){var e=Dr();if(e){wr();I["a"].Sheets.getAllSheets().then((function(e){var t=Object(u["b"])("SHEET_SHOW_CONDITION")&&l["a"].state===l["a"].States.analysis?e.mashedVisible[e.mashedVisible.length-1]:e.mashed[e.mashed.length-1];t?q["a"].goToSheet(null===t||void 0===t?void 0:t.qInfo.qId,Object.keys(l["a"].States)[l["a"].state]):null}))}}function Ar(){var e=Dr();e&&fe["a"].getApp().then((function(e){return e.getLayout()})).then((function(e){if(!e.qReadOnly&&e.permissions.createSheet){wr();return l["a"].setState(l["a"].isInEditMode()?l["a"].States.analysis:l["a"].States.edit)}return}))}function Pr(){if(!o["a"].isActive())return;jr().then((function(e){var t=Dr();var r=de["a"].selectedObject;var a=!r||r.isEmpty;var n=r&&r.canCopy&&r.canCopy()&&"function"===typeof r.copy;if(t&&e.update&&l["a"].isInEditMode()&&n&&!a){wr();r.copy()}}))}function Mr(){if(!o["a"].isActive())return;jr().then((function(e){var t=Dr();var r=de["a"].selectedObject;var a=!r||r.isEmpty;var n=r&&r.canCut&&r.canCut()&&"function"===typeof r.cut;if(t&&e.update&&l["a"].isInEditMode()&&n&&!a){wr();r.cut()}}))}function Nr(){if(!o["a"].isActive())return;jr().then((function(e){var t=Dr();var r=de["a"].selectedObject;var a="function"===typeof(null===r||void 0===r?void 0:r.paste);if(t&&e&&l["a"].isInEditMode()&&a){wr();r.paste()}}))}function Rr(){jr().then((function(e){var t=Dr();if(t&&e.update&&l["a"].isInEditMode()){wr();f["a"].publish("/editbar/undo")}}))}function Lr(){jr().then((function(e){var t=Dr();if(t&&e.update&&l["a"].isInEditMode()){wr();f["a"].publish("/editbar/redo")}}))}function Vr(){if(!o["a"].isActive())return;var e=l["a"].view===l["a"].Views.masterObject;var t=Dr();o["a"].getZoomCell()?o["a"].zoomOut():mr["a"].softReset("GenericObject");if(t&&!e){wr();rr["a"].setSheetAsSelectedObj();h["default"].$rootScope.$apply()}}function _r(){if(!o["a"].isActive())return;jr().then((function(e){var t=Dr();var r=de["a"].selectedObject;var a=!!r;var n=l["a"].view===l["a"].Views.masterObject;var i=r&&r.canRemove()&&"function"===typeof r.remove;if(e.update&&i&&t&&a&&!n&&l["a"].isInEditMode()){wr();r.remove();rr["a"].setSheetAsSelectedObj()}}))}function Br(){if(l["a"].state===l["a"].States.analysis&&!Er()&&!m()(".stage-dimmer").length){wr();fe["a"].getApp().then((function(e){vr["a"].openGlobalSearch(e)}))}}gr.registerKeys("ctrl+left",Cr);gr.registerKeys("ctrl+home",qr);gr.registerKeys("ctrl+right",Ir);gr.registerKeys("ctrl+end",Tr);gr.registerKeys("ctrl+e",Ar);gr.registerKeys("ctrl+c",Pr);gr.registerKeys("ctrl+x",Mr);gr.registerKeys("ctrl+v",Nr);gr.registerKeys("ctrl+z",Rr);gr.registerKeys("ctrl+y",Lr);gr.registerKeys("cmd+shift+z",Lr);gr.registerKeys("esc",Vr);gr.registerKeys("del",_r);gr.registerKeys("ctrl+f",Br);gr.registerKeys("backspace",_r);var Fr=r("2X6M");var Hr=r("VIxP");var zr=r("+/IW");var Wr=r("iSLG");var Gr=r("MvZm");var $r=r("51to");var Ur=r("yHaC");var Yr=r("IygW");function Xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(r),true).forEach((function(t){Qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qr(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Zr(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Jr(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Zr(i,a,n,o,l,"next",e)}function l(e){Zr(i,a,n,o,l,"throw",e)}o(void 0)}))}}function ea(e,t){e.curSelOptions.enableCao=t;e.curSelOptions.objectSearch=!t}function ta(e){return ra.apply(this,arguments)}function ra(){ra=Jr(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:r=0;case 1:if(!(r<t.length)){a.next=7;break}a.next=4;return t[r]();case 4:r++;a.next=1;break;case 7:case"end":return a.stop()}}),e)})));return ra.apply(this,arguments)}function aa(e){var t=e.layout,r=e.app;if(Object(u["b"])("SHEET_TRIGGER")){var a=t.actions,n=t.qStateName;if(a&&a.length){var i=[];a.forEach((function(e){var t=Yr["b"].find((function(t){return t.value===e.actionType}));t&&i.push(t.getActionCall(Kr({app:r,qStateName:n},e)))}));return ta(i)}}return Promise.resolve()}var na={template:oe,controller:["$scope","$timeout","$element",function(e,t){var r=false;var a=Object(u["b"])("CLASSIFY_ON_DEMAND");var n=null;function i(e,t){Ur["a"].isInsightsAvailable().then((function(r){r?t.app.published||!t.permissions.update?ea(e,!e.insightsScriptDisabled):ea(e,Object(u["b"])("CAO")&&!e.insightsScriptDisabled):ea(e,false)}))}var c=function t(r){i(e,r)};fe["a"].getApp().then((function(i){var s=false;e.app=i;e.navbarModel={app:i,sheetId:e.currentSheet&&e.currentSheet?e.currentSheet.id:null};e.enableSheet=true;e.currentSheet=null;e.hasODAGNavPoints=false;e.odagAssetsTabActive=false;e.assetsController=null;e.odagFeatureOn=false;e.insightsScriptDisabled=false;e.brightTheme=Object(u["b"])("BRIGHT_THEME");e.subToolbar=Object(u["b"])("SUB_TOOLBAR");e.isSmallDevice=function(){return ve["default"].isSmallDevice};e.curSelOptions={enableCao:false,variant:"bright",objectSearch:!Object(u["b"])("CAO")};e.state=de["a"];pe["a"].loadAppVariables(i).then((function(){if(he["a"].isVariableDefined("DISABLE_INSIGHTS")){e.insightsScriptDisabled=true;ea(e,false)}}));ye["a"].get().then((function(e){c(e.model);e.bindOnModelChanged(c)}));f["a"].subscribe(be["a"].Events.PubSub.ExpandSmartSearchSuggestedChart,(function(t){e.expandSmartSearchSuggestedChart=Boolean(t)}));function d(t){e.state.propertiesOpen=t;t&&(s=true)}e.$watch(l["a"].isInEditMode,(function(a){f["a"].publish("/editbar/subToolbar/modeChange/assetsOpen",e.state.assetsOpen);f["a"].publish("/editbar/subToolbar/modeChange/propertiesOpen",e.state.propertiesOpen);a!==e.inEdit&&void 0!==e.inEdit&&t(se["a"].force);l["a"].model.getLayout().then((function(t){e.inEdit=a;e.stateLoaded=true;if(e.inEdit&&!s&&!de["a"].hasPropertiesBeenClosedByUser()){d(t.cells.length>0);f["a"].publish("/editbar/subToolbar/modeChange/propertiesOpen",t.cells.length>0)}if(e.inEdit){if(!t.permissions.update&&o["a"].getZoomCell()){o["a"].zoomOut();o["a"].deactivateCell()}e.assetsController||pe["a"].load().then((function(t){e.assetsController=t}));if(e.activeCell&&"gridCellStale"===e.activeCell.type){var n=o["a"].getCellWithId(e.activeCell.id);n?o["a"].activateCell(n):rr["a"].setSheetAsSelectedObj()}else e.updateStagePropertyPanel(e.activeCell)}ce["a"].get().then((function(t){ue["a"].isODAGAvailable(t).then((function(a){e.odagFeatureOn=a;if(e.odagFeatureOn&&!r&&e.currentSheet&&e.currentSheet.getNavPoints){ge["a"].getList().then((function(e){e.layout&&e.layout.qAppObjectList&&e.layout.qAppObjectList.qItems.length>0&&ue["a"].getODAGLinks(t)}));e.currentSheet.getNavPoints().then((function(t){e.hasODAGNavPoints=t.length>0}))}}))}))}))}));if(a){f["a"].subscribe("/ui/library/classifyOnDemand",(function(){pe["a"].classify().then((function(e){f["a"].publish("/ui/library/classifcationDone",e)}))}));f["a"].subscribe("/ui/autochart/classifyOnDemand",(function(){pe["a"].classify().then((function(e){f["a"].publish("/ui/autochart/classifcationDone",e)}))}))}e.$watchCollection("state",(function(r,a){var n=r.propertiesOpen!==a.propertiesOpen&&"undefined"!==typeof a.propertiesOpen;(r.assetsOpen!==a.assetsOpen||n)&&t(se["a"].force);if(r.selectedObject!==a.selectedObject){r.selectedObject&&!s&&d(true);e.activeCell=r.selectedObject}(n&&r.propertiesOpen||r.selectedObject!==a.selectedObject)&&e.updateStagePropertyPanel(e.activeCell)}));e.updateStagePropertyPanel=function(t){if(t){n=t;n.id===e.activeCell.id&&t.getAllPropertyPanelContent().then((function(t){if(n.id===e.activeCell.id&&t&&e.activeCell.id===t.properties.qInfo.qId){var r={iconName:"",titleRef:"",components:null,definition:null,properties:null,layout:null,localeInfo:null,app:i,cache:null,ext:null,globalChangeListeners:null,handler:null,model:null,yMirrorMode:me["a"].isRtl};p["a"].extend(r,t);e.$broadcast("updateContent",r)}})).catch((function(){}))}};e.$on("refreshPropertyPanel",(function(){l["a"].isInEditMode()&&e.updateStagePropertyPanel(e.activeCell)}));e.$watch(pr["a"].isSelectActive.bind(null,i),(function(t){if(t){e.activeCell&&"gridCell"===e.activeCell.type&&(e.activeCell.type="gridCellStale");o["a"].saveZoom();o["a"].saveScrollState()}else if(!t){o["a"].restoreZoom();o["a"].restoreScrollState()}e.enableSheet=!t}));e.showSheet=function(){t((function(){e.enableSheet||(e.enableSheet=true)}))};f["a"].subscribe("/globalselections/close",e.showSheet);e.$watch(Wr["a"].isOpen,(function(t){e.isInSmallDeviceMenu=t}));e.enableODAGToolbar=function(){var t=l["a"].model.layout&&l["a"].model.layout.permissions.update;var r=null;e.assetsController&&(r=e.assetsController.getActiveTabId());var a="assets-tab-odag"===r;var n=true;e.odagFeatureOn?e.inEdit?t&&(e.hasODAGNavPoints||a)||(n=false):e.hasODAGNavPoints||(n=false):n=false;return n};e.sheetChanged=function(t){e.currentSheet=t;e.navbarModel.sheetId=t&&t.id?t.id:null;t.getLayout().then((function(e){l["a"].isInEditMode()&&!s&&d(e.cells.length>0);aa({layout:e,app:t.app})}));rr["a"].setSheetAsSelectedObj();e.activeCell=de["a"].selectedObject;e.state.propertiesOpen&&e.activeCell&&e.updateStagePropertyPanel(e.activeCell);!r&&e.currentSheet&&e.currentSheet.getNavPoints&&e.currentSheet.getNavPoints().then((function(t){e.hasODAGNavPoints=t.length>0}))};e.sheetChanged(l["a"].model);l["a"].SheetChanged.bind(e.sheetChanged);!l["a"].isInEditMode()&&le["a"].isInSelectionsMode()&&pr["a"].toggleGlobalSelection(i)}));this.destroy=function(){r=true;e.currentSheet=null;l["a"].SheetChanged.unbind(e.sheetChanged);de["a"].reset();e.destroyComponent();f["a"].unsubscribe(be["a"].Events.PubSub.ExpandSmartSearchSuggestedChart);ye["a"].get().then((function(e){e.unbindOnModelChanged(c)}));if(a){f["a"].unsubscribe("/ui/library/classifyOnDemand");f["a"].unsubscribe("/ui/autochart/classifcationDone")}f["a"].unsubscribe("/globalselections/close",e.showSheet)}}]};function ia(){var e=Object(a["useRef"])(null);var t;Object(a["useEffect"])((function(){t=h["default"].showComponent(e.current,na);return function(){if(t)try{t.destroy()}catch(e){console.error(e)}}}),[]);return n.a.createElement("div",{id:"qv-stage-container",ref:e})}var oa=ia;function la(e,t){return fa(e)||da(e,t)||sa(e,t)||ca()}function ca(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sa(e,t){if(!e)return;if("string"===typeof e)return ua(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ua(e,t)}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function da(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function fa(e){if(Array.isArray(e))return e}function pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(r),true).forEach((function(t){ma(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ma(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var ha=function e(t,r){switch(r.type){case"testSMTP":return va(va({},t),{},{testingSMTP:true});case"smtpTestResult":return va(va({},t),{},{smtpTestResult:r.smtpTestResult,message:r.message});case"pop":return va(va({},t),{},{showToast:true,toastMessage:r.message,testingSMTP:false,variant:r.variant});case"eat":return va(va({},t),{},{showToast:false,testingSMTP:false});default:return t}};var ba={showToast:false,toastMessage:"",testingSMTP:false};var ga=Object(a["createContext"])(ba);var ya=function e(t){var r=Object(a["useReducer"])(ha,ba),i=la(r,2),o=i[0],l=i[1];return n.a.createElement(ga.Provider,{value:{shareApiState:o,dispatch:l}},t.children)};var wa=ga;var Ea=r("lOOT");var Sa=r("1Dig");var Oa=r("p8SL");var xa=r("YvUk");var ka=r("/ZiB");var ja=r("oQEK");var Da=r("26BU");var Ca=r("R82R");var qa=r("MK7S");var Ia={DISABLED:"disabled",ERROR:"error",NO_SMTP:"noSMTP",IDLE:"",SENDING:"sending",TRYAGAIN:"tryagain"};var Ta=Ia;var Aa=r("kebl");var Pa=r("3Dqh");var Ma=r("BAq9");var Na=r("H2Dr");var Ra=r.n(Na);var La=r("Qpod");function Va(e,t){return za(e)||Ha(e,t)||Ba(e,t)||_a()}function _a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ba(e,t){if(!e)return;if("string"===typeof e)return Fa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fa(e,t)}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ha(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function za(e){if(Array.isArray(e))return e}var Wa={characterLimit:280};var Ga=Object(Ca["a"])((function(e){return{control:{flex:"0 0 auto",paddingBottom:e.spacing(2),"&:last-child":{paddingBottom:"0px"}},marginTop:{marginTop:e.spacing(1)},optional:{color:"#9F9F9F"},messageTextArea:{display:"flex",flexDirection:"column",placeItems:"flex-start","& textarea":{overflow:"hidden"}}}}));var $a={characterLimit:s.a.number,disabled:s.a.bool,onApply:s.a.func.isRequired};var Ua={characterLimit:void 0,disabled:false};var Ya=function e(t){var r=t.characterLimit,i=t.disabled,o=t.onApply;var l=Ga();var c=Object(a["useState"])(r),s=Va(c,2),u=s[0],f=s[1];var p=Object(a["useState"])(""),v=Va(p,2),m=v[0],h=v[1];Object(a["useEffect"])((function(){var e=r-m.length;if(e<1){f(0);return}f(e)}),[m]);var b=function e(t){var a=t.target.value;a.length>r&&(a=a.substring(0,r));h(a)};var g=function e(t){o(t.target.value)};return n.a.createElement("div",{className:l.messageTextArea},n.a.createElement(Aa["a"],{className:l.marginTop,onChange:b,onBlur:g,multiline:true,variant:"outlined",margin:"none",rows:3,type:"text",fullWidth:true,helperText:d["default"].get("Sharing.Dialog.MessageInputHint",[u]),value:m,tid:"sharing-content-message-textfield",disabled:i}))};Ya.propTypes=$a;Ya.defaultProps=Ua;var Xa={maxRecipients:s.a.number.isRequired,onRecipientApply:s.a.func.isRequired,onMessageApply:s.a.func.isRequired,onError:s.a.func.isRequired,sharingState:s.a.object.isRequired};var Ka=function e(t){var r=t.maxRecipients,a=t.onRecipientApply,i=t.onMessageApply,o=t.onError,l=t.sharingState;var c=Ga();var s=function e(t){switch(t){case La["a"].error.tokenLimit:o(d["default"].get("Sharing.Dialog.RecipientLimitError",[r]));break;case La["a"].error.invalidToken:default:o(d["default"].get("Sharing.Dialog.ResolveErrors"));break}};var u=function e(){return l.state===Ta.NO_SMTP};return n.a.createElement(n.a.Fragment,null,n.a.createElement(Pa["a"],{className:c.control,fullWidth:true},n.a.createElement(Ma["a"],{className:c.controlLabel},d["default"].get("Sharing.Dialog.RecipientFieldLabel")),n.a.createElement(La["b"],{className:c.marginTop,onApply:function e(t){return a(t.map((function(e){return e.label})))},onError:s,validator:Ra.a.isEmail,tokenLimit:r,disabled:u(),tid:"sharing-content-token-input-field"})),n.a.createElement(Pa["a"],{className:c.control},n.a.createElement(Ma["a"],null,d["default"].get("Sharing.Dialog.MessageFieldLabel"),n.a.createElement("span",{className:c.optional}," ".concat(d["default"].get("Sharing.Dialog.Optional")))),n.a.createElement(Ya,{characterLimit:Wa.characterLimit,onApply:i,disabled:u(),tid:"sharing-content-message-textfield-root"})))};Ka.propTypes=Xa;var Qa=Ka;var Za=r("0g17");var Ja=r("lxKZ");var en=r("4cZo");var tn=Object(Ca["a"])((function(e){return{statusContainer:{display:"flex",alignItems:"center"},icon:{alignSelf:"center",marginRight:e.spacing(1)}}}));function rn(e){var t=Object(C["c"])();var r=tn();var a=e.sharingState;var i=function e(){return a.state===Ta.ERROR||a.state===Ta.TRYAGAIN||a.state===Ta.NO_SMTP};var o=function e(){if(a.state===Ta.SENDING)return t("Sharing.Dialog.Sending");return n.a.createElement(n.a.Fragment,null,n.a.createElement(en["a"],{name:"warning",className:r.icon,size:"medium"}),a.message)};if(a.state===Ta.IDLE||a.state===Ta.DISABLED)return null;return n.a.createElement(ka["a"],{variant:"caption",color:i()?"error":"textPrimary"},n.a.createElement("div",{className:r.statusContainer},o()))}rn.propTypes={sharingState:s.a.object.isRequired};var an=r("Rx6o");var nn=r("/NZN");var on=Object(Ca["a"])((function(e){return{shareButton:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},warningButton:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main,"&:hover":{backgroundColor:e.palette.warning.light},"&:active":{backgroundColor:e.palette.warning.dark},"&.sprout-focus-visible":{borderColor:e.palette.warning.light,boxShadow:"0 0 0 3px ".concat(Object(an["d"])(e.palette.warning.light,.5))}}}}));function ln(e){var t=Object(C["c"])();var r=on();var a=e.sharingState,i=e.onShareClick;var o=function e(){return a.state===Ta.TRYAGAIN?"".concat(r.shareButton," ").concat(r.warningButton):r.shareButton};return n.a.createElement(nn["a"],{className:o(),variant:"contained",color:"primary",onClick:i,tid:"share-chart-share-button",disabled:a.state===Ta.SENDING||a.state===Ta.ERROR||a.state===Ta.NO_SMTP||a.state===Ta.DISABLED},a.state===Ta.TRYAGAIN?t("Sharing.Dialog.TryAgain"):t("ContextMenu.ShareChart"))}ln.propTypes={onShareClick:s.a.func.isRequired,sharingState:s.a.object.isRequired};var cn=Object(Ca["a"])((function(e){return{componentSpacing:{marginLeft:e.spacing(2)},circularProgress:{color:e.palette.text.primary},dialogActions:{borderTop:"1px solid rgba(0,0,0,0.2)",backgroundColor:"#FBFBFB",display:"flex",justifyContent:"flex-end"}}}));function sn(e){var t=cn();var r=e.sharingState,a=e.onShareClick;return n.a.createElement(Za["a"],{className:t.dialogActions,disableSpacing:true},n.a.createElement(rn,{sharingState:r}),r.state===Ta.SENDING?n.a.createElement("div",{className:t.componentSpacing},n.a.createElement(Ja["a"],{className:t.circularProgress,size:"2em"})):null,n.a.createElement("div",{className:t.componentSpacing},n.a.createElement(ln,{sharingState:r,onShareClick:a})))}sn.propTypes={onShareClick:s.a.func.isRequired,sharingState:s.a.object.isRequired};var un=r("czhI");var dn=r.n(un);var fn=r("/2No");var pn={requestTimeoutMs:15e3};var vn=function e(t,r,a,n,i,o,l,c,s,u,d,f){var p={template:{type:"chart",chartData:{appId:n,sheetId:i,objectId:o,widthPX:l,heightPX:c,outZoom:2,outDpi:192,jsOpts:{language:u,theme:d,viewState:f}}},recipients:{emails:t,userIds:r},state:{selections:s}};a&&(p.message=a);return p};var mn=function e(t,r,a,n){var i="".concat(fn["a"].rootPath,"api/v1/sharing/onetime-tasks");var o={timeout:pn.requestTimeoutMs};n&&(o.validateStatus=n);dn.a.post(i,t,o).then(r).catch(a)};var hn=function e(t,r,a){var n="".concat(fn["a"].rootPath,"api/v1/transport/smtp-test");var i={timeout:pn.requestTimeoutMs};a&&(i.validateStatus=a);dn.a.post(n,{},i).then((function(e){var a;return(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.success)?t():r()})).catch(r)};var bn=function e(t,r,a){var n="".concat(fn["a"].rootPath,"api/v1/transport/smtp-check");var i={timeout:pn.requestTimeoutMs};a&&(i.validateStatus=a);dn.a.get(n,i).then(t).catch(r)};var gn={createChartSharePayload:vn,getSMTPValidity:bn,postOneTimeTask:mn,postTestSMTP:hn};var yn=r("rkyv");var wn=r("UV1h");var En=r("SGQX");var Sn=r("RZ9f");function On(e,t){return Cn(e)||Dn(e,t)||kn(e,t)||xn()}function xn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kn(e,t){if(!e)return;if("string"===typeof e)return jn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(e,t)}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Dn(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Cn(e){if(Array.isArray(e))return e}var qn=Object(Ca["a"])((function(e){return{dialogContent:{padding:"0px",display:"flex",flexDirection:"column"},previewWrapper:function t(r){var a=r.fullScreen;return{backgroundColor:"#525659",boxSizing:"border-box",flex:a?"1 1 100%":"1 0 350px",overflow:"hidden",height:"350px",padding:e.spacing(4)}},contentWrapper:function t(r){var a=r.fullScreen;return{display:"flex",flex:"0 0 177px",flexDirection:"column",overflowY:a?"auto":"visible",padding:e.spacing(4)}}}}));var In={app:s.a.object.isRequired,appId:s.a.string.isRequired,direction:s.a.string.isRequired,objectId:s.a.string.isRequired,objectHeight:s.a.number.isRequired,objectWidth:s.a.number.isRequired,maxRecipients:s.a.number.isRequired,sheetId:s.a.string.isRequired,show:s.a.bool,snapshotLayout:s.a.object.isRequired,viewState:s.a.object.isRequired};var Tn={show:false};var An=function e(t){var r=t.app,i=t.appId,o=t.direction,l=t.objectId,c=t.objectHeight,s=t.objectWidth,u=t.maxRecipients,p=t.sheetId,v=t.show,m=t.snapshotLayout,h=t.viewState;var b=Object(Ea["a"])();var g=Object(Sa["a"])(b.breakpoints.down("sm"));var y=Object(Sa["a"])("(orientation: landscape)");var w=qn({fullScreen:g});var E=Object(a["useState"])({state:Ta.DISABLED,message:""}),S=On(E,2),O=S[0],x=S[1];var k=Object(a["useState"])([]),j=On(k,2),D=j[0],C=j[1];var q=Object(a["useState"])(""),I=On(q,2),T=I[0],A=I[1];var P=Object(a["useState"])(false),M=On(P,2),N=M[0],R=M[1];var L=wn["a"].getCurrentTheme();var V=Object(a["useContext"])(wa),_=V.dispatch;var B=Object(yn["a"])(),F=On(B,2),H=F[0],z=F[1];var W=function e(){var t=D.length>0?Ta.IDLE:Ta.DISABLED;x({state:t,message:""})};var G=function e(){x({state:Ta.NO_SMTP,message:d["default"].get("Sharing.Dialog.SMTPValidityError")});R(true)};var $=function e(t){var r=t.data.isValid;r||G()};Object(a["useEffect"])((function(){z(r).then(W).catch((function(){x({state:Ta.ERROR,message:d["default"].get("Sharing.Dialog.RetrieveSelectionError")})})).finally((function(){gn.getSMTPValidity($,G)}))}),[]);Object(a["useEffect"])((function(){N||W()}),[D,N]);var U=function e(t){if(t){x({state:Ta.ERROR,message:t});return}W()};var Y=function e(){f["a"].publish("/share-chart-dialog/close","")};var X=function e(){x({state:Ta.IDLE,message:""});_({type:"pop",message:d["default"].get("Sharing.Dialog.EmailSentSuccess"),variant:"success"});Y()};var K=function e(){x({state:Ta.TRYAGAIN,message:d["default"].get("Sharing.Dialog.SendError")})};var Q=function e(){var t=function e(t){return 202===t};var r=gn.createChartSharePayload(D,[],T,i,p,l,s,c,H,d["default"].language,L,h);gn.postOneTimeTask(r,X,K,t)};var Z=function e(){x({state:Ta.TRYAGAIN,message:d["default"].get("Sharing.Dialog.SMTPError")})};var J=function e(){x({state:Ta.SENDING,message:""});var t=function e(t){return 200===t};gn.postTestSMTP(Q,Z,t);Sn["a"].trackEvent(Sn["a"].customEvents.CHART_SHARED,{chart_share_method:"Image"})};return n.a.createElement(Oa["a"],{fullScreen:g,open:v,maxWidth:"sm",fullWidth:true},n.a.createElement(xa["a"],null,n.a.createElement(ka["a"],{variant:"h5"},d["default"].get("Sharing.Dialog.Title")),n.a.createElement(ja["a"],{onClick:Y,tid:"share-chart-close"},n.a.createElement(qa["a"],null))),n.a.createElement(Da["a"],{className:w.dialogContent},!(y&&g)&&n.a.createElement("div",{className:w.previewWrapper},n.a.createElement(En["a"],{app:r,direction:o,infoText:"".concat(2*s," x ").concat(2*c," px"),objectHeight:c,objectWidth:s,snapshotLayout:m,viewState:h})),n.a.createElement("div",{className:w.contentWrapper},n.a.createElement(Qa,{maxRecipients:u,onRecipientApply:C,onMessageApply:A,onError:U,sharingState:O,tid:"share-chart-content"}))),n.a.createElement(sn,{sharingState:O,onShareClick:J,tid:"share-chart-footer-content"}))};An.propTypes=In;An.defaultProps=Tn;var Pn=An;var Mn=r("0+WI");function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),true).forEach((function(t){Ln(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ln(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Vn(e,t){if(null==e)return{};var r=_n(e,t);var a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){a=i[n];if(t.indexOf(a)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,a))continue;r[a]=e[a]}}return r}function _n(e,t){if(null==e)return{};var r={};var a=Object.keys(e);var n,i;for(i=0;i<a.length;i++){n=a[i];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Bn(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Fn(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Bn(i,a,n,o,l,"next",e)}function l(e){Bn(i,a,n,o,l,"throw",e)}o(void 0)}))}}function Hn(e,t){return Un(e)||$n(e,t)||Wn(e,t)||zn()}function zn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wn(e,t){if(!e)return;if("string"===typeof e)return Gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gn(e,t)}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function $n(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Un(e){if(Array.isArray(e))return e}var Yn=Object.freeze({OPEN:"/share-chart-dialog/open",CLOSE:"/share-chart-dialog/close"});function Xn(){var e=Object(a["useState"])({show:false}),t=Hn(e,2),r=t[0],i=t[1];var o=function(){var e=Fn(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function e(l){while(1)switch(l.prev=l.next){case 0:r=t.visualization,a=Vn(t,["visualization"]);l.next=3;return r.getViewState();case 3:n=l.sent;l.next=6;return r.getSnapshotLayout();case 6:o=l.sent;i(Rn({show:true,viewState:n,objectId:r.model.id,snapshotLayout:o},a));case 8:case"end":return l.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();var l=function e(){i({show:false,type:"",objectId:""})};var c=function e(){Mn["a"].load();f["a"].subscribe(Yn.OPEN,o);f["a"].subscribe(Yn.CLOSE,l)};var s=function e(){f["a"].unsubscribe(Yn.OPEN,o);f["a"].unsubscribe(Yn.CLOSE,l)};Object(a["useEffect"])((function(){c();return s}),[r]);var u=r.show,d=r.sheetId,v=r.width,m=r.height,h=r.objectId,b=r.direction,g=r.viewState,y=r.snapshotLayout;var w=p["a"].getParameterByName("app");var E=Object(F["a"])(w),S=Hn(E,1),O=S[0];var x=Mn["a"].get(),k=x.MAX_RECIPIENTS;if(!O||!u)return null;return n.a.createElement(Pn,{show:u,app:O,appId:w,sheetId:d,objectId:h,direction:b,viewState:g,snapshotLayout:y,objectWidth:v,objectHeight:m,maxRecipients:k})}var Kn=r("PWpK");var Qn=r("wuU5");var Zn={position:{vertical:"top",horizontal:"center"},duration:3e3};var Jn={showTransition:s.a.bool};var ei={showTransition:true};var ti=Object(Ca["a"])((function(e){return{icon:{marginRight:e.spacing(1)},success:{color:e.palette.primary.main},failure:{color:e.palette.error.main},toast:{top:"65px"}}}));function ri(e){var t=Object(a["useContext"])(wa),r=t.shareApiState,o=t.dispatch;var l=ti();var c=function e(){o({type:"eat"})};var s=function e(){return"success"===r.variant?"".concat(l.icon," ").concat(l.success):"".concat(l.icon," ").concat(l.failure)};var u=function e(){return"success"===r.variant?"tick":"warning"};if(!r.showToast)return null;return n.a.createElement(Kn["a"],{anchorOrigin:{vertical:Zn.position.vertical,horizontal:Zn.position.horizontal},className:l.toast,open:r.showToast,onClose:c,autoHideDuration:Zn.duration,TransitionProps:{appear:e.showTransition}},n.a.createElement(Qn["a"],{message:n.a.createElement("span",null,n.a.createElement(i["f"],{name:u(),className:s()}),r.toastMessage)}))}ri.propTypes=Jn;ri.defaultProps=ei;function ai(){return n.a.createElement(ya,null,n.a.createElement(Xn,null),n.a.createElement(ri,null))}var ni=r("xcgN");function ii(e){ii="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return ii(e)}function oi(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ci(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}function si(e,t,r){t&&ci(e.prototype,t);r&&ci(e,r);return e}function ui(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&di(e,t)}function di(e,t){di=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return di(e,t)}function fi(e){var t=mi();return function r(){var a=hi(e),n;if(t){var i=hi(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return pi(this,n)}}function pi(e,t){if(t&&("object"===ii(t)||"function"===typeof t))return t;return vi(e)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mi(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function hi(e){hi=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return hi(e)}var bi=function e(t){var r=t.id,a=t.label,o=t.checked,l=t.autoFocus,c=t.onChange,s=t.tid;return n.a.createElement("div",{className:"qs-embed-form__row-container"},n.a.createElement("div",{className:"qs-embed-form__label-container"},n.a.createElement("label",{htmlFor:r},a),n.a.createElement("span",null,n.a.createElement("b",null,d["default"].get(o?"Common.Yes":"Common.No")))),n.a.createElement("div",{className:"qs-embed-form__input-container",tid:s},n.a.createElement(i["m"],{autoFocus:l,id:r,checked:o,onChange:c})))};bi.defaultProps={autoFocus:false,tid:""};bi.propTypes={id:s.a.string.isRequired,label:s.a.string.isRequired,checked:s.a.bool.isRequired,autoFocus:s.a.bool,onChange:s.a.func.isRequired,tid:s.a.string};var gi=function(e){ui(r,e);var t=fi(r);function r(e){var a;li(this,r);a=t.call(this,e);a.state={allowSelections:true,showSelectionBar:true,allowInteraction:true,enableContextMenu:true,clearSelections:false,theme:"",bookmark:"",language:"",useCurrentSelections:true,savedState:{allowSelections:true,enableContextMenu:true}};a.handleChange=a.handleChange.bind(vi(a));a.handleSelectionsChange=a.handleSelectionsChange.bind(vi(a));return a}si(r,[{key:"componentDidMount",value:function e(){var t=this.props.onChange;t(this.state)}},{key:"componentDidUpdate",value:function e(t,r){var a=this.props,n=a.onChange,i=a.selectionsReady;r===this.state&&t.selectionsReady===i||n(this.state)}},{key:"getSwitchRow",value:function e(t,r,a,o,l){var c=this;return n.a.createElement("div",{className:"qs-embed-form__row-container",disabled:l},n.a.createElement("div",{className:"qs-embed-form__label-container"},n.a.createElement("label",{htmlFor:r},t),n.a.createElement("span",null,n.a.createElement("b",null,d["default"].get(a?"Common.Yes":"Common.No")))),n.a.createElement("div",{className:"qs-embed-form__input-container",tid:o},n.a.createElement(i["m"],{id:r,checked:a,onChange:function e(){return c.handleChange(r,!a)},disabled:l,className:l?"lui-disabled":""})))}},{key:"getSelectRow",value:function e(t,r,a,o,l){var c=this;return n.a.createElement("div",{className:"qs-embed-form__row-container"},n.a.createElement("div",{className:"qs-embed-form__label-container"},n.a.createElement("label",{htmlFor:a},t)),n.a.createElement("div",{className:"qs-embed-form__input-container"},n.a.createElement(i["l"],{tid:l,id:a,onChange:function e(t){return c.handleChange(a,t.target.value)}},n.a.createElement("option",{value:""},r),o.map((function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.name)})))))}},{key:"handleChange",value:function e(t,r){var a=this.state,n=a.allowSelections,i=a.enableContextMenu,o=a.savedState;var l=o.allowSelections,c=o.enableContextMenu;"allowInteraction"!==t||r?"allowInteraction"===t?this.setState((function(){var e;return e={},oi(e,t,r),oi(e,"allowSelections",l),oi(e,"enableContextMenu",c),e})):this.setState((function(){return oi({},t,r)})):this.setState((function(){var e;return e={},oi(e,t,r),oi(e,"allowSelections",false),oi(e,"enableContextMenu",false),oi(e,"savedState",{allowSelections:n,enableContextMenu:i}),e}))}},{key:"handleSelectionsChange",value:function e(){this.setState((function(e){return{useCurrentSelections:!e.useCurrentSelections}}))}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.allowInteraction,i=r.clearSelections,o=r.allowSelections,l=r.enableContextMenu,c=r.showSelectionBar,s=r.useCurrentSelections;var u=this.props,f=u.themes,p=u.bookmarks,v=u.languages,m=u.showWarning;return n.a.createElement("div",{className:"qs-embed-form"},n.a.createElement("div",{className:"qs-embed-configurator__desc"},d["default"].get("Embed.Dialog.Description")),n.a.createElement("div",{className:"qs-embed-form__section"},n.a.createElement("h1",null,d["default"].get("Embed.Dialog.General")),n.a.createElement(bi,{autoFocus:true,id:"allowInteraction",label:d["default"].get("Embed.Dialog.AllowInteraction"),checked:a,onChange:function e(){return t.handleChange("allowInteraction",!a)},tid:"1206e2"}),this.getSwitchRow(d["default"].get("Embed.Dialog.EnableContextMenu"),"enableContextMenu",l,"",!a),this.getSwitchRow(d["default"].get("Embed.Dialog.AllowSelections"),"allowSelections",o,"",!a),this.getSelectRow(d["default"].get("Embed.Dialog.Languages"),d["default"].get("Embed.Dialog.LanguageDefault"),"language",v,""),this.getSelectRow(d["default"].get("Embed.Dialog.SetTheme"),d["default"].get("Embed.Dialog.ThemeDefault"),"theme",f,"")),n.a.createElement("div",{className:"qs-embed-form__section"},n.a.createElement("h1",null,d["default"].get("Embed.Dialog.Selections")),n.a.createElement(bi,{id:"useCurrentSelections",label:d["default"].get("Embed.Dialog.UseCurrentSelections"),checked:s,onChange:this.handleSelectionsChange}),m&&n.a.createElement("div",{className:"qs-embed-form__row-container"},n.a.createElement("div",{className:"qs-embed-form__warning"},n.a.createElement("span",{className:"lui-icon  lui-icon--warning","aria-hidden":"true"})," ",d["default"].get("Embed.Dialog.UrlLengthWarning"))),this.getSwitchRow(d["default"].get("Embed.Dialog.ShowSelectionsBar"),"showSelectionBar",c,"1206ef"),this.getSwitchRow(d["default"].get("Embed.Dialog.SetClearSelections"),"clearSelections",i,"1206ee"),this.getSelectRow(d["default"].get("Embed.Dialog.ApplyBookmark"),d["default"].get("Embed.Dialog.NoBookmark"),"bookmark",p,"111afa")))}}]);return r}(a["Component"]);gi.defaultProps={onChange:function e(){},showWarning:false,selectionsReady:false};gi.propTypes={onChange:s.a.func,themes:s.a.array.isRequired,bookmarks:s.a.array.isRequired,languages:s.a.array.isRequired,showWarning:s.a.bool,selectionsReady:s.a.bool};var yi=r("FZ1g");function wi(e){var t=n.a.createRef();var r=function e(r){t.current.value=r;t.current.select();document.execCommand("copy")};return n.a.createElement(n.a.Fragment,null,e.render(r),n.a.createElement("input",{type:"text",style:{position:"absolute",top:"-9999px",opacity:0},readOnly:true,tabIndex:"-1","aria-hidden":true,ref:t}))}wi.propTypes={render:s.a.func.isRequired};function Ei(e,t){return ji(e)||ki(e,t)||Oi(e,t)||Si()}function Si(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oi(e,t){if(!e)return;if("string"===typeof e)return xi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xi(e,t)}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ki(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function ji(e){if(Array.isArray(e))return e}var Di=function e(t){var r=t.url,i=t.dialogClassName,o=t.objectWidth,l=t.objectHeight,c=t.infoContainerLabelSelector,s=t.type;var u=Object(C["c"])();var d=Object(a["useRef"])(null);var f=Object(a["useState"])({renderedWidth:null,renderedHeight:null}),p=Ei(f,2),v=p[0],m=p[1];var h=function e(){var t=v.renderedWidth,r=v.renderedHeight;if(o&&l){var a=r/l;var n=t/o;return Math.min(a,n)}return null};var b=function e(){var t=h();if(t&&o&&l)return{width:"".concat(o,"px"),height:"".concat(l,"px"),transform:"scale(".concat(t,")"),transformOrigin:"center"};return null};var g=function e(){var t=h();if(t&&o&&l)return{width:t*o,height:t*l};return{width:null,height:null}};Object(a["useEffect"])((function(){m({renderedWidth:d.current.offsetWidth,renderedHeight:d.current.offsetHeight})}),[]);var y=g(),w=y.width,E=y.height;return n.a.createElement("div",{className:"".concat(i,"__preview"),ref:d},n.a.createElement("div",{className:"".concat(i,"__preview-wrapper"),"aria-hidden":"true",style:{width:w}},n.a.createElement("div",{className:"".concat(i,"__preview-title")},n.a.createElement("span",null,u("Common.Preview"))),n.a.createElement("div",{className:"".concat(i,"__object-wrapper"),"aria-hidden":"true",style:{height:E}},n.a.createElement("iframe",{title:"preview",className:"".concat(i,"__preview"),style:b(),src:r,tid:"111a8f"})),n.a.createElement("div",{className:"".concat(i,"__info-container")},n.a.createElement("input",{type:"text",readOnly:true,value:c(s)}))))};Di.propTypes={url:s.a.string.isRequired,dialogClassName:s.a.string.isRequired,objectWidth:s.a.number,objectHeight:s.a.number,infoContainerLabelSelector:s.a.func.isRequired,type:s.a.oneOf(["sheet","object"]).isRequired};Di.defaultProps={objectWidth:void 0,objectHeight:void 0};var Ci=Di;var qi=function e(t,r){return t.length&&t[t.length-1]===r};var Ii=function e(t){return qi(t,"/")?t.slice(0,-1):t};var Ti=function e(){return"".concat(Ii(fn["a"].rootPath),"/single/")};var Ai=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};if("string"===typeof t&&t.length)return r(encodeURIComponent(t));if("number"===typeof t)return r(t);return""};var Pi=function e(t){return"sheet"===t?"sheet":"obj"};var Mi=function e(t){return null!=t&&true===t};var Ni=function e(t,r){return Ai(r,(function(e){return"&".concat(t,"=").concat(e)}))};var Ri=function e(t,r){return Ai(r,(function(e){return"/".concat(t,"/").concat(e)}))};var Li=function e(t){return Object.keys(t).filter((function(e){return Mi(t[e])})).join(",")};var Vi=function e(t){return 0===Object.keys(t).filter((function(e){return Mi(t[e])})).length?"":"&opt=".concat(Li(t))};var _i=function e(t){return 0===Object.keys(t).filter((function(e){return Mi(t[e])})).length?"":"/options/".concat(Li(t))};var Bi=function e(t){return t?"&select=clearall":""};var Fi=function e(t){return t?"/select/clearall":""};var Hi=function e(t){return"$"===t?t:encodeURIComponent(t)};var zi=function e(t){if(!t.length)return"";return t.map((function(e){return"&select=".concat(Hi(e.stateName),"::").concat(encodeURIComponent(e.name),",").concat(e.values.map((function(e){return Ai(e)})).join(","))})).join("")};var Wi=function e(t){if(!t.length)return"";return t.map((function(e){return"/select/".concat(Hi(e.stateName),"::").concat(encodeURIComponent(e.name),",").concat(e.values.map((function(e){return Ai(e)})).join(","))})).join("")};var Gi=function e(t){return t?"/identity/".concat(encodeURIComponent(t)):""};var $i=function e(t){return t?"&identity=".concat(encodeURIComponent(t)):""};var Ui=2083;var Yi=function e(t){var r=t.type,a=void 0===r?"object":r,n=t.appId,i=t.objectId,o=t.identity;var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.bookmark,s=l.clearSelections,u=l.disableInteraction,d=l.disableSelections,f=l.disableAnimation,p=l.enableContextMenu,v=l.language,m=l.selections,h=void 0===m?[]:m,b=l.showSelectionsBar,g=l.theme;return"".concat(Ti(),"?appid=").concat(encodeURIComponent(n),"&").concat(Pi(a),"=").concat(encodeURIComponent(i)).concat(Ni("lang",v)).concat(Ni("theme",g)).concat(Ni("bookmark",c)).concat(Vi({noanimate:f,nointeraction:u,noselections:d,ctxmenu:p,currsel:b})).concat(Bi(s)).concat(zi(h)).concat($i(o))};var Xi=function e(t){var r=t.type,a=void 0===r?"object":r,n=t.appId,i=t.objectId,o=t.identity;var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.disableSelections,s=l.disableAnimation,u=l.enableContextMenu,d=l.language,f=l.theme,p=l.showSelectionsBar,v=l.clearSelections,m=l.bookmark,h=l.selections,b=void 0===h?[]:h;return"".concat(Ti(),"#/app/").concat(encodeURIComponent(n),"/").concat(a,"/").concat(encodeURIComponent(i)).concat(Gi(o)).concat(Ri("lang",d)).concat(Ri("theme",f)).concat(Ri("bookmark",m)).concat(_i({noanimate:s,nointeraction:true,noselections:c,ctxmenu:u,currsel:p})).concat(Fi(v)).concat(Wi(b))};var Ki=r("cWJj");var Qi=r("vMhA");function Zi(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Ji(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Zi(i,a,n,o,l,"next",e)}function l(e){Zi(i,a,n,o,l,"throw",e)}o(void 0)}))}}var eo=function e(t){var r=t.qSelectionObject.qSelections;return r.reduce((function(e,t){var r=t.qSelectedCount;return e+r}),0)};var to=function(){var e=Ji(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r=t.app;i.next=3;return Ki["a"].get(r);case 3:a=i.sent;i.next=6;return a.getLayout();case 6:n=i.sent;return i.abrupt("return",Qi["a"].get(n,r.enigmaModel,true));case 8:case"end":return i.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();function ro(e){ro="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return ro(e)}function ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(r),true).forEach((function(t){io(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function io(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function oo(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function lo(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){oo(i,a,n,o,l,"next",e)}function l(e){oo(i,a,n,o,l,"throw",e)}o(void 0)}))}}function co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function so(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}function uo(e,t,r){t&&so(e.prototype,t);r&&so(e,r);return e}function fo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&po(e,t)}function po(e,t){po=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return po(e,t)}function vo(e){var t=bo();return function r(){var a=go(e),n;if(t){var i=go(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return mo(this,n)}}function mo(e,t){if(t&&("object"===ro(t)||"function"===typeof t))return t;return ho(e)}function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bo(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function go(e){go=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return go(e)}var yo=function(e){fo(r,e);var t=vo(r);function r(e){var a;co(this,r);a=t.call(this,e);var n=a.props,i=n.app.id,o=n.type,l=n.objectId;var c={appId:i,type:o,objectId:l};var s=Xi(c,{});var u=Yi(c,{});a.state={identity:Math.random().toString(36).substring(7),themes:[],bookmarks:[],languages:[],url:u,previewUrl:s,selections:[],selectionsReady:false};var d=function e(t,r){var n;return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var l=function e(){return t.apply(ho(a),i)};clearTimeout(n);n=setTimeout(l,r)}};a.handleFormChange=d(a.handleFormChange,300).bind(ho(a));return a}uo(r,[{key:"componentDidMount",value:function(){var e=lo(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return this.props.app.global.getConfiguration();case 2:t=n.sent;r=t.qFeatures.qAutoSave;!r&&Be["a"].isAppDirty()&&Be["a"].saveApp();n.t0=this;n.next=8;return wn["a"].getAvailableThemes();case 8:n.t1=n.sent;n.t0.setThemes.call(n.t0,n.t1);n.next=12;return yi["a"].getList();case 12:a=n.sent;n.next=15;return a.getLayout();case 15:this.setBookmarks(a.layout.qBookmarkList.qItems);this.setLanguages(C["b"]);this.getSelections();case 18:case"end":return n.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setThemes",value:function e(t){this.setState({themes:t.custom?t.default.concat(t.custom):t.default})}},{key:"setBookmarks",value:function e(t){var r=[];t.forEach((function(e){r.push({name:e.qData.title,id:e.qInfo.qId})}));this.setState({bookmarks:r})}},{key:"setLanguages",value:function e(t){var r=t.filter((function(e){return"qps-ploc"!==e.short&&"zz"!==e.short})).map((function(e){return{id:e.long,name:d["default"].get(e.translatedLabel)}})).sort((function(e,t){return e.name.localeCompare(t.name,d["default"].language)}));this.setState({languages:r})}},{key:"getSelections",value:function(){var e=lo(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:t=this.props.app;a.prev=1;a.next=4;return to({app:t});case 4:r=a.sent;this.setState({selections:r,selectionsReady:true});a.next=11;break;case 8:a.prev=8;a.t0=a["catch"](1);this.setState({selections:[]});case 11:case"end":return a.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleFormChange",value:function(){var e=lo(regeneratorRuntime.mark((function e(t){var r,a,n,i,o,l,c,s,u,d,f,p,v,m,h,b,g,y,w,E;return regeneratorRuntime.wrap((function e(S){while(1)switch(S.prev=S.next){case 0:r=this.props,a=r.app.id,n=r.type,i=r.objectId;o=t.bookmark,l=t.theme,c=t.language,s=t.clearSelections,u=t.allowInteraction,d=t.allowSelections,f=t.enableContextMenu,p=t.showSelectionBar,v=t.useCurrentSelections;m=this.state,h=m.identity,b=m.selections;g={bookmark:o,language:c,theme:l,clearSelections:s,enableContextMenu:f,disableInteraction:!u,disableSelections:!d,showSelectionsBar:p,selections:v?b:[]};y=Xi({type:n,appId:a,objectId:i,identity:h},no(no({},g),{},{clearSelections:true}));w=Yi({type:n,appId:a,objectId:i},g);E=Yi({type:n,appId:a,objectId:i,identity:"preview"},g);this.setState(no(no({},t),{},{previewUrl:y,url:w,newTabUrl:E}));case 8:case"end":return S.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"render",value:function e(){var t=this.state,r=t.themes,a=t.bookmarks,o=t.languages,l=t.url,c=t.newTabUrl,s=t.previewUrl,u=t.selectionsReady;var f=this.props,p=f.objectId,v=f.type;var m='<iframe src="'.concat(l,'" style="border:none;width:100%;height:100%;"></iframe>');var h=function e(t){return d["default"].get("object"===t?"Embed.Dialog.ObjectID":"Embed.Dialog.SheetID",p)};return n.a.createElement("div",{className:"qs-embed-configurator"},n.a.createElement(Ci,{type:v,url:s,dialogClassName:"qs-embed-dialog",infoContainerLabelSelector:h}),n.a.createElement(gi,{themes:r,bookmarks:a,languages:o,onChange:this.handleFormChange,showWarning:l.length>Ui,selectionsReady:u}),n.a.createElement("div",{className:"qs-embed-dialog__copy"},n.a.createElement(wi,{render:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,d["default"].get("Embed.Dialog.CopyToWebpage")),n.a.createElement("div",{className:"qs-embed-dialog__input-group"},n.a.createElement(i["h"],null,n.a.createElement(i["h"].Input,{tid:"105817",id:"iframeUrl",value:m,readOnly:true}),n.a.createElement(i["h"].Button,{onClick:function e(){t(m);Sn["a"].trackEvent(Sn["a"].customEvents.CHART_SHARED,{chart_share_method:"Embed"})}},d["default"].get("Common.Copy")))),n.a.createElement("a",{className:"lui-text-info",target:"_blank",rel:"noopener noreferrer",href:c,tid:"1315b9"},d["default"].get("Embed.Dialog.OpenNewTab")))}})))}}]);return r}(a["Component"]);yo.propTypes={app:s.a.object.isRequired,type:s.a.oneOf(["object","sheet"]).isRequired,objectId:s.a.string.isRequired};var wo=yo;function Eo(){Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return Eo.apply(this,arguments)}function So(e,t){return Do(e)||jo(e,t)||xo(e,t)||Oo()}function Oo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xo(e,t){if(!e)return;if("string"===typeof e)return ko(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ko(e,t)}function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function jo(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Do(e){if(Array.isArray(e))return e}function Co(e){var t=Object(C["c"])();var r=e.app,a=e.onClose,o=e.show,l=e.type,c=e.objectId;var s=t("sheet"===l?"GlobalMenu.EmbedSheet":"contextMenu.embed");return n.a.createElement(i["d"],{tid:"105819",className:"qs-embed-dialog",show:o,onEscape:a},n.a.createElement(i["d"].Header,null,n.a.createElement(i["d"].Title,null,s)),n.a.createElement(i["d"].Body,{className:"qs-embed-dialog__body"},n.a.createElement(wo,{app:r,type:l,objectId:c})),n.a.createElement(i["d"].Footer,null,n.a.createElement(i["a"],{tid:"105812",onClick:a},t("Common.Close"))))}Co.defaultProps={onClose:function e(){},show:false,type:"object",objectId:""};Co.propTypes={app:s.a.object.isRequired,onClose:s.a.func,show:s.a.bool,type:s.a.oneOf(["sheet","object"]),objectId:s.a.string};function qo(e){var t=e.show;var r=Object(F["a"])(p["a"].getParameterByName("app")),a=So(r,1),i=a[0];if(!t||!i)return null;return n.a.createElement(Co,Eo({app:i},e))}function Io(e){Io="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return Io(e)}function To(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ao(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(e,a.key,a)}}function Po(e,t,r){t&&Ao(e.prototype,t);r&&Ao(e,r);return e}function Mo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&No(e,t)}function No(e,t){No=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return No(e,t)}function Ro(e){var t=_o();return function r(){var a=Bo(e),n;if(t){var i=Bo(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Lo(this,n)}}function Lo(e,t){if(t&&("object"===Io(t)||"function"===typeof t))return t;return Vo(e)}function Vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _o(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function Bo(e){Bo=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return Bo(e)}var Fo=Object.freeze({OPEN:"/embed-dialog/open",CLOSE:"/embed-dialog/close"});var Ho=function(e){Mo(r,e);var t=Ro(r);function r(e){var a;To(this,r);a=t.call(this,e);a.state={showDialog:false};a.handleOpen=a.handleOpen.bind(Vo(a));a.handleClose=a.handleClose.bind(Vo(a));return a}Po(r,[{key:"componentDidMount",value:function e(){f["a"].subscribe(Fo.OPEN,this.handleOpen);f["a"].subscribe(Fo.CLOSE,this.handleClose)}},{key:"componentWillUnmount",value:function e(){f["a"].unsubscribe(Fo.OPEN,this.handleOpen);f["a"].unsubscribe(Fo.CLOSE,this.handleClose)}},{key:"handleOpen",value:function e(t){var r=t.type,a=t.objectId,n=t.onClose,i=void 0===n?function(){}:n;this.setState({showDialog:true,type:r,objectId:a,onClose:i})}},{key:"handleClose",value:function e(){var t=this.state.onClose;this.setState({showDialog:false},t)}},{key:"render",value:function e(){var t=this.state,r=t.showDialog,a=t.type,i=t.objectId;return n.a.createElement(qo,{show:r,onClose:this.handleClose,type:a,objectId:i})}}]);return r}(a["Component"]);function zo(e,t){return Yo(e)||Uo(e,t)||Go(e,t)||Wo()}function Wo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Go(e,t){if(!e)return;if("string"===typeof e)return $o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $o(e,t)}function $o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Uo(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Yo(e){if(Array.isArray(e))return e}var Xo=Object(Ca["a"])((function(e){return{error:{marginRight:e.spacing(2),color:e.palette.error.main},snackbar:{marginTop:e.spacing(4),maxWidth:"400px"},snackbarContentContainer:{display:"flex"}}}));var Ko=function e(t){var r=t.message;var i=Xo();var o=Object(a["useState"])(true),l=zo(o,2),c=l[0],s=l[1];var u=function e(){return s(false)};return n.a.createElement(Kn["a"],{className:i.snackbar,autoHideDuration:8e3,open:c,onClose:u,anchorOrigin:{vertical:"top",horizontal:"center"},"data-tid":"error-snackbar"},n.a.createElement(Qn["a"],{message:n.a.createElement("div",{className:i.snackbarContentContainer},n.a.createElement(en["a"],{className:i.error}),n.a.createElement("span",null,r))}))};Ko.propTypes={message:s.a.string.isRequired};var Qo=Ko;var Zo=r("LkyE");var Jo=r("CXQS");var el={type:"manual",column:-1,operator:"greaterThan",value:0};var tl={qHyperCubeDef:{qDimensions:[],qMeasures:[]},condition:{operations:[el],logic:["0"]}};var rl={shareWithOthers:false,selectedUsers:[],frequency:"RRULE:FREQ=SECONDLY",scheduler:{triggerType:"RELOAD",invalid:false,recurrence:[],timezone:"Etc/UTC"}};var al=Object.freeze({bookmarkList:[],selectedAlertBookmark:void 0,currentSelected:void 0,alertBookmarkFromEdit:void 0,alertBookmarkFromCurrentSelections:void 0,bookmarkMap:Object.freeze({})});var nl=[{label:C["a"].get("Common.Value"),value:"manual"},{label:C["a"].get("Common.Measure"),value:"anotherColumn"}];var il=[].concat(nl,[{label:C["a"].get("Common.CurrentSet"),value:"set"}]);var ol=[{value:"greaterThan",label:C["a"].get("properties.greaterThan")},{value:"lessThan",label:C["a"].get("properties.lessThan")},{value:"equal",label:C["a"].get("Common.EqualTo")},{value:"notEqual",label:C["a"].get("Common.NotEqualTo")}];var ll=[].concat(ol,[{value:"containsString",label:C["a"].get("Common.Includes")},{value:"startsWith",label:C["a"].get("Common.StartsWith")},{value:"endsWith",label:C["a"].get("Common.EndsWith")}]);var cl=[{value:"average",label:C["a"].get("Common.Average")},{value:"minimum",label:C["a"].get("Common.Min")},{value:"maximum",label:C["a"].get("Common.Max")},{value:"percentile",label:C["a"].get("Common.Percentile")},{value:"standardDeviation",label:C["a"].get("Common.StandardDeviation")}];var sl=[{label:"Common.Always",value:"RRULE:FREQ=SECONDLY"},{label:"Common.OnceAnHour",value:"RRULE:FREQ=HOURLY"},{label:"Common.OnceADay",value:"RRULE:FREQ=DAILY"},{label:"Common.OnceAWeek",value:"RRULE:FREQ=WEEKLY"},{label:"Common.OnceAMonth",value:"RRULE:FREQ=MONTHLY"}];var ul="".concat(fn["a"].rootPath,"settings/alerts");var dl=Object(Ca["a"])((function(e){return{success:{marginRight:e.spacing(1),color:e.palette.primary.main},toast:{top:"65px"},button:{marginRight:e.spacing(1)}}}));var fl=function e(t){var r=t.settings,a=t.handleClose;var i=r.open,o=r.text;var l=dl();var c=Object(C["c"])();var s=function e(){var t=ul;window.open(t,"_blank");a()};return n.a.createElement(Kn["a"],{"data-testid":"alert-snackbar",open:i,className:l.toast,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:a,autoHideDuration:3e3,TransitionProps:{appear:true}},n.a.createElement(Qn["a"],{message:n.a.createElement("span",null,n.a.createElement(Zo["a"],{className:l.success}),o),action:n.a.createElement(nn["a"],{size:"small",variant:"outlined",className:"".concat(l.button),endIcon:n.a.createElement(Jo["a"],{size:"small"}),onClick:s,"data-testid":"open-your-alerts-in-hub"},c("Alerting.OpenYourAlerts"))}))};var pl=fl;var vl=r("V2/N");var ml=r("T9wT");var hl=r("BxJl");var bl=r("KpbJ");var gl=r("RlnM");var yl=r("OAsn");var wl=r("lyMs");function El(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Sl(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){El(i,a,n,o,l,"next",e)}function l(e){El(i,a,n,o,l,"throw",e)}o(void 0)}))}}var Ol="".concat(fn["a"].rootPath,"api/v1/conditions");var xl={createDataCondition:function e(t){return Sl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",dn.a.post("".concat(Ol),t));case 1:case"end":return r.stop()}}),e)})))()},deleteCondition:function e(t){return Sl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",dn.a.delete("".concat(Ol,"/").concat(t)));case 1:case"end":return r.stop()}}),e)})))()},patchCondition:function e(t,r){return Sl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",dn.a.patch("".concat(Ol,"/").concat(t),r));case 1:case"end":return a.stop()}}),e)})))()},previewCondition:function e(t){return Sl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",dn.a.post("".concat(Ol,"/preview"),t));case 1:case"end":return r.stop()}}),e)})))()},checkPreviewStatus:function e(t){return Sl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",dn.a.get("".concat(Ol,"/preview/").concat(t)));case 1:case"end":return r.stop()}}),e)})))()}};var kl=r("Vrq/");function jl(e){return Il(e)||ql(e)||Cl(e)||Dl()}function Dl(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cl(e,t){if(!e)return;if("string"===typeof e)return Tl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tl(e,t)}function ql(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Il(e){if(Array.isArray(e))return Tl(e)}function Tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Al(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(r),true).forEach((function(t){Ml(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Al(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ml(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var Nl=function e(t){return t.indexOf("OR")>-1?"OR":"AND"};var Rl=function e(t,r){var a="";for(var n=0;n<r;n++)a+=n===r-1?n:"".concat(n," ").concat(t," ");return a||"0"};var Ll=function e(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.map((function(e){var t=Pl({},e);e.column>r&&(t.column-=1);if(e.column===r){t.column=-2;t.removedItem=a;t.dimensionRemoved=n}if("anotherColumn"===t.type)if(t.columnCompare>r)t.columnCompare-=1;else if(t.columnCompare===r){t.columnCompare=-2;t.removedCompareItem=a}return t}))};var Vl=function e(t){return t.map((function(e){var t=Pl(Pl({},e),{},{column:e.column<0?e.column:e.column+1});"anotherColumn"===t.type&&-1!==t.columnCompare&&(t.columnCompare+=1);return t}))};var _l=function e(t,r){return t.map((function(e){var t=Pl({},e);if(0===t.column){t.column=-2;t.removedItem=r;t.dimensionRemoved=true}if("anotherColumn"===e.type&&0===e.columnCompare){t.columnCompare=-2;t.removedCompareItem=r}return t}))};var Bl=function e(t,r){switch(r.type){case"reset":return r.newConditionData;case"setDimension":return Pl(Pl({},t),{},{qHyperCubeDef:Pl(Pl({},t.qHyperCubeDef),{},{qDimensions:[r.newDimension]}),condition:Pl(Pl({},t.condition),{},{operations:t.qHyperCubeDef.qDimensions.length>0?_l(t.condition.operations,r.removedDimension):Vl(t.condition.operations)})});case"addMeasure":return Pl(Pl({},t),{},{qHyperCubeDef:Pl(Pl({},t.qHyperCubeDef),{},{qMeasures:[].concat(jl(t.qHyperCubeDef.qMeasures),[r.newMeasure])})});case"removeDimension":return{qHyperCubeDef:Pl(Pl({},t.qHyperCubeDef),{},{qDimensions:[]}),condition:Pl(Pl({},t.condition),{},{operations:Ll(t.condition.operations,0,r.removedDimension,true)})};case"removeMeasure":return{qHyperCubeDef:Pl(Pl({},t.qHyperCubeDef),{},{qMeasures:t.qHyperCubeDef.qMeasures.filter((function(e,t){return t!==r.index}))}),condition:Pl(Pl({},t.condition),{},{operations:Ll(t.condition.operations,r.index+t.qHyperCubeDef.qDimensions.length,r.label)})};case"updateMeasure":return Pl(Pl({},t),{},{qHyperCubeDef:Pl(Pl({},t.qHyperCubeDef),{},{qMeasures:t.qHyperCubeDef.qMeasures.map((function(e,t){return t===r.index?r.measure:e}))})});case"updateOperation":return Pl(Pl({},t),{},{condition:Pl(Pl({},t.condition),{},{operations:t.condition.operations.map((function(e,t){return t===r.index?r.updatedOperation:e}))})});case"addOperation":return Pl(Pl({},t),{},{condition:{logic:[Rl(r.andOrOperator,t.condition.operations.length+1)],operations:[].concat(jl(t.condition.operations),[r.newOperation])}});case"removeOperation":return Pl(Pl({},t),{},{condition:{logic:[Rl(r.andOrOperator,t.condition.operations.length-1)],operations:t.condition.operations.filter((function(e,t){return t!==r.index}))}});case"updateLogic":return Pl(Pl({},t),{},{condition:Pl(Pl({},t.condition),{},{logic:r.newLogic})});default:return t}};var Fl=function e(t){var r=t.qDimensions,a=t.qMeasures;return{qInfo:{qType:"PreviewTable"},qHyperCubeDef:{qStateName:"$",qDimensions:r,qMeasures:a,qInitialDataFetch:[{qTop:0,qLeft:0,qHeight:500,qWidth:17}]}}};var Hl=function e(t){var r=t.qDimensions,a=void 0===r?[]:r,n=t.qMeasures,i=void 0===n?[]:n,o=t.sortedDimensions,l=void 0===o?[]:o,c=t.sortedMeasures,s=void 0===c?[]:c;return[].concat(jl(a.map((function(e){var t,r;var a=e.qLibraryId;var n=a?(null===(t=l.find((function(e){return a===e.qInfo.qId})))||void 0===t||null===(r=t.qData)||void 0===r?void 0:r.title)||C["a"].get("Object.ErrorMessage.MissingDimension"):e.label;return Pl(Pl({},e),{},{type:"dimension",label:n})}))),jl(i.map((function(e){var t,r;var a=e.qLibraryId;var n=a?(null===(t=s.find((function(e){return a===e.qInfo.qId})))||void 0===t||null===(r=t.qData)||void 0===r?void 0:r.title)||C["a"].get("Object.ErrorMessage.MissingMeasure"):e.label;return Pl(Pl({},e),{},{label:n,type:"measure"})}))))};var zl=function e(t,r){var a;var n=t.type,i=t.column,o=t.offset,l=void 0===o?0:o,c=t.offsetIsPercent,s=void 0!==c&&c,u=t.operator,d=t.value,f=void 0===d?0:d,p=t.aggregation,v=void 0===p?"none":p,m=t.factor,h=void 0===m?0:m,b=t.columnCompare,g=void 0===b?-1:b;switch(n){case"manual":return{type:n,column:i,operator:u,value:f};case"anotherColumn":return{type:n,column:i,offset:l,offsetIsPercent:s,columnCompare:g,operator:u};case"set":return{type:"dimension"===(null===(a=r[t.column])||void 0===a?void 0:a.type)?"manual":"set",column:i,offset:l,offsetIsPercent:s,aggregation:v,operator:["greaterThan","lessThan","equal","notEqual"].indexOf(t.operator)>-1?t.operator:"greaterThan",factor:h};default:return t}};var Wl=function e(t){var r=t.appId,a=t.conditionData,n=t.bookmarkId;return{type:"data",dataCondition:{conditionBase:{appId:r,type:"data",bookmarkId:n},conditionData:a}}};var Gl=function e(t){return xl.createDataCondition(Wl(t))};var $l=function e(t){return xl.previewCondition(Wl(t))};var Ul=function e(t){return xl.checkPreviewStatus(t)};var Yl=function e(t){var r=t.condition.operations;for(var a=0;a<r.length;a++){if(r[a].column<0)return false;if("anotherColumn"===r[a].type&&r[a].columnCompare<0)return false;if("set"===r[a].type&&"none"===r[a].aggregation)return false}return true};var Xl=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(["U","F","M","D","IV"].indexOf(t.qType)>=0)return t;var a=r.qDecimalSep,n=void 0===a?".":a,i=r.qThousandSep,o=void 0===i?",":i;return kl["a"].getNumFmtPattern("qType",{qType:"U",qDec:n,qThou:o},r)};var Kl=function e(t,r){var a=t.qLibraryId,n=t.qNumFormat,i=t.qId,o=t.qDef;if("string"===typeof t)return!!t&&{qDef:{qDef:t,qNumFormat:Xl({},r)}};if(a)return{qLibraryId:a,qDef:{qNumFormat:Xl(null===o||void 0===o?void 0:o.qNumFormat,r)}};if(i)return{qLibraryId:i,qDef:{qNumFormat:Xl(n,r)}};if(o)return{qDef:{qDef:o.qDef,qLabel:o.qLabel,qNumFormat:Xl(o.qNumFormat,r)}};return false};var Ql=r("shiU");var Zl=r("kci7");var Jl=r("WLS8");var ec=r("5rAF");var tc=r("Fb1o");var rc=r("rx5w");var ac=r("Qyht");var nc=r("mFzD");var ic=r("ycpR");var oc=r("cmwo");var lc=Object(Ca["a"])((function(e){return{titleSection:{boxShadow:"inset 0 -1px 0 0 ".concat(oc["a"].GREYSCALE_85),padding:e.spacing(0,0,1)}}}));var cc=function e(t){var r=t.title,a=t.subTitle,i=t.toggleState,o=t.switchToggleState,l=t.onDelete;var c=lc();return n.a.createElement(vl["a"],{container:true,spacing:2,direction:"column"},n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,direction:"row",justify:"space-between",alignItems:"center",className:c.titleSection},n.a.createElement(ka["a"],{variant:"h4"},r),o&&n.a.createElement(nc["a"],{size:"medium",checked:i,onChange:o,color:"primary"}),l&&n.a.createElement(ja["a"],{onClick:l,size:"small"},n.a.createElement(ic["a"],null)))),a&&n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"subtitle1",gutterBottom:true},a)))};var sc=cc;var uc=r("6vEY");var dc=r("59K6");var fc=r("0JSH");function pc(e,t){return gc(e)||bc(e,t)||mc(e,t)||vc()}function vc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mc(e,t){if(!e)return;if("string"===typeof e)return hc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hc(e,t)}function hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function bc(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function gc(e){if(Array.isArray(e))return e}var yc=function e(t){var r=t.value,i=void 0===r?"":r,o=t.confirmValue,l=void 0===o?function(){}:o,c=t.disabled,s=t.onChange,u=t.onEnter,d=t.setTemporaryCloseDialog,f=t.onBlur,p=void 0===f?function(){}:f,v=t.tid;var m=Object(a["useState"])(i),h=pc(m,2),b=h[0],g=h[1];var y=function e(t){s&&s(t);g(t)};var w=function e(t){u&&"Enter"===t.key&&u(b)};var E=function e(){d(true);pt["a"].show({expr:b,title:b?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then((function(e){g(e);l(e);d(false)})).catch((function(){d(false)}))};Object(a["useEffect"])((function(){g(i)}),[i]);return n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true,disabled:c},n.a.createElement(uc["a"],{value:b,onChange:function e(t){return y(t.target.value)},onBlur:function e(){return p(b)},onKeyDown:w,"data-testid":v,endAdornment:n.a.createElement(dc["a"],{position:"end"},n.a.createElement(nn["a"],{variant:"outlined",size:"small",onClick:E,disabled:c},n.a.createElement(fc["a"],null)))}))};var wc=yc;function Ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(r),true).forEach((function(t){Oc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ec(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oc(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var xc=Object(Ca["a"])((function(e){return{checkbox:{marginTop:e.spacing(2)},gridItem:{flexBasis:"auto !important"},menuItem:{height:e.spacing(4,"!important"),lineHeight:e.spacing(4,"!important")},selectError:{border:"1px solid ".concat(e.palette.error.main," !important")}}}));var kc=function e(t){var r;return(null===(r=t.qDef)||void 0===r?void 0:r.qFieldLabels)&&t.qDef.qFieldLabels[0]?t.qDef.qFieldLabels:void 0};var jc=function e(t){var r,a,n;return t.label||(null===(r=t.qDef)||void 0===r?void 0:r.qLabel)||(null===(a=t.qDef)||void 0===a?void 0:a.qDef)||kc(t)||(null===(n=t.qDef)||void 0===n?void 0:n.qFieldDefs)};var Dc=function e(t){var r;var a=t.operation,i=t.index,o=t.selectedDimensionsAndMeasures,l=t.updateOperation,c=t.onlyMeasuresSelected,s=t.setTemporaryCloseDialog;var u=xc();var d=null===(r=o[a.column])||void 0===r?void 0:r.type;var f="dimension"===d?nl:il;var p="set"===a.type?ol:ll;var v=Object(C["c"])();var m=function e(){var t=["standardDeviation","percentile"];if("set"===a.type&&t.includes(a.aggregation))return n.a.createElement(vl["a"],{item:true,xs:6,className:u.gridItem},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},"standardDeviation"===a.aggregation?v("Common.StandardDeviation"):v("Common.Percentile")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},n.a.createElement(wc,{value:a.factor,confirmValue:function e(t){return l(i,Sc(Sc({},a),{},{factor:t}))},onBlur:function e(t){return l(i,Sc(Sc({},a),{},{factor:t}))},setTemporaryCloseDialog:s})));var r="set"===a.type&&"none"!==a.aggregation||"anotherColumn"===a.type&&a.columnCompare>-1;return n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,spacing:1,alignItems:"center"},n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},v("Common.Offset")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},n.a.createElement(wc,{value:a.offset,disabled:!r,confirmValue:function e(t){return l(i,Sc(Sc({},a),{},{offset:t}))},onBlur:function e(t){return l(i,Sc(Sc({},a),{},{offset:t}))},setTemporaryCloseDialog:s}))),n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(Jl["a"],{className:u.checkbox,disabled:!r,control:n.a.createElement(ec["a"],{checked:a.offsetIsPercent,onChange:function e(){return l(i,Sc(Sc({},a),{},{offsetIsPercent:!a.offsetIsPercent}))}}),label:v("Common.OffsetPercentage")}))))};return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,direction:"row",spacing:1},n.a.createElement(vl["a"],{item:true,xs:8},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},v(c?"Common.Measure":"Alerting.Conditions.MeasureOrDimension")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true,error:-2===a.column},n.a.createElement(tc["a"],{"data-testid":"alert-column-dropdown",value:a.column,onChange:function e(t){return l(i,Sc(Sc({},a),{},{column:t.target.value}))},displayEmpty:true,inputProps:-2===a.column?{className:u.selectError}:{}},-2===a.column?n.a.createElement(rc["a"],{value:-2,disabled:true,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},a.removedItem)):n.a.createElement(rc["a"],{value:-1,disabled:true,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},v(c?"Alerting.Conditions.SelectMeasure":"Alerting.Conditions.SelectMeasureOrDimension"))),o.map((function(e,t){return n.a.createElement(rc["a"],{value:t,key:e.qLibraryId||e.qDef.qDef||e.qDef.qFieldDefs,className:u.menuItem},n.a.createElement(ka["a"],{className:"alert-column-dropdown-item",variant:"body2"},jc(e)))}))),-2===a.column&&n.a.createElement(ac["a"],null,a.dimensionRemoved?v("Object.ErrorMessage.InvalidDimension"):v("Object.ErrorMessage.InvalidMeasure")))),n.a.createElement(vl["a"],{item:true,xs:4},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},v("Common.CompareWith")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},n.a.createElement(tc["a"],{id:"alert-compare-dropdown",value:a.type,onChange:function e(t){return l(i,Sc(Sc({},a),{},{type:t.target.value}))},disabled:-1===a.column},f.map((function(e){return n.a.createElement(rc["a"],{key:e.value,value:e.value,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},e.label))}))))))),-1!==a.column&&n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,direction:"row",spacing:1},n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},v("Common.Operator")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},n.a.createElement(tc["a"],{"data-testid":"alert-operator-dropdown",onChange:function e(t){return l(i,Sc(Sc({},a),{},{operator:t.target.value}))},value:a.operator,displayEmpty:true},p.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},e.label))}))))),"manual"===a.type&&n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},v("properties.value")),n.a.createElement(wc,{tid:"alert-compare-value",value:a.value,confirmValue:function e(t){return l(i,Sc(Sc({},a),{},{value:t||"0"}))},onBlur:function e(t){return l(i,Sc(Sc({},a),{},{value:t||"0"}))},setTemporaryCloseDialog:s})),"anotherColumn"===a.type&&n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},v("Common.Measure")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true,error:-2===a.columnCompare},n.a.createElement(tc["a"],{value:a.columnCompare,onChange:function e(t){return l(i,Sc(Sc({},a),{},{columnCompare:t.target.value}))},displayEmpty:true,inputProps:-2===a.columnCompare?{className:u.selectError}:{}},-2===a.columnCompare?n.a.createElement(rc["a"],{value:-2,disabled:true,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},a.removedCompareItem)):n.a.createElement(rc["a"],{value:-1,disabled:true,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},v("Alerting.Conditions.SelectMeasure"))),o.map((function(e,t){return n.a.createElement(rc["a"],{value:t,key:e.qLibraryId||e.qDef.qDef||e.qDef.qFieldDefs,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},jc(e)))}))),-2===a.columnCompare&&n.a.createElement(ac["a"],null,v("Object.ErrorMessage.InvalidMeasure")))),"set"===a.type&&n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(ka["a"],{noWrap:true,variant:"h6",gutterBottom:true},v("Common.Aggregation")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},n.a.createElement(tc["a"],{value:a.aggregation,onChange:function e(t){return l(i,Sc(Sc({},a),{},{aggregation:t.target.value}))}},n.a.createElement(rc["a"],{value:"none",disabled:true},n.a.createElement(ka["a"],{variant:"body2"},v("Alerting.Conditions.SelectAggregation"))),cl.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value,className:u.menuItem},n.a.createElement(ka["a"],{variant:"body2"},e.label))}))))))),"manual"!==a.type&&m())};var Cc=function e(t){var r=t.operation,a=t.isLast,i=t.index,o=t.selectedDimensionsAndMeasures,l=t.updateOperation,c=t.removeOperation,s=t.showRemoveOperation,u=t.andOrState,d=t.changeAndOrState,f=t.onlyMeasuresSelected,p=t.setTemporaryCloseDialog;var v=xc();var m=Object(C["c"])();return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:3},n.a.createElement(vl["a"],{item:true},n.a.createElement(sc,{title:m("Alerting.Conditions.Condition",i+1),onDelete:s&&c})),n.a.createElement(vl["a"],{item:true},n.a.createElement(Dc,{operation:r,index:i,selectedDimensionsAndMeasures:o,updateOperation:l,onlyMeasuresSelected:f,setTemporaryCloseDialog:p})),!a&&n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,justify:"center"},n.a.createElement(Pa["a"],{variant:"outlined"},n.a.createElement(tc["a"],{autoWidth:true,value:u,disabled:i>0,onChange:function e(t){return d(t.target.value)},"data-testid":"and-or-select"},n.a.createElement(rc["a"],{value:"AND",className:v.menuItem},n.a.createElement(ka["a"],{variant:"body2"},m("Alerting.Conditions.AndOperator"))),n.a.createElement(rc["a"],{value:"OR",className:v.menuItem},n.a.createElement(ka["a"],{variant:"body2"},m("Alerting.Conditions.OrOperator"))))))))};var qc=Cc;var Ic=r("hBRx");var Tc=r("cSpv");var Ac=r("Kz3D");var Pc=r("5Ps1");var Mc=r("pr62");var Nc=r("Ommt");var Rc=Object(Ca["a"])((function(e){return{icon:{color:e.palette.error.main},card:{border:"1px solid ".concat(e.palette.error.main),minWidth:"50%"},message:{paddingRight:e.spacing(3)}}}));var Lc=function e(t){var r=t.error;var a=Rc();return n.a.createElement(vl["a"],{container:true},n.a.createElement(Ql["a"],{raised:false,className:a.card},n.a.createElement(Zl["a"],null,n.a.createElement(vl["a"],{container:true,direction:"row",alignItems:"flex-start",spacing:2},n.a.createElement(vl["a"],{item:true},n.a.createElement(gl["a"],{size:"large",className:a.icon})),n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,direction:"column",className:a.message},n.a.createElement(ka["a"],{variant:"h5",gutterBottom:true},r.title),n.a.createElement(ka["a"],{variant:"body2"},r.detail)))))))};var Vc=Lc;var _c=Object(Ca["a"])((function(e){return{tableSection:{backgroundColor:e.palette.background.paper,maxHeight:"385px",maxWidth:"520px"}}}));var Bc=function e(t){var r=t.loading,a=t.error,i=t.previewData,o=t.conditionFullfilled;var l=_c();var c=Object(C["c"])();if(!o)return n.a.createElement(vl["a"],{container:true,justify:"center"},n.a.createElement(ka["a"],{variant:"subtitle1"},c("Alerting.Conditions.ConditionNotFullfilled")));if(r)return n.a.createElement(vl["a"],{container:true,justify:"center"},n.a.createElement(Ja["a"],{"data-testid":"circular-loading",variant:"indeterminate",color:"primary",size:48}));if(a)return n.a.createElement(Vc,{error:a});if(i)return n.a.createElement(Ic["a"],{"data-testid":"alert-condition-preview-table",className:l.tableSection},n.a.createElement(Tc["a"],{stickyHeader:true},n.a.createElement(Ac["a"],null,n.a.createElement(Pc["a"],null,i.headers.map((function(e){return n.a.createElement(Mc["a"],{key:e},e)})))),n.a.createElement(Nc["a"],null,i.positive.map((function(e){return n.a.createElement(Pc["a"],{key:"string"===typeof e[0]?e[0]:e[0].qText},e.map((function(e,t){var r="string"===typeof e?e:e.qText;return n.a.createElement(Mc["a"],{key:"".concat(r,"-").concat(t)},r)})))})))));return null};var Fc=Bc;function Hc(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function zc(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Hc(i,a,n,o,l,"next",e)}function l(e){Hc(i,a,n,o,l,"throw",e)}o(void 0)}))}}function Wc(e,t){return Xc(e)||Yc(e,t)||$c(e,t)||Gc()}function Gc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $c(e,t){if(!e)return;if("string"===typeof e)return Uc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uc(e,t)}function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Yc(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Xc(e){if(Array.isArray(e))return e}var Kc=Object(Ca["a"])((function(e){return{addMeasureButton:{marginTop:e.spacing(4)}}}));var Qc=function e(t){var r=t.conditionData,i=t.dispatchConditionData,o=t.sortedDimensions,l=t.sortedMeasures,c=t.app,s=t.selectedAlertBookmark,u=t.setTemporaryCloseDialog;var d=Object(C["c"])();var f=Kc();var p=Object(a["useState"])(),v=Wc(p,2),m=v[0],h=v[1];var b=Object(a["useState"])(),g=Wc(b,2),y=g[0],w=g[1];var E=Object(a["useState"])(),S=Wc(E,2),O=S[0],x=S[1];var k=Object(a["useState"])(false),j=Wc(k,2),D=j[0],q=j[1];var I=Object(a["useState"])(false),T=Wc(I,2),A=T[0],P=T[1];var M=Object(a["useState"])(0),N=Wc(M,2),R=N[0],L=N[1];var V=r.condition,_=V.operations,B=void 0===_?[]:_,F=V.logic;var H=Nl(F[0]);var z=r.qHyperCubeDef,W=z.qDimensions,G=z.qMeasures;var $=Hl({qDimensions:W,qMeasures:G,sortedDimensions:o,sortedMeasures:l});Object(a["useEffect"])((function(){var e;var t=function(){var r=zc(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function r(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return Ul(y);case 2:a=o.sent;n=a.data.status;o.t0=n;o.next="FINISHED"===o.t0?7:"RUNNING"===o.t0?14:"FAILED"===o.t0?16:18;break;case 7:if(!a.data.evaluation.resultUrl){o.next=13;break}o.next=10;return dn.a.get(a.data.evaluation.resultUrl);case 10:i=o.sent;h(null===i||void 0===i?void 0:i.data);q(false);case 13:return o.abrupt("break",19);case 14:e=setTimeout((function(){t()}),1e3);return o.abrupt("break",19);case 16:if(R<2&&a.data.errors.find((function(e){return"DCE-APPLY_BOOKMARK_FAILED"===e.code}))){L(R+1);w(y)}else{x({title:d("Alerting.Conditions.PreviewFailed"),detail:d("Alerting.Conditions.PreviewFailedHelp")});q(false)}return o.abrupt("break",19);case 18:return o.abrupt("break",19);case 19:case"end":return o.stop()}}),r)})));return function e(){return r.apply(this,arguments)}}();y&&t();return function(){clearTimeout(e)}}),[y]);Object(a["useEffect"])((function(){var e=true;q(true);x();h();var t=function(){var t=zc(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function t(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return $l({appId:c.id,conditionData:r,bookmarkId:s});case 2:a=n.sent;e&&w(a.data.previewId);case 4:case"end":return n.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();if(Yl(r)){P(true);t()}else P(false);return function(){e=false}}),[r,R]);var U=function e(t,r){i({type:"updateOperation",index:t,updatedOperation:zl(r,$)})};var Y=function e(){i({type:"addOperation",newOperation:el,andOrOperator:H})};var X=function e(t){i({type:"removeOperation",index:t,andOrOperator:H})};var K=function e(t){i({type:"updateLogic",newLogic:[Rl(t,B.length)]})};return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h4",gutterBottom:true},d("Alerting.Conditions.Title")),n.a.createElement(ka["a"],{variant:"subtitle1",gutterBottom:true},d("Alerting.Conditions.Subtitle")),n.a.createElement(Ql["a"],null,n.a.createElement(Zl["a"],null,B.map((function(e,t){return n.a.createElement(qc,{operation:e,isLast:t===B.length-1,index:t,selectedDimensionsAndMeasures:$,onlyMeasuresSelected:0===W.length,updateOperation:U,removeOperation:function e(){return X(t)},andOrState:H,changeAndOrState:K,showRemoveOperation:B.length>1,key:"".concat(t,"-").concat(B.length),setTemporaryCloseDialog:u})})),B.length<10&&!B.find((function(e){return e.column<0}))&&n.a.createElement(vl["a"],{container:true},n.a.createElement(nn["a"],{"data-testid":"alert-add-condition",variant:"outlined",className:f.addMeasureButton,onClick:Y},d("Alerting.Conditions.NewCondition")))))),n.a.createElement(vl["a"],{item:true},n.a.createElement(sc,{title:d("Alerting.Conditions.Preview")})),n.a.createElement(vl["a"],{item:true},n.a.createElement(Fc,{error:O,loading:D,previewData:m,conditionFullfilled:A})))};var Zc=Qc;var Jc=r("JSlT");var es=r("VWqR");var ts=r("IArN");var rs=Object(Ca["a"])((function(e){return{titleSection:{borderBottom:"1px solid ".concat(e.palette.divider)},title:{padding:e.spacing(1,0)}}}));var as=function e(t){var r=t.title,a=t.subTitle,i=t.body,o=t.toggleState,l=t.switchToggleState;var c=rs();var s=!l||o;return n.a.createElement(vl["a"],{item:true},n.a.createElement(Ql["a"],{elevation:1},n.a.createElement(Zl["a"],null,n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,justify:"space-between",className:c.titleSection},n.a.createElement(ka["a"],{className:c.title,variant:"h4"},r),l&&n.a.createElement(nc["a"],{"data-testid":"alert-container-toggle",size:"medium",checked:o,onChange:l,color:"primary"}))),a&&n.a.createElement(vl["a"],{item:true},n.a.createElement(ts["a"],{in:s,"data-testid":"collapse-subtitle"},n.a.createElement(ka["a"],{variant:"subtitle1"},a))),i&&n.a.createElement(vl["a"],{item:true},n.a.createElement(ts["a"],{in:s,"data-testid":"collapse-body"},i))))))};var ns=as;var is=r("nohB");var os=r("D4sI");var ls=r("fdne");var cs=r("esdE");var ss=r("VMSS");var us=r("rx0e");var ds=r("mqck");var fs=r("vZtb");var ps=r("wGtP");var vs=r("xrGn");var ms=r("fumj");var hs=r("IIJ7");var bs=r("R1ju");var gs=r("eGyX");var ys=function e(t,r){return new Intl.DateTimeFormat(r,{month:"short"}).format(t)};var ws=function e(t,r){return new Intl.DateTimeFormat(r,{weekday:"short"}).format(t)};var Es=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=new Date;if(t){r.setSeconds(0);r.setMilliseconds(0)}return r};var Ss=function e(t){return t instanceof Date&&!isNaN(t)};var Os="yyyy-MM-dd'T'HH:mm:ss";var xs=function e(t){return t&&Ss(t)?Object(ps["a"])(t,Os):null};var ks=function e(t){return Object(vs["a"])(t,Os,Es())};var js=function e(t,r,a){var n=Object(ms["a"])(r,t);var i=Math.trunc(n/a)+1;var o=[];for(var l=0;l<i;l++){var c=Object(hs["a"])(t,l*a);o.push(c)}var s={};o.forEach((function(e){var t=Object(bs["a"])(e);s[t]||(s[t]=[]);s[t].push(Object(gs["a"])(e))}));return s};var Ds=r("hIk4");var Cs="RELOAD";var qs="SCHEDULED";var Is={daily:"daily",weekly:"weekly",monthly:"monthly"};var Ts=[{label:"Common.Daily",value:Is.daily},{label:"Common.Weekly",value:Is.weekly},{label:"Common.Monthly",value:Is.monthly}];var As={everyDay:1};var Ps=[2,3,4,5,6].map((function(e){return{label:"Common.EveryNDays",value:e}}));var Ms={everyWeek:1};var Ns=[2,3,4,5,6].map((function(e){return{label:"Common.EveryNWeeks",value:e}}));var Rs={onceADay:1,twiceADay:2,every5min:5,every15min:15,every30min:30,every60min:60,every120min:120};var Ls=[Rs.every5min,Rs.every15min,Rs.every30min,Rs.every60min,Rs.every120min].map((function(e){return{label:"Common.EveryNMinutes",value:e}}));var Vs=1;var _s=Rs.onceADay;var Bs=function e(t){var r=0;Object.keys(t).forEach((function(e){if(t[e]){var a=Object(is["a"])(new Date(2001,e-1));a>r&&(r=a)}}));return r};var Fs=Array.from({length:12},(function(e,t){return t+1}));var Hs={};var zs=Object(os["a"])(Es());for(var Ws=0;Ws<Fs.length;Ws++)Hs[Fs[Ws]]=Fs[Ws]===zs+1;var Gs=Bs(Hs);var $s=Array.from({length:31},(function(e,t){return t+1}));var Us={};var Ys=Object(ls["a"])(Es());for(var Xs=0;Xs<$s.length;Xs++)Us[$s[Xs]]=$s[Xs]===Ys;var Ks=Array.from({length:7},(function(e,t){return t+1}));var Qs={};var Zs=Object(cs["a"])(Es());for(var Js=0;Js<Ks.length;Js++)Qs[Ks[Js]]=Ks[Js]===Zs;var eu=function e(){var t=Object(ss["a"])(Es());return[{dayOfTheWeek:1,rrule:fs["a"].MO},{dayOfTheWeek:2,rrule:fs["a"].TU},{dayOfTheWeek:3,rrule:fs["a"].WE},{dayOfTheWeek:4,rrule:fs["a"].TH},{dayOfTheWeek:5,rrule:fs["a"].FR},{dayOfTheWeek:6,rrule:fs["a"].SA},{dayOfTheWeek:7,rrule:fs["a"].SU}].map((function(e){var r=Object(us["a"])(t,e.dayOfTheWeek);return{dayOfTheWeek:e.dayOfTheWeek,abbreviation:ws(r),rrule:e.rrule}}))};var tu=eu();var ru=Object.freeze({inited:true,triggerType:Cs,scheduleType:Cs,timezone:Object(Ds["c"])(),interval:Vs,frequency:_s,startTime:null,endTime:null,startDate:Object(ds["a"])(Es()),startDateTime:xs(Object(ds["a"])(Es())),startDateDisabled:false,endDate:null,endDateTime:null,showEndDate:false,selectedWeekDays:Qs,selectedMonths:Hs,maxDaysInSelectedMonths:Gs,selectedMonthDays:Us,selectedWeekDaysInvalid:false,selectedMonthDaysInvalid:false,selectedMonthsInvalid:false,startTimeInvalid:false,endTimeInvalid:false,startDateInvalid:false,endDateInvalid:false,invalid:false,recurrence:[]});var au=Object(Ca["a"])((function(e){return{menuItem:{height:e.spacing(4,"!important"),lineHeight:e.spacing(4,"!important")}}}));var nu=function e(t){var r=t.schedulerState,a=t.dispatchSchedulerState;var i=au();var o=Object(C["c"])();var l=r.scheduleType===Is.daily?Ps:Ns;return n.a.createElement(vl["a"],{container:true,direction:"row",spacing:1,alignItems:"flex-end"},n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(Pa["a"],{fullWidth:true,variant:"outlined"},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},o("Common.Interval")),n.a.createElement(tc["a"],{"data-testid":"scheduler-interval-select",value:r.interval,onChange:function e(t){a({type:"setInterval",interval:t.target.value})}},r.scheduleType===Is.daily&&n.a.createElement(rc["a"],{value:As.everyDay,key:As.everyDay,className:i.menuItem},n.a.createElement(ka["a"],{variant:"body2"},o("Common.EveryDay"))),r.scheduleType===Is.weekly&&n.a.createElement(rc["a"],{value:Ms.everyWeek,key:Ms.everyWeek,className:i.menuItem},n.a.createElement(ka["a"],{variant:"body2"},o("Common.EveryWeek"))),l.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value,className:i.menuItem},n.a.createElement(ka["a"],{variant:"body2"},o(e.label,e.value)))}))))),n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(Pa["a"],{fullWidth:true,variant:"outlined"},n.a.createElement(tc["a"],{"data-testid":"scheduler-frequency-select",value:r.frequency,onChange:function e(t){a({type:"setFrequency",frequency:t.target.value})}},n.a.createElement(rc["a"],{value:Rs.onceADay,key:Rs.onceADay,className:i.menuItem},n.a.createElement(ka["a"],{variant:"body2"},o("Common.OnceADay"))),n.a.createElement(rc["a"],{value:Rs.twiceADay,key:Rs.twiceADay,className:i.menuItem},n.a.createElement(ka["a"],{variant:"body2"},o("Common.TwiceADay"))),Ls.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value,className:i.menuItem},n.a.createElement(ka["a"],{variant:"body2"},o(e.label,e.value)))}))))))};var iu=nu;var ou=r("k6SW");var lu=r("pCOR");var cu=r("aNzX");var su=r("Utl4");var uu=r("fGNF");var du=r("876n");var fu=r("s6gw");function pu(e,t){return gu(e)||bu(e,t)||mu(e,t)||vu()}function vu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mu(e,t){if(!e)return;if("string"===typeof e)return hu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hu(e,t)}function hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function bu(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function gu(e){if(Array.isArray(e))return e}var yu=Object(Ca["a"])((function(){return{pickerRoot:{width:"100%",marginTop:0,marginBottom:0}}}));var wu=function e(t){var r=t.selectedDate,i=t.onSelectedDateChange,o=t.onInvalidChange,l=t.label,c=t.ariaIconLabel,s=t.minDate,u=t.timezone,d=t.name;var f=yu();var p=Object(a["useState"])(false),v=pu(p,2),m=v[0],h=v[1];var b=Object(a["useState"])(),g=pu(b,2),y=g[0],w=g[1];var E=Object(C["c"])();Object(a["useEffect"])((function(){o&&o(m)}),[m]);var S=function e(t){i&&i(t)};var O=function e(t,a){if(t){switch(t){case"invalidDateMessage":w(E("Common.InvalidTimeFormat"));break;case"minDateMessage":w(E("Common.MinTimeValidationMessage"));break;default:break}m||h(true)}else if(a&&s&&Object(du["a"])(r,s)){w(E("Common.MinDateValidationMessage"));m||h(true)}else if(a){if(m){w("");h(false)}}else{w(E("Common.Required"));m||h(true)}};return n.a.createElement(cu["a"],{utils:uu["a"]},n.a.createElement(n.a.Fragment,null,n.a.createElement(ka["a"],{variant:"h6"},l),n.a.createElement(su["a"],{"data-testid":d,variant:"inline",className:f.pickerRoot,keyboardIcon:n.a.createElement(fu["a"],{size:"large"}),margin:"normal",value:r,invalidDateMessage:"invalidDateMessage",error:!!y,helperText:y,onError:O,onChange:S,KeyboardButtonProps:{"aria-label":c}}),u&&n.a.createElement(ka["a"],{variant:"subtitle2"},u)))};var Eu=wu;var Su=r("Sa92");function Ou(e,t){return Cu(e)||Du(e,t)||ku(e,t)||xu()}function xu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ku(e,t){if(!e)return;if("string"===typeof e)return ju(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ju(e,t)}function ju(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Du(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Cu(e){if(Array.isArray(e))return e}var qu=Object(Ca["a"])((function(){return{pickerRoot:{width:"100%",marginTop:0}}}));var Iu=function e(t){var r=t.selectedDate,i=t.onSelectedDateChange,o=t.onInvalidChange,l=t.label,c=t.ariaIconLabel,s=t.disabled,u=t.minDate,d=t.maxDate,f=t.name;var p=qu();var v=Object(a["useState"])(false),m=Ou(v,2),h=m[0],b=m[1];var g=Object(a["useState"])(),y=Ou(g,2),w=y[0],E=y[1];var S=Object(C["c"])();Object(a["useEffect"])((function(){o&&o(h)}),[h]);var O=function e(t){i&&i(t)};var x=function e(t,r){if(t){switch(t){case"invalidDateMessage":E(S("Common.InvalidDateFormat"));break;case"minDateMessage":E(S("Common.MinDateValidationMessage"));break;case"maxDateMessage":E(S("Common.MaxDateValidationMessage"));break;default:break}h||b(true)}else if(r){if(h){E("");b(false)}}else{E(S("Common.Required"));h||b(true)}};return n.a.createElement(cu["a"],{utils:uu["a"]},n.a.createElement(n.a.Fragment,null,n.a.createElement(ka["a"],{variant:"h6"},l),n.a.createElement(Su["a"],{"data-testid":f,className:p.pickerRoot,disableToolbar:true,variant:"inline",margin:"normal",format:"P",autoOk:true,disabled:s,minDate:u,maxDate:d,invalidDateMessage:"invalidDateMessage",minDateMessage:"minDateMessage",maxDateMessage:"maxDateMessage",error:!!w,helperText:w,onError:x,value:r,onChange:O,KeyboardButtonProps:{"aria-label":c}})))};var Tu=Iu;var Au=Object(Ca["a"])((function(){return{addEndDateButton:{display:"flex",alignItems:"center"},endDatePickerContainer:{width:"calc(100% - 18px)"},endDateCloseContainer:{padding:0,marginBottom:-48}}}));var Pu=function e(t){var r=t.schedulerState,a=t.dispatchSchedulerState;var i=Object(C["c"])();var o=Au();var l=Object(lu["a"])(Es(),1);var c=Object(Ds["a"])();return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},n.a.createElement(vl["a"],{container:true,item:true,direction:"row",spacing:2},n.a.createElement(vl["a"],{item:true,xs:6},r.frequency===Rs.onceADay&&n.a.createElement(Eu,{name:"scheduler-time",onInvalidChange:function e(t){return a({type:"startTimeInvalid",invalid:t})},selectedDate:r.startTime,onSelectedDateChange:function e(t){return a({type:"setStartTime",date:t})},label:i("Common.Time"),ariaIconLabel:i("Common.Aria.TimeIcon"),timezone:c}),r.frequency===Rs.twiceADay&&n.a.createElement(Eu,{name:"scheduler-time1",onInvalidChange:function e(t){return a({type:"startTimeInvalid",invalid:t})},selectedDate:r.startTime,onSelectedDateChange:function e(t){return a({type:"setStartTime",date:t})},label:i("Common.Time"),ariaIconLabel:i("Common.Aria.TimeIcon"),timezone:c}),r.frequency!==Rs.onceADay&&r.frequency!==Rs.twiceADay&&n.a.createElement(Eu,{name:"scheduler-start-time",onInvalidChange:function e(t){return a({type:"startTimeInvalid",invalid:t})},selectedDate:r.startTime,onSelectedDateChange:function e(t){return a({type:"setStartTime",date:t})},label:i("Common.StartTime"),ariaIconLabel:i("Common.Aria.StartTimeIcon"),timezone:c})),n.a.createElement(vl["a"],{item:true,xs:6},r.frequency!==Rs.onceADay&&r.frequency!==Rs.twiceADay&&n.a.createElement(Eu,{name:"scheduler-end-time",onInvalidChange:function e(t){return a({type:"endTimeInvalid",invalid:t})},selectedDate:r.endTime,onSelectedDateChange:function e(t){return a({type:"setEndTime",date:t})},minDate:r.startTime,label:i("Common.EndTime"),ariaIconLabel:i("Common.Aria.EndTimeIcon")}),r.frequency===Rs.twiceADay&&n.a.createElement(Eu,{name:"scheduler-time2",onInvalidChange:function e(t){return a({type:"endTimeInvalid",invalid:t})},selectedDate:r.endTime,onSelectedDateChange:function e(t){return a({type:"setEndTime",date:t})},label:i("Scheduler.TimeNumber2"),ariaIconLabel:i("Scheduler.Aria.TimeNumber2Icon")}))),n.a.createElement(vl["a"],{container:true,item:true,direction:"row",spacing:2},n.a.createElement(vl["a"],{item:true,xs:6},n.a.createElement(Tu,{name:"scheduler-start-date",maxDate:l,disabled:r.startDateDisabled,onInvalidChange:function e(t){return a({type:"startDateInvalid",invalid:t})},selectedDate:r.startDate,onSelectedDateChange:function e(t){return a({type:"setStartDate",date:t})},label:i("Common.StartDate"),ariaIconLabel:i("Common.Aria.StartDateIcon")})),n.a.createElement(vl["a"],{item:true,xs:6,className:"".concat(r.showEndDate?"":o.addEndDateButton)},r.showEndDate&&n.a.createElement(vl["a"],{container:true,direction:"row"},n.a.createElement(vl["a"],{item:true,className:o.endDatePickerContainer},n.a.createElement(Tu,{name:"scheduler-end-date",minDate:r.startDate,onInvalidChange:function e(t){return a({type:"endDateInvalid",invalid:t})},selectedDate:r.endDate,onSelectedDateChange:function e(t){return a({type:"setEndDate",date:t})},label:i("Common.EndDate"),ariaIconLabel:i("Common.Aria.EndDateIcon")})),n.a.createElement(vl["a"],{item:true},n.a.createElement(ja["a"],{className:o.endDateCloseContainer,onClick:function e(){return a({type:"hideEndDate"})}},n.a.createElement(qa["a"],null)))),!r.showEndDate&&n.a.createElement(nn["a"],{startIcon:n.a.createElement(ou["a"],{size:"small"}),onClick:function e(){return a({type:"showEndDate"})}},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},i("Scheduler.AddEndDate"))))))};var Mu=Pu;var Nu=r("NUsa");var Ru=Object(Ca["a"])((function(e){return{listSubheader:{backgroundColor:e.palette.background.paper,height:e.spacing(4,"!important")},typography:{color:e.palette.text.primary,fontWeight:600,lineHeight:e.spacing(4,"!important")}}}));var Lu=function e(t){var r=t.label;var a=Ru();return n.a.createElement(Nu["a"],{className:a.listSubheader},n.a.createElement(ka["a"],{noWrap:true,variant:"body2",className:a.typography},r))};var Vu=Lu;var _u=r("x8/z");function Bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Fu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(r),true).forEach((function(t){Hu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hu(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var zu=function e(t){return Fu(Fu({},t),{},{invalid:t.startTimeInvalid||t.endTimeInvalid||t.startDateInvalid||t.endDateInvalid||t.selectedWeekDaysInvalid||t.selectedMonthDaysInvalid||t.selectedMonthsInvalid})};var Wu=function e(t){if(t.invalid||!Ss(t.startTime)||t.frequency!==Rs.onceADay&&!Ss(t.endTime))return[];switch(t.frequency){case Rs.onceADay:return[{byhour:t.startTime.getHours(),byminute:t.startTime.getMinutes(),bysecond:0}];case Rs.twiceADay:return[{byhour:t.startTime.getHours(),byminute:t.startTime.getMinutes(),bysecond:0},{byhour:t.endTime.getHours(),byminute:t.endTime.getMinutes(),bysecond:0}];default:if(Ss(t.endTime)){var r=js(t.startTime,t.endTime,t.frequency);var a={};Object.keys(r).forEach((function(e){var t=Object.keys(a).find((function(t){return JSON.stringify(a[t])===JSON.stringify(r[e])}));if(t){a["".concat(t,",").concat(e)]=a[t];delete a[t]}else a[e]=r[e]}));return Object.keys(a).map((function(e){return{byhour:e,byminute:a[e].map((function(e){return e})).join(","),bysecond:0}}))}return[]}};var Gu=function e(t){var r=[];var a=Wu(t);switch(t.scheduleType){case Is.daily:!t.invalid&&Ss(t.startTime)&&t.interval&&(r=a.map((function(e){var r=new fs["a"](Fu({freq:fs["a"].DAILY,interval:t.interval},e));return r.toString()})));break;case Is.weekly:var n=Object.keys(t.selectedWeekDays).filter((function(e){return t.selectedWeekDays[e]})).map((function(e){var t;return null===(t=tu.find((function(t){return"".concat(t.dayOfTheWeek)===e})))||void 0===t?void 0:t.rrule}));!t.invalid&&(null===n||void 0===n?void 0:n.length)>0&&Ss(t.startTime)&&t.interval&&(r=a.map((function(e){var r=new fs["a"](Fu({freq:fs["a"].WEEKLY,interval:t.interval,byweekday:n},e));return r.toString()})));break;case Is.monthly:var i=Object.keys(t.selectedMonthDays).filter((function(e){return t.selectedMonthDays[e]}));var o=Object.keys(t.selectedMonths).filter((function(e){return t.selectedMonths[e]}));!t.invalid&&(null===i||void 0===i?void 0:i.length)>0&&(null===o||void 0===o?void 0:o.length)>0&&Ss(t.startTime)&&t.interval&&(r=a.map((function(e){var t=new fs["a"](Fu({freq:fs["a"].MONTHLY,interval:1,bymonthday:i,bymonth:o},e));return t.toString()})));break;default:break}return Fu(Fu({},t),{},{recurrence:r})};var $u=function e(t){var r=Bs(t.selectedMonths);var a=Fu({},t.selectedMonthDays);Object.keys(t.selectedMonthDays).forEach((function(e){e>r&&t.selectedMonthDays[e]&&(a=Fu(Fu({},a),{},Hu({},e,false)))}));return Fu(Fu({},t),{},{maxDaysInSelectedMonths:r,selectedMonthDays:a})};var Uu=function e(t,r){if(r===Is.monthly||r===Is.weekly||r===Is.daily){var a=t.startTime;var n=t.endTime;t.startTime||(a=Es(true));t.frequency===Rs.onceADay?n=null:n||(n=Es(true));return Fu(Fu({},t),{},{startTime:a,endTime:n})}return Fu(Fu({},t),{},{startTime:null,endTime:null})};var Yu=function e(t,r){switch(r.type){case"setScheduleType":var a=r.scheduleType===Cs?Cs:qs;var n=Uu(t,r.scheduleType);if(r.scheduleType===Is.monthly)return Gu(Fu(Fu({},n),{},{triggerType:a,scheduleType:r.scheduleType,interval:1,frequency:Rs.onceADay}));return Gu(Fu(Fu({},n),{},{triggerType:a,scheduleType:r.scheduleType}));case"setInterval":return Gu(Fu(Fu({},t),{},{interval:r.interval}));case"setFrequency":var i=t.endTime;r.frequency===Rs.onceADay?i=null:i||(i=Es(true));return Gu(Fu(Fu({},t),{},{endTime:i,frequency:r.frequency}));case"setStartTime":return Gu(Fu(Fu({},t),{},{startTime:r.date}));case"setEndTime":return Gu(Fu(Fu({},t),{},{endTime:r.date}));case"setStartDate":return Fu(Fu({},t),{},{startDate:r.date,startDateTime:xs(Object(ds["a"])(r.date))});case"setEndDate":return Fu(Fu({},t),{},{endDate:r.date,endDateTime:xs(Object(_u["a"])(r.date))});case"setSelectedWeekDays":var o=!Object.keys(r.selectedWeekDays).some((function(e){return r.selectedWeekDays[e]}));var l=Fu(Fu({},t),{},{selectedWeekDays:r.selectedWeekDays,selectedWeekDaysInvalid:o});var c=zu(l);return Gu(c);case"setSelectedMonthDays":var s=!Object.keys(r.selectedMonthDays).some((function(e){return r.selectedMonthDays[e]}));var u=Fu(Fu({},t),{},{selectedMonthDays:r.selectedMonthDays,selectedMonthDaysInvalid:s});var d=zu(u);return Gu(d);case"setSelectedMonths":var f=!Object.keys(r.selectedMonths).some((function(e){return r.selectedMonths[e]}));var p=Fu(Fu({},t),{},{selectedMonths:r.selectedMonths,selectedMonthsInvalid:f});var v=zu(p);var m=$u(v);return Gu(m);case"startTimeInvalid":var h=Fu(Fu({},t),{},{startTimeInvalid:r.invalid});var b=zu(h);return Gu(b);case"endTimeInvalid":var g=Fu(Fu({},t),{},{endTimeInvalid:r.invalid});var y=zu(g);return Gu(y);case"startDateInvalid":var w=Fu(Fu({},t),{},{startDateInvalid:r.invalid});return zu(w);case"endDateInvalid":var E=Fu(Fu({},t),{},{endDateInvalid:r.invalid});return zu(E);case"showEndDate":return Fu(Fu({},t),{},{showEndDate:true,endDate:Object(_u["a"])(Es()),endDateTime:xs(Object(_u["a"])(Es()))});case"hideEndDate":var S=Fu(Fu({},t),{},{showEndDate:false,endDate:null,endDateTime:null,endDateInvalid:false});return zu(S);default:return t}};var Xu=function e(t){var r;var a;var n;var i=[];t.forEach((function(e){var t=fs["a"].fromString(e);t.options.byhour.forEach((function(e){t.options.byminute.forEach((function(t){var r=Es();r.setHours(e);r.setMinutes(t);r.setSeconds(0);r.setMilliseconds(0);i.push(r)}))}));i.sort()}));if(1===i.length){r=Rs.onceADay;a=i[0]}else if(2===i.length){r=Rs.twiceADay;a=i[0];n=i[1]}else if(i.length>2){var o=Object(ms["a"])(i[1],i[0]);switch(o){case 5:case 15:case 30:case 60:case 120:r=o;break;default:r="error";throw Error("frequency value not recognized")}a=i[0];n=i[i.length-1]}return{frequency:r,startTime:a,endTime:n}};var Ku=function e(t){var r=Cs;var a=Cs;var n=1;var i=ru.selectedWeekDays;var o=ru.selectedMonths;var l=ru.selectedMonthDays;var c=_s;var s=Es(true);var u=null;var d=Es();var f=null;var p=xs(Es());var v=false;var m=null;var h=false;try{d=t.startDateTime?ks(t.startDateTime):Es();f=t.endDateTime?ks(t.endDateTime):null;v=Object(du["a"])(d,Es());p=v?null:xs(d);m=xs(f);h=!!t.endDateTime;if(t.recurrence&&t.recurrence.length>0){var b=fs["a"].fromString(t.recurrence[0]);switch(b.options.freq){case fs["a"].DAILY:r=Is.daily;a=qs;break;case fs["a"].WEEKLY:r=Is.weekly;a=qs;var g=function e(t){var r;var a=null===(r=tu.find((function(e){return e.dayOfTheWeek===Ks[t]})))||void 0===r?void 0:r.rrule;i[Ks[t]]=void 0!==b.options.byweekday.find((function(e){return a.weekday===e}))};for(var y=0;y<Ks.length;y++)g(y);break;case fs["a"].MONTHLY:r=Is.monthly;a=qs;var w=function e(t){o[Fs[t]]=!!b.options.bymonth.find((function(e){return e===Fs[t]}))};for(var E=0;E<Fs.length;E++)w(E);var S=function e(t){l[$s[t]]=!!b.options.bymonthday.find((function(e){return e===$s[t]}))};for(var O=0;O<$s.length;O++)S(O);l[-1]=!!b.options.bynmonthday.find((function(e){return-1===e}));s=void 0;u=void 0;break;default:break}n=b.options.interval;var x=Xu(t.recurrence),k=x.frequency,j=x.startTime,D=x.endTime;c=k;s=j;u=D}return Fu(Fu({},ru),{},{scheduleType:r,triggerType:a,startDate:d,startDateTime:p,startDateDisabled:v,endDate:f,endDateTime:m,interval:n,frequency:c,startTime:s,endTime:u,selectedWeekDays:i,selectedMonths:o,selectedMonthDays:l,timezone:t.timezone,recurrence:t.recurrence,showEndDate:h})}catch(e){console.error(e);return ru}};var Qu=r("aQba");function Zu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Ju(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(r),true).forEach((function(t){ed(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ed(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var td=Object(Ca["a"])((function(){return{weekDayButtonGroup:{padding:0},weekDayButton:{height:"initial"}}}));var rd=function e(t){var r=t.schedulerState,a=t.dispatchSchedulerState;var i=td();var o=Object(C["c"])();var l=function e(t){return r.selectedWeekDays[t]};var c=function e(t){var n=Ju(Ju({},r.selectedWeekDays),{},ed({},t,!r.selectedWeekDays[t]));a({type:"setSelectedWeekDays",selectedWeekDays:n})};return n.a.createElement(vl["a"],{container:true,alignItems:"flex-start","data-testid":"scheduler-weekday-picker"},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},o("Common.DayOfTheWeek")),n.a.createElement(Qu["a"],{variant:"outlined",className:i.weekDayButtonGroup},tu.map((function(e){return n.a.createElement(nn["a"],{className:i.weekDayButton,key:e.dayOfTheWeek,variant:"".concat(l(e.dayOfTheWeek)?"contained":""),color:"".concat(l(e.dayOfTheWeek)?"primary":""),size:"large",onClick:function t(){return c(e.dayOfTheWeek)}},n.a.createElement(ka["a"],{variant:"button"},e.abbreviation))})))))};var ad=rd;function nd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function id(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(r),true).forEach((function(t){od(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function od(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var ld=Object(Ca["a"])((function(){return{monthDayButtonGroup:{padding:0},monthDayButton:{height:"initial",width:64},lastDayOfMonthButton:{height:"initial",width:253}}}));var cd=function e(t){var r=t.schedulerState,a=t.dispatchSchedulerState;var i=ld();var o=Object(C["c"])();var l="large";var c=function e(t){return r.selectedMonthDays[t]};var s=function e(t){var n=id(id({},r.selectedMonthDays),{},od({},t,!r.selectedMonthDays[t]));a({type:"setSelectedMonthDays",selectedMonthDays:n})};var u=function e(t){return n.a.createElement(nn["a"],{className:i.monthDayButton,key:t,variant:"".concat(c(t)?"contained":""),color:"".concat(c(t)?"primary":""),size:l,onClick:function e(){return s(t)},disabled:t>r.maxDaysInSelectedMonths},n.a.createElement(ka["a"],{variant:"button"},t))};return n.a.createElement(vl["a"],{container:true,alignItems:"flex-start","data-testid":"scheduler-monthday-picker"},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},o("Common.DayOfTheMonth")),[0,7,14,21,28].map((function(e){return n.a.createElement(Qu["a"],{key:e,variant:"outlined",className:i.monthDayButtonGroup},$s.slice(e,e+7).map((function(e){return u(e)})),28===e&&n.a.createElement(nn["a"],{className:i.lastDayOfMonthButton,variant:"".concat(c(-1)?"contained":""),color:"".concat(c(-1)?"primary":""),size:l,onClick:function e(){return s(-1)}},n.a.createElement(ka["a"],{variant:"button"},o("Common.LastDayOfMonth"))))}))))};var sd=cd;var ud=r("KPRU");var dd=r("JS2A");function fd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function pd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(r),true).forEach((function(t){vd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vd(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var md=Object(Ca["a"])((function(){return{monthButtonGroup:{padding:0},monthButton:{height:"initial",width:64}}}));var hd=new Date;var bd=Object(ud["a"])(hd);var gd=Fs.map((function(e){return{monthOfTheYear:e,abbreviation:ys(Object(dd["a"])(bd,e-1))}}));var yd=function e(t){var r=t.schedulerState,a=t.dispatchSchedulerState;var i=md();var o=Object(C["c"])();var l=function e(t){return r.selectedMonths[t]};var c=function e(t){var n=pd(pd({},r.selectedMonths),{},vd({},t,!r.selectedMonths[t]));a({type:"setSelectedMonths",selectedMonths:n})};var s=function e(t){return n.a.createElement(nn["a"],{className:i.monthButton,key:t.monthOfTheYear,variant:"".concat(l(t.monthOfTheYear)?"contained":""),color:"".concat(l(t.monthOfTheYear)?"primary":""),size:"large",onClick:function e(){return c(t.monthOfTheYear)}},n.a.createElement(ka["a"],{variant:"button"},t.abbreviation))};return n.a.createElement(vl["a"],{container:true,alignItems:"flex-start","data-testid":"scheduler-month-picker"},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},o("Common.Month")),[0,6].map((function(e){return n.a.createElement(Qu["a"],{key:e,variant:"outlined",className:i.monthButtonGroup},gd.slice(e,e+6).map((function(e){return s(e)})))}))))};var wd=yd;function Ed(e,t){return jd(e)||kd(e,t)||Od(e,t)||Sd()}function Sd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Od(e,t){if(!e)return;if("string"===typeof e)return xd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xd(e,t)}function xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function kd(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function jd(e){if(Array.isArray(e))return e}var Dd=Object(Ca["a"])((function(e){return{menuItem:{padding:e.spacing(0,3),height:e.spacing(4,"!important"),lineHeight:e.spacing(4,"!important")}}}));var Cd=function e(t,r){if(!t)return ru;if(!t.inited){if(r)return Ku(t);return ru}return t};var qd=function e(t){var r=t.schedulerState,i=t.onSchedulerStateChange,o=t.editMode;var l=Dd();var c=Object(C["c"])();var s=Object(a["useReducer"])(Yu,Cd(r,o)),u=Ed(s,2),d=u[0],f=u[1];Object(a["useEffect"])((function(){i(d)}),[d]);return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:3},n.a.createElement(vl["a"],{item:true},n.a.createElement(Pa["a"],{fullWidth:true,variant:"outlined"},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},c("Scheduler.EvaluateAlert")),n.a.createElement(tc["a"],{"data-testid":"scheduler-alert-schedule-type-select",value:d.scheduleType,onChange:function e(t){f({type:"setScheduleType",scheduleType:t.target.value})}},n.a.createElement(Vu,{label:c("Scheduler.EvaluateAlert.OnAppReload")}),n.a.createElement(rc["a"],{value:Cs,key:Cs,className:l.menuItem},n.a.createElement(ka["a"],{variant:"body2"},c("Scheduler.EvaluateAlert.WhenNewDataIsAvailable"))),n.a.createElement(Vu,{label:c("Scheduler.EvaluateAlert.FixedTime")}),Ts.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value,className:l.menuItem},n.a.createElement(ka["a"],{variant:"body2"},c(e.label)))}))))),(d.scheduleType===Is.daily||d.scheduleType===Is.weekly)&&n.a.createElement(vl["a"],{item:true},n.a.createElement(iu,{schedulerState:d,dispatchSchedulerState:f})),d.scheduleType===Is.weekly&&n.a.createElement(vl["a"],{item:true},n.a.createElement(ad,{schedulerState:d,dispatchSchedulerState:f})),d.scheduleType===Is.monthly&&n.a.createElement(n.a.Fragment,null,n.a.createElement(vl["a"],{item:true},n.a.createElement(wd,{schedulerState:d,dispatchSchedulerState:f})),n.a.createElement(vl["a"],{item:true},n.a.createElement(sd,{schedulerState:d,dispatchSchedulerState:f}))),d.scheduleType!==Cs&&n.a.createElement(vl["a"],{item:true},n.a.createElement(Mu,{schedulerState:d,dispatchSchedulerState:f,editMode:o})))};var Id=qd;function Td(){Td=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return Td.apply(this,arguments)}function Ad(e,t){return Ld(e)||Rd(e,t)||Md(e,t)||Pd()}function Pd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Md(e,t){if(!e)return;if("string"===typeof e)return Nd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nd(e,t)}function Nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Rd(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Ld(e){if(Array.isArray(e))return e}function Vd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function _d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vd(Object(r),true).forEach((function(t){Bd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bd(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var Fd=20;var Hd=Object(Ca["a"])((function(e){return{menuItem:{height:e.spacing(4,"!important"),lineHeight:e.spacing(4,"!important")}}}));var zd=function e(t,r){switch(r.type){case"reset":return r.newDistributionState;case"shareWithOthers":return _d(_d({},t),{},{shareWithOthers:!t.shareWithOthers});case"selectedUsers":return _d(_d({},t),{},{selectedUsers:r.selectedUsers});case"frequency":return _d(_d({},t),{},{frequency:r.frequency});case"scheduler":return _d(_d({},t),{},{scheduler:r.scheduler});default:return t}};var Wd=function e(t){var r=t.distributionState,i=t.userList,o=t.dispatchDistributionState,l=t.editMode;var c=Hd();var s=Object(C["c"])();var d=wl["a"].canAddRecipients();var f=function e(t){o({type:"scheduler",scheduler:t})};var p=function e(){var t=Object(a["useState"])(false),l=Ad(t,2),u=l[0],d=l[1];var f=function e(){d(r.selectedUsers.length<Fd)};var p=function e(){d(false)};return n.a.createElement(Pa["a"],{fullWidth:true},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},s("Common.Name")),n.a.createElement(es["a"],{size:"medium",multiple:true,disableClearable:true,options:i,noOptionsText:s("Common.NoValuesFound"),getOptionLabel:function e(t){return t.name},getOptionSelected:function e(t,r){return t.value===r.value},open:u,onOpen:f,onClose:p,renderTags:function e(t,r){return t.map((function(e,t){return n.a.createElement(Jc["a"],Td({key:e.value,variant:"outlined",size:"small",label:e.name},r({index:t})))}))},value:r.selectedUsers.filter((function(e){return e.subscribed})),onChange:function e(t,r){r.length<=Fd&&o({type:"selectedUsers",selectedUsers:r})},filterSelectedOptions:true,fullWidth:true,forcePopupIcon:false,renderInput:function e(t){return n.a.createElement(Aa["a"],Td({},t,{"data-testid":"alert-recipients-input",variant:"outlined",helperText:r.selectedUsers.length>=Fd?s("Alerting.Distribution.ShareWithOthers.RecipientsWarning",Fd):void 0}))},classes:{option:c.menuItem}}))};var v=function e(){return n.a.createElement(Pa["a"],{fullWidth:true,variant:"outlined"},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},s("Alerting.Distribution.AllowNotification")),n.a.createElement(tc["a"],{"data-testid":"alert-frequency-select",value:r.frequency,onChange:function e(t){o({type:"frequency",frequency:t.target.value})}},sl.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value,className:c.menuItem},n.a.createElement(ka["a"],{className:"alert-frequency-option",variant:"body2"},s(e.label)))}))))};return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},Object(u["b"])("DATA_ALERTING_SCHEDULED_SCANS")&&n.a.createElement(ns,{body:n.a.createElement(Id,{editMode:l,schedulerState:r.scheduler,onSchedulerStateChange:f}),title:s("Scheduler.SchedulerTitle"),subTitle:s("Scheduler.SchedulerSubtitle")}),n.a.createElement(ns,{body:n.a.createElement(v,null),title:s("Alerting.Distribution.NotificationFrequency"),subTitle:s("Alerting.Distribution.NotificationSubtitle")}),d&&n.a.createElement(ns,{body:n.a.createElement(p,null),title:s("Alerting.Distribution.ShareWithOthers"),toggleState:r.shareWithOthers,switchToggleState:function e(){return o({type:"shareWithOthers"})},subTitle:s("Alerting.Distribution.ShareWithOthersSubtitle",Fd)}))};var Gd=Wd;var $d=r("q53s");var Ud=r("Xyu7");var Yd=r("NGs5");var Xd=r("IVHJ");function Kd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Qd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(r),true).forEach((function(t){Zd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zd(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Jd(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function ef(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Jd(i,a,n,o,l,"next",e)}function l(e){Jd(i,a,n,o,l,"throw",e)}o(void 0)}))}}function tf(e,t){return lf(e)||of(e,t)||af(e,t)||rf()}function rf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function af(e,t){if(!e)return;if("string"===typeof e)return nf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nf(e,t)}function nf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function of(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function lf(e){if(Array.isArray(e))return e}var cf=function e(t){var r=new Date(t);return Intl.DateTimeFormat(C["a"].locale,{year:"numeric",month:"numeric",day:"numeric",timeZone:Object(Ds["c"])()}).format(r)};var sf=Object(Ca["a"])((function(e){return{menuItem:{padding:e.spacing(0,3),height:e.spacing(4,"!important"),lineHeight:e.spacing(4,"!important")},select:{maxWidth:"500px"}}}));var uf=function e(t){var r,a,n,i;if(null===t||void 0===t?void 0:t.qLibraryId)return t.qLibraryId;if(null===t||void 0===t||null===(r=t.qDef)||void 0===r||null===(a=r.qFieldLabels)||void 0===a?void 0:a[0])return t.qDef.qFieldLabels;if(null===t||void 0===t||null===(n=t.qDef)||void 0===n||null===(i=n.qFieldDefs)||void 0===i?void 0:i[0])return t.qDef.qFieldDefs;return t};var df=function e(t){var r;var i=t.selectedDimension,o=void 0===i?"none":i,l=t.updateSelectedDimension,c=t.sortedDimensions,s=void 0===c?[]:c,u=t.selectionState,d=t.dispatchSelectionState,f=t.chartDimensions,p=void 0===f?[]:f,v=t.selectedDimensionFromEdit,m=t.chartTitle,h=t.editMode;var b=Object(C["c"])();var g=sf();var y=Object(F["a"])(),w=tf(y,1),E=w[0];var S=Object(a["useState"])({}),O=tf(S,2),x=O[0],k=O[1];var j=u.bookmarkList,D=u.currentSelected,q=u.alertBookmarkFromEdit,I=u.alertBookmarkFromCurrentSelections,T=u.bookmarkMap;Object(a["useEffect"])((function(){var e=true;var t=function(){var t=ef(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function t(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return Ki["a"].get(E);case 2:r=a.sent;e&&k(r);case 4:case"end":return a.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();E&&t();return function(){e=false}}),[E]);var A=function(){var e=ef(regeneratorRuntime.mark((function e(t){var r;var a,n,i,o;return regeneratorRuntime.wrap((function e(l){while(1)switch(l.prev=l.next){case 0:if(!("none"===t)){l.next=6;break}l.next=3;return x.clearAll();case 3:d({type:"selectNone"});l.next=31;break;case 6:if(!(t===I)){l.next=12;break}l.next=9;return Xd["a"].applyBookmark(t,false);case 9:d({type:"selectCurrentSelections"});l.next=31;break;case 12:if(!(t===(null===q||void 0===q||null===(r=q.qInfo)||void 0===r?void 0:r.qId))){l.next=18;break}l.next=15;return Xd["a"].applyBookmark(t,false);case 15:d({type:"selectBookmarkFromAlert"});l.next=31;break;case 18:l.next=20;return Xd["a"].applyBookmark(t,false);case 20:if(T[t]){l.next=30;break}n=j.find((function(e){return e.qInfo.qId===t}));l.next=24;return Yd["a"].createAlertBookmark(null===n||void 0===n||null===(a=n.qData)||void 0===a?void 0:a.title);case 24:i=l.sent;o=Qd({},T);o[t]=i.id;d({type:"selectBookmarkFromList",bookmarkId:t,alertBookmarkId:i.id,bookmarkMap:o});l.next=31;break;case 30:d({type:"selectBookmarkFromList",bookmarkId:t,alertBookmarkId:T[t],bookmarkMap:T});case 31:case"end":return l.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();var P=function e(t){var r=o.qLibraryId,a=o.qDef;if(r){var n;var i=s.find((function(e){return e.qInfo.qId===r}));l(t,null===i||void 0===i||null===(n=i.qMeta)||void 0===n?void 0:n.title)}else{var c,u;l(t,(null===a||void 0===a||null===(c=a.qFieldLabels)||void 0===c?void 0:c[0])||(null===a||void 0===a||null===(u=a.qFieldDefs)||void 0===u?void 0:u[0]))}};var M=function e(t){var r=t.qLibraryId,a=t.qDef;if(r){var i;var o=s.find((function(e){return e.qInfo.qId===r}));return n.a.createElement(rc["a"],{className:g.menuItem,value:r,key:"chart-".concat(r),onClick:function e(){return P({qLibraryId:r})}},n.a.createElement(ka["a"],{variant:"body2"},null===o||void 0===o||null===(i=o.qMeta)||void 0===i?void 0:i.title))}var l=a.qFieldDefs,c=a.cId,u=a.qFieldLabels;return n.a.createElement(rc["a"],{className:g.menuItem,value:uf(t),key:c,onClick:function e(){return P({qDef:{qFieldDefs:l,qFieldLabels:u}})}},n.a.createElement(ka["a"],{variant:"body2"},u[0]||l[0]))};var N=function e(t){void 0!==t.target.value&&A(t.target.value)};return n.a.createElement(vl["a"],{container:true,spacing:3},n.a.createElement(vl["a"],{item:true,xs:12},n.a.createElement(ka["a"],{variant:"h6"},b("Alerting.Data.DrillByDimension")),n.a.createElement(ka["a"],{variant:"subtitle1",gutterBottom:true},b("Alerting.Data.DrillByDimensionSubtitle")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true,className:g.select},n.a.createElement(tc["a"],{value:uf(o)},n.a.createElement(rc["a"],{className:g.menuItem,value:"none",onClick:function e(){return P("none")}},n.a.createElement(ka["a"],{variant:"body2"},b("Common.None"))),!h&&n.a.createElement(Vu,{label:b("Common.FromChart",m)}),!h&&p.map(M),!h&&0===p.length&&n.a.createElement(rc["a"],{className:g.menuItem,disabled:true},n.a.createElement(ka["a"],{variant:"body2"},b("Alerting.Data.NoDimensionsFromChart"))),v&&n.a.createElement(Vu,{label:b("Common.FromAlert")}),v&&M(v),n.a.createElement(Vu,{label:b("Common.MasterDimensions")}),s.map((function(e){return n.a.createElement(rc["a"],{className:g.menuItem,value:e.qInfo.qId,key:e.qInfo.qId,onClick:function t(){return P({qLibraryId:e.qInfo.qId})}},n.a.createElement(ka["a"],{variant:"body2"},e.qMeta.title))})),0===s.length&&n.a.createElement(rc["a"],{className:g.menuItem,disabled:true},n.a.createElement(ka["a"],{variant:"body2"},b("Common.NoMasterDimensionFound")))))),n.a.createElement(vl["a"],{item:true,xs:12},n.a.createElement(ka["a"],{variant:"h6"},b("Bookmarks.Selections")),n.a.createElement(ka["a"],{variant:"subtitle1",gutterBottom:true},b("Alerting.Data.SelectionsOrBookmarkSubtitle")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true,className:g.select},n.a.createElement(tc["a"],{value:D,onChange:N},q&&n.a.createElement(Vu,{label:b("Common.FromAlert")}),q&&n.a.createElement(rc["a"],{className:g.menuItem,value:null===(r=q.qInfo)||void 0===r?void 0:r.qId},n.a.createElement(ka["a"],{variant:"body2"},b("Alerting.Data.BookmarkFromEdit",[q.qMetaDef.title,cf(q.creationDate)]))),n.a.createElement(Vu,{label:b("Bookmarks.Selections")}),!h&&n.a.createElement(rc["a"],{className:g.menuItem,value:I},n.a.createElement(ka["a"],{variant:"body2"},b("Alerting.Data.UseCurrentSelections"))),n.a.createElement(rc["a"],{className:g.menuItem,value:"none"},n.a.createElement(ka["a"],{variant:"body2"},b("Common.NoSelections"))),n.a.createElement(Vu,{label:b("Common.Bookmarks")}),j.map((function(e){return n.a.createElement(rc["a"],{className:g.menuItem,key:e.qInfo.qId,value:e.qInfo.qId},n.a.createElement(ka["a"],{variant:"body2"},e.qData.title))}))))))};var ff=df;var pf=r("HubC");function vf(e,t){return yf(e)||gf(e,t)||hf(e,t)||mf()}function mf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hf(e,t){if(!e)return;if("string"===typeof e)return bf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bf(e,t)}function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function gf(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function yf(e){if(Array.isArray(e))return e}var wf=Object(Ca["a"])((function(){return{gridItem:{flexBasis:"auto !important"}}}));var Ef=function e(t){var r=t.name,i=void 0===r?"":r,o=t.description,l=t.confirmTitle,c=t.confirmDescription;var s=Object(C["c"])();var u=wf();var d=function e(){var t=Object(a["useState"])(i),r=vf(t,2),d=r[0],f=r[1];var p=Object(a["useState"])(o),v=vf(p,2),m=v[0],h=v[1];return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},n.a.createElement(vl["a"],{item:true,xs:12,className:u.gridItem},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},s("Common.Title")),n.a.createElement(Pa["a"],{error:!d.trim(),fullWidth:true},n.a.createElement(uc["a"],{"data-testid":"alert-title-input",value:d,onBlur:function e(){f(d.trim());l(d.trim())},onChange:function e(t){f(t.target.value)},endAdornment:!d.trim()&&n.a.createElement(dc["a"],{position:"end"},n.a.createElement(pf["a"],{size:"small"}))}))),n.a.createElement(vl["a"],{item:true,xs:12,className:u.gridItem},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},s("Common.Description")),n.a.createElement(Pa["a"],{fullWidth:true},n.a.createElement(uc["a"],{"data-testid":"alert-description-input",value:m,onChange:function e(t){h(t.target.value)},onBlur:function e(){c(m)}}))))};return n.a.createElement(vl["a"],{container:true,spacing:2,direction:"column"},n.a.createElement(ns,{title:s("Common.Details"),body:n.a.createElement(d,null)}))};var Sf=Ef;var Of=r("hhow");var xf=r("u44p");var kf=r("v6vt");var jf=r("EnO5");function Df(e,t){return Af(e)||Tf(e,t)||qf(e,t)||Cf()}function Cf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qf(e,t){if(!e)return;if("string"===typeof e)return If(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return If(e,t)}function If(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Tf(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Af(e){if(Array.isArray(e))return e}var Pf=Object(Ca["a"])((function(e){return{list:{width:"450px",maxHeight:"400px",overflowY:"auto"},searchField:{padding:e.spacing(2)},listItem:{padding:e.spacing(0,3),height:e.spacing(4,"!important")}}}));var Mf=function e(t,r){if(r){var a=Object(jf["b"])(t,r);if(a.every((function(e){return!e.match})))return[];return a.map((function(e,t){return{id:"".concat(t,"-").concat(e.text),text:e.text,highlight:e.match}}))}return[{text:t,highlight:false}]};var Nf=function e(t){var r=t.id,a=t.parts,i=void 0===a?[]:a;return n.a.createElement(ka["a"],{variant:"body2"},i.map((function(e){return n.a.createElement("span",{className:"alert-measure-dropdown-item",key:"".concat(r,"-").concat(e.id),style:e.highlight?{flex:"0 1 auto",backgroundColor:"#FFC72A"}:{flex:"0 1 auto"}},e.text)})))};function Rf(e){var t=e.alignTo,r=e.show,i=e.close,o=e.addMeasure,l=e.sortedMeasures,c=void 0===l?[]:l,s=e.setTemporaryCloseDialog,u=e.chartMeasures,d=void 0===u?[]:u,f=e.chartTitle,p=e.editMode;var v=Object(C["c"])();var m=Pf();var h=Object(a["useState"])(""),b=Df(h,2),g=b[0],y=b[1];return n.a.createElement(Of["a"],{open:r,onClose:i,anchorEl:t.current,elevation:3,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(vl["a"],{container:true,direction:"column"},n.a.createElement(vl["a"],{item:true,className:m.searchField},n.a.createElement(wc,{tid:"alert-measure-searchbox",onChange:function e(t){return y(t)},onEnter:function e(t){return o(t.trim())},confirmValue:function e(t){return o(t)},setTemporaryCloseDialog:s})),n.a.createElement(vl["a"],{item:true,className:m.list},n.a.createElement(xf["a"],{dense:true,component:"nav"},!p&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Vu,{label:v("Common.FromChart",f)}),d.map((function(e){if(e.qLibraryId){var t;var r=c.find((function(t){return t.qInfo.qId===e.qLibraryId}));var a=Mf(null===r||void 0===r||null===(t=r.qData)||void 0===t?void 0:t.title,g);if(0===a.length)return null;return n.a.createElement(kf["a"],{button:true,onClick:function t(){return o(e)},key:r.qInfo.qId,className:m.listItem},n.a.createElement(Nf,{id:r.qInfo.qId,parts:a}))}var i=Mf(e.qDef.qLabel||e.qDef.qDef,g);if(0===i.length)return null;return n.a.createElement(kf["a"],{button:true,onClick:function t(){return o(e)},key:e.qDef.cId,className:m.listItem},n.a.createElement(Nf,{id:e.qLibraryId,parts:i}))})),0===d.length&&n.a.createElement(kf["a"],{disabled:true,className:m.listItem},v("Alerting.Data.NoMeasuresFromChart"))),n.a.createElement(Vu,{label:v("Common.MasterMeasures")}),c.map((function(e){var t=Mf(e.qData.title,g);if(0===t.length)return null;return n.a.createElement(kf["a"],{button:true,onClick:function t(){return o(e.qInfo)},key:e.qInfo.qId,className:m.listItem},n.a.createElement(Nf,{id:e.qInfo.qId,parts:t}))})),0===c.length&&n.a.createElement(kf["a"],{disabled:true,className:m.listItem},v("Common.NoMasterMeasureFound"))))))}function Lf(e,t){return Hf(e)||Ff(e,t)||_f(e,t)||Vf()}function Vf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _f(e,t){if(!e)return;if("string"===typeof e)return Bf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bf(e,t)}function Bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ff(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Hf(e){if(Array.isArray(e))return e}function zf(e){var t=e.items,r=void 0===t?[]:t,i=e.addMeasure,o=e.canAdd,l=void 0===o||o,c=e.sortedMeasures,s=e.setTemporaryCloseDialog,u=e.chartMeasures,d=e.chartTitle,f=e.editMode;var p=Object(a["useState"])(false),v=Lf(p,2),m=v[0],h=v[1];var b=Object(a["useRef"])(null);var g=Object(C["c"])();var y=r.length>0;var w=function e(t){i(t);h(false)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(nn["a"],{"data-testid":"alert-add-measure",variant:y?"outlined":"contained",fullWidth:true,onClick:function e(){return h(true)},ref:b,disabled:!l||m,color:y?void 0:"primary"},g(y?"Alerting.Data.AddAdditionalMeasure":"properties.measures.add")),m&&n.a.createElement(Rf,{alignTo:b,show:m,close:function e(){return h(false)},addMeasure:w,sortedMeasures:c,setTemporaryCloseDialog:s,chartMeasures:u,chartTitle:d,editMode:f}))}var Wf=r("k9bD");var Gf=r("ZBqy");var $f=r("3hCt");function Uf(e,t){return Zf(e)||Qf(e,t)||Xf(e,t)||Yf()}function Yf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xf(e,t){if(!e)return;if("string"===typeof e)return Kf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kf(e,t)}function Kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Qf(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Zf(e){if(Array.isArray(e))return e}var Jf=function e(t){var r=t.value,i=t.disabled,o=t.confirmValue,l=void 0===o?function(){}:o,c=t.onChange,s=t.onEnter;var u=Object(a["useState"])(r),d=Uf(u,2),f=d[0],p=d[1];var v=function e(t){c&&c(t);p(t)};var m=function e(t){s&&"Enter"===t.key&&s(f)};Object(a["useEffect"])((function(){p(r)}),[r]);return n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true,disabled:i},i?n.a.createElement(uc["a"],{value:f}):n.a.createElement(uc["a"],{value:f,onChange:function e(t){return v(t.target.value)},onBlur:function e(){return l(f)},onKeyDown:m}))};var ep=Jf;var tp=r("5Ska");var rp=Object(Ca["a"])((function(e){return{menuItem:{height:e.spacing(4,"!important"),lineHeight:e.spacing(4,"!important")}}}));var ap=function e(t){var r,a;var i=t.measure,o=t.updateFormatType;var l=rp();var c=Object(C["c"])();var s=tp["a"].getNumberFormattingProperties("",false);return n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},c("properties.numberFormatting")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},n.a.createElement(tc["a"],{value:(null===(r=i.qDef)||void 0===r||null===(a=r.qNumFormat)||void 0===a?void 0:a.qType)||"U",onChange:function e(t){return o(t.target.value)}},s.items.numberFormattingType.options.filter((function(e){return"R"!==e.value&&"OFF"!==e.value})).map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value,className:l.menuItem},n.a.createElement(ka["a"],{variant:"body2"},c(e.translation)))})))))};var np=ap;var ip=Object(Ca["a"])((function(e){return{errorButton:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.light},"&:active":{backgroundColor:e.palette.error.dark}},summary:{"& div:first-child":{margin:"".concat(e.spacing(1.5),"px 0")}}}}));var op=function e(t){var r=t.measure,a=t.removeMeasure,i=t.updateLabel,o=t.updateDef,l=t.updateFormatType,c=t.setTemporaryCloseDialog;var s=ip();var u=Object(C["c"])();var d=r.qLibraryId;var f=function e(){a(d?r.label:r.qDef.qLabel||r.qDef.qDef)};return n.a.createElement(Wf["a"],null,n.a.createElement(Gf["a"],{expandIcon:n.a.createElement(Ud["a"],null),className:s.summary},n.a.createElement(ka["a"],{className:"alert-measure-summary",variant:"h5",gutterBottom:true},d?r.label:r.qDef.qLabel||r.qDef.qDef)),n.a.createElement($f["a"],null,n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},u(d?"Common.Measure":"Common.Expression")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},d?n.a.createElement(ep,{value:r.label,disabled:true}):n.a.createElement(wc,{value:r.qDef.qDef,onEnter:function e(t){return o(t)},confirmValue:function e(t){return o(t)},onBlur:function e(t){return o(t)},setTemporaryCloseDialog:c}))),!d&&n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h6",gutterBottom:true},u("Common.Label")),n.a.createElement(Pa["a"],{variant:"outlined",fullWidth:true},n.a.createElement(ep,{value:r.qDef.qLabel,onEnter:function e(t){return i(t)},confirmValue:function e(t){return i(t)}}))),n.a.createElement(np,{measure:r,updateFormatType:l}),n.a.createElement(vl["a"],{item:true},n.a.createElement(nn["a"],{variant:"contained",className:s.errorButton,onClick:f},u("Common.Delete"))))))};var lp=op;function cp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function sp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cp(Object(r),true).forEach((function(t){up(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function up(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function dp(e,t){return hp(e)||mp(e,t)||pp(e,t)||fp()}function fp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pp(e,t){if(!e)return;if("string"===typeof e)return vp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vp(e,t)}function vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function mp(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function hp(e){if(Array.isArray(e))return e}var bp=Object(Ca["a"])((function(){return{gridItem:{flexBasis:"auto !important"}}}));var gp=function e(t){var r=t.conditionData,a=t.dispatchConditionData,i=t.sortedMeasures,o=t.setTemporaryCloseDialog,l=t.chartMeasures,c=t.chartTitle,s=t.editMode;var u=Object(F["a"])(),d=dp(u,1),f=d[0];var p=(null===f||void 0===f?void 0:f.layout)||{},v=p.qLocaleInfo,m=void 0===v?{}:v;var h=m.qDecimalSep,b=void 0===h?".":h,g=m.qThousandSep,y=void 0===g?",":g;var w=bp();var E=Hl({qMeasures:r.qHyperCubeDef.qMeasures,sortedMeasures:i});var S=function e(t){var r=Kl(t,m);r&&a({type:"addMeasure",newMeasure:r})};var O=function e(t,r){a({type:"removeMeasure",index:t,label:r})};var x=function e(t){var r=t.measure,n=t.newLabel,i=t.index;a({type:"updateMeasure",measure:sp(sp({},r),{},{qDef:sp(sp({},r.qDef),{},{qLabel:n})}),index:i})};var k=function e(t){var r=t.measure,n=t.newDef,i=t.index;a({type:"updateMeasure",measure:sp(sp({},r),{},{qDef:sp(sp({},r.qDef),{},{qDef:n})}),index:i})};var j=function e(t){var r;var n=t.measure,i=t.newType,o=t.index;var l=(null===n||void 0===n||null===(r=n.qDef)||void 0===r?void 0:r.qNumFormat)||{};var c=sp(sp({},l),{},{qType:i,qDec:b,qThou:y});var s=kl["a"].getNumFmtPattern("qType",c,m);var u=sp(sp({},n),{},{qDef:sp(sp({},n.qDef),{},{qNumFormat:s})});void 0===u.qDef.numFormatFromTemplate&&(u.qDef.numFormatFromTemplate=true);a({type:"updateMeasure",measure:u,index:o})};return n.a.createElement(vl["a"],{container:true,direction:"column",spacing:2},E.map((function(e,t){return n.a.createElement(vl["a"],{item:true,xs:12,key:t,className:w.gridItem},n.a.createElement(lp,{measure:e,removeMeasure:function e(r){return O(t,r)},updateLabel:function r(a){return x({measure:e,newLabel:a,index:t})},updateDef:function r(a){return k({measure:e,newDef:a,index:t})},updateFormatType:function r(a){return j({measure:e,newType:a,index:t})},setTemporaryCloseDialog:o}))})),n.a.createElement(vl["a"],{item:true,xs:12,className:w.gridItem},n.a.createElement(zf,{addMeasure:S,canAdd:E.length<10,items:E,sortedMeasures:i,setTemporaryCloseDialog:o,chartMeasures:l,chartTitle:c,editMode:s})))};function yp(e){var t=Object(C["c"])();return n.a.createElement(ns,{title:t("Alerting.Data.Title"),body:n.a.createElement(gp,e)})}var wp=Object(Ca["a"])((function(e){return{tableSection:{backgroundColor:e.palette.background.paper,maxHeight:"385px",maxWidth:"520px"}}}));var Ep=function e(t,r){var a=t.length;var n=t.map((function(e,t){return{id:t,label:e.qFallbackTitle}}));var i=r.map((function(e,t){return{id:t+a,label:e.qFallbackTitle}}));var o=n.concat(i);return o};var Sp=function e(t){var r=t.layout;var a=wp();if(!r||!r.qHyperCube)return null;var i=Ep(r.qHyperCube.qDimensionInfo,r.qHyperCube.qMeasureInfo);var o=r.qHyperCube.qDataPages[0].qMatrix;var l=function e(t){var a;var n=((null===r||void 0===r||null===(a=r.qHyperCube)||void 0===a?void 0:a.qDimensionInfo)||[]).length;var i="r-";for(var o=0;o<n;o++)i+="".concat(t[o].qElemNumber,"-");return i};var c=function e(t,r){return"c-".concat(i[r].id,"-").concat(t.qElemNumber)};var s=function e(){return n.a.createElement(Ac["a"],null,n.a.createElement(Pc["a"],null,i.map((function(e){return n.a.createElement(Mc["a"],{key:"h-".concat(e.id)}," ",e.label)}))))};return n.a.createElement(Ic["a"],{className:a.tableSection},n.a.createElement(Tc["a"],{stickyHeader:true},n.a.createElement(s,{rowCount:o.length}),n.a.createElement(Nc["a"],null,o.map((function(e){return n.a.createElement(Pc["a"],{tabIndex:-1,key:l(e)},e.map((function(e,t){return n.a.createElement(Mc["a"],{key:c(e,t)},e.qText)})))})))))};var Op=Sp;function xp(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function kp(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){xp(i,a,n,o,l,"next",e)}function l(e){xp(i,a,n,o,l,"throw",e)}o(void 0)}))}}var jp={getLayout:function e(t){return kp(regeneratorRuntime.mark((function e(){var r,a,n,i;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:r=t.app,a=t.objectDef,n=t.dataModel,i=t.setDataModel;if(!(r&&a)){o.next=5;break}if(!n){o.next=4;break}return o.abrupt("return",n.setProperties(a).then((function(){return n.getLayout()})));case 4:return o.abrupt("return",r.createSessionObject(a).then((function(e){i(e);return e.getLayout()})));case 5:return o.abrupt("return",void 0);case 6:case"end":return o.stop()}}),e)})))()}};function Dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Cp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dp(Object(r),true).forEach((function(t){qp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qp(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Ip(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Tp(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Ip(i,a,n,o,l,"next",e)}function l(e){Ip(i,a,n,o,l,"throw",e)}o(void 0)}))}}function Ap(e,t){return Lp(e)||Rp(e,t)||Mp(e,t)||Pp()}function Pp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mp(e,t){if(!e)return;if("string"===typeof e)return Np(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Np(e,t)}function Np(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Rp(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Lp(e){if(Array.isArray(e))return e}var Vp=function e(t){var r;var i=t.conditionData,o=t.selectedBookmark;var l=Object(C["c"])();var c=Object(F["a"])(),s=Ap(c,1),u=s[0];var d=Object(a["useState"])(),f=Ap(d,2),p=f[0],v=f[1];var m=Object(a["useState"])(),h=Ap(m,2),b=h[0],g=h[1];Object(a["useEffect"])((function(){var e=true;function t(){return r.apply(this,arguments)}function r(){r=Tp(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function t(n){while(1)switch(n.prev=n.next){case 0:r=Fl(i.qHyperCubeDef);n.next=3;return jp.getLayout({objectDef:r,app:u,dataModel:p,setDataModel:v});case 3:a=n.sent;e&&g(Cp({},a));case 5:case"end":return n.stop()}}),t)})));return r.apply(this,arguments)}t();return function(){e=false}}),[i,u,o]);return n.a.createElement(vl["a"],{container:true,spacing:2,direction:"column"},n.a.createElement(vl["a"],{item:true},n.a.createElement(sc,{title:l("Alerting.Data.Preview")})),0===(null===i||void 0===i||null===(r=i.qHyperCubeDef)||void 0===r?void 0:r.qMeasures.length)?n.a.createElement(vl["a"],{container:true,justify:"center"},n.a.createElement(ka["a"],{variant:"subtitle1"},l("Alerting.Data.NoMeasurePreview"))):n.a.createElement(vl["a"],{item:true},n.a.createElement(Op,{layout:b})))};var _p=Vp;function Bp(e,t){return Gp(e)||Wp(e,t)||Hp(e,t)||Fp()}function Fp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hp(e,t){if(!e)return;if("string"===typeof e)return zp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zp(e,t)}function zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Wp(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Gp(e){if(Array.isArray(e))return e}var $p=function e(t){var r=t.name,i=t.confirmTitle,o=t.description,l=t.confirmDescription,c=t.conditionData,s=t.dispatchConditionData,u=t.sortedMeasures,d=t.sortedDimensions,f=t.setTemporaryCloseDialog,p=t.selectionState,v=t.dispatchSelectionState,m=t.chartHyperCubeDef,h=t.selectedDimensionFromEdit,b=t.chartTitle,g=t.editMode;var y=Object(a["useState"])(false),w=Bp(y,2),E=w[0],S=w[1];var O=Object(C["c"])();var x=c.qHyperCubeDef.qDimensions,k=void 0===x?[]:x;var j=(null===m||void 0===m?void 0:m.qDimensions)||[];var D=(null===m||void 0===m?void 0:m.qMeasures)||[];var q=p.selectedAlertBookmark;var I=function e(t,r){s("none"===t?{type:"removeDimension",removedDimension:r}:{type:"setDimension",newDimension:t,removedDimension:r})};return n.a.createElement(vl["a"],{container:true,spacing:2,direction:"column"},n.a.createElement(vl["a"],{item:true},n.a.createElement(Sf,{name:r,confirmTitle:i,description:o,confirmDescription:l})),n.a.createElement(vl["a"],{item:true},n.a.createElement(yp,{conditionData:c,dispatchConditionData:s,sortedMeasures:u,setTemporaryCloseDialog:f,chartMeasures:D,chartTitle:b,editMode:g})),n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,justify:"flex-end"},n.a.createElement(nn["a"],{onClick:function e(){return S(!E)},endIcon:E?n.a.createElement($d["a"],null):n.a.createElement(Ud["a"],null),"data-testid":"toggleButton"},O("Alerting.Data.TitleAdvanced"))),n.a.createElement(ts["a"],{in:E,"data-testid":"collapse"},n.a.createElement(ns,{title:O("Alerting.Data.TitleAdvanced"),body:n.a.createElement(ff,{sortedDimensions:d,dispatchConditionData:s,selectedDimension:k[0],updateSelectedDimension:I,selectionState:p,dispatchSelectionState:v,chartDimensions:j,selectedDimensionFromEdit:h,chartTitle:b,editMode:g})}))),n.a.createElement(vl["a"],{item:true},n.a.createElement(_p,{conditionData:c,selectedBookmark:q})))};var Up=$p;var Yp=r("oxue");var Xp=r("dJ5t");var Kp=r("zDDU");function Qp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Zp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(r),true).forEach((function(t){Jp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jp(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function ev(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function tv(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){ev(i,a,n,o,l,"next",e)}function l(e){ev(i,a,n,o,l,"throw",e)}o(void 0)}))}}function rv(e,t){return lv(e)||ov(e,t)||nv(e,t)||av()}function av(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nv(e,t){if(!e)return;if("string"===typeof e)return iv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iv(e,t)}function iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ov(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function lv(e){if(Array.isArray(e))return e}var cv=[{label:C["a"].get("Alerting.Tab.DetailsAndData")},{label:C["a"].get("Common.Conditions")},{label:C["a"].get("Common.Distribution")}];var sv=Object(Ca["a"])((function(e){return{dialog:{height:"95%"},stepper:{backgroundColor:e.palette.background.paper,borderBottom:"1px solid ".concat(e.palette.divider),padding:e.spacing(2)},stepLabel:{marginTop:"".concat(e.spacing(1),"px !important")},content:{backgroundColor:e.palette.background.default,padding:e.spacing(3,5)},warningIcon:{color:e.palette.error.main},loader:{height:"100%"}}}));var uv=function e(t){var r=t.open,i=t.closeDialog,o=t.user,l=t.originalObject,c=t.sheetId,s=t.alertId,d=t.activateSnackbar;var f=sv();var v=Object(C["c"])();var m=Object(a["useState"])(0),h=rv(m,2),b=h[0],g=h[1];var y=Object(F["a"])(),w=rv(y,1),E=w[0];var S=Object(a["useReducer"])(Bl,tl),O=rv(S,2),x=O[0],k=O[1];var j=Object(a["useState"])(""),D=rv(j,2),q=D[0],I=D[1];var T=Object(a["useState"])(""),A=rv(T,2),P=A[0],M=A[1];var N=Object(a["useState"])(false),R=rv(N,2),L=R[0],V=R[1];var _=Object(a["useState"])(false),B=rv(_,2),H=B[0],z=B[1];var W=Object(a["useState"])(""),G=rv(W,2),$=G[0],U=G[1];var Y=Object(a["useReducer"])(zd,rl),X=rv(Y,2),K=X[0],Q=X[1];var Z=Object(a["useReducer"])(wl["b"],al),J=rv(Z,2),ee=J[0],te=J[1];var re=Object(a["useState"])([]),ae=rv(re,2),ne=ae[0],ie=ae[1];var oe=Object(a["useState"])([]),le=rv(oe,2),ce=le[0],se=le[1];var ue=Object(a["useState"])([]),de=rv(ue,2),fe=de[0],pe=de[1];var ve=Object(a["useState"])(),me=rv(ve,2),he=me[0],be=me[1];var ge=Object(a["useState"])(),ye=rv(ge,2),we=ye[0],Ee=ye[1];var Se=Object(a["useState"])(),Oe=rv(Se,2),xe=Oe[0],ke=Oe[1];var je=Object(a["useState"])(false),De=rv(je,2),Ce=De[0],qe=De[1];var Ie=Object(a["useState"])(),Te=rv(Ie,2),Ae=Te[0],Pe=Te[1];var Me=Object(a["useState"])(),Ne=rv(Me,2),Re=Ne[0],Le=Ne[1];Object(a["useEffect"])((function(){var e=true;function t(){return a.apply(this,arguments)}function a(){a=tv(regeneratorRuntime.mark((function t(){var r,a;var n,i;return regeneratorRuntime.wrap((function t(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return Object(yl["b"])(o.tenantId);case 2:n=l.sent;i=[];if(e&&(null===n||void 0===n||null===(r=n.data)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.length)>0){i=n.data.data.filter((function(e){return e.id!==o.id})).map((function(e){return{enabled:true,subscribed:true,value:e.id,name:e.name}}));ie(i)}return l.abrupt("return",i);case 6:case"end":return l.stop()}}),t)})));return a.apply(this,arguments)}var n=function(){var t=tv(regeneratorRuntime.mark((function t(){var r,a,n,i;return regeneratorRuntime.wrap((function t(o){while(1)switch(o.prev=o.next){case 0:if(!E){o.next=17;break}o.next=3;return Yp["a"].getSortedMeasures(E);case 3:r=o.sent;o.next=6;return Yp["a"].getSortedDimensions(E);case 6:a=o.sent;o.next=9;return yi["a"].getListLayout();case 9:n=o.sent;o.t0=null===l||void 0===l?void 0:l.model;if(!o.t0){o.next=15;break}o.next=14;return l.model.getEffectiveProperties();case 14:o.t0=o.sent;case 15:i=o.t0;if(e){se(r);pe(a);te({type:"setBookmarkList",bookmarkList:n});V(true);be(null===i||void 0===i?void 0:i.qHyperCubeDef)}case 17:case"end":return o.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();var i=function(){var t=tv(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function t(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return Yd["a"].createAlertBookmark(r);case 2:a=i.sent;if(e){n=a.id;te({type:"setAndSelectAlertBookmarkFromCurrentSelections",id:n});z(true)}case 4:case"end":return i.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var c=function(){var r=tv(regeneratorRuntime.mark((function r(){var a,n,i,l,c,d,f,p,m,h,b,g,y,w,S,O,x,j,D,C,q,T,A;return regeneratorRuntime.wrap((function r(P){while(1)switch(P.prev=P.next){case 0:P.next=2;return t();case 2:a=P.sent;P.next=5;return Kp["a"].getAlert(s);case 5:n=P.sent;P.next=8;return Kp["a"].getCondition(s);case 8:i=P.sent;l=n.data;c=function e(t){var r;return null===(r=a.find((function(e){return e.value===t})))||void 0===r?void 0:r.name};if(!(e&&l)){P.next=50;break}Ee(l);I(l.name);M(l.description);f=i.data.conditionResponse.dataCondition.conditionData.qHyperCubeDef.qDimensions,p=void 0===f?[]:f;p[0]&&Le(p[0]);m=i.data.conditionResponse.dataCondition.conditionData;ke(m);k({type:"reset",newConditionData:m});h=l.recipients.userIds;b=h.filter((function(e){return e.value!==o.id})).map((function(e){return Zp(Zp({},e),{},{name:c(e.value)})}));g=h.find((function(e){return e.value===o.id}));y={shareWithOthers:b.filter((function(e){return e.subscribed})).length>0,selectedUsers:b,frequency:(null===l||void 0===l||null===(d=l.throttling)||void 0===d?void 0:d.recurrenceRule)?l.throttling.recurrenceRule:"RRULE:FREQ=SECONDLY",currentUser:g};Object(u["b"])("DATA_ALERTING_SCHEDULED_SCANS")&&(y.scheduler={triggerType:null===l||void 0===l?void 0:l.triggerType,recurrence:null===l||void 0===l||null===(w=l.scheduleOptions)||void 0===w?void 0:w.recurrence,timezone:null===l||void 0===l||null===(S=l.scheduleOptions)||void 0===S?void 0:S.timezone,startDateTime:null===l||void 0===l||null===(O=l.scheduleOptions)||void 0===O?void 0:O.startDateTime,endDateTime:null===l||void 0===l||null===(x=l.scheduleOptions)||void 0===x?void 0:x.endDateTime});Q({type:"reset",newDistributionState:y});P.next=28;return Yd["a"].createAlertBookmark(v("Alerting.Data.UseCurrentSelections"));case 28:j=P.sent;D=j.id;te({type:"setAlertBookmarkFromCurrentSelections",id:D});C=l.bookmarkId;if(!C){P.next=44;break}P.next=35;return yi["a"].get(C);case 35:q=P.sent;P.next=38;return q.getProperties();case 38:T=P.sent;te({type:"setAlertBookmarkFromAlert",bookmark:T});P.next=42;return Xd["a"].applyBookmark(C);case 42:P.next=49;break;case 44:P.next=46;return Ki["a"].get(E);case 46:A=P.sent;A.clearAll();te({type:"selectNone"});case 49:e&&z(true);case 50:case"end":return P.stop()}}),r)})));return function e(){return r.apply(this,arguments)}}();if(o&&r&&E){n();if(s)c();else{t();I(Xp["a"].generateUniqueName("Alerting.MyAlert",[]));i(v("Alerting.Data.UseCurrentSelections"))}}return function(){e=false}}),[r,E]);var Ve=function e(){var t;if(!L||!H)return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",className:f.loader},n.a.createElement(Ja["a"],{variant:"indeterminate",color:"primary",size:128}));switch(b){case 0:return n.a.createElement(Up,{name:q,confirmTitle:I,description:P,confirmDescription:M,conditionData:x,dispatchConditionData:k,sortedMeasures:ce,sortedDimensions:fe,setTemporaryCloseDialog:qe,selectionState:ee,dispatchSelectionState:te,chartHyperCubeDef:he,selectedDimensionFromEdit:Re,chartTitle:(null===l||void 0===l||null===(t=l.layout)||void 0===t?void 0:t.title)||v("Common.Untitled"),editMode:!!s});case 1:return n.a.createElement(Zc,{conditionData:x,dispatchConditionData:k,sortedDimensions:fe,sortedMeasures:ce,app:E,selectedAlertBookmark:ee.selectedAlertBookmark,setTemporaryCloseDialog:qe});case 2:return n.a.createElement(Gd,{distributionState:K,dispatchDistributionState:Q,userList:ne,editMode:!!s});default:return null}};var _e=function e(){switch(b){case 0:return!q.length>0||0===x.qHyperCubeDef.qMeasures.length;case 1:return!Yl(x);default:return false}};var Be=function e(){g(b+1)};var Fe=function e(t){var r=ee.selectedAlertBookmark,a=ee.alertBookmarkFromCurrentSelections,n=ee.bookmarkMap;t&&r===a||Yd["a"].removeById(a);Object.keys(n).forEach((function(e){t&&r===n[e]||Yd["a"].removeById(n[e])}));i();g(0);I("");M("");V(false);z(false);U("");Pe();te({type:"reset",newSelectionState:al});k({type:"reset",newConditionData:tl});Q({type:"reset",newDistributionState:rl})};var He=function e(){Pe(v(s?"Alerting.Error.GenericSave":"Alerting.Error.Generic"));U("")};var ze=function e(t){Pe();U(t)};Object(a["useEffect"])((function(){Pe();U("")}),[b]);var We=function(){var e=tv(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:ze(v(s?"Alerting.SavingAlert":"Alerting.CreatingAlert"));a.prev=1;t=null===we||void 0===we?void 0:we.conditionId;if(!(!s||!p["a"].isEqual(x,xe)||we.bookmarkId!==ee.selectedAlertBookmark)){a.next=10;break}a.next=6;return Gl({appId:E.id,conditionData:x,bookmarkId:ee.selectedAlertBookmark});case 6:r=a.sent;if(!r.data.errors){a.next=9;break}return a.abrupt("return",He());case 9:t=r.data.condition.dataCondition.conditionBase.id;case 10:if(s){a.next=15;break}a.next=13;return wl["a"].createAlert({name:q,description:P,app:E,user:o,distributionState:K,conditionId:t,sheetId:c,bookmarkId:ee.selectedAlertBookmark});case 13:a.next=17;break;case 15:a.next=17;return wl["a"].updateAlert({name:q,description:P,alertId:s,user:o,distributionState:K,originalAlert:we,bookmarkId:ee.selectedAlertBookmark,conditionId:t});case 17:Fe(true);return a.abrupt("return",d());case 21:a.prev=21;a.t0=a["catch"](1);return a.abrupt("return",He());case 24:case"end":return a.stop()}}),e,null,[[1,21]])})));return function t(){return e.apply(this,arguments)}}();var Ge=function e(){if(b===cv.length-1){var t;return n.a.createElement(nn["a"],{"data-testid":"alert-create-button",variant:"contained",color:"primary",disabled:$.length>0||(null===(t=K.scheduler)||void 0===t?void 0:t.invalid),onClick:We},v(s?"Common.Save":"Common.Create"))}return n.a.createElement(nn["a"],{"data-testid":"alert-next-button",variant:"contained",disabled:_e(),color:"primary",onClick:Be},v("Common.Next"))};return n.a.createElement(Oa["a"],{open:r&&!Ce,maxWidth:"sm",PaperProps:{className:f.dialog},"data-testid":"alert-dialog"},n.a.createElement(xa["a"],null,n.a.createElement(ka["a"],null,v(s?"Alerting.EditAlert":"Alerting.CreateAlert")),n.a.createElement(ja["a"],{onClick:function e(){return Fe(false)},id:"alerting-dialog-close"},n.a.createElement(qa["a"],null))),n.a.createElement(ml["a"],{className:f.stepper,activeStep:b,alternativeLabel:true},cv.map((function(e){return n.a.createElement(hl["a"],{key:e.label},n.a.createElement(bl["a"],{classes:{label:f.stepLabel}},e.label))}))),n.a.createElement(Da["a"],{className:f.content},Ve()),n.a.createElement(Za["a"],null,$&&n.a.createElement(n.a.Fragment,null,n.a.createElement(ka["a"],null,$),n.a.createElement(Ja["a"],{variant:"indeterminate",color:"primary",size:24})),Ae&&n.a.createElement(n.a.Fragment,null,n.a.createElement(gl["a"],{className:f.warningIcon}),n.a.createElement(ka["a"],null,Ae)),0===b?n.a.createElement(nn["a"],{"data-testid":"alert-cancel-button",variant:"outlined",disabled:$.length>0,onClick:function e(){return Fe(false)}},v("Common.Cancel")):n.a.createElement(nn["a"],{variant:"outlined",onClick:function e(){return g(b-1)}},v("Common.Back")),Ge()))};var dv=uv;function fv(e,t){return bv(e)||hv(e,t)||vv(e,t)||pv()}function pv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vv(e,t){if(!e)return;if("string"===typeof e)return mv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mv(e,t)}function mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function hv(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function bv(e){if(Array.isArray(e))return e}var gv=function(e){var t=e.user,r=e.alertId;var i=Object(a["useState"])(false),o=fv(i,2),l=o[0],c=o[1];var s=Object(a["useState"])(),u=fv(s,2),d=u[0],p=u[1];var v=Object(a["useState"])(),m=fv(v,2),h=m[0],b=m[1];var g=Object(a["useState"])(),y=fv(g,2),w=y[0],E=y[1];var S=Object(a["useState"])({open:false,text:""}),O=fv(S,2),x=O[0],k=O[1];var j=Object(C["c"])();var D=function e(){k({open:false,text:""})};Object(a["useEffect"])((function(){f["a"].subscribe("/alerting-dialog/open",(function(e){var t=e.sheet,r=e.obj;E(null);p(t.id);b(r);D();c(true)}));return function(){f["a"].unsubscribe("/alerting-dialog/open")}}),[]);Object(a["useEffect"])((function(){if(r){E(r);c(true)}}),[r]);var q=function e(){k(r?{open:true,text:j("Alerting.SavedAlert")}:{open:true,text:j("Alerting.CreatedAlert")})};return n.a.createElement(n.a.Fragment,null,n.a.createElement(dv,{open:l,closeDialog:function e(){c(false)},user:t,sheetId:d,originalObject:h,alertId:w,activateSnackbar:q}),n.a.createElement(pl,{settings:x,handleClose:D}))};var yv=r("vhuL");var wv=r("2vW9");var Ev=r("dJqr");var Sv=r("CXRx");var Ov=r("i1Hv");var xv=r("f5ww");var kv=r("TE91");var jv=Object(Ca["a"])((function(){return{tab:{overflow:"hidden"},innerTab:{height:"100%",overflow:"hidden",maxHeight:"inherit"}}}));var Dv=function e(t){var r=t.children,a=t.value,i=t.index,o=t.type;var l=jv();return n.a.createElement("div",{role:"tabpanel",className:"download-tab-content ".concat(l.tab),tid:"".concat(o),hidden:a!==i,id:"download-dialog-tabpanel-".concat(i),"aria-labelledby":"download-dialog-tab-".concat(i)},a===i&&n.a.createElement(vl["a"],{container:true,direction:"row",wrap:"nowrap",className:l.innerTab},r))};Dv.propTypes={children:s.a.node.isRequired,index:s.a.any.isRequired,value:s.a.any.isRequired};var Cv=Dv;var qv=Object(Ca["a"])((function(e){return{previewError:{color:e.palette.common.white,height:"100%"},previewLoading:{color:e.palette.common.white,height:"100%"},icon:{fontSize:"40px"}}}));var Iv=function e(t){var r=t.statusCode;var a=qv();var i=Object(C["c"])();var o=function e(){switch(r){case"413":return i("Download.Error.Selections");default:return i("Download.Error.Generic_2")}};return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",spacing:1,className:a.previewError},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{align:"center",gutterBottom:true},n.a.createElement(en["a"],{className:a.icon,size:"inherit"})),n.a.createElement(ka["a"],{variant:"h4",align:"center",gutterBottom:true},i("Download.Error.Generic_1")),n.a.createElement(ka["a"],{variant:"body1",align:"center"},o())))};var Tv=function e(){var t=qv();var r=Object(C["c"])();return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",spacing:1,className:t.previewError},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{align:"center",gutterBottom:true},n.a.createElement(en["a"],{className:t.icon,size:"inherit"})),n.a.createElement(ka["a"],{variant:"h4",align:"center",gutterBottom:true},r("Download.Image.Timeout")),n.a.createElement(ka["a"],{variant:"body1",align:"center"},r("Download.Error.Generic_2"))))};var Av=function e(){var t=qv();var r=Object(C["c"])();return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",spacing:1,className:t.previewError},n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{align:"center",gutterBottom:true},n.a.createElement(en["a"],{className:t.icon,size:"inherit"})),n.a.createElement(ka["a"],{variant:"h4",align:"center"},r("Download.PreviewNotAvailable"))))};var Pv=function e(){var t=qv();var r=Object(C["c"])();return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",spacing:1,className:t.previewLoading},n.a.createElement(vl["a"],{item:true},n.a.createElement(Ja["a"],{variant:"indeterminate",color:"primary",size:40})),n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"h4",align:"center"},r("ChartPreview.Generating"))))};var Mv=r("n7R4");var Nv=r("tdr+");function Rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function Lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rv(Object(r),true).forEach((function(t){Vv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vv(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var _v=100;var Bv=4e3;var Fv=8;var Hv=300;var zv=function e(t,r){return Mv["a"].calculateInitialDimensions(t,r,Mv["a"].getDpiMultiplierValue(t,r,Bv),Bv)};var Wv=function e(t,r){switch(r.type){case"setNewPercentageValue":return Lv(Lv({},t),{},{percentageValue:r.percentageValue});case"setEmptyPercentageValue":return Lv(Lv({},t),{},{percentageValue:"",percentageFallback:t.percentageValue,percError:true});case"setDefaultDataArea":return Lv(Lv({},t),{},{current:t.orig,percentageValue:_v});case"finishModifying":return Lv(Lv({},t),{},{prev:t.current,modifying:false});case"validateDimensionOk":var a=r.sizeVerifiedAgainstRange.value;var n=t.percentageValue;if(r.sizeVerifiedAgainstRange.error&&"max"===r.sizeVerifiedAgainstRange.errorType){n=Math.floor(t.current/t.orig*100);a=Math.floor(n/100*t.orig)}return Lv(Lv({},t),{},{current:a,percentageValue:n,fallback:t.current,percentageFallback:t.percentageValue,percError:false,modifying:t.prev!==a});case"validateDimensionError":return Lv(Lv({},t),{},{fallback:t.current,percentageFallback:t.percentageValue,percError:true});case"customSizeChange":return Lv(Lv({},t),{},{current:r.current,percentageValue:r.percentageValue});case"customSizeNotChange":return Lv(Lv({},t),{},{percentageValue:r.percentageValue,percError:false});default:return t}};var Gv=function e(t,r){var a=Mv["a"].verifyPercentage(t.percentageValue);var n=Math.floor(a.value/100*t.orig);var i=Mv["a"].verifySizeRange(n,8,Bv);a.error?r({type:"validateDimensionError"}):r({type:"validateDimensionOk",sizeVerifiedAgainstRange:i})};var $v=function e(t,r,a,n,i){if(!t&&i)return Mv["a"].verifySizeRange(i,r,a,n);return Mv["a"].verifySizeRange(t,r,a,n,i)};var Uv=function e(t,r){if(t)return Mv["a"].verifyPercentage(t);return Mv["a"].verifyPercentage(r)};function Yv(e,t){return Jv(e)||Zv(e,t)||Kv(e,t)||Xv()}function Xv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kv(e,t){if(!e)return;if("string"===typeof e)return Qv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qv(e,t)}function Qv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Zv(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Jv(e){if(Array.isArray(e))return e}var em=function e(t){var r=Object(a["useState"])(zv(t.currentWidth,t.currentHeight)),n=Yv(r,1),i=n[0];var o=function e(t){return{dimensionName:"width",orig:t,prev:t,current:t,fallback:t,percentageValue:_v,percentageFallback:_v,modifying:false,min:8,max:Bv}};var l=Object(a["useState"])(o(i.w),[i]),c=Yv(l,1),s=c[0];var u=Object(a["useState"])(o(i.h),[i]),d=Yv(u,1),f=d[0];return[s,f,i]};function tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function rm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(r),true).forEach((function(t){am(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function am(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var nm="#525659";var im=Nv["a"].getStates();var om={didFirstCall:false,printUrl:"",printFileName:"",state:im.IDLE,loadDataProps:{}};var lm=[0,1,2].map((function(){return om}));var cm=function e(t,r){switch(r.type){case"updateStatus":return t.map((function(e,t){if(t===r.tabIndex)return rm(rm({},e),{},{state:r.state,statusCode:r.statusCode,loadDataProps:r.loadDataProps,didFirstCall:true});return e}));case"updateResult":return t.map((function(e,t){if(t===r.tabIndex)return rm(rm({},e),{},{printUrl:r.printUrl,printFileName:r.printFileName,state:r.state,loadDataProps:r.loadDataProps,didFirstCall:true});return e}));case"updateTabProps":return t.map((function(e,t){if(t===r.tabIndex)return rm(rm({},e),{},{tabProps:r.tabProps});return e}));case"downloadFileError":return t.map((function(e,t){if(t===r.tabIndex)return rm(rm({},e),{},{state:im.FAILED});return e}));case"reset":return lm;default:return t}};function sm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function um(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(r),true).forEach((function(t){dm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dm(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function fm(e,t){return bm(e)||hm(e,t)||vm(e,t)||pm()}function pm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vm(e,t){if(!e)return;if("string"===typeof e)return mm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mm(e,t)}function mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function hm(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function bm(e){if(Array.isArray(e))return e}var gm=Object(Ca["a"])((function(e){return{previewContainer:{backgroundColor:nm,height:350,width:"100%"},previewDisabled:{opacity:.25},preview:{height:"100%",color:e.palette.common.white},previewImage:{maxWidth:420,maxHeight:270,transition:"opacity 0.5s ease-in-out"},previewContent:{padding:4,borderRadius:3,backgroundColor:e.palette.common.white,border:nm},previewText:{paddingBottom:2},previewSummaryText:{paddingTop:2,textAlign:"right"},formContainer:{width:"100%"},form:{padding:e.spacing(3)},formControls:{marginBottom:e.spacing(1)},dimensionControl:{width:"90%",alignSelf:"flex-end"},dimensionLabel:{fontSize:12},image:{height:200},formControlSelect:{width:"100%"},selectDataArea:{"& > div":{minWidth:106}}}}));var ym=Nv["a"].getStates();var wm=function e(t){var r,i,o,l,c;var s=t.tabState,u=t.onLoadData,d=t.onModifyTabProps,f=t.input;var p=Object(a["useState"])((null===s||void 0===s||null===(r=s.tabProps)||void 0===r?void 0:r.selectedDataArea)||"isDefault"),v=fm(p,2),m=v[0],h=v[1];var b=Object(a["useState"])(s.didFirstCall),g=fm(b,2),y=g[0],w=g[1];var E=Object(a["useState"])(false),S=fm(E,2),O=S[0],x=S[1];var k=em(f),j=fm(k,3),D=j[0],q=j[1],I=j[2];var T=Object(a["useState"])(I.dpi),A=fm(T,2),P=A[0],M=A[1];var N=Object(a["useState"])(false),R=fm(N,2),L=R[0],V=R[1];var _=gm();var B=Object(C["c"])();var F=f.currentDpi;var H=true;var z=Object(a["useReducer"])(Wv,(null===s||void 0===s||null===(i=s.tabProps)||void 0===i?void 0:i.width)?um({},null===s||void 0===s||null===(o=s.tabProps)||void 0===o?void 0:o.width):D),W=fm(z,2),G=W[0],$=W[1];var U=Object(a["useReducer"])(Wv,(null===s||void 0===s||null===(l=s.tabProps)||void 0===l?void 0:l.height)?um({},null===s||void 0===s||null===(c=s.tabProps)||void 0===c?void 0:c.height):q),Y=fm(U,2),X=Y[0],K=Y[1];Object(a["useEffect"])((function(){var e=G.modifying||X.modifying;x(e);d({selectedDataArea:m,width:G,height:X,isModifyingCustomSize:e})}),[m,G,X]);var Q=[{label:B("Download.Image.DataArea.Default"),value:"isDefault"},{label:B("Common.Custom"),value:"isCustom"}];var Z=function e(){var t=P||1;var r=$v(G.current,Fv,Bv,false,G.fallback).value*t;var a=$v(X.current,Fv,Bv,false,X.fallback).value*t;return"".concat(r," x ").concat(a," ").concat(B("Common.px"))};var J=function e(){V(false);var t={format:"png",minSize:Fv,width:G.current,height:X.current,dpi:P?Math.floor(F*P):F};u({input:f,print:t,maxDpi:Hv,imageCustomSize:H,dpiMultiplier:P})};Object(a["useEffect"])((function(){if(!y){J();w(true)}}),[]);var ee=function e(){$({type:"finishModifying"});K({type:"finishModifying"});J()};var te=function e(t){var r=String(t.target.value);h(r);if("isDefault"===r&&(G.current!==G.orig||X.current!==X.orig)){$({type:"setDefaultDataArea"});K({type:"setDefaultDataArea"});ee()}};var re=function e(){var t=$v(G.current,Fv,Bv,false,G.fallback).value;var r=Uv(G.percentageValue,G.percentageFallback).value;var a=$v(X.current,Fv,Bv,false,X.fallback).value;var n=Uv(X.percentageValue,X.percentageFallback).value;M(Mv["a"].getDpiMultiplierValue(t,a,Bv));if(G.prev!==t||X.prev!==a){$({type:"customSizeChange",current:t,percentageValue:r});K({type:"customSizeChange",current:a,percentageValue:n});ee()}else{$({type:"customSizeNotChange",percentageValue:r});K({type:"customSizeNotChange",percentageValue:n})}};var ae=function e(t){var r=Number.parseInt(t.target.value,10);if(r){M(Mv["a"].getDpiMultiplierValue(G.orig,X.orig,Bv));$({type:"setNewPercentageValue",percentageValue:r});Gv(um(um({},G),{},{percentageValue:r}),$)}else $({type:"setEmptyPercentageValue"})};var ne=function e(t){var r=Number.parseInt(t.target.value,10);if(r){M(Mv["a"].getDpiMultiplierValue(G.orig,X.orig,Bv));K({type:"setNewPercentageValue",percentageValue:r});Gv(um(um({},X),{},{percentageValue:r}),K)}else K({type:"setEmptyPercentageValue"})};var ie=function e(){return"isCustom"===m};var oe=function e(){V(true)};var le=function e(){return n.a.createElement(vl["a"],{container:true,"data-testid":"download-image-preview",direction:"column",justify:"center",alignItems:"center",className:"preview ".concat(_.preview," ").concat(O?_.previewDisabled:"")},n.a.createElement(vl["a"],{item:true,hidden:!L,className:"preview-content preview-content-image"},n.a.createElement(vl["a"],{item:true,className:_.previewText},B("Common.Preview")),n.a.createElement(vl["a"],{item:true,className:_.previewContent},n.a.createElement("img",{alt:"",className:_.previewImage,src:s.printUrl,onLoad:function e(){return oe()}})),n.a.createElement(vl["a"],{className:_.previewSummaryText,item:true},Z())))};var ce=function e(){return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"flex-start",alignItems:"center",spacing:1,className:_.form},n.a.createElement(vl["a"],{item:true,className:_.formControls},n.a.createElement(vl["a"],{container:true,direction:"column",spacing:1},n.a.createElement(vl["a"],{item:true},n.a.createElement(Pa["a"],{variant:"outlined",className:_.formControlSelect},n.a.createElement(Ma["a"],{"aria-label":B("Download.Image.DataArea.TooltipDetails")},n.a.createElement(ka["a"],{variant:"button"},B("Tooltip.Details"))),n.a.createElement(tc["a"],{value:m,onChange:te,variant:"outlined",fullWidth:true,"data-testid":"download-image-selected-data-area","aria-label":B("Tooltip.Details"),className:_.selectDataArea},Q.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value},e.label)}))))),ie()&&n.a.createElement(n.a.Fragment,null,n.a.createElement(vl["a"],{item:true,className:_.dimensionControl},n.a.createElement(Pa["a"],null,n.a.createElement(Ma["a"],null,n.a.createElement(ka["a"],{variant:"button",className:_.dimensionLabel},"".concat(B("Common.Width")," (%)"))),n.a.createElement(uc["a"],{onKeyUp:function e(t){t.target.value=t.target.value.replace(/\D/g,"")},error:G.percError,value:G.percentageValue,onChange:ae,onBlur:re,"aria-label":"".concat(B("Download.Aria.Image.CustomSizeWidth"),". ").concat(B("Download.Aria.Image.CustomSizeGeneral"))}))),n.a.createElement(vl["a"],{item:true,className:_.dimensionControl},n.a.createElement(Pa["a"],null,n.a.createElement(Ma["a"],null,n.a.createElement(ka["a"],{variant:"button",className:_.dimensionLabel},"".concat(B("Common.Height")," (%)"))),n.a.createElement(uc["a"],{onKeyUp:function e(t){t.target.value=t.target.value.replace(/\D/g,"")},error:X.percError,value:X.percentageValue,onChange:ne,onBlur:re,"aria-label":"".concat(B("Download.Aria.Image.CustomSizeHeight"),". ").concat(B("Download.Aria.Image.CustomSizeGeneral"))})))))),"isCustom"===m&&n.a.createElement(vl["a"],{item:true},B("Download.Image.DataArea.CustomHintDetails")))};return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",id:"download-image"},n.a.createElement(vl["a"],{item:true,className:_.previewContainer},s.state===ym.FAILED&&n.a.createElement(Iv,{statusCode:null===s||void 0===s?void 0:s.statusCode}),s.state===ym.TIMEOUT&&n.a.createElement(Tv,null),s.state===ym.COMPLETED&&le(),s.state===ym.PENDING&&n.a.createElement(Pv,null)),n.a.createElement(vl["a"],{item:true,className:_.formContainer},ce()))};var Em=wm;var Sm=r("Y2Hm");var Om=r("Fk5B");var xm=r("8QXK");function km(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?km(Object(r),true).forEach((function(t){Dm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):km(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dm(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Cm(e,t){return Pm(e)||Am(e,t)||Im(e,t)||qm()}function qm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Im(e,t){if(!e)return;if("string"===typeof e)return Tm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tm(e,t)}function Tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Am(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Pm(e){if(Array.isArray(e))return e}var Mm=400;var Nm=Object(Ca["a"])((function(e){return{previewContainer:{backgroundColor:nm,height:Mm,width:"100%"},preview:{width:"100%"},previewContent:{height:"100%",width:"100%",overflowScrolling:"touch",WebkitOverflowScrolling:"touch",overflow:"auto"},previewHidden:{opacity:"0!important",overflow:"hidden!important",visibility:"hidden"},previewEmbedPdf:{height:Mm,width:"100%",overflowScrolling:"touch",WebkitOverflowScrolling:"touch",overflow:"auto"},previewNotAvailable:{height:"100%",marginTop:-Mm},previewPreviewText:{color:e.palette.common.white},iframe:{border:"none",transition:"opacity 0.5s ease-in-out"},formContainer:{width:"100%"},form:{padding:e.spacing(3),marginBottom:e.spacing(1)},formControlSelect:{width:"100%"},formControlSelectPaperFormat:{marginBottom:e.spacing(1)}}}));var Rm=Nv["a"].getStates();var Lm=function e(t){var r,i,o,l;var c=t.tabState,s=t.onLoadData,u=t.onModifyTabProps,d=t.input;var f=Object(a["useState"])(xm["a"].getForPdf()),p=Cm(f,2),v=p[0],m=p[1];var h=Object(a["useState"])(c.didFirstCall),b=Cm(h,2),g=b[0],y=b[1];var w=v.paperFormat.options;var E=v.size.options;var S=Object(a["useState"])((null===c||void 0===c||null===(r=c.tabProps)||void 0===r?void 0:r.paperFormat)||w[1].name),O=Cm(S,2),x=O[0],k=O[1];var j=Object(a["useState"])(void 0!==(null===c||void 0===c||null===(i=c.tabProps)||void 0===i?void 0:i.size)?null===c||void 0===c||null===(o=c.tabProps)||void 0===o?void 0:o.size:v.size.options[1].value),D=Cm(j,2),q=D[0],I=D[1];var T=Object(a["useState"])((null===c||void 0===c||null===(l=c.tabProps)||void 0===l?void 0:l.orientation)||v.orientation.options[1].orientation),A=Cm(T,2),P=A[0],M=A[1];var N=Object(a["useState"])(false),R=Cm(N,2),L=R[0],V=R[1];var _=Nm();var B=Object(C["c"])();Object(a["useEffect"])((function(){u({paperFormat:x,size:q,orientation:P})}),[x,q,P]);var F=function e(t){var r=jm({},v);r.paperFormat.options=r.paperFormat.options.map((function(e){e.setLabel(t);return e}));m(r)};var H=function e(t){var r=t&&t.paperFormat||x;var a=t&&t.orientation||P;var n=t&&void 0!==t.size?t.size:q;var i={dpi:200,minDpi:72,maxDpi:300,fitCriteria:n};var o=w.find((function(e){return e.name===r}));s({input:d,print:i,selectedSize:o,selectedLayout:v.orientation.options.find((function(e){return e.orientation===a}))})};var z=function e(){if(!c.printUrl){V(true);return}try{var t=document.querySelector("iframe.preview-pdf").contentWindow.document.getElementsByTagName("body");t.length&&!t[0].children.length?V(true):V(false)}catch(e){V(false)}};Object(a["useEffect"])((function(){c.printUrl&&setTimeout((function(){z()}),1e3)}),[c.printUrl]);Object(a["useEffect"])((function(){if(!g){H({});y(true)}}),[]);var W=function e(t){H(t)};var G=function e(t){var r=t.target.value;M(r);F(r);W({orientation:r})};var $=function e(t){var r=t.target.value;I(r);W({size:r})};var U=function e(t){var r=t.target.value;k(r);W({paperFormat:r})};var Y=c.printUrl?"".concat(c.printUrl,"#zoom=42"):c.printUrl;var X=Object(a["useMemo"])((function(){return n.a.createElement("iframe",{title:"download-preview",width:"100%",height:"99%",tabIndex:"-1",frameBorder:"none",hidden:!c.printUrl,src:Y,className:"preview-pdf ".concat(_.iframe," ").concat(P===v.orientation.options[0].orientation?"preview-pdf-p":"preview-pdf-l"),tid:"download-preview",type:"application/pdf"})}),[c.printUrl]);var K=function e(){return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",spacing:1,className:"preview ".concat(c.state!==Rm.COMPLETED?_.previewHidden:"")},n.a.createElement(vl["a"],{item:true,className:"preview-content preview-content-pdf ".concat(_.preview)},n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",style:{height:"100%",width:"100%"}},n.a.createElement(vl["a"],{item:true,className:_.previewEmbedPdf},X,L&&n.a.createElement("div",{className:_.previewNotAvailable},n.a.createElement(Av,null))))))};var Q=function e(){return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"flex-start",alignItems:"center",spacing:1,className:_.form},n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,direction:"column",spacing:1},n.a.createElement(vl["a"],{item:true},n.a.createElement(Pa["a"],{variant:"outlined",className:"".concat(_.formControlSelect," ").concat(_.formControlSelectPaperFormat)},n.a.createElement(Ma["a"],null,n.a.createElement(ka["a"],{variant:"button"},B("Download.PDF.PaperFormat"))),n.a.createElement(tc["a"],{value:x,variant:"outlined",fullWidth:true,onChange:U,"aria-label":B("Download.Aria.PDF.PaperFormat")},w.map((function(e){return n.a.createElement(rc["a"],{value:e.name,key:e.name},e.label)}))))),n.a.createElement(vl["a"],{item:true},n.a.createElement(Pa["a"],null,n.a.createElement(Ma["a"],null,n.a.createElement(ka["a"],{variant:"button"},B("Download.PDF.Orientation"))),n.a.createElement(Sm["a"],{row:true,name:"Radio buttons",onChange:G,value:P,label:n.a.createElement(ka["a"],{variant:"button"},B(v.orientation.options[1].translationKey))},n.a.createElement(Jl["a"],{label:n.a.createElement(ka["a"],{variant:"body2"},B(v.orientation.options[1].translationKey)),value:v.orientation.options[1].orientation,control:n.a.createElement(Om["a"],{checked:P===v.orientation.options[1].orientation,tid:"download-pdf-".concat(v.orientation.options[1].orientation)})}),n.a.createElement(Jl["a"],{label:n.a.createElement(ka["a"],{variant:"body2"},B(v.orientation.options[0].translationKey)),value:v.orientation.options[0].orientation,control:n.a.createElement(Om["a"],{checked:P===v.orientation.options[0].orientation,tid:"download-pdf-".concat(v.orientation.options[0].orientation)})})))),n.a.createElement(vl["a"],{item:true},n.a.createElement(Pa["a"],{variant:"outlined",className:_.formControlSelect},n.a.createElement(Ma["a"],null,n.a.createElement(ka["a"],{variant:"button"},B("Download.PDF.Scale"))),n.a.createElement(tc["a"],{value:q,variant:"outlined",fullWidth:true,onChange:$,"aria-label":B("Download.Aria.PDF.Size")},E.map((function(e){return n.a.createElement(rc["a"],{value:e.value,key:e.value},e.label)}))))))))};return n.a.createElement(vl["a"],{container:true,direction:"column",justify:"center",alignItems:"center",id:"download-pdf"},n.a.createElement(vl["a"],{item:true,className:_.previewContainer},c.state===Rm.FAILED&&n.a.createElement(Iv,{statusCode:null===c||void 0===c?void 0:c.statusCode}),c.state===Rm.TIMEOUT&&n.a.createElement(Tv,null),c.state===Rm.PENDING&&n.a.createElement(Pv,null),K()),n.a.createElement(vl["a"],{item:true,className:_.formContainer},Q()))};var Vm=Lm;var _m=r("hIUR");function Bm(e,t){return Gm(e)||Wm(e,t)||Hm(e,t)||Fm()}function Fm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hm(e,t){if(!e)return;if("string"===typeof e)return zm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zm(e,t)}function zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Wm(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Gm(e){if(Array.isArray(e))return e}var $m=Object(Ca["a"])((function(e){return{root:{padding:e.spacing(4),height:400}}}));var Um=function e(t){var r=t.tabState,i=t.onLoadData,o=t.input;var l=Object(a["useState"])(r.didFirstCall),c=Bm(l,2),s=c[0],u=c[1];var d=Object(C["c"])();var f=$m();var p=function e(){var t={hasNoDataToExport:_m["a"].hasNoDataToExport(o.object.layout)};i({input:o,print:t})};Object(a["useEffect"])((function(){if(!s){p();u(true)}}),[]);return n.a.createElement(vl["a"],{container:true,justify:"center",alignItems:"center",className:f.root,id:"download-data"},n.a.createElement(vl["a"],{item:true},d("Download.Data.Message")))};var Ym=Um;function Xm(){Xm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return Xm.apply(this,arguments)}var Km=Object(Ca["a"])((function(e){return{warningButton:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main,"&:hover":{backgroundColor:e.palette.warning.light},"&:active":{backgroundColor:e.palette.warning.dark},"&.sprout-focus-visible":{borderColor:e.palette.warning.light,boxShadow:"0 0 0 3px ".concat(Object(an["d"])(e.palette.warning.light,.5))}}}}));var Qm=function e(t){var r=Km();var a=t.children;return n.a.createElement(nn["a"],Xm({},t,{className:r.warningButton}),a)};var Zm=Qm;var Jm=r("kXRb");var eh={image:null,pdf:null};var th=function e(t){var r=Nv["a"].getStates();var a=r.IDLE;var n="";var i="";var o=function e(r,o){a=r;t&&t(n,i,a,o)};var l=function e(t){var a=t?t.httpStatusCode:"";var n=t&&t.status;switch(n){case r.CANCELED:case r.TIMEOUT:o(n,a);break;default:o(r.FAILED,a);break}};var c=function e(t){var c=t.exportType,s=t.input,u=t.print,d=t.minDpi,f=t.maxDpi,p=t.imageCustomSize,v=t.dpiMultiplier,m=t.selectedSize,h=t.selectedLayout;if("data"===c&&u.hasNoDataToExport){o(r.NODATA);return false}if(s.object){var b;var g;var y;var w=u;var E=u.minSize?u.minSize:8;w.width<E&&(w.width=E);w.height<E&&(w.height=E);w.dpi<d&&(w.dpi=d);w.dpi>f&&(w.dpi=f);var S=function e(){return{width:s.currentWidth,height:s.currentHeight,dpi:s.currentDpi}};var O=S();var x={width:Math.round(O.width),height:Math.round(O.height),dpi:O.dpi};var k=p?{width:w.width,height:w.height,dpi:w.dpi}:{width:s.currentWidth,height:s.currentHeight,dpi:s.currentDpi};var j={width:Math.round(k.width*(s.currentDpi/k.dpi)),height:Math.round(k.height*(s.currentDpi/k.dpi))};b={};"image"===c&&(b={imageType:w.format,captureSize:k,scaleFactor:v});if("pdf"===c){g=m.toMillimeters();y={right:10,left:10,top:10,bottom:10};b={width:g["portrait"===h.orientation?"w":"h"],height:g["portrait"===h.orientation?"h":"w"],dpi:w.dpi,fitCriteria:w.fitCriteria,margin:y,sourceSize:x,size:m,orientation:h.orientation}}b.timeoutMsec=12e4;b.checkInterval=2e3;o(r.PENDING);"data"===c&&(b.timeoutMsec=48e4);switch(c){case"image":clearTimeout(eh.image);break;case"pdf":clearTimeout(eh.pdf);break;default:break}return Nv["a"].requestDownload(s.object,b,c,x,j,s.sourceType).then((function(e){n=e.qUrl;i=Nv["a"].getFileName(s.sourceType);var t=setTimeout((function(){o(r.COMPLETED)}),1e3);switch(c){case"image":eh.image=t;break;case"pdf":eh.pdf=t;break;default:break}return{printUrl:n,printFileName:i,state:a}}),l)}throw new Error("null input object")};return{confirm:c}};var rh={create:th};var ah=r("ydY7");function nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function ih(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nh(Object(r),true).forEach((function(t){oh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oh(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function lh(e,t){return fh(e)||dh(e,t)||sh(e,t)||ch()}function ch(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sh(e,t){if(!e)return;if("string"===typeof e)return uh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uh(e,t)}function uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function dh(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function fh(e){if(Array.isArray(e))return e}var ph=Object(Ca["a"])((function(e){return{dialogContent:{padding:0,display:"flex",flexDirection:"column"},tabs:{width:"100%"},tabsContent:{overflow:"auto"},tab:{minWidth:80,"& > span":{minWidth:90,"& > i":{marginRight:e.spacing(1)}}},errorText:{color:e.palette.error.main},bottomCircularProgress:{overflow:"hidden"}}}));var vh=Nv["a"].getStates();var mh=function e(t,r){var a={sourceType:t};"visualization"===t&&(a.chartType=ah["a"].get(r));return a};var hh=function e(t){var r=t.show,i=t.onClose,o=t.sourceType,l=t.sheet,c=t.object,s=t.width,u=t.height;var d=Object(a["useState"])(0),f=lh(d,2),p=f[0],v=f[1];var m=Object(a["useReducer"])(cm,lm),h=lh(m,2),b=h[0],g=h[1];var y=Object(a["useState"])(false),w=lh(y,2),E=w[0],S=w[1];var O=ph();var x=Object(C["c"])();var k=function e(){g({type:"reset"})};Object(a["useEffect"])((function(){if(true===r){k();v(0);var e=mh(o,c);Sn["a"].trackEvent(Sn["a"].customEvents.DOWNLOAD_DIALOG_OPEN,e)}}),[r]);var j=function e(){return"sheet"===o};var D=j()?x("GlobalMenu.DownloadSheetToPdf"):x("Download.Title");var q=function e(t){if(0===p)return b[p].state===t;return b[p].state===t};Object(a["useEffect"])((function(){j()&&v(1)}),[o]);var I=function e(t,r){v(r)};var T=function e(t,r){0===t&&S(null===r||void 0===r?void 0:r.isModifyingCustomSize);g({type:"updateTabProps",tabIndex:t,tabProps:r})};var A=Object(Jm["a"])();var P=Object(a["useMemo"])((function(){var e;l&&(e=l.isCustomSize()?document.querySelector("#grid"):document.querySelector(".qvt-sheet > .sheet-grid"));return e}),[l]);var M=Object(a["useMemo"])((function(){if(j())return Math.round((null===P||void 0===P?void 0:P.clientWidth)||960);return s}),[P,s]);var N=Object(a["useMemo"])((function(){if(j())return Math.round((null===P||void 0===P?void 0:P.clientHeight)||720);return u}),[P,u]);var R={object:c,sourceType:o||"visualization",currentWidth:M,currentHeight:N,currentDpi:A};var L=[{index:0,exportType:"image",fileType:"png",ariaLabel:"".concat(x("Download.Aria.TabCurrentlyOnImage")," ").concat(x("Download.Aria.TabImage")),pendingLabel:"".concat(x("Download.Image.Pending")),label:x("Download.Image.TabTitle"),icon:n.a.createElement(Ov["a"],null)},{index:1,exportType:"pdf",fileType:"pdf",ariaLabel:"".concat(x("Download.Aria.TabCurrentlyOnPDF")," ").concat(x("Download.Aria.TabPDF")),pendingLabel:"".concat(x("Download.PDF.Pending")),label:x("Download.PDF.TabTitle"),icon:n.a.createElement(kv["a"],null)},{index:2,exportType:"data",fileType:"xlsx",ariaLabel:"".concat(x("Download.Aria.TabCurrentlyOnData")," ").concat(x("Download.Aria.TabData")),pendingLabel:"".concat(x("Download.Data.Pending")),label:x("Common.Data"),icon:n.a.createElement(xv["a"],null)}];var V=function e(){Nv["a"].cancel();i()};var _=function e(t,r){var a=rh.create((function(e,a,n,i){return g({type:"updateStatus",tabIndex:t,state:n,statusCode:i,loadDataProps:r})}));return a.confirm(ih({exportType:L[t].exportType},r)).then((function(e){if(e){var a=e.printUrl,n=e.printFileName,i=e.state;g({type:"updateResult",tabIndex:t,printUrl:a,printFileName:n,state:i,loadDataProps:r})}}))};var B=function e(){var t=b[p].printUrl;var r=b[p].printFileName;var a=L[p].fileType;var n=mh(o,c);n.fileType=a;Sn["a"].trackEvent(Sn["a"].customEvents.DOWNLOAD_CONFIRMED,n);var i=function e(){g({type:"downloadFileError",tabIndex:p})};Nv["a"].downloadFile(t,r,a,i)};var F=function e(){_(p,b[p].loadDataProps)};var H=function e(t){switch(t){case 0:return n.a.createElement(Em,{onLoadData:function e(r){return _(t,r)},onModifyTabProps:function e(r){return T(t,r)},tabState:b[t],input:R,object:c});case 1:return n.a.createElement(Vm,{onLoadData:function e(r){return _(t,r)},onModifyTabProps:function e(r){return T(t,r)},tabState:b[t],input:R});case 2:return n.a.createElement(Ym,{onLoadData:function e(r){return _(t,r)},tabState:b[t],input:R});default:return null}};return n.a.createElement(Oa["a"],{tid:"download-dialog","data-testid":"download-dialog",open:r,maxWidth:"sm",fullWidth:true},n.a.createElement(xa["a"],{className:O.dialogTitle,disableTypography:true},n.a.createElement(ka["a"],{variant:"h5"},D),n.a.createElement(ja["a"],{onClick:V,"data-testid":"download-dialog-close",tid:"download-cancel"},n.a.createElement(qa["a"],null))),n.a.createElement(Da["a"],{"data-testid":"download-dialog-content",className:O.dialogContent},!j()&&n.a.createElement(wv["a"],{position:"static"},n.a.createElement(Ev["a"],{value:p,onChange:I,centered:true,className:O.tabs},L.map((function(e){return n.a.createElement(Sv["a"],{key:e.index,id:"download-".concat(e.exportType,"-tab"),tid:"download-".concat(e.exportType,"-tab"),"aria-label":e.ariaLabel,label:n.a.createElement(ka["a"],{variant:"button"},e.label),icon:e.icon,className:O.tab})})))),n.a.createElement(vl["a"],{className:O.tabsContent},L.map((function(e){return n.a.createElement(Cv,{key:e.index,value:p,index:e.index,type:e.exportType},H(e.index))})))),n.a.createElement(Za["a"],{className:O.dialogFooter},q(vh.PENDING)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(vl["a"],{item:true},n.a.createElement(ka["a"],{variant:"body2"},L[p].pendingLabel)),n.a.createElement(vl["a"],{item:true},n.a.createElement(Ja["a"],{variant:"indeterminate",color:"primary",size:20,className:O.bottomCircularProgress}))),2===p&&n.a.createElement(n.a.Fragment,null,(q(vh.FAILED)||q(vh.TIMEOUT))&&n.a.createElement(ka["a"],{variant:"body2",className:O.errorText},x("Download.Error.Generic_1"),"."),(q(vh.FAILED)||q(vh.TIMEOUT))&&n.a.createElement(ka["a"],{variant:"body2",className:O.errorText},x("Download.Error.Generic_2"),"."),q(vh.NODATA)&&n.a.createElement(ka["a"],{variant:"body2",className:O.errorText},x("Download.Data.NoData"),".")),(q(vh.COMPLETED)||q(vh.PENDING)||q(vh.NODATA))&&n.a.createElement(vl["a"],{item:true},n.a.createElement(nn["a"],{variant:"contained",color:"primary",disabled:q(vh.PENDING)||q(vh.NODATA)||E,"data-testid":"download-dialog-download-button","aria-label":x("Download.Aria.DownloadButton"),onClick:B},x("Download.Title"))),(q(vh.FAILED)||q(vh.TIMEOUT))&&n.a.createElement(Zm,{variant:"contained","data-testid":"download-dialog-try-again-button","aria-label":x("Download.Aria.TryAgainButton"),onClick:F},x("Common.TryAgain"))))};var bh=hh;function gh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function yh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gh(Object(r),true).forEach((function(t){wh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wh(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Eh(e,t){return jh(e)||kh(e,t)||Oh(e,t)||Sh()}function Sh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oh(e,t){if(!e)return;if("string"===typeof e)return xh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xh(e,t)}function xh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function kh(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function jh(e){if(Array.isArray(e))return e}var Dh=function e(){var t=Object(a["useState"])({show:false}),r=Eh(t,2),i=r[0],o=r[1];var l=function e(t){o(yh(yh({},t),{},{show:!i.show}))};Object(a["useEffect"])((function(){f["a"].subscribe("/download-dialog/open",l);return function(){f["a"].unsubscribe("/download-dialog/open",l)}}),[]);return n.a.createElement(bh,{onClose:l,onEscape:l,show:i.show,sourceType:null===i||void 0===i?void 0:i.sourceType,sheet:null===i||void 0===i?void 0:i.sheet,object:null===i||void 0===i?void 0:i.object,width:null===i||void 0===i?void 0:i.w,height:null===i||void 0===i?void 0:i.h})};var Ch=Dh;function qh(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Ih(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){qh(i,a,n,o,l,"next",e)}function l(e){qh(i,a,n,o,l,"throw",e)}o(void 0)}))}}function Th(e,t){return Rh(e)||Nh(e,t)||Ph(e,t)||Ah()}function Ah(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ph(e,t){if(!e)return;if("string"===typeof e)return Mh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mh(e,t)}function Mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Nh(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Rh(e){if(Array.isArray(e))return e}var Lh=function e(t){var r=t.sheet,i=t.state,o=t.args;var c=Object(a["useState"])(false),s=Th(c,2),d=s[0],f=s[1];var v=Object(a["useState"])(null),m=Th(v,2),h=m[0],b=m[1];var g=Object(a["useState"])([]),y=Th(g,2),w=y[0],E=y[1];var S=p["a"].getParameterByName("alert",void 0,o);Object(a["useEffect"])((function(){var e=false;l["a"].setView(l["a"].Views.sheet);l["a"].setSheet(r,i);ie["a"].setBeforeUnloadFunctions(null,true);var t=function(){var t=Ih(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function t(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return ne["a"].apply(o);case 2:r=i.sent;a=r._errors;n=void 0===a?[]:a;if(!e){f(true);E(n)}case 6:case"end":return i.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();var a=function(){var t=Ih(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function t(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return Object(yv["a"])();case 2:r=a.sent;a.next=5;return wl["a"].load(r);case 5:e||b(r);case 6:case"end":return a.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();t();Object(u["b"])("DATA_ALERTING")&&a();return function(){ie["a"].unsetBeforeUnloadFunctions();document.body.classList.remove("qv-story-disabled");document.body.classList.remove("qv-view-sheet");e=true}}),[]);Object(a["useEffect"])((function(){l["a"].setSheet(r,i)}),[r,i]);if(!d)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(oa,null),n.a.createElement(ai,null),Object(u["b"])("CHART_MONITORING")&&n.a.createElement(ni["a"],null),n.a.createElement(Ho,null),Object(u["b"])("DATA_ALERTING")&&wl["a"].isAlertingActive()&&h&&n.a.createElement(gv,{user:h,alertId:S}),w.length>0&&n.a.createElement(Qo,{message:w[0],key:w[0]}),Object(u["b"])("DOWNLOAD_DIALOG_REACT")&&n.a.createElement(Ch,null))};Lh.propTypes={sheet:s.a.object.isRequired,state:s.a.string.isRequired,args:s.a.string};Lh.defaultProps={args:""};var Vh=Lh;function _h(){_h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return _h.apply(this,arguments)}var Bh=a["createElement"]("defs",null,a["createElement"]("path",{d:"M9.03 7.97c.088.02.178.03.27.03.2 0 .5-.1.7-.2V8c0 1.1-.9 2-2 2-.293 0-.571-.064-.822-.178l-1.46 1.46C6.359 11.76 7.149 12 8 12c1.1 0 2.1-.4 2.8-1.2.8-.7 1.2-1.7 1.2-2.8 0-.851-.24-1.643-.719-2.281L9.03 7.97zm-1-1l2.251-2.251C9.643 4.239 8.851 4 8 4c-1.1 0-2.1.4-2.8 1.2C4.4 5.9 4 6.9 4 8c0 .851.24 1.643.719 2.281l1.459-1.459A1.982 1.982 0 016 8c0-1.1.9-2 2-2h.2c-.1.2-.2.4-.2.7 0 .092.01.182.03.27zM14.5.5a.707.707 0 111 1l-2.573 2.573c.347.303.667.617.961.927.8.857 1.527 1.886 2.11 3a13.792 13.792 0 01-2.11 3c-1.381 1.457-3.344 3-5.89 3-1.453 0-2.717-.503-3.791-1.207L1.5 15.5a.707.707 0 11-1-1l2.572-2.572A14.046 14.046 0 012.109 11 13.792 13.792 0 010 8a13.792 13.792 0 012.109-3c1.381-1.457 3.345-3 5.89-3 1.454 0 2.719.504 3.793 1.208L14.5.5z",id:"Hidden_sheet_svg__a"}));var Fh=a["createElement"]("g",{fill:"none",fillRule:"evenodd"},a["createElement"]("path",{d:"M107.538 7.54v8.49a5.093 5.093 0 005.093 5.092h8.49",stroke:"#55565C",strokeLinecap:"round",strokeLinejoin:"round"}),a["createElement"]("path",{d:"M.75 38.1V7.54A6.792 6.792 0 017.541.749h100.58c1.801 0 3.528.716 4.802 1.99l12.999 13a6.79 6.79 0 011.989 4.8v58.308c0 3.75-3.04 6.79-6.791 6.79H7.541a6.792 6.792 0 01-6.791-6.79S1.09 38.1.75 38.1z",stroke:"#55565C",strokeLinecap:"round",strokeLinejoin:"round"}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",d:"M20.94 91.076v1.5"}),a["createElement"]("path",{d:"M20.94 95.588v4.858c0 2.454 1.873 4.442 4.184 4.442h118.531c2.31 0 4.183-1.988 4.183-4.442V24.517c0-2.453-1.873-4.442-4.183-4.442h-7.81",stroke:"#009A4D",strokeLinecap:"round",strokeDasharray:3.012}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",d:"M134.339 20.076h-1.5"}),a["createElement"]("path",{d:"M63.95 58.42c-8.623 0-15.61-6.988-15.61-15.609 0-8.622 6.987-15.61 15.61-15.61 8.62 0 15.608 6.988 15.608 15.61 0 8.621-6.988 15.61-15.609 15.61z",stroke:"#55565C"}),a["createElement"]("g",{transform:"translate(55.964 34.81)"},a["createElement"]("mask",{id:"Hidden_sheet_svg__b",fill:"#fff"},a["createElement"]("use",{xlinkHref:"#Hidden_sheet_svg__a"})),a["createElement"]("use",{fill:"#000",fillRule:"nonzero",xlinkHref:"#Hidden_sheet_svg__a"}),a["createElement"]("g",{mask:"url(#Hidden_sheet_svg__b)",fill:"#404040"},a["createElement"]("path",{d:"M0 0h16v16H0z"}))));function Hh(e){return a["createElement"]("svg",_h({width:149,height:106},e),Bh,Fh)}var zh="../../img/core/Hidden_sheet.04eb93939e192efd964975e6255fdf12.svg";var Wh=function e(t){var r=t.title,a=t.message,i=t.children;return n.a.createElement("div",{className:"qs-view-error qs-view-error__align"},n.a.createElement("div",{className:"qs-view-error__center"},n.a.createElement("div",{className:"qs-view-error__image",tid:"errorMsgHiddenSheet"},n.a.createElement(Hh,null)),n.a.createElement("div",{className:"qs-view-error__title"},r),n.a.createElement("div",{className:"qs-view-error__message"},a),n.a.createElement("div",null,i)))};Wh.propTypes={message:s.a.string.isRequired,title:s.a.string.isRequired,children:s.a.node.isRequired};var Gh=Wh;var $h=r("+PUV");function Uh(e,t){return Zh(e)||Qh(e,t)||Xh(e,t)||Yh()}function Yh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xh(e,t){if(!e)return;if("string"===typeof e)return Kh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kh(e,t)}function Kh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Qh(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Zh(e){if(Array.isArray(e))return e}function Jh(e,t){l["a"].setState(l["a"].States.analysis);o["a"].deactivateCell();k["a"].setSheet(e.qInfo.qId,Object.keys(l["a"].States)[l["a"].States.analysis],t,null)}function eb(e){l["a"].setView(l["a"].Views.sheet);k["a"].setSheet(null,null,e,null);y["a"].setNavigationMode(y["a"].NavigationMode.sheet);q["a"].goToOverview()}function tb(e){var t=e.urlParameters;var r=p["a"].getParameterByName("app");var o=k["a"].analysis(r).state||"analysis";var c=Uh(t,3),s=c[0],f=c[1],v=void 0===f?o:f,m=c[2];var h=Object(F["a"])(p["a"].getParameterByName("app")),b=Uh(h,1),g=b[0];var y=Object(H["a"])(g),w=Uh(y,1),E=w[0];var S=Object(z["a"])(s,g),O=Uh(S,2),x=O[0],j=O[1];var D=Object(W["a"])(x),C=Uh(D,2),q=C[0],I=C[1];var T=Object($h["a"])();Object(a["useEffect"])((function(){if(x){var e=p["a"].getParameterByName("overlay");k["a"].setSheet(x.id,v,r,e)}else k["a"].setSheet(null,v,r,null)}),[x]);Object(a["useEffect"])((function(){if(E){var e="*"===document.title[0]?"*":"";var t="".concat(d["default"].get("Common.Sheet")," - ").concat(d["default"].get("Title.QlikView"));if(q){var r=q.labelExpression||q.qMeta.title;document.title="".concat(e," ").concat(E.qTitle," - ").concat(r," | ").concat(t," ")}else document.title="".concat(e," ").concat(E.qTitle," | ").concat(t," ")}}),[E,q]);if(j||I){var A=d["default"].get("Fullscreen.Button.ToAppOverview");"Fullscreen.Button.ToAppOverview"===A&&(A=d["default"].get("NavigationMenu.AppOverview"));return n.a.createElement(ae["a"],{title:d["default"].get("Error.SheetNotFound.Title"),message:d["default"].get("Error.SheetNotFound.Message")},n.a.createElement("div",{style:{marginTop:"15px"}},n.a.createElement(i["a"],{onClick:function e(){return eb(r)},tid:"goToAppOverviewMsg"},A)))}if(q&&Object(u["b"])("SHEET_SHOW_CONDITION")&&"sheet"===q.qInfo.qType&&q.showCondition&&l["a"].state!==l["a"].States.edit&&!p["a"].evaluateCondition(q.showCondition)){var P=d["default"].get("Fullscreen.Button.ToAppOverview");"Fullscreen.Button.ToAppOverview"===P&&(P=d["default"].get("NavigationMenu.AppOverview"));return n.a.createElement(Gh,{title:d["default"].get("Error.SheetHidden.Title"),message:d["default"].get("Error.SheetHidden.Message")},n.a.createElement("div",{style:{marginTop:"15px"}},n.a.createElement(i["a"],{onClick:function e(){return eb(r)},tid:"goToAppOverviewMsg"},P)))}if(T&&"edit"===v)return n.a.createElement(re["a"],null,n.a.createElement("div",{style:{marginTop:"15px"}},n.a.createElement(i["a"],{onClick:function e(){return Jh(q,r)}},d["default"].get("Fullscreen.Button.ToAnalyze"))));if(!x)return null;return n.a.createElement(Vh,{sheet:x,state:v,args:m})}tb.propTypes={urlParameters:s.a.array.isRequired};var rb=tb;var ab=r("R2Yu");var nb=r("I3M1");var ib=r("9ZdW");var ob=r("xIA9");var lb=r("gh04");var cb=r("RKW3");var sb=r("NFAh");function ub(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function db(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){ub(i,a,n,o,l,"next",e)}function l(e){ub(i,a,n,o,l,"throw",e)}o(void 0)}))}}function fb(e,t){return bb(e)||hb(e,t)||vb(e,t)||pb()}function pb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vb(e,t){if(!e)return;if("string"===typeof e)return mb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mb(e,t)}function mb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function hb(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function bb(e){if(Array.isArray(e))return e}function gb(e){var t=Object(a["useState"])(),r=fb(t,2),n=r[0],i=r[1];Object(a["useEffect"])((function(){var t=false;var r=function(){var r=db(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function r(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return sb["a"].hasShareMode(e);case 2:a=n.sent;t||i(a);case 4:case"end":return n.stop()}}),r)})));return function e(){return r.apply(this,arguments)}}();e&&r();return function(){t=true}}),[e]);return n}function yb(e,t){return xb(e)||Ob(e,t)||Eb(e,t)||wb()}function wb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Eb(e,t){if(!e)return;if("string"===typeof e)return Sb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sb(e,t)}function Sb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ob(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function xb(e){if(Array.isArray(e))return e}function kb(e){return e&&Object(u["b"])("SHEET_SHOW_CONDITION")&&!(l["a"].state===l["a"].States.analysis&&!p["a"].evaluateCondition(e.showCondition))}var jb=function e(t){var r=t.urlParameters,a=t.closeMenu,i=t.disabled;var c=Object(C["c"])();var s=yb(r,1),d=s[0];var v=Object(F["a"])(p["a"].getParameterByName("app")),m=yb(v,1),b=m[0];var g=Object(H["a"])(b),y=yb(g,1),w=y[0];var E=Object(z["a"])(d,b),S=yb(E,1),O=S[0];var x=Object(W["a"])(O),k=yb(x,1),j=k[0];var D=gb(w);if(!j)return null;var q=[];var I=j.permissions.publish&&j.qMeta&&!j.qMeta.published;if(I){var T=D?"GlobalMenu.SharedSpace.ApproveSheet":"GlobalMenu.PublishSheet";q.push(n.a.createElement(cb["a"],{key:D?"approve":"publish",tid:T,iconName:"publish",title:c(T),disabled:i,onSelect:function e(){ob["a"].openPublishDialog(l["a"],b,null,D);a()}},c(T)))}var A=!Object(u["b"])("DOWNLOAD_USE_REPORTING")&&w.permissions.exportData;if(A){var P="GlobalMenu.DownloadSheetToPdf";var M="download";q.push(n.a.createElement(cb["a"],{key:"exportToPdf",tid:"GlobalMenu.ExportSheetToPdf",iconName:M,title:c(P),disabled:i,onSelect:function e(){nb["a"].showForGlobalMenu(l["a"],"Pdf","Sheet");a()}},c(P)))}var N=Object(u["b"])("DOWNLOAD_USE_REPORTING")&&Object(u["b"])("DOWNLOAD_SHEET");N&&q.push(n.a.createElement(cb["a"],{key:"downloadToPdf",tid:"GlobalMenu.DownloadSheetToPdf",iconName:"download",title:c("GlobalMenu.DownloadSheetToPdf"),disabled:i,onSelect:function e(){if(Object(u["b"])("DOWNLOAD_DIALOG_REACT")){var t=o["a"].getGrid();var r="sheet";f["a"].publish("/download-dialog/open",{sourceType:r,object:t,sheet:O});a()}else{ib["a"].showForGlobalMenu(O,o["a"].getGrid());a()}}},c("GlobalMenu.DownloadSheetToPdf")));var R=w.permissions.createSheet;R&&q.push(n.a.createElement(cb["a"],{key:"duplicate",tid:"GlobalMenu.DuplicateSheet",iconName:"copy",title:c("GlobalMenu.DuplicateSheet"),disabled:i,onSelect:function e(){Object(G["a"])(O,true);a()}},c("GlobalMenu.DuplicateSheet")));var L=w.published&&j.qMeta&&j.qMeta.published&&!j.qMeta.approved&&-1!==j.qMeta.privileges.indexOf("approve");L&&q.push(n.a.createElement(cb["a"],{key:"approve",tid:"GlobalMenu.ApproveSheet",iconName:"approve",title:c("GlobalMenu.ApproveSheet"),disabled:i,onSelect:function e(){O.approve();a()}},c("GlobalMenu.ApproveSheet")));var V=w.published&&j.qMeta&&j.qMeta.published&&j.qMeta.approved&&-1!==j.qMeta.privileges.indexOf("approve");V&&q.push(n.a.createElement(cb["a"],{key:"unapprove",tid:"GlobalMenu.UnapproveSheet",iconName:"unapprove",title:c("GlobalMenu.UnapproveSheet"),disabled:i,onSelect:function e(){O.unApprove();a()}},c("GlobalMenu.UnapproveSheet")));var _=j.permissions.publish&&j.qMeta.published&&!j.qMeta.approved;if(_){var B=c(D?"GlobalMenu.SharedSpace.UnapproveSheet":"GlobalMenu.UnpublishSheet");q.push(n.a.createElement(cb["a"],{key:D?"unapprove":"unpublish",tid:B,iconName:"publish",title:c(B),disabled:i,onSelect:function e(){ob["a"].openUnpublishDialog(l["a"],O,null,D);a()}},c(B)))}var $=j.qMeta&&!j.qMeta.published&&j.permissions.remove;$&&q.push(n.a.createElement(cb["a"],{key:"delete",tid:"GlobalMenu.DeleteSheet",iconName:"bin",title:c("GlobalMenu.DeleteSheet"),disabled:i,onSelect:function e(){var t=j.qInfo.qId;var r=j.labelExpression||j.qMeta.title;var n=h["default"].getService("qvConfirmDialog");n.show({title:c("AppOverView.Confirm.Title.Sheet"),message:c("AppOverView.Confirm.Description.Sheet",ab["a"].encodeForHTML(r)),cancelLabel:c("Common.Cancel"),okLabel:c("Common.Delete")}).closed.then((function(e){e&&lb["a"].remove(t)}));a()}},c("GlobalMenu.DeleteSheet")));var U=Object(u["b"])("SINGLE_CONFIG");U&&(!kb(j)&&Object(u["b"])("SHEET_SHOW_CONDITION")||q.push(n.a.createElement(cb["a"],{key:"embed",tid:"i9fd7",title:c("GlobalMenu.EmbedSheet"),disabled:i,iconName:"code",onSelect:function e(){f["a"].publish("/embed-dialog/open",{type:"sheet",objectId:O.id});a()}},c("GlobalMenu.EmbedSheet"))));return n.a.createElement(n.a.Fragment,null,q)};jb.propTypes={urlParameters:s.a.array.isRequired,disabled:s.a.bool.isRequired,closeMenu:s.a.func.isRequired};var Db=jb;var Cb=r("rVGN");var qb=r("xkWc");var Ib=r("t9Fd");var Tb=r("CIhp");function Ab(e){return Rb(e)||Nb(e)||Mb(e)||Pb()}function Pb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mb(e,t){if(!e)return;if("string"===typeof e)return Lb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lb(e,t)}function Nb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Rb(e){if(Array.isArray(e))return Lb(e)}function Lb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Vb(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function _b(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Vb(i,a,n,o,l,"next",e)}function l(e){Vb(i,a,n,o,l,"throw",e)}o(void 0)}))}}var Bb="$";var Fb;var Hb=function(){var e=_b(regeneratorRuntime.mark((function e(t,r){var a;var n,i,o;return regeneratorRuntime.wrap((function e(l){while(1)switch(l.prev=l.next){case 0:n=null===(a=Fb)||void 0===a?void 0:a.filter((function(e){return e!==Bb}));i=!Fb||(null===n||void 0===n?void 0:n.length)!==r.qStateNames.length||!n.every((function(e,t){return e===r.qStateNames[t]}));if(!i){l.next=9;break}Fb=[Bb].concat(Ab(r.qStateNames));l.next=6;return t.getProperties();case 6:o=l.sent;o.selectionsInStates=Fb.map((function(e){return{stateName:e,qSelectionObjectDef:{qStateName:e}}}));t.setProperties(o);case 9:case"end":return l.stop()}}),e)})));return function t(r,a){return e.apply(this,arguments)}}();var zb=r("WZK1");var Wb=r("P7uq");var Gb=function e(t){var r=t;if(Object(u["b"])("SHEET_SHOW_CONDITION")){var a=I["a"].Sheets.currentIndex(t);r=I["a"].filterSheets(t,t[a])}return{getPreviousSheetId:function e(){var t=I["a"].Sheets.getPrevious(r);return t?t.qInfo.qId:""},getNextSheetId:function e(){var t=I["a"].Sheets.getNext(r);return t?t.qInfo.qId:""},getPreviousSheetTooltip:function e(){var t=I["a"].Sheets.getPrevious(r);return(null===t||void 0===t?void 0:t.qData.labelExpression)||(null===t||void 0===t?void 0:t.qData.title)},getNextSheetTooltip:function e(){var t=I["a"].Sheets.getNext(r);return(null===t||void 0===t?void 0:t.qData.labelExpression)||(null===t||void 0===t?void 0:t.qData.title)},goToPrevious:function e(){var t=I["a"].Sheets.getPrevious(r);q["a"].goToSheet(t.qInfo.qId)},goToNext:function e(){var t=I["a"].Sheets.getNext(r);q["a"].goToSheet(t.qInfo.qId)},hasPreviousSheet:function e(){return I["a"].Sheets.hasPrevious(r)},hasNextSheet:function e(){return I["a"].Sheets.hasNext(r)}}};var $b=Gb;function Ub(e,t){return Zb(e)||Qb(e,t)||Xb(e,t)||Yb()}function Yb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xb(e,t){if(!e)return;if("string"===typeof e)return Kb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kb(e,t)}function Kb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Qb(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Zb(e){if(Array.isArray(e))return e}var Jb=function e(){var t=Object(C["c"])();var r=Object(T["a"])(),a=Ub(r,1),i=a[0];var o=$b(i.mashed);var l=o.getPreviousSheetTooltip();var c=o.getNextSheetTooltip();return n.a.createElement(n.a.Fragment,null,n.a.createElement(nn["a"],{tid:"btnQuickNavPrevious",onClick:o.goToPrevious,disabled:!o.hasPreviousSheet(),"data-sheet-id":o.getPreviousSheetId(),title:l?t("Tooltip.PreviousSheet",l):null},n.a.createElement(Wb["a"],{name:"previous"})),n.a.createElement(nn["a"],{tid:"btnQuickNavNext",onClick:o.goToNext,disabled:!o.hasNextSheet(),"data-sheet-id":o.getNextSheetId(),title:c?t("Tooltip.NextSheet",c):null},n.a.createElement(zb["a"],{name:"next"})))};var eg=Jb;var tg=r("JMiu");var rg=r("U0e5");var ag=Object(Ca["a"])((function(e){return{actionButtonCommon:{flex:"1 1 auto",borderRadius:0,minWidth:"40px",whiteSpace:"nowrap",height:"auto",fontSize:e.typography.subtitle2.fontSize},actionButton:{color:e.palette.primary.main,borderColor:e.palette.primary.main},actionButtonToggled:{border:"1px solid transparent"}}}));var ng=function e(t){var r=t.appId,a=t.appLayout,i=t.sheet,o=t.sheetLayout,c=t.displayMode;var s=ag();var u=Object(C["c"])();var d=l["a"].state===l["a"].States.edit;var f=a&&!a.qReadOnly&&a.permissions.createSheet;var p=o&&o.permissions.update;var v="".concat(s.actionButtonCommon," ").concat(s.actionButton);var m="".concat(s.actionButtonCommon," ").concat(s.actionButtonToggled);var h=function e(){var t=l["a"].state===l["a"].States.edit?l["a"].States.analysis:l["a"].States.edit;l["a"].setState(t);k["a"].setSheet(o.qInfo.qId,Object.keys(l["a"].States)[t],r,null)};var b=function e(){Object(G["a"])(i,true)};var g=n.a.createElement(nn["a"],{variant:d?"contained":"outlined",className:d?m:v,color:d?"primary":"default",tid:"4dd782","data-testid":"toolbar-edit-button",title:u(d?"Tooltip.StopEditSheet":"Tooltip.EditSheet"),onClick:h,startIcon:c>D["a"].medium?n.a.createElement(tg["a"],{name:"edit"}):null},c>D["a"].medium?u("Toolbar.StartEditing"):n.a.createElement(tg["a"],{name:"edit"}));var y=n.a.createElement(nn["a"],{variant:"outlined",className:v,color:"default",tid:"duplicate-sheet-when-no-edit-rights-button","data-testid":"toolbar-duplicate-button",title:u("Sheet.NoPermission"),onClick:b,startIcon:c>D["a"].medium?n.a.createElement(rg["a"],null):null},c>D["a"].medium?u("Common.Duplicate"):n.a.createElement(rg["a"],null));if(p||d)return g;if(i&&f)return y;return null};var ig=ng;var og=r("0vOn");var lg=r("WKSh");var cg=r("CHYH");var sg=r("+D4n");var ug=r("2FJp");var dg=r("slfu");function fg(e,t){return bg(e)||hg(e,t)||vg(e,t)||pg()}function pg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vg(e,t){if(!e)return;if("string"===typeof e)return mg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mg(e,t)}function mg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function hg(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function bg(e){if(Array.isArray(e))return e}var gg=Object(Ca["a"])((function(e){return{grid:{padding:e.spacing(.5)},button:{padding:e.spacing(1),whiteSpace:"nowrap",fontSize:e.typography.subtitle2.fontSize,marginRight:e.spacing(.5)},buttonSelected:{backgroundColor:e.palette.action.selected},buttonWithBothSidesMargin:{margin:e.spacing(0,.5,0,.5)},buttonWithMargin:{marginRight:e.spacing(.5)},divider:{height:e.spacing(3)}}}));var yg=function e(t){var r=t.sheetLayout;var i=gg();var o=Object(C["c"])();var c=Object(a["useState"])(true),s=fg(c,2),u=s[0],d=s[1];var p=Object(a["useState"])(r.cells.length>0),v=fg(p,2),m=v[0],h=v[1];var b=Object(a["useState"])(r.cells.length>0?o("editbar.hideSheetProperties"):o("editbar.showSheetProperties")),g=fg(b,2),y=g[0],w=g[1];var E=Object(a["useState"])(de["a"].selectedObject),S=fg(E,2),O=S[0],x=S[1];var k=Object(a["useState"])(l["a"].view===l["a"].Views.masterObject),j=fg(k,2),D=j[0],q=j[1];var I=Object(a["useState"])(window.localStorage["QlikView-clipboard"]&&window.localStorage["QlikView-clipboard"].length>0),T=fg(I,2),A=T[0],P=T[1];var M=function e(t){de["a"].selectedObject&&"gridCell"===de["a"].selectedObject.type?w(o(t?"editbar.hideChartProperties":"editbar.showChartProperties")):w(o(t?"editbar.hideSheetProperties":"editbar.showSheetProperties"))};var N=function e(t){x(t);h(de["a"].propertiesOpen);M(de["a"].propertiesOpen)};var R=function e(t){q(t)};var L=function e(t){P(t)};var V=function e(t){d(t)};var _=function e(t){h(t);M(t)};Object(a["useEffect"])((function(){f["a"].subscribe("editbar/subToolbar/selectedObject",N);f["a"].subscribe("editbar/subToolbar/inMasterEditView",R);f["a"].subscribe("editbar/subToolbar/hasPasteData",L);f["a"].subscribe("/editbar/subToolbar/modeChange/assetsOpen",V);f["a"].subscribe("/editbar/subToolbar/modeChange/propertiesOpen",_);return function(){f["a"].unsubscribe("editbar/subToolbar/selectedObject",N);f["a"].unsubscribe("editbar/subToolbar/inMasterEditView",R);f["a"].unsubscribe("editbar/subToolbar/hasPasteData",L);f["a"].unsubscribe("/editbar/subToolbar/modeChange/assetsOpen",V);f["a"].unsubscribe("/editbar/subToolbar/modeChange/propertiesOpen",_)}}),[]);var B=function e(){d(!u);f["a"].publish("editbar/subToolbar/assetsOpen",!u)};var F=function e(){de["a"].togglePropertyPanelByUser();f["a"].publish("editbar/subToolbar/propertiesOpen",!m);h(!m);M(!m)};var H=function e(){O&&"function"===typeof O.cut&&O.cut()};var z=function e(){O&&"function"===typeof O.copy&&O.copy()};var W=function e(){O&&"function"===typeof O.paste&&O.paste()};var G=function e(){if(O&&"function"===typeof O.remove){O.remove();rr["a"].setSheetAsSelectedObj()}};return n.a.createElement(n.a.Fragment,null,n.a.createElement(vl["a"],{container:true,alignItems:"center",className:i.grid},n.a.createElement(nn["a"],{tid:"assets-button","data-tid":"assets-button",startIcon:n.a.createElement(cg["a"],null),title:o(u?"editbar.hideAssets":"editbar.showAssets"),className:"".concat(i.button," ").concat(u?i.buttonSelected:""),onClick:B},o("editbar.subToolbar.assets")),n.a.createElement(nn["a"],{tid:"property-panel-btn","data-tid":"property-panel-btn",startIcon:n.a.createElement(sg["a"],null),title:y,className:"".concat(i.button," ").concat(m?i.buttonSelected:""),onClick:F},o("editbar.subToolbar.properties")),n.a.createElement(qb["a"],{orientation:"vertical",className:i.divider}),n.a.createElement(nn["a"],{tid:"editbar-cut-button",title:o("contextMenu.cut"),className:i.buttonWithBothSidesMargin,onClick:H,disabled:!O||!O.canCut()||D},n.a.createElement(ug["a"],null)),n.a.createElement(nn["a"],{tid:"editbar-copy-button",title:o("contextMenu.copy"),className:i.buttonWithMargin,onClick:z,disabled:!O||!O.canCopy()||D},n.a.createElement(rg["a"],null)),n.a.createElement(nn["a"],{tid:"editbar-paste-button",title:o("contextMenu.paste"),className:i.buttonWithMargin,onClick:W,disabled:!O||!O.paste||D||!A},n.a.createElement(dg["a"],null)),n.a.createElement(nn["a"],{tid:"editbar-remove-button",title:o("Common.Delete"),onClick:G,disabled:!O||!O.canRemove()||D},n.a.createElement(ic["a"],null))))};var wg=yg;var Eg=r("QY2Q");var Sg=r("jIxt");var Og=r("YE3e");function xg(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function kg(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){xg(i,a,n,o,l,"next",e)}function l(e){xg(i,a,n,o,l,"throw",e)}o(void 0)}))}}function jg(e,t){return Tg(e)||Ig(e,t)||Cg(e,t)||Dg()}function Dg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cg(e,t){if(!e)return;if("string"===typeof e)return qg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qg(e,t)}function qg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ig(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Tg(e){if(Array.isArray(e))return e}var Ag=Object(Ca["a"])((function(e){return{buttonGroup:{margin:e.spacing(.5),alignItems:"center"},buttonWithMargin:{marginRight:e.spacing(.5)}}}));var Pg=function e(){var t=Ag();var r=Object(C["c"])();var i=Object(a["useState"])(),o=jg(i,2),l=o[0],c=o[1];var s=Object(Og["a"])(l),u=jg(s,1),d=u[0];Object(a["useEffect"])((function(){var e;var t=function(){var t=kg(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return ct["a"].get();case 2:e=r.sent;c(e);case 4:case"end":return r.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();t();return function(){e&&e.app.clearUndoBuffer()}}),[]);var f=function e(){l.undo()};var p=function e(){l.redo()};return n.a.createElement(n.a.Fragment,null,n.a.createElement(vl["a"],{item:true,className:t.buttonGroup},n.a.createElement(nn["a"],{tid:"editbar-undo-button",title:r("Common.Undo"),className:t.buttonWithMargin,onClick:f,disabled:!d||0===d.qUndoInfo.qUndoCount},n.a.createElement(Eg["a"],null)),n.a.createElement(nn["a"],{tid:"editbar-redo-button",title:r("Common.Redo"),onClick:p,disabled:!d||0===d.qUndoInfo.qRedoCount},n.a.createElement(Sg["a"],null))))};var Mg=Pg;function Ng(e,t){return Bg(e)||_g(e,t)||Lg(e,t)||Rg()}function Rg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lg(e,t){if(!e)return;if("string"===typeof e)return Vg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vg(e,t)}function Vg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _g(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function Bg(e){if(Array.isArray(e))return e}var Fg=Object(Ca["a"])((function(e){return{toolbarNavigation:{borderColor:e.palette.divider,borderLeft:"1px solid"},buttonGroup:{margin:e.spacing(.5),alignItems:"center"},sheetsButton:{whiteSpace:"nowrap",fontSize:e.typography.subtitle2.fontSize},buttonSelected:{backgroundColor:e.palette.action.selected},divider:{height:e.spacing(3),margin:"auto",alignSelf:"center"}}}));var Hg=function e(t){var r=t.displayMode,i=t.appLayout,o=t.urlParameters;var c=Fg();var s=Ng(o,1),u=s[0];var d=p["a"].getParameterByName("app");var f=Object(F["a"])(d),v=Ng(f,1),m=v[0];var h=Object(z["a"])(u,m),b=Ng(h,2),g=b[0],y=b[1];var w=Object(Tb["a"])(m),E=Ng(w,1),S=E[0];var x=Object(W["a"])(g),k=Ng(x,2),q=k[0],I=k[1];var T=Object(a["useState"])(false),A=Ng(T,2),P=A[0],M=A[1];var N=Object(a["useState"])(false),R=Ng(N,2),L=R[0],V=R[1];var _=Object(C["c"])();var B=l["a"].isInEditMode();var H=function e(t){var r=!L;O.toggle({pressed:r,close:function e(){return V(false)}},t.currentTarget);V(r)};Object(a["useEffect"])((function(){if(!i||!S)return;Hb(S,i)}),[i,S]);Object(a["useEffect"])((function(){M(true)}),[]);if(!P||!i||!(q||y||I))return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(vl["a"],{item:true,xs:true,"data-testid":"qs-sub-toolbar__left"},B?n.a.createElement(wg,{sheetLayout:q}):n.a.createElement(lg["a"],{appId:d})),n.a.createElement(vl["a"],{item:true},n.a.createElement(vl["a"],{container:true,"data-testid":"qs-sub-toolbar__right",className:B?"":c.toolbarNavigation},B?n.a.createElement(n.a.Fragment,null,n.a.createElement(Mg,null),n.a.createElement(qb["a"],{orientation:"vertical",flexItem:true,className:c.divider})):null,j["a"].isFeatureBlacklisted("bookmarks")?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(vl["a"],{item:true,className:c.buttonGroup},n.a.createElement(og["a"],{tid:"4e4ab2",canCreate:true})),n.a.createElement(qb["a"],{orientation:"vertical",flexItem:true,className:c.divider})),n.a.createElement(vl["a"],{item:true,className:c.buttonGroup},n.a.createElement(nn["a"],{className:"".concat(c.sheetsButton," ").concat(L?c.buttonSelected:""),onClick:H,tid:"4e25a2","data-testid":"toolbar-sheets-button","qva-outside-ignore-for":"nav-sheet",title:_("Common.Sheets"),startIcon:n.a.createElement(Ib["a"],null),endIcon:n.a.createElement(Ud["a"],{size:"small"})},r>D["a"].medium?_("Common.Sheets"):null),n.a.createElement(eg,null)),n.a.createElement(ig,{appId:d,appLayout:i,sheet:g,sheetLayout:q,displayMode:r}))))};var zg=Hg;var Wg=function e(){if(l["a"].inObjectView()){var t=o["a"].getGrid();t&&t.exploreMenu(o["a"].getZoomCell(),false);o["a"].zoomOut()}else q["a"].goToOverview()};var Gg={helpKey:"Stage_SheetView",loaderTranslationKey:"App.IsLoading.Sheet",init:function e(){Cb["a"].applyLink()},renderContent:function e(t){return n.a.createElement(rb,t)},renderMenuItems:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.a.createElement(Db,t)},renderToolbarContent:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.a.createElement(te,t)},renderSubToolbarContent:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.a.createElement(zg,t)},renderMobileToolbarLeftContent:function e(){return n.a.createElement(i["e"],{tid:"4dfd77",size:"large",variant:"inverse",onClick:Wg},n.a.createElement(i["e"].Icon,{name:"previous",size:"large"}))}};var $g=t["default"]=Gg},Mgwz:function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i='<div class="lui-dialog qv-scripteditor-progressindicator" qva-outside-ignore-for="allOutside" ng-style="containerStyle" qv-global-escape="onEscape()" qv-abso>\n\t<div class="lui-dialog__header dm-header">\n\t\t<div class="lui-dialog__title" q-translation="scripteditor.progressindicator.title" tid="2f0526"></div>\n\t</div>\n\t<main class="lui-dialog__body dm-main">\n\t\t<div class="section clearfix">\n\t\t\t<div class="qv-loader" ng-class="{ \'hide\' : isFinished}"></div>\n\t\t\t<div class="executingscript" q-translation="scripteditor.progressindicator.executingscript"></div>\n\t\t\t<div class="header" q-translation="scripteditor.progressindicator.header" ng-class="{ \'hide\' : isFinished }"></div>\n\t\t\t<div class="elapsed">\n\t\t\t\t<span q-translation="scripteditor.progressindicator.elapsedtime"></span>\n\t\t\t\t<span class="time">{{elapsedTime}}</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-progressindicator log borderbox scrolly">\n\t\t\t\t<div ng-repeat="message in logMessages" class="{{ message.type }}">{{ message.content }}</div>\n\t\t\t\n\t\t</div>\n\t</main>\n\t<footer class="lui-dialog__footer">\n\t\t<lui-checkbox x-model="closeWhenFinished">{{ \'scripteditor.progressindicator.closecheckbox\' | translate }}</lui-checkbox>\n\t\t<div class="button-wrap">\n\t\t\t<lui-button ng-repeat="button in buttons" tid="{{ button.tid }}" ng-click="$event.preventDefault(); button.eventHandler()" ng-disabled="button.isDisabled" q-translation="{{ button.title }}" qva-focus="button.focus"></lui-button>\n\t\t</div>\n\t</footer>\n</div>\n';var o=r("mWu2");var l=r("6uJb");var c=r("wvr8");var s=r("5Pwf");var u=r("vkLz");var d=r("bmRg");var f=r("G3JA");var p=r("UO/V");var v=r("yOLm");var m=r("IHeB");var h=r("fBw5");var b=r("sWge");var g=r("RZ9f");var y=1e3;var w=t["a"]={template:i,controller:["$scope","$timeout","$interval","qvConfirmDialog",function(e,t,r,a){var i;var w;var E;var S;var O="scripteditor.progressindicator.closewhenfinished";var x;e.logMessages=[];e.runFinished=false;e.isFinished=false;e.closeWhenFinished=d["a"].get(O,false).value;e.finishedWithError=false;e.hadErrorOrWarning=false;var k=false;var j=false;var D=0;var C={title:"scripteditor.progressindicator.abortbutton",tid:"2f0456",isDisabled:true,eventHandler:function t(){e.onCancelClicked()}};var q={title:"Common.Close",tid:"2f0421",isDisabled:true,focus:false,eventHandler:function t(){e.onCloseClicked()}};e.buttons=[C];e.$watch("closeWhenFinished",(function(e){d["a"].set(O,{value:e})}));function I(){if(true===e.isFinished){e.input.onClose&&e.input.onClose();e.destroyComponent();e.deferredResult.resolve()}else e.abortDialogActive||e.runFinished||e.buttons[0].isDisabled||e.onCancelClicked()}e.onCloseClicked=I;e.onEscape=I;function T(){for(var t in e.logMessages){var r=e.logMessages[t];var a=r.content.split("\n");var n=r.type&&c["a"].contains(r.type,"empty");for(var i=0;i<a.length;i++){var o=a[i];if(!o&&!n)continue;var l=void 0;l=r.type&&c["a"].contains(r.type,"edc_error")?v["a"].MESSAGE_TYPE.ERROR:r.type&&(c["a"].contains(r.type,"synthetic_key")||c["a"].contains(r.type,"edc_circular_reference"))?v["a"].MESSAGE_TYPE.WARNING:n?v["a"].MESSAGE_TYPE.EMPTY:v["a"].MESSAGE_TYPE.DEFAULT;(l===v["a"].MESSAGE_TYPE.EMPTY||o)&&v["a"].addMessage(l,o)}}}e.onCancelClicked=function(){x=true;if(!e.abortDialogActive){e.abortDialogActive=true;C.focus=false;var t="scripteditor.cancelscriptrundialog.title";var r="scripteditor.cancelscriptrundialog.content";if(k){t="scripteditor.cancelscriptrundialog.searchindex.title";r="scripteditor.cancelscriptrundialog.searchindex.content"}e.dialogHandle=a.show({title:l["default"].get(t),message:l["default"].get(r),okLabel:l["default"].get("Common.Yes"),cancelLabel:l["default"].get("Common.No")});e.dialogHandle.closed.then((function(t){if(t){x=true;s["a"].global.cancelReload()}else{e.abortDialogActive=false;n()(".qv-scripteditor-progressindicator .lui-dialog").focus();C.focus=true}}))}};function A(){var t=(new Date-i)/1e3;var r="".concat(p["a"].formatNum(t/3600),":").concat(p["a"].formatNum(t%3600/60),":").concat(p["a"].formatNum(t%60));e.elapsedTime=r}function P(){e.isStopped=false;e.elapsedTime="HH:MM:SS";m["a"].reloadStarted();i=new Date;A();w=t((function e(){A();w=t(e,500)}),500)}function M(){j=false;var e=n()(".qv-progressindicator.scrolly");e.on("scroll",(function(){e.scrollTop()<D&&(j=true)}));F(1);S=false;E=r(N,1e3)}function N(){if(!S){S=true;return s["a"].global.getProgress(0).then(V,(function(){R()}))}return}function R(){S=false;r.cancel(E)}function L(r){e.isFinished=true;e.isStopped=true;t.cancel(w);e.input.progressIndicator.setActive(false);W();var a=l["default"].get(e.finishedWithError&&!r?"scripteditor.progressindicator.executingscriptnotcompleted":"scripteditor.progressindicator.executingscriptdone");n()(".executingscript").text(a);e.closeWhenFinished&&t((function(){e.closeWhenFinished&&!e.finishedWithError&&e.onCloseClicked()}),1400)}function V(t){var r=t.qProgressData.qPersistentProgressMessages;var a=t.qProgressData.qTransientProgressMessage;var n=t.qProgressData.qErrorData;if(!!r&&r.length>0){var i=p["a"].translateMessageArray(r);var o=/\$Syn \d+ =/gi.test(i);var c=o?i.match(/\$Syn \d+ =/gi).length:0;e.hadErrorOrWarning=e.hadErrorOrWarning||!!c;H({content:i,type:o?"synthetic_key":"",count:c});r.forEach((function(e){k=22===e.qMessageCode}))}else a&&H({content:p["a"].translateMessage(a),type:"transient"});n&&p["a"].filterOutDuplicates(n).forEach((function(t){e.hadErrorOrWarning=true;e.finishedWithError=true;var r=t.qErrorDataCode.toLowerCase();_("".concat(l["default"].get("scripteditor.progressindicator.followingerror"),":"),r);H({content:t.qErrorString?t.qErrorString:"",type:r});if(void 0!==t.qLine){_("".concat(l["default"].get("scripteditor.progressindicator.errorhere"),":"),r,r);H({content:t.qLine?t.qLine:"?",type:r,skipErrorCount:true})}}));S=false}function _(e,t,r){F(1,r);H({content:e,type:"headline ".concat(t)})}function B(){var t=["edc_error","synthetic_key"];var r=[];var a=-1;var n=-1;e.logMessages.forEach((function(e,t){"edc_circular_reference"===e.type?a=t:"headline summary_headline"===e.type&&(n=t)}));f["a"].move(e.logMessages,a,n);e.logMessages.splice(a-1,1);e.logMessages=e.logMessages.map((function(e){if("edc_circular_reference"===e.type){e.type+=" summary";e.content="".concat(l["default"].get("scripteditor.progressindicator.edc_circular_referencesummary"),":\n").concat(e.content)}return e}));t.forEach((function(t){var a;var n=0;e.logMessages.forEach((function(e){e.type!==t||e.skipErrorCount||(n=e.count?n+e.count:n+1)}));a="summary";n>0&&(a+=" ".concat(t));r.push({content:l["default"].get("scripteditor.progressindicator.".concat(t,"summary"),[n]),type:a})}));r.forEach(H)}function F(e,t){for(var r=0;r<e;r++)H({content:"",type:"empty ".concat(t)})}function H(r){if(r){r.content&&(r.content=r.content.trim());e.logMessages.length&&"transient"===e.logMessages[e.logMessages.length-1].type&&e.logMessages.pop();e.logMessages.push(r);e.logMessages.length>y&&e.logMessages.splice(0,1);t((function(){if(!j){var e=document.getElementsByClassName("qv-progressindicator log");if(e&&e[0]){e[0].scrollTop=e[0].scrollHeight;D=e[0].scrollTop}}}))}}function z(){q.isDisabled=true;C.isDisabled=false;C.focus=true;e.buttons=[C]}function W(){C.isDisabled=true;q.isDisabled=false;q.focus=true;e.buttons=[q]}function G(){t((function(){q.isDisabled=true;H({content:l["default"].get("scripteditor.progressindicator.savingapp"),type:"transient"})}));return e.input.scriptModel.setAndPersistScript().then((function(){_(l["default"].get("scripteditor.progressindicator.appsaved"));t((function(){q.isDisabled=false}))}))}function $(r){e.runFinished=true;C.isDisabled=true;t((function(){if(e.dialogHandle){e.dialogHandle.close();C.disabled=true}}));H({content:"\n",type:"transient"});if(r)return G().then((function(){true===e.hadErrorOrWarning?_(l["default"].get("scripteditor.progressindicator.runfinishedwitherrorsorwarnings"),"summary_headline"):_(l["default"].get("scripteditor.progressindicator.runfinished"),"summary_headline");B()}));e.finishedWithError=true;_(x?l["default"].get("scripteditor.progressindicator.runaborted"):l["default"].get("scripteditor.progressindicator.runfail"));u["a"].doDirtyRollback();return o["default"].promise()}function U(e){return e&&e.error&&e.error.code?e.error.code:0}function Y(t){H({content:l["default"].get("ErrorCode.".concat(U(t))),type:"edc_error"});t&&(t.isHandled=true);e.finishedWithError=true;$(false).then((function(){L();T()}))}function X(){v["a"].clear();e.input.progressIndicator.setActive(true);_(l["default"].get("scripteditor.progressindicator.runstarted"));P();function t(){return h["a"].getRunLoadModelActions().then((function(e){return{executeBeforeRun:function t(){return e.executeBeforeRun().catch((function(){return b["a"].resolve()}))},executeAfterRun:function t(){return e.executeAfterRun().catch((function(){return b["a"].resolve()}))}}}))}t().then((function(t){e.input.scriptModel.fastSave().then(e.input.scriptModel.checkScriptSyntax).then((function(){t.executeBeforeRun().then((function(){z();M();return e.input.scriptModel.run().then((function(r){return s["a"].global.getProgress(0).then(V).then((function(){R();return $(r).then((function(){return t.executeAfterRun(r).then((function(){L(r);T();g["a"].trackEvent(g["a"].customEvents.DATA_LOAD_ELAPSED_TIME,{Time_elapsed:e.elapsedTime})}),Y)}),Y)}),Y)}),Y)}),Y)}),Y)}),Y)}X()}]}},MhZw:function(e,t,r){"use strict";var a=r("mWu2");var n='<div class="qui-searchhitindicator" ng-show="count > 0">{{text}}</div>\n';var i='<div class="qui-outlinedsearchhitindicator" ng-show="count > 0">{{text}}</div>\n';function o(e){return{restrict:"E",replace:true,scope:{count:"="},template:e,link:function e(t){var r=99;t.$watch("count",(function(e){e&&(t.text=e<=r?e:"".concat(r,"+"))}))}}}a["default"].directive("qvSearchHitIndicator",[function(){return o(n)}]);a["default"].directive("qvOutlinedSearchHitIndicator",[function(){return o(i)}])},Qa4K:function(e,t,r){"use strict";r.r(t);var a=r("TmNk");var n=r.n(a);var i=r("Z9ZH");var o=r.n(i);var l=r("mWu2");var c=r("4nJ1");var s=r("sWge");var u='<div class="qv-soft-property-panel qui-dark" data-tid="exploration-menu">\n\t\n\t<div class="em-mobile-overlay" qva-activate="onOverlayTap()" qva-swipe="onOverlaySwipe($event)"></div>\n\t\n\t<div class="panel-container">\n\t\t<div class="panel-content" include-em-component x-component="rootComponent" x-args="args" x-definition="definition" x-data="data"></div>\n\n\t\t<div class="panel-bottom">\n\t\t\t<button ng-class="{\'lui-disabled\': !hasChanged && !applying}" ng-click="hasChanged && discard();" tid="discard">\n\t\t\t\t<span q-translation="Common.Discard"></span>\n\t\t\t</button>\n\t\t\t<button ng-if="canSave" ng-class="{\'lui-disabled\': !hasChanged && !applying}" qva-activate="hasChanged && applyPatches();" tid="apply">\n\t\t\t\t<span q-translation="Common.Apply"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t\n\t\t<div class="em-confirm-overlay" ng-if="hasChanged && applying">\n\t\t\t<section>\n\t\t\t\t<div class="lui-icon lui-icon--control"></div>\n\t\t\t\t<p class="title" q-translation="Object.VisualExploration.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p q-translation="Object.VisualExploration.Confirm.Text"></p>\n\t\t\t</section>\n\t\t\t<section class="panel-bottom">\n\t\t\t\t<lui-button ng-if="canSave" x-variant="inverse" q-translation="Common.Apply" qva-activate="hasChanged && mergeSoftPatches();" tid="apply"></lui-button>\n\t\t\t\t<lui-button x-variant="inverse" q-translation="Common.Cancel" qva-activate="cancelConfirm();" tid="cancel"></lui-button>\n\t\t\t</section>\n\t\t</div>\n\t\t<div class="em-disabled-overlay" ng-if="object.selectionsApi.active"></div>\n\t</div>\n</div>\n';var d=r("DChB");var f=null;function p(){if(f)return f.promise;f=Object(s["a"])();r.e(104).then((function(){var e=[r("Qa4K"),r("B7Uj"),r("oUkM"),r("Xh7F"),r("uUIp"),r("Qk/C"),r("SpRz"),r("LWxY"),r("ZXuf"),r("drQo"),r("Q1Qz"),r("gvzf"),r("yiKp"),r("zLRb"),r("kyPr"),r("ZfMA"),r("xysi"),r("j/Wn")];(function(e,t,r,a,n,i,o,c,s,u,p,v,m,h,b,g,y,w){d["a"].addComponent("checkbox",t.default);d["a"].addComponent("text",r.default);d["a"].addComponent("accordion",a.default);d["a"].addComponent("items",n.default);d["a"].addComponent("radio-list",i.default);d["a"].addComponent("dimension-radio-list",o.default);d["a"].addComponent("header",c.default);d["a"].addComponent("hypercube-data",s.default);d["a"].addComponent("slider",u.default);d["a"].addComponent("switch",p.default);d["a"].addComponent("sort",v.default);d["a"].addComponent("item-selection-list",m.default);d["a"].addComponent("color-scale",h.default);d["a"].addComponent("icon-item",b.default);d["a"].addComponent("layers",g.default);var E=l["default"].getService("$templateCache");E.put("em-sorting-item.ng.html",y.default);E.put("em-data-item.ng.html",w.default);f.resolve()}).apply(null,e)})).catch(r.oe);return f.promise}function v(){return p()}var m={loadComponents:v};var h=r("rQnm");var b=r("B52N");var g=r("G1wx");var y=r("KBmc");l["default"].directive("emAccordion",[function(){return{template:"<div ng-transclude></div>",transclude:true,scope:{emAccordion:"=",definition:"=",args:"="},controller:["$scope","$element","$timeout",function(e,t,r){this.init=function(a){if(a===e.emAccordion.length-1){t.accordion({header:".em-section-header",active:0,collapsible:true,heightStyle:"fill",animate:{easing:"swing",duration:200},beforeActivate:function e(t,r){r.newHeader&&r.newHeader.length&&r.newHeader.scope()&&(r.newHeader.scope().item.expanded=true);r.oldHeader&&r.oldHeader.length&&r.oldHeader.scope()&&(r.oldHeader.scope().item.expanded=false)}});e.$on("em-resize",(function(){t.data("ui-accordion")&&t.accordion("refresh")}));e.$on("headerschanged",(function(){r((function(){t.data("ui-accordion")&&t.accordion("refresh")}))}))}}}]}}]);l["default"].directive("emAccordionItem",[function(){return{require:"^emAccordion",link:function e(t,r,a,n){n.init(t.$index)}}}]);l["default"].directive("qvSoftPropertyPanel",[function(){return{template:u,restrict:"E",replace:true,scope:{object:"=",canSaveSoftProperties:"=",onToggle:"=",showExploreMenu:"="},controller:["$scope","$element",function(e,t){var r={};var a=l["default"].getService("$cacheFactory");var i=a.get("em-object");var u;var f=t.find(".em-mobile-overlay")[0];function p(){e.$broadcast("em-resize")}i||(i=a("em-object"));e.$watch("showExploreMenu",(function(e){e&&p()}));e.$watch("canSaveSoftProperties",(function(){e.canSave=S()}));e.hasChanged=false;t.toggleClass("em-mobile",b["default"].isSmallDevice);function v(e){t.toggleClass("em-mobile",e)}b["default"].ViewChanged.bind(v);e.object.explore.watchResize(p);t.on("qv-radial-contextmenu qv-contextmenu",(function(e){e.stopPropagation()}));g["a"].treatAsDesktop()||o()(t.find(".em-mobile-overlay")[0]).longtap({options:{preventDefault:false,timeThreshold:100,interval:20},update:function e(t,r){if(r.percentage>=100){o.a.preventGestures(this.gestureHandler);w()}},cancel:function e(){E()},end:function e(){E()}});function w(){t.addClass("em-peeking")}function E(){t.removeClass("em-peeking")}function S(){var t=!e.data||e.data.qExtendsId;return e.canSaveSoftProperties&&!t}e.close=function(){E();e.onToggle(false)};e.onOverlaySwipe=function(t){"left"===t.gestureData.swipe.direction&&e.close()};e.onOverlayTap=function(){e.close()};e.discard=function(){e.reset();e.close()};e.reset=function(){if(r&&r.model&&e.hasChanged){r.model.clearSoftPatches();r.effectiveProperties=c["a"].extend(true,{},r.properties);r.prevEffectiveProperties=c["a"].extend(true,{},r.effectiveProperties)}};e.applyPatches=function(){e.applying=true};e.cancelConfirm=function(){e.applying=false};e.mergeSoftPatches=function(){if(!e.canSave)return;u.mergeSoftPatches().then((function(){e.applying=false;e.close()}))};function O(){r.model.getLayout().then((function(t){e.hasChanged=t.qHasSoftPatches;e.hasChanged||(e.applying=false);var a=t.visualization||t.qInfo.qType;if(a!==r.type)return;s["a"].all({effectiveProperties:r.model.getEffectiveProperties(),properties:r.model.getProperties().then((function(e){if(e.qExtendsId)return r.model.app.getObject(e.qExtendsId).then((function(e){return e.getProperties()}));return e}))}).then((function(t){r.properties=t.properties;r.effectiveProperties=t.effectiveProperties;r.prevEffectiveProperties=c["a"].extend(true,{},t.effectiveProperties);e.data=r.effectiveProperties;e.canSave=S();e.args.properties=r.properties;e.$broadcast("datachanged",e.data)}))}))}e.$on("saveSoftProperties",(function(t){t.stopPropagation();n.a.applyModifiers({model:r.model,properties:r.effectiveProperties}).then((function(){y["a"].colorByUpdater(r.effectiveProperties,"qHyperCubeDef.");r.ext.onSoftPropertyChange&&r.ext.onSoftPropertyChange(r.prevEffectiveProperties,r.effectiveProperties);u.saveSoftProperties(r.prevEffectiveProperties,r.effectiveProperties).then((function(t){t&&e.$broadcast("applyPatches")}))}))}));e.$on("updateSoftContent",(function(t,a){t.preventDefault();m.loadComponents([]).then((function(){r.model&&r.model.Invalidated.unbind(O);r=a;e.definition=r.definition;e.data=r.effectiveProperties;e.args={properties:r.properties,layout:r.layout,cache:r.cache,app:r.app};r.model.Invalidated.bind(O);e.hasChanged=r.layout.qHasSoftPatches;e.canSave=S();e.rootComponent=c["a"].extend({},d["a"].findComponent(r.definition));u?u.setModel(r.model):u=new h["a"](r.model)}))}));e.$on("$destroy",(function(){e.object.explore.unwatchResize(p);b["default"].ViewChanged.unbind(v);r.model&&r.model.Invalidated.unbind(O);g["a"].treatAsDesktop()||o()(f).off("longtap")}));function x(){if(e.object.hasSoftProperties){var t=e.object;t.getSoftPropertyContent().then((function(r){s["a"].all({effectiveProperties:t.model.getEffectiveProperties(),properties:t.model.getProperties().then((function(e){if(e.qExtendsId)return t.model.app.getObject(e.qExtendsId).then((function(e){return e.getProperties()}));return e})),layout:t.model.getLayout()}).then((function(a){var n={definition:r.definition,properties:a.properties,effectiveProperties:a.effectiveProperties,prevEffectiveProperties:c["a"].extend(true,{},a.effectiveProperties),layout:a.layout,model:t.model,app:t.model.app,type:r.type.type,cache:i,ext:t.ext};e.$broadcast("updateSoftContent",n)}))}))}}e.$on("reloadExploreContent",(function(){x()}));e.object.hasSoftProperties&&x()}]}}]);l["default"].componentDirective("includeEmComponent",{definition:"=",data:"=",args:"="})},Qpod:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var a=r("mXGw");var n=r.n(a);var i=r("W0B4");var o=r.n(i);var l=r("R82R");var c=r("JSlT");var s=r("MK7S");var u=r("hhow");var d=r("bJWG");var f=r("lxKZ");var p=r("4FrP");var v=r("rx5w");var m=r("/ZiB");var h=r("YZpo");var b=r("LkyE");var g={open:o.a.bool.isRequired,suggestions:o.a.array.isRequired,suggestionsLoading:o.a.bool.isRequired,onSuggestionSelected:o.a.func.isRequired,onSuggestionsClosed:o.a.func.isRequired,anchorEl:o.a.object.isRequired};var y=Object(l["a"])((function(){return{suggestionsContainer:{minHeight:"30px",minWidth:"200px",display:"flex",justifyContent:"center",alignItems:"center"},suggestionMenu:{minWidth:"200px",maxHeight:"100px",minHeight:"30px",overflow:"auto"},suggestionItem:{height:"25px",lineHeight:"25px",paddingRight:"0px"},suggestionItemText:{width:"100%"}}}));var w=function e(t){var r=t.getBoundingClientRect();var a=r.top+r.height;return{top:a,left:r.left}};var E=Object(a["forwardRef"])((function(e,t){var r=e.open,i=e.anchorEl,o=e.suggestions,l=e.suggestionsLoading,c=e.onSuggestionSelected,s=e.onSuggestionsClosed;var g=y();var E=Object(a["useRef"])();Object(a["useImperativeHandle"])(t,(function(){return{focus:function e(){E.current&&E.current.focus()}}}));var S=function e(t){c(t.currentTarget.dataset.myValue)};return n.a.createElement(u["a"],{id:"suggestions-list",disableAutoFocus:true,disableEnforceFocus:true,className:g.popper,open:r,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},anchorReference:"anchorPosition",anchorPosition:w(i),style:{top:"".concat(window.scrollY,"px")}},n.a.createElement(d["a"],{className:g.suggestionsContainer},n.a.createElement(n.a.Fragment,null,l&&n.a.createElement(f["a"],{size:20}),!l&&n.a.createElement(p["a"],{className:g.suggestionMenu},o.map((function(e,t){return n.a.createElement(v["a"],{ref:0===t?E:void 0,key:e.key,className:g.suggestionItem,onClick:S,"data-my-value":e.value},n.a.createElement(m["a"],{variant:"inherit",className:g.suggestionItemText},e.name),e.selected&&n.a.createElement(h["a"],null,n.a.createElement(b["a"],null)))}))))))}));E.propTypes=g;var S=E;var O=r("X3hd");var x=r("VqUS");var k=r("g1uV");var j=r("5ezW");function D(e){return I(e)||q(e)||N(e)||C()}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function I(e){if(Array.isArray(e))return R(e)}function T(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){T(i,a,n,o,l,"next",e)}function l(e){T(i,a,n,o,l,"throw",e)}o(void 0)}))}}function P(e,t){return V(e)||L(e,t)||N(e,t)||M()}function M(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function L(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function V(e){if(Array.isArray(e))return e}var _={error:{tokenLimit:"token_limit",invalidToken:"invalid_token"}};var B={disabled:o.a.bool,onApply:o.a.func.isRequired,onError:o.a.func.isRequired,useSuggestions:o.a.bool,fetchSuggestions:o.a.func,maxHeight:o.a.number,tokenLimit:o.a.number,validator:o.a.func,width:o.a.string,tokenSeparators:o.a.arrayOf(o.a.string)};var F={disabled:false,maxHeight:void 0,tokenLimit:void 0,validator:void 0,width:"auto",useSuggestions:false,fetchSuggestions:function e(){return[]},tokenSeparators:[";",","," "]};var H=Object(l["a"])((function(e){var t=function t(){return"box-shadow ".concat(e.transitions.duration.shorter,"ms ").concat(e.transitions.easing.easeOut," 0ms,")+"border-color ".concat(e.transitions.duration.shorter,"ms ").concat(e.transitions.easing.easeOut," 0ms")};return{chip:{fontSize:e.typography.fontSize,margin:"2px"},chipError:{border:"1px solid ".concat(e.palette.error.main),color:e.palette.error.main},hiddenSpan:{position:"absolute",visibility:"hidden"},wrapper:{alignContent:"flex-start",backgroundColor:e.palette.common.white,position:"relative",border:"1px solid rgba(0, 0, 0, 0.15)",boxShadow:"inset 0 2px 0 0 rgba(0, 0, 0, 0.05)",borderRadius:"3px",cursor:"text",display:"flex",flexDirection:"row",flexFlow:"wrap",minHeight:"28px",overflow:"auto",padding:"4px",resize:"vertical",transition:t(),"&.focused":{border:"solid 1px #177FE6",boxShadow:"0px 0px 0px 1px #177FE6, inset 0 2px 0 0 rgba(0, 0, 0, 0.05)"},"&:not(.disabled):not(.focused):hover":{border:"solid 1px rgba(0, 0, 0, 0.3)"},"& input:first-child":{paddingLeft:"6px"},"&.disabled":{border:"solid 1px rgba(0, 0, 0, 0.1)",borderColor:"rgba(0, 0, 0, 0.1)",backgroundColor:"rgba(0, 0, 0, 0.05)",cursor:"default",resize:"none"}},wrapperError:{boxShadow:"inset 0 2px 0 0 rgba(0, 0, 0, 0.05)",borderColor:e.palette.error.main,"&&.focused":{boxShadow:"0px 0px 0px 1px ".concat(e.palette.error.main,", inset 0 2px 0 0 rgba(0, 0, 0, 0.05)"),borderColor:e.palette.error.main},"&&:not(.focused):hover":{boxShadow:"inset 0 2px 0 0 rgba(0, 0, 0, 0.05)",borderColor:e.palette.error.main}},input:{border:"none",fontSize:e.typography.fontSize,height:"24px",outline:"none",minWidth:"10px",margin:"2px",textAlign:"left"}}}));var z={resizeInputField:function e(t,r){var a=5;r.innerText=t.value;t.style.width="".concat(r.offsetWidth+a,"px")},isElementFocused:function e(t){return document.activeElement===t}};var W=function e(t){var r=t.disabled,i=t.onApply,o=t.onError,l=t.maxHeight,u=t.tokenLimit,d=t.validator,f=t.width,p=t.className,v=void 0===p?"":p,m=t.useSuggestions,h=t.fetchSuggestions,b=t.tokenSeparators;var g=H();var y=Object(a["useRef"])();var w=Object(a["useRef"])();var E=Object(a["useRef"])();var C=Object(a["useRef"])();var q=Object(a["useState"])(""),I=P(q,2),T=I[0],M=I[1];var N=Object(a["useState"])([]),R=P(N,2),L=R[0],V=R[1];var B=Object(a["useState"])(false),F=P(B,2),W=F[0],G=F[1];var $=Object(a["useState"])([]),U=P($,2),Y=U[0],X=U[1];var K=Object(a["useState"])(true),Q=P(K,2),Z=Q[0],J=Q[1];var ee=function e(){return L.some((function(e){return e.hasError}))};var te=function e(){return L.length>u};var re=Object(O["a"])(T,500,(function(){G(false)}));var ae=new RegExp("[".concat(b.join(),"]"));var ne=function(){var e=A(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:J(true);a.next=3;return h(t);case 3:r=a.sent;t&&!r.find((function(e){return j["a"].string(e.value.toLowerCase())===j["a"].string(t.toLowerCase())}))&&r.unshift({name:t,key:x["a"].generateId(),value:t,fromQuery:true});L.forEach((function(e){var t=r.find((function(t){return t.value===e.label}));t&&(t.selected=true)}));X(r);J(false);case 8:case"end":return a.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();Object(a["useEffect"])((function(){m&&h&&ne(T)}),[re]);Object(a["useEffect"])((function(){y.current&&z.resizeInputField(y.current,E.current)}),[T]);Object(a["useEffect"])((function(){if(te()){o(_.error.tokenLimit);return}if(ee()){o(_.error.invalidToken);return}i(L)}),[L]);var ie=function e(t){if(r)return"".concat(g.wrapper," disabled");var a=ee()||te()?g.wrapperError:"";var n=z.isElementFocused(y.current)?"focused":"";return"".concat(g.wrapper," ").concat(a," ").concat(n," ").concat(t)};var oe=function e(t){var r=Y.find((function(e){return j["a"].string(e.name.toLowerCase())===j["a"].string(t.toLowerCase())}));var a=r?r.key:x["a"].generateId();return{label:t,hasError:!!d&&!d(t),key:a,existing:!!r&&!r.fromQuery}};var le=function e(t,r){return r.find((function(e){return e.label===t}))};var ce=function e(t){var r=[];L.forEach((function(e){e!==t&&r.push(e)}));V(r)};var se=function e(t){var r=t.target.value;var a=r;var n=r.split(ae);if(n.length>1){var i=[];a=n.pop();n.forEach((function(e){e&&!le(e,[].concat(D(L),i))&&i.push(oe(e))}));V([].concat(D(L),i))}if(a.trim()){J(true);G(true)}M(a)};var ue=function e(t){if(r)return;t.currentTarget.classList.remove("focused")};var de=function e(t){if(t.length>0){if(!le(t,L)){var r=oe(t.trim());V([].concat(D(L),[r]))}M("")}};var fe=function e(t){if(r)return;t.currentTarget.classList.add("focused");y.current.focus()};var pe=function e(t){if(m)return;var r=t.target.value;r.length>0&&de(t.target.value)};var ve=function(){var e=A(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:t.which===k["a"].BACKSPACE&&0===t.target.selectionEnd&&V(L.slice(0,L.length-1));if((t.which===k["a"].ENTER||t.which===k["a"].TAB&&t.target.value)&&(!m||!Z)){t.preventDefault();de(t.target.value);G(false)}if(t.which===k["a"].ARROW_DOWN&&W){t.preventDefault();C.current.focus()}case 3:case"end":return r.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();var me=function e(){Z||de(T);G(false)};var he=function e(t){de(t);G(false)};var be=function e(){return n.a.createElement(n.a.Fragment,null,L.map((function(e){var t=e.hasError?"".concat(g.chip," ").concat(g.chipError):g.chip;return n.a.createElement(c["a"],{className:t,key:e.key,label:e.label,size:"small",variant:"outlined",tid:"token-inputfield-chip","data-testid":"token-inputfield-chip",deleteIcon:n.a.createElement(s["a"],{size:"small"}),onDelete:function t(){return ce(e)},tabIndex:-1})})))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:ie(v),onBlur:ue,onFocus:fe,style:{width:f,maxHeight:l?"".concat(l,"px"):void 0},tabIndex:-1,ref:w,tid:"token-input-wrapper"},!r&&n.a.createElement(n.a.Fragment,null,n.a.createElement(be,null),n.a.createElement("input",{className:g.input,type:"text",onBlur:pe,onChange:se,onKeyDown:ve,ref:y,value:T,tid:"token-inputfield"}),n.a.createElement("span",{className:"".concat(g.hiddenSpan," ").concat(g.input),ref:E}))),m&&w.current&&n.a.createElement(S,{open:W,anchorEl:w.current,ref:C,onSuggestionsClosed:me,onSuggestionSelected:he,suggestions:Y,suggestionsLoading:Z}))};W.propTypes=B;W.defaultProps=F;var G=t["b"]=W},"R/ED":function(e,t,r){"use strict";var a={};var n={ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40};function i(e){if(!a[e]||!a[e].items)return[];return a[e].items}function o(e,t){a[e]={items:t,activeIndex:0}}function l(e){if(a[e])return a[e].activeIndex;return}function c(e,t){a[e]&&(a[e].activeIndex=t)}function s(e){a[e]&&delete a[e]}function u(e,t){var r;var a=null;var n=e.length;for(r=0;r<n;r++)if(e[r].row===t.row){a=e[r];break}a?a.items.push(t):e.push({row:t.row,items:[t]})}function d(e,t){var r=e[t].col;var a=e[t].row;var n=t;var i;var o=e.length;var l;var c;var s=Infinity;for(i=0;i<o;i++)if(e[i].row>a){l=e[i].row;break}void 0!==l&&e.forEach((function(e,t){if(e.row===l){c=Math.abs(e.col-r);if(c<s){s=c;n=t}}}));return n}function f(e,t){var r=e[t].col;var a=e[t].row;var n=t;var i;var o=e.length-1;var l;var c;var s=Infinity;for(i=o;i>-1;i--)if(e[i].row<a){l=e[i].row;break}void 0!==l&&e.forEach((function(e,t){if(e.row===l){c=Math.abs(e.col-r);if(c<s){s=c;n=t}}}));return n}function p(e,t,r,a){var n=i(e);var l=n.length;var s;var d;var f=[];var p=[];for(d=0;d<l;d++)n[d].id===t&&(s=n[d]);if(s&&(s.col!==r||s.row!==a)){s.col=r;s.row=a;n.forEach((function(e){u(f,e)}));f.sort((function(e,t){return e.row-t.row}));f.forEach((function(e){e.items.sort((function(e,t){return e.col-t.col}))}));f.forEach((function(e){e.items.forEach((function(e){p.push(e)}))}));o(e,p);c(e,0);p.forEach((function(e){e.callback(p[0].col,p[0].row,true)}))}}var v={addItem:function e(t,r,a,n,l){var s=i(a);var d=[];var f=[];if(s.every((function(e){return e.id!==t}))){s.push({id:t,callback:r,col:n,row:l});s.forEach((function(e){u(d,e)}));d.sort((function(e,t){return e.row-t.row}));d.forEach((function(e){e.items.sort((function(e,t){return e.col-t.col}))}));d.forEach((function(e){e.items.forEach((function(e){f.push(e)}))}));o(a,f)}c(a,0);return s[0].id===t},updateItem:function e(t,r,n,i){var o=a[r];o.items.some((function(e){var r=e.id===t;if(r){e.col=i;e.row=n}return r}))},setFocus:function e(t,r){var a=i(t);var n=-1;var o;var l;a.forEach((function(e,t){e.id===r.id&&(n=t)}));if(n>-1){o=a[n].row;l=a[n].col;c(t,n);a.forEach((function(e){e.callback(l,o,false)}))}},removeAllItems:function e(t){s(t)},removeItem:function e(t,r,a){var n;var o=i(t);for(n=0;n<o.length;n++)if(o[n].id===r){o.splice(n,1);break}if(o.length){if(!a){c(t,0);o.forEach((function(e){e.callback(o[0].col,o[0].row,true)}))}}else s(t)},key:function e(t,r){if(t.altKey||t.shiftKey)return;var e=t.which;var a=l(r);var o=a;var s=i(r);t.ctrlKey||t.metaKey?e===n.ARROW_DOWN?a=s.length-1:e===n.ARROW_UP&&(a=0):e===n.ARROW_RIGHT?a<s.length-1&&a++:e===n.ARROW_LEFT?a>0&&a--:e===n.ARROW_DOWN?a=d(s,a):e===n.ARROW_UP&&(a=f(s,a));if(a!==o){var u=s[a].col;var p=s[a].row;s.forEach((function(e){e.callback(u,p,false)}));c(r,a);t.preventDefault();t.stopPropagation()}},positionReset:function e(t,r,a,n){p(t,r,a,n)},softReset:function e(t){var r=i(t);if(r.length){c(t,0);r.forEach((function(e){e.callback(r[0].col,r[0].row,true)}))}else s(t)},RIGHT_KEY:n.ARROW_RIGHT,LEFT_KEY:n.ARROW_LEFT,UP_KEY:n.ARROW_UP,DOWN_KEY:n.ARROW_DOWN};t["a"]=v},RPgM:function(e,t,r){"use strict";var a=r("TmNk");var n=r.n(a);var i=r("qIEf");var o=r.n(i);var l=r("mWu2");var c=r("6uJb");var s=r("UI2D");var u=r("MGTR");var d=r("4nJ1");var f=r("z4LI");var p=r("TmCs");var v=r("6Z/P");var m=r("XiD7");var h=r("2eMM");var b=r("zBv7");var g=r("2Hli");var y=r("UOQJ");var w=r("U7Ny");var E=false;function S(e,t,r,a){this.objectId=e;this.item=t;this.itemarray=r;this.cell=a;this.menu=l["default"].getService("qvContextMenu").menu()}function O(e,t,r){return n.a.applyModifiers({model:e,properties:t.properties}).then((function(){t.updateGlobalChangeListeners&&t.updateGlobalChangeListeners();e.setProperties(t.properties);r&&l["default"].$rootScope.$broadcast("pp-open-path",r)}))}S.prototype.ApplyAlternateState=function(e,t,r,a){this.menu.addItem({translation:a,tid:"apply-alternate-state",select:function a(){t.properties.qStateName=r;O(e,t)}})};S.prototype.Option=function(e){var t="/dropAction/";this.menu.addItem({translation:e.text,tid:e.tid||"",select:function r(){u["a"].publish(t+e.id,e.args)}})};S.prototype.Add=function(e,t){var r=this.item;var a=r.type;var n=["contextMenu.add",r.name];"measure"===a?t.canAddMeasure()&&this.menu.addItem({translation:n,tid:"add",select:function a(){t.addLibraryMeasure(r.id).then((function(r){O(e,t,"data.".concat(r.qDef.cId))}))}}):"expression"===a?t.canAddMeasure()&&this.menu.addItem({translation:n,tid:"add",select:function a(){t.addExpressionMeasure(r.name,"").then((function(r){O(e,t,"data.".concat(r.qDef.cId))}))}}):t.canAddDimension()&&this.menu.addItem({translation:n,tid:"add",select:function n(){"field"===a?t.addFieldDimension(r.name,r.displayName).then((function(r){O(e,t,"data.".concat(r.qDef.cId))})):"dimension"===a&&t.addLibraryDimension(r.id).then((function(r){O(e,t,"data.".concat(r.qDef.cId))}))}})};S.prototype.AddFieldAsMeasure=function(e,t){var r=this.item;var a=d["a"].escapeField(r.name);var n;if(t.canAddMeasure()){n=this.menu.addItem({translation:"contextMenu.addFieldAsMeasure",tid:"add-field-as-measure"});["Sum","Count","Avg","Min","Max"].forEach((function(i){var o="".concat(i,"(").concat(a,")");n.addItem({label:o,tid:i.toLowerCase(),select:function a(){t.addExpressionMeasure(o,r.displayName).then((function(r){O(e,t,"data.".concat(r.qDef.cId))}))}})}))}};S.prototype.Replace=function(e,t,r,a){var n;var i;var o;var l;var c=this.item;var s;var u=c.type;var d;d="measure"===u||"expression"===u?t.getMeasures():t.getDimensions();o=d.length>1?this.menu.addItem({translation:r,tid:"replace-submenu"}):this.menu;function f(r,a){o.addItem({translation:a,tid:"replace",select:function a(){var n;switch(u){case"field":n=t.createFieldDimension(c.name,c.name);t.replaceDimension(r,n).then((function(r){O(e,t,"data.".concat(r.qDef.cId))}));break;case"dimension":n=t.createLibraryDimension(c.id);t.replaceDimension(r,n).then((function(r){O(e,t,"data.".concat(r.qDef.cId))}));break;case"measure":n=t.createLibraryMeasure(c.id);t.replaceMeasure(r,n).then((function(r){O(e,t,"data..".concat(r.qDef.cId))}));break;case"expression":n=t.createExpressionMeasure(c.name,c.name);t.replaceMeasure(r,n).then((function(r){O(e,t,"data..".concat(r.qDef.cId))}));break;default:break}}})}for(n=0;n<d.length;++n){t.layout||t.setLayout(e.layout);if("measure"===u||"expression"===u){var p=t.getMeasureLayouts()[n];s=p&&p.qFallbackTitle;l=p&&!p.qError}else{var v=t.getDimensionLayouts()[n];if(v){var m="H"===v.qGrouping;s=m?v.title:v.qFallbackTitle}else s="";l=v&&!(v.qError&&!b["a"].isCalcCondNotCalculatedErr(v.qError))}i=s&&l?["contextMenu.replace",s]:a;f(n,i)}};S.prototype.ReplaceDimensions=function(e,t,r){this.Replace(e,t,"Common.Replace","contextMenu.replace.invalidDimension",r)};S.prototype.ReplaceMeasures=function(e,t,r){this.Replace(e,t,"Common.Replace","contextMenu.replace.invalidMeasure",r)};S.prototype.ColorBy=function(e,t,r){var a=this.item;var n=a.type;var i=["contextMenu.colorBy",a.name];var o=g["a"].getValue(r,"ext.support.colorBy",false);var l=t.canColorBy(null,o);var c=g["a"].getValue(r,"ext.options.colorByPath","color");if("dimension"===n&&l.byDimension||"measure"===n&&l.byMeasure)this.menu.addItem({translation:i,tid:"colorby",select:function r(){var n=g["a"].getValue(t.properties,c);h["a"].setColorByPropertyDef(n,a);O(e,t)}});else if("field"===n&&(l.byMeasure||l.byDimension)){var s=d["a"].escapeField(a.name);var u=this.menu.addItem({translation:"contextMenu.colorByFieldMenu"});l.byDimension&&u.addItem({translation:["contextMenu.colorByDimension",a.name],tid:"colorbyfield",select:function r(){var n=g["a"].getValue(t.properties,c);h["a"].setColorByPropertyDef(n,a);O(e,t)}});if(l.byMeasure){var f=u.addItem({translation:"contextMenu.colorByMeasure"});["Sum","Count","Avg","Min","Max"].forEach((function(r){var n="".concat(r,"(").concat(s,")");f.addItem({label:n,tid:"colorbyfield",select:function r(){var i=g["a"].getValue(t.properties,c);h["a"].setColorByPropertyDef(i,a,n);O(e,t)}})}))}}};function x(e,t){var r=e.top+e.height/2;var a=e.left+e.width/2;l["default"].getService("qvContextMenu").show(t.menu,{position:{x:a,y:r},docking:"Center"})}function k(e){var t={id:"fieldlist",args:{template:"listbox",init:{dimensions:[],visualization:"listbox",gadgets:{Title:{text:c["default"].get("Object.ListBox.Title")}}}}};o.a.each(e,(function(r){t.args.init.dimensions.push({label:e[r].title,field:e[r].id})}));return t}function j(e){var t=void 0===e.id?o()('[id="grid"]'):o()('.qv-gridcell[tid="'.concat(e.id,'"]'),"#grid");var r=t.offset();return{left:r.left,top:r.top,width:t.width(),height:t.height()}}function D(e,t,r){var a=e.object&&e.object.isInvalid;var n="template"===t.type||"visualization"===t.type;var i=r===f["a"].Views.masterObject;var o=e.object&&e.object.ext&&e.object.ext.addChild;return!i&&(a||n)&&!o}function C(e,t,r,a,n){var i=t.id;var o;var l;if(a){a.args.sheet=e;a.args.cell=t}function c(){if(0===l.menu.items.length){s["a"].show({text:"mastereditor.nooption",headerLabel:"Common.InvalidAction"});return}l.Option({text:"Common.Cancel",tid:"cancel"});o=j(t);x(o,l)}if(i){l=new S(i,r,n,t);var d=D(t,r,f["a"].view);if(a&&d){void 0!==l.item.template?a.text=["contextMenu.replaceWithNew",l.item.name]:a.text=["contextMenu.replaceWith",l.item.name];a.tid="replace";l.Option(a)}t.getVisualization().then((function(e){e.getDropOptions(l,c)}))}else if(a)u["a"].publish("/dropAction/".concat(a.id),a.args);else if("state"===r.type){l=new S;l.ApplyAlternateState(e,e,r.id,"contextMenu.applyStateToSheet");c()}t.isEmpty||v["a"].activateCell(t)}function q(){var e;f["a"].model.moveObject&&(e=f["a"].model);return e}u["a"].subscribe("/ui/library/addToSheet",(function(e){var t=e.item;var r=e.itemarray;var a=e.cell;var n=e.event;var i;var o=e.sheet||q();function l(e){C(o,a,t,e,r)}function c(e){if(r)C(o,a,t,k(r),r);else{var n=t.getDropOption(t,e);d["a"].isPromise(n)?n.then((function(e){l(e)})):l(n)}}function s(e,t,r){i=e.id;if(i){var a="measure"===t.type||"dimension"===t.type||"field"===t.type||"expression"===t.type||"state"===t.type;e.object.isLink&&a?m["a"].showNotEditableDialog():c(r)}else c(r)}a||(a=v["a"].getOptimalCell());if(a)if(e.delayClassification&&a.isEmpty){u["a"].publish("/ui/library/classifyOnDemand",a);u["a"].subscribe("/ui/library/classifcationDone",(function(){s(a,t,n)}))}else s(a,t,n)}));u["a"].subscribe("/dropAction/fieldlist",(function(e){var t;function r(){var e=t.shift();if(e){u["a"].publish("/ui/library/addToSheet",{item:e});setTimeout(r,1e3)}}t=p["a"].createFromArray(e.init.dimensions,"label");r()}));u["a"].subscribe("/dropAction/newObject",(function(e){if(e.cell&&e.cell.object&&e.cell.object.ext.addChild&&"container"!==e.template){var t=[];for(var r=0;r<e.children.length;r++)t.push({qChildren:[],qEmbeddedSnapshotRef:null,qProperty:e.children[r]});e.cell.object.ext.addChild(e.init,t);return}var a=e.service||v["a"];if(!E&&!a.isBlocked()){E=true;a.addObject(e).catch((function(){})).finally((function(){setTimeout((function(){E=false}),500)}))}}));t["a"]={getScreenRect:j,DropMenuBuilder:S,showMenu:x}},SGQX:function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("W0B4");var o=r.n(i);var l=r("R82R");var c=r("lxKZ");var s=r("uH2d");function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return u.apply(this,arguments)}function d(e,t){if(null==e)return{};var r=f(e,t);var a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){a=i[n];if(t.indexOf(a)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,a))continue;r[a]=e[a]}}return r}function f(e,t){if(null==e)return{};var r={};var a=Object.keys(e);var n,i;for(i=0;i<a.length;i++){n=a[i];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var p={template:'<qv-object model="model" options="options"/>',controller:[function(){}]};var v=Object(a["memo"])((function(e){var t=e.model,r=e.options,a=d(e,["model","options"]);return n.a.createElement(s["a"],u({component:p,options:{options:r,model:t}},a))}));v.propTypes={model:o.a.object.isRequired,attributes:o.a.object,options:o.a.object};v.defaultProps={attributes:{},options:{}};var m=v;var h=r("jWHD");var b=r("6uJb");var g=r("qIU/");var y=r("xlAv");function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),true).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function O(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){O(i,a,n,o,l,"next",e)}function l(e){O(i,a,n,o,l,"throw",e)}o(void 0)}))}}function k(e,t){return I(e)||q(e,t)||D(e,t)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function q(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function I(e){if(Array.isArray(e))return e}var T=Object(l["a"])((function(e){return{root:{position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",height:"100%",width:"100%",justifyContent:"center",alignItems:"center",pointerEvents:"none"},wrapper:function e(t){var r=t.renderComplete;return{position:"relative",visibility:r?"visible":"hidden"}},label:{color:e.palette.primary.contrastText,paddingBottom:"3px"},alignRight:{textAlign:"right"},container:function t(r){var a=r.objectHeight,n=r.objectWidth,i=r.padding,o=r.scale;return{backgroundColor:e.palette.common.white,borderRadius:e.shape.borderRadius,padding:i,height:a*o,width:n*o}},content:function e(t){var r=t.objectHeight,a=t.objectWidth,n=t.scale;return{transform:"scale(".concat(n,")"),transformOrigin:"top left;",height:r,width:a}},previewGeneratingContainer:{position:"absolute",display:"flex",top:"50%",left:"50%",transform:"translate(-50%,-50%)",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:e.typography.fontWeightMedium,color:e.palette.primary.contrastText,'& div[role="progressbar"]':{color:e.palette.primary.contrastText,marginBottom:e.spacing(1)},width:"100%",height:"100%"},previewGeneratingText:{fontSize:e.typography.fontSize}}}));var A={app:o.a.object.isRequired,direction:o.a.string.isRequired,objectHeight:o.a.number.isRequired,objectWidth:o.a.number.isRequired,padding:o.a.number,showLabel:o.a.bool,snapshotLayout:o.a.object.isRequired,objectId:o.a.string,viewState:o.a.object,infoText:o.a.string.isRequired,renderFooterContent:o.a.func};var P={padding:8,showLabel:true,viewState:void 0,renderFooterContent:function e(){return null},objectId:""};var M=function e(t){var r,i;var o=t.app,l=t.direction,s=t.objectHeight,u=t.objectWidth,d=t.padding,f=t.viewState,p=t.snapshotLayout,v=t.objectId,w=t.infoText,S=t.showLabel,O=t.renderFooterContent;var j=Object(a["useRef"])();var D=Object(a["useRef"])();var C=Object(a["useState"])(null),q=k(C,2),I=q[0],A=q[1];var P=Object(a["useState"])(null),M=k(P,2),N=M[0],R=M[1];var L=null!==I;var V=null===D||void 0===D||null===(r=D.current)||void 0===r?void 0:r.offsetHeight;var _=null===D||void 0===D||null===(i=D.current)||void 0===i?void 0:i.offsetWidth;var B=function(){var e=x(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:if(!("qlik-variance-waterfall"===(null===p||void 0===p?void 0:p.visualization))){i.next=4;break}t=function e(t){return new Promise((function(e){return setTimeout(e,t)}))};i.next=4;return t(150);case 4:r=(D.current.offsetHeight-2*d)/s;a=(D.current.offsetWidth-2*d)/u;n=Math.min(1,r,a);A(n);case 8:case"end":return i.stop()}}),e)})));return function t(){return e.apply(this,arguments)}}();Object(a["useEffect"])((function(){A(null);R(null);var e=false;o.getLocaleInfo().then(function(){var t=x(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function t(n){while(1)switch(n.prev=n.next){case 0:if(!v){n.next=6;break}n.next=3;return o.getObject(v);case 3:a=n.sent;n.next=8;break;case 6:a=g["a"].getMockedModel(p,r);a.Invalidated={bind:function e(){},unbind:function e(){}};case 8:e||R(a);case 9:case"end":return n.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){e=true}}),[p]);Object(a["useEffect"])((function(){L&&B()}),[L,_,V]);var F=T({renderComplete:L,objectHeight:s,objectWidth:u,padding:d,scale:I||1});return n.a.createElement("div",{ref:D,className:F.root},!L&&n.a.createElement("div",{className:F.previewGeneratingContainer,"data-testid":"chartPreview-loadingStateContainer"},n.a.createElement(c["a"],null),n.a.createElement("div",{className:F.previewGeneratingText},b["default"].get("ChartPreview.Generating"))),n.a.createElement("div",{className:F.wrapper,"data-testid":"chartPreview-previewWrapper"},S&&n.a.createElement("div",{className:F.label,"data-testid":"chartPreview-previewLabel"},n.a.createElement("span",null,b["default"].get("Common.Preview"))),n.a.createElement("div",{ref:j,className:F.container},N?n.a.createElement(m,{className:F.content,model:N,options:E(E({},v?{}:{APIType:y["a"]}),{},{direction:l,isVisible:true,isResizable:false,isReadonly:true,interactionState:h["a"].STATIC,onRendered:B,viewState:f})}):null),O(),n.a.createElement("div",{className:"".concat(F.label," ").concat(F.alignRight)},n.a.createElement("span",null," ",w," "))))};M.propTypes=A;M.defaultProps=P;var N=t["a"]=M},UI2D:function(e,t,r){"use strict";var a='<lui-dialog class="st-dialog" x-variant="{{::variant}}" x-arrow="arrow">\n    <lui-dialog-header>\n        <span q-translation="{{headerLabel}}"></span>\n    </lui-dialog-header>\n    <lui-dialog-body>\n        <div class="qv-mvc-dialog-icon icon-{{icon}}" ng-show="icon"></div>\n        <p><span q-translation="{{text}}"></span></p>\n    </lui-dialog-body>\n    <lui-dialog-footer>\n        <button class="lui-button lui-dialog__footer-button" ng-click="close()" q-translation="{{confirmLabel}}"></button>\n    </lui-dialog-footer>\n</lui-dialog>\n';var n=r("mWu2");function i(e){var t=e.text;var r=void 0!==e.icon?e.icon:"cogwheel";var i=e.confirm||"Common.OK";var o=e.headerLabel||"Common.Notification";var l={text:t,icon:r,headerLabel:o,confirmLabel:i};var c=n["default"].getService("luiDialog");c.show({template:a,input:l,closeOnEscape:true})}var o=t["a"]={show:i}},WKSh:function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("V2/N");var o=r("R82R");var l=r("9TP3");var c=r("9a/l");var s=r("/NZN");var u=r("Gx4H");var d=r("0ghn");var f=r("OU/z");var p=r("MGTR");function v(e,t){return y(e)||g(e,t)||h(e,t)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function g(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function y(e){if(Array.isArray(e))return e}var w=Object(o["a"])((function(e){return{selected:{backgroundColor:e.palette.action.selected}}}));var E=function e(t){var r=t.app;var i=w();var o=Object(d["c"])();var l=Object(a["useState"])(false),c=v(l,2),m=c[0],h=c[1];var b=function e(){if(!r)return;f["a"].toggleGlobalSearch(r.enigmaModel,false)};var g=function e(){h(true)};var y=function e(){h(false)};var E=function e(){h(false);f["a"].off()};Object(a["useEffect"])((function(){p["a"].subscribe("/smartsearch/open",g);p["a"].subscribe("/smartsearch/close",y);p["a"].subscribe("/globalselections/open",E);return function(){p["a"].unsubscribe("/smartsearch/open",g);p["a"].unsubscribe("/smartsearch/close",y);p["a"].unsubscribe("/globalselections/open",E);E()}}),[]);return n.a.createElement(s["a"],{tid:"toggleGlobalSearchButton",title:o(m?"Tooltip.CloseGlobalSearch":"Tooltip.GlobalSearch"),className:m?i.selected:"",onClick:b},n.a.createElement(u["a"],null))};var S=E;var O=r("/ZiB");var x=r("M568");var k=r("A1Oj");var j=r("bhmx");var D=r("CIhp");var C=r("YE3e");var q=r("pdRV");var I=function e(t){return t.filter((function(e){return!e.qIsHidden}))};var T=function e(t){return t.some((function(e){return e.qIsHidden}))};var A=function e(t){return t.map((function(e){var t=e;t.key=t.states?"".concat(t.states.join("::"),"::").concat(t.qField):t.qField;return t}))};var P=function e(t){return q["a"].getAllSelectionsInStates(t)};var M=function e(t){var r=I(t);var a=q["a"].groupSelectionsByField(r);return A(a)};var N={hasHiddenSelections:T,getVisibleSelections:I,getAllSelectionsInStates:P,getSelectionsGroupedInFields:M,generateKeys:A};var R=r("MK7S");var L=r("k/1C");var V=r("cmwo");var _=r("oQEK");var B=r("Rx6o");var F=r("oRXB");var H={getSelectedFieldsString:F["a"].translate,getRemoveTitleString:F["a"].translatedRemoveTitle,getAriaLabelString:F["a"].translatedScreenReaderLabel};var z=144;var W=Object(o["a"])((function(e){return{grid:{width:"".concat(z,"px"),cursor:"pointer",borderRadius:e.shape.borderRadius,boxShadow:e.shadows[1],background:e.palette.background.paper,"&:hover":{background:"rgba(0, 0, 0, 0.03)"},"&:active":{background:Object(B["d"])(e.palette.common.black,.1)},"&:focus":{boxShadow:"0 0 0 ".concat(e.shape.borderRadius,"px ").concat(V["a"].MISC_FOCUS_BORDER),overflow:"overlay"}},header:{minWidth:0,border:"".concat(e.spacing(.25),"px solid transparent")},fieldName:{fontSize:"11px",lineHeight:"11px",color:e.palette.text.primary,fontWeight:e.typography.fontWeightMedium,marginLeft:e.spacing(.25),marginTop:e.spacing(.25)},label:{fontSize:"10px",lineHeight:"11px",color:e.palette.text.secondary,marginLeft:e.spacing(.25)},locked:{color:e.palette.text.disabled},lockIcon:{padding:"7px"}}}));var G=function e(t){t.preventDefault();t.stopPropagation()};var $=function e(t){var r=t.field;var a=W();if(!r)return null;return n.a.createElement(i["a"],{container:true,tabIndex:"0",role:"button",className:a.grid,"aria-label":H.getAriaLabelString(r)},n.a.createElement(i["a"],{item:true,xs:12},n.a.createElement(i["a"],{container:true},n.a.createElement(i["a"],{item:true,xs:true,className:a.header,onMouseDown:G},n.a.createElement(O["a"],{noWrap:true,className:"".concat(a.fieldName," ").concat(r.qLocked?a.locked:"")},r.qReadableName||r.qField),n.a.createElement(O["a"],{noWrap:true,className:"".concat(a.label," ").concat(r.qLocked?a.locked:"")},H.getSelectedFieldsString(r))),r.qLocked?n.a.createElement(i["a"],{item:true},n.a.createElement(L["a"],{size:"small","data-testid":"lock-icon",className:a.lockIcon})):n.a.createElement(i["a"],{item:true},n.a.createElement(_["a"],{title:H.getRemoveTitleString(r),style:{zIndex:1}},n.a.createElement(R["a"],{size:"small"}))))))};var U=$;function Y(e,t){return J(e)||Z(e,t)||K(e,t)||X()}function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Z(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function J(e){if(Array.isArray(e))return e}var ee=Object(o["a"])((function(e){return{selectionsContainer:{height:"100%",alignItems:"center"},noSelections:{fontSize:e.typography.subtitle2.fontSize,color:e.typography.subtitle2.color},itemMargin:{marginRight:e.spacing(.5)}}}));var te=function e(t){var r=t.app;var o=ee();var l=Object(d["c"])();var c=Object(D["a"])(r),u=Y(c,1),f=u[0];var p=Object(C["a"])(f),v=Y(p,1),m=v[0];var h=Object(a["useState"])({fields:[]}),b=Y(h,2),g=b[0],y=b[1];var w=Object(a["useState"])(false),E=Y(w,2),S=E[0],q=E[1];Object(a["useEffect"])((function(){if(!(null===m||void 0===m?void 0:m.selectionsInStates))return;var e=N.getAllSelectionsInStates(m);q(N.hasHiddenSelections(e));y({fields:N.getSelectionsGroupedInFields(e)})}),[m]);return n.a.createElement(i["a"],{container:true,wrap:"nowrap",className:o.selectionsContainer},n.a.createElement(i["a"],{item:true,className:o.itemMargin},n.a.createElement(s["a"],null,n.a.createElement(k["a"],null))),n.a.createElement(i["a"],{item:true,className:o.itemMargin},n.a.createElement(s["a"],null,n.a.createElement(j["a"],null))),n.a.createElement(i["a"],{item:true,className:o.itemMargin},n.a.createElement(s["a"],null,n.a.createElement(x["a"],null))),g.fields.map((function(e){return n.a.createElement(i["a"],{item:true,key:e.key,className:o.itemMargin},n.a.createElement(U,{field:e}))})),!g.fields.length&&S?n.a.createElement(i["a"],{item:true,xs:true,className:o.itemMargin},n.a.createElement(O["a"],{noWrap:true,className:o.noSelections},l("CurrentSelections.OnlyHiddenSelections"))):null,g.fields.length||S?null:n.a.createElement(i["a"],{item:true,xs:true,className:o.itemMargin},n.a.createElement(O["a"],{noWrap:true,className:o.noSelections},l("CurrentSelections.NoSelections"))))};var re=te;var ae=r("73X3");var ne=r("plVp");function ie(e,t){return ue(e)||se(e,t)||le(e,t)||oe()}function oe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function se(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function ue(e){if(Array.isArray(e))return e}var de=Object(o["a"])((function(e){return{selected:{backgroundColor:e.palette.action.selected}}}));var fe=function e(t){var r=t.app;var i=de();var o=Object(d["c"])();var l=Object(a["useState"])(false),c=ie(l,2),u=c[0],f=c[1];var v=function e(){if(!r)return;ne["a"].toggleGlobalSelection(r)};var m=function e(){f(true)};var h=function e(){f(false)};var b=function e(){f(false);ne["a"].off()};Object(a["useEffect"])((function(){p["a"].subscribe("/globalselections/open",m);p["a"].subscribe("/globalselections/close",h);p["a"].subscribe("/smartsearch/open",b);return function(){p["a"].unsubscribe("/globalselections/open",m);p["a"].unsubscribe("/globalselections/close",h);p["a"].unsubscribe("/smartsearch/open",b);b()}}),[]);return n.a.createElement(s["a"],{tid:"currentSelections.toggleGlobalSelections",title:o(u?"Tooltip.CloseGlobalSelector":"Tooltip.GlobalSelector"),className:u?i.selected:"",onClick:v,"aria-hidden":"true"},n.a.createElement(ae["a"],null))};var pe=fe;function ve(e,t){return ye(e)||ge(e,t)||he(e,t)||me()}function me(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function he(e,t){if(!e)return;if("string"===typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ge(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function ye(e){if(Array.isArray(e))return e}var we=Object(o["a"])((function(e){return{grid:{height:40,padding:e.spacing(.5),backgroundColor:e.palette.background.default},itemMargin:{marginRight:e.spacing(.5)}}}));var Ee=function e(t){var r=t.appId;var a=we();var o=Object(l["a"])(r),s=ve(o,1),u=s[0];return n.a.createElement(i["a"],{container:true,wrap:"nowrap",className:"qvt-selections ".concat(a.grid)},c["a"].isFeatureBlacklisted("search")?null:n.a.createElement(i["a"],{item:true,className:a.itemMargin},n.a.createElement(S,{app:u})),n.a.createElement(i["a"],{xs:true,item:true},n.a.createElement(re,{app:u})),n.a.createElement(i["a"],{item:true},n.a.createElement(pe,{app:u})))};var Se=t["a"]=Ee},YE3e:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var a=r("mXGw");var n=r.n(a);function i(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function l(e){i(o,a,n,l,c,"next",e)}function c(e){i(o,a,n,l,c,"throw",e)}l(void 0)}))}}function l(e,t){return f(e)||d(e,t)||s(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function f(e){if(Array.isArray(e))return e}function p(e){var t=Object(a["useState"])(),r=l(t,2),n=r[0],i=r[1];var c=Object(a["useState"])(),s=l(c,2),u=s[0],d=s[1];Object(a["useEffect"])((function(){var t=true;function r(){return a.apply(this,arguments)}function a(){a=o(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function r(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return e.getLayout(true);case 3:a=n.sent;if(t){d();i(a)}n.next=11;break;case 7:n.prev=7;n.t0=n["catch"](0);d(n.t0);i();case 11:case"end":return n.stop()}}),r,null,[[0,7]])})));return a.apply(this,arguments)}if(e){r();e.Invalidated.bind(r);return function(){t=false;e.Invalidated.unbind(r)}}return}),[e&&e.id]);return[n,u]}},aT3D:function(e,t,r){"use strict";var a={};var n={moz:"-moz-linear-gradient(",webkit:"-webkit-linear-gradient(",opera:" -o-linear-gradient(",ie:"-ms-linear-gradient(",w3c:"linear-gradient(to "};var i={top:"bottom",bottom:"top",right:"left",left:"right"};a.getCSSLinearGradient=function(e,t,r,a){if(1===t.length)return"background:".concat(t[0],";");var o="";var l=")";if(a)for(var c=t.length-1;c>=0;c--)o+=", ".concat(t[c]," ").concat(100-r[c],"%");else for(var s=0;s<t.length;s++)o+=", ".concat(t[s]," ").concat(r[s],"%");return"background:".concat(t[Math.floor(t.length/2)],"; background:").concat(n.moz).concat(i[e]).concat(o).concat(l,"; background:").concat(n.webkit).concat(i[e]).concat(o).concat(l,"; background:").concat(n.opera).concat(i[e]).concat(o).concat(l,"; background:").concat(n.ie).concat(i[e]).concat(o).concat(l,"; background:").concat(n.w3c).concat(e).concat(o).concat(l,";")};t["a"]=a},cA4R:function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("W0B4");var o=r.n(i);function l(){l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return l.apply(this,arguments)}var c=a["createElement"]("g",{fill:"none",fillRule:"evenodd",strokeWidth:1.5},a["createElement"]("path",{stroke:"#55565C",strokeLinecap:"round",strokeLinejoin:"round",d:"M107.538 7.54v8.49a5.093 5.093 0 005.093 5.092h8.49"}),a["createElement"]("path",{stroke:"#55565C",strokeLinecap:"round",strokeLinejoin:"round",d:"M.75 38.1V7.54A6.792 6.792 0 017.541.749h100.58c1.801 0 3.528.716 4.802 1.99l12.999 13a6.79 6.79 0 011.989 4.8v58.308c0 3.75-3.04 6.79-6.791 6.79H7.541a6.792 6.792 0 01-6.791-6.79S1.09 38.1.75 38.1z"}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",d:"M20.94 91.076v1.5"}),a["createElement"]("path",{stroke:"#009A4D",strokeDasharray:"3.012 3.012",strokeLinecap:"round",d:"M20.94 95.588v4.858c0 2.454 1.873 4.442 4.184 4.442h118.531c2.31 0 4.183-1.988 4.183-4.442V24.517c0-2.453-1.873-4.442-4.183-4.442h-7.81"}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",d:"M134.339 20.076h-1.5"}),a["createElement"]("path",{stroke:"#55565C",d:"M63.95 58.42c-8.623 0-15.61-6.988-15.61-15.609 0-8.622 6.987-15.61 15.61-15.61 8.62 0 15.608 6.988 15.608 15.61 0 8.621-6.988 15.61-15.609 15.61z"}),a["createElement"]("path",{stroke:"#009A4D",strokeLinecap:"round",d:"M59.339 38.2a4.624 4.624 0 014.625-4.625 4.624 4.624 0 014.625 4.625c0 2.555-1.992 3.084-3.964 4.708-1.404 1.157-1.404 2.56-1.404 4.79m-.007 3.502v.625"}));function s(e){return a["createElement"]("svg",l({width:149,height:106},e),c)}var u="../../img/core/Missing_sheet_green.89540dc07dc55d103694d7eb67d5f00e.svg";var d=function e(t){var r=t.title,a=t.message,i=t.children;return n.a.createElement("div",{className:"qs-view-error"},n.a.createElement("div",{className:"qs-view-error__center"},n.a.createElement("div",{className:"qs-view-error__image"},n.a.createElement(s,null)),n.a.createElement("div",{className:"qs-view-error__title"},r),n.a.createElement("div",{className:"qs-view-error__message"},a),n.a.createElement("div",null,i)))};d.propTypes={message:o.a.string.isRequired,title:o.a.string.isRequired,children:o.a.node.isRequired};var f=t["a"]=d},"mTQ/":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var a=r("mXGw");var n=r.n(a);function i(e,t){return u(e)||s(e,t)||l(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function s(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function u(e){if(Array.isArray(e))return e}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),true).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var v=function e(t,r){switch(r.type){case"queryItems":return f(f({},t),{},{queryItems:r.queryItems});case"fields":return f(f({},t),{},{fields:r.fields});default:return t}};var m={queryItems:[],fields:[]};var h=Object(a["createContext"])(m);var b=function e(t){var r=Object(a["useReducer"])(v,m),o=i(r,2),l=o[0],c=o[1];return n.a.createElement(h.Provider,{value:{insightsState:l,dispatch:c}},t.children)};t["b"]=h},rVGN:function(e,t,r){"use strict";var a=r("fbWF");var n=r("6Z/P");var i=r("sWge");var o=r("PX8M");var l=r("4nJ1");var c=r("acVu");function s(e){return e.map((function(e){Number.isNaN(+e)||(e=+e);if("number"===typeof e)return{qIsNumeric:true,qNumber:e};if("string"===typeof e)return{qText:e};return e}))}function u(e){if(!Object(c["b"])("CLOUD_SHARING_SERVICE"))return;var t=l["a"].getParameterByName("insight");t&&a["a"].getInsightDetails(t).then((function(t){n["a"].highlightedCell(t.chartID);var r=e?i["a"].resolve(e):o["a"].getApp();r.then((function(e){d(t.selections,e)}))}))}function d(e,t){if(e&&t)return t.clearAll().then((function(){e.forEach((function(e){t.getField(e.name).then((function(t){var r=s(e.values);t.selectValues(r,false,true)}))}))}));return}t["a"]={applyLink:u,formatValues:s,applySelections:d}},rkyv:function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("cWJj");var o=r("vMhA");function l(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){l(i,a,n,o,c,"next",e)}function c(e){l(i,a,n,o,c,"throw",e)}o(void 0)}))}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),true).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function f(e,t){if(null==e)return{};var r=p(e,t);var a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){a=i[n];if(t.indexOf(a)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,a))continue;r[a]=e[a]}}return r}function p(e,t){if(null==e)return{};var r={};var a=Object.keys(e);var n,i;for(i=0;i<a.length;i++){n=a[i];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v(e,t){return y(e)||g(e,t)||h(e,t)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function g(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function y(e){if(Array.isArray(e))return e}var w=function e(){var t=Object(a["useState"])(void 0),r=v(t,2),n=r[0],l=r[1];var s=function e(t){return t.map((function(e){var t=e.values,r=e.displayValues,a=f(e,["values","displayValues"]);return u(u({},a),{},{values:t.map(String),displayValues:r})}))};var d=Object(a["useCallback"])(function(){var e=c(regeneratorRuntime.mark((function e(t){var r,a,n,c;return regeneratorRuntime.wrap((function e(u){while(1)switch(u.prev=u.next){case 0:u.next=2;return i["a"].get(t);case 2:r=u.sent;u.next=5;return r.getLayout();case 5:a=u.sent;u.next=8;return o["a"].get(a,t.enigmaModel,true);case 8:n=u.sent;c=s(n);l(c);case 11:case"end":return u.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return[n,d]};t["a"]=w},uH2d:function(e,t,r){"use strict";var a=r("mXGw");var n=r.n(a);var i=r("W0B4");var o=r.n(i);var l=r("mWu2");function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return c.apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),true).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function f(e,t){return b(e)||h(e,t)||v(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function h(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function b(e){if(Array.isArray(e))return e}function g(e,t){if(null==e)return{};var r=y(e,t);var a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){a=i[n];if(t.indexOf(a)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,a))continue;r[a]=e[a]}}return r}function y(e,t){if(null==e)return{};var r={};var a=Object.keys(e);var n,i;for(i=0;i<a.length;i++){n=a[i];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var w=Object(a["memo"])((function(e){var t=e.component,r=e.options,i=g(e,["component","options"]);var o=Object(a["useState"])(),s=f(o,2),d=s[0],p=s[1];var v=Object(a["useRef"])();Object(a["useEffect"])((function(){if(!t)return null;var e=u({controller:[function(){}]},t);var a=l["default"].showComponent(v.current,e,r);p(a);return function(){a.internal__do_not_use__destroy()}}),[t]);Object(a["useEffect"])((function(){d&&d.internal__do_not_use__update(r)}),[r]);return n.a.createElement("div",c({},i,{ref:v}))}));w.propTypes={component:o.a.object.isRequired,options:o.a.object};w.defaultProps={options:{}};t["a"]=w},vdVY:function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i=r("Z9ZH");var o=r.n(i);var l=r("mWu2");var c=r("+nQQ");var s=r("CXZG");var u=r("acVu");function d(e,t,r,a){if(t.validDrop){var n=t.snapToGrid.gridSize.width;var i=r.x-t.snapToGrid.targetRect.left;var o=r.y-t.snapToGrid.targetRect.top;var l=e.gestureData.swipe;var c=Math.sqrt(Math.pow(l.curDeltaX,2)+Math.pow(l.curDeltaY,2));var s=a.getBoundingClientRect();var u=c<10&&0!==s.top&&0!==s.left;r.x=t.snapToGrid.targetRect.left+(i/n).toFixed()*n;r.y=t.snapToGrid.targetRect.top+(o/n).toFixed()*n;u?a.classList.add("smooth-snapping"):a.classList.remove("smooth-snapping")}else a.classList.remove("smooth-snapping")}function f(e,t){s["a"].addDrag(t,".qv-story-library-item",{allowScroll:true,isEnabled:function t(){return!e.inEdit},cond:function e(t){var r=Object(u["b"])("NEW_STORY")||Object(u["b"])("SUB_TOOLBAR")?"left":"right";return!o.a.utils.touch||t.direction===r&&t.distance>7},onStart:function e(t){var r=n()(t.currentTarget);var a=r.scope();a.validDrop=false;t.currentTarget.style.opacity=.5},onStop:function t(r){var a=n()(r.currentTarget).scope();if(a.effect){n()(".qv-grid-story").scope().$broadcast("dropEffect",n.a.extend(true,{},a.effect));n()(".slide-item-content").not(":has(.qv-snapshot)").removeClass("not-applicable")}e.closePopover()},info:function e(t){return{type:"storyitem",item:t,snapToGrid:{gridSize:{width:c["a"].getGridOptions().cellSize.width,height:c["a"].getGridOptions().cellSize.height},snapFunc:d}}},elem:function t(r){var a=r.currentTarget;var i=n()(a).scope();var o=a.cloneNode(true);p(e,n()(o),i);o.classList.add("ui-draggable-dragging");e.$apply((function(){e.hidePopover()}));return o}})}function p(e,t,r){var a=c["a"].getGridOptions().cellSize;var i=a.height*e.helperSize.height;var o=a.width*e.helperSize.width;var l=-1;var s=-1;if(r.text&&"title"===r.text.textType){i=3*a.height;o=19*a.width;l=.5*i;s=i}else if(r.text&&"paragraph"===r.text.textType){l=.1*i;s=.2*i}else if(r.effect){i=20*e.helperSize.height;o=20*e.helperSize.width;n()(".qv-grid-story").scope().$broadcast("draggingEffect",r.effect);n()(".slide-item-content").not(":has(.qv-snapshot)").addClass("not-applicable")}else if(r.snapshot){var u=r.snapshot.qData.snapshotData;var d=v(u);var f=c["a"].getGridOptions();i=d.rows>=f.rows?(f.rows-1)*a.height:a.height*d.rows;o=d.cols>=f.columns?(f.columns-1)*a.width:a.width*d.cols;l=.2*Math.min(i,o);s=l}t.css({height:Math.round(i),width:Math.round(o),"font-size":l>0?"".concat(Math.round(l),"px"):"inherit","line-height":s>0?"".concat(Math.round(s),"px"):"inherit"})}function v(e){var t=e.object.size.w/e.object.size.h;var r;var a;var n;var i;var o=c["a"].getGridOptions().columns;var l=c["a"].getGridOptions().rows;if(e.parent.w>e.parent.h){r=e.object.size.h/e.parent.h;n=l*r;i=n*t;if(i>o){i=o;n=i/t}}else{a=e.object.size.w/e.parent.w;i=o*a;n=i/t;if(n>l){n=l;i=n*t}}return{rows:Math.round(n),cols:Math.round(i)}}l["default"].directive("storyLibraryDraggable",["$timeout",function(e){return{restrict:"A",scope:true,link:function t(r,a){e((function(){r.showMiniLibrary||f(r,a)}))}}}])},woTi:function(e,t,r){"use strict";var a=r("JP+O");var n=r("/irJ");t["a"]=function(e,t){a["a"].duplicateSheet(e).then((function(e){t&&e.getProperties().then((function(e){n["a"].goToSheet(e.qInfo.qId,"edit")}));return e}))}},xcgN:function(e,t,r){"use strict";r.d(t,"a",(function(){return at}));var a=r("mXGw");var n=r.n(a);var i=r("MGTR");var o=r("W0B4");var l=r.n(o);var c=r("lOOT");var s=r("1Dig");var u=r("5rAF");var d=r("wGBp");var f=r("p8SL");var p=r("YvUk");var v=r("/ZiB");var m=r("oQEK");var h=r("26BU");var b=r("3Dqh");var g=r("BAq9");var y=r("6vEY");var w=r("59K6");var E=r("Qyht");var S=r("0g17");var O=r("lxKZ");var x=r("/NZN");var k=r("cmwo");var j=r("sTbi");var D=r("HubC");var C=r("R82R");var q=r("Rx6o");var I=r("MK7S");var T=r("4cZo");var A=r("Qpod");var P=r("SGQX");var M=r("rkyv");var N=r("6uJb");var R=r("czhI");var L=r.n(R);var V=r("/2No");function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),true).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function H(e){return $(e)||G(e)||W(e)||z()}function z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function W(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}function G(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function $(e){if(Array.isArray(e))return U(e)}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Y(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function X(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Y(i,a,n,o,l,"next",e)}function l(e){Y(i,a,n,o,l,"throw",e)}o(void 0)}))}}var K="".concat(V["a"].rootPath,"api/v1/sharing/tasks");var Q="".concat(V["a"].rootPath,"api/v1/items");var Z="".concat(V["a"].rootPath,"api/v1/collections");var J=1600;var ee=1e3;var te=["barchart","piechart","linechart","mekkochart","qlik-funnel-chart-ext","qlik-sankey-chart-ext"];var re=["kpi","bulletchart","sn-org-chart"];function ae(e,t,r,a,n,i,o,l,c,s){return{type:"chart",fileAlias:e,chartData:{appId:t,sheetId:r,objectId:a,objectDef:s,widthPx:i,heightPx:n,outZoom:o,outDpi:192,jsOpts:l,patches:c}}}function ne(e){return ie.apply(this,arguments)}function ie(){ie=X(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:r={params:{query:t,limit:20,sort:"+name",type:"public"}};n.next=3;return L.a.get(Z,r);case 3:a=n.sent;return n.abrupt("return",a.data);case 5:case"end":return n.stop()}}),e)})));return ie.apply(this,arguments)}function oe(e,t,r,a,n,i,o,l){return le.apply(this,arguments)}function le(){le=X(regeneratorRuntime.mark((function e(t,r,a,n,i,o,l,c){var s,u;return regeneratorRuntime.wrap((function e(d){while(1)switch(d.prev=d.next){case 0:s={name:t,resourceId:r,resourceType:"sharingservicetask",resourceSubType:"chart-monitoring",resourceAttributes:{sourceAppId:c,ownerId:l,insightLink:a,thumbnail:n,snapshotLink:i},resourceCreatedAt:o};d.next=3;return L.a.post(Q,s);case 3:u=d.sent;return d.abrupt("return",u);case 5:case"end":return d.stop()}}),e)})));return le.apply(this,arguments)}function ce(e,t,r,a,n,i,o,l,c,s,u,d,f,p,v){return se.apply(this,arguments)}function se(){se=X(regeneratorRuntime.mark((function e(t,r,a,n,i,o,l,c,s,u,d,f,p,v,m){var h,b,g;return regeneratorRuntime.wrap((function e(y){while(1)switch(y.prev=y.next){case 0:h=[].concat(te,H(f?re:[])).includes(u);b={name:t,appName:r,type:"chart-monitoring",executeOnCreation:true,tags:[],retentionPolicy:{historySize:10,overrideInterval:"FREQ=DAILY;INTERVAL=1"},trigger:{recurrence:[],executeOnAppReload:true,executionHistoryInterval:"daily"},templates:[ae("image-small",a,i,o,l,c,Number((ee/c).toFixed(2)),s,d,p),ae("image-large",a,i,o,l,c,Number((J/c).toFixed(2)),s,d,p)].concat(H(h?[B(B({},ae("snapshot",a,i,o,l,c,Number((J/c).toFixed(2)),s,d,p)),{},{subType:"snapshot"})]:[])),state:{selections:n,fields:v,queryItems:m}};y.next=4;return L.a.post(K,b);case 4:g=y.sent;return y.abrupt("return",g);case 6:case"end":return y.stop()}}),e)})));return se.apply(this,arguments)}function ue(e){return de.apply(this,arguments)}function de(){de=X(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:r={name:t,type:"public"};n.next=3;return L.a.post(Z,r);case 3:a=n.sent;return n.abrupt("return",a);case 5:case"end":return n.stop()}}),e)})));return de.apply(this,arguments)}function fe(e,t){return pe.apply(this,arguments)}function pe(){pe=X(regeneratorRuntime.mark((function e(t,r){var a,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:a={id:t};i.next=3;return L.a.post("".concat(Z,"/").concat(r,"/items"),a);case 3:n=i.sent;return i.abrupt("return",n);case 5:case"end":return i.stop()}}),e)})));return pe.apply(this,arguments)}var ve={createShareTask:ce,addShareTaskToCollections:oe,fetchTags:ne,createTag:ue,applyTagToItem:fe};var me=r("vtWz");var he=r("RZ9f");var be=r("UV1h");var ge=r("GbxD");var ye=r("acVu");function we(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Ee(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){we(i,a,n,o,l,"next",e)}function l(e){we(i,a,n,o,l,"throw",e)}o(void 0)}))}}function Se(e,t){return De(e)||je(e,t)||xe(e,t)||Oe()}function Oe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xe(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function je(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function De(e){if(Array.isArray(e))return e}var Ce=Object(C["a"])((function(e){return{dialogContent:{padding:0,display:"flex",flexDirection:"column"},dialogActions:{borderTop:"1px solid rgba(0,0,0,0.2)",backgroundColor:"#FBFBFB"},addToHubButton:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},addToHubButtonWarning:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main,"&:hover":{backgroundColor:e.palette.warning.light},"&:active":{backgroundColor:e.palette.warning.dark},"&.sprout-focus-visible":{borderColor:e.palette.warning.light,boxShadow:"0 0 0 3px ".concat(Object(q["d"])(e.palette.warning.light,.5))}},controlLabel:{color:e.palette.text.primary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(1),marginTop:e.spacing(2)},contentWrapper:function t(r){var a=r.fullScreen;return{display:"flex",flex:"0 0 175px",flexDirection:"column",overflowY:a?"auto":"visible",padding:e.spacing(4)}},descriptiveText:{paddingBottom:"10px"},previewWrapper:function t(r){var a=r.fullScreen;return{backgroundColor:"#525659",boxSizing:"border-box",flex:a?"1 1 100%":"1 0 350px",overflow:"hidden",height:"350px",padding:e.spacing(4)}},errorIcon:{color:e.palette.error.main},footerError:{display:"flex",alignItems:"center",marginRight:e.spacing(2)},footerErrorIcon:{marginRight:e.spacing(1)},circularProgress:{color:e.palette.text.primary,marginLeft:e.spacing(2)},viewStateToggle:{color:k["a"].GREYSCALE_100,display:"flex",alignItems:"center",pointerEvents:"initial"},viewStateCheckbox:{paddingLeft:0,paddingRight:e.spacing(1)},viewStateTooltipIcon:{marginLeft:e.spacing(1),color:k["a"].GREYSCALE_60}}}));var qe={show:l.a.bool,sheetId:l.a.string.isRequired,objectId:l.a.string.isRequired,objectDef:l.a.object,objectHeight:l.a.number.isRequired,objectWidth:l.a.number.isRequired,app:l.a.object.isRequired,direction:l.a.string.isRequired,viewState:l.a.object.isRequired,snapshotLayout:l.a.object.isRequired,title:l.a.string,patches:l.a.array.isRequired,fields:l.a.array,queryItems:l.a.array};var Ie={show:false,title:"",objectDef:void 0,fields:[],queryItems:[]};var Te=function e(t){var r=t.show,o=t.objectWidth,l=t.objectHeight,k=t.app,C=t.direction,q=t.viewState,R=t.snapshotLayout,L=t.snapshotLayoutWithoutViewState,V=t.sheetId,_=t.objectId,B=t.objectDef,F=t.title,H=t.patches,z=t.fields,W=t.queryItems;var G=["barchart","linechart","scatterplot","piechart","pivot-table","table","boxplot","bulletchart","distributionplot","histogram","map","sn-org-chart","combochart"];var $=Object(ye["b"])("CHART_MONITORING_VIEW_STATE")&&G.includes(R.visualization);var U=!!B;var Y=Ce();var X=Object(c["a"])();var K=Object(s["a"])(X.breakpoints.down("sm"));var Q=Object(a["useState"])(F||N["default"].get("AddToHub.Dialog.DefaultChartName")),Z=Se(Q,2),J=Z[0],ee=Z[1];var te=Object(M["a"])(),re=Se(te,2),ae=re[0],ne=re[1];var ie=Object(a["useState"])([]),oe=Se(ie,2),le=oe[0],ce=oe[1];var se=Object(a["useState"])(true),ue=Se(se,2),de=ue[0],fe=ue[1];var pe=Object(a["useState"])(false),we=Se(pe,2),Oe=we[0],xe=we[1];var ke=Object(a["useState"])(false),je=Se(ke,2),De=je[0],qe=je[1];var Ie=Object(a["useState"])([]),Te=Se(Ie,2),Ae=Te[0],Pe=Te[1];var Me=Object(a["useState"])($?R:L),Ne=Se(Me,2),Re=Ne[0],Le=Ne[1];var Ve=Object(a["useState"])(false),_e=Se(Ve,2),Be=_e[0],Fe=_e[1];var He=be["a"].getCurrentTheme();Object(a["useEffect"])((function(){var e=function(){var e=Ee(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return k.global.getConfiguration();case 3:t=n.sent;r=t.qFeatures;if(!(r.qAutoSave&&k.layout.permissions.update)){n.next=8;break}n.next=8;return k.doSave();case 8:n.next=10;return ne(k);case 10:n.next=12;return ge["a"].getVariables(k);case 12:a=n.sent;ce(a);fe(false);n.next=19;break;case 17:n.prev=17;n.t0=n["catch"](0);case 19:case"end":return n.stop()}}),e,null,[[0,17]])})));return function t(){return e.apply(this,arguments)}}();e()}),[]);Object(a["useEffect"])((function(){$&&Le(Be?R:L)}),[Be]);var ze=function e(){i["a"].publish(me["a"].CLOSE)};var We=function e(){return!J};var Ge=function e(t){ee(t.target.value)};var $e=function(){var e=Ee(regeneratorRuntime.mark((function e(){var t,r,a,n,c,s,u,d,f,p,v,m,h,b,g,y;return regeneratorRuntime.wrap((function e(w){while(1)switch(w.prev=w.next){case 0:w.prev=0;xe(true);qe(false);n={language:N["default"].language,theme:He,viewState:Be?q:void 0,variables:le};w.next=6;return ve.createShareTask(J,k.layout.qTitle,k.id,ae,V,_,l,o,n,Re.visualization,H,Object(ye["b"])("CHART_MONITORING_MORE_NEBULA"),B,z,W);case 6:c=w.sent;if(!(201!==c.status)){w.next=9;break}throw new Error;case 9:s=c.data,u=s.insightDirectURL,d=s.dateCreated,f=s.owner,p=s.name,v=s.id,m=s.latestExecutionFilesURL;h=null===m||void 0===m?void 0:m[0];b=null===m||void 0===m?void 0:m[3];w.next=14;return ve.addShareTaskToCollections(p,v,u,h,b,d,f,k.id);case 14:g=w.sent;if(!(201!==g.status)){w.next=17;break}throw new Error;case 17:y=g.data.id;i["a"].publish(me["a"].SUCCESS);i["a"].publish(me["a"].CLOSE);he["a"].trackEvent(he["a"].customEvents.ADD_CHART_TO_HUB,{chartType:null!==(t=null===Re||void 0===Re?void 0:Re.visualization)&&void 0!==t?t:"",chartId:null!==(r=null===Re||void 0===Re||null===(a=Re.qInfo)||void 0===a?void 0:a.qId)&&void 0!==r?r:"",appId:k.id,isSessionChart:U});Ae.forEach(function(){var e=Ee(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:if(t.existing){n.next=7;break}n.next=3;return ve.createTag(t.label);case 3:a=n.sent;r=a.data.id;n.next=8;break;case 7:r=t.key;case 8:n.next=10;return ve.applyTagToItem(y,r);case 10:case"end":return n.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());w.next=28;break;case 24:w.prev=24;w.t0=w["catch"](0);qe(true);xe(false);case 28:case"end":return w.stop()}}),e,null,[[0,24]])})));return function t(){return e.apply(this,arguments)}}();var Ue=function(){var e=Ee(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return ve.fetchTags(t);case 2:r=a.sent;return a.abrupt("return",r.data.map((function(e){return{name:e.name,value:e.name,key:e.id}})));case 4:case"end":return a.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();var Ye=function(){var e=Ee(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:Pe(t);case 1:case"end":return r.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();var Xe=function e(){};var Ke=function e(){return De?"".concat(Y.addToHubButton," ").concat(Y.addToHubButtonWarning):Y.addToHubButton};var Qe=function e(){if(!$)return null;return n.a.createElement("div",{className:"".concat(Y.viewStateToggle)},n.a.createElement(u["a"],{checked:Be,onChange:function e(){return Fe((function(e){return!e}))},className:Y.viewStateCheckbox,"data-testid":"chartPreview-viewStateToggle"}),N["default"].get("AddToHub.Dialog.ViewStateLabel"),n.a.createElement(d["a"],{title:N["default"].get(U?"AddToHub.Dialog.ViewStateTooltip.Insights":"AddToHub.Dialog.ViewStateTooltip"),placement:"top"},n.a.createElement("div",null,n.a.createElement(j["a"],{size:"small",className:Y.viewStateTooltipIcon}))))};return n.a.createElement(f["a"],{fullScreen:K,open:r,maxWidth:"sm",fullWidth:true},n.a.createElement(p["a"],null,n.a.createElement(v["a"],{variant:"h5"},N["default"].get("AddToHub.Dialog.Title")),n.a.createElement(m["a"],{onClick:ze,tid:"addtohub-chart-close"},n.a.createElement(I["a"],null))),n.a.createElement(h["a"],{className:Y.dialogContent},n.a.createElement("div",{className:Y.previewWrapper},n.a.createElement(P["a"],{app:k,direction:C,infoText:"",objectHeight:B?l+10:l,objectWidth:o,snapshotLayout:Re,objectId:$?_:"",viewState:Be?q:void 0,renderFooterContent:Qe})),n.a.createElement("div",{className:Y.contentWrapper},n.a.createElement("div",{className:Y.descriptiveText},N["default"].get("AddToHub.Dialog.DescriptiveText")),n.a.createElement("div",null,n.a.createElement(b["a"],{error:We(),className:Y.control,fullWidth:true},n.a.createElement(g["a"],{className:Y.controlLabel},N["default"].get("AddToHub.Dialog.NameLabel")),n.a.createElement(y["a"],{"data-testid":"addtohub-chart-name",className:Y.marginTop,defaultValue:J,onChange:Ge,endAdornment:!J&&n.a.createElement(w["a"],{position:"end"},n.a.createElement(D["a"],{size:"small",className:Y.errorIcon}))}),!J&&n.a.createElement(E["a"],{id:"error-text"},N["default"].get("AddToHub.Dialog.NameValidationError")),n.a.createElement(g["a"],{className:Y.controlLabel},N["default"].get("AddToHub.Dialog.TagLabel")),n.a.createElement(A["b"],{className:Y.marginTop,onApply:Ye,onError:Xe,useSuggestions:true,fetchSuggestions:Ue,tid:"addtohub-tag-input-field",addWithSpace:false,tokenSeparators:[","]}),n.a.createElement(g["a"],{className:Y.controlLabel},N["default"].get("AddToHub.Dialog.LocationLabel")),n.a.createElement("div",null,N["default"].get("AddToHub.Dialog.PersonalSpace")))))),n.a.createElement(S["a"],{className:Y.dialogActions,disableSpacing:true},De&&n.a.createElement("div",{className:Y.footerError},n.a.createElement(T["a"],{name:"warning",className:Y.footerErrorIcon,size:"medium"}),n.a.createElement(v["a"],{variant:"caption",color:"error"},N["default"].get("AddToHub.Dialog.Error.Message"))),(Oe||de)&&n.a.createElement("div",{className:Y.footerError},n.a.createElement(v["a"],{variant:"caption",color:"textPrimary"},N["default"].get(Oe?"AddToHub.Dialog.Sending":"AddToHub.Dialog.Initializing")),n.a.createElement(O["a"],{className:Y.circularProgress,size:"2em"})),n.a.createElement(x["a"],{id:"add-to-hub-dialog-button",color:"primary",variant:"contained",size:"medium",onClick:$e,className:Ke(),disabled:(We()||Oe||de)&&!De},De?N["default"].get("AddToHub.Dialog.TryAgain"):N["default"].get("AddToHub.Dialog.AddToHubButton"))))};Te.propTypes=qe;Te.defaultProps=Ie;var Ae=Te;var Pe=r("4nJ1");var Me=r("9TP3");var Ne=r("PWpK");var Re=r("wuU5");var Le=r("LkyE");var Ve=r("CXQS");var _e={position:{vertical:"top",horizontal:"center"},duration:3e3};var Be=Object(C["a"])((function(e){return{icon:{marginRight:e.spacing(1)},success:{color:e.palette.primary.main},toast:{top:"65px"},button:{marginRight:e.spacing(1)}}}));function Fe(e){var t=e.showToast;var r=Be();var a=function e(){i["a"].publish(me["a"].CLOSE_TOAST)};var o=function e(){var t=Pe["a"].basePath.split("/")[0];var r="".concat(t,"/explore/spaces/all?type=sharingservicetask");window.open(r,"_blank")};if(!t)return null;return n.a.createElement(Ne["a"],{anchorOrigin:{vertical:_e.position.vertical,horizontal:_e.position.horizontal},className:r.toast,open:t,onClose:a,autoHideDuration:_e.duration,TransitionProps:{appear:true}},n.a.createElement(Re["a"],{message:n.a.createElement("span",null,n.a.createElement(Le["a"],{className:"".concat(r.icon," ").concat(r.success)}),N["default"].get("AddToHub.Dialog.Success.Message")),action:n.a.createElement(x["a"],{size:"small",variant:"outlined",className:"".concat(r.button),endIcon:n.a.createElement(Ve["a"],{size:"small"}),onClick:o},N["default"].get("AddToHub.Dialog.Success.Action"))}))}var He=r("mTQ/");function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,a)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),true).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ge(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function $e(e,t){if(null==e)return{};var r=Ue(e,t);var a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){a=i[n];if(t.indexOf(a)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,a))continue;r[a]=e[a]}}return r}function Ue(e,t){if(null==e)return{};var r={};var a=Object.keys(e);var n,i;for(i=0;i<a.length;i++){n=a[i];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ye(e,t,r,a,n,i,o){try{var l=e[i](o);var c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(a,n)}function Xe(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){Ye(i,a,n,o,l,"next",e)}function l(e){Ye(i,a,n,o,l,"throw",e)}o(void 0)}))}}function Ke(e,t){return tt(e)||et(e,t)||Ze(e,t)||Qe()}function Qe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ze(e,t){if(!e)return;if("string"===typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function et(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[];var a=true;var n=false;var i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done);a=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){n=true;i=e}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw i}}return r}function tt(e){if(Array.isArray(e))return e}var rt=function e(t){var r,a,n,i,o,l,c,s;var u=JSON.parse(JSON.stringify(t));(null===u||void 0===u||null===(r=u.snapshotData)||void 0===r||null===(a=r.content)||void 0===a||null===(n=a.chartData)||void 0===n?void 0:n.scrollOffset)&&1!==(null===u||void 0===u?void 0:u.scrollStartPos)&&(u.snapshotData.content.chartData.scrollOffset=0);(null===u||void 0===u||null===(i=u.snapshotData)||void 0===i||null===(o=i.content)||void 0===o||null===(l=o.chartData)||void 0===l?void 0:l.legendScrollOffset)&&(u.snapshotData.content.chartData.legendScrollOffset=0);if("scatterplot"===(null===u||void 0===u?void 0:u.visualization)){delete u.snapshotData.content.chartData.xAxisMax;delete u.snapshotData.content.chartData.xAxisMin;delete u.snapshotData.content.chartData.yAxisMax;delete u.snapshotData.content.chartData.yAxisMin;u.snapshotData.content.chartData.legendScrollOffset=0}null===u||void 0===u||(null===(c=u.snapshotData)||void 0===c||delete c.viewState);(null===u||void 0===u||null===(s=u.snapshotData)||void 0===s?void 0:s.scrollTopPercent)&&(u.snapshotData.scrollTopPercent=0);return u};function at(){var e=Object(a["useState"])({show:false}),t=Ke(e,2),r=t[0],o=t[1];var l=Object(a["useState"])(false),c=Ke(l,2),s=c[0],u=c[1];var d=Object(a["useContext"])(He["b"]),f=d.insightsState;var p=function(){var e=Xe(regeneratorRuntime.mark((function e(t){var r,a,n,i,l,c;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:r=t.visualization,a=$e(t,["visualization"]);s.next=3;return r.getViewState();case 3:n=s.sent;s.next=6;return r.getSnapshotLayout();case 6:i=s.sent;s.next=9;return ge["a"].getAppliedPatchesForChart(r);case 9:s.t0=s.sent;if(s.t0){s.next=12;break}s.t0=[];case 12:l=s.t0;c=rt(i);o(We({show:true,objectId:r.model.id,objectDef:r.objectDef,fields:null===f||void 0===f?void 0:f.fields,queryItems:null===f||void 0===f?void 0:f.queryItems,snapshotLayout:i,snapshotLayoutWithoutViewState:c,patches:l,viewState:n},a));case 15:case"end":return s.stop()}}),e)})));return function t(r){return e.apply(this,arguments)}}();var v=function e(){o({show:false})};var m=function e(){u(true)};var h=function e(){u(false)};var b=function e(){i["a"].subscribe(me["a"].OPEN,p);i["a"].subscribe(me["a"].CLOSE,v);i["a"].subscribe(me["a"].SUCCESS,m);i["a"].subscribe(me["a"].CLOSE_TOAST,h)};var g=function e(){i["a"].unsubscribe(me["a"].OPEN,p);i["a"].unsubscribe(me["a"].CLOSE,v);i["a"].unsubscribe(me["a"].SUCCESS,m);i["a"].unsubscribe(me["a"].CLOSE_TOAST,h)};Object(a["useEffect"])((function(){b();return g}),[r,f]);var y=r.show,w=r.sheetId,E=r.width,S=r.height,O=r.objectId,x=r.objectDef,k=r.direction,j=r.viewState,D=r.snapshotLayout,C=r.snapshotLayoutWithoutViewState,q=r.title,I=r.patches,T=r.fields,A=r.queryItems;var P=Pe["a"].getParameterByName("app");var M=Object(Me["a"])(P),N=Ke(M,1),R=N[0];return n.a.createElement(n.a.Fragment,null,y&&n.a.createElement(Ae,{title:q,app:R,sheetId:w,objectId:O,objectDef:x,show:y,objectWidth:E,objectHeight:S,direction:k,viewState:j,snapshotLayout:D,snapshotLayoutWithoutViewState:C,patches:I,fields:T,queryItems:A}),n.a.createElement(Fe,{showToast:s}))}},y7Mh:function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i={};var o=[{title:"Storytelling.library.effect.highlightMax",supportedVisualizations:["piechart","linechart","barchart"],effectPath:"/effects/maxmin",iconClass:"effect-max",effectProperties:{max:true,min:false},restraints:{}},{title:"Storytelling.library.effect.highlightMin",supportedVisualizations:["piechart","linechart","barchart"],effectPath:"/effects/maxmin",iconClass:"effect-min",effectProperties:{max:false,min:true},restraints:{}},{title:"Storytelling.library.effect.highlightValue",supportedVisualizations:["piechart","linechart","barchart"],effectPath:"/effects/highlight-value",iconClass:"effect-highlight",effectProperties:{selectedIndex:0},restraints:{}}];var l=[{title:"Common.Title",cssClass:"qv-story-library-text-title",textType:"title",drag:"disable",maintainRatio:true},{title:"Storytelling.library.paragraph",cssClass:"qv-story-library-text-paragraph",textType:"paragraph",drag:"enable",maintainRatio:false}];var c=[{shape:"square",src:"../resources/img/storytelling/shapes/square.svg",maintainRatio:false},{shape:"square_rounded",src:"../resources/img/storytelling/shapes/square_rounded.svg",maintainRatio:false},{shape:"circle",src:"../resources/img/storytelling/shapes/circle.svg",maintainRatio:false},{shape:"disc",src:"../resources/img/storytelling/shapes/disc.svg",maintainRatio:false},{shape:"arrow_d",src:"../resources/img/storytelling/shapes/arrow_d.svg",maintainRatio:false},{shape:"arrow_l",src:"../resources/img/storytelling/shapes/arrow_l.svg",maintainRatio:false},{shape:"arrow_r",src:"../resources/img/storytelling/shapes/arrow_r.svg",maintainRatio:false},{shape:"arrow_u",src:"../resources/img/storytelling/shapes/arrow_u.svg",maintainRatio:false},{shape:"pullout_b",src:"../resources/img/storytelling/shapes/pullout_b.svg",maintainRatio:false},{shape:"pullout_l",src:"../resources/img/storytelling/shapes/pullout_l.svg",maintainRatio:false},{shape:"pullout_r",src:"../resources/img/storytelling/shapes/pullout_r.svg",maintainRatio:false},{shape:"pullout_t",src:"../resources/img/storytelling/shapes/pullout_t.svg",maintainRatio:false},{shape:"tri1",src:"../resources/img/storytelling/shapes/tri1.svg",maintainRatio:false},{shape:"tri2",src:"../resources/img/storytelling/shapes/tri2.svg",maintainRatio:false},{shape:"tri3",src:"../resources/img/storytelling/shapes/tri3.svg",maintainRatio:false},{shape:"tri4",src:"../resources/img/storytelling/shapes/tri4.svg",maintainRatio:false},{shape:"2lines_h",src:"../resources/img/storytelling/shapes/2lines_h.svg",maintainRatio:false},{shape:"2lines_v",src:"../resources/img/storytelling/shapes/2lines_v.svg",maintainRatio:false},{shape:"plane",src:"../resources/img/storytelling/shapes/plane.svg",maintainRatio:true},{shape:"bus",src:"../resources/img/storytelling/shapes/bus.svg",maintainRatio:true},{shape:"car",src:"../resources/img/storytelling/shapes/car.svg",maintainRatio:true},{shape:"train",src:"../resources/img/storytelling/shapes/train.svg",maintainRatio:true},{shape:"dollar",src:"../resources/img/storytelling/shapes/dollar.svg",maintainRatio:true},{shape:"euro",src:"../resources/img/storytelling/shapes/euro.svg",maintainRatio:true},{shape:"pound",src:"../resources/img/storytelling/shapes/pound.svg",maintainRatio:true},{shape:"yen",src:"../resources/img/storytelling/shapes/yen.svg",maintainRatio:true},{shape:"flag",src:"../resources/img/storytelling/shapes/flag.svg",maintainRatio:true},{shape:"globe",src:"../resources/img/storytelling/shapes/globe.svg",maintainRatio:true},{shape:"tree",src:"../resources/img/storytelling/shapes/tree.svg",maintainRatio:true},{shape:"cloud",src:"../resources/img/storytelling/shapes/cloud.svg",maintainRatio:true},{shape:"lightbulb",src:"../resources/img/storytelling/shapes/lightbulb.svg",maintainRatio:true},{shape:"clock",src:"../resources/img/storytelling/shapes/clock.svg",maintainRatio:true},{shape:"man",src:"../resources/img/storytelling/shapes/man.svg",maintainRatio:true},{shape:"woman",src:"../resources/img/storytelling/shapes/woman.svg",maintainRatio:true},{shape:"running_man",src:"../resources/img/storytelling/shapes/running_man.svg",maintainRatio:true},{shape:"star",src:"../resources/img/storytelling/shapes/star.svg",maintainRatio:true},{shape:"tick",src:"../resources/img/storytelling/shapes/tick.svg",maintainRatio:true},{shape:"cross",src:"../resources/img/storytelling/shapes/cross.svg",maintainRatio:true},{shape:"banned",src:"../resources/img/storytelling/shapes/banned.svg",maintainRatio:true}];var s=[{expanded:true,name:"today",translate:"Storytelling.library.category.today",isEmpty:false,rank:1},{expanded:true,name:"thisweek",translate:"Storytelling.library.category.thisweek",isEmpty:false,rank:2},{expanded:true,name:"older",translate:"Storytelling.library.category.older",isEmpty:false,rank:3}];t["a"]={currentStory:i,textTemplates:l,effectTemplates:o,shapeTemplates:c,timeCategories:s}},ymCc:function(e,t,r){"use strict";var a=r("qIEf");var n=r.n(a);var i=r("mWu2");var o='<lui-popover tid="snapshot-annotation">\n\t<lui-popover-header >\n\t\t<lui-popover-title q-translation="Storytelling.Snapshot.AnnotationTitle"></lui-popover-title>\n\t</lui-popover-header>\n\t<lui-popover-body>\n\t\t<div class="form">\n\t\t<textarea class="lui-textarea" maxlength="255" rows="3" ng-model="annotation.text"\n\t\t\t\t  q-placeholder="Storytelling.Snapshot.AnnotationHint"></textarea>\n\t\t</div>\n\t</lui-popover-body>\n\t<lui-popover-footer>\n\t\t<button class="lui-button  lui-button"  ng-click="closeDialog();" q-translation="Common.Cancel" tid="cancel-annotation-btn"></button>\n\t\t<button class="lui-button  lui-button" ng-click="save();"  q-translation="Common.Save" ng-disabled="isSaveDisabled()" tid="save-annotation-btn"></button>\n\t</lui-popover-footer>\n</lui-popover>';var l=r("wIyQ");var c=r("9Ib8");var s={endAnnotation:null};var u=[];var d=".qv-object-nav .lui-icon--camera";function f(e,t){var r=n()(d);c["a"].getSnapshotModel(e).then((function(e){c["a"].saveAnnotationInModel(e,t).then((function(){g(r)}))}));e||g(r)}function p(e){e.active=true;for(var t=u.length;t>=0;t--)clearTimeout(u.pop())}function v(e,t){var r=n.a.isNumeric(t)?t:4e3;if(false===e.focused){e.active=false;e.focused=false;u.push(setTimeout((function(){e.$apply((function(){e.closeDialog()}))}),r))}}function m(){n()(d).parents("#grid").append("<div class='annotations-blocker'></div>")}function h(){setTimeout((function(){n()("#grid").children(".annotations-blocker").remove()}))}function b(e,t,r,a){m();s.endAnnotation=t;var c=i["default"].getService("luiPopover");var u;var d=c.show({template:o,controller:["$scope","$element",function(t,i){u=t;t.annotation={text:""};t.active=true;t.focused=false;t.isSaveDisabled=a;t.save=function(){f(d.currentAnnotationId,t.annotation.text);t.close()};t.closeDialog=function(){t.annotation.text="";t.focused=false;g();t.close()};e.on("mouseenter.annotations",(function(){p(t)}));e.on("mouseleave.annotations",(function(){v(t)}));i.on("mouseenter.dialog",(function(){p(t)}));i.on("mouseleave.dialog",(function(){v(t)}));i.on("click.dialog",(function(e){var r=n()(e.target);r.is(".lui-textarea")&&(t.focused=true)}));l["a"].on("start.storytellingAnnotate",t.closeDialog);t.$on("$destroy",(function(){l["a"].off("start.storytellingAnnotate",t.closeDialog);n()(document).off("keydown.annotations");i.off("mouseenter.dialog");i.off("mouseleave.dialog");i.off("click.dialog")}));function o(){n()(document).on("keydown.annotations",(function(e){c(e)&&v(t,1)}))}function c(e){var t=(e.ctrlKey||e.metaKey)&&!e.altKey;return t&&(37===e.which||39===e.which)}o();r&&v(t)}],alignTo:e[0]});d.closed.then((function(){h();f(d.currentAnnotationId,u.annotation.text,u);u.focused=false;u.close()}));return d}function g(e){e||(e=n()(d));if(e.length&&s){s.endAnnotation();for(var t=u.length;t>=0;t--)clearTimeout(u.pop());e.off("mouseenter.annotations");e.off("mouseleave.annotations");h()}}var y=t["a"]={openDialog:b,closeDialog:g}}}]);