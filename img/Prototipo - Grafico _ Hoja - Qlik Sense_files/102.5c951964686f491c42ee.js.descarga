/*! For license information please see 102.5c951964686f491c42ee.js.LICENSE.txt */
/*!
 * sense-client@7.144.6
 * 
 * Copyright(C) 2021 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[102,12,30,31,34,36],{"+Kna":function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("/2No");var o=i("mWu2");var s=/&|\/|\\|=|\?|\*|<|>|"|:|\|/g;var l=/[!?='()*]/g;var c={encodeString:function t(e){return encodeURIComponent(e).replace(l,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))},containsIllegalChars:function t(e){return null!==e.match(s)}};var u=i("PX8M");var d=i("k9vo");var p={};function f(t,e,i){var n={name:t,type:e};if(i){i.qId&&(n.id=i.qId);n.path=i.qUrl;n.pathDef=i.qUrlDef}"folder"===e&&(n.children=[]);return n}function h(t,e){t=t.substring(1).split("/").reverse().slice(1).reverse();var i=e;t.forEach((function(t){var e=false;i.children.forEach((function(n){if(n.name===t){i=n;e=true}}));if(!e){var n=f(t,"folder");i.children.push(n);i=n}}));return i}function v(t){t.sort((function(t,e){return t.name.localeCompare(e.name)})).reverse();t.sort((function(t,e){if("folder"===t.type&&"folder"!==e.type)return-1;if("folder"===t.type&&"folder"===e.type)return t.name.localeCompare(e.name);if("folder"!==t.type&&"folder"!==e.type)return t.name.localeCompare(e.name);return 1}));t.forEach((function(t){"undefined"!==typeof t.children&&v(t.children)}))}p.createTree=function(t,e,i){e=(e||[]).join("|")||".+?";var n=f("/","folder");var a=new RegExp("\\.(".concat(e,")$"),"i");t.forEach((function(t){var e;var r=t;var o=r.qUrl;o=d["a"].stripBasePath(o);e=decodeURIComponent("".concat(o).replace(/\+/g,"%20"));e=e.split("/").splice(-1)[0];if(e.match(a)){var s=n;var l;if(!i){l=decodeURIComponent(o).replace(/^(\/content\/default)|(\/content\/Default)/,"").replace(/^(^\/media\/([a-z0-9-])+\/([a-z0-9-])+\/)/,"/media/");s=h(l,n)}s.children.push(f(e,"file",r))}}));v(n.children);return n};p.filterList=function t(e){var i=[];var n=e.sort((function(t,e){var i=t.qName.toLowerCase();var n=e.qName.toLowerCase();return i.localeCompare(n)}));var a;var r;for(a=0;a<e.length;a++){r=e[a];if(r.qAppSpecific){i.push(r);r.qMeta&&-1!==r.qMeta.privileges.indexOf("update")&&(p.canUpdate=true);break}}for(a=0;a<n.length;a++){r=e[a];r.qAppSpecific||i.push(r)}return i};p.getRemainingSpace=function t(e){var i=0;for(var n=0;n<e.length;n++)if(e[n].qAppSpecific&&e[n].qMeta){i=parseInt(e[n].qMeta.remainingLibrarySpace||0,10);break}return i};var g=p;var m='<lui-dialog id="media-library-modal" tid="media-library" qv-cancel="cancel($event)" qv-confirm="confirm()" qva-outside-ignore-for="allOutside" qva-stop-prop>\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="MediaLibrary.Header"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="dialog-body  medialib  lui-nopad">\n\t\t<div class="q-section-list" ng-if="lists.length">\n\t\t\t<ul class="side-menu lui-list" tid="menu-list">\n\t\t\t\t<li ng-repeat="list in lists track by list.qName"\n\t\t\t\t\tclass="side-menu-item  lui-list__item"\n\t\t\t\t\tng-class="{\'selected\': !isUpload && view === list.qName}"\n\t\t\t\t\tng-click="goTo(list.qName, false)">\n\t\t\t\t\t<span class="lui-list__text  lui-list__text--ellipsis" ng-if="list.qAppSpecific" q-translation="MediaLibrary.InApp" tid="goto-inapp"></span>\n\t\t\t\t\t<span class="lui-list__text  lui-list__text--ellipsis" ng-if="!list.qAppSpecific" tid="goto-library">{{ list.qName }}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<ul ng-if="canUpdate" class="q-section-upload  upload-menu lui-list">\n\t\t\t\t<li class="upload-menu-item  lui-list__item"\n\t\t\t\t\tng-class="{\'selected\': isUpload}"\n\t\t\t\t\ttid="goto-upload"\n\t\t\t\t\tng-click="goTo(\'\', true)">\n\t\t\t\t\t<div class="q-section-upload-text  lui-list__text  lui-list__text--ellipsis" q-translation="MediaLibrary.UploadMedia"></div>\n\t\t\t\t\t<div class="qv-loader  lui-list__text" ng-if="updateExp.isUploading"></div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="q-empty" ng-if="state === contentState.isEmpty && !isUpload">\n\t\t\t<p q-translation="MediaLibrary.NoFilesFound" class="nff"></p>\n\t\t</div>\n\t\t<qve-media-list ng-if="state === contentState.hasFiles && !isUpload" ng-class="{\'q-image-library\': !isUpload}" class="q-images-cont" tid="media-lib-items-list"></qve-media-list>\n\t\t<div class="q-media-preview" ng-if="selectedFile && !isUpload">\n\t\t\t<div class="q-media-preview-toolbar" ng-if="canDeleteInView()">\n\t\t\t\t<button\n\t\t\t\t\tclass="lui-overlay-button"\n\t\t\t\t\ttid="delete"\n\t\t\t\t\tdata-name="delete"\n\t\t\t\t\tq-title-translation="Common.Delete"\n\t\t\t\t\tng-click="onDelete($event)">\n\t\t\t\t\t<span class="lui-overlay-button__icon  lui-icon  lui-icon--bin"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="q-media-preview-img-wrapper">\n\t\t\t\t<img ng-src="{{ getSrc(selectedFile) }}" class="q-media-img-list"/>\n\t\t\t</div>\n\t\t\t<div class="q-media-preview-bottom-toolbar">\n\t\t\t\t<button class="lui-button q-media-insbtn"\n\t\t\t\t\t\ttid="insert"\n\t\t\t\t\t\tdata-name="insert"\n\t\t\t\t\t\tq-translation="MediaLibrary.Insert"\n\t\t\t\t\t\tq-title-translation="MediaLibrary.Insert"\n\t\t\t\t\t\tng-click="confirm()">\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="q-images-cont" ng-if="canUpdate" ng-show="isUpload">\n\t\t\t<qv-media-update update-exp="updateExp" select-file="selectFile" selected-file="selectedFile" image-list="rootEntry.children" confirm="confirm"></qv-media-update>\n\t\t</div>\n\t</lui-dialog-body>\n\t<div class="q-media-zoomed" ng-if="inZoom">\n\t\t<div class="q-media-z-wrapper">\n\t\t\t<div class="q-media-z-cont">\n\t\t\t\t<img class="q-media-z-img" ng-src="{{ getSrc(zoomSrc) }}">\n\t\t\t</div>\n\n\t\t\t<div class="q-media-zoom-footer">\n\t\t\t\t<qv-confirm-cancel-footer light qv-confirm="confirm()" qv-cancel="closeZoom()" qv-confirm-label="Common.Apply" qv-confirm-disabled="updateExp.isUploading"></qv-confirm-cancel-footer>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<lui-dialog-footer data-tid="media-library-footer">\n\t\t<lui-button ng-click="cancel($event)" q-translation="Common.Close" tid="cancel" ng-disabled="updateExp.isUploading"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n';var b='<div>\n\t\x3c!--\n\t\t<img ng-src="{{staticSrc}}" class="q-media-img" width="100%" height="100%"/>\n\t--\x3e\n\t<ul class="q-media-list-cont  lui-list" qva-context-menu="onContextMenu($event)">\n\t\t<li ng-repeat="entry in rootEntry.children"\n\t\t\t\tclass="media-list-cont-item  lui-list__item"\n\t\t\t ng-class="{\'selected\': isSelectedImg(entry, $last, \'.selected\')}"\n\t\t\t tid="media-item" title="{{entry.name}}"\n\t\t\t ng-click="selectFile($event, entry.path, entry.pathDef)">\n\t\t\t<span class="list-name  lui-list__text  lui-list__text--ellipsis">{{entry.name}}</span>\n\t\t</li>\n\t</ul>\n</div>';var y=i("3A43");var x=i("rwJ+");var _=i("wIyQ");function C(t){return parseInt(t||0,10)}o["default"].directive("qvBouncyGrid",[function(){return{restrict:"E",template:'<div class="qv-bouncy" ng-transclude></div>',transclude:true,replace:true,scope:{minWidth:"@",maxWidth:"@",padding:"@",selector:"@",listLen:"="},controller:["$scope","$element",function(t,e){var i=a()("<style></style>").appendTo("body");var n=0;var r;var o=C(t.minWidth);var s=C(t.maxWidth);function l(t){clearTimeout(r);r=setTimeout(c,t||50)}function c(){var a=C(t.padding);var r;var c;var u;var d;if(s){r=s;c=Math.ceil(e.width()/r);u=Math.floor(e.width()/c);d="".concat((c>t.listLen?r:u)-a,"px!important;")}else{r=o;c=Math.floor(e.width()/r);u=Math.ceil(e.width()/c);d="".concat((c>t.listLen?r:u)-a,"px!important;")}if(Number.isNaN(+u-a)&&n<20){n++;l()}else i&&i.length&&i.text("".concat(t.selector," { width: ").concat(d,"height: ").concat(d,"}"))}_["a"].on("end",l);l(0);t.$watch("listLen",l);t.$on("$destroy",(function(){clearTimeout(r);i&&i.remove();r=null;i=null;_["a"].off("end",l)}))}]}}]);var w=i("vOsO");var q=i.n(w);var M=i("6uJb");var S='<div id="media-library-upload">\n\t<div class="bouncy-wrap" ng-class="{\'empty\' : isEmpty}">\n\t\t<qv-bouncy-grid min-width="140" padding="15" selector=".preview-media-grid" list-len="previewCounter">\n\t\t\t<div class="media-library-preview-container" ng-hide="isEmpty"></div>\n\t\t</qv-bouncy-grid>\n\t</div>\n\t<div id="media-library-dropzone" class="dropzone" ng-class="{\'empty\' : isEmpty}">\n\t\t<div class="dz-message">\n\t\t\t<div class="upload-drop-text" q-translation="MediaLibrary.ClickOrDropHere"></div>\n\t\t\t<div class="upload-drop-icon-wrap">\n\t\t\t\t<i class="lui-icon lui-icon--upload"></i>\n\t\t\t</div>\n\t\t\t<div ng-if="showQuotaText" class="upload-drop-quota">{{quotaInfo}}</div>\n\t\t</div>\n\t</div>\n</div>\n';var D='<div tid="preview-item"\n\t class="q-media-grid preview-media-grid"\n\t ng-class="{\'selected-img\': selectedFile === file.qUrl}"\n\t ng-click="onSelectImage( $event, file )"\n\t qva-context-menu="onContextMenu( $event, file, file.name, file.qUrl )">\n\t<div class="q-media-wrap-img">\n\t\t<img class="q-media-img" width="100%" height="100%" data-dz-thumbnail />\n\t\t<div class="overlay"></div>\n\t\t<div class="preview-area">\n\t\t\t<div class="touch-area cancel-upload-area" q-title-translation="Common.Cancel" data-dz-remove ng-click="onCancelUpload( $event, file )">\n\t\t\t\t<button class="lui-overlay-button lui-overlay-button--small cancel-upload">\n\t\t\t\t\t<span class="lui-overlay-button__icon lui-icon lui-icon--small lui-icon--close"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div ng-if="selectedFile === file.qUrl" class="preview-area-edit">\n\t\t\t\t<div class="touch-area delete-image-area" q-title-translation="Common.Delete" ng-click="onDelete( $event, file, file.name, file.qUrl )">\n\t\t\t\t\t<button class="lui-overlay-button lui-overlay-button--small delete-image">\n\t\t\t\t\t\t<span class="lui-overlay-button__icon lui-icon lui-icon--small lui-icon--bin"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\ttid="insert"\n\t\t\t\t\tclass="insert-button lui-overlay-button"\n\t\t\t\t\tdata-name="insert"\n\t\t\t\t\tq-title-translation="MediaLibrary.Insert"\n\t\t\t\t\tng-click="onInsert( $event )">\n\t\t\t\t\t<span class="lui-overlay-button__icon  lui-icon  lui-icon--add"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="error-wrapper" ng-if="showError">\n\t\t\t<div class="error-icon">\n\t\t\t\t<i class="lui-icon lui-icon--warning-triangle"></i>\n\t\t\t</div>\n\t\t\t<div class="error-text">{{errorMsg}}</div>\n\t\t</div>\n\t\t<div class="preview-progress">\n\t\t\t<div class="preview-progressbar-wrapper">\n\t\t\t\t<span class="preview-progressbar" data-dz-uploadprogress></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="q-media-name" q-title-translation="{{file.name}}">{{file.name}}</div>\n</div>\n';var I=i("1UIw");var k=i("sWge");var L=i("4nJ1");var T=i("U7Ny");var E=i("cph9");var A=i("acVu");function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));i.push.apply(i,n)}return i}function O(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),true).forEach((function(e){R(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function R(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}var V=L["a"].getRandomString(16);var N=function t(){return Object(A["b"])("MLREST")};function z(t){return"/api/v1/apps/".concat(t,"/media/files/")}function F(t){return"".concat(r["a"].rootPath,"api/v1/apps/").concat(t,"/media/list/")}function j(t,e,i){if(N()){var n=F(e.id);i.get(n,{}).then((function(e){var i=e.data;if(void 0!==i.quota&&void 0!==i.totsize){var n=Math.floor((parseInt(i.quota,10)-parseInt(i.totsize,10))/1024/1024);t.quotaInfo=M["default"].get("MediaLibrary.QuotaInfo",[n])}else t.showQuotaText=false}));return}e.getContentLibraries().then((function(e){var i=g.getRemainingSpace(e)/1024/1024;i=i.toString().split("e");i=Math.floor(+"".concat(i[0],"e").concat(i[1]?+i[1]+1:1));i=i.toString().split("e");i=+"".concat(i[0],"e").concat(i[1]?+i[1]-1:-1);t.quotaInfo=M["default"].get("MediaLibrary.QuotaInfo",[i])}))}function H(t,e,i){return u["a"].getApp().then((function(n){var a={params:{externalpath:i,xrfkey:V},headers:{"X-Qlik-XrfKey":V}};var r="".concat(L["a"].basePath,"qrs/appcontent/").concat(n.id,"/deletecontent");return e.delete(r,a).then((function(){j(t,n,e)})).catch((function(t,e){var i=e;0===e&&(i=500);I["a"].showDialog({code:i})}))}))}function $(t,e,i){var n=e;if(!n){var a=t.getFilesWithStatus(q.a.SUCCESS);for(var r=0;r<a.length;r++)if(i===a[r].name){n=a[r];break}}return n}o["default"].directive("qvMediaUpdate",[function(){return{restrict:"E",replace:true,scope:{updateExp:"=",selectedFile:"=",selectFile:"&",confirm:"&",imageList:"="},template:S,controller:["$scope","$compile","$timeout","$http","qvContextMenu",function(t,e,i,n,r){var s;var l;t.isEmpty=true;t.previewCounter=0;t.showQuotaText=true;q.a.autoDiscover=false;q.a.confirm=function(t,e,i){if(null!=i)return i();return};function d(i,n){var r=t.$new();r.file=n;e(a()(i))(r)}function p(e,i,a,r){var c=new k["a"];var u=a.split("\\").splice(-1)[0];t.updateExp.deleteDialogShown=true;l=o["default"].getService("qvConfirmDialog").show({closeOnEscape:true,title:M["default"].get("MediaLibrary.Confirm.Delete.Title"),message:M["default"].get("MediaLibrary.Confirm.Delete.Description",[u]),okLabel:M["default"].get("Common.Delete"),cancelLabel:M["default"].get("Common.Cancel")});l.closed.then((function(o){o&&H(t,n,a).then((function(){t.selectedFile===r&&t.selectFile()(e,null,null);i&&s.removeFile(i);c.resolve()}),(function(){c.reject()}));t.updateExp.deleteDialogShown=false}));return c.promise}function f(e,i,a,r){var u=new k["a"];var d=$(s,r,i.name);t.updateExp.deleteDialogShown=true;l=o["default"].getService("qvConfirmDialog").show({closeOnEscape:true,title:M["default"].get("MediaLibrary.Confirm.Delete.Title"),message:M["default"].get("MediaLibrary.Confirm.Delete.Description",[i.name]),okLabel:M["default"].get("Common.Delete"),cancelLabel:M["default"].get("Common.Cancel")});l.closed.then((function(r){if(r){var o=z(a)+c.encodeString(i.id);n.delete(o,{}).then((function(){t.selectedFile===i.path&&t.selectFile()(e,null,null);d&&s.removeFile(d);u.resolve()}),(function(){u.reject()}))}t.updateExp.deleteDialogShown=false}));return u.promise}t.updateExp.deleteFile=function(t,e,i){var n=$(s,null,e);return p(t,n,e,i)};t.updateExp.deleteInAppFile=f;t.onCancelUpload=function(t,e){t.preventDefault();t.stopPropagation();s.cancelUpload(e)};t.onDelete=function(t,e,i,n){t.preventDefault();t.stopPropagation();N()?u["a"].getApp().then((function(n){var a={id:i,name:i,path:z(n.id)+c.encodeString(i)};f(t,a,n.id,e)})):p(t,e,i,n)};t.onInsert=function(e){e.preventDefault();e.stopPropagation();t.confirm()()};t.onSelectImage=function(e,i){x["a"].scrollElmentIntoView(a()(i.previewElement),".media-library-preview-container",false,true);if(i.status!==q.a.SUCCESS){e.preventDefault();e.stopPropagation();return}t.selectFile()(e,i.qUrl,i.qUrlDef)};t.onContextMenu=function(e,i,n,a){e.preventDefault();e.stopPropagation();if(i.status!==q.a.SUCCESS)return;var o=r.menu();t.updateExp.isUploading||o.addItem({translation:"MediaLibrary.Insert",tid:"insert",select:function n(){t.selectedFile!==i.qUrl&&t.selectFile()(e,i.qUrl,i.qUrlDef);t.onInsert(e)}});o.addItem({translation:"Common.Delete",tid:"delete",select:function r(){t.onDelete(e,i,n,a)}});r.show(o,{position:{x:e.pageX,y:e.pageY},docking:"BottomRight"})};u["a"].getApp().then((function(e){var r;var o;if(N()){var l=z(e.id);r=l;o=l}else{r="".concat(L["a"].basePath,"qrs/appcontent/").concat(e.id,"/uploadfile?");o="/appcontent/".concat(e.id,"/")}j(t,e,n);var u={url:r,acceptedFiles:".png,.gif,.jpg,.jpeg",maxFilesize:5,parallelUploads:4,filesizeBase:1024,thumbnailWidth:200,thumbnailHeight:200,previewTemplate:D,previewsContainer:".media-library-preview-container",dictInvalidFileType:M["default"].get("ErrorCode.3004"),dictFileTooBig:M["default"].get("MediaLibrary.Error.MaxFileSizeExceeded"),dictResponseError:M["default"].get("ErrorCode.500")};var p={headers:{"X-Qlik-XrfKey":V}};var f={method:"PUT",sending:function t(e,i){var n=i.send;i.send=function(){n.call(i,e)}}};var h=Object(E["a"])(document.cookie,"_csrfToken");h&&(f.headers={"qlik-csrf-token":h});s=new q.a("#media-library-dropzone",O(O({},u),N()?f:p));s.on("processing",(function(t){N()?this.options.url=r+c.encodeString(t.name):this.options.url="".concat(r,"externalpath=").concat(encodeURIComponent(t.name),"&overwrite=false&xrfkey=").concat(V)}));s.on("addedfile",(function(e){d(e.previewElement,e);i((function(){t.isEmpty=false;t.previewCounter++;t.updateExp.isUploading=true;x["a"].scrollElmentIntoView(a()(e.previewElement),".media-library-preview-container",false,true);if(c.containsIllegalChars(e.name)){e.qErrorMsg="MediaLibrary.Error.IllegalCharsInFilename";s.cancelUpload(e)}if(N()){var i=(s.files||[]).concat(t.imageList||[]);for(var n=0;n<i.length;n++){var r=i[n];var o=e===r;var l=e.name===r.name;var u="canceled"!==r.status;if(!o&&l&&u){e.qErrorMsg="MediaLibrary.Error.FileAlreadyExists";s.cancelUpload(e);break}}}}))}));s.on("removedfile",(function(){i((function(){t.previewCounter--;0===t.previewCounter&&(t.isEmpty=true)}))}));s.on("success",(function(i){i.qUrl=o+c.encodeString(i.name);i.qUrlDef=o+i.name;j(t,e,n)}));s.on("queuecomplete",(function(){i((function(){t.updateExp.isUploading=false}))}));s.on("error",(function(t,e,i){var n=a()(t.previewElement).scope();n.showError=true;i&&i.status?409===i.status?n.errorMsg=M["default"].get("MediaLibrary.Error.FileAlreadyExists"):413===i.status?n.errorMsg=M["default"].get("MediaLibrary.Error.MaxFileSizeExceeded"):n.errorMsg=M["default"].get("ErrorCode.".concat(i.status)):n.errorMsg=M["default"].get(t.qErrorMsg?t.qErrorMsg:e)}))}));t.$on("$destroy",(function(){s.destroy();t.updateExp.deleteDialogShown&&l.close()}))}]}}]);var B={isShown:false};var W=function t(){return Object(A["b"])("MLREST")};o["default"].directive("qveMediaList",[function(){return{replace:true,restrict:"E",template:b}}]);var G={template:m,controller:["$scope","qvLoader","qvContextMenu","$http",function(t,e,i,n){var o="".concat(r["a"].staticResourcesPath,"img/medialibrary/thumb.png");var s=false;var l;var p={notReady:0,isLoading:1,isEmpty:2,hasFiles:3};var f=a()("#media-library-modal");t.inZoom=false;t.firstTimeRenderCheck=true;t.lists=[];t.selectedFile=null;t.contentState=p;t.state=p.notReady;t.view=null;o=d["a"].stripBasePath(o);o=d["a"].addBasePath(o);t.staticSrc=o;t.updateExp={};function h(t){clearTimeout(l);e.close(t)}function v(e,i){e=e||null;i=i||null;t.selectedFile=e;t.selectedFileDef=i;setTimeout((function(){f.find(".q-media-insbtn").focus()}))}function m(i,n){var a=g.createTree(i,t.input.filter,true);t.rootEntry=a;if(n===t.view)if(e.isOpen())e.close().then((function(){t.state=a.children.length>0?p.hasFiles:p.isEmpty}));else{clearTimeout(l);t.state=a.children.length>0?p.hasFiles:p.isEmpty}_()}function b(t){var e="".concat(r["a"].rootPath,"api/v1/apps/").concat(t,"/media/list");return n.get(e,{params:{show:"recursive"}}).then((function(t){return t.data.data.filter((function(t){return"image"===t.type})).map((function(t){var e=c.encodeString(t.name);return{qId:t.id,qUrl:t.link.replace(t.name,e),qUrlDef:t.link,qName:t.name}}))}))}function _(){t.disableNav=false}function C(e,i,n,a){t.updateExp.deleteFile(e,i,n).then((function(){M(a)}))}function w(){t.disableNav=true;u["a"].getApp().then((function(e){var i=e.id;var n=t.view;t.appId=i;W()?b(i).then((function(t){m(t,n)})):e.getLibraryContent(t.view).then((function(t){m(t,n)}))}))}u["a"].getApp().then((function(e){e.getLayout().then((function(i){e.getContentLibraries().then((function(e){t.lists=g.filterList(e);if(!t.view&&t.lists.length){t.view=t.lists[0].qName;w()}var n=W();var a=Object(A["b"])("HAS_QRS")&&!!g.canUpdate&&!n;var r=n&&i.permissions.update;t.canUpdate=a||r}))}))}));function q(t){return t.split("/").slice(3).join("\\")}function M(e){w();t.input.selectedFile&&e===t.input.selectedFile&&(s=true)}function S(e,i,n){t.updateExp.deleteInAppFile&&t.updateExp.deleteInAppFile(e,i,t.appId).then((function(){M(n)}))}t.getSrc=function t(e){e=d["a"].stripBasePath(e);e=d["a"].addBasePath(e);return e};t.zoomImage=function e(i,n){i.preventDefault();i.stopPropagation();t.zoomSrc=n.path;t.inZoom=true};t.closeZoom=function(){t.inZoom=false;t.zoomSrc=null};t.goTo=function(n,a){var r;i.close();if(t.view===n||t.disableNav)return;v(null,null);h(true);t.state=p.notReady;t.isUpload=a;t.view=n;if(!t.isUpload){l=setTimeout((function(){t.state=p.isLoading;e.show({template:y["a"],messageObj:{task:"MediaLibrary.LoadingFiles"},appendTo:f.find(".medialib")[0],bigLoader:true})}),1e3);r=f.find(".q-images-cont");r.length&&(r[0].scrollTop=0);w();t.firstTimeRenderCheck=true;r=null}};t.isSelectedImg=function(e,i,n){i&&t.firstTimeRenderCheck&&n&&setTimeout((function(){var e=f.find(n);t.firstTimeRenderCheck=false;e.length&&x["a"].scrollElmentIntoView(e,".q-images-cont",true);e=null}),250);return t.selectedFile===e.path};t.selectFile=function(e,n,r){var o=a()(e.target).closest(".q-media-grid, .media-list-cont-item");e.preventDefault();e.stopPropagation();i.close();x["a"].scrollElmentIntoView(o,".q-images-cont",false);if(t.selectedFile===n){n=null;r=null}o=null;v(n,r)};t.confirm=function(){if(t.selectedFile&&!t.updateExp.isUploading){t.input.onConfirm(t.selectedFile,t.selectedFileDef);t.destroyComponent()}};t.inInAppView=function(){return t.view===t.lists[0].qName};t.canDeleteInView=function(){return t.inInAppView()&&t.canUpdate};t.onDelete=function(e){var i=t.selectedFile;if(W()){var n=t.rootEntry.children.filter((function(t){return t.path===i}))[0]||{};n.id&&S(e,n,i)}else{var a=q(t.selectedFileDef);e.preventDefault();e.stopPropagation();C(e,a,t.selectedFile,i)}};t.onContextMenu=function(e){e.preventDefault();e.stopPropagation();var n=i.menu();t.updateExp.isUploading||n.addItem({translation:"MediaLibrary.Insert",tid:"insert",select:function i(){var n=a()(e.target).closest(".media-list-cont-item").scope().entry;v(n.path,n.pathDef);t.confirm()}});t.canDeleteInView()&&n.addItem({translation:"Common.Delete",tid:"delete",select:function t(){var i=a()(e.target).closest(".media-list-cont-item").scope().entry;var n=i.path;if(W())S(e,i,n);else{var r=q(i.pathDef);C(e,r,i.path,n)}}});i.close();i.show(n,{position:{x:e.pageX,y:e.pageY},docking:"BottomRight",qvaOutsideIgnore:t.outsideIgnore})};t.cancel=function(e,i){if(e){e.preventDefault();e.stopPropagation()}if(!i){if(t.inZoom){t.closeZoom();return}if(t.updateExp.deleteDialogShown){t.updateExp.deleteDialogShown=false;return}}if(i||!t.updateExp.isUploading){t.input.onCancel(s);t.destroyComponent()}};t.$watch("updateExp.isUploading",(function(e){false===e&&t.inInAppView()&&w()}));t.$on("$destroy",(function(){B.isShown=false;t.closeZoom();i.close();h(true)}))}]};function U(t){var e={onCancel:t.onCancel,onConfirm:t.onConfirm,selectedFile:t.selectedFile,filter:["png","gif","jpg","jpeg"],outsideIgnore:t.outsideIgnore};var i=o["default"].getService("luiDialog");i.show({template:m,controller:G.controller,input:e});B.isShown=true}function Y(){if(B.isShown){var t=a()("#media-library-modal");t.length&&t.scope().cancel(null,true)}}function J(){return B.isShown}var K={show:U,hide:Y,isShown:J};function Z(t){K.show(t)}function Q(){K.hide()}function X(){return K.isShown()}var tt=e["a"]={show:Z,hide:Q,isShown:X}},"+Yuz":function(t,e,i){"use strict";var n=i("bmRg");function a(t,e,i,n,a,r,o){try{var s=t[r](o);var l=s.value}catch(t){i(t);return}s.done?e(l):Promise.resolve(l).then(n,a)}function r(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function s(t){a(o,n,r,s,l,"next",t)}function l(t){a(o,n,r,s,l,"throw",t)}s(void 0)}))}}var o="CLIPBOARD_MEASURE_ITEM";var s={copyItem:function t(e,i){return r(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function t(s){while(1)switch(s.prev=s.next){case 0:if(!("dimension"===e.type)){s.next=6;break}s.next=3;return i.args.handler.getDimensionLayout(e.id);case 3:s.t0=s.sent;s.next=9;break;case 6:s.next=8;return i.args.handler.getMeasureLayout(e.id);case 8:s.t0=s.sent;case 9:a=s.t0;r={data:e.data,type:e.type,layout:a};n["a"].set(o,r);case 12:case"end":return s.stop()}}),t)})))()},pasteItem:function t(e,i){return r(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function t(l){while(1)switch(l.prev=l.next){case 0:a=n["a"].get(o);delete a.data.qDef.cId;r=i.args.properties.qInfo.qType;s=a.data.qDef.series;"combochart"!==r||s||(a.data.qDef.series={type:"bar"});if(!("dimension"===a.type)){l.next=10;break}l.next=8;return i.args.handler.addDimension(a.data,false);case 8:l.next=12;break;case 10:l.next=12;return i.args.handler.addMeasure(a.data,false);case 12:e();i.$emit("saveProperties");case 14:case"end":return l.stop()}}),t)})))()}};e["a"]=s},"+Z8m":function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-checkbox-component" ng-if="visible" tcl="checkbox">\n\t<div class="value">\n\t\t<label class="lui-checkbox">\n\t\t\t<input class="lui-checkbox__input" type="checkbox" ng-model="value" tid="value" ng-change="change()" ng-disabled="readOnly" />\n\t\t\t<div class="lui-checkbox__check-wrap">\n\t\t\t\t<span class="lui-checkbox__check"></span>\n\t\t\t\t<span class="lui-checkbox__check-text label" ng-disabled="readOnly" ng-if="label" title="{{title || label}}">{{label}}</span>\n\t\t\t</div>\n\t\t</label>\n\t</div>\n</div>\n';var r={template:a,controller:["$scope",function(t){var e=function e(){return t.data};t.definition.inverted&&(t.definition.convertFunctions={get:function t(e){return!e("boolean")},set:function t(e,i){i("boolean",!e)}});var i=t.definition&&t.definition.title||{};n["a"].defineTitle(t,i,e,t.args.handler);n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e)}]};var o=e["default"]=r},"/D2Q":function(t,e,i){"use strict";var n=i("nHjU");var a=i("UV1h");var r=i("plXO");var o={positionRectanglesAlongAxis:function t(e,i,n,a,r){var o;var s;var l;var c;var u=e?e.length:0;true!==r&&e.sort((function(t,e){return t.position>e.position?1:-1}));function d(){if(0===u){o=[];s=0;return}var t;var n;var a;var r;var l;o=[[0]];for(t=1;t<u;t++){n=e[t].position;a=e[t].size;r=e[t-1].position;l=e[t-1].size;r+l/2+i>n-a/2?o[o.length-1].push(t):o.push([t])}s=o?o.length:0}function p(){if(0===u)return;f();h();g();l=v();if(l)return;m()}function f(){var t;var a;var r;var o;var s;a=e[0].position;r=e[0].size;a=Math.max(n,a-r/2)+r/2;e[0].newPosition=a;for(t=1;t<u;t++){o=e[t-1].newPosition;s=e[t-1].size;a=e[t].position;r=e[t].size;a=Math.max(o+s/2+i,a-r/2)+r/2;e[t].newPosition=a}}function h(){var t;var r;var o;var s;var l;r=e[u-1].newPosition;o=e[u-1].size;if(r+o/2>a){e[u-1].newPosition=a-o/2-n;for(t=u-2;t>=0;t--){s=e[t+1].newPosition;l=e[t+1].size;r=e[t].newPosition;o=e[t].size;r=Math.min(s-l/2-i,r+o/2)-o/2;e[t].newPosition=r}}}function v(){var t;var a;var r;var o=e[0].newPosition;var s=e[0].size;if(o-s/2<n)return true;if(o-s/2>n)return false;for(t=1;t<u;t++){a=e[t-1].newPosition;r=e[t-1].size;o=e[t].newPosition;s=e[t].size;if(a+r/2+i<o-s/2)return false}return true}function g(){var t;var i;var n;var a;var r;var l;var u;var d;var p;var f;var h;var v;c&&c.length===s||(c=new Array(s));for(t=0;t<s;t+=1){i=o[t];n=i[0];a=i[i.length-1];r=e[n];l=e[a];p=r.position;u=r.size;h=r.newPosition-u/2;f=l.position;d=l.size;v=l.newPosition+d/2;c[t]={firstPosition:p,lastPosition:f,minPosition:h,maxPosition:v}}}function m(){b(0,n);for(var t=1;t<s;t++)b(t,c[t-1].maxPosition+i)}function b(t,e){var i=o[t];i.length%2===0?y(t,e):x(t,e)}function y(t,i){var n=o[t];var a=n[0];var r=n[n.length/2-1];var s=n[n.length/2];var l=e[a];var c=e[r];var u=e[s];var d=l.newPosition;var p=l.size;var f=(c.position+u.position)/2;var h=(c.newPosition+u.newPosition)/2;var v=h-f;var g=d-v;_(t,d,g,p,i)}function x(t,i){var n=o[t];var a=n[0];var r=n[(n.length-1)/2];var s=e[a];var l=e[r];var c=s.newPosition;var u=s.size;var d=l.position;var p=l.newPosition;var f=p-d;var h=c-f;_(t,c,h,u,i)}function _(t,e,i,n,a){if(i>=e)return;i=Math.max(a+n/2,i);var r=e-i;c[t].minPosition-=r;c[t].maxPosition-=r;C(t,r)}function C(t,i){var n;var a;var r;var s=o[t];var l=s?s.length:0;for(n=0;n<l;n++){a=s[n];r=e[a];r.newPosition-=i}}d();p()}};var s=o;var l=i("qIEf");var c=i.n(l);var u=i("G1wx");var d=i("FJpR");var p=i("/Zwk");var f=i("Xb14");function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function g(t,e,i){e&&v(t.prototype,e);i&&v(t,i);return t}var m=c()(document);var b;function y(t,e,i){var n=t.offset();return new d["a"](e-n.left,i-n.top)}function x(t,e,i){var n=t.offset();return new d["a"](n.left+e,n.top+i)}function _(t,e){var i=t.shapeWrapper.getBoundingRect();return i.pointInside(e.x,e.y)}function C(t,e){return t.filter((function(t){return _(t,e)}))[0]}function w(t,e){return{positions:[x(e,t.x+t.width/2,t.y),x(e,t.x+t.width,t.y+t.height/2),x(e,t.x,t.y+t.height/2),x(e,t.x+t.width/2,t.y+t.height)],directions:["top","right","left","bottom"]}}function q(){b&&(b=null)}var M=function(){function t(e,i){h(this,t);this.$container=c()(e);this.styleService=i;a["a"].ThemeChanged.bind(this.updateStyling.bind(this));this.updateStyling()}g(t,[{key:"updateStyling",value:function t(){this.styling={"font-family":this.styleService.getStyle("tooltip","fontFamily")}}},{key:"setLabelObjects",value:function t(e){this._labelObjects=e}},{key:"on",value:function t(){var e=this;this._onMouseMove=function(t){if(!e._labelObjects)return;var i=y(e.$container,t.pageX,t.pageY);var n=C(e._labelObjects,i);if(n&&b!==n){b=n;var a=w(n.shapeWrapper.getLocalBoundingRect(),e.$container);f["a"].open({content:[{rows:n.tooltipRows}],position:a.positions,direction:a.directions,hideCallback:q,styling:e.styling},p["a"].getDuration(n.tooltipRows.length),500)}else if(!n){b=null;f["a"].close()}};this._onMouseLeave=function(){b=null;f["a"].close()};if(u["a"].treatAsDesktop()){this.$container.on("mousemove",this._onMouseMove);this.$container.on("mouseleave",this._onMouseLeave);m.on("mouseleave.refLineLabels",this._onMouseLeave)}}},{key:"off",value:function t(){this.$container.off("mousemove",this._onMouseMove);this.$container.off("mouseleave",this._onMouseLeave);m.off("mouseleave.refLineLabels",this._onMouseLeave)}},{key:"release",value:function t(){this.$container=null;a["a"].ThemeChanged.unbind(this.updateStyling)}}]);return t}();var S=M;var D=i("wdNe");var I=i("NWoE");var k=i("ZrpC");var L=i("4nJ1");var T=i("zjn0");var E=i("gapF");var A;var P;var O;var R;var V;var N="center";var z="bottom";var F=2;function j(t){t.forEach((function(t){t.size=t.shapeWrapper.measure().height}))}function H(t,e){if(!t||!t.paletteColor&&!t.color)return e;if(t.paletteColor)return a["a"].resolveColor(t.paletteColor);return a["a"].resolveColor(t.color,a["a"].deprecatedPalette)}function $(t,e,i,n,a,r){void 0===a&&(a=Number.MAX_VALUE);void 0===r&&(r=1);var o=new D["a"];o.setText(t);o.font=e;o.x=i;o.y=n;o.maxWidth=a;o.maxNumLines=r;o.align=N;o.baseline=z;return o}function B(t){if(void 0===t||""===t)return 0;A.setText(t);return A.measure().width}function W(t){if(void 0===t||""===t)return 0;O.setText(t);return O.measure()}function G(t){if(void 0===t||""===t)return 0;P.setText(t);return P.measure().width}function U(t,e){if(void 0===t||""===t)return{numLines:0,width:0,height:0,lines:[]};P.setText(t);P.maxWidth=e;return P.measure()}function Y(t,e){if(void 0===t||""===t)return{index:-1,width1:0,width2:0,width:0};void 0===e&&(e=B(t));var i=Number.MAX_VALUE;var n=t.length;var a=Math.floor(n/2);var r=t.substring(0,a);var o=0;var s=true;var l=r.lastIndexOf(" ");var c;var u;var d;var p;while(l>-1&&s){r=t.substring(0,l);c=B(r);u=e-c-R;d=Math.max(c,u);if(i<d)s=false;else{i=d;o++;p={index:l,width1:c,width2:u,width:i};l=r.lastIndexOf(" ")}}if(o>1)return p;l=t.indexOf(" ",a);o=0;while(l>-1){r=t.substring(l+1);u=B(r);c=e-u-R;d=Math.max(c,u);if(i<d)return p;i=d;o++;p={index:l,width1:c,width2:u,width:i};l=t.indexOf(" ",l+1)}void 0===p&&(p={index:-1,width1:0,width2:e,width:e});return p}function J(t,e){if(void 0===t||""===t)return{index1:-1,index2:-1,width1:0,width2:0,width3:0,width:0};void 0===e&&(e=B(t));var i=Number.MAX_VALUE;var n=t.length;var a=Math.floor(n/3);var r=t.substring(0,a);var o=0;var s=true;var l=r.lastIndexOf(" ");var c;var u;var d;var p;var f;var h;var v;while(l>-1&&s){r=t.substring(0,l);c=t.substring(l+1);d=B(c);u=e-d-R;h=Y(c,d);f=h.width;p=Math.max(u,f);if(i<p)s=false;else{i=p;o++;v={index1:l,index2:h.index,width1:u,width2:h.width1,width3:h.width2,width:i};l=r.lastIndexOf(" ")}}if(o>1)return v;l=t.indexOf(" ",a);o=0;while(l>-1){c=t.substring(l+1);d=B(c);u=e-d-R;h=Y(c,d);f=h.width;p=Math.max(u,f);if(i<p)return v;i=p;o++;v={index1:l,index2:h.index,width1:u,width2:h.width1,width3:h.width2,width:i};l=t.indexOf(" ",l+1)}void 0===v&&(v={index1:-1,index2:-1,width1:0,width2:0,width3:e,width:e});return v}function K(t,e,i){var n;if(e<=i)return{minTextWidth:e,level:1};if(e<=2*i){n=Y(t,e);if(n.width<=i)return{minTextWidth:n.width,level:0===n.width1?3:2};if(0===n.width1)return{minTextWidth:Math.ceil(n.width/2)+V,level:3}}if(e<3*i){n=J(t,e);if(0===n.width1&&0===n.width2)return{minTextWidth:Math.min(Math.ceil(n.width/3)+Math.ceil(3*V/2),i),level:3};return{minTextWidth:Math.min(n.width,i),level:3}}return{minTextWidth:i,level:3}}function Z(t,e,i,n,a){t.size=e;t.size2=i;t.numLines=n;t.level=a}function Q(t,e,i){if(t.size/2<=e||3===t.numLines||3===t.level)return;var n;var a;if(2===t.numLines){n=J(t.text,t.singleLineTextWidth);a=U(t.text,n.width);Z(t,n.width,a.height,a.numLines,3);return}n=Y(t.text,t.singleLineTextWidth);if(0===n.width1)return;if(n.width/2<=e||true===i){a=U(t.text,n.width);Z(t,n.width,a.height,a.numLines,2);return}n=J(t.text,t.singleLineTextWidth);a=U(t.text,n.width);Z(t,n.width,a.height,a.numLines,3)}function X(t,e,i){var n;var a;if(t.position+t.size/2+i>e.position-e.size/2){if(t.size>e.size){n=t;a=e.position-e.size/2-i-t.position}else{n=e;a=e.position-(t.position+t.size/2+i)}Q(n,a,true)}}function tt(t,e,i,n,a,r){t.singleLineTextWidth=e;t.size=i;t.size2=n;t.numLines=a;t.level=r}function et(t){return String(void 0!==t.label?t.label:t)}function it(t,e){var i=t;var n=L["a"].escapeRegExp("+-".concat(this.chartFormatter.getLocaleInfo().qDecimalSep||"").concat(this.chartFormatter.getLocaleInfo().qThousandSep||""));var a=i.replace(new RegExp("[0-9e".concat(n,"]"),"g"),"");a=a.length?i:this._axis.format(e);return a}function nt(t){if(!this._axis||!this._data)return;this._axis.updateFormatter();var e=this._data?this._data.length:0;var i=[];var n=this._axis.getPlotMin();var a=this._axis.getPlotMax();var r;var o;var s;var l;var c;var u;var d;var p=[];var f=[];var h=-Number.MAX_VALUE;var v=Number.MAX_VALUE;var g=0;var m=0;this._plotMinValueForRelevantSize=n;this._plotMaxValueForRelevantSize=a;this._maxLowerLabelIndex=void 0;this._minUpperLabelIndex=void 0;for(r=0;r<e;r+=1){if(!E["a"].isVisible(this._data[r])||false===this._data[r].showLabel&&false===this._data[r].showValue)continue;o=et(this._data[r].refLineExpr);s=t?this._currentProperties["value".concat(r)]:this._data[r].refLineExpr.value;if(null===s||Number.isNaN(+s))continue;l=this._data[r].label;c=it.apply(this,[o,s]);u=" ".concat(T["a"].lrm,"(").concat(c,")").concat(T["a"].lrm);if(s<n){g++;f.push({label:l,value:c});h<s&&(this._maxLowerLabelIndex=r);continue}if(s>a){m++;p.push({label:l,value:c});v>s&&(this._minUpperLabelIndex=r);continue}d=E["a"].getRefLineTitle({refLine:this._data[r],label:l,valueString:c});i.push({index:r,text:d,value:s,text1:l,text2:false!==this._data[r].showValue?u:"",tooltipRows:[{label:l,value:c}]})}m>0&&i.push({index:-1,text:m<10?m.toString():"9+",value:"max",type:1,tooltipRows:p});g>0&&i.push({index:-2,text:g<10?g.toString():"9+",value:"min",type:-1,tooltipRows:f});this._labelObjects=i;this._numLabelObjects=this._labelObjects?this._labelObjects.length:0;this._labelsMaxWidthNeedToUpdate=true;this._labelsMaxHeightNeedToUpdate=true;this._labelObjectsNeedToUpdate=false;this._numLowerLabels=g;this._numUpperLabels=m}function at(){if(!this._labelsMaxWidthNeedToUpdate)return;this._labelsMaxWidthNeedToUpdate=false;var t;var e=0;var i;var n;P.maxWidth=this._labelMaxWidthForYAxis;for(t=0;t<this._numLabelObjects;t++){if(void 0!==this._labelObjects[t].type){i=W(this._labelObjects[t].text);n=st(i);e=Math.max(e,n+4)}else e=Math.max(e,G(this._labelObjects[t].text)+4);if(e>=this._labelMaxWidthForYAxis){this._labelsMaxWidth=this._labelMaxWidthForYAxis;return}}this._labelsMaxWidth=e}function rt(t){if("max"===t)return Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-.5+(this.isVertical()?-.1:.1);if("min"===t)return Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-.5+(this.isVertical()?.1:-.1);return Math.floor(this._axis.getPositionOfValue(t))-.5}function ot(){var t;var e;var i;for(t=0;t<this._numLabelObjects;t+=1){e=this._labelObjects[t];i=rt.call(this,e.value);e.position=i}}function st(t){return Math.sqrt(t.width*t.width+t.height*t.height)}function lt(){if(!this._labelsMaxHeightNeedToUpdate)return;this._labelsMaxHeightNeedToUpdate=false;ot.call(this);var t;var e=0;var i;var n;this.calculateLabelWidths(this._labelObjects,this._componentWidth,this._horizontalLabelGap,this._boundaryGap,this._labelMaxWidthForXAxis);s.positionRectanglesAlongAxis(this._labelObjects,this._horizontalLabelGap,this._boundaryGap,this._componentWidth,true);for(t=0;t<this._numLabelObjects;t+=1)if(void 0!==this._labelObjects[t].type){i=W(this._labelObjects[t].text);n=st(i);e=Math.max(e,n)}else e=Math.max(e,this._labelObjects[t].size2);this._labelsMaxHeight=e}function ct(t,e){var i=t.scaleFontSize(t.getStyle("referenceLine.label.name","fontSize"),e,null);var n=t.getStyle("referenceLine.label.name","fontFamily");var a=t.scaleFontSize(t.getStyle("referenceLine.outOfBounds","fontSize"),e,null);var r=t.getStyle("referenceLine.outOfBounds","fontFamily");var o={label:{color:t.getStyle("referenceLine.label.name","color"),font:"normal ".concat(i," ").concat(n)},outOfBounds:{color:t.getStyle("referenceLine.outOfBounds","color"),backgroundColor:t.getStyle("referenceLine.outOfBounds","backgroundColor"),font:"normal ".concat(a," ").concat(r)}};A=$("",o.label.font,0,0,Number.MAX_VALUE,1);P=$("",o.label.font,0,0,Number.MAX_VALUE,3);O=$("",o.outOfBounds.font,0,0,Number.MAX_VALUE,1);R=B("m m")-B("mm");V=B("m");return o}var ut=n["a"].extend("RefLineLabels",{init:function t(){this._super.apply(this,arguments);this.renderer=new r["a"](this.container);this._styleService=a["a"].initializeService("object.".concat(this.options.parentType||""));this._style=ct(this._styleService);this._tooltips=new S(this.container,this._styleService);this._currentProperties={};this._transitionProperties={};this.renderers={labels:this.renderer};this._$renderAreaWrap.addClass("qv-chart-component-reflinelabels");this._hasVisibleRefLines=false;this._labelMargin=4;this._labelMaxWidthForYAxis=70;this._labelMaxWidthForXAxis=100;this._labelMaxHeightForXAxis=50;this._verticaLabelGap=4;this._horizontalLabelGap=6;this._boundaryGap=4},calculateRelevantSize:function t(){this._super();nt.call(this);if(this.isVertical()){at.call(this);this.relevantSize=this._labelsMaxWidth+this._labelMargin}else{var e=this.rect.width?this.rect.width:this._axis._plotSize;if(this._componentWidth!==e){this._componentWidth=e;this._labelsMaxHeightNeedToUpdate=true}lt.call(this);this.relevantSize=this._labelsMaxHeight+this._labelMargin}},calculatePreliminaryRelevantSize:function t(){this.relevantSize=this.isVertical()?this._labelMaxWidthForYAxis:this._labelMaxHeightForXAxis},setData:function t(){this._super.apply(this,arguments);this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues();this._labelObjectsNeedToUpdate=true},setAxis:function t(e){var i=this;this._axis&&this._axis.stopListen("changed",i.invalidateDisplay,i);this._axis=e;this._axis.listen("changed",i.invalidateDisplay,i);this._labelObjectsNeedToUpdate=true},isVisible:function t(){var e=this._super.apply(this,arguments);if(!e)return false;if(this._axis&&(this._plotMinValue!==this._axis.getPlotMin()||this._plotMaxValue!==this._axis.getPlotMax())){this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues()}return this._hasVisibleRefLines},calculateLabelWidths:function t(e,i,n,a,r){var o;var s;var l;var c;var u;var d;var p;var f=e?e.length:0;if(0===f)return;for(o=0;o<f;o++){l=e[o];c=l.text;if(void 0===c||""===c)tt(l,0,0,0,0,0,void 0);else{u=B(c);d=K(c,u,r);p=U(c,d.minTextWidth);tt(l,u,d.minTextWidth,p.height,p.numLines,d.level,p)}}e.sort((function(t,e){return t.position>e.position?1:-1}));l=e[f-1];void 0!==l.text&&""!==l.text&&Q(l,i-l.position-a);l=e[0];void 0!==l.text&&""!==l.text&&Q(l,l.position-a);for(o=0;o<f-1;o++)if(void 0!==e[o].text&&""!==e[o].text&&void 0!==e[o+1].text&&""!==e[o+1].text)for(s=0;s<4;s++)X(e[o],e[o+1],n)},checkIfHavingVisibleRefLines:function t(){if(!this._data||0===this._data.length||!this._axis)return false;var e;for(e=0;e<this._data.length;e+=1)if(E["a"].isVisible(this._data[e])){if("value"in this._data[e].refLineExpr&&(null===this._data[e].refLineExpr.value||Number.isNaN(+this._data[e].refLineExpr.value)))continue;return true}return false},updateLocalPlotMaxMinValues:function t(){if(this._axis){this._plotMinValue=this._axis.getPlotMin();this._plotMaxValue=this._axis.getPlotMax()}},setLabelMargin:function t(e){this._labelMargin=void 0===e?4:e},hasValidData:function t(){return this._super()&&this._data&&this._axis},paint:function t(){this._super.apply(this,arguments);this._style=ct(this._styleService);if(this._plotMinValue!==this._axis.getPlotMin()||this._plotMaxValue!==this._axis.getPlotMax()){this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues()}if(!this._hasVisibleRefLines){this._clearLabels();return}nt.call(this,true);var e;var i;var n;var a;var r;var o;var l;var c;var u;var d;var p;var f;var h;var v;var g;var m;var b;var y;var x=this.isVertical()?"middle":"top"===this.dock?"bottom":"top";var _="middle";var C=this.rect.width;var w=this.rect.height;var q="top"===this.dock?w-this._labelMargin:this._labelMargin;var M=new Array(this._numLabelObjects);var S=this._labelMaxWidthForYAxis;var L=this._style.label.font;var T="top"===this.dock?(w-this._labelMargin)/2:(w+this._labelMargin)/2;if(this.yMirrorMode){c=.7;u=.3;d=C/2-(this._labelMargin/2+1)}else{c=.3;u=.7;d=C/2+this._labelMargin/2+1}var E=d;for(e=0;e<this._numLabelObjects;e+=1){b=this._labelObjects[e];i=b.index;n=rt.call(this,b.value);if(this.isVertical()){a=d;r=n}else{a=n;r=void 0!==b.type?T:q}p=i>-1?H(this._data[i],this._style.label.color):this._style.label.color;if(void 0!==b.type){L=this._style.outOfBounds.font;y=_;p=this._style.outOfBounds.color}else{L=this._style.label.font;y=x}f=new D["a"];f.fill=p;f.x=a;f.y=r;f.align=N;f.baseline=y;f.font=L;f.maxWidth=S;f.maxHeight=92;f.maxNumLines=3;f.ellipsis="… ".concat(b.text2);f.setText(b.text);M[e]=f;b.position=n;b.shapeWrapper=f}if(0===this._numLabelObjects){this._clearLabels();return}if(this.isVertical()){j(this._labelObjects);if(this._numUpperLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-.7;this._labelObjects.push({position:n,size:F})}if(this._numLowerLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-.3;this._labelObjects.push({position:n,size:F})}s.positionRectanglesAlongAxis(this._labelObjects,this._verticaLabelGap,this._boundaryGap,this.rect.height,false);for(e=this._labelObjects.length-1;e>-1;e--)void 0===this._labelObjects[e].shapeWrapper&&this._labelObjects.splice(e,1);for(e=0;e<this._numLabelObjects;e+=1){b=this._labelObjects[e];h=b.shapeWrapper;h.y=b.newPosition;if(1===b.type){v=b.shapeWrapper.measure();g={cx:h.x,cy:h.y,r:st(v)/2}}if(-1===b.type){v=b.shapeWrapper.measure();m={cx:h.x,cy:h.y,r:st(v)/2}}}}else{this.calculateLabelWidths(this._labelObjects,this.rect.width,this._horizontalLabelGap,this._boundaryGap,this._labelMaxWidthForXAxis);if(this._numUpperLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-c;this._labelObjects.push({position:n,size:F})}if(this._numLowerLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-u;this._labelObjects.push({position:n,size:F})}s.positionRectanglesAlongAxis(this._labelObjects,this._horizontalLabelGap,this._boundaryGap,this.rect.width,false);for(e=this._labelObjects.length-1;e>-1;e--)void 0===this._labelObjects[e].shapeWrapper&&this._labelObjects.splice(e,1);for(e=0;e<this._numLabelObjects;e+=1){b=this._labelObjects[e];h=b.shapeWrapper;h.x=b.newPosition;h.maxWidth=b.size;if(1===b.type){v=b.shapeWrapper.measure();g={cx:h.x,cy:T,r:st(v)/2}}if(-1===b.type){v=b.shapeWrapper.measure();m={cx:h.x,cy:T,r:st(v)/2}}}}if(this._numLowerLabels>0){if(this.isVertical())f=new k["a"]([{x:E-3,y:w-5.2},{x:E,y:w},{x:E+3,y:w-5.2}]);else{o=this.yMirrorMode?C-5.2:5.2;l=this.yMirrorMode?C:0;f=new k["a"]([{x:o,y:T-3},{x:l,y:T},{x:o,y:T+3}])}f.fill=this._style.label.color;M.push(f);f=new I["a"](m.cx,m.cy,m.r);f.fill=this._style.outOfBounds.backgroundColor;M.splice(0,0,f)}if(this._numUpperLabels>0){if(this.isVertical())f=new k["a"]([{x:E-3,y:5.2},{x:E,y:0},{x:E+3,y:5.2}]);else{o=this.yMirrorMode?5.2:C-5.2;l=this.yMirrorMode?0:C;f=new k["a"]([{x:o,y:T-3},{x:l,y:T},{x:o,y:T+3}])}f.fill=this._style.label.color;M.push(f);f=new I["a"](g.cx,g.cy,g.r);f.fill=this._style.outOfBounds.backgroundColor;M.splice(0,0,f)}this.renderer.stage.removeChildren();this.renderer.stage.addChildren(M);this.renderer.render();this._tooltips.setLabelObjects(this._labelObjects)},release:function t(){this._super();this._axis&&this._axis.stopListen("changed",null,this);this._tooltips.release();this._tooltips=null},on:function t(){this._super();this._tooltips.on()},off:function t(){this._super();this._tooltips.off()},_updateProperties:function t(){if(!this._data)return;var e=this._data;var i=e.length;var n;var a;for(a=0;a<i;a++){n="value".concat(a);this._transitionProperties[n]=e[a].refLineExpr.value}this.calculateRelevantSize();this._super()},_clearLabels:function t(){this.renderer.stage.removeChildren();this.renderer.clear()}});var dt=e["a"]=ut},"/EBH":function(t,e,i){"use strict";i.r(e);var n=i("TmNk");var a=i.n(n);var r=i("mWu2");var o=i("5Hbw");var s='<div class="qv-property-panel">\n\t<div ng-if="!isInvalid && isLinked" class="overlay">\n\t\t<div class="overlay-content">\n\t\t\t<section>\n\t\t\t\t<div class="icon lui-icon lui-icon--link"></div>\n\t\t\t\t<p class="title" q-translation="Object.Linked.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p class="message" q-translation="Object.Linked.NoEdit.PropPanel.Text" ng-if="!showEditMasterPropsBtn"></p>\n\t\t\t\t<p class="message" q-translation="Object.Linked.Edit.PropPanel.Text" ng-if="showEditMasterPropsBtn"></p>\n\t\t\t\t<button class="lui-button" qva-activate="editMasterProps()" ng-if="showEditMasterPropsBtn" tid="edit-master-item">\n\t\t\t\t\t<span q-translation="Common.Edit"></span>\n\t\t\t\t</button>\n\t\t\t</section>\n\t\t</div>\n\t</div>\n  <div ng-if="!isInvalid && isExternalChart" class="overlay">\n    <div class="overlay-content">\n      <section>\n        <div class="icon lui-icon lui-icon--link"></div>\n        <p class="title" q-translation="DynamicView.DynamicChart"></p>\n        <p class="message" q-translation="DynamicView.PropertyPanel.Edit.Description"></p>\n        <button class="lui-button" qva-activate="editSourceApp()" ng-disabled="canEditSourceApp()" tid="edit-source-app">\n          <span q-translation="DynamicView.PropertyPanel.Edit.Label"></span>\n        </button>\n      </section>\n    </div>\n  </div>\n\t<div ng-if="isInvalid" class="overlay">\n\t\t<div class="overlay-content">\n\t\t\t<section>\n\t\t\t\t<p class="title" q-translation="Object.Invalid.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p q-translation="Object.Invalid.NoEdit.PropPanel.Text"></p>\n\t\t\t</section>\n\t\t</div>\n\t</div>\n\t<div ng-if="!isLinked  && !isExternalChart && isPatched && !ignorePatches" class="overlay">\n\t\t<div class="overlay-content">\n\t\t\t<section>\n\t\t\t\t<div class="lui-icon lui-icon--control"></div>\n\t\t\t\t<p class="title" q-translation="Object.VisualExploration.NoEdit.PropPanel.Title"></p>\n\t\t\t\t<p q-translation="Object.VisualExploration.NoEdit.PropPanel.Text"></p>\n\t\t\t</section>\n\n\t\t\t<div class="space"></div>\n\t\t\t<section>\n\t\t\t\t<button class="lui-button" qva-activate="savePatches()">\n\t\t\t\t\t<span q-translation="Common.Apply"></span>\n\t\t\t\t</button>\n\t\t\t</section>\n\n\t\t\t<div class="space"></div>\n\t\t\t<section>\n\t\t\t\t<button class="lui-button" qva-activate="clearPatches()">\n\t\t\t\t\t<span q-translation="Common.Discard"></span>\n\t\t\t\t</button>\n\t\t\t</section>\n\t\t</div>\n\t</div>\n\n\t<div include-pp-component x-component="headerComponent" x-definition="headerComponentDefinition" x-data="data" x-args="args"></div>\n\n\t<div class="property-content" ng-if="(!isLinked && !isPatched && isReady) || ignorePatches" include-pp-component x-component="rootComponent" x-args="args" x-definition="definition" x-data="data"></div>\n\n  \t<qv-property-sub-panel ng-repeat="subPanel in subPanels"></qv-property-sub-panel>\n</div>\n';var l=i("uVcZ");var c=i("cC4h");var u=i("2Hli");var d=i("6Z/P");var p=i("5xMv");var f=i("4nJ1");var h=i("6uJb");var v=i("/2No");var g=i("xiWV");var m=i("a7yF");var b='<div class="qv-property-sub-panel" ng-class="classes" ng-style="style">\n\t<div class="property-sub-header" ng-click="stepOut()">\n\t\t<div class="header-wrapper">\n\t\t\t<div class="back-navigation">\n\t\t\t\t<span class="lui-icon back-icon  lui-icon--previous  lui-icon--small"></span>\n\t\t\t</div>\n\t\t\t<div class="text-wrapper">\n\t\t\t\t<div class="navigation-title">\n\t\t\t\t\t{{getTitle()}}\n\t\t\t\t</div>\n\t\t\t\t<div class="navigation-sub-title">\n\t\t\t\t\t{{subTitle}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="property-sub-content" include-pp-component\n\t\t x-component="subPanel.component"\n\t\t x-definition="subPanel.definition"\n\t\t x-data="subPanel.data"\n\t\t x-args="subPanel.args">\n\t</div>\n\n\t<div ng-if="footerButtons" class="property-sub-footer">\n\t\t<button ng-repeat="btn in footerButtons" class="lui-button lui-button--block" qva-activate="btn.action($event)">\n\t\t\t<span class="lui-button__text" q-translation="{{btn.translation}}"></span>\n\t\t\t<span ng-if="btn.icon" class="lui-button__icon lui-icon lui-icon--{{btn.icon}}" q-title-translation="{{btn.translation}}"></span>\n\t\t</button>\n\t</div>\n</div>';var y=i("bTsw");var x=i("/5Yl");r["default"].directive("qvPropertySubPanel",[function(){return{template:b,restrict:"E",replace:true,controller:["$scope","$timeout",function(t,e){var i="100%";var n={show:true,hide:true};var a="items.data";var r=t.subPanel;var o=r.options;var s=o.layoutPath;var c=o.propertiesPath;var d=null;var p=o.dataPath||a;o.transitions=f["a"].extend({},n,o.transitions);t.classes={transitions:o.transitions.show};t.style={width:o.width||i,right:"-".concat(o.width||i),top:0,zIndex:21};t.getTitle=function(){if("function"===typeof o.title)return o.title(r.data,r.args.handler);return o.title};t.subTitle=o.subTitle;o.footer&&(t.footerButtons=o.footer.items.filter((function(t){return"button"===t.type})));v();function h(){var e=f["a"].extend({},t.args);var i=e.properties;var n=e.layout;s&&(n=u["a"].getValue(e.layout,s));e.layout=n;var a=i;c&&(a=u["a"].getValue(i,c));if(!a){t.stepOut();return}e.properties=a;if(d){e.handler=d;e.handler.setProperties(a);e.handler.setLayout(n)}r.args=e;r.data=a}function v(){var i=o.definition;var n=x["a"].mapDefinition(i);var a=u["a"].getValue(n,p);d=a?new y["a"]({app:t.args.app,dimensionDefinition:a.dimension||{},measureDefinition:a.measure||{}}):null;r.component=l["a"].findComponent(i);r.definition=n;o.activePath&&o.definition.cacheKey&&t.args.cache.put("accordion_path_".concat(o.definition.cacheKey),o.activePath);h();e((function(){t.style.right=0;t.style.opacity=1}))}function g(e){var i=t.subPanels.map((function(t){return t.options.id}));var n=i.indexOf(e);if(-1===n)return;t.subPanels.splice(n,1);"function"===typeof o.stepOutCallback&&o.stepOutCallback(e)}function m(n){if(n||!o.transitions.hide){t.subPanel=null;g(o.id);return}t.classes.transitions=o.transitions.hide;t.style.right="-".concat(o.width||i);t.style.opacity=0;e(g.bind(null,o.id),300)}t.stepOut=m;r.directiveHook.close=m;t.$watch("data",(function(){h()}))}]}}]);r["default"].directive("qvPropertyPanel",[function(){return{template:s,restrict:"E",replace:true,scope:{ignorePatches:"<"},controller:["$scope",function(t){var e={};t.subPanels=[];p["a"].selectedObject&&p["a"].selectedObject.getAllPropertyPanelContent().then((function(t){if(t){var e={components:null,localeInfo:null,app:null,ext:null,globalChangeListeners:null,handler:null};f["a"].extend(e,t);b(e)}})).catch((function(){}));function i(i){t.title=u["a"].getValue(i,t.titleRef||"title");t.subtitle=i.subtitle;t.isInvalid=i.qError||"invalid"===e.type;o["a"].inClient()&&(t.isPatched=i.qHasSoftPatches)}function n(t){return t.model.app.getObject(t.properties.qExtendsId).then((function(t){return t.getLayout().then((function(t){return t.permissions.update}))}))}t.$on("$destroy",(function(){e.model&&e.model.Invalidated.unbind(s)}));function s(){e.model.getLayout().then((function(a){var r=a.visualization||a.qInfo&&a.qInfo.qType;if(!r)return;if(r!==e.type&&"odagNavPoint"!==r){e.type=r;return}t.$broadcast("layoutchanged",a);i(a);e.model.getProperties().then((function(i){if(i.qInfo.qId!==e.model.id&&"widget"!==e.type)return;t.args.prevProperties=i;i=f["a"].extend(true,{},i);t.data=i;t.args.properties=i;e.properties=i;e.handler&&e.handler.setProperties(i);t.isLinked=!!i.qExtendsId;t.isExternalChart=!!t.args.ext&&!!t.args.ext.hasExternalChildren;t.$broadcast("datachanged",i);t.isLinked&&n(e).then((function(e){t.showEditMasterPropsBtn=e}))}))}))}function m(i){i=i||t.data;a.a.applyModifiers({model:e.model,properties:i}).then((function(){var n,a,r,o;var s=null!==(n=null===(a=e)||void 0===a||null===(r=a.handler)||void 0===r?void 0:r.globalChangeListeners)&&void 0!==n?n:null===(o=e)||void 0===o?void 0:o.globalChangeListeners;s&&s.forEach((function(e){e&&"function"===typeof e&&e(i,t.args.handler,t.args)}));e.model.setProperties(i)}))}t.$on("saveProperties",(function(t,e){t.stopPropagation();m(e)}));t.$on("updateContent",(function(t,e){t.preventDefault();b(e)}));function b(a){x(null,{all:true});t.subPanels.length=0;c["a"].loadComponents().then((function(){e.model&&e.model.Invalidated.unbind(s);var r=f["a"].extend(true,{},a.properties);var o={prevProperties:null,properties:r,saveProperties:m,cache:a.cache,layout:a.layout,model:a.model,localeInfo:a.localeInfo,app:a.app,ext:a.ext,yMirrorMode:a.yMirrorMode};if(a.handler){a.handler.setProperties(r);a.handler.setLayout(a.layout);o.handler=a.handler}t.data=r;t.definition=a.definition;t.args=o;t.args.iconName=a.iconName;t.args.headerLabel=a.headerLabel;t.args.headerAction=a.headerAction;t.iconName=a.iconName;t.isLinked=!!r.qExtendsId;t.isExternalChart=!!o.ext&&(!!o.ext.hasExternalChildren||!!o.layout.hasExternalChildren);if(t.isExternalChart){t.externalSourceApp=o.ext.externalApp||o.layout.children[0].externalReference.app;g["a"].isDynamicViewAvailable(a.app).then((function(e){t.dynamicViewEnabled=e}))}t.showEditMasterPropsBtn=false;t.isLinked&&n(a).then((function(e){t.showEditMasterPropsBtn=e}));t.headerComponentDefinition={type:"items",component:"header-with-switch",translation:t.data.title};t.headerComponent=f["a"].extend({},l["a"].findComponent({type:"items",component:"header-with-switch"}));t.rootComponent=f["a"].extend({},l["a"].findComponent(a.definition));e=a;a.model.Invalidated.bind(s);i(a.layout);t.isReady=true;var c=e.definition.interceptor;if(c&&"function"===typeof c){var u=c(t);if(u&&"function"===typeof u.then){t.isReady=false;u.then((function(){t.isReady=true}))}}(a.model.isInvalid||a.model.isValidating)&&s()}))}var y=t.$root.$on("showSubPanel",(function(e,i){e.preventDefault();if(!i.id)throw new Error("A sub-panel need to have an id specified!");if(!i.triggerId)throw new Error("A sub-panel need to have a triggerId specified!");var n=t.subPanels.some((function(t){return t.options.triggerId===i.triggerId||t.options.id===i.id}));n||t.subPanels.push({directiveHook:{},options:i})}));function x(e,i){i=i||{};var n=t.subPanels||[];if(!n.length)return;if(i.hasOwnProperty("id")){if(!i.id)throw Error("PP: Invalid subpanel ID");var a=n.filter((function(t){return t.options.id===i.id}));a.length&&a[0].directiveHook.close()}else if(i.all){var r=void 0===i.forceClose||i.forceClose;n.forEach((function(t){t.directiveHook.close(r)}))}else n[n.length-1].directiveHook.close()}var _=t.$root.$on("hideSubPanel",x);t.savePatches=function(){e.model.getEffectiveProperties().then((function(t){e.model.setProperties(t).then((function(){e.model.clearSoftPatches()}))}))};t.clearPatches=function(){e.model.clearSoftPatches()};t.editMasterProps=function(){r["default"].getService("qvConfirmDialog").show({message:h["default"].get("Object.Master.EditWarning.Text"),icon:"cogwheel"}).closed.then((function(t){t&&d["a"].editMaster(e.properties.qExtendsId,e.properties.qInfo.qType)}))};t.editSourceApp=function(){var e="".concat(v["a"].rootPath,"sense/app/").concat(t.externalSourceApp);window.open(e,"_blank")};t.canEditSourceApp=function(){return!t.externalSourceApp||!t.dynamicViewEnabled};t.$on("$destroy",(function(){y();_()}))}]}}])},"022E":function(t,e,i){"use strict";var n=i("NWoE");e["a"]={displayObject:n["a"],render:function t(e,i,n){e.beginPath();e.moveTo(this.cx+this.r,this.cy);e.arc(this.cx,this.cy,this.r,0,2*Math.PI,false);i&&e.fill();n&&e.stroke()}}},"0m+j":function(t,e,i){"use strict";var n=i("4nJ1");var a=i("mWu2");var r=i("6uJb");var o=i("ohbW");var s="M4,5.84027778 L4,3 L1.2,3 C1.08954305,3 1,3.08954305 1,3.2 L1,12.8 C1,12.9104569 1.08954305,13 1.2,13 L4,13 L4,6.72152812 C3.36593141,6.95951806 2.69926475,7.31160128 2,7.77777778 C2.66666667,6.94444444 3.33333333,6.29861111 4,5.84027778 Z M5,6.43553932 L5,13 L14.8,13 C14.9104569,13 15,12.9104569 15,12.8 L15,3.2 C15,3.08954305 14.9104569,3 14.8,3 L5,3 L5,5.29340278 C6.96296296,4.49594907 8.92592593,5.32407407 10.8888889,7.77777778 C10.8888889,7.77777778 11.2592593,7.40740741 12,6.66666667 L12,10 L8.66666667,10 C9.40740741,9.25925926 9.77777778,8.88888889 9.77777778,8.88888889 C8.52447243,6.88360034 6.93187984,6.06581715 5,6.43553932 Z M1,2 L15,2 C15.5522847,2 16,2.44771525 16,3 L16,13 C16,13.5522847 15.5522847,14 15,14 L1,14 C0.44771525,14 6.76353751e-17,13.5522847 0,13 L0,3 C-6.76353751e-17,2.44771525 0.44771525,2 1,2 Z";var l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function c(t,e,i){this.offsetX=t;this.offsetY=e;this.elem=i}c.prototype.update=function(t,e){var i={x:t.pageX+this.offsetX,y:t.pageY+this.offsetY};var n=this.elem;e&&e.snapToGrid&&e.snapToGrid.snapFunc(t,e,i,n);if(l){n.style.left="".concat(i.x,"px");n.style.top="".concat(i.y,"px")}else{var a="translate3d(".concat(i.x,"px, ").concat(i.y,"px, 0)");n.style.transform=a;n.style.webkitTransform=a;n.style.mozTransform=a;n.style.msTransform=a}};c.prototype.end=function(){this.elem.parentNode.removeChild(this.elem)};function u(t,e,i,n,a){if(t[i]&&t[i][e.type])return t[i][e.type].call(null,n,a);if("function"===typeof t[i])return t[i].call(null,n,a);return}function d(t,e,i,n){this.info=t;this.handle=e;this.targets=i;this.scrollComponents=n;this.rects=[];this.scrollRects=[];var a=document.body.getBoundingClientRect();this.docRect=a;var r=document.createElement("canvas");this.canvas=r;r.style.position="absolute";r.style.left="".concat(window.pageXOffset||0,"px");r.style.top="".concat(window.pageYOffset||0,"px");r.style.zIndex=999;r.width=a.width;r.height=a.height;r.classList.add("drag-and-drop-canvas");document.body.appendChild(r);this.context=r.getContext("2d")}function p(t,e,i,n){if(t.setLineDash){t.setLineDash(n);t.moveTo(h(e.x),h(e.y));t.lineTo(h(i.x),h(i.y));t.stroke()}else{n=n||[2,4];var a=n.length;var r=i.x-e.x;var o=i.y-e.y;var s=Math.sqrt(r*r+o*o);var l=s;var c=0;var u=true;var d;var p=e.x;var f=e.y;r/=s;o/=s;t.moveTo(h(p),h(f));for(c=0;l>=.1&&c<5e3;++c){d=n[c%a];0===d&&(d=.001);d>l&&(d=l);p+=d*r;f+=d*o;t[u?"lineTo":"moveTo"](h(p),h(f));l-=d;u=!u}}}function f(t,e,i){return t.left<=e&&e<=t.right&&t.top<=i&&i<=t.bottom}function h(t){return Math.round(t)}function v(t,e,i,n){i=i||[5];if(t.setLineDash&&!n){t.setLineDash(i);t.strokeRect(h(e.left),h(e.top),h(e.right-e.left),h(e.bottom-e.top))}else{var a=t.lineWidth/2;t.beginPath();var r={x:e.left+a,y:e.top+a};var o={x:e.right-a,y:e.top+a};var s={x:e.right-a,y:e.bottom-a};var l={x:e.left+a,y:e.bottom-a};n.top||p(t,r,o,i);n.right||p(t,o,s,i);n.bottom||p(t,s,l,i);n.left||p(t,l,r,i);t.stroke()}}function g(t,e,i,n,a){var r=t.lineWidth+4;t.beginPath();t.rect(e.left+r,e.top+r,e.right-e.left-2*r,e.bottom-e.top-2*r);t.fillStyle=i?n||a?"rgba(242,242,242,1)":"rgba(242,242,242,0.9)":"rgba(0,0,0,0.05)";t.fill()}function m(t,e,i,n,a){var o=e.right-e.left;var l=e.bottom-e.top;var c=e.left+o/2;var u=e.top+l/2;if(o>40&&l>40){var d="gridcell"!==i&&(n||a)?"DropZone.CreateChart":"DropZone.DropItem";var p=r["default"].get(d);var f="bold 14px Source Sans Pro, sans-serif";t.fillStyle="#404040";t.textAlign="center";if(b(p,f,o)&&l>60){t.save();t.translate(c-8,u-14);t.fill(new Path2D(s));t.restore();t.font=f;t.fillText(p,c,u+18);return}t.save();t.translate(c-8,u+14);t.fill(new Path2D(s));t.restore()}}function b(t,e,i){var n=o["a"].measureTextObject({type:"text",shape:{text:t,font:e,maxWidth:i-12,align:"center",maxNumLines:1}});return!n.truncated}function y(t,e,i){i.rects=[];for(var a=0;a<t.length;++a)u(t[a],e,"start",i);i.rects.sort((function(t,e){return n["a"].compare(e.prio,t.prio)}))}d.prototype.start=function(){var t=this.targets;var e=this.info;y(t,e,this);var i=this.scrollComponents;for(var n=0;n<i.length;++n)u(i[n],e,"start",this);a["default"].$rootScope.$apply()};d.prototype.update=function(t){t.preventDefault();var e=t.pageX;var i=t.pageY;this.handle.update(t,this.info);var n;var a;var r=this.scrollRects;var o;var s;for(s=0;s<r.length;++s){n=r[s].targetRect;a=f(n,e,i);if(a){o=r[s];break}}this.scroller&&u(this.scroller,this.info,"leave",o,t);var l=!!o&&u(o,this.info,"enter",o,t);if(l){this.activeRect&&u(this.activeRect,this.info,"leave",this.info);this.context.clearRect(0,0,this.docRect.width,this.docRect.height);this.activeRect=null;this.scroller=o;return}if(this.scroller){y(this.targets,this.info,this);this.scroller=false}var c=this.rects;var d=null;for(s=0;s<c.length;++s){var p=c[s].targetRect;n="function"===typeof p?p():p;a=f(n,e,i);if(a){d=c[s];break}}if(d!==this.activeRect){this.activeRect&&u(this.activeRect,this.info,"leave",this.info);var h=this.context;var b=this.docRect;h.clearRect(0,0,b.width,b.height);if(d){h.strokeStyle="#0aaf54";h.lineWidth=2;var x=d.drawRect;if(x){var _=void 0!==d.isEmpty;var C=1===d.prio;v(h,x,[5],d.ignoreLines);g(h,x,_,d.isEmpty,C);_&&m(h,x,this.info.type,d.isEmpty,C)}u(d,this.info,"enter",this.info)}}this.activeRect=d};d.prototype.registerDropRect=function(t){t.prio=t.prio||0;this.rects.push(t)};d.prototype.registerScrollRect=function(t){this.scrollRects.push(t)};d.prototype._end=function(){for(var t=0;t<this.targets.length;++t)u(this.targets[t],this.info,"end",this);document.body.removeChild(this.canvas);this.handle.end();this.ended=true;a["default"].$apply(a["default"].$rootScope)};d.prototype.end=function(t){this.activeRect&&u(this.activeRect,this.info,"drop",this.info,t);this._end()};d.prototype.cancel=function(){this._end()};var x=[];var _=[];var C;e["a"]={registerScrollComponent:function t(e){var i=_.indexOf(e);-1===i&&_.push(e)},unregisterScrollComponent:function t(e){var i=_.indexOf(e);-1!==i&&_.splice(i,1)},registerDropTarget:function t(e){var i=x.indexOf(e);-1===i&&x.push(e)},unregisterDropTarget:function t(e){var i=x.indexOf(e);-1!==i&&x.splice(i,1)},startDrag:function t(e,i){if(C&&!C.ended)return false;e.style.position="absolute";e.style.left="0";e.style.top="0";e.style.zIndex=9999;document.body.appendChild(e);var n=e.getBoundingClientRect();var a=new c(-n.width/2,-n.height/2,e);var r=x.filter((function(t){return u(t,i,"accept",i)}));var o=_.filter((function(){return true}));C=new d(i,a,r,o);try{C.start();return C}catch(t){C.cancel();return false}}}},"0vQd":function(t,e,i){"use strict";var n=i("SOxp");var a=n["a"].extend("Node",{init:function t(){this._parent=null;this._children=[];this._ancestors=null;this.data={}},detach:function t(){this._parent&&this._parent.removeChild(this);return this},each:function t(e,i){if("function"!==typeof e||!this._children||!this._children.length)return this;var n;var a=this._children.length;for(n=0;n<a;n++){e.call(i,this._children[n],n);this._children[n].isBranch&&this._children[n].each(e,i)}return this}});Object.defineProperties(a.prototype,{parent:{get:function t(){return this._parent}},isBranch:{get:function t(){return this._children&&this._children.length}},children:{get:function t(){return this._children}},siblings:{get:function t(){if(!this._parent)return[];var e=this._parent._children.slice();e.splice(e.indexOf(this),1);return e}},ancestors:{get:function t(){if(!this._ancestors){var e=this._parent;this._ancestors=e?[e].concat(e.ancestors):[]}return this._ancestors}},descendants:{get:function t(){var e=[];var i;var n;var a;for(i=0,n=this._children.length;i<n;i++){a=this._children[i];e.push(a);a._children.length&&(e=e.concat(a.descendants))}return e}},leaves:{get:function t(){var e=[];var i;var n;var a=this._children.length;for(n=0;n<a;n++){i=this._children[n];i._children&&i._children.length?e=e.concat(i.leaves):e.push(i)}return e}}});e["a"]=a},"1GDf":function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("NFdj");var o=i.n(r);var s=i("mWu2");var l=i("6uJb");var c=i("sWge");var u=i("YWN+");var d=i("TmNk");var p=i.n(d);var f=i("Sn1l");var h=i("4nJ1");var v=i("2Hli");var g=i("fwzx");var m=i("UV1h");var b=i("e5Ml");var y="bars";var x="dots";var _="sparkline";var C="posNeg";var w="global";var q="local";var M="auto";var S="zeroBaseline";var D="zeroCenter";var I="#DDDDDD";var k=i("WFGH");function L(t){L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return L(t)}var T=function t(e){var i,n,a,r;return null!==(i=null===(n=e.qDef)||void 0===n||null===(a=n.conditionalColoring)||void 0===a||null===(r=a.segments)||void 0===r?void 0:r.limits)&&void 0!==i?i:[]};var E=function t(e){var i=T(e);i.forEach((function(t){var e=null===t||void 0===t?void 0:t.value;var i=null===e||void 0===e?void 0:e.qValueExpression;"object"===L(i)&&(i=i.qExpr);if("string"===typeof i&&i.length>0){delete e.qValueExpression;e.exprBackup=i}}))};var A=function t(e){var i=T(e);i.forEach((function(t){var e=null===t||void 0===t?void 0:t.value;var i=null===e||void 0===e?void 0:e.exprBackup;if("string"===typeof i&&i.length>0){delete e.exprBackup;e.qValueExpression={qExpr:i}}}))};var P=function t(e){var i,n,a;var r="";var o="";var s=null===e||void 0===e||null===(i=e.qDef)||void 0===i||null===(n=i.representation)||void 0===n||null===(a=n.miniChart)||void 0===a?void 0:a.dimension;if(s){var l=s.key;var c=s.type;r="libraryItem"===c?l:"";o="expression"===c?l:""}return{qLibraryId:r,qDef:o}};var O=function t(e){var i,n;var a=null===e||void 0===e||null===(i=e.qMiniChartDef)||void 0===i?void 0:i.qLibraryId;var r=null===e||void 0===e||null===(n=e.qMiniChartDef)||void 0===n?void 0:n.qDef;var o="";var s="";if(a){o="libraryItem";s=a}else if(r){o="expression";s=r}return{type:o,key:s}};var R=function t(e){var i=O(e),n=i.type,a=i.key;if(a){h["a"].setValue(e,"qDef.representation.miniChart.dimension.type",n);h["a"].setValue(e,"qDef.representation.miniChart.dimension.key",a);h["a"].setValue(e,"qMiniChartDef.qLibraryId","");h["a"].setValue(e,"qMiniChartDef.qDef","")}};var V=function t(e){var i=P(e),n=i.qLibraryId,a=i.qDef;h["a"].setValue(e,"qMiniChartDef.qLibraryId",n);h["a"].setValue(e,"qMiniChartDef.qDef",a);h["a"].setDefaultValue(e,"qMiniChartDef.qNullSuppression",true);h["a"].setValue(e,"qMiniChartDef.qSortBy",{qSortByLoadOrder:1,qSortByNumeric:1,qSortByAscii:1});h["a"].setValue(e,"qMiniChartDef.qOtherTotalSpec.qOtherMode","OTHER_COUNTED");h["a"].setValue(e,"qMiniChartDef.qOtherTotalSpec.qOtherCounted.qv","100");h["a"].setValue(e,"qMiniChartDef.qOtherTotalSpec.qOtherSortMode","OTHER_SORT_DESCENDING");h["a"].setDefaultValue(e,"qMiniChartDef.qOtherTotalSpec.qSuppressOther",true)};var N={disableConditionalColoring:E,enableConditionalColoring:A,disableMiniChart:R,enableMiniChart:V,getMiniChartDimension:P,getMiniChartDimensionReverse:O};var z=i("9a/l");var F=i("acVu");function j(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));i.push.apply(i,n)}return i}function H(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(Object(i),true).forEach((function(e){$(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function $(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}var B=k["default"].getLogicFor("hard","default");var W={textAlignAuto:{ref:"qDef.textAlign.auto",type:"boolean",component:"switch",translation:"Common.Text.TextAlignment",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],defaultValue:true},textAlign:{ref:"qDef.textAlign.align",type:"string",component:"item-selection-list",horizontal:true,items:[{component:"icon-item",icon:"align_left",labelPlacement:"bottom",value:"left",translation:"properties.dock.left"},{component:"icon-item",icon:"align_center",labelPlacement:"bottom",value:"center",translation:"Common.Center"},{component:"icon-item",icon:"align_right",labelPlacement:"bottom",value:"right",translation:"properties.dock.right"}],defaultValue:"left",show:function t(e){return void 0!==e.qDef.textAlign&&!e.qDef.textAlign.auto}}};var G=[y,x,_];var U=function t(e){var i,n;return null!==(i=null===(n=e.qDef.representation.miniChart)||void 0===n?void 0:n.type)&&void 0!==i?i:_};var Y=function t(e,i){return i.includes(U(e))};var J=function t(e){return function(t){return Y(t,e)}};var K=B.color.paletteColor.defaultValue();var Z={index:0,color:"none"};var Q={index:10,color:"#f93f17"};var X={representationType:{ref:"qDef.representation.type",type:"string",component:"dropdown",translation:"Object.Table.Representation",show:Object(F["b"])("TABLE_INDICATORS")||Object(F["b"])("TABLE_MINI_CHART"),options:function t(){var t=[{value:b["d"],translation:"Object.Table.Representation.Text"}];Object(F["b"])("TABLE_INDICATORS")&&t.push({value:b["b"],translation:"Object.Table.Representation.Indicator"});Object(F["b"])("TABLE_MINI_CHART")&&!z["a"].isFeatureBlacklisted("qMiniChartDef")&&t.push({value:b["c"],translation:"Common.MiniChart"});return t},change:function t(e){var i;var n=null===e||void 0===e||null===(i=e.qDef)||void 0===i?void 0:i.representation;var a=n||{},r=a.type;r!==b["b"]&&N.disableConditionalColoring(e);r!==b["c"]&&N.disableMiniChart(e);if(r===b["b"]){h["a"].setDefaultValue(n,"indicator.showTextValues",true);h["a"].setDefaultValue(n,"indicator.applySegmentColors",false);h["a"].setDefaultValue(n,"indicator.position","right");h["a"].setDefaultValue(e,"qDef.conditionalColoring",{segments:{limits:[],paletteColors:[{index:6,icon:"dot"}]}});N.enableConditionalColoring(e)}else if(r===b["c"]){h["a"].setDefaultValue(n,"miniChart.type",_);h["a"].setDefaultValue(n,"miniChart.showDots",true);h["a"].setDefaultValue(n,"miniChart.colors.main",K);h["a"].setDefaultValue(n,"miniChart.colors.min",Z);h["a"].setDefaultValue(n,"miniChart.colors.max",Z);h["a"].setDefaultValue(n,"miniChart.colors.first",Z);h["a"].setDefaultValue(n,"miniChart.colors.last",Z);h["a"].setDefaultValue(n,"miniChart.colors.negative",Q);h["a"].setDefaultValue(n,"miniChart.colors.positive",K);h["a"].setDefaultValue(n,"miniChart.yAxis.scale",q);h["a"].setDefaultValue(n,"miniChart.yAxis.position",M);N.enableMiniChart(e)}},defaultValue:b["d"]},representationIndicator:{type:"items",component:"items",show:function t(e){var i=Object(F["b"])("TABLE_INDICATORS");var n=e.qDef.representation;return i&&n&&n.type===b["b"]},items:{segmentInfo:{ref:"qDef.conditionalColoring.segments",type:"items",component:"color-scale-creator",conditionalColoringRef:{props:"qHyperCubeDef.qMeasures",layout:"qHyperCube.qMeasureInfo"},updateMeasureValues:function t(e){var i=v["a"].getValue(e,"qHyperCube.qMeasureInfo",[]);return i.map((function(t){var e=(t.qMin+t.qMax)/2;return{nValue:e/(t.qMin-t.qMax),value:e}}))},showMeasureValue:function t(){return false},useGlyph:true,useAutoMinMax:true,items:{limits:{ref:"qDef.conditionalColoring.segments.limits",defaultValue:[],type:"array",items:{value:{ref:"value",type:"number",expression:"optional",invalid:function t(e){return Number.isNaN(+e.value)},defaultValue:1},gradient:{translation:"properties.gradient",ref:"gradient",type:"boolean",show:false}}},paletteColors:{type:"array",ref:"qDef.conditionalColoring.segments.paletteColors",defaultValue:[{index:6,icon:"dot"}],items:{color:{ref:"color",type:"string",defaultValue:""},index:{ref:"index",type:"integer"},icon:{ref:"icon",type:"string",defaultValue:""}}}}},showTextValues:{ref:"qDef.representation.indicator.showTextValues",type:"boolean",translation:"Object.Table.Representation.Indicator.ShowValues",component:"checkbox",defaultValue:true},applySegmentColors:{ref:"qDef.representation.indicator.applySegmentColors",type:"boolean",translation:"Object.Table.Representation.Indicator.ApplyColorToText",component:"checkbox",defaultValue:false,show:function t(e){var i=v["a"].getValue(e,"qDef.representation.indicator.showTextValues",false);return i}},indicatorPosition:{ref:"qDef.representation.indicator.position",type:"string",component:"dropdown",translation:"Object.Table.Representation.Indicator.IndicatorPosition",defaultValue:"right",show:function t(e){var i=v["a"].getValue(e,"qDef.representation.indicator.showTextValues",false);return i},options:[{value:"left",translation:"properties.dock.left"},{value:"right",translation:"properties.dock.right"}]}}},representationMiniChart:{type:"items",component:"items",show:function t(e){var i,n;var a=Object(F["b"])("TABLE_MINI_CHART");var r=null===e||void 0===e||null===(i=e.qDef)||void 0===i||null===(n=i.representation)||void 0===n?void 0:n.type;return a&&r===b["c"]},items:{miniChartDimension:{translation:"properties.colorBy.selectDimension",type:"object",defaultValue:{},component:"color-by-dropdown",schemaIgnore:true,libraryItemType:"dimension",change:function t(e){N.enableMiniChart(e)},refFn:function t(e){var i=N.getMiniChartDimensionReverse(e);h["a"].setValue(e,"qDef.representation.miniChart.dimension",i);return"qDef.representation.miniChart.dimension"}},miniChart:{type:"items",component:"items",show:function t(e){var i=N.getMiniChartDimension(e);return!!(i.qLibraryId||i.qDef)},items:{type:{ref:"qDef.representation.miniChart.type",translation:"Object.Table.Representation.MiniChart.Type",type:"string",component:"dropdown",defaultValue:_,change:function t(e){var i,n;var a=null===(i=e.qDef.representation.miniChart)||void 0===i||null===(n=i.yAxis)||void 0===n?void 0:n.position;Y(e,[y])&&a===S&&h["a"].setValue(e,"qDef.representation.miniChart.yAxis.position",M)},options:[{value:y,translation:"Object.Table.Representation.MiniChart.Type.Bars"},{value:x,translation:"Object.Table.Representation.MiniChart.Type.Dots"},{value:_,translation:"Object.Table.Representation.MiniChart.Type.Sparkline"},{value:C,translation:"Object.Table.Representation.MiniChart.Type.PosNeg"}]},colors:{type:"items",component:"expandable-light",maxHeight:530,translation:"properties.colors",items:{axisChartsColors:{type:"items",component:"items",show:J(G),items:{mainColor:{ref:"qDef.representation.miniChart.colors.main",label:function t(e){var i=U(e);var n="";switch(i){case y:n="Object.Table.Representation.MiniChart.Colors.Bar";break;case x:n="Object.Table.Representation.MiniChart.Colors.Dot";break;case _:n="Object.Table.Representation.MiniChart.Colors.Line";break;default:break}return l["default"].get(n)},type:"object",component:"color-picker",dualOutput:true,defaultValue:K},maxColor:{ref:"qDef.representation.miniChart.colors.max",translation:"Object.Table.Representation.MiniChart.Colors.MaxValue",type:"object",component:"color-picker",dualOutput:true,disableNone:false,defaultValue:Z},minColor:{ref:"qDef.representation.miniChart.colors.min",translation:"Object.Table.Representation.MiniChart.Colors.MinValue",type:"object",component:"color-picker",dualOutput:true,disableNone:false,defaultValue:Z},firstColor:{ref:"qDef.representation.miniChart.colors.first",translation:"Object.Table.Representation.MiniChart.Colors.FirstValue",type:"object",component:"color-picker",dualOutput:true,disableNone:false,defaultValue:Z},lastColor:{ref:"qDef.representation.miniChart.colors.last",translation:"Object.Table.Representation.MiniChart.Colors.LastValue",type:"object",component:"color-picker",dualOutput:true,disableNone:false,defaultValue:Z}}},posNegColors:{type:"items",component:"items",show:J([C]),items:{positiveColor:{ref:"qDef.representation.miniChart.colors.positive",translation:"Object.Table.Representation.MiniChart.Colors.Positive",type:"object",component:"color-picker",dualOutput:true,defaultValue:K},negativeColor:{ref:"qDef.representation.miniChart.colors.negative",translation:"Object.Table.Representation.MiniChart.Colors.Negative",type:"object",component:"color-picker",dualOutput:true,defaultValue:Q}}}}},dots:{type:"items",grouped:true,items:{dotsGroup:{type:"items",items:{showDots:{ref:"qDef.representation.miniChart.showDots",translation:"Object.Table.Representation.MiniChart.ShowDots",show:J([_]),type:"boolean",component:"checkbox",defaultValue:true}}}}},dataSettings:{type:"items",grouped:true,items:{suppressionGroup:{type:"items",items:{showNullValues:{ref:"qMiniChartDef.qNullSuppression",translation:"properties.dimensions.showNull",type:"boolean",component:"checkbox",defaultValue:true,inverted:true},showTotalValues:{ref:"qMiniChartDef.qOtherTotalSpec.qSuppressOther",translation:"properties.dimensionLimits.showOthers",type:"boolean",component:"checkbox",defaultValue:true,inverted:true},showTotalValuesHint:{component:"text",translation:"Object.Table.Representation.MiniChart.showOthers.Hint",style:"hint"}}}}},yAxis:{type:"items",component:"items",show:J(G),items:{scale:{ref:"qDef.representation.miniChart.yAxis.scale",translation:"Object.Table.Representation.MiniChart.YAxis",type:"string",component:"dropdown",defaultValue:q,options:[{value:q,translation:"Object.Table.Representation.MiniChart.YAxis.Local"},{value:w,translation:"Object.Table.Representation.MiniChart.YAxis.Global"}]},position:{ref:"qDef.representation.miniChart.yAxis.position",type:"string",component:"dropdown",defaultValue:M,options:function t(e){var t=[{value:M,translation:"Auto"}];Y(e,[_,x])&&t.push({value:S,translation:"Object.Table.Representation.MiniChart.YAxis.ZeroAsBaseline"});t.push({value:D,translation:"Object.Table.Representation.MiniChart.YAxis.ZeroAsCenter"});return t}}}}}}}}};var tt={representationType:{ref:"qDef.representation.type",type:"string",component:"dropdown",translation:"Object.Table.Representation",options:[{value:b["d"],translation:"Object.Table.Representation.Text"},{value:b["e"],translation:"Object.Table.Representation.Link"}],defaultValue:b["d"]},representationUrlPosition:{ref:"qDef.representation.urlPosition",type:"string",component:"dropdown",translation:"Object.Table.Representation.LinkSetting",options:[{value:b["k"],translation:"Object.Table.Representation.Link.AddLabel"},{value:b["j"],translation:"Object.Table.Representation.Link.AddURL"}],defaultValue:b["k"],show:function t(e){var i=e.qDef;i=void 0===i?{}:i;var n=i.representation;n=void 0===n?{}:n;var a=n.type;return a===b["e"]&&Object(F["b"])("SEARCH_HYPERLINKS")}},representationUrlLabel:{ref:"qDef.representation.urlLabel",type:"string",expression:"optional",translation:"Object.Table.Representation.LinkLabel",defaultValue:"",change:function t(e){var i=g["a"].getIndexById(e.qAttributeExpressions,g["a"].IDMAP.CELL_LINK_LABEL);if(e.qDef.representation.urlLabel.qStringExpression){var n=e.qDef.representation.urlLabel.qStringExpression.qExpr;-1===i?e.qAttributeExpressions.push(g["a"].create(g["a"].IDMAP.CELL_LINK_LABEL,{qExpression:n})):e.qAttributeExpressions[i].qExpression=n}else e.qAttributeExpressions&&i>-1&&e.qAttributeExpressions.splice(i,1)},show:function t(e){var i=e.qDef;i=void 0===i?{}:i;var n=i.representation;n=void 0===n?{}:n;var a=n.type,r=n.urlPosition,o=void 0===r?b["k"]:r;return Object(F["b"])("SEARCH_HYPERLINKS")?a===b["e"]&&o===b["k"]:a===b["e"]}},representationLinkUrl:{ref:"qDef.representation.linkUrl",type:"string",component:"expression",expressionType:"StringExpression",expression:"always",translation:"Object.Table.Representation.LinkURL",defaultValue:"",change:function t(e){var i=g["a"].getIndexById(e.qAttributeExpressions,g["a"].IDMAP.CELL_LINK_URL);if(e.qDef.representation.linkUrl.qStringExpression){var n=e.qDef.representation.linkUrl.qStringExpression.qExpr;-1===i?e.qAttributeExpressions.push(g["a"].create(g["a"].IDMAP.CELL_LINK_URL,{qExpression:n})):e.qAttributeExpressions[i].qExpression=n}},show:function t(e){var i=e.qDef;i=void 0===i?{}:i;var n=i.representation;n=void 0===n?{}:n;var a=n.type,r=n.urlPosition,o=void 0===r?b["k"]:r;return Object(F["b"])("SEARCH_HYPERLINKS")&&a===b["e"]&&o===b["j"]}}};var et=H(H({tableCellColoring:{component:"attribute-expression-reference",defaultValue:[],ref:"qAttributeExpressions",items:[{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.BackgroundExpression",defaultValue:"",id:g["a"].IDMAP.CELL_BACKGROUND_COLOR,tid:"tableColorBgByExpression"},{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.ForegroundExpression",defaultValue:"",id:g["a"].IDMAP.CELL_FOREGROUND_COLOR,tid:"tableColorByExpression"}]}},h["a"].extend(true,{},W)),{},{totalsAggr:{type:"items",grouped:true,items:{totalsAggrGroup:{type:"items",items:{totalsAggrFunc:{type:"string",component:"dropdown",ref:"qDef.qAggrFunc",translation:"Object.Table.AggrFunc",options:function t(e,i){var n=p.a.hasActiveModifiers({measures:[e],properties:i.properties});var a=!n||p.a.ifEnableTotalsFunction(e);var r=a?[{value:"Expr",translation:"Common.Auto"}]:[];return r.concat([{value:"Avg",translation:"Object.Table.AggrFunc.Avg"},{value:"Count",translation:"Object.Table.AggrFunc.Count"},{value:"Max",translation:"Object.Table.AggrFunc.Max"},{value:"Min",translation:"Object.Table.AggrFunc.Min"},{value:"Sum",translation:"Object.Table.AggrFunc.Sum"},{value:"None",translation:"Object.Table.AggrFunc.None"}])},defaultValue:"Expr"},totalsAggrFuncMessage:{component:"text",translation:"Object.Table.AggrFuncMessage",show:function t(e,i){return i&&!v["a"].getValue(i,"properties.totals.show")&&"noTotals"===v["a"].getValue(i,"properties.totals.position")}}}}}}});var it={tableCellColoring:{component:"attribute-expression-reference",defaultValue:[],ref:"qAttributeExpressions",items:[{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.BackgroundExpression",defaultValue:"",id:g["a"].IDMAP.CELL_BACKGROUND_COLOR,tid:"tableColorBgByExpression"},{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.ForegroundExpression",defaultValue:"",id:g["a"].IDMAP.CELL_FOREGROUND_COLOR,tid:"tableColorByExpression"},{component:"expression",ref:"qExpression",expressionType:"measure",defaultValue:"",id:g["a"].IDMAP.CELL_LINK_LABEL,tid:"URLLabelByExpression",show:false},{component:"expression",ref:"qExpression",expressionType:"measure",defaultValue:"",id:g["a"].IDMAP.CELL_LINK_URL,tid:"URLByExpression",show:false}]}};var nt={visibilityCondition:{type:"string",component:"expression",ref:"qCalcCondition.qCond",expression:"optional",expressionType:"ValueExpr",translation:"Object.Table.Columns.VisibilityCondition",defaultValue:{qv:""},tid:"visibilityCondition",isExpression:function t(e){return"string"===typeof e&&e.trim().length>0}}};var at=m["a"].initializeService("object.straightTable");var rt={uses:"settings",items:{presentation:{grouped:true,type:"items",translation:"properties.presentation",items:[{type:"items",items:[{component:"style-editor",translation:"LayerStyleEditor.component.styling",subtitle:"LayerStyleEditor.component.styling",resetBtnTranslation:"LayerStyleEditor.component.resetAll",key:"theme",ref:"components",defaultValue:[],defaultValues:{key:"theme",content:{fontSize:null,fontColor:{index:-1,color:null},hoverEffect:false,hoverColor:{index:-1,color:null},hoverFontColor:{index:-1,color:null}},header:{fontSize:null,fontColor:{index:-1,color:null}}},items:{chart:{type:"items",items:{headerFontSize:{show:true,ref:"header.fontSize",translation:"ThemeStyleEditor.style.headerFontSize",component:"integer",placeholder:function t(){return parseInt(at.getStyle("header","fontSize"),10)},maxlength:3,change:function t(e){e.header.fontSize=Math.max(5,Math.min(300,Math.floor(e.header.fontSize)))}},headerFontColor:{show:true,ref:"header.fontColor",translation:"ThemeStyleEditor.style.headerFontColor",type:"object",component:"color-picker",dualOutput:true},fontSize:{show:true,translation:"ThemeStyleEditor.style.cellFontSize",ref:"content.fontSize",component:"integer",placeholder:function t(){return parseInt(at.getStyle("content","fontSize"),10)},maxlength:3,change:function t(e){e.content.fontSize=Math.max(5,Math.min(300,Math.floor(e.content.fontSize)))}},fontColor:{show:true,ref:"content.fontColor",translation:"ThemeStyleEditor.style.cellFontColor",type:"object",component:"color-picker",dualOutput:true},hoverEffect:{show:Object(F["b"])("TABLE_HOVER_ROW"),ref:"content.hoverEffect",translation:"ThemeStyleEditor.style.hoverEffect",type:"boolean",component:"switch",options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},hoverColor:{show:function t(e){return Object(F["b"])("TABLE_HOVER_ROW")&&e.content.hoverEffect},ref:"content.hoverColor",translation:"ThemeStyleEditor.style.hoverStyle",type:"object",component:"color-picker",dualOutput:true},hoverFontColor:{show:function t(e){return Object(F["b"])("TABLE_HOVER_ROW")&&e.content.hoverEffect},ref:"content.hoverFontColor",translation:"ThemeStyleEditor.style.hoverFontStyle",type:"object",component:"color-picker",dualOutput:true},scrollbarSize:{show:Object(F["b"])("TABLE_SCROLLBAR_SIZE"),ref:"scrollbar.size",translation:"ThemeStyleEditor.style.scrollbarSize",component:"dropdown",defaultValue:function t(){return at.getStyle("scrollbar","size")||"small"},options:[{value:"small",translation:"Common.Small"},{value:"medium",translation:"Common.Medium"},{value:"large",translation:"Common.Large"}]}}}}}]},{type:"items",items:[{ref:"totals.show",type:"boolean",translation:"properties.totals",component:"switch",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],defaultValue:true},{ref:"totals.position",translation:"Common.Position",type:"string",component:"dropdown",options:[{value:"noTotals",translation:"Common.None"},{value:"top",translation:"Common.Top"},{value:"bottom",translation:"Common.Bottom"}],defaultValue:"noTotals",show:function t(e){return!e.totals.show}},{ref:"totals.label",translation:"properties.totals.label",type:"string",expression:"optional",defaultValue:function t(){return l["default"].get("Object.Table.Totals")}}]},{type:"items",items:[{ref:"scrolling.horizontal",type:"boolean",translation:"Object.Table.Scrolling.HorizontalScroll",component:"dropdown",options:[{value:true,translation:"Object.Table.Scrolling.HorizontalScroll.Scroll"},{value:false,translation:"Object.Table.Scrolling.HorizontalScroll.ColumnPicker"}],defaultValue:true},{type:"items",show:function t(e){var i,n;return null===(i=null===(n=e.scrolling)||void 0===n?void 0:n.horizontal)||void 0===i||i},items:[{ref:"scrolling.keepFirstColumnInView",type:"boolean",translation:"Object.Table.Scrolling.KeepFirstColumnInView",component:"switch",options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],defaultValue:false},{ref:"scrolling.keepFirstColumnInViewTouch",type:"boolean",translation:"Object.Table.Scrolling.EnableOnTouchscreen",component:"checkbox",show:function t(e){var i;return!!(null===(i=e.scrolling)||void 0===i?void 0:i.keepFirstColumnInView)&&Object(F["b"])("TABLE_FREEZE_TOUCH")},defaultValue:false}]}]},{type:"items",translation:"Object.Table.WrapText",items:[{component:"text",translation:"Object.Table.Multiline"},{ref:"multiline.wrapTextInHeaders",type:"boolean",translation:"Object.Table.Multiline.WrapTextInHeaders",component:"checkbox",defaultValue:true},{ref:"multiline.wrapTextInCells",type:"boolean",translation:"Object.Table.Multiline.WrapTextInCells",component:"checkbox",defaultValue:true}]}]}}};var ot={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}}}};var st={type:"items",component:"columns",translation:"Common.Data",sortIndexRef:"qHyperCubeDef.qColumnOrder",allowMove:true,allowAdd:true,addTranslation:"Common.Columns",items:{dimensions:{type:"array",component:"expandable-items",ref:"qHyperCubeDef.qDimensions",grouped:true,items:h["a"].extend(true,{},f["a"].dimensions.items,nt,it,W,tt)},measures:{type:"array",component:"expandable-items",ref:"qHyperCubeDef.qMeasures",grouped:true,items:h["a"].extend(true,{},f["a"].measures.items,nt,et,X)}}};var lt={type:"items",translation:"properties.sorting",items:{defaultSorting:{uses:"sortingWithDisclaimer"},searchSorting:{ref:"search.sorting",type:"string",component:"dropdown",defaultValue:b["f"],translation:"Object.Table.SortingInSearch",show:Object(F["b"])("TABLE_SEARCH_SORTING"),options:[{value:b["f"],translation:"Common.Auto"},{value:b["g"],translation:"Object.Table.SortingInSearch.InheritFromDimension"}]}}};var ct={type:"items",component:"accordion",items:{data:st,sorting:lt,addons:ot,settings:rt}};var ut='<div\n\t\tclass="qv-st"\n\t\tng-class="{ \'qv-st-interactive\': interactive,\n\t\t\t\'qv-st-links-interactive\': linksInteractive,\n\t\t\t\'align-column-picker\': scrollApi.settings.columnPicker.show,\n\t\t\t\'qv-st-selections-active\': selections.active,\n\t\t\t\'qv-st-virtual-scroll-enabled\': scrollApi.virtualScrollEnabled,\n\t\t\t\'qv-st-navigatable\': navigatable,\n\t\t\t\'qv-rtl-layout\': rtl,\n\t\t\t\'qv-st-nowrap-in-headers\': !multiline.wrapTextInHeaders,\n\t\t\t\'qv-st-nowrap-in-cells\': !multiline.wrapTextInCells,\n\t\t\t\'qv-st-reordering-active\': reorderingColumn\n\t\t}"\n\t\tng-keydown="handleKeyDown($event)"\n\t\tng-keyup="handleKeyUp($event)"\n\t\tng-click="onClick($event)"\n\t\trole="grid"\n\t>\n\t\t<div dir="{{direction}}">\n\t\t\t<qv-table-column-width-adjuster\n\t\t\t\tmin-col-width="scrollApi.settings.column.minColWidth"\n\t\t\t\tng-if="navigatable && !selections.active"\n\t\t\t\tcolumns="columns"\n\t\t\t\texplicit-column-widths="visibleExplicitColumnWidths"\n\t\t\t\tx-rtl="rtl"\n\t\t\t\tdir="{{direction}}">\n\t\t\t</qv-table-column-width-adjuster>\n\t\t</div>\n\t\t<div\n\t\t\tclass="qv-st-header-wrapper"\n\t\t\tdir="{{direction}}"\n\t\t\tng-if="!scrollApi.virtualScrollEnabled"\n\t\t>\n\t\t\t<qv-straight-table-top-header></qv-straight-table-top-header>\n\t\t</div>\n\t<qv-scroll-area\n\t\t\tx-non-mouse-viewport-scrolling="nonMouseViewportScrolling"\n\t\t\tclass="qv-grid-object-scroll-area qv-animate"\n\t\t\tdir="{{direction}}"\n\t\t\tx-direction="direction"\n\t\t>\n\t\t<qv-straight-table-data qv-selections-select-while-locked="selectWhileLocked()"\n\t\t\t\t\t\t\t\tqv-selections-toggle-dimension-value="{ selector: \'.qv-st-data-cell\'}"\n\t\t\t\t\t\t\t\tqv-selections-on-toggle-dimension-value="interactive && selectDimensionValue(cell, $event)"\n\t\t\t\t\t\t\t\tqv-selections-multiselect="{ selector: \'.qv-st-data-cell:not(.qv-st-data-cell-null-value)\' }"\n\t\t\t\t\t\t\t\tqv-selections-start-multiselect="interactive && activateSelections(cell)"\n\t\t\t\t\t\t\t\tqv-selections-update-multiselect="interactive && multiselectDimensionValues(start, current, dataColIx)"\n\t\t\t\t\t\t\t\tqv-selections-end-multiselect="interactive && multiselect()">\n\t\t</qv-straight-table-data>\n\t</qv-scroll-area>\n\t<qv-straight-table-bottom-header></qv-straight-table-bottom-header>\n\t<qv-scroll-loader></qv-scroll-loader>\n\t<qv-straight-table-column-picker-activator ng-if="scrollApi.settings.columnPicker.show"></qv-straight-table-column-picker-activator>\n</div>\n';var dt=i("7w0t");var pt=i("G3JA");function ft(t,e,i,n){var r=i.bottom;var o;var s;var l=0;while(l<t.length){if(a()(t[l]).offset().top+a()(t[l]).height()>i.top){o=t[l];break}l++}l=t.length-1;while(l>=0){if(a()(t[l]).offset().top<r){s=t[l];break}l--}if(!o||!s||e<=0)return{index:1,height:n?2:1,width:e||1};var c=a()(o).scope().row.getIndex();var u=a()(s).scope().row.getIndex();return{index:c,height:u-c+1,width:e}}var ht={getIndexHeightAndWidth:ft};var vt={};Object.defineProperties(vt,{ZERO:{value:"zero"},POSITIVE:{value:"positive"}});var gt;function mt(){var t=document.createElement("div");t.style.width="100px";t.style.overflow="hidden";t.style.opacity="0";t.dir="rtl";var e=document.createElement("div");e.style.width="200px";e.innerHTML="t";t.appendChild(e);var i=document.getElementsByTagName("body")[0];i.appendChild(t);var n=t.scrollLeft;i.removeChild(t);return 0===n?vt.ZERO:vt.POSITIVE}function bt(){gt||(gt=mt());return gt}var yt={getStartType:bt};Object.defineProperty(yt,"RTL_SCROLL_START",{value:vt});var xt=yt;var _t=i("7TTN");function Ct(t){Ct="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Ct(t)}function wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function Mt(t,e,i){e&&qt(t.prototype,e);i&&qt(t,i);return t}function St(t,e,i){St="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=Dt(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return St(t,e,i||t)}function Dt(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=Pt(t);if(null===t)break}return t}function It(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&kt(t,e)}function kt(t,e){kt=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return kt(t,e)}function Lt(t){var e=At();return function i(){var n=Pt(t),a;if(e){var r=Pt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Tt(this,a)}}function Tt(t,e){if(e&&("object"===Ct(e)||"function"===typeof e))return e;return Et(t)}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function At(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function Pt(t){Pt=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return Pt(t)}var Ot=function(t){It(i,t);var e=Lt(i);function i(t,n,a,r,o,s){var l;wt(this,i);l=e.call(this,t,n,a,r,o,s);l.headerHeight=0;return l}Mt(i,[{key:"getScrollAreaClientHeight",value:function t(){var e=this.getScrollAreaBoundingBox();var i=this.getBoundingBox();return Math.max(0,i.bottom-e.top-this.headerHeight)}},{key:"getScrollAreaBoundingBox",value:function t(){var e=a.a.extend(true,{},St(Pt(i.prototype),"getScrollAreaBoundingBox",this).call(this));e.height=Math.max(0,e.height-this.headerHeight);return e}},{key:"getScrollAreaClientWidth",value:function t(){return this.$element.width()}},{key:"setHeaderHeight",value:function t(e){this.headerHeight=e}}]);return i}(_t["a"]);var Rt=Ot;function Vt(t){Vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Vt(t)}function Nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function Ft(t,e,i){e&&zt(t.prototype,e);i&&zt(t,i);return t}function jt(t,e,i){jt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=Ht(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return jt(t,e,i||t)}function Ht(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=Jt(t);if(null===t)break}return t}function $t(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&Bt(t,e)}function Bt(t,e){Bt=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return Bt(t,e)}function Wt(t){var e=Yt();return function i(){var n=Jt(t),a;if(e){var r=Jt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Gt(this,a)}}function Gt(t,e){if(e&&("object"===Vt(e)||"function"===typeof e))return e;return Ut(t)}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function Jt(t){Jt=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return Jt(t)}var Kt=function(t){$t(i,t);var e=Wt(i);function i(t,n,a,r,o,s){var l;Nt(this,i);l=e.call(this,t,n,a,r,o,s);l.$element=t.closest(".qv-object-content-container");l.$element.css("-webkit-overflow-scrolling","touch");l.$element.find(".qv-object-content").first().css({overflow:"hidden",width:"inherit"});return l}Ft(i,[{key:"destroy",value:function t(){jt(Jt(i.prototype),"destroy",this).call(this);this.unbindNativeHorizontalScroll();this.$element.find(".qv-object-content").first().css({overflow:"hidden",width:"100%"})}},{key:"unbindNativeHorizontalScroll",value:function t(){this.$element.off("scroll".concat(this.namespace))}},{key:"bindNativeHorizontalScroll",value:function t(e){this.$element.on("scroll".concat(this.namespace),e)}},{key:"getScrollAreaBoundingBox",value:function t(){var e=jt(Jt(i.prototype),"getScrollAreaBoundingBox",this).call(this);e.width=this.$element[0].clientWidth+this.$element[0].scrollLeft;e.right=e.left+e.width;return e}},{key:"getScrollAreaClientWidth",value:function t(){return this.$element[0].clientWidth}},{key:"updateHorizontalScroll",value:function t(e){e.locked?this.$element.css({overflow:"hidden"}):this.$element.css({overflow:e.tableWidth>e.viewportWidth+1?"auto":"",direction:e.direction})}},{key:"getHorizontalScroll",value:function t(){var e=this.$element.scrollLeft();if("rtl"===this.direction&&xt.getStartType()===xt.RTL_SCROLL_START.POSITIVE){var i=this.getScrollWidth();var n=this.getScrollAreaClientWidth();e=i-n-e}else"rtl"===this.direction&&xt.getStartType()===xt.RTL_SCROLL_START.ZERO&&(e=Math.abs(e));return e}},{key:"setHorizontalScroll",value:function t(e){this.$element.scrollLeft(e)}}]);return i}(Rt);var Zt=Kt;function Qt(t){Qt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Qt(t)}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function te(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function ee(t,e,i){e&&te(t.prototype,e);i&&te(t,i);return t}function ie(t,e,i){ie="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=ne(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return ie(t,e,i||t)}function ne(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=ue(t);if(null===t)break}return t}function ae(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&re(t,e)}function re(t,e){re=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return re(t,e)}function oe(t){var e=ce();return function i(){var n=ue(t),a;if(e){var r=ue(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return se(this,a)}}function se(t,e){if(e&&("object"===Qt(e)||"function"===typeof e))return e;return le(t)}function le(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ce(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function ue(t){ue=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return ue(t)}var de=function(t){ae(i,t);var e=oe(i);function i(t,n,a,r,o,s,l,c){var u;Xt(this,i);u=e.call(this,t,n,a,r,o,s);u.snapshotObject=l;u.options=c;return u}ee(i,[{key:"getBoundingBox",value:function t(){var e;e=this.options.freeResize?this.$element[0].getBoundingClientRect():{height:this.snapshotObject.size.h,width:this.snapshotObject.size.w};return e}},{key:"getScrollAreaClientWidth",value:function t(){if(!this.options.freeResize)return this.snapshotObject.size.w;return ie(ue(i.prototype),"getScrollAreaClientWidth",this).call(this)}},{key:"bindNativeHorizontalScroll",value:function t(){}},{key:"setHeaderHeight",value:function t(){}}]);return i}(_t["a"]);var pe=de;function fe(t){fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return fe(t)}function he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function ge(t,e,i){e&&ve(t.prototype,e);i&&ve(t,i);return t}function me(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&be(t,e)}function be(t,e){be=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return be(t,e)}function ye(t){var e=Ce();return function i(){var n=we(t),a;if(e){var r=we(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return xe(this,a)}}function xe(t,e){if(e&&("object"===fe(e)||"function"===typeof e))return e;return _e(t)}function _e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ce(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function we(t){we=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return we(t)}var qe=function(t){me(i,t);var e=ye(i);function i(){he(this,i);return e.apply(this,arguments)}ge(i,[{key:"resetNativeScroll",value:function t(){"rtl"===this.direction&&xt.getStartType()===xt.RTL_SCROLL_START.POSITIVE?this.$scrollArea.scrollLeft(1e4):this.$scrollArea.scrollLeft(0);this.$scrollArea.scrollTop(0)}}]);return i}(Rt);var Me=qe;function Se(t){Se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Se(t)}function De(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ie(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function ke(t,e,i){e&&Ie(t.prototype,e);i&&Ie(t,i);return t}function Le(t,e,i){Le="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=Te(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return Le(t,e,i||t)}function Te(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=Ne(t);if(null===t)break}return t}function Ee(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&Ae(t,e)}function Ae(t,e){Ae=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return Ae(t,e)}function Pe(t){var e=Ve();return function i(){var n=Ne(t),a;if(e){var r=Ne(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Oe(this,a)}}function Oe(t,e){if(e&&("object"===Se(e)||"function"===typeof e))return e;return Re(t)}function Re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ve(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function Ne(t){Ne=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return Ne(t)}var ze=function(t){Ee(i,t);var e=Pe(i);function i(t,n,a,r,o,s,l){var c;De(this,i);c=e.call(this,t,n,a,r,o,s);c.columnPicker=l;return c}ke(i,[{key:"getBoundingBox",value:function t(){var e=a.a.extend(true,{},Le(Ne(i.prototype),"getBoundingBox",this).call(this));this.$element.find(".qv-st-column-picker").length>0&&(e.width+=this.columnPicker.width);return e}}]);return i}(Rt);var Fe=ze;function je(t,e,i,n){var a=".qv-st-data-row";var r=".qv-grid-object-data-first-row";var o=".qv-grid-object-data-last-row";if(t.backendApi.isSnapshot)return new pe(e,i,a,"","",null,t.layout.snapshotData.object,t.options);if(!n.horizontalScroll.enabled)return new Fe(e,i,a,r,o,null,n.columnPicker);if(n.horizontalScroll.useNativeScroll)return new Zt(e,i,a,r,o);return new Me(e,i,a,r,o)}var He={create:je};var $e=i("cLto");var Be=i("i7ks");var We=i("5/lS");var Ge=i("MoEg");var Ue=i("yIOy");var Ye=i("B52N");var Je=i("UJnM");var Ke=i("G1wx");function Ze(t){Ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Ze(t)}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function ti(t,e,i){e&&Xe(t.prototype,e);i&&Xe(t,i);return t}function ei(t,e,i){ei="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=ii(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return ei(t,e,i||t)}function ii(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=ci(t);if(null===t)break}return t}function ni(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&ai(t,e)}function ai(t,e){ai=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return ai(t,e)}function ri(t){var e=li();return function i(){var n=ci(t),a;if(e){var r=ci(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return oi(this,a)}}function oi(t,e){if(e&&("object"===Ze(e)||"function"===typeof e))return e;return si(t)}function si(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function li(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function ci(t){ci=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return ci(t)}var ui=function(t){ni(i,t);var e=ri(i);function i(t,n){var a;Qe(this,i);a=e.call(this,t,n);a.interactive=false;a.columnWidths=null;a.horizontalPositionLocked=false;if(!a.virtualScrollEnabled){a.settings.horizontalScroll.useVirtualScroll=false;a.settings.horizontalScroll.enabled=a.settings.horizontalScroll.useVirtualScroll||a.isHorizontalNativeScroll()}a.direction="ltr";a.headerHeight=0;return a}ti(i,[{key:"initialize",value:function t(e,n,a,r){var o=this;var s;this.settings.horizontalScroll.enabled&&this.isHorizontalNativeScroll()&&e.bindNativeHorizontalScroll((function(){a.fadeScrollbarsWithoutDelay();o.$timeout.cancel(s);s=o.$timeout((function(){a.fadeInScrollbars();o.setVirtualSize(true)}),100)}));return ei(ci(i.prototype),"initialize",this).call(this,e,n,a,r)}},{key:"resetVirtualScrollEnabled",value:function t(e){var i;var n=null!==(i=e.virtualScrollEnabled)&&void 0!==i?i:Ke["a"].treatAsDesktop();var a=e.horizontalScroll;a.enabled&&a.useVirtualScroll&&a.keepFirstColumnInView&&(n=true);this.virtualScrollEnabled=n}},{key:"activate",value:function t(){ei(ci(i.prototype),"activate",this).call(this);this.interactive=true}},{key:"deactivate",value:function t(){ei(ci(i.prototype),"deactivate",this).call(this);this.interactive=false}},{key:"setDirection",value:function t(e){this.direction=e;this.domApi.setDirection(e)}},{key:"setHeaderHeight",value:function t(e){this.headerHeight=e;this.domApi.setHeaderHeight(e)}},{key:"isHorizontalNativeScroll",value:function t(){return this.settings.horizontalScroll.useNativeScroll}},{key:"updateHorizontalScroll",value:function t(){if(!(this.settings.horizontalScroll.enabled&&this.interactive))return;this.isHorizontalNativeScroll()&&this.domApi.updateHorizontalScroll({locked:this.horizontalPositionLocked,viewportWidth:this.settings.width-(this.settings.columnPicker.show?this.settings.columnPicker.width:0),tableWidth:this.getAllColumnsWidth(),direction:this.direction})}},{key:"updateMetaHeaders",value:function t(e,i,n){this.columnWidths=e.reduce((function(t,e){e.isFillColumn||(e.isSearchIcon?t.length>0&&(t[t.length-1]+=e.calculatedWidth):t.push(e.calculatedWidth));return t}),[]);if(this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.useVirtualScroll){var a=this.domApi.getScrollAreaClientWidth()-this.getLockedColumnsWidth();var r=this.settings.horizontalScroll.keepFirstColumnInView;var o=this.virtualScrollApi.getVirtualPosition();var s=n||Math.floor(o.vPosX/this.settings.minColumnWidth);var l=this.columnWidths;var c=r?1:0;var u=0;i&&i.lockScrollPosition||this.updateViewportColumns(this.domApi.getScrollAreaClientWidth());s=Math.min(s,this.getScrollableColumnsCount()-this.viewportColumns);var d=-1;var p=0;e.forEach((function(t){if(t.isFillColumn)return;if(!t.isSearchIcon){d+=1;p=l[d]}if(0===d&&r)t.shouldBeRemoved=false;else if(d<s+c)t.shouldBeRemoved=true;else if(u>=a)t.shouldBeRemoved=true;else{(t.isSearchIcon||t.isMeasure)&&(u+=p);t.shouldBeRemoved=false}}));for(var f=e.length-1;f>=0;--f)e[f].shouldBeRemoved&&e.splice(f,1)}}},{key:"scrollColumnInView",value:function t(e,i){if(!this.settings.horizontalScroll.enabled)return;function n(t){if(!t)return 0;return t.reduce((function(t,e){return t+e}),0)}var a=i.filter((function(t){return!t.isSearchIcon&&!t.isFillColumn}));var r=a.filter((function(t){return t.dataColIx===e}))[0];if(r){var o=a.indexOf(r);var s=n(this.columnWidths.slice(0,o));var l=this.columnWidths[o];var c=this.domApi.getScrollAreaClientWidth();if(this.isHorizontalNativeScroll()){var u=this.domApi.getHorizontalScroll();u>s?u=Math.max(0,s-5):u+c<s+l&&(u=s+l-c+5);u!==this.domApi.getHorizontalScroll()&&this.domApi.setHorizontalScroll(u)}else{var d=this.virtualScrollApi.getVirtualPosition();var p=Math.floor(d.vPosX/this.settings.minColumnWidth);var f=this.columnWidths.slice();if(this.settings.horizontalScroll.keepFirstColumnInView){var h=f.shift();s-=h;c-=h;o--}p>0&&(s-=n(f.slice(0,p)));if(s+l>c){var v=l;var g=o;for(var m=o-1;m>=0;--m){v+=f[m];if(v>c)break;g=m}this.virtualScrollApi.setVirtualViewport({width:(o-g+1)*this.settings.minColumnWidth,height:this.domApi.getVisibleRowCount(this.settings.maxRowHeight)*this.settings.minRowHeight});this.virtualScrollApi.scroll(g*this.settings.minColumnWidth-d.vPosX,0)}}}}},{key:"lockHorizontalScrollPosition",value:function t(e){if(!this.settings.horizontalScroll.enabled)return;this.horizontalPositionLocked=e;this.isHorizontalNativeScroll()?this.updateHorizontalScroll():this.virtualScrollApi.setHorizontalScrollInteractive(!e)}},{key:"getVirtualScrollAmount",value:function t(e,n,a){this.horizontalPositionLocked&&(e=0);if(this.settings.horizontalScroll.enabled){0!==e&&0!==n&&(Math.abs(e)>Math.abs(n)?n=0:e=0);if(a===this.DELTA_MODE.LINE)return{deltaX:e*this.settings.minColumnWidth,deltaY:this.settings.minRowHeight*n};if(a===this.DELTA_MODE.PAGE){var r=Math.max(0,this.domApi.getVisibleRowCount()-1);return{deltaX:this.getVisibleColumnCount()*this.settings.minColumnWidth*e,deltaY:r*this.settings.minRowHeight*n}}}return ei(ci(i.prototype),"getVirtualScrollAmount",this).call(this,e,n,a)}},{key:"getLockedColumnsWidth",value:function t(){var e=0;this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.keepFirstColumnInView&&this.columnWidths&&this.columnWidths.length>0&&(e=this.columnWidths[0]);return e}},{key:"getAllColumnsWidth",value:function t(){if(!this.columnWidths)return 0;return this.columnWidths.reduce((function(t,e){return t+e}),0)}},{key:"getScrollableColumnsWidth",value:function t(){if(!this.columnWidths||0===this.columnWidths.length)return 0;var e=0;this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.keepFirstColumnInView&&(e=1);return this.columnWidths.slice(e).reduce((function(t,e){return t+e}),0)}},{key:"getScrollableColumnsCount",value:function t(){if(!this.columnWidths)return 0;var e=this.columnWidths.length;this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.keepFirstColumnInView&&(e-=1);return e}},{key:"updateViewportColumns",value:function t(e){var i=0;var n=0;if(this.settings.horizontalScroll.keepFirstColumnInView){i+=this.columnWidths[0];n=1}this.viewportColumns=0;for(var a=this.columnWidths.length-1;a>=n;--a){i+=this.columnWidths[a];i<=e&&this.viewportColumns++;if(i>e)break}}},{key:"getViewportColumns",value:function t(){if(this.settings.horizontalScroll.enabled)return this.viewportColumns;return this.getScrollableColumnsCount()}},{key:"getVisibleColumnCount",value:function t(){var e=this.getPage();var i=0;var n=Math.ceil(this.domApi.getScrollAreaClientWidth());var a=0;for(var r=e.left;r<this.columnWidths.length;r++){a+=this.columnWidths[r];if(!(a<=n&&0!==this.columnWidths[r]))break;i++}return i}},{key:"countColumnsToScrollOut",value:function t(e){var i=this.getPage();var n=this.getVisibleColumnCount();var a=this.columnWidths.slice(i.left);var r=a.splice(n).slice(0,e);var o=this.domApi.getScrollAreaClientWidth();var s=o-a.reduce((function(t,e){return t+e}),0);if(!r.length)return 0;r[0]-=s;var l=r.reduce((function(t,e){return t+e}),0);return a.reduce((function(t,e){t+=l>0?1:0;l-=e;return t}),0)}},{key:"onSetVirtualSize",value:function t(e){var i;var n=this.domApi.getScrollAreaBoundingBox();var a=this.domApi.getScrollContentBoundingBox();var r=this.virtualScrollApi.getVirtualPosition();var o=this.settings.minRowHeight*this.totalRows;var s=this.getViewportColumns();var l;var c=this.getLockedColumnsWidth();var u=this.getScrollableColumnsCount();if("reduce"===this.settings.alignToBottom){i=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);a.height>=n.height&&this.settings.viewportRowCount>=this.totalRows&&i<this.settings.viewportRowCount&&(this.settings.viewportRowCount=i);l={width:s*this.settings.minColumnWidth,height:i*this.settings.minRowHeight}}else l={width:s*this.settings.minColumnWidth,height:n.height};var d={width:this.settings.minColumnWidth*u,height:o};var p={top:this.virtualScrollEnabled?this.headerHeight:0,left:"rtl"!==this.direction?c:0,width:n.width-c,height:n.height};this.virtualScrollApi.setVirtualSize(d,l,p);e?this.virtualScrollApi.scroll(r.vPosX,r.vPosY,true):this.virtualScrollApi.scroll(Math.min(r.vPosX,(u-s)*this.settings.minColumnWidth),0,true)}},{key:"updateVirtualViewport",value:function t(){var e=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);var i=this.domApi.getScrollAreaBoundingBox();var n=this.getLockedColumnsWidth();this.virtualScrollApi.setViewport({top:this.virtualScrollEnabled?this.headerHeight:0,left:"rtl"!==this.direction?n:0,width:i.width-n,height:i.height});this.virtualScrollApi.setVirtualViewport({width:this.getViewportColumns()*this.settings.minColumnWidth,height:e*this.settings.minRowHeight})}},{key:"onVirtualScroll",value:function t(e,i){var n=this;this.Scroll.emit();var a=this.virtualScrollApi.getVirtualPosition();var r=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);var o=this.getPage(a);if(o.top>0&&o.top+r>this.totalRows){o.top=Math.max(0,this.totalRows-r);o.height=Math.min(this.totalRows,o.height)}if(o.left>0&&o.left+o.width>this.totalColumns){o.left=Math.max(0,this.totalColumns-o.width);o.width=Math.min(this.totalColumns,o.width)}this.axisDelta.xAxis=e;this.axisDelta.yAxis=i;return this.dataApi.onVirtualScroll(o.top,o.height,o.left,o.width,e,i).then((function(){n.updateVirtualViewport()})).catch((function(t){false}))}}]);return i}(Je["a"]);var di=ui;var pi=i("Zn0i");var fi=i("ByVn");var hi=i("4KCR");var vi=i("g1uV");var gi=i("xN6f");var mi=i("T0sl");var bi="qvFocusableCell";s["default"].directive(bi,[function(){return{restrict:"A",link:function t(e,i,n){var a=e.$eval(n[bi]);var r=e.cell||e.header;e.area=a.area;if(r){r.addFocusListener((function(){i[0].setAttribute("tabindex",0);i[0].focus()}));r.addBlurListener((function(){i[0].setAttribute("tabindex",-1);i[0].blur()}))}e.$watchGroup(["cell.isFillColumn","header.isFillColumn"],(function(t){var e=void 0!==t[0]?t[0]:t[1];e?e&&i[0].removeAttribute("tabindex"):i[0].setAttribute("tabindex",-1)}))}}}]);var yi={HEADERS:"headers",DATA:"data",FOOTER:"footer"};function xi(t){var e=t.getCell(0,0);return{cell:e,area:yi.DATA}}function _i(t){return t.area===yi.DATA}function Ci(t){return t.area===yi.HEADERS}function wi(t){return t.area===yi.FOOTER}function qi(t,e){switch(e.area){case yi.HEADERS:return t.getHeaderCell(e.row,e.col);case yi.DATA:return t.getCell(e.row,e.col);case yi.FOOTER:return t.getFooterCell(e.row,e.col);default:return}}function Mi(t,e){var i=t.getHeaderRow(0);var n;var a=0;for(n=0;n<=e;n++)i.cells[n].isSearchIcon&&a++;return e-a}function Si(t,e){var i=t.getHeaderRow(0);var n;var a=0;for(n=0;n<=e+a;n++)i.cells[n].isSearchIcon&&a++;return e+a}function Di(t){return Ci(t)&&0===t.cell.rowIx}function Ii(t,e){var i=t.dataApi.visualizationCtrl.allMetaHeaders;var n;var a=0;for(n=0;n<=e+a;n++)i[n].isSearchIcon&&a++;return i[e+a]}function ki(t){var e=t.domApi.getVisibleRowCount(t.settings.maxRowHeight);return Math.max(0,e-1)}function Li(t,e,i){var n=i.getVisibleColumnCount();var a=Ti(t,n,e)-1;return a}function Ti(t,e,i){if(!i)return e;var n=Si(t,e-1);var a=t.headerRows[0].cells[n+1];return a.isSearchIcon?n+2:n+1}function Ei(t,e){var i=e.domApi.getHeightOfRow(t)||e.settings.minRowHeight;var n=0;var a;for(a=0;a<t;a++){if(n>=i)break;n+=Math.max(e.domApi.getHeightOfRow(a),e.settings.minRowHeight)}return a}function Ai(t){return t.rowList.rows.length}function Pi(t){return t.footerList.rows.length>0}function Oi(t){var e=t.getPage();return e.top>0}function Ri(t){var e=t.getPage();var i=t.domApi.getVisibleRowCount();return t.interactive&&e.top+i<t.totalRows}function Vi(t){var e=t.getPage();var i=t.getVisibleColumnCount();return t.interactive&&e.left+i<t.totalColumns}function Ni(t,e,i){var n=e.cell.rowIx;var a=e.cell.colIx;var r=yi.DATA;if(_i(e)&&0===n)if(Oi(i))i.scroll(0,-1,i.DELTA_MODE.LINE);else{n=t.headerRows.length-1;r=yi.HEADERS;0===n&&(a=Si(t,a))}else if(Ci(e)){if(n>0){n--;0===n&&(a=Si(t,a))}r=yi.HEADERS}else if(wi(e)){r=yi.DATA;n=Ai(t)-1}else if(n>0){n--;r=yi.DATA}return{area:r,row:n,col:a}}function zi(t,e,i){var n=e.cell.rowIx;var a=e.cell.colIx;var r=yi.DATA;if(Ci(e)&&n===t.headerRows.length-1){0===n&&(a=Mi(t,a));n=0;r=yi.DATA}else if(Ci(e)&&n<t.headerRows.length-1){0===n&&(a=Mi(t,a));n++;r=yi.HEADERS}else if(wi(e))r=yi.FOOTER;else{r=yi.DATA;var o=ki(i);if(n<o)n++;else if(Ri(i)){var s=Ei(o+1,i);n-=s-1;i.scroll(0,s,i.DELTA_MODE.LINE)}else if(Pi(t)){n=0;r=yi.FOOTER}}return{area:r,row:n,col:a}}function Fi(t,e,i){var n=e.cell.rowIx;var a=e.cell.colIx;var r=yi.DATA;Ci(e)?r=yi.HEADERS:wi(e)&&(r=yi.FOOTER);if(a>0)a--;else{var o=i.getPage();if(o.left>0){i.scroll(-1,0,i.DELTA_MODE.LINE);if(Di(e)){var s=Ii(i,o.left-1);s.isDimension&&(a=1)}}}return{area:r,row:n,col:a}}function ji(t,e,i){var n=e.cell.rowIx;var a=e.cell.colIx;var r=e.area;var o=Di(e);var s=Li(t,o,i);if(a<s)a++;else if(Vi(i)){var l=i.countColumnsToScrollOut(1);a-=Ti(t,l,o)-1;i.scroll(l,0,i.DELTA_MODE.LINE)}return{area:r,row:n,col:a}}function Hi(t,e,i){var n=e.cell.rowIx;_i(e)&&(Oi(i)?i.scroll(0,-1,i.DELTA_MODE.PAGE):n=0);return{area:e.area,row:n,col:e.cell.colIx}}function $i(t,e,i){var n=e.cell.rowIx;_i(e)&&(Ri(i)?i.scroll(0,1,i.DELTA_MODE.PAGE):n=ki(i));return{area:e.area,row:n,col:e.cell.colIx}}function Bi(t,e,i){var n=e.cell.rowIx;var a=0;var r=i.getPage();var o=0===r.left;var s;if(0===e.cell.colIx&&0===r.left)return{area:e.area,row:n,col:a};if(!o){s=0-r.left;s<0&&i.scroll(s,0,i.DELTA_MODE.LINE)}return{area:e.area,row:n,col:a}}function Wi(t,e){if(e)return t.headerRows[0].cells.length-1;return t.rows[0].cells.length-1}function Gi(t,e,i){var n=e.cell.rowIx;var a=e.cell.colIx;var r=Di(e);var o=false;if(!Vi(i))return{area:e.area,row:e.cell.rowIx,col:Li(t,r,i)};var s=i.getPage();var l=i.totalColumns-s.left-i.getViewportColumns();a=i.getViewportColumns()-1;i.scroll(l,0,i.DELTA_MODE.LINE);a>Wi(t,r)&&(o=true);if(r){o=true;a=2*i.getViewportColumns()-1}return{deferFocus:o,area:e.area,row:n,col:a}}function Ui(t,e,i,n,a){var r;var o;switch(e){case vi["a"].ARROW_UP:o=Ni(t,i,a);break;case vi["a"].ARROW_DOWN:o=zi(t,i,a);break;case vi["a"].ARROW_RIGHT:o=n?Fi(t,i,a):ji(t,i,a);break;case vi["a"].ARROW_LEFT:o=n?ji(t,i,a):Fi(t,i,a);break;case vi["a"].PAGE_UP:o=Hi(t,i,a);break;case vi["a"].PAGE_DOWN:o=$i(t,i,a);break;case vi["a"].HOME:o=Bi(t,i,a);break;case vi["a"].END:o=Gi(t,i,a);break;default:throw new Error("Unsupported keyboard key.")}r=o.deferFocus?{rowIx:o.row,colIx:o.col}:qi(t,o);return{deferFocus:!!o.deferFocus,cell:r,area:o.area}}function Yi(t,e,i,n){var a=i.cell;var r;switch(e){case vi["a"].ARROW_UP:if(a.rowIx>0||Oi(n)){r=Ni(t,i,n);a=qi(t,r)}break;case vi["a"].ARROW_DOWN:if(a.rowIx<ki(n)||Ri(n)){r=zi(t,i,n);a=qi(t,r)}break;default:throw new Error("Unsupported keyboard key.")}return{cell:a,area:i.area}}function Ji(t,e,i){if(!e)return;var n=e.cell.rowIx;var a=e.cell.colIx;var r=ki(i);var o=Li(t,Di(e),i);if(n>r||a>o){n=n>r?r:n;a=a>o?o:a}var s={area:e.area,row:n,col:a};return{cell:qi(t,s),area:s.area}}function Ki(t,e,i){Object(F["b"])("ACC_SEL_MENU")?Zi(t,e,i):i(t?"Accessibility.Table.ValueSelected":"Accessibility.Table.ValueDeselected")}function Zi(t,e,i){t?1===e?i("Accessibility.Table.ValueSelected.Singular.WithAccSelMenu"):i("Accessibility.Table.ValueSelected.Plural.WithAccSelMenu",[e]):0===e?i("Accessibility.Table.ValueDeselected.Zero.WithAccSelMenu"):1===e?i("Accessibility.Table.ValueDeselected.Singular.WithAccSelMenu"):i("Accessibility.Table.ValueDeselected.Plural.WithAccSelMenu",[e])}var Qi={init:xi,moveFocus:Ui,moveFocusWhileSelecting:Yi,realignFocus:Ji,setSelectDeselectSrMessage:Ki,TABLE_AREA:yi,KEYS:vi["a"]};var Xi=i("QCD8");var tn=i("rQnm");var en=i("UuE/");var nn=i("akA2");var an=i("qOK+");var rn=i("m57d");function on(t){var e,i,n,a;var r=t.options;var o=null===t||void 0===t||null===(e=t.layout)||void 0===e?void 0:e.scrolling;var s=null===(i=null===o||void 0===o?void 0:o.horizontal)||void 0===i||i;var l=null!==(n=null===o||void 0===o?void 0:o.keepFirstColumnInView)&&void 0!==n&&n;var c=null!==(a=null===o||void 0===o?void 0:o.keepFirstColumnInViewTouch)&&void 0!==a&&a;var u=Ke["a"].treatAsDesktop()?s&&l:s&&l&&c;var d=s&&u||Ke["a"].treatAsDesktop();var p={enabled:r.useHorizontalScroll||s,useNativeScroll:r.useHorizontalScroll&&!r.virtualHorizontalScroll,useVirtualScroll:r.virtualHorizontalScroll||!r.useHorizontalScroll,keepFirstColumnInView:r.keepFirstColumnInView||u};if(!d&&p.enabled){p.useNativeScroll=true;p.useVirtualScroll=false}return p}var sn={getHorizontalScrollSettings:on};var ln=i("4zDG");var cn=i("T+/0");var un="qHyperCubeDef.qMeasures";var dn="measures";var pn="qHyperCubeDef.qDimensions";var fn="dimensions";var hn="qDef.representation";var vn="tableRepresentation";function gn(t){cn["a"].quarantineArrayProp(t,un,hn,dn,vn);cn["a"].quarantineArrayProp(t,pn,hn,fn,vn)}function mn(t){cn["a"].unquarantineArrayProp(t,un,hn,dn,vn);cn["a"].unquarantineArrayProp(t,pn,hn,fn,vn)}var bn={quarantine:gn,unquarantine:mn};var yn="qHyperCubeDef.qMeasures";var xn="measures";var _n="qMiniChartDef";var Cn="miniChartDef";function wn(t){cn["a"].quarantineArrayProp(t,yn,_n,xn,Cn)}function qn(t){cn["a"].unquarantineArrayProp(t,yn,_n,xn,Cn)}var Mn={quarantine:wn,unquarantine:qn};function Sn(t,e){t&&t[e]&&""===t[e].qExpression&&""===t[e].qLibraryId&&t.splice(e,1)}function Dn(t){var e=t.qAttributeExpressions;Sn(e,1);Sn(e,0)}function In(t,e,i){var n=ln["default"].hypercube.importProperties(t,e,i);var a=n.qProperty.qHyperCubeDef.qColumnOrder;var r=n.qProperty.qHyperCubeDef.qDimensions;var o=n.qProperty.qHyperCubeDef.qMeasures;bn.unquarantine(n.qProperty);ln["default"].unquarantineObject(n.qProperty,"straightTableColumnWidths")||v["a"].setValue(n,"qProperty.qHyperCubeDef.columnWidths",e.qHyperCubeDef.columnWidths.concat());o.forEach((function(t){""===t.qDef.qAggrFunc&&t.qDef.qExpressions&&0===t.qDef.qExpressions.length&&(t.qDef.qAggrFunc="Expr")}));for(var s=0;s<r.length;s++){var l=r[s].qDef.representation;if(l&&l.urlLabel&&l.urlLabel.qStringExpression){var c=[];c.push({qExpression:l.urlLabel.qStringExpression.qExpr,id:"urlLabel"});v["a"].setValue(n,"qProperty.qHyperCubeDef.qDimensions.".concat(s,".qAttributeExpressions"),c)}}if(!mi["a"].columnOrder.isValid(a,r,o,true)){n.qProperty.qHyperCubeDef.qColumnOrder=mi["a"].columnOrder.create(r,o);n.qProperty.qHyperCubeDef.columnOrder=n.qProperty.qHyperCubeDef.qColumnOrder.concat()}n.qProperty.qHyperCubeDef.qDimensions.forEach((function(t){t.qOtherTotalSpec&&t.qOtherTotalSpec.qTotalMode&&(t.qOtherTotalSpec.qTotalMode="TOTAL_OFF")}));n.qProperty.qHyperCubeDef.qMeasures.forEach(Dn);ln["default"].conditionalShow.unquarantine(n.qProperty);ln["default"].conditionalColoring.unquarantine(n.qProperty);Mn.unquarantine(n.qProperty);return n}function kn(t){var e=ln["default"].hypercube.exportProperties(t);ln["default"].quarantineProperty("qHyperCubeDef.columnWidths",e,"straightTableColumnWidths");ln["default"].conditionalShow.quarantine(e.properties);ln["default"].conditionalColoring.quarantine(e.properties);bn.quarantine(e.properties);Mn.quarantine(e.properties);return e}var Ln={importProperties:In,exportProperties:kn};var Tn=23;var En=16;var An="1.230769231em";var Pn="0.23076923em";var On={ACCUMULATIONS:"accumulation",MOVING_AVERAGE:"movingAverage",DIFFERENCE:"difference",NORMALIZATION:"normalization"};var Rn="paint";var Vn="resize";var Nn="scroll";var zn=i("GF7R");function Fn(t,e){t.forEach((function(t){var i=t.representation;i=void 0===i?{}:i;var n=i.type,a=void 0===n?b["d"]:n;e.includes(a)||e.push(a)}))}function jn(t){var e=[];var i=t||{},n=i.qHyperCube;n=void 0===n?{}:n;var a=n.qDimensionInfo,r=void 0===a?[]:a,o=n.qMeasureInfo,s=void 0===o?[]:o;Fn(r,e);Fn(s,e);return{representations:e}}var Hn=jn;var $n=i("sMS6");var Bn='<div>\n\t<table\n\t\tdir="{{direction}}"\n\t\tng-style="tableStyles.header"\n\t>\n\t\t<colgroup class="qv-st-columns">\n\t\t\t<col ng-repeat="header in grid.headerRows[0].cells"\n\t\t\t\t ng-style="header.style"\n\t\t\t\t ng-class="header.classList"/>\n\t\t</colgroup>\n\t\t<thead qv-straight-table-top-header-rows></thead>\n\t</table>\n</div>\n';var Wn='<thead\n  class="qv-st-header"\n  tid="qv-st-header-top"\n  qva-delegated-activate=".qv-st-header-sortable:not(.qv-st-custom-header)#navigatable && !selections.active && sortHeader($event);\n    .qv-st-header-cell-search:not(.qv-st-total-cell)#interactive && !selections.active && searchHeader($event)"\n>\n  <tr ng-repeat="row in grid.headerRows" \n      ng-style="isTotalRow(row) ? tableStyles.content : tableStyles.header">\n    <th ng-repeat="header in row.cells"\n      tid="{{header.tid}}"\n      ng-attr-id="{{getTopHeaderColIx(header)}}"\n      ng-attr-headers="{{getTotalsColIx(header)}}"\n      ng-attr-scope="{{!header.isTotal && !header.isSearchIcon && !header.isFillColumn ? \'col\' : undefined}}"\n      ng-attr-aria-sort="{{header.ariaSort}}"\n      class="qv-st-header-cell"\n      qva-outside-ignore-for="{{header.qvaOutsideIgnoreFor}}"\n      ng-class="{ \'qv-st-header-cell-numeric\': header.isNumeric,\n        \'qv-st-custom-header\': !!options.customHeader,\n        \'qv-st-header-sortable\': header.sortable,\n        \'qv-st-total-cell\': header.isTotal,\n        \'qv-st-header-cell-hidden\': header.shouldBeRemoved,\n        \'qv-st-header-cell-dimension\': header.isDimension,\n        \'qv-st-header-cell-search\': header.isSearchIcon,\n        \'qv-st-header-cell-search-open\': header.isSearchIcon && header.open,\n        \'qv-st-reordering-column\': header.dataColIx === reorderingColumn.dataColIx\n        }"\n      aria-label="{{header.isTotal ? getSRLabelForTotals(header) : getSRLabelForColumns(header)}}"\n      colspan="{{header.colspan}}"\n      qv-st-column-reorder-handle="navigatable && !selections.active && !header.isSearchIcon && !header.isTotal"\n      qv-focusable-cell="{ area: TABLE_AREA.HEADERS }">\n      <qv-straight-table-header-cell ng-if="!header.isSearchIcon || !options.customHeader" aria-hidden="true"></qv-straight-table-header-cell>\n      <qv-straight-table-header-cell-search ng-if="!header.isTotal && header.isSearchIcon"></qv-straight-table-header-cell-search>\n    </th>\n  </tr>\n</thead>';s["default"].directive("qvStraightTableTopHeaderRows",[function(){return{restrict:"A",replace:true,template:Wn,link:function t(e){var i=e.layout.qInfo.qId;e.sortHeader=function(t){var i=a()(t.target).scope().header;e.sort(i)};e.searchHeader=function(t){var i=a()(t.target).closest(".qv-st-header-cell");var n=i.scope().header;t.preventDefault();e.search(i,n)};e.getSRLabelForColumns=function(t){var e=l["default"].get("Accessibility.Table.SortedAscending");var i=l["default"].get("Accessibility.Table.SortedDescending");var n=l["default"].get("Accessibility.Table.SpaceToSort");if(t.isSearchIcon)return l["default"].get("Accessibility.Table.SpaceToSearch",t.fieldName);if(t.isSorted){if("A"===t.sortIndicator)return"".concat(t.text,". ").concat(e," ").concat(n);if("D"===t.sortIndicator)return"".concat(t.text,". ").concat(i," ").concat(n)}return"".concat(t.text,". ").concat(n)};e.getTopHeaderColIx=function(t){return t.isSearchIcon||t.isTotal?void 0:"".concat(i,"-header-").concat(t.dataColIx)};e.getTotalsColIx=function(t){return t.isTotal?"".concat(i,"-header-").concat(t.dataColIx):void 0};e.isTotalRow=function(t){return t&&t.cells&&t.cells.length&&t.cells[0].isTotal}}}}]);s["default"].directive("qvStraightTableTopHeader",[function(){return{restrict:"E",replace:true,template:Bn}}]);var Gn='<div class="qv-st-header-cell-wrapper" ng-style="{height: customHeaderHeight}">\n\t<div class="qv-st-value" ng-if="!hasCustomHeader"\n\t\t ng-class="{ \'qv-st-header-selections-active\': header.selectionsActive }"\n\t\t ng-style="{ \'textAlign\': header.textAlign }">\n\t\t<div class="qv-st-value-overflow"\n\t\t\t dir="{{header.dir}}"\n\t\t\t ng-class="{ \'qv-rtl-text\': header.isRtl }">\n\t\t\t<i ng-class="{\'lui-icon\': header.locked, \'lui-icon--lock\': header.locked }"></i><span ng-attr-title="{{header.text}}" ng-bind="header.text"></span>\n\t\t</div>\n\t</div>\n\n\t<i ng-if="header.isSorted && header.sortIndicator !== \'N\' && !hasCustomHeader"\n\t   class="qv-st-sorting-indicator"\n\t   ng-class="{ \'lui-icon lui-icon--triangle-top\': header.sortIndicator === \'A\', \'lui-icon lui-icon--triangle-bottom\': header.sortIndicator === \'D\', \'icon-triangle-light\': header.color.bgIsDark && header.reversed }"\n\t   ng-style="header.sortStyle"></i>\n</div>\n';var Un=i("MEqe");var Yn=i("MnS5");s["default"].directive("qvStraightTableHeaderCell",[function(){return{restrict:"E",replace:true,template:Gn,link:function t(e,i){e.hasCustomHeader=!!e.options.customHeader;var n=i.closest(".qv-st-header-cell");if(e.options.customHeader){e.customHeaderHeight=e.options.customHeader.height;var a=s["default"].getService("$compile");e.dmmodel=e.options.customHeader.model;i.append(a(e.options.customHeader.template)(e))}e.$watch("!header.isSearchIcon && !header.isTotal && selections.currentDataColIx === header.dataColIx",(function(t){var a;if(!t){if(-1!==e.selections.currentDataColIx){a=e.row.getPreviousCell(e.header);e.header.removeClass("qv-st-active-col");a&&a.removeClass("qv-st-pre-active-col")}return}a=e.row.getPreviousCell(e.header);e.header.addClass("qv-st-active-col");a&&a.addClass("qv-st-pre-active-col");e.selectionsApi.getDockToElement=function(){var t=e.rtl?n.next():n;return Ye["default"].isSmallDevice?i.closest(".qv-object").parent():t}}))}}}]);s["default"].directive("qvStColumnReorderHandle",[function(){return{restrict:"A",link:function t(e,i,n){if(e.options.disableDragAndDropColumnReorder)return;i.draggable({delay:100,appendTo:i.closest(".qv-st"),axis:"x",zIndex:100,opacity:1,helper:function t(){var e=i.width();var n=a()("<div class='qv-st-column-drag-helper'><table><tbody></tbody></table></div");var r=a()(document.createElement("tr"));i.clone().css("box-sizing","border-box").css("width",i.width()).css("height","".concat(i.height(),"px")).appendTo(r);if(i.next().is(".qv-st-header-cell-search")){i.next().clone().css("box-sizing","border-box").css("width",i.next().width()).css("height","".concat(i.next().height(),"px")).appendTo(r);e+=i.next().width()}n.find("table > tbody").append(r);n.css("box-sizing","border-box").css("width","".concat(e+4,"px"));return n},start:function t(){e.$emit("onStartReorderingColumns",{dataColIx:e.header.dataColIx})},drag:function t(n,a){e.$emit("onReorderingColumns",{dataColIx:e.header.dataColIx,offset:e.rtl?i.closest(".qv-st").innerWidth()-a.position.left-a.helper.width():a.position.left})},stop:function t(n,a){e.$emit("onStopReorderingColumns",{dataColIx:e.header.dataColIx,offset:e.rtl?i.closest(".qv-st").innerWidth()-a.position.left-a.helper.width():a.position.left})}});n.qvStColumnReorderHandle&&e.$watch(n.qvStColumnReorderHandle,(function(t){i.draggable("option","disabled",!t)}))}}}]);s["default"].directive("qvStraightTableHeaderCellSearch",[function(){return{restrict:"E",replace:true,template:'<i class="lui-icon lui-icon--search" q-title-translation="Common.Search"></i>',link:function t(e,i){var n=i.closest(".qv-st-header-cell");e.$watch("!header.isTotal && selections.currentDataColIx === header.dataColIx",(function(t){if(!t){-1!==e.selections.currentDataColIx&&e.header.removeClass("qv-st-active-col");return}e.header.addClass("qv-st-active-col");e.selectionsApi.getSelectionToolbarWidthOffset=function(){var t=e.rtl?n.prev():n;return Ye["default"].isSmallDevice?0:t[0].getBoundingClientRect().width+1}}))}}}]);var Jn='<div class="qv-st-data" tid="qv-st-data">\n\t<qv-scroll-load-button\n\t\t\tclass="qv-st-load-prev"\n\t\t\tdisabled="!navigatable"\n\t\t\tng-show="scrollApi.loadPrevious && scrollApi.settings.columnCount > 0 && ( navigatable || !isLoadPrevVisible )"\n\t\t\ton-load="scrollApi.gotoPreviousBlock()"\n\t\t\ttext="Object.Listbox.LoadPrevious"\n\t\t\tscroll-api="scrollApi"\n\t\t\tshow-button="scrollApi.loadPrevious"\n\t\t\twatch-resize="watchResize"\n\t\t\tprevious="true">\n\t</qv-scroll-load-button>\n\t<label class="hidden-screen-reader-label" ng-attr-id="{{\'st-cell-selection-status-label-\' + objectId }}" aria-live="assertive"></label>\n\t<table\n\t\t\t dir="{{direction}}"\n\t\t\t ng-style="tableStyles.content">\n\t\t<colgroup class="qv-st-columns">\n\t\t\t<col ng-repeat="header in grid.headerRows[0].cells"\n\t\t\t\t ng-style="header.style"\n\t\t\t\t ng-class="header.classList"/>\n\t\t</colgroup>\n\t\t<thead\n\t\t\tng-if="scrollApi.virtualScrollEnabled"\n\t\t\tqv-straight-table-top-header-rows>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="row in grid.rows" \n\t\t\t\tclass="qv-st-data-row" \n\t\t\t\tng-class="{ \'qv-grid-object-data-first-row\': $first, \'qv-grid-object-data-last-row\': $last }" \n\t\t\t\tng-mouseover="grid.hover(row, true, tableStyles)"\n\t\t\t\tng-mouseleave="grid.hover(row, false, tableStyles)"\n\t\t\t\tdata-tid="qv-st-row">\n\t\t\t\t<td ng-repeat="cell in row.cells" class="qv-st-data-cell"\n\t\t\t\t\trowspan="{{ cell.rowspan }}"\n\t\t\t\t\tcolspan="{{ cell.colspan }}"\n\t\t\t\t\theaders="{{ objectId + \'-header-\' + cell.dataColIx}}"\n\t\t\t\t\tqv-focusable-cell="{ area: TABLE_AREA.DATA }"\n\t\t\t\t\tng-style="!cell.selected && !cell.selectedHighlighted && (cell.isHovering ? cell.hoverStyle : cell.style)"\n\t\t\t\t\tdata-tid="qv-st-cell"\n\t\t\t\t\tng-class="{ \'qv-st-data-cell-dimension-value\' : cell.isDimensionValue,\n\t\t\t\t\t\t\'qv-st-data-cell-hidden\': cell.hidden,\n\t\t\t\t\t\t\'qv-st-data-cell-numeric\': cell.isNumeric,\n\t\t\t\t\t\t\'qv-st-data-cell-selected\': cell.selected,\n\t\t\t\t\t\t\'qv-st-data-cell-selected-highlighted\': cell.selectedHighlighted,\n\t\t\t\t\t\t\'qv-st-data-cell-null-value\': cell.isNullValue && !cell.isHovering,\n\t\t\t\t\t\t\'qv-st-data-cell-locked\': cell.isSelectLocked,\n\t\t\t\t\t\t\'qv-st-data-cell-color-dark\': cell.color.bgByExpression && !cell.color.bgIsDark && !cell.isHovering,\n\t\t\t\t\t\t\'qv-st-data-cell-color-light\': cell.color.bgByExpression && cell.color.bgIsDark && !cell.isHovering,\n\t\t\t\t\t\t\'qv-st-data-cell-column-highlighted\': cell.columnHighlighted,\n\t\t\t\t\t\t\'qv-st-reordering-column\': cell.dataColIx === reorderingColumn.dataColIx\n\t\t\t\t\t}">\n\t\t\t\t\t<qv-straight-table-data-cell representation=\'{{cell.representation}}\'></qv-straight-table-data-cell>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t<qv-scroll-loader class="qv-scroll-row-loader"></qv-scroll-loader>\n\t<qv-scroll-load-button\n\t\t\tclass="qv-st-load-next"\n\t\t\tng-show="scrollApi.loadNext && scrollApi.settings.columnCount > 0 && navigatable"\n\t\t\ton-load="scrollApi.gotoNextBlock()"\n\t\t\ttext="Object.Listbox.LoadMore"\n\t\t\tscroll-api="scrollApi"\n\t\t\tshow-button="scrollApi.loadNext"\n\t\t\twatch-resize="watchResize">\n\t</qv-scroll-load-button>\n</div>\n';s["default"].directive("qvStraightTableData",[function(){return{restrict:"E",replace:true,template:Jn}}]);var Kn='<div \n\tclass="qv-st-value"\n\tng-attr-title="{{cell.text}}"\n\tng-style="{ \'textAlign\': cell.textAlign }"\n\tdir="{{cell.dir}}"\n>\n\t<div\n\t\tclass="qv-st-value-overflow"\n\t\tng-class="{ \'qv-rtl-text\': cell.isRtl }"\n\t\tng-switch="template"\n\t>\n\t\t<a\n\t\t\tng-switch-when="url"\n\t\t\tng-style="{\'color\': cell.style.color}"\n\t\t\tqva-activate="openUrl(cell.url)"\n\t\t\tng-attr-title="{{cell.url}}"\n\t\t\tng-bind="cell.text">\n\t\t</a>\n\t\t<span\n\t\t\tng-switch-when="indicator"\n\t\t><span ng-if="cell.indicatorPosition === \'left\'" ng-attr-aria-hidden="{{cell.indicatorShowText}}" ng-attr-aria-label="{{cell.text}}" ng-attr-title="{{cell.text}}" class="lui-icon" ng-class="cell.indicatorCssClass" ng-style="{\'color\': cell.indicatorColor}"></span> <span ng-bind="cell.indicatorShowText ? cell.text : \'\'"></span> <span ng-if="cell.indicatorPosition === \'right\'" ng-attr-aria-hidden="{{cell.indicatorShowText}}" ng-attr-title="{{cell.text}}" class="lui-icon" ng-class="cell.indicatorCssClass" ng-style="{\'color\': cell.indicatorColor}"></span>\n\t\t</span>\n\t\t<div\n\t\t\tng-switch-when="miniChart"\n\t\t\tng-style="{\'height\': innerCellHeight}"\n\t\t\tqv-mini-chart\n\t\t>\n\t\t</div>\n\t\t<span\n\t\t\tng-switch-when="text"\n\t\t\tng-bind="cell.text">\n\t\t</span>\n\t</div>\n</div>\n';var Zn=i("8ZOk");var Qn=i.n(Zn);var Xn=i("ztUU");var ta=i.n(Xn);var ea=i("TMGN");var ia=function t(e){var i=e.rtl;return{data:{extract:{field:"qDimensionInfo/0"}},padding:.3,invert:i}};var na=function t(e){return{y:{data:{field:"qMeasureInfo/0"},invert:true},x:ia(e)}};var aa=function t(e){return{y:{data:{field:"qMeasureInfo/0"},invert:true,max:1,min:-1},x:ia(e)}};var ra=function t(e){var i=m["a"].resolveColor(e);return"none"!==i?i:void 0};var oa=function t(e,i,n,a){return e.datum[i].value>=n&&a};var sa=function t(e,i,n,a){return e.datum[i].value<=n&&a};var la=function t(e,i){return e.data.items[0]===e.datum&&i};var ca=function t(e,i){return e.data.items[e.data.items.length-1]===e.datum&&i};var ua=function t(e,i,n){return e.datum[i].value>0&&n};var da=function t(e,i,n){return e.datum[i].value<0&&n};var pa=function t(e,i,n){var a=e.colors;var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"y";var o=i.qMeasureInfo[0].minMax,s=o.localMin,l=o.localMax;var c=ra(a.max);var u=ra(a.min);var d=ra(a.first);var p=ra(a.last);return function(t){return oa(t,r,l,c)||sa(t,r,s,u)||la(t,d)||ca(t,p)||n}};var fa=function t(e){var i=e.colors;var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";var a=ra(i.positive);var r=ra(i.negative);return function(t){return ua(t,n,a)||da(t,n,r)||I}};var ha=function t(){return{key:"p",type:"point",data:{extract:{field:"qDimensionInfo/0",props:{y:{field:"qMeasureInfo/0"}}}},settings:{x:{scale:"x"},y:{scale:"y"},shape:"circle",size:1,opacity:1,fill:{}}}};function va(t,e){var i=ha();var n=t.type===_&&t.showDots||t.type===x;var a=n?m["a"].resolveColor(t.colors.main):void 0;i.settings.fill.fn=pa(t,e,a);if(t.dotSize){var r=Math.ceil(t.dotSize/2);i.preferredSize={edgeBleed:{top:r,right:r,bottom:r,left:r}};i.settings.sizeLimits={minPx:t.dotSize,maxPx:t.dotSize}}return i}var ga=function t(e){return{key:"lines",type:"line",data:{extract:{field:"qDimensionInfo/0",props:{v:{field:"qMeasureInfo/0"}}}},settings:{coordinates:{major:{scale:"x"},minor:{scale:"y",ref:"v"}},layers:{line:{strokeWidth:1,stroke:e}}}}};function ma(t){var e=m["a"].resolveColor(t.colors.main);return ga(e)}var ba=function t(){return{key:"bars",type:"box",data:{extract:{field:"qDimensionInfo/0",props:{start:0,end:{field:"qMeasureInfo/0"}}}},settings:{major:{scale:"x"},minor:{scale:"y"},box:{fill:{}}}}};function ya(t,e){var i=ba(t);var n=m["a"].resolveColor(t.colors.main);i.settings.box.fill.fn=pa(t,e,n,"end");t.boxMaxWidth&&(i.settings.box.maxWidthPx=t.boxMaxWidth);return i}var xa=function t(e){var i=e.boxMaxWidth;return{key:"posNeg",type:"box",data:{extract:{field:"qDimensionInfo/0",props:{start:0,end:{field:"qMeasureInfo/0"}}}},settings:{major:{scale:"x"},minor:{scale:"y"},box:{maxWidthPx:i,minHeightPx:1,fill:{}}}}};function _a(t){var e=xa(t);e.settings.box.fill.fn=fa(t);return e}var Ca=function t(){return{qDimensionInfo:[{qFallbackTitle:"",qCardinal:1}],qMeasureInfo:[{qFallbackTitle:""}],qDataPages:[{qArea:{qTop:0,qLeft:0,qHeight:0,qWidth:0},qMatrix:[]}],qEffectiveInterColumnSortOrder:[0,1],qSize:{qcx:0,qcy:0},qMode:"S"}};var wa=function t(e,i){var n=e.qMin,a=e.qMax;var r=i.qYMin,o=i.qYMax;return{localMin:n,localMax:a,globalMin:r,globalMax:o}};var qa=function t(e,i){return i===S||e===y&&i===M};var Ma=function t(e,i,n){var a=e.type,r=e.yAxis,o=r.position,s=r.scale;var l=s===w?n.globalMin:n.localMin;var c=s===w?n.globalMax:n.localMax;if(qa(a,o)){l=Math.min(0,l);c=Math.max(0,c)}else if(o===D){var u=Math.max(Math.abs(l),Math.abs(c));l=-u;c=u}i.qMin=l;i.qMax=c;i.minMax=n};var Sa=function t(e){e.forEach((function(t){var e=t[1].qNum;0!==e&&(t[1].qNum=e>0?1:-1)}))};var Da=function t(e,i,n){var a=e.type;var r=n.qMatrix;if(r&&r.length){a===C&&Sa(r);i.qDataPages=[{qArea:{qTop:0,qLeft:0,qHeight:r.length,qWidth:2},qMatrix:r}];i.qSize={qcx:2,qcy:r.length}}};function Ia(t,e,i){var n=Ca();var a=wa(e,i);Ma(t,n.qMeasureInfo[0],a);Da(t,n,e);return n}var ka=function t(e,i){switch(e.type){case y:return[ya(e,i)];case x:return[va(e,i)];case _:return[ma(e,i),va(e,i)];case C:return[_a(e,i)];default:return}};var La=function t(e){switch(e.type){case y:case x:case _:return na(e);case C:return aa(e);default:return}};function Ta(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var a=Ia(e,i,n);var r=ka(e,a);var o=La(e);var s={settings:{scales:o,components:r},data:[{type:"q",key:"qHyperCube",data:a}]};e.size&&(s.settings.strategy={size:e.size});t.update(s)}function Ea(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));i.push.apply(i,n)}return i}function Aa(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ea(Object(i),true).forEach((function(e){Pa(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ea(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Pa(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}var Oa=Qn()();Oa.use(ta.a);Oa.renderer.prio(["canvas"]);ea["a"].DEVELOPER&&Qn.a.logger.level(Qn.a.logger.LOG_LEVEL.WARN);s["default"].directive("qvMiniChart",[function(){return{restrict:"A",replace:false,link:function t(e,i){var n=Oa.chart({element:i[0]});var a;e.$watch("cell.miniChart",(function(){clearTimeout(a);a=setTimeout((function(){var t=e.cell.miniChart;var a={width:i[0].offsetWidth,height:i[0].offsetHeight};var r=Aa({size:a,dotSize:4,boxMaxWidth:8,rtl:e.rtl},null===t||void 0===t?void 0:t.options);Ta(n,r,t.cellData,t.measureData)}),0)}))}}}]);function Ra(t){var e=t.cell,i=void 0===e?{}:e;var n=i.representation,a=void 0===n?"text":n;var r=t.selections;r=void 0===r?{}:r;var o=r.active,s=void 0!==o&&o;a===b["e"]&&s?t.template=b["d"]:t.template=a}s["default"].directive("qvStraightTableDataCell",[function(){return{restrict:"E",replace:true,template:Kn,link:function t(e){Ra(e);e.$watchGroup(["cell.representation","selections.active"],(function(){Ra(e)}))}}}]);var Va='<div class="qv-st-bottom-header" tid="qv-st-bottom-header" dir="{{direction}}">\n\t<table\n\t\tdir="{{direction}}"\n\t>\n\t\t<colgroup class="qv-st-columns">\n\t\t\t<col ng-repeat="header in grid.headerRows[0].cells"\n\t\t\t\t ng-style="header.style"\n\t\t\t\t ng-class="header.classList" />\n\t\t</colgroup>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="row in grid.footerRows"\n\t\t\t\tng-style="tableStyles.content">\n\t\t\t\t<td ng-repeat="header in row.cells"\n\t\t\t\t\ttid="{{header.tid}}"\n\t\t\t\t\theaders="{{objectId + \'-header-\' + $index}}"\n\t\t\t\t\tclass="qv-st-header-cell"\n\t\t\t\t\tng-class="{ \'qv-st-header-cell-numeric\': header.isNumeric,\n\t\t\t\t\t\t\'qv-st-total-cell\': header.isTotal,\n\t\t\t\t\t\t\'qv-st-header-cell-hidden\': header.shouldBeRemoved,\n\t\t\t\t\t\t\'qv-st-header-cell-dimension\': header.isDimension,\n\t\t\t\t\t\t\'qv-st-header-cell-measure\': header.isMeasure,\n\t\t\t\t\t\t\'qv-st-header-cell-search\': header.isSearchIcon }"\n\t\t\t\t\tcolspan="{{header.colspan}}"\n\t\t\t\t\taria-label="{{getSRLabelForTotals(header)}}"\n\t\t\t\t\tqv-focusable-cell="{ area: TABLE_AREA.FOOTER }">\n\t\t\t\t\t<qv-straight-table-header-cell></qv-straight-table-header-cell>\n\t\t\t\t</th>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n';s["default"].directive("qvStraightTableBottomHeader",[function(){return{restrict:"E",replace:true,template:Va,link:function t(){}}}]);var Na=i("K6JV");var za=i("Z9ZH");var Fa=i.n(za);var ja='<div class="qv-st-column-picker"\n\t tid="qv-st-column-picker"\n\t ng-class="{ \'qv-st-column-picker-open\': columnPicker.showPopover }"\n\t tabindex="-1">\n\t<table>\n\t\t<tr>\n\t\t\t<td q-title-translation="{{columnPicker.showPopover ? \'Tooltip.CloseColumnPicker\' : \'Tooltip.ColumnPicker\'}}">\n\t\t\t\t<div class="qv-st-column-picker-more">\n\t\t\t\t\t<span class="lui-icon lui-icon--more" aria-hidden="true"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n';var Ha='<lui-popover\n\t\tclass="qv-st-column-picker-popover"\n\t\tqva-direction x-dir-setting="{{input.options.direction}}"\n\t\tqva-mouse-wheel-outside="closeColumnPicker()">\n\t<lui-popover-header>\n\t\t<lui-popover-title q-translation="Common.Columns"></lui-popover-title>\n\t</lui-popover-header>\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="qv-st-cp-popover-list"\n\t\t\tqv-sortable-list="input.sortableItemLists">\n\t\t\t<li class="qv-st-cp-popover-list-item"\n\t\t\t\tdraggable="false"\n\t\t\t\tng-repeat="col in input.columnPicker.columns.items track by col.id"\n\t\t\t\tng-class="col.classList"\n\t\t\t\tng-style="col.style">\n\t\t\t\t<table class="qv-st-cp-popover-table" ng-if="col.id !== -2">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td ng-class="{ \'disabled\': col.disabled }">\n\t\t\t\t\t\t\t<div class="qv-st-cp-overflow" ng-bind="col.title" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{col.title}}"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="col.id !== -2" class="qv-st-cp-handle">\n\t\t\t\t\t\t\t<div class="lui-icon lui-icon--handle"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n';var $a=i("wIyQ");var Ba=i("8H7g");function Wa(t,e,i){var n=t.slice();var a=n.indexOf(i);n.splice(a,1);if(e.length<2)return n;var r=e.indexOf(i);var o;var s;if(r>0){o=e[r-1];s=n.indexOf(o)+1}else{o=e[1];s=Math.max(0,n.indexOf(o))}n.splice(s,0,i);return n}var Ga={applyPartialReorder:Wa};var Ua=i("IVN8");var Ya={show:function t(e){var i=s["default"].getService("luiPopover").showToPosition({template:Ha,input:e,x:e.position.x,y:e.position.y,dock:"right",closeOnEscape:true,closeOnOutside:true,outsideIgnore:e.qvaOutsideIgnoreFor});i.closed.then((function(){e.closeColumnPicker();i=null}));return function(){i&&i.close()}}};s["default"].directive("qvStraightTableColumnPicker",[function(){return{restrict:"A",require:"qvSortableList",link:function t(e,i,n,a){e.columnPicker.cancel=function(){a.cancel()}}}}]);var Ja=s["default"].directive("qvStraightTableColumnPickerActivator",[function(){return{restrict:"E",replace:true,template:ja,require:"^qvObjectContent",link:function t(e,i,n,a){var r;function o(){e.columnPicker.showPopover=false;r&&r();r=void 0}function s(){e.columnPicker.columns.get().forEach((function(t,i){e.scrollApi.settings.columnCount<i?t.disabled=true:t.disabled=false}))}function l(){var t=e.layout.qHyperCube;var i=t.qDimensionInfo.concat(t.qMeasureInfo);var n={};e.columnPicker.cancel();e.columnPicker.columns.reset();mi["a"].columnOrder.getVisible(t).forEach((function(t){var n={id:t,classList:["qv-st-cp-sortable"],title:i[t].qFallbackTitle};e.columnPicker.columns.addSortableItem(n)}));n.title="";n.id=-2;n.classList=["qv-st-cp-divider"];n.isDivider=true;e.columnPicker.columns.addSortableItem(n,32);var a=e.columnPicker.columns.getIndexByItem(n);var r=e.scrollApi.settings.columnCount;e.columnPicker.columns.moveItem(a,r);s()}function c(){$a["a"].off("start.".concat(e.$id),c);if(e.columnPicker.showPopover){r();e.columnPicker.showPopover=false;e.$digest()}}function u(t){if(!e.navigatable||e.selections.active)return;e.columnPicker.showPopover=!e.columnPicker.showPopover;if(e.columnPicker.showPopover){l();var n=i[0].getBoundingClientRect();var a=t.pagePoints[0].y;r=Ya.show({position:{x:n.left+Math.floor(n.width/2),y:a},columnPicker:e.columnPicker,onMoveBegin:e.onMoveBegin,onMoveEnter:e.onMoveEnter,onMoveCancel:e.onMoveCancel,onMove:e.onMove,closeColumnPicker:o,qvaOutsideIgnoreFor:e.columnPicker.qvaOutsideIgnoreFor,sortableItemLists:e.sortableItemLists,hc:e.layout.qHyperCube,options:e.options});$a["a"].on("start.".concat(e.$id),c)}else o()}Fa()(i[0]).tap({options:{preventDefault:false},end:function t(i,n){u(n);e.$digest()}}).swipe({options:{preventDefault:false},start:function t(){o();e.$digest()}});e.sortableItemLists=Ba["a"].create({options:{direction:"vertical",itemKey:"col",itemSelector:".qv-st-cp-sortable",itemDragSelector:".qv-st-cp-handle"},addPlaceholder:function t(e,i){var n=this._super.apply(this,arguments);n.style.height=i.height;n.id=-1},onMove:function t(i){var n=this._super.apply(this,arguments);if(n){s();var a=!Array.isArray(e.layout.qHyperCube.qColumnOrder);var r=e.layout.qHyperCube.qColumnOrder;var o=e.columnPicker.columns.get((function(t){return t.id>=0})).map((function(t){return t.id}));var l=Ga.applyPartialReorder(r,o,i.id);e.applyColumnOrderSoftPatch(a,l)}return n}});e.columnPicker={showPopover:false,columns:e.sortableItemLists.createList(),qvaOutsideIgnoreFor:"qv-st-column-picker-".concat(e.$id),cancel:function t(){}};a.watchPaint(l)}}}]);var Ka=i("Y1Qi");function Za(t,e,i,n,a,r,o){try{var s=t[r](o);var l=s.value}catch(t){i(t);return}s.done?e(l):Promise.resolve(l).then(n,a)}function Qa(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function o(t){Za(r,n,a,o,s,"next",t)}function s(t){Za(r,n,a,o,s,"throw",t)}o(void 0)}))}}function Xa(t){Xa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Xa(t)}function tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function er(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function ir(t,e,i){e&&er(t.prototype,e);i&&er(t,i);return t}function nr(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&ar(t,e)}function ar(t,e){ar=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return ar(t,e)}function rr(t){var e=lr();return function i(){var n=cr(t),a;if(e){var r=cr(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return or(this,a)}}function or(t,e){if(e&&("object"===Xa(e)||"function"===typeof e))return e;return sr(t)}function sr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lr(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function cr(t){cr=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return cr(t)}var ur=new tn["a"];function dr(){var t=[];Object.keys(On).forEach((function(e){Object(F["b"])(e)&&t.push(On[e])}));return t}function pr(t){var e=t.tableStyles.content["font-size"];if(e){var i={paddingTop:Pn,paddingBottom:Pn,lineHeight:An};return Object($n["a"])(e,i,"table")}return{outer:Tn,inner:En}}function fr(t,e){var i=t.find(".qv-st-header").first();var n;n=0===i.length?pr(e).outer:i[0].clientHeight;e.scrollApi.setHeaderHeight(n);return n}function hr(t,e,i){t.tableStyles={header:{"font-size":e.getStyle("header","fontSize",true,i),color:e.getStyle("header","color",true,i)},content:{"font-size":e.getStyle("content","fontSize",true,i),color:e.getStyle("content","color",true,i),hover:{"background-color":e.getStyle("content.hover","backgroundColor",true,i),color:e.getStyle("content.hover","color",true,i)}}};var n=pr(t);t.innerCellHeight=n.inner;if(t.scrollApi){t.scrollApi.settings.minRowHeight=n.outer;t.scrollApi.settings.maxRowHeight=3*n.outer;if(Object(F["b"])("TABLE_SCROLLBAR_SIZE")&&t.scrollApi.virtualScrollApi){var a=e.getStyle("scrollbar","size",true,i);t.scrollApi.virtualScrollApi.setScrollbarSize(a)}}}function vr(t,e,i){if(t&&t.length){var n=t.filter((function(t){return"theme"===t.key}))[0];if(n){var a={};var r=n.content||{};var o=n.header||{};var s=n.scrollbar||{};r.fontSize&&(a["content.fontSize"]="".concat(r.fontSize,"px"));r.fontColor&&"none"!==m["a"].resolveColor(r.fontColor)&&(a["content.color"]=m["a"].resolveColor(r.fontColor));r.hoverEffect&&"none"!==m["a"].resolveColor(r.hoverColor)&&(a["content.hover.backgroundColor"]=m["a"].resolveColor(r.hoverColor));r.hoverEffect&&"none"!==m["a"].resolveColor(r.hoverFontColor)?a["content.hover.color"]=m["a"].resolveColor(r.hoverFontColor):r.hoverEffect&&"none"!==m["a"].resolveColor(r.hoverColor)&&zn["a"].isDark(m["a"].resolveColor(r.hoverColor))?a["content.hover.color"]=m["a"].resolveColor("#ffffff"):r.hoverEffect&&"none"===m["a"].resolveColor(r.hoverColor)&&"none"===m["a"].resolveColor(r.hoverFontColor)&&"inherit"===i.getStyle("content.hover","color",true)&&"inherit"===i.getStyle("content.hover","backgroundColor",true)&&(a["content.hover.backgroundColor"]=m["a"].resolveColor("#f4f4f4"));o.fontSize&&(a["header.fontSize"]="".concat(o.fontSize,"px"));o.fontColor&&"none"!==m["a"].resolveColor(o.fontColor)&&(a["header.color"]=m["a"].resolveColor(o.fontColor));s.size&&(a["scrollbar.size"]=m["a"].resolveColor(s.size));m["a"].setOverrides(e,a)}else m["a"].setOverrides(e,null)}}function gr(t,e,i){return t<e.length?e[t]:i[t-e.length]}var mr=function t(e,i){return(null===e||void 0===e?void 0:e.qTop)===(null===i||void 0===i?void 0:i.qTop)&&(null===e||void 0===e?void 0:e.qWidth)===(null===i||void 0===i?void 0:i.qWidth)&&(null===e||void 0===e?void 0:e.qLeft)===(null===i||void 0===i?void 0:i.qLeft)&&(null===e||void 0===e?void 0:e.qHeight)===(null===i||void 0===i?void 0:i.qHeight)};var br=function t(e,i){var n,a;var r=null!==(n=null===e||void 0===e?void 0:e.rects)&&void 0!==n?n:[];var o=null!==(a=null===i||void 0===i?void 0:i.rects)&&void 0!==a?a:[];return r.every((function(t,e){return mr(t,o[e])}))};var yr=function(t){nr(i,t);var e=rr(i);function i(t){var n;tr(this,i);n=e.call(this);n.visualizationCtrl=t;return n}ir(i,[{key:"getRows",value:function t(){return this.visualizationCtrl.getRows()}},{key:"getRowCount",value:function t(){return this.visualizationCtrl.getRowCount()}},{key:"getFirstElementIndex",value:function t(){return this.visualizationCtrl.getFirstElementIndex()}},{key:"getLastElementIndex",value:function t(){return this.visualizationCtrl.getLastElementIndex()}},{key:"onVirtualScroll",value:function t(e,i,n,a,r,o){return this.visualizationCtrl.onVirtualScroll(e,i,n,a,r,o)}},{key:"onInitialNativeScroll",value:function t(e,i){return this.visualizationCtrl.onInitialNativeScroll(e,i)}},{key:"onGotoNextBlock",value:function t(e,i){return this.visualizationCtrl.onGotoNextBlock(e,i)}},{key:"onGotoPreviousBlock",value:function t(e,i){return this.visualizationCtrl.onGotoPreviousBlock(e,i)}}]);return i}($e["a"]);function xr(t,e,i,n){var a=t.getCellsInColumn(e,"data",i);a.forEach((function(t){t.hidden=n}))}var _r=dt["a"].extend({init:function t(e,i,n){this.appliedSoftPatch=false;this._paintWatches=[];this._resizeWatches=[];this.$element=i;this.dataService=mi["a"];this.$timeout=n;this.metaHeaders=[];this.allMetaHeaders=[];this._super.apply(this,arguments);this._pendingUpdate=null;this._updateColumnAdjusterTimeout=null;this._prevDataInfo=null;this.updateGetDataId=0;this.updateRenderDataId=0;e.backendApi.setCacheOptions({width:1});e.options.navigation=false!==e.options.navigation;e.interactive=false;e.linksInteractive=false;e.isLoadPrevVisible=false;e.direction=e.options.direction;e.rtl="rtl"===e.options.direction;e.watchResize=this.watchResize.bind(this);this.styleService=m["a"].initializeService("object.straightTable");var a=this;hr(this.$scope,this.styleService);e.themeChangedCallback=function(){e.layout&&vr(e.layout.components,e.layout.qInfo.qId,this.styleService);hr(a.$scope,a.styleService)};m["a"].ThemeChanged.bind(e.themeChangedCallback);var r=e.layout.qHyperCube;pi["a"].updatePropertiesOnRefresh(e.backendApi,r);this.attachColumnResizeEvents(e);this.attachColumnReorderEvents(e)},attachColumnResizeEvents:function t(e){var i=this;var n=null;e.$on("onExplicitColumnChanged",(function(){n=null;i.metaHeaders.filter((function(t){return!t.isSearchIcon&&!t.isFillColumn})).forEach((function(t,i){e.explicitColumnWidths[t.dataColIx]=e.visibleExplicitColumnWidths[i]}));e.applyColumnWidthSoftPatch(false,e.explicitColumnWidths)}));e.$on("onExplicitColumnChanging",(function(){n||(n={initialTableWidth:i.$scope.appliedTableWidth});i.metaHeaders.filter((function(t){return!t.isSearchIcon&&!t.isFillColumn})).forEach((function(t,i){e.explicitColumnWidths[t.dataColIx]=e.visibleExplicitColumnWidths[i]}));i.metaHeaders=i.dataService.getStraightMetaHeaders(e.layout,e.explicitColumnWidths,e.scrollApi.settings,e.$id,i.metaHeaders,i.$scope.options.customHeader);i.$scope.scrollApi.updateMetaHeaders(i.metaHeaders,{lockScrollPosition:true});i.$scope.scrollApi.updateVirtualViewport();i.metaHeaders.filter((function(t){return t.isFillColumn})).forEach((function(t){t.style.width="auto"}));i.updateColumnInfo(i.metaHeaders);i.applyTableWidth(Math.max(n.initialTableWidth+10,i.getTableWidth()))}))},attachColumnReorderEvents:function t(e){var i=this;var n=null;var a=null;e.$on("onStopReorderingColumns",(function(){n=null;a=null;e.reorderingColumn=void 0;e.$digest();e.backendApi.model.getEffectiveProperties().then((function(t){var i=h["a"].extend(true,{},t);var n=Xi["a"].storeColumnWidths(t.qHyperCubeDef);Xi["a"].fixTableHypercubeOrders(t.qHyperCubeDef);Xi["a"].updateColumnInfoOrders(t.qHyperCubeDef,n);ur.setModel(e.backendApi.model);ur.saveSoftProperties(i,t)}))}));e.$on("onStartReorderingColumns",(function(t,r){n=i.$scope.layout.qHyperCube.qColumnOrder;a=i.metaHeaders.reduce((function(t,e){e.isFillColumn||(e.isSearchIcon?t.length>0&&(t[t.length-1].width+=e.calculatedWidth):t.push({dataColIx:e.dataColIx,width:e.calculatedWidth}));return t}),[]);e.reorderingColumn=a.filter((function(t){return t.dataColIx===r.dataColIx}))[0];e.$digest()}));e.$on("onReorderingColumns",(function(t,i){if(!n||!e.reorderingColumn)return;var r=e.reorderingColumn;var o=0;var s=0;var l=r.width/2;var c=i.offset+l;var u;var d;var p;for(u=0;u<a.length;++u){if(a[u].dataColIx===r.dataColIx)continue;d=s+l;p=s+a[u].width+l;if(Math.abs(d-c)<Math.abs(p-c))break;o+=1;s+=a[u].width}var f=a.indexOf(r);var h;var v;var g;if(f!==o){h=a.map((function(t){return n.indexOf(t.dataColIx)}));v=h.slice();v.splice(o,0,v.splice(f,1)[0]);a.splice(o,0,a.splice(f,1)[0]);g=n.slice();v.forEach((function(t,e){g[h[e]]=n[t]}));n=g;e.applyColumnOrderSoftPatch("replace",n)}}))},setDirection:function t(e){this._super(e);this.$scope.direction=this.$scope.options.direction;this.$scope.rtl="rtl"===this.$scope.options.direction;this.$scope.scrollApi.setDirection(this.$scope.direction);this.processResize()},watchPaint:function t(e){var i=this;i._paintWatches.push(e);return function(){var t=i._paintWatches.indexOf(e);i._paintWatches.splice(t,1)}},watchResize:function t(e){var i=this;i._resizeWatches.push(e);return function(){var t=i._resizeWatches.indexOf(e);i._resizeWatches.splice(t,1)}},suppressOnPaint:function t(e){if(this.$scope.object._forcePaint){this.$scope.object._forcePaint=false;return false}return Ue["a"].isInSelection(e)},_restrictColumnsToSnapshotData:function t(e){if(e.snapshotData){var i=e.snapshotData.object.origDataPages||e.qHyperCube.qDataPages;var n=this.dataService.columnOrder.getVisible(e.qHyperCube);var a=i.filter((function(t){return t&&t.qArea}));var r=a.map((function(t){return n[t.qArea.qLeft]}));this.metaHeaders=this.metaHeaders.filter((function(t){return t.isFillColumn||r.indexOf(t.dataColIx)>-1}))}},_updateMetaHeaders:function t(e){var i=this.$scope.layout.qHyperCube.columnWidths.map((function(t){return"number"===typeof t?t:-1}));this.$scope.explicitColumnWidths=i;this.allMetaHeaders=this.dataService.getStraightMetaHeaders(this.$scope.layout,this.$scope.explicitColumnWidths,this.$scope.scrollApi.settings,this.$scope.$id,this.metaHeaders,this.$scope.options.customHeader);this.metaHeaders=this.allMetaHeaders.concat();this._restrictColumnsToSnapshotData(this.$scope.layout);this.$scope.scrollApi.updateMetaHeaders(this.metaHeaders,{},e);this.$scope.visibleExplicitColumnWidths=this.metaHeaders.filter((function(t){return!t.isSearchIcon&&!t.isFillColumn})).map((function(t){return i[t.dataColIx]}))},update:function t(e,i,n,a,r,o){var s=this;var l;var u=this;if(this.$scope.options.viewState){i=this.$scope.options.viewState.qTop;l=this.$scope.options.viewState.qLeft;this.$scope.scrollApi.settings.horizontalScroll.useVirtualScroll=true}o||this._updateMetaHeaders(l);var d=this.getDataInfo(i,n,this.metaHeaders,this.$scope.layout);if(e===Nn&&br(d,this._prevDataInfo))return c["a"].resolve();this._prevDataInfo=d;this.updateGetDataId++;var p=this.updateGetDataId;this._pendingUpdate=this.$scope.backendApi.getData(d.rects).then((function(t){if(p<=s.updateRenderDataId)return c["a"].reject();var e={dataPages:t,dataInfo:d};var i=u.$scope.hasFocus();return u.onUpdateData(e,a,r,o).then((function(){u.updateRenderDataId=p;var e;var n=u.$scope.scrollApi.isHorizontalNativeScroll();if(!n&&i){e=u.$scope.focus;u.$scope.focus=u.$scope.navService.realignFocus(u.$scope.grid,u.$scope.focus,u.$scope.scrollApi);e&&e.cell&&"function"===typeof e.cell.blur&&e.cell.blur();u.$scope&&u.$scope.focus&&u.$scope.focus.cell&&u.$scope.focus.cell.focus()}return t})).finally((function(){u._pendingUpdate=null}))}));return this._pendingUpdate},whenUpdated:function t(){if(this._pendingUpdate)return this._pendingUpdate;return c["a"].resolve()},updateLocked:function t(e){var i=this.dataService;var n=this.$scope.selections;var a=n.activationCell;var r;var o=[];var s;if(!a)return;var l=e.getRowsByCellType(e.CELL_TYPE_DATA);var c=i.getSiblingCells(e,a);for(var u=0;u<l.length;++u)o=o.concat(l[u].cells);for(var d=0;d<o.length;++d){r=o[d];s=-1!==c.indexOf(r);s&&!r.isDimensionValue||!s&&!r.isMeta?an["a"][a&&n.active?"lockCell":"unlockCell"](e,r):an["a"][a&&n.active?"removeCellStyle":"restoreCellStyle"](r)}},getDataInfo:function t(e,i,n,a){var r=this.dataService.columnOrder.getVisible(a.qHyperCube);var o;var s;var l=n.length;var c=[];for(o=0;o<l;++o){s=n[o];if(s.isSearchIcon||s.isFillColumn)continue;c.push({qLeft:pi["a"].getLeftOfDataArea(s,r.indexOf(s.dataColIx),a),qTop:e||0,qWidth:1,qHeight:i})}c.length||c.push({qTop:0,qLeft:0,qWidth:0,qHeight:0});return{rects:c,metaHeaders:n}},updateColumnInfo:function t(e){var i=this.$scope;var n=this.$element;i.columns||(i.columns=[]);var a;var r=0;var o;var s;var l=0;var c=fr(n,i);for(s=0,o=e.length;s<o;s++){a=e[s];xr(this.dataService,i.grid,a.dataColIx,a.shouldBeRemoved);if(a.isFillColumn)continue;if(a.isDimension){this.$scope.options.customHeader?r+=s>0?a.calculatedWidth+1:a.calculatedWidth:r+=a.calculatedWidth+e[s+1].calculatedWidth;s++}else r+=a.calculatedWidth;i.columns[l]||(i.columns[l]={});i.columns[l].width=a.calculatedWidth;i.columns[l].height=c;i.columns[l].left=i.rtl?-r:r;i.columns[l].hidden=a.shouldBeRemoved;l++}},getTableWidth:function t(){var e=this.$scope.scrollApi.settings;var i=e.horizontalScroll.enabled?e.width:e.width-e.columnPicker.width;return Math.max(i,this.$scope.columns.map((function(t){return t.width})).reduce((function(t,e){return t+e}),0))},applyTableWidth:function t(e){this.$scope.tableStyles=this.$scope.tableStyles||{header:{},content:{}};this.$scope.tableStyles.header.width="".concat(e,"px");this.$scope.tableStyles.content.width="".concat(e,"px");this.$scope.appliedTableWidth=e},onUpdateData:function t(e,i,n,a){var r=this;n&&e.dataPages.forEach((function(t){t.qMatrix.reverse()}));this.dataService.updateStraightItems(this.$scope,e.dataPages,e.dataInfo.metaHeaders,i,n,a);this.$scope.columns=[];this.$timeout.cancel(this._updateColumnAdjusterTimeout);this._updateColumnAdjusterTimeout=this.$timeout((function(){r.updateColumnInfo(r.metaHeaders)}),100);this.applyTableWidth(this.getTableWidth());this.$scope.scrollApi.updateHorizontalScroll();n&&this.$scope.grid.rows.reverse();if(this.$scope.selections.active){an["a"].updateStraight(this.$scope.grid,this.$scope.selections,this.$scope.selections.activationCell);this.updateLocked(this.$scope.grid)}return this.$timeout((function(){}),0,false)},getColumnIndexNativeScrolling:function t(e){var i=this.$scope.scrollApi.domApi.getHorizontalScroll();for(var n=0;n<e.length;n++)if(i<e[n].left)return n;return-1},getHeaderIndexNativeScrolling:function t(e){var i=0;var n=this.$scope.scrollApi.domApi.getHorizontalScroll();for(var a=0;a<e.length;a++){n-=e[a].calculatedWidth;if(!(n>0))break;i++}e[i].isSearchIcon&&i--;return i},setSnapshotData:function t(e){var i;var n=!!e.sourceObjectId;var a=this.$scope;var r=a.scrollApi.domApi;var o=r.getScrollAreaBoundingBox();var s=e.qHyperCube;n||(s.qColumnOrder=this.$scope.layout.qHyperCube.qColumnOrder);s.columnOrder=s.qColumnOrder;var l=r.$scrollArea.find(".qv-st-data-row");var c=ht.getIndexHeightAndWidth(l,s.qColumnOrder.length,o,e.totals&&e.totals.show);if(this.$scope.scrollApi.isHorizontalNativeScroll()){var u=this.metaHeaders.slice(this.getHeaderIndexNativeScrolling(this.metaHeaders));i=this.getDataInfo(c.index,c.height,u,this.$scope.layout)}else i=this.getDataInfo(c.index,c.height,this.metaHeaders,this.$scope.layout);return a.backendApi.getData(i.rects).then((function(t){e.qHyperCube.qDataPages=t;return e}))},getViewState:function t(){var e;var i;if(this.$scope.scrollApi.isHorizontalNativeScroll()){var n=this.$scope.scrollApi.domApi.getScrollAreaBoundingBox();var a=this.$scope.scrollApi.domApi.$scrollArea.find(".qv-st-data-row");var r=ht.getIndexHeightAndWidth(a,this.$scope.layout.qHyperCube.qColumnOrder.length,n,true);e=r.index;i=this.getColumnIndexNativeScrolling(this.$scope.columns)}else{var o=this.$scope.grid.rows.length;e=o?this.$scope.grid.rows[0].getIndex():0;var s=this.getDataInfo(e,o,this.metaHeaders,this.$scope.layout);i=s.rects[0].qLeft}return{qTop:e,qLeft:i}},process:function(t){function e(e,i,n,a){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}((function(t,e,i,n){var a=this;return this.update(t,e,i,false,false,false).then((function(){if(a.$scope.layout.qHyperCube){var t=a.$scope.scrollApi.settings.horizontalScroll.enabled;var e=t?a.$scope.layout.qHyperCube.qSize.qcx:a.$scope.scrollApi.getVisibleColumnCount();a.$scope.scrollApi.setTotalRows(a.$scope.layout.qHyperCube.qSize.qcy);a.$scope.scrollApi.setTotalColumns(e);return a.$scope.scrollApi.setVirtualSize(n)}return})).catch((function(t){false}))})),processPaint:function t(){this.$scope.scrollApi.updateViewport();var e=0;var i=this.$scope.scrollApi.settings.viewportRowCount;var n=this.$scope.scrollApi.resetNativeScroll();return this.process(Rn,e,i,false).then((function(){n()})).catch((function(t){false}))},processResize:function t(){var e=this.$scope.grid.rows.length;var i=e?this.$scope.grid.rows[0].getIndex():0;var n=this.$scope.scrollApi.settings.viewportRowCount;var a;if(this.$scope.scrollApi.totalRows&&i+n>this.$scope.scrollApi.totalRows){a=Math.min(i,i+n-this.$scope.scrollApi.totalRows);i-=a}n<e&&(n=e);return this.process(Vn,i,n,true)},onVirtualScroll:function t(e,i,n,a,r){this.$scope.options.externalInterface&&this.$scope.options.externalInterface.straightTableId&&this.$scope.$broadcast("straight-table-virtual-scroll",{id:this.$scope.options.externalInterface.straightTableId,grid:this.$scope.grid,headers:this.metaHeaders,scrollApi:this.$scope.scrollApi});return this.update(Nn,e,i,false,false,0===r)},gotoBlock:function t(e,i,n){var a=this.$scope.scrollApi.getSpliceArgs();var r=this.$scope.grid.rows;var o=this.$scope.grid.getNextRowIx();n&&r.reverse();r.splice.apply(r,a);o-=a[1];this.$scope.grid.setNextRowIx(o);return this.update(Nn,e,i,true,n,true)},onGotoNextBlock:function t(e,i){return this.gotoBlock(e,i,false)},onGotoPreviousBlock:function t(e,i){return this.gotoBlock(e,i,true)},getRows:function t(){return this.$scope.grid.rows},getRowCount:function t(){return this.$scope.grid.rows.length},getFirstElementIndex:function t(){return this.$scope.grid.rows[0].getIndex()},getLastElementIndex:function t(){return this.$scope.grid.rows[this.$scope.grid.rows.length-1].getIndex()},getPreferredSize:function t(){var e=this;var i=Object(c["a"])();var n=function(){return this.$element.find(".qv-st-data")[0].offsetHeight}.bind(this);var a=this.$scope.$watch(n,(function(t){if(t&&t>0){var n=e.$element.find(".qv-st-header")[0];var r=e.$element.find(".qv-st-bottom-header")[0];var o=n?n.offsetHeight:0;var s=r?r.offsetHeight:0;i.resolve({w:e.$element.width(),h:t+o+s});a()}}));return i.promise}});_r.$inject=["$scope","$element","$timeout"];s["default"].directive("qvStraightTable",["$timeout","$window",function(t,e){return{restrict:"E",replace:true,template:ut,require:"qvObjectContent",link:function i(n,r,s,u){var d=r.find(".qv-grid-object-scroll-area");var p=d.controller("qvScrollArea");var f=r.find(".qv-scroll-loader:not(.qv-scroll-row-loader)").controller("qvScrollLoader");var v=d.find(".qv-scroll-row-loader").controller("qvScrollLoader");var g=".".concat(n.id,"-straight-table");var y=pr(n);var x;var _;var C;var w={alignToBottom:"reduce",minRowHeight:y.outer,maxRowHeight:3*y.outer,columnCount:0,horizontalScroll:sn.getHorizontalScrollSettings(n),useAllSpace:n.options.useAllSpace,column:{glyphWidth:8,paddingWidth:14,minSearchWidth:n.options.customHeader?1:35,minColWidth:n.options.minColumnWidth||34,maxColWidth:384},columnPicker:{show:false,width:21},blockSize:50};n.nonMouseViewportScrolling={scrollbarSize:36,className:"show-non-mouse-scrollbars"};var q=new di(t,w);var M=new yr(u);n.scrollApi=q;var S=He.create(n,r,d,q.settings);n.grid=new We["a"]("straight");n.selections=an["a"].$new();n.innerCellHeight=y.inner;n.objectId=n.layout.qInfo.qId;n.getSRLabelForTotals=function(t){var e=h["a"].getValue(n,"layout.totals.label")||l["default"].get("Object.Table.Totals");if(!t.isNumeric&&" "!==t.text)return t.text;if(t.isNumeric)return"".concat(e," ").concat(t.text);return l["default"].get("Object.Table.Totals.NotApplicable")};n.TABLE_AREA=Qi.TABLE_AREA;n.navService=Qi;function D(){n.focus?n.focus=Qi.realignFocus(n.grid,n.focus,n.scrollApi):n.focus=Qi.init(n.grid);n.focus.cell.focus()}n.setFocus=D;n.object.setOnFocusHandler(D);var I;function k(e,i){_.text("");t.cancel(I);I=t((function(){_.text(l["default"].get(e,i))}),100)}n.onClick=function(t){var e=o.a.element(t.target).scope();var i=e.cell||e.header;var a=e.area;i&&n.selections.active&&i.dataColIx!==n.selections.currentDataColIx&&n.selectionsApi.confirm();if(i&&a){n.focus={area:a,cell:i};i.focus()}};n.handleKeyUp=function(t){if(t.which===vi["a"].ENTER&&n.preventEnterKeyUpBubbling){t.originalEvent.stopPropagation();t.preventDefault()}if(t.which===vi["a"].SHIFT&&n.selections.active){C=void 0;n.multiselect()}n.preventEnterKeyUpBubbling=false};n.hasFocus=function(){return r[0].contains(document.activeElement)};n.handleKeyDown=function(t){_=_||r.find("#st-cell-selection-status-label-".concat(n.objectId));var e=o.a.element(t.target).scope();var i=e.cell||e.header;if(t.which===vi["a"].ESCAPE){if(!n.selections.active&&"function"===typeof n.object.blur){n.object.blur();t.preventDefault();t.stopPropagation();return}k("Accessibility.Table.SelectionsCanceled")}var s=function(){var e=Qa(regeneratorRuntime.mark((function e(i,a){var r,o,s,l;return regeneratorRuntime.wrap((function e(c){while(1)switch(c.prev=c.next){case 0:r=n.selections;o=t.which===vi["a"].ENTER;o&&!r.active&&(n.preventEnterKeyUpBubbling=true);if(!(!i.isNullValue&&i.isDimensionValue&&(!o||!r.active))){c.next=18;break}s=!an["a"].isSelected(n.selections,i)||a;if(!a){c.next=11;break}r.active||n.activateSelections(C);c.next=9;return n.multiselectDimensionValues(C,i,i.dataColIx);case 9:c.next=13;break;case 11:c.next=13;return n.selectDimensionValue(i,t);case 13:l=n.selections.selectedIndices.length;Qi.setSelectDeselectSrMessage(s,l,k);r.active||(Object(F["b"])("ACC_SEL_MENU")?k("Accessibility.Table.SelectionMode.WithAccSelMenu"):k("Accessibility.Table.SelectionMode"));c.next=19;break;case 18:o&&r.active&&k("Accessibility.Table.SelectionsConfirmed");case 19:case"end":return c.stop()}}),e)})));return function t(i,n){return e.apply(this,arguments)}}();var c=function a(){var r={cell:i,area:e.area};try{var o;var c=n.interactive&&t.shiftKey&&(t.which===vi["a"].ARROW_UP||t.which===vi["a"].ARROW_DOWN);if(n.selections.active){o=Qi.moveFocusWhileSelecting(n.grid,t.which,r,q);if(!c){var d=an["a"].isSelected(n.selections,o.cell)?l["default"].get("Accessibility.Table.SelectedStatusTrue"):l["default"].get("Accessibility.Table.SelectedStatusFalse");k(d)}}else o=Qi.moveFocus(n.grid,t.which,r,n.rtl,q);if(!o.deferFocus){if(c){C||(C=h["a"].extend({},i));u.whenUpdated().then((function(){s(o.cell,true)}))}o.cell.focus()}n.focus=o;t.stopPropagation();t.preventDefault()}catch(t){}};switch(t.which){case vi["a"].TAB:if(n.selections.active)if(Object(F["b"])("ACC_SEL_MENU")){t.preventDefault();n.selectionsApi.focusMenu()}else n.selectionsApi.confirm();break;case vi["a"].ENTER:case vi["a"].SPACE:t.stopImmediatePropagation();t.preventDefault();if(!t.originalEvent.repeat)if(n.interactive&&e.cell)s(i,false);else if(n.navigatable&&e.header&&!i.isSearchIcon&&!i.isTotal)n.sort(i);else if(i.isSearchIcon){var d=a()(t.target).closest(".qv-st-header-cell");n.search(d,i)}break;case vi["a"].ARROW_LEFT:case vi["a"].ARROW_RIGHT:case vi["a"].ARROW_UP:case vi["a"].ARROW_DOWN:case vi["a"].PAGE_UP:case vi["a"].PAGE_DOWN:case vi["a"].HOME:case vi["a"].END:c();break;default:break}};n.multiline={wrapTextInHeaders:h["a"].getValue(n,"layout.multiline.wrapTextInHeaders",true),wrapTextInCells:h["a"].getValue(n,"layout.multiline.wrapTextInCells",true)};n.$on("$destroy",(function(){q.destroy();r.off(g);t.cancel(u._updateColumnAdjusterTimeout);n.themeChangedCallback&&m["a"].ThemeChanged.unbind(n.themeChangedCallback)}));r.on("contextmenu".concat(g),(function(t){n.selections.active&&t.preventDefault()}));r.on("focusout".concat(g),(function(t){if(null===t.target.getAttribute("tabIndex"))return;var e=o.a.element(t.target).scope();var i=e.cell||e.header;i&&i.blur()}));function L(t){q.lockHorizontalScrollPosition(t)}function T(t,e){hi["a"].begin();return u[t]().then((function(){e.forEach((function(t){t()}))})).catch((function(){})).finally(hi["a"].end)}function E(t,e){var i=r.find(t);var n;var a;var o;if(i.length){n=i[0].getBoundingClientRect();a=new Ge["a"](e.left,e.top,e.width,e.height);o=new Ge["a"](n.left,n.top,n.width,n.height);return o.intersectsWith(a)}return false}var A=q.initialize(S,M,p,f,u).then((function(){q.setDirection(n.direction);u.setInteractionState=function(){var t=n.object.inAnalysisState();var e=t&&false!==n.options.navigation;var i=t&&false!==n.options.selections;n.interactive=i;n.linksInteractive=t&&(n.options.navigation||n.options.limitedInteraction);if(e&&!n.navigatable){n.navigatable=true;n.scrollApi.activate()}else if(!e&&n.navigatable){n.navigatable=false;n.scrollApi.deactivate()}t||(n.isLoadPrevVisible=E(".qv-st-load-prev",q.domApi.getScrollAreaBoundingBox()))};u.getContextMenu=function(t,e,i){if(i.target){var n=a()(i.target).closest(".qv-st");if(n){var r=a()(i.target).closest("td, th");var o=r.length?r.scope():{};var s=o.cell||o.header;if(s&&!!s.text){var l=s.text;e.addItem({icon:"lui-icon lui-icon--copy",translation:"contextMenu.copyCellValue",tid:"copy-cell-context-item",select:function t(){gi["a"].copyToClipboard(l)}})}}}};u.onPaint=function(){var t,e,i;if(this.suppressOnPaint(n.layout))return c["a"].resolve();if(n.layout.qInfo&&n.layout.qInfo.qId){vr(n.layout.components,n.layout.qInfo.qId,this.styleService);hr(this.$scope,this.styleService,n.layout.qInfo.qId)}Ue["a"].isModalSelectionModel(n.object.model)&&n.selectionsApi.confirm();var a=null===(t=null===(e=n.layout)||void 0===e||null===(i=e.scrolling)||void 0===i?void 0:i.horizontal)||void 0===t||t;var o=sn.getHorizontalScrollSettings(n);if(a!==q.settings.horizontalScroll.enabled||o.useNativeScroll!==q.settings.horizontalScroll.useNativeScroll){q.settings.horizontalScroll=o;q.domApi.destroy();S=He.create(n,r,d,q.settings);q.initialize(S,M,p,f,u)}if(n.layout.scrolling&&n.layout.scrolling.keepFirstColumnInView!==q.settings.horizontalScroll.keepFirstColumnInView){q.settings.horizontalScroll.keepFirstColumnInView=n.layout.scrolling.keepFirstColumnInView;n.scrollApi.updateViewport()}if(n.layout.multiline&&(n.layout.multiline.wrapTextInHeaders!==n.multiline.wrapTextInHeaders||n.layout.multiline.wrapTextInCells!==n.multiline.wrapTextInCells)){var s=n.layout.multiline.wrapTextInHeaders;var l=n.layout.multiline.wrapTextInCells;n.multiline.wrapTextInHeaders=void 0===s||s;n.multiline.wrapTextInCells=void 0===l||l;n.scrollApi.updateViewport()}return T("processPaint",u._paintWatches)};u.onResize=function(){n.scrollApi.updateViewport();return T("processResize",u._resizeWatches)};u.onInitialNativeScroll=function(t,e){return v.fadeIn(0,0,{width:"100%",height:"30px"}).then((function(){return u.update(Nn,t,e,true,false,true).then((function(){return v.fadeOut()}))}))};u.setInteractionState(n.options.interactionState)}));u.onInit=function(){return A};n.applyColumnOrderSoftPatch=function(t,e){var i=t?"add":"replace";var a=[{qPath:"/qHyperCubeDef/qColumnOrder",qOp:i.toString(),qValue:JSON.stringify(e)}];n.backendApi.applyPatches(a,true)};n.options.externalInterface&&(n.options.externalInterface.forceRedraw=function(){u.onPaint()});function P(){mi["a"].getSiblingCells(n.grid,n.selections.activationCell).forEach((function(t){an["a"].deselectCell(n.grid,t)}))}function O(){u.updateLocked(n.grid);x&&x();L(false)}n.applyColumnWidthSoftPatch=function(t,e){var i=t?"add":"replace";var a=e.map((function(t){return void 0===t||null===t?-1:t}));var r=[{qPath:"/qHyperCubeDef/columnWidths",qOp:i.toString(),qValue:JSON.stringify(a)}];n.backendApi.applyPatches(r,true);n._columnWidthsExistsInLayout=true};function R(){P();u.updateLocked(n.grid);x&&x();L(false)}function V(){if(!n.selections.active||!n.selections.activationCell)return;P();u.updateLocked(n.grid)}function N(){n.object.selectionsClass="";u.updateLocked(n.grid);L(true)}function z(t,e){return h["a"].getValue(t,"layout.qHyperCube.qDimensionInfo.".concat(e,".qIsOneAndOnlyOne"),false)}an["a"].init(n.selectionsApi,n.backendApi,n.selections,O,R,V);var j=n.selectionsApi.ignoreOnOutside;n.selectionsApi.ignoreOnOutside=function(t){if(t.closest(".qv-st-dim-columns").length)return true;if(j(t)||t.closest(".qv-st-selections-active").length)return true;return false};n.selectionsApi.getMenuMaxHeight=function(){return r.outerHeight()};n.selectWhileLocked=function(){Be["a"].showLockedFeedback(n.layout.qHyperCube.qDimensionInfo)};n.selectDimensionValue=function(t,e){n.scrollApi.updateViewport();n.scrollApi.scrollColumnInView(t.dataColIx,u.metaHeaders);if(t.representation===b["e"]&&a()(e.target).is("a"))return c["a"].resolve();var i=t.type;var r=t.dataRowIx;var o=t.dataColIx;if(z(n,o)||!n.selectionsApi.getKeyAsToggleSelected(e)){V();an["a"].reset(n.selections)}function s(){var t=mi["a"].getCellsInRow(n.grid,i,r).filter((function(t){return t.dataColIx===o}))[0];if(!t)return;x=an["a"].selectDimensionValue(n.$id,n.backendApi,n.selectionsApi,n.selections,t,n.grid,true);var e=n.selectionsApi.watchActivated((function(){N();e()}))}return u.whenUpdated().then(s)};n.activateSelections=function(t){n.scrollApi.updateViewport();x=an["a"].activateSelections(n.$id,n.backendApi,n.selectionsApi,n.selections,t);var e=n.selectionsApi.watchActivated((function(){N();e()}))};n.multiselectDimensionValues=function(t,e){var i;var a=mi["a"].getSiblingCells(n.grid,t);var r=t.dataRowIx-t.rowIx;var o=e.dataRowIx-e.rowIx;var s=t.rowIx;var l=e.rowIx;s+=r-o;s=Math.max(s,0);s=Math.min(s,a.length-1);function u(t){var e=a[t];e&&e.isDimensionValue&&an["a"].selectDimensionCells(n.backendApi,n.selectionsApi,n.selections,n.grid,e,false)}if(s<=l)for(i=s;i<=l;++i)u(i);else if(s>l)for(i=s;i>=l;--i)u(i);return c["a"].resolve()};n.multiselect=function(){n.selections.active&&an["a"].sendSelection(n.backendApi,n.selectionsApi,n.selections,n.grid,n.selections.currentCell)};n.sort=function(t){if(!t)return;n.scrollApi.updateViewport();var e=t.dataColIx;var i=[].concat(n.layout.qHyperCube.qEffectiveInterColumnSortOrder);var a=i[0];var r="";var o;var s;var l;var c=n.layout.qHyperCube;if(e!==a){l=i.indexOf(e);pt["a"].move(i,l,0)}var u=[{qPath:"/qHyperCubeDef/qInterColumnSortOrder",qOp:"replace",qValue:"[".concat(i.join(","),"]")}];if(e===a){r=t.isDimension?"/qHyperCubeDef/qDimensions/":"/qHyperCubeDef/qMeasures/";o=gr(e,c.qDimensionInfo,c.qMeasureInfo);t.reversed=!o.qReverseSort;s=t.isDimension?e:e-n.layout.qHyperCube.qDimensionInfo.length;r+="".concat(s,"/qDef/qReverseSort");u.push({qPath:r,qOp:"replace",qValue:t.reversed.toString()})}n.backendApi.applyPatches(u,true)};n.currentHeaderSearch=null;n.search=function(t,e){if(n.currentHeaderSearch===e){e.open=false;n.currentHeaderSearch=null;Ye["default"].isSmallDevice?nn["a"].close():en["a"].close();return}if(n.currentHeaderSearch){n.currentHeaderSearch.open=false;n.currentHeaderSearch=null}var i=n.hasFocus();var r={cId:e.info.cId,fieldName:e.fieldName,alignToElement:t,outsideIgnoreNamespace:"qv-st-header-cell-search-".concat(n.$id),selectionsDeactivatedFn:function t(){n.currentHeaderSearch&&(n.currentHeaderSearch.open=false);n.currentHeaderSearch=null}};Ye["default"].isSmallDevice?Object(rn["a"])(nn["a"],n,r):Object(rn["a"])(en["a"],n,r).then((function(t){var r;L(true);t.closing.then((function(t){if(t&&!a()(t.target).closest(".qv-st-header-cell-search").length>0){n.currentHeaderSearch=null;e.open=false}r=t}));t.closed.then((function(){i&&n.setFocus();t=null;e.open=false;r||(n.currentHeaderSearch=null);L(false)}));n.currentHeaderSearch&&n.currentHeaderSearch===e&&(t=null)}));e.open=true;n.currentHeaderSearch=e};n.openUrl=function(t){n.linksInteractive&&e.open(t,"_blank")};n.options.externalInterface&&n.options.externalInterface.straightTableId&&n.$emit("straight-table-initialized",{id:n.options.externalInterface.straightTableId,grid:n.grid,headers:u.metaHeaders,scrollApi:n.scrollApi})}}}]);var Cr=e["default"]={initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qSuppressMissing:true,qMode:"S",columnOrder:[],columnWidths:[],qColumnOrder:[]}},data:{dimensions:{min:function t(e){return e>0?0:1},max:1e3,description:function t(){return l["default"].get("Visualizations.Descriptions.Column")},add:function t(e,i,n){var a=n.hcProperties.qColumnOrder;var r=n.hcProperties.columnOrder;var o=n.hcProperties.columnWidths;var s=n.getDimensions().length-1;pt["a"].indexAdded(a,s);pt["a"].indexAdded(r,s);o.splice(s,0,-1);return e},remove:function t(e,i,n,a){var r=n.hcProperties.qColumnOrder;var o=n.hcProperties.columnOrder;var s=n.hcProperties.columnWidths;pt["a"].indexRemoved(r,a);pt["a"].indexRemoved(o,a);s.splice(r[a],1)}},measures:{min:function t(e){return e>0?0:1},max:1e3,description:function t(){return l["default"].get("Visualizations.Descriptions.Column")},add:function t(e,i,n){var a=n.hcProperties.qColumnOrder;var r=n.hcProperties.columnOrder;var o=n.hcProperties.columnWidths;var s=n.getDimensions().length+n.getMeasures().length-1;pt["a"].indexAdded(a,s);pt["a"].indexAdded(r,s);o.splice(a[s],0,-1)},remove:function t(e,i,n,a){var r=n.hcProperties.qColumnOrder;var o=n.hcProperties.columnOrder;var s=n.hcProperties.columnWidths;var l=(n.hcProperties.qDimensions?n.hcProperties.qDimensions.length:0)+a;pt["a"].indexRemoved(r,l);pt["a"].indexRemoved(o,l);s.splice(l,1)}}},support:{cssScaling:true,snapshot:true,export:true,exportData:true,sharing:false,modifiers:dr()},type:"table",template:"<qv-straight-table></qv-straight-table>",BackendApi:u["a"],definition:ct,migrate:{properties:function t(e){return pi["a"].migrateProperties(fi["a"].migrateProperties(e))},snapshot:function t(e){return pi["a"].migrateSnapshot(e)}},importProperties:Ln.importProperties,exportProperties:Ln.exportProperties,controller:_r,extendMetrics:Hn}},"1L6A":function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("2Hli");var r=i("6uJb");var o='<div class="pp-tab-container">\n\t<div class="pp-component pp-buttongroup-parent" ng-if="buttons.length > 1">\n\t\t<div class="pp-buttongroup-title" >{{buttonGroupTitle}}</div>\n\t\t<div class="lui-buttongroup">\n\t\t\t<lui-button ng-repeat="button in buttons" ng-click="onClickButton(button)" active="button.active">{{button.label}}</lui-button>\n\t\t</div>\n\t</div>\n\t<div ng-repeat="item in items track by item.id">\n\t\t<div ng-if="item.expanded" include-pp-component x-component="listItemComponent" x-definition="listItemDefinition" x-data="item.data" x-args="args"></div>\n\t</div>\n</div>\n\n\n\n';var s={template:o,controller:["$scope",function(t){var e=t.args.cache;var i="measures_tab_";var o=[r["default"].get("properties.kpi.first"),r["default"].get("properties.kpi.second")];t.buttonGroupTitle=r["default"].get("properties.kpi.measure");t.listItemComponent=n["a"].getComponent("items");t.listItemDefinition={items:t.definition.items||{},grouped:t.definition.grouped};function s(t){return t.map((function(t){return{index:t.index,label:o[t.index],active:t.expanded}}))}function l(){var r=t.definition;var o=a["a"].getValue(t.data,t.definition.ref,[]);var l=o.map((function(t,a){var o=t.qDef.cId;return{component:n["a"].getComponent("items"),definition:r,data:t,id:o,index:a,expanded:e.get(i+a)||false}}));if(l.length){var c=l.filter((function(t){return t.expanded}));c.length||(l[0].expanded=true)}t.items=l;t.buttons=s(l)}t.$watchCollection("data.".concat(t.definition.ref),(function(){l()}));t.isInvalid=function(e){var i=t.args.handler.getMeasureLayouts()[e];return i&&!!i.qError};t.onClickButton=function(t){var n=this;n.items.forEach((function(a,r){a.expanded=r===t.index;n.buttons[r].active=a.expanded;e.put(i+r,a.expanded)}))}}]};var l=e["default"]=s},"26xU":function(t,e,i){"use strict";var n=i("2Hli");var a=i("pRem");var r=i("6uJb");var o=i("acVu");function s(t,e){var i=e.getMeasures();var a=n["a"].getValue(t,"color.mode");"byDimension"===a&&1===i.length&&"line"===n["a"].getValue(i[0].qDef,"series.type")?n["a"].setValue(t,"color.mode","primary"):"byDimension"===a&&i.length>1&&n["a"].setValue(t,"color.mode","byMultiple")}function l(t,e){var i=0===e.indexOf(t);i||(t.qDef.series={axis:1,type:"line"})}function c(t){a["a"].setCustomTooltipAttrs(t);a["a"].unquarantineCustomTooltipAttrs(t)}function u(t){if(t.qHyperCubeDef.qDimensions.length>0){a["a"].setCustomTooltipAttrs(t);a["a"].unquarantineCustomTooltipAttrs(t)}}function d(t,e){a["a"].quarantineCustomTooltipAttrs(t,e)}function p(t,e){a["a"].quarantineCustomTooltipAttrs(t,e);a["a"].setCustomTooltipAttrs(t);a["a"].unquarantineCustomTooltipAttrs(t)}e["a"]={dimensions:{min:1,max:1,description:function t(e){var i=e.qHyperCubeDef.qMeasures;var n=[0,0,0];var a;var o=["Visualizations.Descriptions.Marker","Visualizations.Descriptions.Line","Visualizations.Descriptions.ComboChart.Dimension.LineMarker","Visualizations.Descriptions.Bars","Visualizations.Descriptions.ComboChart.Dimension.BarMarker","Visualizations.Descriptions.ComboChart.Dimension.BarLine","Visualizations.Descriptions.ComboChart.Dimension.BarLineMarker"];if(!i.length)return r["default"].get("Visualizations.Descriptions.Bars");for(var s=0;s<i.length;++s){a=i[s].qDef.series.type;"bar"===a?n[0]=1:"line"===a?n[1]=1:n[2]=1}var l=o[parseInt(n.join(""),2)-1];return r["default"].get(l)},add:function t(e,i,n){s(i,n);Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&c(i)},move:function t(e,i,n){s(i,n);Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&u(i)},remove:function t(e,i){Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&d(i,e)},replace:function t(e,i,n,a){Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&p(a,i)}},measures:{min:1,max:15,description:function t(e,i){var n;var a=e.qHyperCubeDef.qMeasures[i];if(a){var o=a.qDef.series.type;n="line"===o?"Visualizations.Descriptions.HeightLine":"bar"===o?"Visualizations.Descriptions.ComboChart.Measure.HeightBar":"Visualizations.Descriptions.ComboChart.Measure.HeightMarker"}else n="Visualizations.Descriptions.HeightBars";return r["default"].get(n)},add:function t(e,i,n){s(i,n);l(e,i.qHyperCubeDef.qMeasures)},move:function t(e,i,n){s(i,n)},replace:function t(e,i){i.qDef.series&&(e.qDef.series.type=i.qDef.series.type||"bar")}}}},"2sMT":function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-items-component" ng-if="visible" tcl="items">\n\t<div ng-repeat="item in items track by item.key" tid="{{item.key}}" class="item" ng-class="{ \'grouped\': definition.grouped }">\n\t\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="data" x-args="args"></div>\n\t</div>\n</div>';var r=i("uVcZ");function o(t,e){var i=Object.keys(e).filter((function(i){var n=e[i];if("function"===typeof n.show)return n.show(t.data,t.args.handler,t.args);if("boolean"===typeof n.show)return n.show;return true})).map((function(t){var i=e[t];return{component:r["a"].findComponent(i),definition:i,key:t}})).sort((function(t,e){var i=t.definition.componentSortIndex,n=void 0===i?Infinity:i;var a=e.definition.componentSortIndex,r=void 0===a?Infinity:a;if(n>r)return 1;if(n<r)return-1;return 0}));return i}var s={template:a,controller:["$scope",function(t){var e=t.definition.items||{};t.$on("datachanged",(function(){t.items=o(t,e)}));t.$watch("data",(function(){t.items=o(t,e)}));n["a"].defineVisible(t,t.args.handler)}]};var l=e["default"]=s},"395F":function(t,e,i){"use strict";var n=i("sWge");var a=i("5ezW");var r=i("G3JA");var o=i("G1wx");var s=i("oxue");var l='<lui-popover style="min-width: 200px;width: 230px;" align-to="alignTo" position="position" collision="\'flipfit\'" on-close-view="closeAddPopover(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<object-add-typeahead>\n\t\t<lui-popover-header>\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" name="new-dimension" autocomplete="off" ng-model="search.term" tid="add-dimension-input" qva-focus="autoFocus"\n\t\t\t\t\t   object-add-typeahead-input on-escape="onEscape($event)" on-enter="onEnter($event)" maxlength="255"/>\n\t\t\t\t<button ng-if="allowExpressionEditor !== false" class="lui-button  lui-input-group__item  lui-input-group__button" qva-activate="close()"\n\t\t\t\t\t\tpp-expression-editor="search.term" pp-expression-editor-on-apply="addFieldDimension({value:value})" expression-type="dimension"\n\t\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor" tid="fx-button">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression  edit-expression"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</lui-popover-header>\n\t\t<div class="object-add-popover-content" object-add-typeahead-menu>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="dimension in activeDimensions" tid="dimension-item"\n\t\t\t\t\tobject-add-typeahead-item="dimension" on-select="addActiveDimension(dimension)">\n\t\t\t\t\t<span qve-highlight text="{{dimension.translatedTitle}}" title="{{dimension.translatedTitle}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="dimensions.length" q-translation="Common.Dimensions"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="dimension in dimensions" tid="dimension-item"\n\t\t\t\t\tobject-add-typeahead-item="dimension" on-select="addLibraryDimension(dimension)">\n\t\t\t\t\t<span ng-if="dimension.isDrillDown" class="lui-icon lui-icon--drill-down lui-list__aside" q-title-translation="Tooltip.dimensions.drilldown"></span>\n\t\t\t\t\t<span qve-highlight text="{{dimension.label}}" title="{{dimension.label}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="fields.length" q-translation="Common.Fields"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in fields" tid="field-item"\n\t\t\t\t\tobject-add-typeahead-item="field" on-select="addFieldDimension(field)"\n\t\t\t\t\tng-class="{\'derived-field\': (field.isDerived && search.term === \'\')}">\n\t\t\t\t\t<i ng-if="isDirectDiscoveryField( field )" class="lui-icon  lui-icon--direct-discovery  lui-list__aside" q-title-translation="{{ getDirectDiscoveryTypeTranslationKey( field.qTags ) }}"></i>\n\t\t\t\t\t<span ng-if="field.isDateField" class="lui-icon lui-list__aside  lui-icon--calendar"></span>\n\t\t\t\t\t<span ng-if="field.isGeoField" class="lui-icon lui-list__aside  lui-icon--map"></span>\n\t\t\t\t\t<span qve-highlight text="{{getFieldDisplayName(field)}}" title="{{field.toolTip}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-nohits" ng-if="!dimensions.length && !fields.length" q-translation="Toolbox.Search.Nohits"></div>\n\t\t</div>\n\t</object-add-typeahead>\n</lui-popover>\n';var c=i("JUQR");var u=i("knjk");var d=i("6uJb");var p=i("dtUF");var f=100;function h(t,e){if(""===e)return t;return t.filter((function(t){if("undefined"===typeof t.value)return false;return a["a"].string(t.value.toLowerCase()).indexOf(a["a"].string(e.toLowerCase()))>-1}))}var v={template:l,controller:["$scope",function(t){t.search={term:""};t.isDirectDiscoveryField=c["a"].isDirectDiscoveryField;t.getDirectDiscoveryTypeTranslationKey=c["a"].getTypeTranslationKey;t.autoFocus=o["a"].treatAsDesktop();t.position||(t.position="right");t.onEscape=function(e){if(""!==t.search.term){e.stopPropagation();t.search.term=""}else t.close()};t.onEnter=function(e){if(""!==t.search.term){e.stopPropagation();t.addFieldDimension({value:t.search.term})}else t.close()};t.getFieldDisplayName=function(e){return""===t.search.term?e.label:u["a"].trimAutoCalendarName(e.value)};var e=null;t.$watch("search.term",(function(i){function a(){var n=h(e.fields,i);var a=h(e.dimensions,i);var o=h(e.activeDimensions,i);if(a.length+o.length>f){a=r["a"].limit(a,Math.max(f-o.length,0));n=[]}else n.length+a.length+o.length>f&&(n=r["a"].limit(n,Math.max(f-a.length-o.length,0)));t.fields=n;t.dimensions=a;t.activeDimensions=o}e?a():n["a"].all({fields:s["a"].getSortedFields(t.app),dimensions:s["a"].getSortedDimensions(t.app)}).then((function(n){var r=n.fields.map((function(t){var e=t.isDerived&&""===i?t.qName.substring(t.qName.lastIndexOf(".")+1,t.qName.length):t.qName;return{toolTip:t.qName,label:e,value:t.qName,trimmedValue:t.displayName,qTags:t.qTags,isDerived:t.isDerived,isDateField:t.isDateField,isGeoField:t.isGeoField,activeDimensionIndex:-1}}));var o=n.dimensions.map((function(t){return{label:t.qData.title,value:t.qData.title,libraryId:t.qInfo.qId,isDrillDown:"H"===t.qData.grouping,activeDimensionIndex:-1}}));var s=[];t.activeDimensions&&t.activeDimensions.length&&t.activeDimensions.forEach((function(t,e){var i={};if(t.qLibraryId){o.forEach((function(e){if(e.libraryId===t.qLibraryId){i.label=e.label;i.value=e.value}}));i.libraryId=t.libraryId}else r.forEach((function(e){if(e.value===t.qDef.qFieldDefs[0]){i.label=e.label;i.value=e.value}}));i.translatedTitle=d["default"].get("properties.colorBy.currentDimension",e+1);i.activeDimensionIndex=e;s.push(i)}));e={fields:r,dimensions:o,activeDimensions:s};a()}))}))}],scope:{alignTo:"=",app:"=",addFieldDimension:"=",addLibraryDimension:"=",qvaOutsideIgnoreFor:"=",close:"=",position:"=",allowExpressionEditor:"@",selectColorByDimIndex:"="}};var g=e["a"]=v},"3ru6":function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("6uJb");var o=i("Oc2G");var s=i("sWge");var l=i("nHjU");var c=i("plXO");var u=i("T7lR");var d=i("djNn");var p=i("lnqa");var f=i("ZrpC");var h=i("wdNe");var v=i("GF7R");var g=i("P2vc");function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function y(t,e,i){e&&b(t.prototype,e);i&&b(t,i);return t}function x(t,e,i){if(t<e)return 0;if(t>i)return 1;return(t-e)/(i-e)}var _=function(){function t(){m(this,t);this._minFontSize=10;this._maxFontSize=20;this._minRectSize=100;this._maxRectSize=900;this._fontWeight="normal";this._fontFamily="QlikView Sans, sans-serif";this._fontSize=10}y(t,[{key:"setFontWeight",value:function t(e){this._fontWeight=e}},{key:"setFontFamily",value:function t(e){this._fontFamily=e}},{key:"setRectLimits",value:function t(e,i){this._minRectSize=e;this._maxRectSize=i}},{key:"getFont",value:function t(e,i){var n=Math.min(e.height,e.width);var a=i&&i.minFontSize?i.minFontSize:this._minFontSize;var r=i&&i.maxFontSize?i.maxFontSize:this._maxFontSize;var o=x(n,this._minRectSize,this._maxRectSize);this._fontSize=a+Math.round(o*(r-a));return"".concat(this._fontWeight," ").concat(this._fontSize,"px ").concat(this._fontFamily)}},{key:"getFontSize",value:function t(e,i){var n=Math.min(e.height,e.width);var a=i&&i.minFontSize?i.minFontSize:this._minFontSize;var r=i&&i.maxFontSize?i.maxFontSize:this._maxFontSize;var o=x(n,this._minRectSize,this._maxRectSize);return a+Math.round(o*(r-a))}}]);return t}();function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function q(t,e,i){e&&w(t.prototype,e);i&&w(t,i);return t}var M=[0,1];var S=[0,.5,1];function D(t,e,i){return{x0:t.x0,y0:t.y0,x1:t.x1,y1:t.y1,limits:e,colors:i}}function I(t){if(!t)return[];return t.paletteColors||t.colors}var k=function(){function t(){C(this,t);this._padding=0;this._colorWidth=50;this._maxWidth=50;this._labelPadding=10;this._fontManager=new _;this._fontManager.setRectLimits(100,1e3);this._bigValuesSettings={minFontSize:12,maxFontSize:60}}q(t,[{key:"createBarSegments",value:function t(e,i,n,a,r,o){var s=I(e);if(0===s.length)return{shapes:[]};var l=[];var c;var d=e.limits;var p;var f=this._colorWidth;var h;var g;var m;var b={};var y;var x;var _;var C;var w;var q=false;var k;var L={value:0,gradient:false};var T;var E=new v["a"];var A=o&&!n;r=Math.min(Math.max(r,0),1);d=d.map((function(t){return{value:(t.value-i.getPlotMin())/(i.getPlotMax()-i.getPlotMin()),gradient:t.gradient}}));for(c=0;c<s.length;c++){_=d[c]?d[c]:{value:1,gradient:false};h=_.value;g=0===c?0:d[c-1].value;C=i.getPositionOfNormalizedValue(h);k=i.getPositionOfNormalizedValue(g);b.current=new v["a"](s[c].color);b.next=new v["a"](s[c+1]?s[c+1].color:s[c].color);w=(r-g)/(h-g);q=w>=0&&w<=1;if(n){f=a.width<10?a.width:this._colorWidth;p=new u["a"](this._relevantPos,C,f,k-C)}else{f=this._colorWidth;p=new u["a"](k,this._relevantPos,C-k,f)}T={x0:p.x,y0:p.y+(n?p.height:0),x1:p.x+(n?0:p.width),y1:p.y};if(L&&L.gradient&&!_.gradient){b.last=v["a"].getBlend(b.current,b.last,.5);m={gradient:D(T,M,A?[b.current.toRGBA(),b.last.toRGBA()]:[b.last.toRGBA(),b.current.toRGBA()])};y=b.last;x=b.current}else if(_.gradient){b.next=v["a"].getBlend(b.current,b.next,.5);if(L.gradient){b.last=v["a"].getBlend(b.current,b.last,.5);m={gradient:D(T,S,A?[b.next.toRGBA(),b.current.toRGBA(),b.last.toRGBA()]:[b.last.toRGBA(),b.current.toRGBA(),b.next.toRGBA()])};if(w>.5){w=(w-.5)/.5;y=b.last;x=b.current}else{w/=.5;y=b.current;x=b.next}}else{m={gradient:D(T,M,A?[b.next,b.current]:[b.current,b.next])};y=b.current;x=b.next}}else m=b.current.toRGBA();q&&(E=m.gradient?v["a"].getBlend(y,x,w):b.current);p.opacity=1;p.fill=m;p.stroke=m;l.push(p);b.last=b.current;L=_}return{shapes:l,pointerBgColor:E}}},{key:"createBarProgress",value:function t(e,i,n,a,r){var o=[];var s;var l=new v["a"](n);var c=new v["a"](this.style.area.color);e=Number.isNaN(+e)?0:e>1?1:e<0?0:e;var d=i.getPositionOfValue(i.getPlotMin());var p=i.getPositionOfValue(i.getPlotMax());var f=i.getPositionOfValue((i.getPlotMax()-i.getPlotMin())*e+i.getPlotMin());this._labelPadding=this._colorWidth/2;var h=this._colorWidth;var g=this._relevantPos;s=a?new u["a"](g,f,h,r.height):new u["a"](d,g,f-d,h);s.opacity=1;s.fill=l.toHex();s.stroke=l.createShiftedColor().toHex();s.strokeWidth=1;o.push(s);s=a?new u["a"](g,0,h,f):new u["a"](f,g,p-f,h);s.opacity=1;s.fill=c.toHex();s.stroke=c.createShiftedColor(.1).toHex();s.strokeWidth=1;o.push(s);return o}},{key:"createGaugeMeterValue",value:function t(e,i,n,a,r,o,s,l){var c=new h["a"];c.text=i;c.ColorWidth=200;c.font=s;c.opacity=1;c.fill=this.style.value.color;if(a){if(e+o/2>r.height){c.baseline="bottom";e=r.height}else if(e<o/2){c.baseline="top";e=0}else c.baseline="middle";c.x=l?this._relevantPos-this._labelPadding:this._relevantPos+this._colorWidth+this._labelPadding;c.maxWidth=r.width-c.x;c.y=e;c.align=l?"right":"left"}else{c.y=this._relevantPos+this._colorWidth+this._labelPadding+o;c.x=Math.max(Math.min(r.width-n/2,e),n/2);c.align="center";c.baseline="bottom"}return c}},{key:"createGaugeMeterPointer",value:function t(e,i,n,a,r){var o=e>1?1:e<0?-1:0;var s=[];var l=this._relevantPos;var c=Math.max(Math.round(this._colorWidth/25),2);var u=50;var p=l<u?10:this._colorWidth;var h=Math.max(p,10)/6;var v=a.isDark()?this.style.pointer.color.light:this.style.pointer.color.dark;var g=new f["a"];var m=new d["a"];var b=!n&&r?1:-1;m.opacity=1;m.stroke=v;m.strokeWidth=c;g.opacity=1;g.fill=v;g.strokeWidth=c;e=e>1?1:e<0?0:e;var y=i.getPositionOfValue((i.getPlotMax()-i.getPlotMin())*e+i.getPlotMin());if(n){if(0!==o){g.set([{x:l+p/2,y:y},{x:l-h+p/2,y:o*h*2+y},{x:l+h+p/2,y:o*h*2+y}]);s.push(g)}m.set(l,y,l+p,y)}else{if(0!==o){g.set([{y:l+p/2,x:y},{y:l-h+p/2,x:b*o*h*2+y},{y:l+h+p/2,x:b*o*h*2+y}]);s.push(g)}m.set(y,l,y,l+p)}s.push(m);return s}},{key:"updateLabelStyle",value:function t(e,i,n){this._bigValuesSettings={minFontSize:this.style.value.minFontSize,maxFontSize:this.style.value.maxFontSize};e.value.font="normal ".concat(this._fontManager.getFontSize(i,this._bigValuesSettings),"px ").concat(n)}},{key:"createRadialSegments",value:function t(e,i){var n=I(e);if(0===n.length)return[];var a=[];var r;var o=e.limits;var s;var l;var c;var u=this._colorWidth;var d;var f=n[0].color;var h;var g={value:0,gradient:false};var m;var b;var y=i.getAngleOfNormalizedValue(0);var x=this._paddingToAxis;o=o.map((function(t){return{value:(t.value-i.getPlotMin())/(i.getPlotMax()-i.getPlotMin()),gradient:t.gradient}}));u=this._colorWidth*(i._relevantAngle>Math.PI?1:Math.sin(i._relevantAngle/4));this._colorWidth=u;if(i._radius-u-x<0)return a;for(r=0;r<n.length;r++){l=o[r]?o[r]:{value:1,gradient:false};h=n[r+1]?n[r+1].color:n[r].color;s=n[r].color;d=i.getAngleOfNormalizedValue(l.value);c=new p["a"](i._centerPoint.x,i._centerPoint.y,i._radius-u-x,i._radius-x,Math.min(y,d),Math.max(y,d),0);b={x0:c.x3,y0:c.y3,x1:c.x4,y1:c.y4};if(g&&g.gradient&&!l.gradient){h=new v["a"](s).blend(new v["a"](f),.5);m={gradient:D(b,M,[h,s])}}else if(l.gradient){h=new v["a"](s).blend(new v["a"](h),.5);if(g.gradient){f=new v["a"](s).blend(new v["a"](f),.5);m={gradient:D(b,S,[f,s,h])}}else m={gradient:D(b,M,[s,h])}}else m=s;c.opacity=1;c.fill=m;c.stroke=m;a.push(c);y=d;g=l;f=s}return a}},{key:"createRadialGaugeMeter",value:function t(e,i){var n=g["a"].getAngleOfNormalizedValue(e,i);var a=Math.max(this._colorWidth,10)/6;var r=2;var o;var s;var l=e>1?-1:1;var c;if(e>1||e<0){s=this._colorWidth*(i._relevantAngle>Math.PI?1:Math.sin(i._relevantAngle/4));this._colorWidth=s;o=-s*l/2;c=new f["a"]([{x:2*a+r,y:o},{x:r,y:a+o},{x:r,y:-a+o}])}else c=new f["a"]([{x:.5*-a+4,y:0},{x:8*-a,y:a},{x:8*-a,y:-a}]);c.opacity=1;c.translate(i._centerPoint.x+Math.cos(n)*i._radius,i._centerPoint.y+Math.sin(n)*i._radius);c.rotate(n);(e>1||e<0)&&c.rotate(-l*Math.PI/2);c.fill=this.style.pointer.color.dark;return c}},{key:"createRadialProgress",value:function t(e,i,n,a){var r=Math.min(n._radialOptions.start,n._radialOptions.end);var o=Number.isNaN(+e)?r:g["a"].getAngleOfNormalizedValue(e,n);var s=Math.max(n._radialOptions.start,n._radialOptions.end);var l=Math.min(a.width,a.height);var c;var u=[];var d=(l>500?this._maxWidth:Math.max(l/500*this._maxWidth,10))/6;var h=2;var m=this._paddingToAxis;var b;var y=new v["a"](this.style.area.color);var x;i=new v["a"](i);var _=this._colorWidth*(n._relevantAngle>Math.PI?1:Math.sin(n._relevantAngle/4));this._colorWidth=_;if(n._radius-_-m<0)return u;if(e>1||e<0){x=e>1?-1:1;b=-_*x/2;c=new f["a"]([{x:2*d+h,y:b},{x:h,y:d+b},{x:h,y:-d+b}]);c.opacity=1;c.translate(n._centerPoint.x+Math.cos(o)*n._radius,n._centerPoint.y+Math.sin(o)*n._radius);c.rotate(o-x*Math.PI/2);c.fill=i.toHex();u.push(c)}if(r<o){c=new p["a"](0,0,n._radius-_-m,n._radius-m,r,o,0);c.opacity=1;c.translate(n._centerPoint.x,n._centerPoint.y);c.fill=i.toHex();c.stroke=i.createShiftedColor().toHex();u.push(c)}if(s>o){c=new p["a"](0,0,n._radius-_-m,n._radius-m,o,s,0);c.opacity=1;c.translate(n._centerPoint.x,n._centerPoint.y);c.fill=y.toHex();c.stroke=y.createShiftedColor(.1).toHex();u.push(c)}return u}},{key:"createRadialGaugeValue",value:function t(e,i,n,a,r,o){var s=new h["a"];s.text=i;s.x=a.width/2;s.y=.5*a.height-o/2+.05*Math.min(a.width,a.height);s.align="center";s.font=r;s.baseline="middle";s.maxWidth=1.4*n._radius;s.opacity=1;s.fill=this.style.value.color;return[s]}},{key:"createRadialSpark",value:function t(e,i,n,a){var r=.4*Math.min(a.width,a.height);var o;var s=g["a"].getAngleOfNormalizedValue(e,n)+Math.PI/2;var l=0;var c;var u=new f["a"];u.opacity=1;if("string"!==typeof i)if(1===i.colors.length)u.fill=i.colors[0].color;else for(o=0;o<i.colors.length;o++){c=i.limits[o]?(i.limits[o].value-n.getPlotMin())/(n.getPlotMax()-n.getPlotMin()):1;if(e>=l&&e<c){u.fill=i.colors[o].color;break}l=c}else u.fill=i;a.width<a.height?u.set([{x:0,y:-r},{x:-r/2,y:+r/2},{x:r/2,y:+r/2},{x:0,y:-r}]):u.set([{x:-r/2,y:r/2},{x:0,y:-r},{x:+r/2,y:r/2},{x:-r/2,y:r/2}]);u.translate(n._centerPoint.x,n._centerPoint.y);u.rotate(s);return[u]}},{key:"getGaugeWidth",value:function t(e,i){var n;if(e){n=i?"width":"height";this._colorWidth=e[n]>500?this._maxWidth:Math.max(e[n]/500*this._maxWidth,10)}return this._colorWidth}},{key:"updateSize",value:function t(e,i,n){var a=Math.min(e.width,e.height);var r;r=n?a:i?e.width:e.height;this._colorWidth=r>500?this._maxWidth:Math.max(r/500*this._maxWidth,10);this._relevantPos=(r-this._colorWidth)/2;this._paddingToAxis=Math.min(6,a/200)}},{key:"getPaddingToAxis",value:function t(){return this._paddingToAxis}},{key:"getRelevantPos",value:function t(){return this._relevantPos}},{key:"getPadding",value:function t(){return this._padding}}]);return t}();var L=k;var T=i("UV1h");var E=i("WFGH");function A(t){return T["a"].resolveColor(t)}function P(){return E["default"].getLogicFor("hard","default")}function O(t,e,i){var n=(e||{}).baseColor;if(n&&n.color&&t.color&&"measure"===t.color.useBaseColors)return A(n);return i}function R(t){if(t.paletteColors&&t.paletteColors.length)return t.paletteColors;return t.colors&&t.colors.length?t.colors:void 0}function V(t,e){if(t.paletteColors&&t.paletteColors[e])return A(t.paletteColors[e]);return A(t.colors[e].color)}var N={getProgressColor:O,getSegmentColors:R,resolveColor:A,resolveColorSegment:V,getPropertyLogic:P};var z=N.getPropertyLogic();function F(t,e){if(!this._axis||!this._segmentInfo||void 0===this._axis.getPlotMin()||void 0===this._axis.getPlotMax())return s["a"].resolve();var i=this._axis;var n=this._style.value.font;var a=i.isVertical();var r=c["a"].getFontHeight(n);var o=this.renderers.gauge.getTextWidth(t,n);var l=this._axis.getPositionOfValue(e);var u=(e-i.getPlotMin())/(i.getPlotMax()-i.getPlotMin());var d;var p=[];if(this._data.useSegments){d=this._gaugeHelper.createBarSegments(this._segmentInfo,i,a,this.rect,u,this.yMirrorMode);p=d.shapes;p=p.concat(this._gaugeHelper.createGaugeMeterPointer(u,i,a,d.pointerBgColor,this.yMirrorMode))}else{p=this._gaugeHelper.createBarProgress(u,i,this._progressColor,a,this.rect);(u>1||u<0)&&(p=p.concat(this._gaugeHelper.createGaugeMeterPointer(u,i,a,u>1?new v["a"](this._progressColor):new v["a"](this._style.area.color),this.yMirrorMode)))}!Number.isNaN(+u)&&(a&&this.rect.width>100||!a&&this.rect.height>100)&&p.push(this._gaugeHelper.createGaugeMeterValue(l,t,o,a,this.rect,r,n,this.yMirrorMode));this.renderers.gauge.stage.removeChildren();this.renderers.gauge.stage.addChildren(p);return this.renderers.gauge.render()}function j(t,e){if(!this._axis||!this._segmentInfo&&this._data.useSegments||this._axis._radius<=0)return s["a"].resolve();var i=this._axis;var n=this._style.value.font;var a=c["a"].getFontHeight(n);var r=Math.min(this.rect.height,this.rect.width);var o=(e-i.getPlotMin())/(i.getPlotMax()-i.getPlotMin());var l=[];if(r<50)l=this._gaugeHelper.createRadialSpark(o,this._data.useSegments?this._segmentInfo:this._progressColor,i,this.rect);else{if(this._data.useSegments){l=this._gaugeHelper.createRadialSegments(this._segmentInfo,i);Number.isNaN(+o)||l.push(this._gaugeHelper.createRadialGaugeMeter(o,i))}else l=this._gaugeHelper.createRadialProgress(o,this._progressColor,i,this.rect);l=l.concat(this._gaugeHelper.createRadialGaugeValue(e,t,i,this.rect,n,a))}this.renderers.gauge.stage.removeChildren();this.renderers.gauge.stage.addChildren(l);return this.renderers.gauge.render()}function H(t){var e=t.getStyle("label.value","fontSize");var i=t.getStyle("label.value","fontFamily");return{value:{color:t.getStyle("label.value","color"),font:"normal ".concat(e," ").concat(i),minFontSize:12,maxFontSize:60},area:{color:"#eeeeee"},pointer:{color:{light:"#E6E6E6",dark:"#595959"}}}}var $=l["a"].extend({init:function t(){this._super.apply(this,arguments);this._gaugeHelper=new L;this._type="bar";this._currentProperties={};this._transitionProperties={};this._inTransition=false;this._cacheItems=[];this.renderers={gauge:new c["a"](this.container)};this._styleService=T["a"].initializeService("object.gauge")},_updateSize:function t(){this.invalidateDisplay("Gauge._updateSize")},_updateProperties:function t(){if(!this._data)return;var e=this._data;this._segmentInfo={};var i=e.qHyperCube.qMeasureInfo[0].coloring?e.qHyperCube.qMeasureInfo[0].coloring.gradient:null;if(e.color&&"measure"===e.color.useBaseColors&&i){if("percent"===i.limitType){var n=e.measureAxis.max-e.measureAxis.min;this._segmentInfo.limits=i.limits.map((function(t,a){return{value:e.measureAxis.min+t*n,gradient:i.breakTypes[a]}}))}else this._segmentInfo.limits=i.limits.map((function(t,e){return{value:t,gradient:i.breakTypes[e]}}));this._segmentInfo.colors=i.colors.map((function(t){return{color:N.resolveColor(t)}}))}else{e.segmentInfo&&e.segmentInfo.limits&&(this._segmentInfo.limits=e.segmentInfo.limits.concat().sort((function(t,e){return t.value-e.value})));if(e.segmentInfo){var a=N.getSegmentColors(e.segmentInfo);a&&(this._segmentInfo.colors=a.map((function(t,i){return{color:N.resolveColorSegment(e.segmentInfo,i)}})))}}var r=this._data.paletteProgressColor||this._data.progressColor||z.color.paletteColor.defaultValue();this._progressColor=N.getProgressColor(e,e.qHyperCube.qMeasureInfo[0].coloring,N.resolveColor(r));this._orientation=e.orientation;this._type=e.gaugetype;this._transitionProperties={value:e.qHyperCube.qDataPages[0].qMatrix[0][0].qNum,text:e.qHyperCube.qDataPages[0].qMatrix[0][0].qText};this._super()},hasValidData:function t(){return this._super()&&this._data},setAxis:function t(e){this._axis=e;this._axis.listen("changed",(function(){this.invalidateDisplay()}),this)},setRefLines:function t(e){this._refLines=e},setRefLineLabels:function t(e){this._refLineLabels=e},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},paint:function t(){if(!this._axis)return s["a"].resolve();this._style=H(this._styleService);this._gaugeHelper.style=this._style;var e=[];this._gaugeHelper.updateSize(this.rect,this._axis.isVertical(),this._axis.isRadial());if(this._refLines){this._refLines.setPaddingToAxis(this._gaugeHelper.getPaddingToAxis());this._refLines.setRelevantPos(this._gaugeHelper.getRelevantPos())}if(this._refLineLabels){this._refLineLabels.setPaddingToAxis(this._gaugeHelper.getPaddingToAxis());this._refLineLabels.setRelevantPos(this._gaugeHelper.getRelevantPos())}this._gaugeHelper.updateLabelStyle(this._style,this.rect,this._styleService.getStyle("label.value","fontFamily"));var i=this._data.qHyperCube.qDataPages[0].qMatrix[0][0];var n=this.measureFormatters[0];var a=n&&"U"===n.type?n.formatValue(i.qNum):i.qText;var r=this._currentProperties.value;this._inTransition&&n&&(a=n.format(r));this._axis.isRadial()?e.push(j.apply(this,[a,r])):e.push(F.apply(this,[a,r]));this._currentValue=r;if(this._refLines&&this._refLineLabels){this._refLines.setGaugeWidth(this._gaugeHelper.getGaugeWidth());this._refLineLabels.setGaugeWidth(this._gaugeHelper.getGaugeWidth())}return s["a"].all(e)},afterPaint:function t(){},clear:function t(){},getGaugeWidth:function t(e,i){return this._gaugeHelper.getGaugeWidth(e,i)}});Object.defineProperty($.prototype,"className",{value:"GaugeArea"});var B=$;var W=i("3x6l");var G=i("gapF");function U(t){if(!t||!t.paletteColor&&!t.color)return"#000000";if(t.paletteColor)return T["a"].resolveColor(t.paletteColor);return T["a"].resolveColor(t.color,T["a"].deprecatedPalette)}var Y=W["a"].extend("GaugeRefLines",{namespace:".gaugereflines",init:function t(){this._super.apply(this,arguments);this._width=50},paint:function t(){this._super.apply(this,[].slice.call(arguments));if(!this._hasVisibleRefLines)return;var e;var i;var n;var a;var r=[];var o=this._paddingToAxis;var s=this._relevantPos;for(var l=0;l<this._numRefLinesDataAxes;l+=1){var c=this._data[l];var u=this._axes[l];var d=this._axisPlotMinValues[l];var p=this._axisPlotMaxValues[l];for(var f=0;f<c.length;f+=1){var h,v;if(!G["a"].isVisible(c[f]))continue;var g=this._currentProperties["value".concat(l).concat(f)];if(g>p||g<d)continue;if(u.isRadial()){var m=u._radius;var b=u.getAngleOfValue(g);e=u._centerPoint.x+Math.cos(b)*(m-o);i=u._centerPoint.y+Math.sin(b)*(m-o);n=u._centerPoint.x+Math.cos(b)*(m-o-this._width);a=u._centerPoint.y+Math.sin(b)*(m-o-this._width)}else{var y=u.getPositionOfValue(g);y=Math.floor(y)-.5;if(u.isVertical()){e=s;i=y;n=s+this._width;a=y}else{e=y;i=s;n=y;a=s+this._width}}var x=U(c[f]);r.push({type:"line",stroke:x,strokeWidth:1,strokeDasharray:(null===(h=c[f])||void 0===h||null===(v=h.style)||void 0===v?void 0:v.lineType)?c[f].style.lineType.split(" "):void 0,shape:{x1:e,y1:i,x2:n,y2:a}})}}this.renderer.shapes=r;this.renderer.render()},setGaugeWidth:function t(e){this._width=e;this.updateSize();this.invalidateDisplay()},setPaddingToAxis:function t(e){this._paddingToAxis=e},setRelevantPos:function t(e){this._relevantPos=e}});var J=Y;var K=i("/D2Q");function Z(t){return String(void 0!==t.label?t.label:t)}function Q(t){if(!t||!t.paletteColor&&!t.color)return"#000000";if(t.paletteColor)return T["a"].resolveColor(t.paletteColor);return T["a"].resolveColor(t.color,T["a"].deprecatedPalette)}var X=K["a"].extend("GaugeRefLineLabels",{init:function t(){this._super.apply(this,arguments)},paint:function t(){if(!this._axis){this._clearLabels();return}this._axis.updateNow(["properties"]);if(this._plotMinValue!==this._axis.getPlotMin()||this._plotMaxValue!==this._axis.getPlotMax()){this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues.call(this)}if(!this._hasVisibleRefLines){this._clearLabels();return}var e;var i;var n;var a;var r;var o;var s="bottom";var l=this._relevantPos;var c=[];var u=[];var d=this._axis;var p;var f;var v;var g;var m;for(var b=0;b<this._data.length;b+=1){if(!G["a"].isVisible(this._data[b]))continue;e=this._currentProperties["value".concat(b)];i=Z(this._data[b].refLineExpr);if(void 0===e||Number.isNaN(+e)||e<this._axis.getPlotMin()||e>this._axis.getPlotMax())continue;var y=new h["a"];y.font=this._style.label.font;y.maxWidth=this._labelMaxWidthForYAxis;y.maxNumLines=3;var x=i;o=x.replace(/[0-9]|\.|-|\+|e/g,"");o=o.length?x:d.format(e);var _=G["a"].getRefLineTitle({refLine:this._data[b],label:this._data[b].label,valueString:o});var C=Q(this._data[b]);y.setText(_);y.ellipsis=this._data[b].showValue?"… (".concat(o,")"):"…";v=y.measure();if(d.isRadial()){var w=d._radius;var q=d.getAngleOfValue(e);a=d._centerPoint.x+Math.cos(q)*w;r=d._centerPoint.y+Math.sin(q)*w;p=q>Math.PI/2&&q<3*Math.PI/2?"right":"left";s=q>Math.PI&&q<2*Math.PI?"bottom":"top";f=v.width;if(a-f<0){y.maxWidth+=a-f;a=y.maxWidth}else a+f>this.rect.width&&(y.maxWidth=f+(this.rect.width-(a+f)))}else{n=d.getPositionOfValue(e);n=Math.floor(n)-.5;m=v.height/2;if(d.isVertical()){p=this.yMirrorMode?"right":"left";s="middle";a=this.yMirrorMode?l-4:l+this._width+4;r=n<m?n+(m-n+4):n>this.rect.height-m?n-(n-(this.rect.height-m-4)):n}else{p="center";r=l+this._width;s="top";g=v.width/2;a=n<g?n+(g-n+4):n>this.rect.width-g?n-(n-(this.rect.width-g-4)):n}}y.x=a;y.y=r;y.align=p;y.baseline=s;y.fill=C;u.push(y);c.push({position:n,shapeWrapper:y,tooltipRows:[{label:this._data[b].label,value:o}]})}var M=c?c.length:0;if(0===M){this._clearLabels();return}this.renderer.stage.removeChildren();this.renderer.stage.addChildren(u);this.renderer.render();this._tooltips.setLabelObjects(c)},setGaugeWidth:function t(e){this._width=e;this.invalidateDisplay()},setPaddingToAxis:function t(e){this._paddingToAxis=e},setRelevantPos:function t(e){this._relevantPos=e}});var tt=X;var et=i("7xSA");var it=i("YWN+");var nt='<div class="qv-viz" aria-hidden="true"></div>\n<div qva-popup-disclaimer ng-if="!!dataAttributes.popupDisclaimer.show" pop-close="dataAttributes.popupDisclaimer.onPopClose" pop-message="dataAttributes.popupDisclaimer.message" pop-title="dataAttributes.popupDisclaimer.title"></div>\n';var at=i("2Hli");var rt;var ot=N.getPropertyLogic();function st(t){return"measure"===at["a"].getValue(t,"color.useBaseColors")}var lt={uses:"data",items:{measures:{disabledRef:""},dimensions:{disabledRef:""}}};var ct={type:"items",uses:"settings",component:"expandable-items",translation:"Common.Appearance",items:{presentation:{type:"items",grouped:true,translation:"properties.presentation",items:{rangeLimits:{type:"items",items:{text:{component:"text",translation:"properties.axis.rangeLimits",style:"sHeader"},min:{ref:"measureAxis.min",translation:"properties.axis.min",type:"number",expression:"optional",invalid:function t(e){return e.measureAxis&&e.measureAxis.min>=e.measureAxis.max},change:function t(e){at["a"].setValue(e,"disclaimerClosed",true)}},max:{ref:"measureAxis.max",translation:"Common.Max",type:"number",expression:"optional",defaultValue:100,invalid:function t(e){return e.measureAxis&&e.measureAxis.min>=e.measureAxis.max},change:function t(e){at["a"].setValue(e,"disclaimerClosed",true)}}}},type:{ref:"gaugetype",type:"string",component:"item-selection-list",defaultValue:"radial",horizontal:true,items:[{icon:"gauge_gauge",component:"icon-item",labelPlacement:"bottom",translation:"properties.gauge.radial",value:"radial"},{icon:"gauge_vertical_bar",component:"icon-item",labelPlacement:"bottom",translation:"properties.gauge.bar",value:"bar"}],change:function t(e){if("radial"===e.gaugetype){rt=e.orientation;e.orientation="horizontal"}else e.orientation=rt}},autoOrientation:{ref:"autoOrientation",translation:"properties.orientation",type:"boolean",defaultValue:true,component:"switch",undefinedValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],show:function t(e){return"bar"===e.gaugetype}},orientation:{ref:"orientation",type:"string",component:"item-selection-list",defaultValue:"horizontal",horizontal:true,items:[{component:"icon-item",icon:"direction_up_down",labelPlacement:"bottom",translation:"properties.orientation.vertical",value:"vertical"},{icon:"direction_left_right",component:"icon-item",labelPlacement:"bottom",translation:"Common.Horizontal",value:"horizontal"}],show:function t(e){return"bar"===e.gaugetype&&!e.autoOrientation}},angle:{ref:"angle",translation:"properties.gauge.angle",type:"number",component:"slider",min:.2,max:.98,step:.1,defaultValue:.7,show:function t(){return false}},segments:{type:"items",items:{useSegments:{ref:"useSegments",type:"boolean",component:"switch",defaultValue:false,translation:"properties.gauge.useSegments",change:function t(e){var i=N.getSegmentColors(e.segmentInfo);e.useSegments&&1===i.length?e.segmentInfo.paletteColors=[e.paletteProgressColor||e.progressColor]:e.paletteProgressColor=i[0]},options:[{value:false,translation:"properties.off"},{value:true,translation:"properties.on"}]},useBaseColor:{ref:"color.useBaseColors",type:"string",defaultValue:"measure",translation:"properties.useLibraryMeasureColors",component:"switch",show:function t(e){e.color||(e.color={});e.color.useBaseColors||(e.color.useBaseColors="off");return true},options:[{value:"off",translation:"properties.off"},{value:"measure",translation:"properties.on"}]},paletteProgressColor:{component:"color-picker",translation:"properties.color",ref:"paletteProgressColor",type:"object",dualOutput:true,defaultValue:ot.color.paletteColor.defaultValue,show:function t(e){if(!at["a"].getValue(e,"paletteProgressColor")){var i=T["a"].resolveColor(at["a"].getValue(e,"progressColor"));var n=-1;if(!i||"none"===i){i=ot.color.paletteColor.defaultValue();n=i.index}at["a"].setValue(e,"paletteProgressColor",{index:n,color:i})}return!st(e)&&!e.useSegments}},valueMode:{ref:"valueMode",translation:"properties.value",type:"string",component:"dropdown",options:[{value:"absolute",translation:"properties.gauge.absolute"},{value:"relative",translation:"properties.gauge.relative"}],show:function t(){return false},defaultValue:"absolute"},maxSegments:{ref:"maxSegments",type:"number",defaultValue:6,show:false},segmentInfo:{ref:"segments",type:"items",component:"color-scale-creator",show:function t(e){return!st(e)&&e.useSegments},items:{limits:{ref:"segmentInfo.limits",type:"array",items:{value:{ref:"value",type:"number",expression:"optional",invalid:function t(e,i){return"number"===typeof e.value&&(e.value<i.measureAxis.min||e.value>i.measureAxis.max)},defaultValue:1},gradient:{translation:"properties.gradient",ref:"gradient",type:"boolean",show:false}}},paletteColors:{items:{color:{ref:"color",type:"string"},index:{ref:"index",type:"integer",defaultValue:6}},type:"array",ref:"segmentInfo.paletteColors"}}}}},disclaimerClosed:{ref:"disclaimerClosed",type:"boolean",defaultValue:false,show:false}}},measureAxis:{type:"items",label:function t(e,i){var t;var n=i.getMeasureLayouts()[0];t=n?r["default"].get("properties.measureAxisWithInfo",[n.qFallbackTitle]):r["default"].get("properties.measureAxis");return t},grouped:true,items:{axis:{type:"items",snapshot:{title:"properties.measureAxis",tid:"property-yAxis"},items:{show:{ref:"measureAxis.show",translation:"properties.axis.labelsAndTitle",type:"string",component:"dropdown",options:[{value:"all",translation:"properties.axis.show.all"},{value:"labels",translation:"properties.axis.show.labels"},{value:"title",translation:"properties.axis.show.title"},{value:"none",translation:"Common.None"}],defaultValue:"all"},spacing:{ref:"measureAxis.spacing",translation:"properties.axis.scale",type:"number",component:"dropdown",defaultValue:1,show:function t(e){return e.measureAxis&&"none"!==e.measureAxis.show&&"title"!==e.measureAxis.show},options:[{value:2,translation:"properties.gridLine.wide"},{value:1,translation:"properties.gridLine.medium"},{value:.5,translation:"properties.gridLine.narrow"}]}}}}}}};var ut={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{suppressZero:null,calcCond:{uses:"calcCond"}}},refLines:{uses:"reflines",items:{colorBackground:{show:false}}}}};var dt={type:"items",component:"accordion",items:{data:lt,addons:ut,settings:ct}};var pt=i("4zDG");var ft=i("GMLQ");var ht='<div class="qv-popup-disclaimer">\n\t<div class="close-icon  lui-icon  lui-icon--remove" qva-activate="onClose()"></div>\n\t<header class="dm-header">{{popTitle}}</header>\n\t<main class="dm-main">\n\t\t<p class="dm-p">{{popMessage}}</p>\n\t</main>\n</div>';ft["a"].directive("qvaPopupDisclaimer",[function(){return{template:ht,replace:true,scope:{popMessage:"=",popTitle:"=",popClose:"="},link:function t(e){e.onClose=function(){e.popClose()}}}}]);function vt(){var t=-Math.PI*(this._data.angle+.5);var e=Math.PI*(this._data.angle-.5);e+=t<0?2*Math.PI:0;t+=t<0?2*Math.PI:0;var i=this.yMirrorMode&&"radial"!==this._type;this.components.axis.setRadial("radial"===this._type,i?{start:e,end:t}:{start:t,end:e})}function gt(){var t=this.components.dataArea;var e=t.rect;var i=80;var n=a.a.extend({},e);var r=this.components.axis;var o=r.relevantSize;var s=t.getGaugeWidth(t.rect,"vertical"===this._orientation)/2;r.setAlignment("near");if("vertical"===this._orientation){if(this.yMirrorMode){n.x=e.width/2+s;r.setAlignment("far")}else n.x=e.width/2-s-o;if(n.x<0){n.width=o+n.x;n.x=0}else n.width=o}else{n.y=e.height/2-s-o;if(n.y<0){n.height=o+n.y;n.y=0}else n.height=o}(e.width<i||e.height<i)&&(n["vertical"===this._orientation?"width":"height"]=0);r.rect=n}var mt=o["a"].extend("Gauge",{namespace:".gauge",init:function t(e,i,n,o){var s=this;n=a.a.extend(true,n||{},{providers:{},components:{axis:{show:true,order:0,dock:"center",showFlag:l["a"].prototype.ShowFlags.SPARK,clazz:et["a"]},dataArea:{show:true,order:1,dock:"center",clazz:B,showFlag:l["a"].prototype.ShowFlags.SPARK},gaugeRefLines:{sortKey:5,show:true,dock:"center",showFlag:l["a"].prototype.ShowFlags.XSMALL},gaugeRefLineLabels:{show:true,dock:"center",order:3,showFlag:l["a"].prototype.ShowFlags.XSMALL}}});this._type="vertical";this._orientation="horizontal";this._super(e,i,n,o);this.components.dataArea.setAxis(this.components.axis);this.components.axis.setAlignment("near");this.components.axis.setDataRangeTransition(true);this.components.axis.setShowLine(false);this.components.gaugeRefLines=new J(this.container);this.components.gaugeRefLines.showFlag=l["a"].prototype.ShowFlags.XSMALL;this.components.gaugeRefLines.setUseTransition(true);this.components.dataArea.setRefLines(this.components.gaugeRefLines);this.layoutEngine.addComponent(this.components.gaugeRefLines);this.components.gaugeRefLineLabels=new tt(this.container);this.components.gaugeRefLineLabels.showFlag=l["a"].prototype.ShowFlags.SMALL;this.components.gaugeRefLineLabels.setUseTransition(true);this.components.dataArea.setRefLineLabels(this.components.gaugeRefLineLabels);this.layoutEngine.addComponent(this.components.gaugeRefLineLabels);this.$scope.dataAttributes.popupDisclaimer={show:false,message:r["default"].get("Object.Gauge.RangeIsDefault"),title:r["default"].get("Object.Gauge.RangeIsDefaultTitle"),onPopClose:function t(){s.$scope.backendApi.model.getProperties().then((function(t){t.disclaimerClosed=true;s.$scope.backendApi.model.setProperties(t)}))}}},_updateData:function t(e){this._type=e.gaugetype;this._orientation=e.autoOrientation&&"bar"===e.gaugetype?this.components.dataArea.rect.height>this.components.dataArea.rect.width?"vertical":"horizontal":e.orientation;if(e.refLine){var i={axes:{axis:{component:this.components.axis,data:e.axis,dataIndices:e.qHyperCube.qMeasureInfo.map((function(t,e){return e}))}},refLineLabels:{labels:{data:e.refLine.refLines,component:this.components.gaugeRefLineLabels,axis:this.components.axis}},refLines:{component:this.components.gaugeRefLines}};this._super(e,i);this.components.dataArea.setData(e);this.updateAxis(e,this.options);this.updateRefLines(e,i)}else{this.components.dataArea.setData(e);this.updateAxis(e,this.options);this._super(e)}},updateRefLines:function t(e,i){var n=i.refLineLabels;var a=[];var r=[];for(var o in n){if(!n[o].component)continue;n[o].component.setData(n[o].data);n[o].component.setAxis(n[o].axis);n[o].component.setDock(n[o].axis.getOppositeDock());r.push(n[o].axis);a.push(n[o].data)}if(i.refLines&&i.refLines.component){i.refLines.component.setAxes([i.axes.axis.component]);i.refLines.component.setData([e.refLine.refLines])}},isValid:function t(e){var i=this.isDataValid(e);var n;for(n in this.components)this.components[n].setHasValidData(i);return i},isDataValid:function t(e){var i=!!e&&!!e.qHyperCube&&e.qHyperCube.qMeasureInfo.length&&!e.qHyperCube.qMeasureInfo.some((function(t){return!!t.qError}));return i},updateAxis:function t(e){var i=e.measureAxis;var n=this.components.axis;var a=Math.min.apply(this,e.qHyperCube.qMeasureInfo.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));var r=Math.max.apply(this,e.qHyperCube.qMeasureInfo.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})));var o=e.qHyperCube.qMeasureInfo.map((function(t){return t.qFallbackTitle})).join(", ");n.setData(e);n.setTitle(o);n.setShowStrategy(i.show);n.setLabelMode(i.label);n.setOrientation("bar"===this._type?this._orientation:"horizontal");var s;if(n.setPlotMin){s=this.getAxisOptions(i);n.setPlotMin(s.min);n.setPlotMax(s.max);n.setTickMultiplier(i.spacing);n.setLogScale(i.logarithmic)}if(a===r&&0===r){r=1;a=0}r=Math.max(0,r);a=Math.min(0,a);this.setAxisDataRange(n,r,a,s.max,s.min,1);vt.call(this)},getAxisOptions:function t(e){if(!e)return;return{min:Number(e.min),max:Number(e.max)}},setAxisDataRange:function t(e,i,n,a,r,o){null!==a&&null!==r||null===a&&null===r?e.setDataRange(n,i):null!==a&&a<=n?e.setDataRange(a-o,i):null!==r&&r>=i?e.setDataRange(n,r+o):e.setDataRange(n,i)},_paint:function t(){var e=[];if(!this.isValid(this._data))return this.clear();this._super();vt.call(this);this.layout();if(this.$scope.dataAttributes.popupDisclaimer){var i=this._data.disclaimerClosed||this._data.maxMinChanged;!this.inEditState()||this._layoutMode<7||i?this.$scope.dataAttributes.popupDisclaimer.show=false:this.$scope.dataAttributes.popupDisclaimer.show=true}for(var n in this.components)e.push(this.components[n].invalidateDisplay());return s["a"].all(e)},layout:function t(){var e=this.components.axis;var i=e.updateSize;e.updateSize=function(){};this.layoutEngine.layout(this.rect,this._layoutMode,this.containerRect);e.updateSize=i;if(this._data&&this._data.autoOrientation&&"bar"===this._data.gaugetype){this._orientation=this.components.dataArea.rect.height>this.components.dataArea.rect.width?"vertical":"horizontal";this.components.axis.setOrientation(this._orientation)}e.preRelevantSizeCalculation();e.calculatePreliminaryRelevantSize(this.components.dataArea.rect,this.components.dataArea.rect);e.calculateRelevantSize(this.components.dataArea.rect,this.components.dataArea.rect);this.components.axis.isRadial()||gt.call(this);e.updateSize()},getPreferredSize:function t(){return this._super()}});var bt=e["default"]={type:"gauge",BackendApi:it["a"],template:nt,View:mt,definition:dt,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:1,qHeight:1}],qSuppressMissing:true},segmentInfo:{limits:[],colors:[{color:3}]}},data:{measures:{min:1,max:1,description:function t(){return r["default"].get("Visualizations.Descriptions.Gauge.Measure")}}},support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:true,viewData:true},getDropFieldOptions:function t(e,i,n,a,r){e.AddFieldAsMeasure(n,i,r);a()},getDropDimensionOptions:function t(e,i,n,a){a()},importProperties:pt["default"].axisChart.importProperties.bind(pt["default"]),exportProperties:pt["default"].axisChart.exportProperties.bind(pt["default"])}},"3x6l":function(t,e,i){"use strict";var n=i("nHjU");var a=i("UV1h");var r=i("ohbW");var o=i("gapF");function s(t){return Number(void 0!==t.value?t.value:t)}function l(t,e){if(!t||!t.paletteColor&&!t.color)return e;if(t.paletteColor)return a["a"].resolveColor(t.paletteColor);return a["a"].resolveColor(t.color,a["a"].deprecatedPalette)}function c(){if(!this._numRefLinesDataAxes||!this._numAxes)return false;var t;var e;var i;var n;var a;var r;var l;for(t=0;t<this._numAxes;t+=1){i=this._axes[t];r=i.getPlotMin();l=i.getPlotMax();this._axisPlotMinValues[t]=r;this._axisPlotMaxValues[t]=l;n=this._data[t]||[];for(e=0;e<n.length;e+=1){a=s(n[e].refLineExpr);if(o["a"].isVisible(n[e])&&null!==a&&!Number.isNaN(+a)&&a>=r&&a<=l)return true}}return false}function u(){var t;var e;var i;var n;for(t=0;t<this._numAxes;t+=1){e=this._axes[t];i=e.getPlotMin();n=e.getPlotMax();if(this._axisPlotMinValues[t]!==i||this._axisPlotMaxValues[t]!==n)return true}return false}function d(){var t;var e;for(t=0;t<this._numAxes;t+=1){e=this._axes[t];this._axisPlotMinValues[t]=e.getPlotMin();this._axisPlotMaxValues[t]=e.getPlotMax()}}var p=n["a"].extend("RefLines",{init:function t(){this._super.apply(this,arguments);this.renderer=new r["a"](this.container);this.renderer.edgeBleed={top:1,left:1,right:0,bottom:0};this._$renderAreaWrap.addClass("qv-chart-component-reflines");this._hasVisibleRefLines=false;this._styleService=a["a"].initializeService("object.".concat(this.options.parentType));this._numAxes=0;this.renderers={lines:this.renderer}},setData:function t(){this._super.apply(this,arguments);this._numRefLinesDataAxes=void 0===this._data?0:this._data.length;this._hasVisibleRefLines=c.call(this);d.call(this)},setAxes:function t(e){var i=this;this._axes&&this._axes.forEach((function(t){t.stopListen("changed",i.invalidateDisplay,i)}));this._axes=e;this._axes.forEach((function(t){t.listen("changed",i.invalidateDisplay,i)}));this._numAxes=void 0===e?0:e.length;void 0!==this._axisPlotMinValues&&this._axisPlotMinValues.length===this._numAxes||(this._axisPlotMinValues=new Array(this._numAxes));void 0!==this._axisPlotMaxValues&&this._axisPlotMaxValues.length===this._numAxes||(this._axisPlotMaxValues=new Array(this._numAxes))},isVisible:function t(){var e=this._super.apply(this,arguments);if(!e||!this._numAxes||!this._numRefLinesDataAxes)return false;return true},hasValidData:function t(){return this._super()&&this._numRefLinesDataAxes&&this._numAxes},paint:function t(){var e=this._styleService.getStyle("referenceLine.label.name","color");this._super.apply(this,[].slice.call(arguments));if(u.call(this)){this._hasVisibleRefLines=c.call(this);d.call(this)}if(!this._hasVisibleRefLines){this.renderer.shapes=[];this.renderer.clear();return}var i;var n;var a;var r;var s;var p;var f;var h;var v;var g;var m;var b;var y;var x=[];for(i=0;i<this._numRefLinesDataAxes;i+=1){a=this._data[i];r=this._axes[i];s=this._axisPlotMinValues[i];p=this._axisPlotMaxValues[i];for(n=0;n<a.length;n+=1){var _,C;if(!o["a"].isVisible(a[n]))continue;f=this._currentProperties["value".concat(i).concat(n)];if(null===f||Number.isNaN(+f)||f>p||f<s)continue;h=r.getPositionOfValue(f);h=Math.floor(h)-.5;if(r.isVertical()){v=0;g=h;m=this.rect.width;b=h}else{v=h;g=0;m=h;b=this.rect.height}y=l(a[n],e);x.push({type:"line",stroke:y,strokeWidth:1,strokeDasharray:(null===(_=a[n])||void 0===_||null===(C=_.style)||void 0===C?void 0:C.lineType)?a[n].style.lineType.split(" "):void 0,shape:{x1:v,y1:g,x2:m,y2:b}})}}this.renderer.shapes=x;this.renderer.render()},_updateProperties:function t(){if(!this._data)return;var e=this._data;var i=e.length;var n;var a;for(n=0;n<i;n++)if(void 0!==e[n])for(a=0;a<e[n].length;a++)this._transitionProperties["value".concat(n).concat(a)]=e[n][a].refLineExpr.value;this._super()}});e["a"]=p},"4Ox4":function(t,e,i){"use strict";e["a"]='<div class="pp-component pp-list-component pp-list pp-nm-hcd" tcl="data">\n\t<div class="pp-nm-hcd__lists" qv-sortable-list="sortableItemLists" qva-context-menu="openGlobalContextMenu($event)">\n\n\t\t\x3c!-- Lists --\x3e\n\t\t<div class="pp-nm-hcd__list"\n\t\t\t ng-class="{ \n\t\t\t\t \'disabled\': list.disabled, \n\t\t\t\t \'empty\': isAutoChart && !getUndraggedItems(list).length,\t\t\t\t \n\t\t\t\t \'has-headerless-sibling\': list.hasHeaderlessSibling }"\n\t\t\t ng-if="list.show() !== false"\n\t\t\t ng-repeat="list in sortableItemLists.lists"\n\t\t\t tid="{{::list.tid}}">\n\t\t\t\n\t\t\t \x3c!-- List header --\x3e\n\t\t\t<div class="pp-nm-hcd__list-header" ng-class="{ \'descriptionless\': list.descriptionless }" ng-if="::!list.hideHeader">\n\t\t\t\t<span class="pp-nm-hcd__list-header-title">{{list.title}}</span>\n\t\t\t</div>\n\n\t\t\t\x3c!-- List body --\x3e\n\t\t\t<div class="pp-nm-hcd__list-body">\n\n\t\t\t\t<ul class="pp-nm-hcd__list-items">\n\t\t\t\t\t\n\t\t\t\t\t\x3c!-- Dimensions / measures --\x3e\n\t\t\t\t\t<li class="pp-nm-hcd__list-item" \n\t\t\t\t\t\tng-class="item.classList"\n\t\t\t\t\t\tng-repeat="item in list.items track by item.id"\n\t\t\t\t\t\tng-include="item.templateSrc">\n\t\t\t\t\t</li>\n\n\t\t\t\t\t\x3c!-- Next possible item - Description and add button --\x3e\n\t\t\t\t\t<li class="pp-nm-hcd__list-item" ng-show="showNextPossibleItem(list)">\n\t\t\t\t\t\t<div class="pp-nm-di">\n\t\t\t\t\t\t\t<div class="pp-nm-di__description" ng-if="showNextPossibleItemDescription(list)">\n\t\t\t\t\t\t\t\t{{getNextPossibleItemDescription(list)}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class="lui-button lui-button--block pp-nm-di__add-button"\n\t\t\t\t\t\t\t\t\tng-class="{ \'lui-active\': list.adding }"\n\t\t\t\t\t\t\t\t\tng-click="list.addClicked($event)"\n\t\t\t\t\t\t\t\t\tqv-enter="list.addClicked($event)"\n\t\t\t\t\t\t\t\t\tqva-outside-ignore-for="{{::\'addButton-\' + $id}}"\n\t\t\t\t\t\t\t\t\ttid="add-hc-data">\n\t\t\t\t\t\t\t\t\t<span class="lui-button__text">{{list.getAddLabel()}}</span>\n\t\t\t\t\t\t\t\t\t<i class="toggle-expand lui-button__caret lui-caret" ng-if="hasMultipleAddOptions()"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},"5/lS":function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function r(t,e,i){e&&a(t.prototype,e);i&&a(t,i);return t}var o=function(){function t(){n(this,t);this.classList=[]}r(t,[{key:"addClass",value:function t(e){if(!e)return;var i=this.classList.indexOf(e);-1===i&&this.classList.push(e);return this}},{key:"removeClass",value:function t(e){if(!e)return;var i=this.classList.indexOf(e);-1!==i&&this.classList.splice(i,1);return this}},{key:"hasClass",value:function t(e){return-1!==this.classList.indexOf(e)}}]);return t}();var s=o;var l=i("zjn0");function c(t){c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return c(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function p(t,e,i){e&&d(t.prototype,e);i&&d(t,i);return t}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return h(t,e)}function v(t){var e=b();return function i(){var n=y(t),a;if(e){var r=y(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g(this,a)}}function g(t,e){if(e&&("object"===c(e)||"function"===typeof e))return e;return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function y(t){y=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return y(t)}var x=function(t){f(i,t);var e=v(i);function i(t,n){var a;u(this,i);a=e.call(this);a.setDefaults();a.colIx=t;a.rowIx=n;return a}p(i,[{key:"setDefaults",value:function t(){this.classList.length=0;this.isNumeric=false;this.style={};this.styleCache={};this.hoverStyle={};this.color={};this.colspan=1;this.rowspan=1;this.text="";this.dataValue=-1;this.dataColIx=-10;this.effectiveDataColIx=void 0;this.dataRowIx=-1;this.isDimensionValue=false;this.type=void 0;this.locked=false;this.isNullValue=false;this.value="";this.tid="";this.dir="auto";this.isRtl=false;this.isTotal=false;this.fieldName="";this.isHovering=false;this.selected=false;this.selectedHighlighted=false}},{key:"getAutoTextAlign",value:function t(){if(this.isNumeric)return"right";return this.isRtl?"right":"left"}},{key:"setTextAlign",value:function t(e,i){this.textAlign=e?this.getAutoTextAlign():i||"left"}},{key:"setText",value:function t(e){var i=l["a"].detectTextDirection(e);this.text=e;this.dir=l["a"].supportDirAuto()?"auto":i;this.isRtl="rtl"===i}},{key:"setData",value:function t(e,i,n,a,r){this.setText(e);this.rowspan=i||1;this.colspan=n||1;this.dataRowIx=a||-1;this.dataColIx=r||-1}},{key:"setHeader",value:function t(e,i,n,a,r,o,s,l){this.setText(e);this.dataValue=i;this.rowspan=n||1;this.colspan=a||1;this.dataRowIx=r;this.dataColIx=o;this.isTotal=l;this.templateSrc="pt-header-cell-item.ng.html";this.addClass("header");this.setNullClass(s)}},{key:"setTopHeader",value:function t(){this.setHeader.apply(this,arguments);this.addClass("top")}},{key:"setLeftHeader",value:function t(){this.setHeader.apply(this,arguments);this.addClass("left")}},{key:"setFromMetaHeader",value:function t(e){var i=this;Object.keys(e).forEach((function(t){i[t]=e[t]}));this.setText(e.text);this.setTextAlign(e.autoAlignText,e.explicitTextAlign);(e.isDimension||e.isMeasure)&&this.setAriaSort(e.isSorted,e.sortIndicator)}},{key:"setNullClass",value:function t(e){e&&(this.isNullValue=e)}},{key:"addFocusListener",value:function t(e){this.focusListeners=this.focusListeners||[];this.focusListeners.push(e)}},{key:"focus",value:function t(){this.focusListeners&&this.focusListeners.forEach((function(t){t()}))}},{key:"addBlurListener",value:function t(e){this.blurListeners=this.blurListeners||[];this.blurListeners.push(e)}},{key:"blur",value:function t(){this.blurListeners&&this.blurListeners.forEach((function(t){t()}))}}]);return i}(s);var _=x;var C=i("e5Ml");function w(t){w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return w(t)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function S(t,e,i){e&&M(t.prototype,e);i&&M(t,i);return t}function D(t,e,i){D="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=I(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return D(t,e,i||t)}function I(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=O(t);if(null===t)break}return t}function k(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&L(t,e)}function L(t,e){L=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return L(t,e)}function T(t){var e=P();return function i(){var n=O(t),a;if(e){var r=O(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return E(this,a)}}function E(t,e){if(e&&("object"===w(e)||"function"===typeof e))return e;return A(t)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function O(t){O=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return O(t)}var R=function(t){k(i,t);var e=T(i);function i(){q(this,i);return e.apply(this,arguments)}S(i,[{key:"setDefaults",value:function t(){D(O(i.prototype),"setDefaults",this).call(this);this.isNumeric=false;this.color.bgByExpression=false;this.color.bgIsDark=false;this.qvaOutsideIgnoreFor="";this.textAlign="left";this.isSearchIcon=false;this.open=false;this.sortable=false;this.isMeasure=false;this.isSorted=false;this.reversed=false;this.isSelectLocked=false;this.columnHighlighted=this.columnHighlighted||false;this.hidden=false;this.isFillColumn=false;this.ariaSort=void 0;this.representation=C["d"]}},{key:"setAriaSort",value:function t(e,i){this.ariaSort="none";e&&("A"===i?this.ariaSort="ascending":"D"===i&&(this.ariaSort="descending"))}}]);return i}(_);var V=R;function N(t){N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return N(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function j(t,e,i){e&&F(t.prototype,e);i&&F(t,i);return t}function H(t,e,i){H="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=$(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return H(t,e,i||t)}function $(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=K(t);if(null===t)break}return t}function B(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&W(t,e)}function W(t,e){W=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return W(t,e)}function G(t){var e=J();return function i(){var n=K(t),a;if(e){var r=K(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return U(this,a)}}function U(t,e){if(e&&("object"===N(e)||"function"===typeof e))return e;return Y(t)}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function K(t){K=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return K(t)}var Z=function(t){B(i,t);var e=G(i);function i(){z(this,i);return e.apply(this,arguments)}j(i,[{key:"setDefaults",value:function t(){H(K(i.prototype),"setDefaults",this).call(this);this.templateSrc="pt-cell-item.ng.html";this.collapseExpandClass="";this.isMeta=false;this.textAlign=""}},{key:"setCollapseExpandClass",value:function t(e){this.addClass("parent");e.qCanExpand?this.collapseExpandClass="lui-icon--plus":e.qCanCollapse&&(this.collapseExpandClass="lui-icon--minus")}},{key:"setEmpty",value:function t(e,i,n){this.setHeader("",-4,e,i);this.addClass("empty");this.addClass(n)}}]);return i}(_);var Q=Z;function X(t){X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return X(t)}function tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function it(t,e,i){e&&et(t.prototype,e);i&&et(t,i);return t}function nt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&at(t,e)}function at(t,e){at=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return at(t,e)}function rt(t){var e=lt();return function i(){var n=ct(t),a;if(e){var r=ct(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ot(this,a)}}function ot(t,e){if(e&&("object"===X(e)||"function"===typeof e))return e;return st(t)}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lt(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function ct(t){ct=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return ct(t)}var ut=function(t){nt(i,t);var e=rt(i);function i(t,n){var a;tt(this,i);a=e.call(this);a.cells=[];a.style={};a.isBold=false;a.classList=[];a.gridType=t;a.rowIx=n;a.reset();return a}it(i,[{key:"getIndex",value:function t(){for(var e=0;e<this.cells.length;++e){var i=this.cells[e];if(i.dataRowIx>=0)return i.dataRowIx}return-1}},{key:"setNextCellIx",value:function t(e){this.nextCellIx=e}},{key:"reset",value:function t(e){this.nextCellIx=0;this.isBold=false;e||(this.classList=[]);for(var i=0;i<this.cells.length;++i)this.cells[i].setDefaults();this.isHovering=false}},{key:"removeUnused",value:function t(){this.cells.splice(this.nextCellIx,this.cells.length-this.nextCellIx)}},{key:"_createCell",value:function t(e){switch(this.gridType){case"pivot":return new Q(e,this.rowIx);default:return new V(e,this.rowIx)}}},{key:"getCell",value:function t(e){this.cells[e]||(this.cells[e]=this._createCell(e));return this.cells[e]}},{key:"getColIx",value:function t(e){return this.cells.indexOf(e)}},{key:"getPreviousCell",value:function t(e){var i=this.getColIx(e);if(i>0)return this.getCell(i-1);return}},{key:"getNextCell",value:function t(){var e;if(this.cells[this.nextCellIx]){e=this.cells[this.nextCellIx];e.setDefaults()}else{e=this._createCell(this.nextCellIx);this.cells[this.nextCellIx]=e}this.nextCellIx++;return e}},{key:"getCellSize",value:function t(){return this.nextCellIx}},{key:"addEmptyHeaderCell",value:function t(e,i,n,a,r,o){var s=this.getNextCell();s.setEmpty(n,a,r);s.setData("",n,a,e,i);s.setNullClass(o);return s}},{key:"addEmptyMetaCell",value:function t(e,i,n){var a=this.addEmptyHeaderCell(-1,-1,e,i,n);a.isMeta=true;return a}},{key:"addEmptyDataCell",value:function t(e,i){var n=this.getNextCell();n.setData("",-4,e,i);n.addClass("empty");return n}},{key:"addTotalCell",value:function t(e,i,n){var a=this.getNextCell();a.setHeader(e,-1,i,n);a.addClass("bold");this.addClass("bold");return a}},{key:"addLeftCollapseExpandCell",value:function t(e,i,n,a,r){var o=this.getNextCell();o.setLeftHeader("",-1,1,1,e,i,a,r);o.setCollapseExpandClass(n);return o}}]);return i}(s);var dt=ut;function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function ht(t,e,i){e&&ft(t.prototype,e);i&&ft(t,i);return t}var vt=function(){function t(e){pt(this,t);this.rows=[];this.gridType=e}ht(t,[{key:"reset",value:function t(e){this.rows.forEach((function(t){t.reset(e)}));this.nextRowIx=0}},{key:"get",value:function t(e){this.rows[e]||(this.rows[e]=new dt(this.gridType,e));return this.rows[e]}},{key:"getNext",value:function t(){var e=this.get(this.nextRowIx);this.nextRowIx++;return e}},{key:"removeUnused",value:function t(){this.rows.splice(this.nextRowIx,this.rows.length-this.nextRowIx);this.rows.forEach((function(t){t.removeUnused()}))}},{key:"setNextRowIx",value:function t(e){this.nextRowIx=e}}]);return t}();var gt=vt;var mt=i("acVu");function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function xt(t,e,i){e&&yt(t.prototype,e);i&&yt(t,i);return t}var _t=function(){function t(e){bt(this,t);this.headerList=new gt(e);this.rowList=new gt(e);this.footerList=new gt(e);this.gridType=e;this.reset()}xt(t,[{key:"setTopTreeDepth",value:function t(e){this.topTreeDepth=e}},{key:"setLeftTreeDepth",value:function t(e){this.leftTreeDepth=e}},{key:"reset",value:function t(e,i){this.rowList.reset();if(!e){this.headerList.reset(i);this.footerList.reset(i)}this.topTreeDepth=-1;this.leftTreeDepth=-1}},{key:"getRowsByCellType",value:function t(e){var i=[];i=e===this.CELL_TYPE_DATA||e===this.CELL_TYPE_LEFT?this.rows:this.headerRows;return i}},{key:"getRow",value:function t(e){return this.rowList.get(e)}},{key:"getHeaderRow",value:function t(e){return this.headerList.get(e)}},{key:"getFooterRow",value:function t(e){return this.footerList.get(e)}},{key:"getNextRow",value:function t(){return this.rowList.getNext()}},{key:"getNextHeaderRow",value:function t(){return this.headerList.getNext()}},{key:"getNextFooterRow",value:function t(){return this.footerList.getNext()}},{key:"getCell",value:function t(e,i){return this.getRow(e).getCell(i)}},{key:"getHeaderCell",value:function t(e,i){return this.getHeaderRow(e).getCell(i)}},{key:"getFooterCell",value:function t(e,i){return this.getFooterRow(e).getCell(i)}},{key:"removeUnused",value:function t(){this.rowList.removeUnused();this.headerList.removeUnused();this.footerList.removeUnused()}},{key:"getNextRowIx",value:function t(){return this.rowList.nextRowIx}},{key:"setNextRowIx",value:function t(e){this.rowList.setNextRowIx(e)}},{key:"setNextHeaderIx",value:function t(e){this.headerList.setNextRowIx(e)}},{key:"hover",value:function t(e,i,n){var a="inherit"!==n.content.hover["background-color"];var r="inherit"!==n.content.hover.color;Object(mt["b"])("TABLE_HOVER_ROW")&&(a||r)&&this.rows[e.rowIx].cells.forEach((function(t){t.isHovering=i;t.hoverStyle["background-color"]=a?n.content.hover["background-color"]:t.style.backgroundColor;t.hoverStyle.color=r?n.content.hover.color:t.style.color}))}}]);return t}();Object.defineProperties(_t.prototype,{headerRows:{get:function t(){return this.headerList.rows}},footerRows:{get:function t(){return this.footerList.rows}},rows:{get:function t(){return this.rowList.rows}},GRID_TYPE_STRAIGHT:{value:"straight"},GRID_TYPE_PIVOT:{value:"pivot"},CELL_TYPE_TOP:{value:"top"},CELL_TYPE_LEFT:{value:"left"},CELL_TYPE_DATA:{value:"data"}});var Ct=e["a"]=_t},"5/nM":function(t,e,i){"use strict";var n=i("mWu2");var a=i("/2No");var r='<lui-dialog id="export-dialog">\n\t<div ng-if="state === states.PENDING">\n\t\t<lui-dialog-header q-translation="Export.Exporting"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<div class="qv-loader pb-10"></div>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="cancel()" q-translation="Common.Cancel"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.COMPLETED">\n\t\t<lui-dialog-header q-translation="Export.Completed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10">\n\t\t\t\t<span q-translation="Export.CompletedDescription"></span>\n\t\t\t\t<span q-translation="Export.WarningDataTruncated" ng-if="dataIsTruncated"></span>\n\t\t\t</p>\n\t\t\t<p class="pb-10">\n\t\t\t\t<a class="export-url" ng-href="{{exportUrl}}" target="_blank" q-translation="Export.CompletedLink"></a>\n\t\t\t</p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.FAILED">\n\t\t<lui-dialog-header q-translation="Export.Failed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10" q-translation="{{errorTranslation}}"></p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n</lui-dialog>\n';var o=i("GWYG");var s=e["a"]={show:function t(e,i,o){return n["default"].getService("luiDialog").show({controller:["$scope",function(t){t.states={FAILED:-1,IDLE:0,PENDING:1,COMPLETED:2};t.state=t.states.PENDING;e.getLayout().then((function(n){var r=e.exportData(null,i,n.title||null);t.rpcId=r.requestId;r.then((function(e){t.exportUrl=a["a"].rootPath+e.qUrl.substring(1);t.state=t.states.COMPLETED;e.qWarnings&&1e3===e.qWarnings[0]&&(t.dataIsTruncated=true)}),(function(e){t.state=t.states.FAILED;t.errorTranslation="ErrorCode.".concat(e.code);e.isHandled=true}))}));t.openExportWindow=function(){window.open(t.exportUrl)};t.cancel=function(){t.rpcId?e.app.global.cancelRequest(t.rpcId).finally(t.close):t.close()};t.close=function(){t.destroyComponent();o&&o()}}],template:r})}}},"5rlx":function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-text-component" ng-class="{\'banner\': banner}" ng-if="visible" tcl="text">\n  <div class="lui-icon" ng-if="icon" ng-class="icon"></div>\n\t<div ng-class="style" tid="{{key}}">{{label}}</div>\n</div>';var r={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineCustom(t,t.args.handler,"style");n["a"].defineCustom(t,t.args.handler,"banner");n["a"].defineCustom(t,t.args.handler,"icon");t.style||(t.style="message")}]};var o=e["default"]=r},"6dxF":function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("TmNk");var o=i.n(r);var s=i("mWu2");var l=i("sWge");var c=i("2n0V");var u=i("qZHi");var d=i("8IgQ");var p='<div class="qv-object-wrapper" ng-class="wrapperClassList" x-ms-format-detection="none">\n\n\t<article class="qv-object qvt-visualization" ng-class="classList" tid="{{objectClass}}">\n\t\t<div class="qv-inner-object" ng-style="styles.innerObject" ng-class="{\'no-titles\' : !object.showTitles || ($scope.layout.title === \'\' && $scope.layout.subtitle === \'\' && $scope.layout.footnote === \'\')}">\n\t\t\t<qv-rain ng-if="object.throbberApi.isVisible" show="object.throbberApi.isVisible" resize="object.throbberApi.watchResize" model="object.model"></qv-rain>\n\t\t\t<div class="retry-overlay" ng-if="object.throbberApi.isQueryCanceled">\n\t\t\t\t<ul class="cancelled-list">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<div class="retry-text" q-translation="Object.Cancelled"></div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button class="retry-button lui-button" qva-activate="retry()" q-translation="Dialog.Button.Retry" tid="retry-calculations"></button>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="cancel-overlay" ng-if="object.throbberApi.isLongRunningQuery && !object.throbberApi.isQueryCanceled">\n\t\t\t\t<button class="cancel-button lui-button" ng-if="!object.throbberApi.isQueryCanceled" qva-activate="cancel()"\n\t\t\t\t\t\tq-translation="Common.Cancel" tid="cancel-calculations"></button>\n\t\t\t</div>\n\n\t\t\t<label class="hidden-screen-reader-label" q-translation="{{object.type.libraryInfo.isThirdParty ? object.type.libraryInfo.name : object.type.libraryInfo.translationKey}}"></label>\n\t\t\t<label ng-if="!layout.title" class="hidden-screen-reader-label" q-translation="Accessibility.Object.NoTitle"></label>\n\t\t\t<header qva-direction x-dir-setting="{{options.direction}}" ng-show="object.hasFrame" class="qv-object-header" ng-class="{\'thin\': !object.showTitles || ( layout.title === \'\' && layout.subtitle === \'\' && !object._inEditState), \'cell-nav-disabled\': cellNavDisabled}">\n\t\t\t\t<h1 ng-show="object.showTitles" qva-direction x-dir-setting="{{options.direction}}" ng-attr-title="{{layout.title}}" class="qv-object-title qvt-visualization-title" qva-activate="titleClicked();" ng-style="styles.title">\n\t\t\t\t\t<a ng-if="options.showSearch && object.isInteractive && !object.backendApi.isLocked() && !object._inEditState" q-title-translation="Common.Search" class="qv-object-search lui-icon lui-icon--search"\n\t\t\t\t\t   qva-activate="options.showSearch && options.search.toggle()"></a>\n\t\t\t\t\t<a ng-if="options.showSearch && object.isInteractive && object.backendApi.isLocked()" class="qv-object-locked lui-icon lui-icon--lock"\n\t\t\t\t\t   qva-activate="titleClicked()"></a>\n\t\t\t\t\t<span ng-if="options.showSearch && object.backendApi.isDrillDown()" class="lui-icon lui-icon--drill-down" q-title-translation="Tooltip.dimensions.drilldown"></span>\n\t\t\t\t\t<div ng-if="options.highlightTitle && (!object._inEditState || object._inEditState && object.isReadonly)" qve-highlight text="{{layout.title}}" query="options.highlightQuery" class="qv-object-title-text" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.title}}"></div>\n\t\t\t\t\t<div ng-if="!options.highlightTitle && (!object._inEditState || object._inEditState && object.isReadonly)" class="qv-object-title-text" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.title}}">{{layout.title}}</div>\n\t\t\t\t\t<div ng-if="options.showDisclaimerStar && !!layout.title && !object._inEditState" class="disclaimer qv-object-title-text">*</div>\n\t\t\t\t\t<div ng-if="object._inEditState && !object.isReadonly" qv-inline-title-edit x-dir-setting="{{options.direction}}" x-model="model" x-property-path="title" x-layout-path="title"\n\t\t\t\t\t\t x-empty-translation="Object.AddTitle" class="qv-object-title-edit" qva-direction x-dir-setting="{{options.direction}}"></div>\n\t\t\t\t</h1>\n\n\t\t\t\t<h2 ng-if="!!layout.subtitle && object.showTitles" ng-style="styles.subTitle" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.subtitle}}" ng-attr-title="{{layout.subtitle}}" ng-show="!!layout.subtitle" class="qv-object-subtitle qvt-visualization-subtitle">{{layout.subtitle}}</h2>\n\t\t\t</header>\n\n\t\t\t<div class="qv-object-content-container">\n\t\t\t\t<div class="qv-object-content" qv-object-content component="object.content" options="options" object="object" backend-api="object.backendApi" layout="layout"\n\t\t\t\t\t ext="object.ext" selections-api="object.selectionsApi" tooltip-api="object.tooltipApi" throbber-api="object.throbberApi" on-init="onInit">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-footer-wrapper" ng-show="object.hasFrame && object.showTitles && !!layout.footnote" ng-style="styles.footer">\n\t\t\t<footer qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.footnote}}" ng-attr-title="{{layout.footnote}}" ng-if="object.hasFrame && object.showTitles && !!layout.footnote" class="qv-object-footnote qvt-visualization-footnote">{{layout.footnote}}</footer>\n\t\t</div>\n    <div ng-if="blockUI" class="qv-ui-blocker" ></div>\n  </article>\n</div>\n';var f=i("MGTR");var h=i("qbMp");var v=i("4nJ1");var g=i("Wbap");var m=i("6uJb");var b='<div qv-requirements class="requirements-wrapper" ng-show="show" ng-class="{\'incomplete\': !showAdd}">\n\t<div class="requirements">\n\t\t<h2 class="header">\n\t\t\t<i class="object-icon  lui-icon  lui-icon--{{iconName}}"></i>\n\t\t</h2>\n\t<p class="incomplete-text" ng-if="!showAdd" q-translation="Visualization.Requirements.IncompleteVisualization"></p>\n\t<span class="text req-label no-icon" ng-if="showAdd && (finishedDimensions.length || unfinishedDimensions.length) && reqLabels && isNative" title="{{dimensionLabel}}">{{dimensionLabel}}</span>\n\t\t\x3c!-- finished dimensions --\x3e\n\t\t<ul ng-if="showAdd && finishedDimensions.length">\n\t\t\t<li ng-repeat="dimension in finishedDimensions" class="item" ng-class="{ finished: !dimension.invalid, invalid: dimension.invalid }"\n\t\t\t\ttid="{{ dimension.invalid ? \'invalid-dimension\' : \'added-dimension\'}}">\n\t\t\t\t<span class="text req-description no-icon" ng-if="reqLabels && isNative" title="{{dimensionDesc(finishedDimensions.indexOf(dimension), object.layout.qHyperCube.qNoOfLeftDims)}}">{{dimensionDesc(finishedDimensions.indexOf(dimension), object.layout.qHyperCube.qNoOfLeftDims)}}</span>\n\t\t\t\t<div ng-class="{ \'finished-item\': reqLabels }">\n\t\t\t\t\t<span class="text" ng-class="{ \'no-icon\': !canRemoveDim }" title="{{dimension.title}}">{{dimension.title}}</span>\n\t\t\t\t\t<i ng-if="canRemoveDim" class="lui-icon lui-icon--remove" qva-activate="removeDimension($index)" q-title-translation="Common.Delete"></i>\n\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\x3c!-- unfinished dimensions --\x3e\n\t\t<ul ng-if="showAdd && unfinishedDimensions.length">\n\t\t\t<li ng-repeat="d in unfinishedDimensions" class="item missing" tid="missing-dimension">\n\t\t\t\t<span class="text req-description no-icon" ng-if="reqLabels && isNative" title="{{dimensionDesc(d.index + finishedDimensions.length, 1)}}">{{dimensionDesc(d.index + finishedDimensions.length, 1)}}</span>\n\t\t\t\t<button class="add-button lui-button"  ng-class="{ \'lui-active\': d.active, \'lui-disabled\': reqLabels && isNative &&unfinishedDimensions.indexOf(d) !== 0 }" ng-click="showAddDimension($event,d)"\n\t\t\t\t\ttid="add-dimension">{{(reqLabels && isNative && fullSize()) ? addLabel : addDimensionLabel}}</button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<span class="text req-label no-icon" ng-if="showAdd && (finishedMeasures.length || unfinishedMeasures.length) && reqLabels && isNative" title="{{measureLabel}}">{{measureLabel}}</span>\n\t\t\t\x3c!-- finished measures --\x3e\n\t\t<ul ng-if="showAdd && finishedMeasures.length">\n\t\t\t<li ng-repeat="measure in finishedMeasures" class="item" ng-class="{ finished: !measure.invalid, invalid: measure.invalid }"\n\t\t\t\ttid="{{ measure.invalid ? \'invalid-measure\' : \'added-measure\'}}">\n\t\t\t\t<span class="text req-description no-icon" ng-if="reqLabels && isNative" title="{{measureDesc(finishedMeasures.indexOf(measure))}}">{{measureDesc(finishedMeasures.indexOf(measure))}}</span>\n\t\t\t\t<div ng-class="{ \'finished-item\': reqLabels }">\n\t\t\t\t\t<span class="text" title="{{measure.title}}">{{measure.title}}</span>\n\t\t\t\t\t<i class="lui-icon lui-icon--remove" qva-activate="removeMeasure($index)" q-title-translation="Common.Delete"></i>\n\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\x3c!-- unfinished measures --\x3e\n\t\t<ul ng-if="showAdd && unfinishedMeasures.length">\n\t\t\t<li ng-repeat="m in unfinishedMeasures" class="item missing" tid="missing-measure">\n\t\t\t\t<span class="text req-description no-icon" ng-if="reqLabels && isNative" title="{{measureDesc(m.index + finishedMeasures.length)}}">{{measureDesc(m.index + finishedMeasures.length)}}</span>\n\t\t\t<button class="add-button lui-button"  ng-class="{ \'lui-active\': m.active, \'lui-disabled\': reqLabels && isNative &&unfinishedMeasures.indexOf(m) !== 0 }" ng-click="showAddMeasure($event,m)"\n\t\t\t\ttid="add-measure">{{(reqLabels && isNative && fullSize()) ? addLabel : addMeasureLabel}}</button>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n';var y=i("z4LI");var x=i("7w0t");var _=i("wIyQ");var C=i("395F");var w=i("gF9a");var q=i("kp36");var M=i("I+mr");function S(t,e,i){return t?e&&!i:!i}function D(t){var e=new Array(t);var i;for(i=0;i<t;++i)e[i]={index:i};return e}function I(t,e){if(t.layers&&t.layers[0]){var i=t.layers[0];var n=i.qHyperCube.qDimensionInfo;if("point"===i.type)return n[1].qError&&n[1].qError.qErrorCode?[n[1]]:[n[0]];return t.layers[0].qHyperCube.qDimensionInfo||[]}var a=M["a"].getHyperCube(t,e);if(a)return a.qDimensionInfo||[];if(t.qChildList){var r=t.qChildList.qItems||[];return r.map((function(){return{}}))}if(t.qListObject)return t.qListObject.qDimensionInfo?[t.qListObject.qDimensionInfo]:[];return[]}function k(t,e){var i=M["a"].getHyperCube(t,e);return i&&i.qMeasureInfo||[]}function L(t,e){var i=t.ext.dimensionDefinition?t.ext.dimensionDefinition.min:0;var n=t.ext.dimensionDefinition?t.ext.dimensionDefinition.max:0;var a=t.ext.measureDefinition?t.ext.measureDefinition.min:0;var r=t.ext.measureDefinition?t.ext.measureDefinition.max:0;var o=I(e,t.hyperCubePath);var s=k(e,t.hyperCubePath);t.minDimensions="function"===typeof i?i.call(null,s.length):i;t.minMeasures="function"===typeof a?a.call(null,o.length):a;t.maxDimensions="function"===typeof n?n.call(null,s.length):n;t.maxMeasures="function"===typeof r?r.call(null,o.length):r}var T={updateShowAdd:S,getArray:D,getDimensionInfo:I,getMeasureInfo:k,updateMinMax:L};var E=i("5Hbw");var A=i("bdjB");var P=i("acVu");var O=null;var R=x["a"].extend({$scope:null,init:function t(e,i){this.$scope=e;this.$scope.hyperCubePath=e.object.ext.options.hyperCubePath;this.titleRetriever=q["a"].create();function n(){y["a"].model?e.showAdd=T.updateShowAdd(E["a"].inClient(),y["a"].isInEditMode(),e.object.isReadonly):e.showAdd=false}y["a"].StateChanged.bind(n);e.$on("$destroy",(function(){y["a"].StateChanged.unbind(n)}));n();e.removeDimension=function(t){e.object.model.getProperties().then((function(i){var n=e.object.getCreatePropertyHandler();n.setProperties(i);n.removeDimension(t).then((function(){e.object.model.setProperties(i)}))}))};e.removeMeasure=function(t){e.object.model.getProperties().then((function(i){var n=e.object.getCreatePropertyHandler();n.setProperties(i);n.removeMeasure(t).then((function(){e.object.model.setProperties(i)}))}))};function r(t){return e.object.ext.addFieldDimension(t,e.object).then((function(){u()}))}function o(t){return e.object.ext.addLibraryDimension(t,e.object).then((function(){u()}))}function s(t){return e.object.ext.addLibraryMeasure(t,e.object).then((function(){u()}))}function l(t){return e.object.ext.addExpressionMeasure(t,e.object).then((function(){u()}))}var c;e.showAddDimension=function(t,n){if(O&&O===n){c&&c.close();c=null;O=null;return}var s=e.ext.addDimensionPopoverComponent||C["a"];var l;c=i.show({template:s.template,controller:s.controller,input:{app:e.object.model.app,closeAddPopover:u,addFieldDimension:r,addLibraryDimension:o},alignTo:t.target,closeOnEscape:true,outsideIgnore:".add-button",dock:"right"});c.closing.then((function(t){l=t;t&&!a()(t.target).hasClass("add-button")&&(O=null)}));c.closed.then((function(){c=null;n.active=false;l||(O=null)}));n.active=true;O=n};e.showAddMeasure=function(t,n){if(O&&O===n){c&&c.close();c=null;O=null;return}var r=e.ext.addMeasurePopoverComponent||w["a"];var o;c=i.show({template:r.template,controller:r.controller,input:{app:e.object.model.app,closeAddPopover:u,addLibraryMeasure:s,addExpressionMeasure:l},alignTo:t.target,closeOnEscape:true,dock:"right",outsideIgnore:'[tid="add-measure"]'});c.closing.then((function(t){o=t;t&&!a()(t.target).hasClass("add-button")&&(O=null)}));c.closed.then((function(){c=null;n.active=false;o||(O=null)}));n.active=true;O=n};function u(t){if(c){c.close();c=null}O&&(O.active=false);t&&!a()(t.target).hasClass("add-button")&&(O=null)}_["a"].on("start",u);e.$on("$destroy",(function(){_["a"].off("start",u);u()}))},onPaint:N});R.$inject=["$scope","luiPopover"];var V={template:b,controller:R};function N(t){var e=this.$scope;var i=this;return this.$scope.object.model.getEffectiveProperties().then((function(n){var a;var r=i.titleRetriever;e.showAdd=T.updateShowAdd(E["a"].inClient(),y["a"].isInEditMode(),e.object.isReadonly);T.updateMinMax(e,t);e.iconName=e.object.ext.libraryInfo.icon;if(e.type!==e.object.type.type){a=e.object.getCreatePropertyHandler();i.propertyHandler=a;e.canRemoveDim=!!a.removeDimension;e.type=e.object.type.type;e.isNative=!e.object.type.libraryInfo.isThirdParty;e.addDimensionLabel=a.getAddDimensionLabel();e.addMeasureLabel=m["default"].get("Visualization.Requirements.AddMeasure");if(Object(P["b"])("REQ_LABELS")&&"auto-chart"!==e.type&&"widget"!==e.type){e.fullSize=function(){return e.object.objectSize.w>=Object(A["a"])().FULL.width&&e.object.objectSize.h>=Object(A["a"])().FULL.height};e.reqLabels=true;e.addLabel=m["default"].get("Common.Add");e.dimensionLabel="histogram"===e.type?m["default"].get("Common.Fields"):m["default"].get("Common.Dimensions");e.measureLabel=m["default"].get("Common.Measures");if(e.isNative)if("pivot-table"===e.type){e.dimensionDesc=function(t,e){var i={type:t<e?"rows":"columns"};return a.dimensionDefinition.description(n,t,i)};e.measureDesc=function(t){return a.measureDefinition.description(n,t,{})}}else if("filterpane"!==e.type){e.dimensionDesc=function(t){return a.dimensionDefinition.description(n,t,{})};e.measureDesc=function(t){return a.measureDefinition.description(n,t,{})}}else e.dimensionDesc=function(t){return e.object.ext.data.dimensions.description(n,t)}}}else a=i.propertyHandler;a.setLayout(t);a.setProperties(n);r.resetTitles();return l["a"].all({dimensions:l["a"].all(a.getDimensions().map((function(t){var e=t.qDef.cId;var i=a.getDimensionLayout(e);var n=i.qError&&i.qError.qErrorCode;return r.getDimensionTitle(i,t,true,a.app).then((function(t){return{invalid:!!n,title:t}}))}))),measures:l["a"].all(a.getMeasures().map((function(t,e){var i=t.qDef.cId;var n=a.getMeasureLayout(i);n||(n=a.getMeasureLayouts()[e]);var o=n.qError&&n.qError.qErrorCode;return r.getMeasureTitle(n,t,true,a.app).then((function(t){return{invalid:!!o,title:t}}))})))}).then((function(t){e.finishedDimensions=t.dimensions;e.finishedMeasures=t.measures;var i=t.dimensions.length;var n=t.measures.length;var a=!i&&e.maxDimensions>0;var r=!n&&e.maxMeasures>0;e.unfinishedDimensions=T.getArray(Math.max(0,e.minDimensions-i,a?1:0));e.unfinishedMeasures=T.getArray(Math.max(0,e.minMeasures-n,r?1:0));e.show=true}))}))}var z=i("zBv7");var F=i("HUnP");var j=i("jWHD");var H=i("AyDD");var $=i("UV1h");var B=i("+ZlN");var W=i("i7ks");var G=i("RZ9f");function U(t,e){var i;var n;var a;var r;var o=s["default"].getService("$timeout");e.throbberApi&&"function"===typeof e.throbberApi.destroy&&e.throbberApi.destroy();function l(a,r){o.cancel(i);o.cancel(n);e.throbberApi.clearRequest();if(e.selectionsApi&&e.selectionsApi.active)e.throbberApi.hide();else if(t.model&&void 0===t.model.state)e.throbberApi.show();else if(t.model&&t.model.isCancelled){e.throbberApi.isQueryCanceled=true;t.blockUI=false}else if(a){i=o((function(){t.model&&t.model.isValidating&&e.throbberApi.show()}),r);n=o((function(){if(true===e.throbberApi.isVisible){e.throbberApi.isLongRunningQuery=true;e.throbberApi.isQueryCanceled=false}}),8e3)}else{e.throbberApi.hide();e.throbberApi.isLongRunningQuery=false}}e.throbberApi={resizeCallbacks:[],isVisible:false,isLongRunningQuery:false,isQueryCanceled:false,reset:function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n>0&&(t.blockUI=true);l(i,n)},show:function i(){t.blockUI=false;e.throbberApi.isVisible=true;e.throbberApi.isQueryCanceled=false;e.throbberApi.isLongRunningQuery=false},trackRequest:function t(i){e.throbberApi.clearRequest();a=o((function(){e.throbberApi.show()}),1e3);e.throbberApi.requestPromise=i;r=o((function(){if(true===e.throbberApi.isVisible){e.throbberApi.isLongRunningQuery=true;e.throbberApi.isQueryCanceled=false}}),8e3);i.finally((function(){e.throbberApi.hide()}))},clearRequest:function t(){e.throbberApi.requestPromise=null;o.cancel(a);o.cancel(r)},hide:function a(){t.blockUI=false;e.throbberApi.isVisible=false;e.throbberApi.isLongRunningQuery=false;o.cancel(i);o.cancel(n);e.throbberApi.clearRequest()},off:function t(){o.cancel(i);o.cancel(n);e.throbberApi.clearRequest()},destroy:function t(){e.throbberApi.off();e.throbberApi.resizeCallbacks.length=0},resize:function t(){e.throbberApi.resizeCallbacks.forEach((function(t){t()}))},watchResize:function t(i){var n=e.throbberApi.resizeCallbacks;n.push(i);return function t(){var e=n.indexOf(i);-1!==e&&n.splice(e,1)}}}}var Y=U;var J=i("KBmc");var K=i("BUOA");var Z=i("H6Kg");var Q=i("wDFR");function X(t){t=t||{};f["a"].publish("/ui/object/resize",t)}["/resize/end","/ui/panel/toggle","/ui/grid/cellswap","/ui/grid/cellresize","/ui/grid/cellsplitting","/ui/grid/zoom/activated","/ui/grid/zoom/deactivated"].forEach((function(t){f["a"].subscribe(t,X)}));var tt=i("kr+q");var et='<div ng-show="progress" class="qv-animate progress ng-hide">\n\t<div class="progress-loader" style="width:20%;height:20%;position:absolute;top:40%;left:40%"></div>\n</div>\n';s["default"].directive("qvThrobber",["$timeout",function(t){return{replace:true,template:et,restrict:"E",scope:{model:"=",progress:"=",delay:"=",disabled:"="},link:function e(i){var n;i.$watch("model.isValidating",(function(e){if(true===i.disabled){i.progress=false;return}if(i.model&&void 0===i.model.state)i.progress=true;else if(e){n&&t.cancel(n);n=t((function(){i.model&&i.model.isValidating&&(i.progress=true)}),i.delay||1e3)}else i.progress=false}))}}}]);var it=i("sqvK");var nt='<div qva-direction x-dir-setting="{{options.direction}}" class="qv-object-nav" aria-hidden="true" ng-style="styles.backgroundColor" ng-class="{\'zero-top\' : options.isZoomed, \'visible\' : menu.visible, \'active\': options.isActive, \'inline\' : options.thinHeader}">\n  <qva-nav-menu-item ng-repeat="menuItem in menu.items | orderBy:\'+\':true" model="menuItem"></qva-nav-menu-item>\t\n</div>';var at='<a\n  ng-show="model.isVisible()"\n  ng-class="[model.cssClasses, model.dynamicCssClasses()]"\n  qva-activate="model.action($event)"\n  q-title-translation="{{model.translation}}"\n  tid="{{model.tid}}">\n</a>';s["default"].directive("qvaNavMenuItem",[function(){return{template:at,replace:true,scope:{model:"="},link:function t(e,i){e.model.mounted&&e.model.mounted(i)}}}]);s["default"].directive("qvaNavMenu",[function(){return{template:nt,replace:true,scope:{menu:"=",options:"="},controller:["$scope","$element",function(t,e){t.menu.getSize=function(){var i=e[0].getBoundingClientRect();return{width:t.menu.visible?i.width:0,height:t.menu.visible?i.height:0}}}]}}]);var rt=new h["a"]({type:"invalid",path:"objects.error-handling/invalid-type"});function ot(){var t=/\.(qlik-stage|qlikcloud)\.com/;var e=window.location.hostname.match(t)||[];return e.length}var st={INVALID:0,RENDERED:1};s["default"].componentDirective("qvObjectContent",{object:"=",backendApi:"=",ext:"=",options:"=",layout:"=",selectionsApi:"=",tooltipApi:"=",throbberApi:"=",onInit:"="},(function(t,e,i){e.onInit(t,e,i)}));function lt(t){t.selectionsApi&&t.selectionsApi.active&&t.selectionsApi.confirm()}function ct(t,e){var i;function n(){return!t.options||false!==t.options.isVisible}function a(){return!t.options||false!==t.options.isResizable}function r(){lt(e)}function o(){if(!n()||!a())return;s["default"].$apply(t,(function(){e.resize()}));e.throbberApi&&e.throbberApi.resize();e.explore.resize()}function l(){i||(i=setTimeout((function(){o();clearTimeout(i);i=null}),100))}t.$on("resizeCell",(function(){l()}));f["a"].subscribe("/ui/object/resize.".concat(t.$id),(function(){l()}));_["a"].on("start.".concat(t.$id),r);t.$on("$destroy",(function(){clearTimeout(i);f["a"].unsubscribe(".".concat(t.$id));_["a"].off("start.".concat(t.$id),r)}))}function ut(t,e){t.object._forcePaint=true;t.object.startRenderTimestamp="visible"===document.visibilityState?Date.now():void 0;function i(i){if(!t.model.isCancelled){t.layout=i;e.setLayout(i,t.options)}}function n(t){if(!t)return;e.model&&o(e.model);r(t);e.setModel(t)}function a(){e.setRenderState(st.INVALID)}function r(n){var r;n.Invalidated&&!n.isCancelled&&n.Invalidated.bind(a);e.subscription=t.model.layoutSubscribe(i);if(null===e||void 0===e||null===(r=e.throbberApi)||void 0===r?void 0:r.isQueryCanceled){n.Invalidated&&n.Invalidated.bind(a);e.throbberApi.hide();e.throbberApi.reset(true);e.throbberApi.isQueryCanceled=false}}function o(i){i&&i.Invalidated&&i.Invalidated.unbind(a);i&&i.isValidating&&t.options._softCancelOnRemove&&i.markAsCancelled();e.subscription&&e.subscription.dispose()}t.$watch("model",n);t.$on("$destroy",(function(){o(t.model)}))}function dt(t){return"".concat(parseInt(t,10)/13,"em")}function pt(t,e){var i=e&&e.visualization?e.visualization:e&&e.qInfo?e.qInfo.qType:null;var n=i?"object.".concat($["a"].getMatch(i)):"object";var a=$["a"].initializeService(n);t.styles=v["a"].extend(true,t.styles||{},{innerObject:{"background-color":a.getStyle("","backgroundColor"),"font-family":a.getStyle("","fontFamily")},title:{"font-size":dt(a.getStyle("title.main","fontSize")),"font-family":a.getStyle("title.main","fontFamily"),color:a.getStyle("title.main","color")},subTitle:{"font-size":dt(a.getStyle("title.subTitle","fontSize")),"font-family":a.getStyle("title.subTitle","fontFamily"),color:a.getStyle("title.subTitle","color")},footer:{"font-size":dt(a.getStyle("title.footer","fontSize")),"font-family":a.getStyle("title.footer","fontFamily"),color:a.getStyle("title.footer","color"),"background-color":a.getStyle("title.footer","backgroundColor")}})}function ft(t,e,i,n){var a;var r;var l;var c;var d;var p;pt(t,t.layout);e.updateTitlePadding=function(e){var i="rtl"===t.options.direction;v["a"].setValue(t,"styles.title.padding-right",i?0:"".concat(e,"px"));v["a"].setValue(t,"styles.title.padding-left",i?"".concat(e,"px"):0);n.contentLoaded().then((function(t){t.view&&t.view.updateTitlePadding&&t.view.updateTitlePadding(e)}))};e.setObjectClass=function(n){c||(c=i.find(".qv-object"));if(c[0]){(n||void 0===d)&&(d=c[0].clientWidth);(n||void 0===p)&&(p=c[0].clientHeight)}var a=u["a"].getLayoutMode(d,p);var r=e.type&&e.type.type;var o=[];e._inEditState&&o.push("qv-mode-edit");e.hasValidContent()||o.push("qv-incomplete");e.supportSnapshot()&&o.push("qv-can-take-snapshot");e.selectionsApi&&e.selectionsApi.active&&o.push("qv-selections-active");Object(P["b"])("THEME_FONT_FAMILY")||o.push("default-font");e.objectSize={w:d,h:p};t.options.layoutMode=a;var s="qv-layout-".concat(u["a"].getLayoutModeKey(a));o.push(s);t.objectClass="qv-object-".concat(r);o.push(t.objectClass);e.selectionClass&&o.push(e.selectionClass);t.classList=o;t.wrapperClassList=[];t.object&&t.object.hasFrame&&t.object.showTitles&&!!t.layout.footnote&&t.wrapperClassList.push("has-footnote");t.options.thinHeader=!e.showTitles||""===t.layout.title&&""===t.layout.subtitle&&!e._inEditState};function f(){return!t.options||false!==t.options.isVisible}e.update=function(){if(!this.valid)return;pt(t,t.layout);t.cellNavDisabled=K["a"].isDisabled(e);var i=this;a=s["default"].getService("$timeout")((function(){e.backendApi&&e.backendApi.updateCache(t.layout);e.setObjectClass();t.$digest();i.loadContent();var a=e.type===rt&&t.options.hardError;n.contentLoaded().then((function(r){if(!r.isDestroyed)try{o.a.apply({model:e.model,isSnapshot:e.backendApi&&e.backendApi.isSnapshot}).then((function(n){if(n)return;return r.onPaint(t.layout,{visible:f()}).then((function(n){if(false===n)return;if(a){e.setRenderState(st.INVALID);"function"===typeof t.options.onRendered&&t.options.onRendered.call(null,"INVALID")}else{e.setRenderState(st.RENDERED);!i.renderTime&&i.startRenderTimestamp&&(i.renderTime=Date.now()-i.startRenderTimestamp);"function"===typeof t.options.onRendered&&t.options.onRendered.call(null);"function"===typeof t.options.snapshotCallback&&e.getSnapshotLayout().then((function(e){t.options.snapshotCallback(e)}))}})).catch((function(){e.setRenderState(st.INVALID);"function"===typeof t.options.onRendered&&t.options.onRendered.call(null)}))}))}catch(i){e.setRenderState(st.INVALID);e.error={class:"hard-error",title:m["default"].get("Object.Error"),message:m["default"].get("Object.ErrorMessage.RenderingFailed",e.ext&&e.ext.type)};G["a"].trackEvent(G["a"].customEvents.EXTENSION_PAINT_ERROR,{message:"string"===typeof i?i:i.message,stack:i.stack,extension:e.type?e.type.type:"undefined",isThirdParty:e.type&&e.type.libraryInfo.isThirdParty});n.updateContent(z["a"]).then((function(n){n.onPaint(t.layout,{visible:false}).then((function(){e.setRenderState(st.RENDERED);"function"===typeof t.options.onRendered&&t.options.onRendered.call(null,i)}))}));throw i}}))}))};e.resize=function(){if(!f())return;e.setRenderState(st.INVALID);e.setObjectClass(true);r=s["default"].getService("$timeout")((function(){n.contentLoaded().then((function(i){i.isDestroyed||i.onResize(t.layout).then((function(){e.setRenderState(st.RENDERED)})).catch((function(t){false}))})).catch((function(t){false}))}))};e.onResize=function(){n.contentLoaded().then((function(i){i.onResize(t.layout).then((function(){e.setRenderState(st.RENDERED)}))}))};var h=function t(){e.update()};Z["a"].UpdateObjProps.bind(h);t.$on("$destroy",(function(){var t=s["default"].getService("$timeout");t.cancel(a);t.cancel(r);l&&l.reject();Z["a"].UpdateObjProps.unbind(h)}))}function ht(t,e,i,n){var a=Object(l["a"])();var r;i.loaded=a.promise;i.valid=false;i.loadContent=function(){var e={options:t.options,object:i,layout:t.layout,ext:i.ext};var a;a=i.ext.hasError(e)?z["a"]:i.ext.showRequirements(e)?V:i.ext;n.updateContent(a)};i.reset=function(){if(!this.valid)return;t.options=v["a"].extend({},t.resetOptions,{isZoomed:t.options.isZoomed,interactionState:t.options.interactionState,direction:t.options.direction,onRendered:t.options.onRendered,disableThrobber:t.options.disableThrobber,removeIt:t.options.removeIt});a=Object(l["a"])();this.loaded=a.promise;this.valid=false};i.validate=function(){if(this.valid)return;if(this.layout&&this.type&&this.ext){this.valid=true;a.resolve()}};i.setExtension=function(e){this.ext=e;t.ext=e;if("invalid"!==e.type){e.mapProperties(this.model);e.mapSoftProperties();this.setBackendApi();if(e.migrate){this.model.migrate={properties:e.migrate.properties||function(t){return t},snapshot:e.migrate.snapshot||function(t){return t}};"function"===typeof e.migrate.snapshot&&B["a"].isSnapshotData(this.model.layout)&&e.migrate.snapshot(this.model.layout)}else this.model.migrate={properties:function t(e){return e},snapshot:function t(e){return e}}}this.validate();this.update();this.ext.model=this.model};i.setBackendApi=function(){var e=t.options.APIType||this.ext.BackendApi;var i=new e(this.model);this.backendApi=i;n.contentLoaded().then((function(t){t.setBackendApi(i)}))};i.setType=function(a,r){this.backendApi&&this.backendApi.destroy();this.ext=null;this.backendApi=null;this.hasContent=false;this.type=a;a.load().then((function(o){if(i.type!==a)return;a!==rt&&(i.error=null);function l(){i.setExtension(o);vt(t,e,i,n);if(r){s["default"].$rootScope.$broadcast("refreshPropertyPanel");s["default"].$rootScope.$broadcast("reloadExploreContent")}}if("function"===typeof o.init){var c=o.init.call(null,e,i.layout);c&&"function"===typeof c.then?c.then((function(){l()}),(function(e){i.setRenderState(st.INVALID);i.error={class:"hard-error",title:m["default"].get("Object.Invalid.Title"),message:e||m["default"].get("Object.ErrorMessage.RenderingFailed",o.type)};n.updateContent(z["a"]).then((function(n){n.onPaint(t.layout,{visible:false}).then((function(){i.setRenderState(st.RENDERED);"function"===typeof t.options.onRendered&&t.options.onRendered.call(null,e)}))}));l()})):l()}else l()}),(function(){i.setType(rt);ot()?i.error={class:"hard-error",title:m["default"].get("Object.Invalid.Title"),message:m["default"].get("Object.ErrorMessage.NotFound.Cloud.Extensions",a.type,"")}:i.error={class:"hard-error",title:m["default"].get("Object.Invalid.Title"),message:m["default"].get("Object.ErrorMessage.NotFound",a.type,"")};i.isInvalid=true;i.setObjectClass()}))};i.setModel=function(t){this.model=t;if(this.ext){this.ext.model=t;this.setBackendApi()}o.a.destroy(t);if(t){t.modifiers=o.a;t.colorSupport=J["a"]}};i.on=function(){n.contentLoaded().then((function(t){t.view&&t.view.on()}))};i.off=function(){n.contentLoaded().then((function(t){t.view&&t.view.off()}))};i.isOn=function(){return n.contentLoaded().then((function(t){if(t.view)return t.view.isOn();return null}))};i.setInteractionState=function(e){i._interactionState=e;i._inEditState=e===j["a"].EDIT;i._inAnalysisState=e===j["a"].ANALYSIS;t.options.interactionState=e;this._inEditState&&i.viewDataToggled&&i.toggleDataView();n.contentLoaded().then((function(t){e!==j["a"].ANALYSIS&&lt(i);t.setInteractionState(e);s["default"].getService("$timeout").cancel(r);r=s["default"].getService("$timeout")((function(){i.setObjectClass()}))}))};i.getInteractionState=function(){return i._interactionState};i.inAnalysisState=function(){return i._inAnalysisState};i.inEditState=function(){return i._inEditState};i.setFreeResize=function(e){t.options.freeResize=e;n.contentLoaded().then((function(t){t.setFreeResize(e)}))};i.setDirection=function(e){if(!e||t.options.direction===e)return;t.options.direction=e;n.contentLoaded().then((function(t){t.setDirection(e);i.update()}))};i.setLayout=function(t){this.layout=t;var e=t.visualization||t.qInfo&&t.qInfo.qType;var i=c["a"].getType(e);var n=i;t.extensionMeta&&t.extensionMeta.name&&(n=t.extensionMeta.name);if(t.qError){i=rt;this.error={title:"Object.Error",message:"Object.Invalid.Info"}}if(!i){i=rt;g["a"].areExtensionsAllowed()?ot()?this.error={title:"Object.Invalid.Title",message:["Object.ErrorMessage.NotFound.Cloud.Extensions",n,e]}:this.error={title:"Object.Invalid.Title",message:["Object.ErrorMessage.NotFound",n,e]}:this.error={title:"Object.Invalid.Title",message:["Object.ErrorMessage.NotFound.Security",n,e]}}if(this.ext&&this.ext.hasNewType&&this.ext.hasNewType(this,i,t)||this.type!==i){this.reset();this.setType(i,!!this.type)}this.isInvalid=i===rt;this.isLink=!this.isInvalid&&!!t.qExtendsId;this.showTitles=false!==t.showTitles;this.validate();this.update()}}function vt(t,e,i){function n(t){var e=a()(t.target);if(i.selectionsApi.ignoreOnOutside(e))return;i.selectionsApi.getDockToElement().off(".object");i.selectionsApi.confirm()}i.activateSelections=function(){if("undefined"===typeof i.ext.options.selections)return;i.inAnalysisState()&&i.selectionsApi.activate()};i.selectionsApi&&"function"===typeof i.selectionsApi.destroy&&i.selectionsApi.destroy();function r(){i.backendApi&&i.backendApi.endSelections(true);return null}i.tooltipApi={cancel:function t(){},destroy:function t(){}};i.selectionsApi={destroy:function t(){this._activatedCallbacks=[];this._deactivatedCallbacks=[];a()(window).off("onbeforeunload",r)},active:false,selectionsMade:false,_activatedCallbacks:[],_deactivatedCallbacks:[],on:function t(){},off:function t(){},ignoreOnOutside:function t(e){return!!(e.closest(".qv-selection-toolbar").length||e.closest(".selections-data-area-ui").length)},getDockToElement:function t(){return e},focusMenu:function e(){this.active&&tt["a"].focus(t.options.isPopover)},getMenuMaxHeight:function t(){return i.selectionsApi.getDockToElement().outerHeight()},getSelectionToolbarWidthOffset:function t(){return 0},refreshToolbar:function t(){tt["a"].refresh()},watchActivated:function t(e){this._activatedCallbacks.push(e);return function(){var t=this._activatedCallbacks.indexOf(e);this._activatedCallbacks.splice(t,1)}.bind(this)},activated:function o(l){this.active=true;l||i.backendApi.beginSelections();a()(window).on("onbeforeunload",r);if(!t.options.isPopover){this.getDockToElement().on("qv-outside.object",n);s["default"].$apply(t,(function(){i.setObjectClass();i.getSelectionToolbar().then((function(n){n.onMoveFocus=function(t){i.focus(t)};var a={toolbar:n,selectionsApi:i.selectionsApi,options:t.options,menuMaxHeight:i.selectionsApi.getMenuMaxHeight(),offsetWidth:i.selectionsApi.getSelectionToolbarWidthOffset()};var r=e.parent().closest(".qv-object-wrapper").length?e.parent().closest(".qv-object-wrapper"):e;tt["a"].open(r,i.selectionsApi.getDockToElement(),a)}))}))}this._activatedCallbacks.forEach((function(t){t.call(this)}),this)},watchDeactivated:function t(e){this._deactivatedCallbacks.push(e);return function(){var t=this._deactivatedCallbacks.indexOf(e);this._deactivatedCallbacks.splice(t,1)}.bind(this)},deactivated:function e(){a()(window).off("onbeforeunload",r);this.active=false;this.selectionsMade=false;i.tooltipApi.cancel();i.throbberApi&&!t.options.disableThrobber&&i.throbberApi.reset(true,1e3);if(!t.options.isPopover){i.selectionsApi.getDockToElement().off(".object");s["default"].$apply(t,(function(){i.setObjectClass();tt["a"].close();if(Object(P["b"])("ACC_SEL_MENU")){var t;null===(t=i.focus)||void 0===t?void 0:t.call(i)}}))}this._deactivatedCallbacks.forEach((function(t){t.call(this)}),this)},confirm:function t(){i.selectionsApi.deactivateSearch&&i.selectionsApi.deactivateSearch();i.backendApi.endSelections(true);i.tooltipApi.cancel();this.deactivated()},cancel:function t(){i.selectionsApi.deactivateSearch&&i.selectionsApi.deactivateSearch();i.backendApi.endSelections(false);i.tooltipApi.cancel();this.deactivated()},clear:function t(){i.backendApi.clearSelections();i.tooltipApi.cancel();this.selectionsMade=false},toggleKeyboardAccelerators:function t(){},getKeyAsToggleSelected:function t(e){return!(e.metaKey||e.ctrlKey)},search:function t(){},confirmSearch:function t(){},cancelSearch:function t(){},activate:function t(){if(this.active)return;this.activated()},notifyLockedSelections:function t(e){W["a"].showLockedFeedback(e)}};i.selectionsApi.watchDeactivated((function(){t.$emit("childSelectionActive",false)}));i.selectionsApi.watchActivated((function(){t.$emit("childSelectionActive",true)}))}function gt(t,e){e.explore={resizeCallbacks:[],resize:function t(){e.explore.resizeCallbacks.forEach((function(t){t()}))},watchResize:function t(i){e.explore.resizeCallbacks.push(i)},unwatchResize:function t(i){var n=e.explore.resizeCallbacks.indexOf(i);-1!==n&&e.explore.resizeCallbacks.splice(n,1)},destroy:function t(){e.explore.resizeCallbacks=[]}}}s["default"].directive("qvObject",[function(){return{restrict:"E",replace:true,template:p,scope:{options:"=",model:"=",object:"=?",navMenu:"=",snapshot:"=?"},controller:["$scope",function(t){var e=Object(l["a"])();this.updateContent=function(i){var n=t.object;if(n&&n.content!==i){"undefined"!==typeof n.content&&(e=Object(l["a"])());n.content=i;n.setObjectClass()}return e.promise};this.contentLoaded=function(){return e.promise};t.onInit=function(t,i,n){t instanceof x["a"]||(t=new(F["a"].extend(t))(i,n));e.resolve(t)};t.blockUI=false}],link:function t(e,i,n,r){var c={};var u;e.object=c;e.options||(e.options={});e.options.zoomEnabled=!!n.zoomObject;e.resetOptions=v["a"].extend({},e.options);Object.defineProperties(c,{hasFrame:{get:function t(){return!e.options.isPopover&&!c.isInvalid}},isReadonly:{get:function t(){return!c||c.isLink||c.isInvalid||e.options.isReadonly}},isInteractive:{get:function t(){return!!c&&e.options.interactionState!==j["a"].STATIC}},hasSoftProperties:{get:function t(){return!!this.ext&&!!this.ext.mappedSoftDefinition}}});c.getCreatePropertyHandler=function(){var t=c.model.app;return c.ext.getCreatePropertyHandler(t)};c.getPropertyPanelContent=function(){return c.loaded.then((function(){var t=c.getCreatePropertyHandler();var e=c.ext.mappedDefinition||c.ext.definition;var i=c.ext.globalChangeListeners;return{definition:e,globalChangeListeners:i,type:c.type,app:c.model.app,backendApi:c.backendApi,handler:t,iconName:c.ext.libraryInfo.icon,titleRef:"title",ext:c.ext}}))};c.getSoftPropertyContent=function(){return c.loaded.then((function(){var t=c.ext.mappedSoftDefinition||c.ext.softDefinition;return{definition:t,type:c.type,backendApi:c.backendApi}}))};c.setSnapshotData=function(t,e){return r.contentLoaded().then((function(i){return i.setSnapshotData(t,e)}))};c.getViewState=function(){return r.contentLoaded().then((function(t){return t.getViewState?t.getViewState():void 0}))};c.getPreferredSize=function(){return r.contentLoaded().then((function(t){var e=t.getPreferredSize();if(e)return e.then((function(t){if(!t)return;var e=i.find("footer");var n=i.find("header");var a=35;return{w:t.w,h:t.h+(e.height()||0)+(n.height()||0)+a+i[0].offsetTop}}));return}))};c.getSnapshotLayout=function(){return c.loaded.then((function(){return r.contentLoaded().then((function(){return H["a"].prepSnapshotData(c.model.layout,c,true,void 0,false,{rtl:"rtl"===e.options.direction,qLocaleInfo:c.model.app.layout.qLocaleInfo})}))}))};c.toggleDataView=function(){return r.contentLoaded().then((function(t){if(t.view&&"function"===typeof t.view.toggleDataView){void 0===t.view.toggled&&t.view.initDataView(i[0].parentElement);return t.view.toggleDataView().then((function(e){if(e){c.dataViewObject=t.view.getDataViewObject();c.dataViewObject.setOnBlurHandler(c.blur)}c.viewDataToggled=e}))}return l["a"].resolve()}))};c.getDropOptions=function(t,e){return c.loaded.then((function(){return r.contentLoaded().then((function(){return c.ext.getDropOptions(c,t,e)}))}))};c.canReceive=function(t){return!c.ext||!c.ext.canReceive||c.ext.canReceive(t)};c.getContextMenu=function(t,e){return r.contentLoaded().then((function(i){return i.getContextMenu(c,t,e)}))};c.getObjectMenu=function(t){return r.contentLoaded().then((function(e){return e.getObjectMenu(c,t)}))};c.getSelectionToolbar=function(){return c.loaded.then((function(){return r.contentLoaded().then((function(t){return t.getSelectionToolbar()}))}))};c.reloadContent=function(){c.ext=a.a.extend({},c.ext);e.ext=c.ext;c.loadContent();c.update()};c.canShowExploreMenu=function(){var t=this.content===V||this.content===z["a"];return!this.isInvalid&&this.hasSoftProperties&&!t};function p(t,i,n){var a=c&&e.ext&&!(e.model&&!e.model.isValid&&!e.model.isValidating);i||(a=a&&t!==V);n||(a=a&&t!==z["a"]);return a}function f(t){var i=e.ext&&e.ext.support[t];if("function"===typeof i)return i.call(null,e.layout);if("boolean"===typeof i)return i;return false}c.supportCssScaling=function(){return p(this.content)&&f("cssScaling")};c.hasValidContent=function(){return p(this.content)};c.supportSnapshot=function(){if(!p(this.content))return false;var t=e.ext&&e.ext.snapshot&&e.ext.snapshot.canTakeSnapshot;if("undefined"===typeof t)return f("snapshot");if("function"===typeof t)return t.call(null,e.layout);if("boolean"===typeof t)return t;return false};c.supportObjectInfo=function(){if(!p(this.content))return false;if(c.isInvalid)return false;return this.layout.showDetails};c.supportRefresh=function(){return p(this.content)&&f("supportRefresh")};c.supportExportData=function(){return p(this.content,false,true)&&f("exportData")};c.supportExport=function(){return p(this.content)&&f("export")&&this.type.supportExport()};c.supportSharing=function(){return p(this.content)&&f("sharing")};c.supportViewData=function(){return p(this.content)&&f("viewData")};c.supportQuickMobile=function(){return Object(P["b"])("QUICK_MOB_CHART")&&p(this.content)&&f("quickMobile")};c.setRenderState=function(t){if(c&&c.renderState!==t){c.renderState=t;e.$emit("objectRenderStateChange",t)}};c.setOnFocusHandler=function(t){c.focus=t};c.setOnBlurHandler=function(t){c&&(c.blur=t)};c.cancel=function(){c.throbberApi.requestPromise?c.model.app.global.cancelRequest(c.throbberApi.requestPromise.requestId):c.subscription.cancel();c.throbberApi.hide();c.throbberApi.isQueryCanceled=true;r.contentLoaded().then((function(t){t.view&&t.view.cancel()}));"function"===typeof e.options.onCanceled&&e.options.onCanceled.call(null)};c.retry=function(){e.model.markAsInvalid();c.throbberApi.hide();c.throbberApi.reset(true);c.throbberApi.isQueryCanceled=false;e.model.getLayout().then((function(t){var i;e.layout=t;"function"===typeof(null===(i=c)||void 0===i?void 0:i.setLayout)&&c.setLayout(t)}));r.contentLoaded().then((function(t){t.view&&t.view.retry()}))};ht(e,i,c,r);ct(e,c);ft(e,c,i,r);gt(e,c);function h(){c.update()}c._themeChangeWatcher=h;$["a"].ThemeChanged.bind(c._themeChangeWatcher);c.inSelection=function(){var t,e,i;if(null===(t=c.selectionsApi)||void 0===t?void 0:t.active)return true;if(!c.model)return false;return(null===(e=c.model.app)||void 0===e||null===(i=e.modalSelectionObject)||void 0===i?void 0:i.parent)===c.model};d["a"].load(e.options._skipRegisterExtensions).then((function(){ut(e,c);Y(e,c,r);e.$on("objectRenderStateChange",(function(t,i){e.options.disableThrobber||(i!==st.INVALID||c.inSelection()?c.throbberApi.hide():c.throbberApi.reset(true,1e3))}));e.$watch("options.disableThrobber",(function(t,e){t&&!e&&c.throbberApi&&c.throbberApi.hide()}));c.setRenderState(st.INVALID)}));c.loaded.then((function(){e.cancelled=e.model.isCancelled}));e.$watch("options.interactionState",(function(t){if(c){var e=Number.isNaN(+t)?1:t;c.setInteractionState(e)}}));e.$watch("options.direction",(function(t){c.setDirection(t)}));e.$watch("options",(function(t){t&&t.setController&&r.contentLoaded().then((function(){t.setController(c)}))}));e.$on("childSelectionActive",(function(t,e){c&&(c.childInSelection=e);t.preventDefault()}));e.titleClicked=function(){this.options._disableSelections||c._inEditState||r.contentLoaded().then((function(t){(t.view&&t.view.selections||t.$scope.interactive)&&c.activateSelections()}))};e.cancel=function(){c.cancel()};e.retry=function(){c.retry()};var g=false;e.$on("$destroy",(function(){if(g)return;g=true;s["default"].getService("$timeout").cancel(u);$["a"].ThemeChanged.unbind(c._themeChangeWatcher);if(c){var t,i;"function"===typeof c.cancel&&(null===(t=c)||void 0===t||null===(i=t.throbberApi)||void 0===i?void 0:i.isVisible)&&c.cancel();lt(c);c.selectionsApi&&"function"===typeof c.selectionsApi.destroy&&c.selectionsApi.destroy();if(c.tooltipApi){c.tooltipApi.destroy&&c.tooltipApi.destroy();c.tooltipApi=null}if(c.backendApi){c.backendApi.destroy();c.backendApi=null}c.throbberApi&&c.throbberApi.destroy();c.explore&&c.explore.destroy();o.a.destroy(c.model);c=null;e.object=null}}))}}}])},"6eqC":function(t,e,i){"use strict";var n=i("Nc9l");var a=i("AaFn");var r=i("DWZC");var o=i("P8Hz");var s=i("4nJ1");function l(t,e,i,n){var r=new a["a"];r.text=t;r.title=e;r.id=i;r.idx=n;return r}function c(t,e){var i=new a["a"];var n;i.data.qApprMaxGlyphCount=0;for(n in e)i.data[n]=e[n];t&&t.addChild(i);return i}function u(t,e){return t.labelExpRef?s["a"].getValue(e,t.labelExpRef):t.label}var d=n["a"].extend({init:function t(e){this._super();this._properties={};e&&this.refresh(e)},refresh:function t(e){this._data=e;this._qDataObject=e.qHyperCube?e.qHyperCube:e.qListObject;var i;if("K"===this._qDataObject.qMode&&this._qDataObject.qStackedDataPages&&this._qDataObject.qStackedDataPages.length>0)i=this._generatePivotTree();else{if(!("S"===this._qDataObject.qMode&&this._qDataObject.qDataPages&&this._qDataObject.qDataPages.length>0))return;i=this._generateDimensionTree()}this._dimensionTree=i?i.dimensionTree:null;this._cacheItems=i?i.cacheItems:null;this.fire("dimensionTreeChanged")},bindProperty:function t(){throw new Error("ChartContext bindProperty: Deprecated")},unBindProperty:function t(){throw new Error("ChartContext unBindProperty: Deprecated")},releaseAll:function t(){throw new Error("ChartContext releaseAll: Deprecated")},release:function t(){this._data=null;this._dimensionTree=null;this._cacheItems=null;this._qDataObject=null},_generateDimensionTree:function t(){var e=l();var i=this.getDataMatrix();var n=this._qDataObject;var s=n.qMeasureInfo;var d=n.qDimensionInfo;var p=n.qDataPages[0].qArea.qTop;var f=n.qDataPages[0].qTails;var h=s.length;var v=d.length;var g=i&&i[0]?i[0].length:0;var m;var b;var y;var x;var _;var C;var w;var q;var M;var S;var D=[];var I;var k=[];var L;var T;var E=this;q=0;for(w=0;w<v;w++)if(!d[w].qError){D[q]=w;q++}v=q;if(0===v)return null;var A=function t(e,i){for(var n=0;n<e.length;n++)if(e[n].data.qElemNo===i)return n;return-1};for(w=0;w<i.length;w++){m=i[w];x=e;var P=[];var O=[];var R=[];for(q=0;q<v;q++){b=m[q];y=d[D[q]];if(!b)return;S=b.qIsOtherCell?void 0===x.data.othersIndex?-1:x.data.othersIndex:A(x.children,b.qElemNumber);if(-1===S){_=c(x,{qElemNo:m[q].qElemNumber,qText:m[q].qText,rowIndex:p+w,type:"dimension"});_.data.qNum=m[q].qNum;if(b.qIsOtherCell){_.data.qIsOtherCell=true;_.data.qText=y.othersLabel||""}b.qIsTotalCell&&(_.data.qIsTotalCell=true);x.data.qApprMaxGlyphCount=y.qApprMaxGlyphCount;b.qIsOtherCell&&(x.data.othersIndex=x.children.length-1);I=new o["a"]([_.data.qText],null,null,null,p+w,q,_.data.qElemNo);b.qAttrDims&&y.qAttrDimInfo&&y.qAttrDimInfo.length&&b.qAttrDims.qValues.forEach((function(t,e){I.addAttributeDimension(t.qElemNo,t.qText,u(y.qAttrDimInfo[e],E._data))}));if(y.qAttrExprInfo&&y.qAttrExprInfo.length){var V=r["a"].retrieveAttrExpsValues(b.qAttrExps,y,E._data),N=V.customTooltipAttrExpsArr,z=V.customTooltipInfoAttrExpsArr,F=V.attributeExpressionArr;O=O.concat(N);R=R.concat(z);P=P.concat(F)}if(x.cacheItem){I.parent=x.cacheItem;I.parent.children.push(I);L=I.parent.getDimensions();for(T in L)I.addDimension(L[T])}_.cacheItem=I;x=_}else x=x.children[S]}I=x.cacheItem;k.push(I);for(M=0;M<h&&v+M<g;M++){_=c(x,{qText:s[M].qFallbackTitle,qNum:m[v+M].qNum,rowIndex:p+w,type:"measure"});x.data.qApprMaxGlyphCount=Math.max(x.qApprMaxGlyphCount,s[M].qApprMaxGlyphCount);I.addMeasure(_.data.qText,_.data.qNum,m[v+M].qText);C=new a["a"];C.data={qText:m[v+M].qText,qNum:m[v+M].qNum,qElemNo:m[v+M].qElemNumber,qState:m[v+M].qState};_.addChild(C)}P.forEach((function(t){I.addMeasure(t.label,t.value)}));O.forEach((function(t){I.addCustomTooltipAttribute(t)}));R.forEach((function(t){I.addCustomTooltipInfoAttributes(t)}))}f&&f[0]&&(f[0].qUp>0||f[0].qDown>0)&&(e.children[e.children.length-1].incomplete=true);return{dimensionTree:e,cacheItems:k}},_generatePivotTree:function t(){return r["a"].prepareData(this._qDataObject.qStackedDataPages[0].qData,this._qDataObject.qMeasureInfo,this._qDataObject.qDimensionInfo,this._data)},_extractProperties:function t(){throw new Error("ChartContext _extractProperties: Deprecated")},_updateProperty:function t(){throw new Error("ChartContext _updateProperty: Deprecated")},getDataMatrix:function t(){return this._qDataObject.qDataPages[0].qMatrix},getDimensionTree:function t(){return this._dimensionTree},getCacheItems:function t(){return this._cacheItems}});e["a"]=d},"70EH":function(t,e,i){"use strict";i.r(e);e["default"]='<div class="pp-nm-di qv-pp-sortable pseudo" ng-class="{ \'draggable\': isItemDraggable(item), \'dragged\': item.isDragged }">\n\n\t\x3c!-- Description --\x3e\n\t<div class="pp-nm-di__description" ng-if="showItemDescription(item)">\n\t\t{{getItemDescription(item)}}\n\t</div>\n\n\t\x3c!-- Header --\x3e\n\t<div class="pp-nm-di__header" \n\t\t ng-style="item.style"\n\t\t ng-class="{ \'draggable\': isItemDraggable(item) }">\n\n\t\t\x3c!-- Header content --\x3e\n\t\t<div class="pp-nm-di__header-content">\n\n\t\t\t\x3c!-- Header title --\x3e\n\t\t\t<div class="pp-nm-di__header-title" q-translation="Common.Values"></div>\n\n\t\t\t\x3c!-- Header icons --\x3e\n\t\t\t<i ng-if="item.markerClass" ng-class="item.markerClass"></i>\t\t\n\t\t\t<i class="lui-icon lui-icon--draggable pp-nm-di__draggable qv-pp-sortable-handle" pp-di-draggable-hover q-title-translation="Common.Move"></i>\n\t\t</div>\n\t</div>\n</div>'},"71Dx":function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("ESef");var r='<div class="pp-component pp-number-component" ng-if="visible" tcl="number">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<div ng-class="{ \'lui-input-group\': isExpressionDefinition }">\n\t\t\t<input type="text" maxlength="{{maxlength}}" spellcheck="{{!isExpression()}}" class="lui-input" ng-class="{\n\t\t\t\t\t\'lui-invalid\': invalid,\n\t\t\t\t\t\'lui-input-group__item\': isExpressionDefinition,\n\t\t\t\t\t\'lui-input-group__input\': isExpressionDefinition,\n\t\t\t\t\t\'is-expression\': isLocked()\n\t\t\t\t}"\n\t\t\t\tng-model="displayValue" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" qva-model-onkeyup\n\t\t\t\tpp-input-validator ng-readonly="isLocked()" ng-disabled="readOnly" ng-change="change()"\n\t\t\t\tpp-expression-editor="value" editor-disabled="!isLocked()" expression-type="{{expressionType}}" tid="{{key}}"/>\n\n\t\t\t<button class="lui-input-group__item  lui-input-group__button  lui-button" ng-show="isExpressionDefinition && !readOnly"\n\t\t\t\t\tpp-expression-editor="value" expression-type="{{expressionType}}"\n\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression edit-expression" ng-class="{\'active\': isExpression()}"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n</div>\n';var o={template:r,controller:["$scope",function(t){var e=function e(){return t.data};t.definition.maxlength?t.maxlength=t.definition.maxlength:t.maxlength=a["a"].name;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);n["a"].defineExpression(t,true,true)}]};var s=e["default"]=o},"7xSA":function(t,e,i){"use strict";var n=i("WwCo");var a=i("HBwF");var r=i("sYQE");var o=Math.log(10);var s=1e-12;var l=Math.log(3)/o;var c=[[2,4,6],[2,4],[3]];var u=[,[,,[[1,2]],[[1,2,3],[1,3]],[[1,2,4],[1,4]],[[1,2,4],[1,5]],[[1,2,4,6],[2,4,6],[1,3,6],[1,6]],[[1,2,4,6],[2,4,6],[1,3,6],[1,7]],[[1,2,4,8],[2,4,8],[1,8]],[[1,2,4,8],[2,4,8],[1,3,9],[1,9]],[[1,2,4,6,10],[1,2,4,10],[1,3,10],[3,10],[1,10]]],[,,,[[2,3]],[[2,3,4],[2,4]],[[2,3,4],[2,4],[2,5]],[[2,4,6],[2,6]],[[2,4,6],[2,6],[2,7]],[[2,4,8],[2,8]],[[2,4,8],[2,8],[2,9]],[[2,4,6,10],[2,4,10],[5,10],[3,10]]],[,,,,[[3,4]],[[3,4,5],[3,5]],[[3,4,5,6],[3,6]],[[3,4,5,6],[3,5,7],[3,7]],[[3,4,5,6,8],[3,5,7],[4,8],[3,8]],[[3,4,5,6,8],[3,4,6,9],[3,4,6,8],[3,6,9],[4,8],[3,9]],[[4,6,10],[5,10],[3,10]]],[,,,,,[[4,5]],[[4,5,6],[4,6]],[[4,5,6,7],[4,5,6],[4,6]],[[4,5,6,7,8],[4,5,6,7],[4,6,8],[4,8]],[[4,5,6,7,8],[4,6,9],[4,6,8],[4,8]],[[4,6,10],[5,7,9],[5,10],[4,10]]],[,,,,,,[[5,6]],[[5,6,7],[5,7]],[[5,6,7,8],[5,6,7],[6,8]],[[5,6,7,8,9],[5,6,7,8],[5,7,9],[5,9]],[[6,8,10],[5,10]]],[,,,,,,,[[6,7]],[[6,7,8],[6,8]],[[6,7,8,9],[6,7,8],[6,9]],[[6,7,8,9,10],[6,8,10],[6,10]]],[,,,,,,,,[[7,8]],[[7,8,9],[7,9]],[[7,8,9,10],[8,10],[7,10],[7,9]]],[,,,,,,,,,[[8,9]],[[8,9,10],[8,10]]],[,,,,,,,,,,[[9,10]]]];var d=[,[,,[1,2],[1,3],[1,4],[1,5,1,6],[1,6],[1,10,1,8,1,7],[1,8,1,10],[1,10,1,9]],[,,,[2,3],[2,4],[2,6,2,5],[2,6,2,8],[2,8,2,7],[2,8,1,10],[1,10,2,10,2,9],[1,10,2,10]],[,,,,[3,4,2,4],[3,6,3,5],[3,6,2,6],[2,8,3,8,3,7],[2,8,3,8,3,9],[2,10,3,10,3,9]],[,,,,,[4,5,4,6,3,5],[4,6],[4,8,4,7],[4,8],[4,10,4,9,3,9],[4,10]],[,,,,,[5,6,4,6],[5,7,4,8],[4,8,5,8,5,10],[5,10,4,10,5,9],[5,10,4,10]],[,,,,,,[6,7,6,8],[6,8],[6,10,5,10,6,9],[6,10,5,10]],[,,,,,,,[7,8,6,8],[7,9,6,10],[6,10,7,10]],[,,,,,,,,[8,10,8,9],[8,10]],[,,,,,,,,,[9,10]]];function p(t,e,i){var n=t?t.length:0;var a;var r=void 0===e?Number.MAX_VALUE:t[0]/e;for(a=1;a<n;a++)r=Math.min(r,t[a]/t[a-1]);void 0!==i&&(r=Math.min(r,i/t[n-1]));t.splice(0,0,r)}function f(t,e,i){var n;var a=t?t.length:0;for(n=0;n<a;n++)p(t[n],e,i)}function h(){var t;var e;f(c,1,10);for(t=0;t<u.length;t++)if(u[t])for(e=0;e<u[t].length;e++)u[t][e]instanceof Array&&f(u[t][e])}h();function v(){var t=true;var e=0;var i;var n;var a;var r;var o;var s=this.tickDataSpacingLog;var l=0;while(t&&e<5){s=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*s);i=this.minIsStrict?Math.ceil(this.usedDataMinLog/s):Math.floor(this.usedDataMinLog/s);n=this.maxIsStrict?Math.floor(this.usedDataMaxLog/s):Math.ceil(this.usedDataMaxLog/s);a=this.minIsStrict?this.explicitPlotMinLog:i*s;r=this.maxIsStrict?this.explicitPlotMaxLog:n*s;o=r-a;t=s/o*this.plotSize<this.minTickSpacingInPixel;e++}if(t){s=Math.ceil(this.tickDataSpacingLog);i=this.minIsStrict?Math.ceil(this.usedDataMinLog/s):Math.floor(this.usedDataMinLog/s);n=this.maxIsStrict?Math.floor(this.usedDataMaxLog/s):Math.ceil(this.usedDataMaxLog/s);a=this.minIsStrict?this.explicitPlotMinLog:i*s;r=this.maxIsStrict?this.explicitPlotMaxLog:n*s}return{plotMinLog:a,plotMaxLog:r,tickMinIndex:i,tickMaxIndex:n,tickDataSpacingNNLog:s,tickBaseValueLog:l,success:!t}}function g(){var t=true;var e=0;var i;var n;var a;var r;var o;var s;i=this.tickDataSpacingLog;n=0;var l=this.usedDataMinLogFloor;while(t&&e<5){i=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*i);n=this.minIsStrict?Math.ceil((this.usedDataMinLog-l)/i):Math.floor((this.usedDataMinLog-l)/i);a=this.maxIsStrict?Math.floor((this.usedDataMaxLog-l)/i):Math.ceil((this.usedDataMaxLog-l)/i);r=this.minIsStrict?this.explicitPlotMinLog:n*i+l;o=this.maxIsStrict?this.explicitPlotMaxLog:a*i+l;s=o-r;t=i/s*this.plotSize<this.minTickSpacingInPixel;e++}if(t){i=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*i);n=this.minIsStrict?Math.ceil((this.usedDataMinLog-l)/i):Math.floor((this.usedDataMinLog-l)/i);a=this.maxIsStrict?Math.floor((this.usedDataMaxLog-l)/i):Math.ceil((this.usedDataMaxLog-l)/i);r=this.minIsStrict?this.explicitPlotMinLog:n*i+l;o=this.maxIsStrict?this.explicitPlotMaxLog:a*i+l}return{plotMinLog:r,plotMaxLog:o,tickMinIndex:n,tickMaxIndex:a,tickDataSpacingNNLog:i,tickBaseValueLog:l,success:!t}}function m(){var t;var e=g.call(this);if(!e.success){t=v.call(this);return t}var i=this.usedDataMaxLog-this.usedDataMinLog;var n=i/(e.plotMaxLog-e.plotMinLog);if(1===n)return e;t=v.call(this);if(!t.success)return e;var a=i/(t.plotMaxLog-t.plotMinLog);var r=t.tickMaxIndex-t.tickMinIndex;var o=e.tickMaxIndex-e.tickMinIndex;if(o>r||o===r&&n>a||o===r&&n===a&&e.plotMinLog<t.plotMinLog)return e;return t}function b(t,e,i,n,a){var o=r["a"].getNiceNumber(1.1*a);var s=t?Math.ceil(i/o):Math.floor(i/o);var l=e?Math.floor(n/o):Math.ceil(n/o);var c=t||0===s?i:s*o;var u=e?n:l*o;return{plotMin:c,plotMax:u,tickSpacing:o,tickBaseValue:0}}function y(t,e){var i;for(i=0;i<t.length;i++)if(t[i]>=e)return i-1;return-1}function x(t,e){var i;for(i=t.length-1;i>=0;i--)if(t[i]<=e)return i+1;return-1}function _(t,e,i,n,a){var r;var o;r=y(t,e);o=x(t,i);!n&&void 0!==t[r+1]&&t[r+1]>e&&(r-=1);!a&&o>0&&void 0!==t[o-1]&&t[o-1]<i&&(o+=1);o<t.length&&t.splice(o,t.length-o);r>=0&&t.splice(0,r+1)}function C(t,e,i,n){var a;var o=Number.MAX_VALUE;var l=-Number.MAX_VALUE;var c;var u=r["a"].log10(i);var d=r["a"].log10(e);var p=u-d;var f=t?t.length:0;var h=new Array(f);(null===n||Number.isNaN(+n))&&(n=1.71);for(a=0;a<f;a++)h[a]=r["a"].log10(t[a]);for(a=1;a<f;a++){c=h[a]-h[a-1];o=Math.min(o,c);l=Math.max(l,c)}l=Math.max(l,Math.abs(h[0]-d));l=Math.max(l,Math.abs(u-h[f-1]));return o/p*this.plotSize>=this.minTickSpacingInPixel-s&&l/o<=n&&t.length-1<=this.maxNumIntervals}function w(t){var e;var i=Number.MAX_VALUE;var n=-Number.MAX_VALUE;var a;var o=t.mainTickValues;var s=o?o.length:0;var l=new Array(s);for(e=0;e<s;e++)l[e]=r["a"].log10(o[e]);for(e=1;e<s;e++){a=l[e]-l[e-1];i=Math.min(i,a);n=Math.max(n,a)}t.maxTickSpacing=n;t.minTickSpacing=i;t.tickSpacingRatio=n/i;t.spaceUseFactor=this.usedDataRange/(t.plotMax-t.plotMin);t.factor=t.spaceUseFactor/(t.tickSpacingRatio*t.tickSpacingRatio)}function q(t,e,i,n,a){var o;var s;var l;var c;var u=(n+i)/2;if(void 0===a){o=Math.round(u);if(o>=i&&o<=n)return Math.pow(10,o);s=Math.floor(u);if(s>=i&&s<=n)return Math.pow(10,s);l=Math.ceil(u);if(l>=i&&l<=n)return Math.pow(10,l);c=r["a"].getSmallNiceNumber(Math.max(1,e-t));return Math.ceil(t/c)*c}s=Math.pow(10,Math.floor(u));l=Math.pow(10,Math.ceil(u));if(Math.abs(s-a)<Math.abs(l-a))return s;return l}function M(t,e,i,n,a,r){var o=a?Math.ceil((t-i)/n):Math.floor((t-i)/n);var s=r?Math.floor((e-i)/n):Math.ceil((e-i)/n);var l;var c;var u=[];for(l=o;l<=s;l++){c=l*n+i;c>0&&u.push(l*n+i)}return u}function S(t,e,i,n){t.mainTickValues=e;t.plotMin=i;t.plotMax=n}function D(){if(this.usedDataMax>=10*this.usedDataMin)return 1;if(this.usedDataMaxLogFloor===this.usedDataMinLogFloor){if(this.maxIsStrict&&this.minIsStrict)return 2;return 3}return 1}function I(t){t.sort((function(t,e){return t-e}))}function k(t,e,i,n,a,r,o){var l=0;var c;var u;var d;var p;var f;var h;var v=[];for(l=0;l<t.length;l++)if(e<=t[l][0]+s){p=i.concat();for(c=n;c<a;c++)for(u=1;u<t[l].length;u++)p.push(t[l][u]*Math.pow(10,c*r+o));I(p);_(p,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);f=this.minIsStrict?this.explicitPlotMin:p[0];h=this.maxIsStrict?this.explicitPlotMax:p[p.length-1];C.apply(this,[p,f,h])&&v.push({mainTickValues:p,plotMin:f,plotMax:h})}if(0===v.length){p=i;_(p,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);f=this.minIsStrict?this.explicitPlotMin:p[0];h=this.maxIsStrict?this.explicitPlotMax:p[p.length-1];return{mainTickValues:p,plotMin:f,plotMax:h}}if(1===v.length)return v[0];var g=i.length-1;for(l=0;l<v.length;l++){d=v[l].mainTickValues.length-1;if(v[l].mainTickValues[0]===i[0]&&v[l].mainTickValues[d]===i[g])return v[l]}return v[0]}function L(t,e){var i=true;var n=Math.ceil(this.fractionMinLog);var a=Math.floor(this.fractionMaxLog);var r=0;var o;var l;var c;var u;if(t[n]&&t[n][a]){c=t[n][a];c instanceof Array||(c=t[n][c]);u=c.length;while(r<u&&i){if(e<=c[r][0]+s&&c[r].length-2<=this.maxNumIntervals){l=[];for(o=1;o<c[r].length;o++)l.push(c[r][o]*this.dataMinMagnitude);i=!C.apply(this,[l,this.usedDataMin,this.usedDataMax])}i&&r++}}i&&(l=[q(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)]);var d=this.minIsStrict?this.explicitPlotMin:l[0];var p=this.maxIsStrict?this.explicitPlotMax:l[l.length-1];return{mainTickValues:l,plotMin:d,plotMax:p}}function T(t,e){var i=this.minIsStrict?Math.ceil(this.fractionMinLog):Math.floor(this.fractionMinLog);var n=this.maxIsStrict?Math.floor(this.fractionMaxLog):Math.ceil(this.fractionMaxLog);var a;var r;var o;var l;var c;var u;var p={};var f;var h;var v;var g;var m;var b;var y;var x;var w;if(d[i]&&d[i][n]){f=d[i][n];h=f instanceof Array?f.length/2:0;p.mainTickValues=[];for(a=0;a<h;a++){v=f[2*a];g=f[2*a+1];if(t[v]&&t[v][g]){m=t[v][g];b=m.length;for(r=0;r<b;r++){y=e<=m[r][0]+s&&m[r].length-2<=this.maxNumIntervals;x=m[r][1]*this.dataMinMagnitude;w=m[r][m[r].length-1]*this.dataMinMagnitude;y=this.minIsStrict?y&&x>=this.usedDataMin:y&&x<=this.usedDataMin;y=this.maxIsStrict?y&&w<=this.usedDataMax:y&&w>=this.usedDataMax;if(y){l=[];for(o=1;o<m[r].length;o++)l.push(m[r][o]*this.dataMinMagnitude);_(l,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);c=this.minIsStrict?this.explicitPlotMin:l[0];u=this.maxIsStrict?this.explicitPlotMax:l[l.length-1];if(C.apply(this,[l,c,u])){p.mainTickValues.length<l.length&&S(p,l,c,u);break}}}}}}p.mainTickValues&&0!==p.mainTickValues.length||(p.mainTickValues=[q(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)]);l=p.mainTickValues;p.plotMin=this.minIsStrict?this.explicitPlotMin:l[0];p.plotMax=this.maxIsStrict?this.explicitPlotMax:l[l.length-1];return p}function E(t,e,i){var n=t.length;var a;if(i){for(a=n-1;a>=0;a--)if(Math.abs(t[a]-e[a]*this.dataMinMagnitude)>s)return false;return true}for(a=0;a<n;a++)if(Math.abs(t[a]-e[a]*this.dataMinMagnitude)>s)return false;return true}function A(t){var e=t.mainTickValues;var i=e.length;var n;var a;if(i<2||i>4)return;a=5*this.dataMinMagnitude;if((this.minIsStrict&&this.usedDataMin<=a||!this.minIsStrict&&this.usedDataMin>=a)&&(E.apply(this,[e,[6,10,20,40]])||E.apply(this,[e,[4,10,20,40]]))){n=e[0];e[0]=a;t.plotMin=this.minIsStrict?this.explicitPlotMin:e[0];if(!C.apply(this,[e,t.plotMin,t.plotMax])){e[0]=n;t.plotMin=this.minIsStrict?this.explicitPlotMin:e[0]}return}a=80*this.dataMinMagnitude;if((this.maxIsStrict&&this.usedDataMax>=a||!this.maxIsStrict&&this.usedDataMax<=a)&&E.apply(this,[e,[10,20,40,60],true])){n=e[i-1];e[i-1]=a;t.plotMax=this.maxIsStrict?this.explicitPlotMax:e[i-1];if(!C.apply(this,[e,t.plotMin,t.plotMax])){e[i-1]=n;t.plotMax=this.maxIsStrict?this.explicitPlotMax:e[i-1]}}}function P(t,e,i,n,a,o,s,l,c,u){var d=r["a"].calculateTicks(t,e,i,n,a,o,s,l,c,u);var p=null!==n;var f=null!==a;var h=p?n:e;var v=f?a:i;var g;var m;var y;var x=1;var _;0===d.plotMin&&(d.plotMin=p?n:e);g=d.mainTickValues;m=p?n:Math.min(e,g[0]);y=f?a:Math.max(g[g.length-1],i);while(!C.apply(this,[g,m,y])&&x<=20){d=b(p||d.tickSpacing>h,f,h,v,d.tickSpacing);g=M(h,v,d.tickBaseValue,d.tickSpacing,p,f);m=p?n:Math.min(e,g[0]);y=f?a:Math.max(g[g.length-1],i);x++}if(C.apply(this,[g,m,y])){_=r["a"].getFraction(g[0])/2;if(2===g.length&&g[1]/g[0]===2&&g[0]/2>=m&&_===Math.floor(_)){g.splice(0,0,g[0]/2);_=r["a"].getFraction(g[0])/2;g[0]/2>=m&&_===Math.floor(_)&&g.splice(0,0,g[0]/2)}}else g=[];d.mainTickValues=g;d.numLoops=x;return d}function O(){var t;var e;var i;var n;var a;var r;var o={};if(this.maxIsStrict&&this.explicitPlotMax<=this.usedDataMin){this.dataMinLog=Math.ceil(this.explicitPlotMaxLog-(this.maxNumIntervals<2?1:2));this.dataMin=Math.pow(10,this.dataMinLog)}else if(this.minIsStrict&&this.explicitPlotMin>=this.usedDataMax){this.dataMaxLog=Math.floor(this.explicitPlotMinLog+(this.maxNumIntervals<2?1:2));this.dataMax=Math.pow(10,this.dataMaxLog)}else if(this.usedDataMin===this.usedDataMax){e=this.usedDataMin;this.dataMinLog=Math.floor(this.dataMinLog);this.dataMaxLog=this.dataMinLog+1;this.dataMin=Math.pow(10,this.dataMinLog);this.dataMax=Math.pow(10,this.dataMaxLog)}this.usedDataMin=this.minIsStrict?this.explicitPlotMin:this.dataMin;this.usedDataMax=this.maxIsStrict?this.explicitPlotMax:this.dataMax;this.usedDataMinLog=this.minIsStrict?this.explicitPlotMinLog:this.dataMinLog;this.usedDataMaxLog=this.maxIsStrict?this.explicitPlotMaxLog:this.dataMaxLog;if(this.maxNumIntervals<1){S(o,[q(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog,e)],this.usedDataMin,this.usedDataMax);return o}this.tickDataSpacingLog=(this.usedDataMaxLog-this.usedDataMinLog)/this.maxNumIntervals;this.usedDataMinLogFloor=Math.floor(this.usedDataMinLog);this.usedDataMaxLogFloor=Math.floor(this.usedDataMaxLog);this.dataMinMagnitude=Math.pow(10,this.usedDataMinLogFloor);this.fractionMinLog=this.usedDataMin/this.dataMinMagnitude;this.fractionMaxLog=this.usedDataMax/this.dataMinMagnitude;var s=Math.ceil(this.usedDataMaxLog);if(this.usedDataMinLog===this.usedDataMinLogFloor&&this.usedDataMaxLog===s&&this.maxNumIntervals>=2&&this.maxNumIntervals<3&&this.tickDataSpacingLog>1&&this.tickDataSpacingLog-Math.floor(this.tickDataSpacingLog)<l){t=Math.floor((this.usedDataMinLogFloor+s)/2);n=[Math.pow(10,this.usedDataMinLogFloor),3*Math.pow(10,t),Math.pow(10,s)];_(n,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);a=this.minIsStrict?this.explicitPlotMin:n[0];r=this.maxIsStrict?this.explicitPlotMax:n[n.length-1];if(n.length>=2&&C.apply(this,[n,a,r])){S(o,n,a,r);return o}}var d=m.call(this);if(!d.success){S(o,[q(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)],this.usedDataMin,this.usedDataMax);return o}var p=d.tickMinIndex;var f=d.tickMaxIndex;var h=d.tickDataSpacingNNLog;var v=d.tickBaseValueLog;this.minIsStrict&&p--;this.maxIsStrict&&f++;var g=[];for(i=p;i<=f;i++)g.push(Math.pow(10,i*h+v));var b=Math.pow(10,this.tickDataSpacingLog);var y=D.call(this);if(2===y)return L.apply(this,[u,b]);if(3===y)return T.apply(this,[u,b]);o=k.apply(this,[c,b,g,p,f,h,v]);A.call(this,o);return o}function R(){var t;var e={};this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;var i=Math.floor(this.maxNumIntervals);var n=(this.dataMaxLog-this.dataMinLog)/i;var a=[this.usedDataMin];for(t=0;t<i;t++)a.push(Math.pow(10,this.dataMinLog+(t+1)*n));S(e,a,this.plotMin,this.plotMax);return e}var V={calculateTicksLogPositive:function t(e,i,n,a,o,s,l,c,u){var d;var p={};Number.isNaN(+a)&&(a=null);Number.isNaN(+o)&&(o=null);if(i>n){d=i;i=n;n=d}if(null!==a&&null!==o&&a>o){d=a;a=o;o=d}this.plotSize=e;this.dataMin=i;this.dataMax=n;this.explicitPlotMin=a;this.explicitPlotMax=o;this.minTickSpacingInPixel=s;this.minIsStrict=null!==a;this.maxIsStrict=null!==o;this.usedDataMin=this.minIsStrict?a:i;this.usedDataMax=this.maxIsStrict?o:n;this.usedDataRange=this.usedDataMax-this.usedDataMin;this.maxNumIntervals=e/s;this.maxNumTicks=this.maxNumIntervals+1;this.explicitPlotMinLog=this.minIsStrict?r["a"].eliminateFloatingError(r["a"].log10(a)):null;this.explicitPlotMaxLog=this.maxIsStrict?r["a"].eliminateFloatingError(r["a"].log10(o)):null;this.dataMinLog=r["a"].eliminateFloatingError(r["a"].log10(i));this.dataMaxLog=r["a"].eliminateFloatingError(r["a"].log10(n));if(!c||0===e)return R.call(this);if(this.minIsStrict&&this.maxIsStrict&&this.explicitPlotMin===this.explicitPlotMax){S(p,[this.explicitPlotMin],this.explicitPlotMin,this.explicitPlotMax);return p}var f=O.call(this);if(this.usedDataMax>=10*this.usedDataMin)return f;var h=P.apply(this,[e,i,n,a,o,s,l,c,u]);if(h.mainTickValues.length<2)return f;if(f.mainTickValues.length<2)return h;if(h.mainTickValues.length===f.mainTickValues.length){w.call(this,h);w.call(this,f);if(h.factor>f.factor)return h;return f}if(h.mainTickValues.length-1>=1.5*(f.mainTickValues.length-1)&&h.mainTickValues.length>f.mainTickValues.length)return h;return f},calculateTicks:function t(e,i,n,a,r,o,s,l,c){var u;var d;var p;var f;var h;var v;var g;Number.isNaN(+a)&&(a=null);Number.isNaN(+r)&&(r=null);if(i>n){u=i;i=n;n=u}if(null!==a&&null!==r&&a>r){u=a;a=r;r=u}if(i*n<=0){i=null===a?i:a;n=null===r?n:r}if(i>0&&n>0&&(null===a||a>0)&&(null===r||r>0)){d=V.calculateTicksLogPositive(e,i,n,a,r,o,s,l,c);d.sign=1;return d}if(i<0&&n<0&&(null===a||a<0)&&(null===r||r<0)){p=V.calculateTicksLogPositive(e,-n,-i,null===r?null:-r,null===a?null:-a,o,s,l,c);d={};d.plotMin=-p.plotMax;d.plotMax=-p.plotMin;h=p.mainTickValues;v=h?h.length:0;f=new Array(v);for(g=0;g<v;g++)f[g]=-h[v-1-g];d.mainTickValues=f;d.sign=-1;return d}return{plotMin:null===a?i:a,plotMax:null===r?n:r,mainTickValues:[]}}};var N=V;function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function j(t,e,i){e&&F(t.prototype,e);i&&F(t,i);return t}var H=function(){function t(){z(this,t);this.plotMin=null;this.plotMax=null;this.plotRange=null;this.tickMin=this.plotMin;this.tickMax=this.plotMax;this.mainValues=[];this.secondaryValues=[];this._plotSize=0;this._calculationSize=0}j(t,[{key:"setSize",value:function t(e){this._plotSize=e}},{key:"getPositionOfValue",value:function t(e){if(0===e)return this._usedDataMin>0?0:this._plotSize;var i=e>0?r["a"].log10(e):-r["a"].log10(-e);return(i-this._plotMinLog10)/this._plotRangeLog10*this._plotSize}},{key:"getNormalizedValue",value:function t(e){if(0===e)return this._usedDataMin>0?0:1;var i=e>0?r["a"].log10(e):-r["a"].log10(-e);return(i-this._plotMinLog10)/this._plotRangeLog10}},{key:"getValueOfPosition",value:function t(e){if(0===e)return 0;var i=this._plotMinLog10+this._plotRangeLog10*e/this._plotSize;if(this._usedDataMin>0)return Math.pow(10,i);return-Math.pow(10,-i)}},{key:"calculateLimits",value:function t(){this._usedDataMin=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;this._usedDataMax=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;this.plotMin=null===this._explicitPlotMin||Number.isNaN(+this._explicitPlotMin)?this._usedDataMin:this._explicitPlotMin;this.plotMax=null===this._explicitPlotMax||Number.isNaN(+this._explicitPlotMax)?this._usedDataMax:this._explicitPlotMax;this.plotRange=this.plotMax-this.plotMin;this._plotMinLog10=r["a"].log10(Math.abs(this.plotMin))*(this.plotMin<0?-1:1);this._plotMaxLog10=r["a"].log10(Math.abs(this.plotMax))*(this.plotMax<0?-1:1);this._plotRangeLog10=this._plotMaxLog10-this._plotMinLog10}},{key:"calculateTicks",value:function t(){var e=N.calculateTicks(this._calculationSize,this._usedDataMin,this._usedDataMax,this._explicitPlotMin,this._explicitPlotMax,this._minTickSpacingInPixel,this._fontHeight,this._niceNumberEnabled,this._whiteSpaceOptimizingEnabled);this.plotMin=e.plotMin;this.plotMax=e.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=e.tickMin;this.tickMax=e.tickMax;this.mainValues=e.mainTickValues;this.secondaryValues=[];this._dataSign=e.sign;this._tickSpacing=this.mainValues.length>1?this.mainValues[1]-this.mainValues[0]:this.plotMax-this.plotMin;this._plotMinLog10=this._dataSign*r["a"].log10(Math.abs(this.plotMin));this._plotMaxLog10=this._dataSign*r["a"].log10(Math.abs(this.plotMax));this._plotRangeLog10=this._plotMaxLog10-this._plotMinLog10;0===this.mainValues.length&&this.mainValues.push(e.minTickValue);0===this._tickSpacing&&(this._tickSpacing=1)}},{key:"getValues",value:function t(){return{mainValues:this.mainValues,secondaryValues:this.secondaryValues}}}]);return t}();var $=H;var B=i("P2vc");var W=i("4nJ1");var G=i("tnCi");var U=i("hpzB");var Y=i("MoEg");var J=i("R0oC");var K=1;var Z={autoStart:false,duration:500,easing:"easeInOut"};function Q(t){return t.some((function(t){return null===t}))}function X(t,e){var i=0;var n=t[this._isVertical?"height":"width"];var a=0;var r;var o;var s=this._style;this._isVertical?n-=this._padding.top+this._padding.bottom:n-=this._padding.left+this._padding.right;if(this.isRadial())i=2*Math.sin(this._relevantAngle/4)*this._fontHeight*s.label.lineHeight;else if(this._isVertical){this._calculateScale(n);r=this._formatter;o=this._renderer;if(r){var l=this._scale.getValues().mainValues.map((function(t){return o.getTextWidth("".concat(r.formatValue(t),"ml"),s.label.font)}));a=Math.max.apply(null,l.length?l:[0])}i=Math.min(e[this._isVertical?"width":"height"]/3,a<this.outerRect.width/2?a:this.outerRect.width/3)}else i=this._fontHeight*s.label.lineHeight;this._wantedLabelSpacePerLevel=i;return i}var tt={onProgress:function t(){this._updateTickPositions();this.invalidateDisplay();this.fire("changed")},on:function t(){this._tickTween.on();this._linearTween.on()},off:function t(){this._tickTween.off();this._linearTween.off()},to:function t(){this._linearTween.stop().to({plotMin:this._scale.plotMin,plotMax:this._scale.plotMax,plotRange:this._scale.plotRange});this._tickTween.stop().to({ticks:this.ticks})},from:function t(){this._linearTween.stop().from({plotMin:this._scale.plotMin,plotMax:this._scale.plotMax,plotRange:this._scale.plotRange});this._tickTween.stop().from({ticks:this.ticks})},start:function t(){if(this._useTransition&&this._linearTween.willStart()){this._tickTween.start();this._linearTween.start()}},end:function t(){if(this._useTransition){this._tickTween.end();this._linearTween.end()}},stop:function t(){this._tickTween.stop();this._linearTween.stop()}};function et(){if(this._useTimeScaling)return 0;var t;var e;var i;var n=this._formatter;if(n){t=n.pattern;e=n.thousandDelimiter;i=n.decimalDelimiter;switch(t){case"#".concat(e,"##0"):return 1;case"#".concat(e,"##0").concat(i,"0"):return.1;case"#".concat(e,"##0").concat(i,"00"):case"0%":return.01;case"0".concat(i,"0%"):return.001;case"0".concat(i,"00%"):return 1e-4;default:return 0}}return 0}var it=n["a"].extend("ContinuousAxis",{init:function t(){this._super.apply(this,[].slice.call(arguments));this._scaleDetails={showExplicitMinMax:true,niceNumberEnabled:true,tickMultiplier:1};this.ticks=[];this.minorTicks=null;this._tickDates=[];this._minorTickDates=[];this._explicitLabels=[];this._defaultFormatter={formatValue:function t(e){return String(e)},format:function t(e){return String(e)}};this._formatter=this._defaultFormatter;this._useLogScaleIfPossible=false;this._cacheItems=null;this._useTransition=false;this._selectedRanges=[];this._initScales();this._linearTween=new G["a"](this._scale,{},Z).progress(tt.onProgress.bind(this));this._tickTween=new G["a"](this,{},Z)},_initScales:function t(){this._logarithmicScale=new $;this._linearScale=new a["a"];this._scale=this._linearScale},setSelectableShapes:function t(e){this._cacheItems=e},getDiscreteSpacing:function t(){return 4},updateSize:function t(){this._super();this._calculationSize=this._plotSize;this._updateScaleAndTicks();this._scale.setSize(this._plotSize);this._updateTickPositions();tt.to.call(this);if(this._changed){this._changed=false;tt.start.call(this)}else tt.end.call(this)},getPlotSize:function t(){return this._plotSize},calculateValuePositionMappingInfo:function t(){this._scale.setSize(this._plotSize);this._scale._calculationSize=this._plotSize;this._scale.calculateLimits()},setUseTransition:function t(e){this._super(e);tt[e?"on":"off"].call(this)},preRelevantSizeCalculation:function t(){this._super();this._areLabelsVisible=this.isVisible(this._layoutMode)&&this._showLabels},calculatePreliminaryLabelSpace:function t(e){var i=0;this._areLabelsVisible&&(i=X.call(this,e,e));return{relevantLabelSize:i||0,relevantSpacing:0}},calculateLabelSpace:function t(e,i,n){var a=0;this._calculateScale(this._calculationSize);this._areLabelsVisible&&(a=X.call(this,n||e,e));return{relevantLabelSize:a||0,relevantSpacing:0}},_getLabels:function t(e,i){var n=e?e.length:0;var a;var r=[];var o=[];var s=[];var l=[];var c=[];var u=[];var d;var p;e.forEach((function(t){d=this.getPositionOfValue(t.value);d=U["a"].roundToHalf(d);l.push(d);s.push(t.value);c.push("opacity"in t?t.opacity:1);r.push("".concat(t.value));o.push(t.qualifiedLabel)}),this);if(n<=1)u=[this._plotSize];else if(i){p=this.yMirrorMode?this._padding.left+this._plotSize-l[0]:l[0];u[0]=Math.abs(l[1]-l[0])+p;for(a=1;a<e.length-1;a++)u.push(Math.abs(l[a]-l[a-1]));u[a]=this.yMirrorMode?l[a]:this._padding.left+this._plotSize-l[a]}else{p=this.yMirrorMode?this._padding.left+this._plotSize-l[0]:l[0];u[0]=Math.abs(l[1]-l[0])/2+p;for(a=1;a<e.length-1;a++)u.push(Math.abs(l[a]-l[a-1])/2+Math.abs(l[a+1]-l[a])/2);p=this.yMirrorMode?l[a]:this._padding.left+this._plotSize-l[a];u[a]=Math.abs(l[a]-l[a-1])/2+p}return{values:s,widths:u,positions:l,opacities:c,labels:r,labelMode:K,labelSpace:this._wantedLabelSpacePerLevel,qualifiedLabels:o[0]?o:null,labelsBetweenTicks:i}},_updateTickPositions:function t(){var e;var i;for(i=0;i<this.ticks.length;i++){e=this.getPositionOfValue(this.ticks[i].value);this.ticks[i].position=U["a"].roundToHalf(e)}for(i=0;i<this.minorTicks.length;i++){e=this.getPositionOfValue(this.minorTicks[i].value);this.minorTicks[i].position=U["a"].roundToHalf(e)}this._initLevels();this._updateTickFormatting(this._levels,this._formatter);if(this.indicators)for(i=0;i<this.indicators.positions.length;i++){e=this.getPositionOfValue(this.indicators.values[i]);this.indicators.positions[i]=U["a"].roundToHalf(e)}this._snapTicksAvgWidth=U["a"].getAvgTickWidth(this.indicators?this.indicators.positions:this._levels[0].positions)||this._plotSize},_initLevels:function t(){this._levels=[this._getLabels(this.ticks,false)]},_calculateScale:function t(e){if(0===e)return;var i=this._scaleDetails;var n=Number.isNaN(+i.realDataMin)?i.dataMin:i.realDataMin;var a=Number.isNaN(+i.realDataMax)?i.dataMax:i.realDataMax;var r=Number.isNaN(+i.explicitPlotMin)||null===i.explicitPlotMin?n:i.explicitPlotMin;var o=Number.isNaN(+i.explicitPlotMax)||null===i.explicitPlotMax?a:i.explicitPlotMax;var s;s=this.isRadial()?96:Math.max(96,this._getApproximateLabelWidth(r,o));var l=this.isVertical()?4*this._fontHeight:s;var c=Math.max(2,e/l/i.tickMultiplier+1);l=e/(c-1);if(this._useLogScaleIfPossible&&r*o>0&&n*a>0){this._scale=this._logarithmicScale;this.setUseTransition(false)}else this._scale=this._linearScale;i.usedDataMin=n;i.usedDataMax=a;i.minTickSpacingInPixel=l;i.minTickDataSpacing=et.call(this);i.plotSize=this._plotSize;i.calculationSize="undefined"!==typeof e?e:this._calculationSize;i.fontHeight=this._fontHeight;Object.keys(i).forEach((function(t){this._scale["_".concat(t)]=i[t]}),this);this._scale.calculateTicks()},_getApproximateLabelWidth:function t(e,i,n){var a=this._formatter;var r=this._renderer;var o=this._style.label.font;if(!a)return 0;return Math.max.apply(null,[e,i,(i-e)/2].map((function(t){return r.getTextWidth(a.formatValue(t,n),o)})))},_generateTickObjects:function t(e,i){var n=e.getValues();this.ticks=U["a"].getTicks(n.mainValues,this._padding,i);this.minorTicks=U["a"].getTicks(n.secondaryValues,this._padding,i);this._tickDates=n.mainDates;this._minorTickDates=n.secondaryDates},_updateTickFormatting:function t(e,i){for(var n=0;e[0]&&n<e[0].values.length;n++)e[0].labels[n]=i?i.formatValue(e[0].values[n]):e[0].values[n]},setPlotMin:function t(e){this._scaleDetails.explicitPlotMin="number"===typeof e?e:null;this.invalidateProperties("setPlotMin")},getPlotMin:function t(){return this._scale.plotMin},setPlotMax:function t(e){this._scaleDetails.explicitPlotMax="number"===typeof e?e:null;this.invalidateProperties("setPlotMax")},getPlotMax:function t(){return this._scale.plotMax},setTickMultiplier:function t(e){this._scaleDetails.tickMultiplier=e||1;this.invalidateProperties("setTickMultiplier")},setSpacingMode:function t(e){this._scaleDetails.spacingMode=e;this.invalidateProperties("setSpacingMode")},getSpacingMode:function t(){return this._scaleDetails.spacingMode},setShowExplicitMinMax:function t(e){this._scaleDetails.showExplicitMinMax=e;this.invalidateProperties("setShowExplicitMinMax")},setLogScale:function t(e){this._useLogScaleIfPossible=e;this.invalidateProperties("setLogScale")},getLogScale:function t(){return this._scale===this._logarithmicScale},numberFormat:function t(e,i){if(this._discrete)return e;return W["a"].numberFormat(e,i||this._precision,this._exponentUsed)},format:function t(e){if(this._discrete||!this._formatter)return"".concat(e);return this._formatter.format(e,this._formatPattern)},formatValue:function t(e){if(this._discrete||!this._formatter)return"".concat(e);return this._formatter.formatValue(e)},_transition:function t(){this._onAnimatitonEnd()},setDataRangeTransition:function t(e){this._transitionEnabled=e},setDataRange:function t(e,i){this._scaleDetails.dataMin=e;this._scaleDetails.dataMax=i;this.invalidateDisplay("setDataRange");this.invalidateProperties("setDataRange");return this},setRealDataRange:function t(e,i){this._scaleDetails.realDataMin=e;this._scaleDetails.realDataMax=i;this.invalidateProperties("setRealDataRange")},getDataMin:function t(){return this._scaleDetails.dataMin},getDataMax:function t(){return this._scaleDetails.dataMax},setNiceNumberEnabled:function t(e){if(this._scaleDetails.niceNumberEnabled===e)return;this._scaleDetails.niceNumberEnabled=e;this.invalidateProperties("setNiceNumberEnabled")},setWhiteSpaceOptimizingEnabled:function t(e){this._scaleDetails.whiteSpaceOptimizingEnabled=e;this.invalidateProperties("setWhiteSpaceOptimizingEnabled")},getLevels:function t(){return this._levels},updateFormatter:function t(){if(this.isDimension)this._formatter=this.dimensionFormatter||this._defaultFormatter;else{var e=this.getType().indices;this._formatter=1===e.length&&this.measureFormatters.length&&!Q(this.measureFormatters)?this.measureFormatters[e[0]]:this.combinedMeasuresFormatter||this._defaultFormatter}this._formatter.prepare&&this._formatter.prepare()},_onAnimatitonEnd:function t(){this._super();this.rect.width>0&&this.calculateLabelSpace(this.rect)},_updateProperties:function t(){tt.from.call(this);this._changed=this._oldIsVertical===this.isVertical()&&"number"===typeof this._scale.plotRange&&!Number.isNaN(+this._scale.plotRange);this._oldIsVertical=this.isVertical();this.updateFormatter();this._isSizing||this._updateScaleAndTicks()},_updateScaleAndTicks:function t(){this._calculateScale(this._calculationSize);this._generateTickObjects(this._scale,this._plotSize);this._updateTickPositions()},clear:function t(){this._linearTween.end();this._tickTween.end();this._super()},getWidthOfValue:function t(){return 1},getSnapTicksAvgWidth:function t(){return this._snapTicksAvgWidth},getPositionOfValue:function t(e){var i;var n=this._scale.plotMin;var a=this._scale.plotRange;i=0===a?e>n?100*this._plotSize:e<n?100*-this._plotSize:this._plotSize/2:this._scale.getPositionOfValue(e);(this._isVertical&&!this._reverse||!this._isVertical&&(this._reverse||this.yMirrorMode))&&(i=this._plotSize-i);return i+this._padding[this._isVertical?"top":"left"]},getNormalizedValue:function t(e){var i=this._scale.plotMin;var n=this._scale.plotRange;if(0===n){if(e>i)return 1;if(e<i)return 0;return.5}return this._scale.getNormalizedValue(e)},getPositionOfNormalizedValue:function t(e){var i=this._scale.plotMin;var n=this._scale.plotMax;return this.getPositionOfValue(e*(n-i)+i)},getValueOfPosition:function t(e){if(this._plotSize<=0)return NaN;e-=this._padding[this._isVertical?"top":"left"];(this._isVertical&&!this._reverse||!this._isVertical&&(this._reverse||this.yMirrorMode))&&(e=this._plotSize-e);return this._scale.getValueOfPosition(e)},getAngleOfValue:function t(e){return B["a"].getAngleOfNormalizedValue((e-this._scale.plotMin)/(this._scale.plotMax-this._scale.plotMin),this)},getAngleOfNormalizedValue:function t(e){return B["a"].getAngleOfNormalizedValue(e,this)},isLabelSelected:function t(e,i){return this._selectedRanges.some((function(t){return t.min<=e&&t.max>=i}))},setSelectedRanges:function t(e){this._selectedRanges=e;this._updateTickPositions()},getLabelFromPoint:function t(e){if(this.isVertical())return null;var i=1;var n="far"===this.getAlignment()?1:-1;var a=(i+this._style.label.margin)*n;var r="near"===this.getAlignment()?this.rect.height-1:0;r+=a;var o=null;var s;for(s=0;s<this._levels.length;++s){r+=this._levels[s].labelSpace*n;if(e.y*n<r*n){o=this._levels[s];break}}if(!o)return null;for(s=0;s<o.labels.length;++s){var l=o.positions[s];var c=o.positions[s+1];var u=e.x>=l&&e.x<c||e.x<=l&&e.x>c;if(u)return{label:o.labels[s],start:o.values[s],end:o.values[s+1]}}return null}});var nt=e["a"]=it},"8H7g":function(t,e,i){"use strict";var n=i("SOxp");var a=i("4nJ1");var r=i("IVN8");var o=i("/Zhp");var s=n["a"].extend("SortableItemList",{init:function t(e,i){this.items=[];this.disabled=false;this.typeFlag=e||1;this.locked=false;Object.keys(i||{}).forEach((function(t){this[t]=i[t]}),this)},addSortableItem:function t(e,i){Object.defineProperty(e,"__sortableItem__",{configurable:false,enumerable:true,writable:true,value:{typeFlag:i||1}});this.items.push(e)},moveItem:function t(e,i){this.items.splice(i,0,this.items.splice(e,1)[0])},getIndexByItem:function t(e){return this.items.indexOf(e)},get:function t(e){return this.items.filter(e||function(){return true})},getLockedIndices:function t(){return this.get((function(t){return!!(t.__sortableItem__.typeFlag&o["a"].TYPEFLAG_LOCKED)})).map((function(t){return this.getIndexByItem(t)}),this)},reset:function t(){this.items.length=0;this.disabled=false},isEmpty:function t(){return 0===this.items.length},setLocked:function t(e){this.locked=e}});Object.defineProperties(s.prototype,{length:{get:function t(){return this.items.length}}});var l=r["a"].extend("SortableItemLists",{init:function t(){this._super.apply(this,arguments);this.lists=[];this.dragPlaceholder=null},addPlaceholder:function t(e){var i=this.getList(e);var n=i?i.items.indexOf(e):-1;this.dragPlaceholder=a["a"].extend(true,{},e);this.dragPlaceholder.id="placeholder";this.dragPlaceholder.__sortableItem__.typeFlag=o["a"].TYPEFLAG_PLACEHOLDER;this.dragPlaceholder.style={opacity:"0.3"};i&&i.items.splice(n,0,this.dragPlaceholder);return this.dragPlaceholder},removePlaceholder:function t(){if(!this.dragPlaceholder)return;var e=this.getList(this.dragPlaceholder);var i=e?e.items.indexOf(this.dragPlaceholder):-1;if(-1!==i){e.items.splice(i,1);this.dragPlaceholder=null}},getPlaceholder:function t(){return this.dragPlaceholder},createList:function t(e,i){var n=new s(e,i);this.lists.push(n);return n},reset:function t(){this.lists.forEach((function(t){t.reset()}))},getList:function t(e){return this.lists.filter((function(t){return-1!==t.items.indexOf(e)}))[0]},disable:function t(e){this.lists.forEach((function(t){t.disabled=!(e.__sortableItem__.typeFlag&t.typeFlag)}))},enable:function t(){this.lists.forEach((function(t){t.disabled=false}))},getIndexOfItem:function t(e){var i=this.getList(e);var n=i?i.items.indexOf(e):-1;return n},moveItem:function t(e,i){var n=this.getList(e);var a=this.getList(i);if(!n||!a)return;var r=a.items.indexOf(i);var o=n.items.indexOf(e);n.items.splice(o,1);a.items.splice(r,0,e)},onBegin:function t(e,i){this.addPlaceholder(e,i);this.disable(e)},onEnter:function t(e,i){var n=this.getList(e);var a=n.getLockedIndices();if(e===this.dragPlaceholder)return;if(i===o["a"].ENTER_BEFORE||i===o["a"].ENTER_AFTER){var r=this.getList(this.dragPlaceholder);if(!r||!n)return;var s=r.getIndexByItem(this.dragPlaceholder);r.items.splice(s,1);var l=n.getIndexByItem(e);l+=i===o["a"].ENTER_AFTER?1:0;n.items.splice(l,0,this.dragPlaceholder)}else this.moveItem(this.dragPlaceholder,e);var c=n.getLockedIndices();a.forEach((function(t,e){n.moveItem(c[e],t)}))},onEnterList:function t(e){if(e.disabled||e.locked)return;var i=this.getList(this.dragPlaceholder);if(!i)return;var n=i.getIndexByItem(this.dragPlaceholder);i.items.splice(n,1);e.items.push(this.dragPlaceholder)},onMove:function t(e){if(-1===this.getIndexOfItem(e)){this.onCancel();return false}var i=this.dragPlaceholder;this.moveItem(e,i);this.removePlaceholder();this.enable();return true},onMoveToList:function t(e,i){var n=this.getList(e);if(n&&!(i.disabled||i.locked)){var a=n.items.indexOf(e);if(n===i){this.onMove(e,this.dragPlaceholder);return true}n.items.splice(a,1);i.items.push(e)}this.removePlaceholder();this.enable();return!!n},onCancel:function t(){this.removePlaceholder();this.enable()},allowEnter:function t(e,i){var n=this.getList(e);return void 0!==n&&!n.disabled&&!n.locked&&!!(i.__sortableItem__.typeFlag&n.typeFlag)},allowEnterList:function t(e,i){return!e.disabled&&!e.locked&&!!(i.__sortableItem__.typeFlag&e.typeFlag)}});l.create=function(t){var e=l.extend(t||{});t=new e(t&&t.options);return t};e["a"]=l},"8fQa":function(t,e,i){"use strict";var n=function t(e){return window.setTimeout(e,1e3/60)};var a=function t(e){return window.clearTimeout(e)};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||n;var o=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame||a;e["a"]={request:r===n?n:r.bind(window),cancel:o===a?a:o.bind(window)}},"9AZI":function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-nodata-component" ng-if="visible" tcl="nodata">\n\t<span q-translation="Common.NoData"></span>\n</div>';var r={template:a,controller:["$scope",s]};var o=e["default"]=r;function s(t){n["a"].defineVisible(t,t.args.handler)}},"9Bsw":function(t,e,i){"use strict";var n=i("TmNk");var a=i.n(n);var r=i("sWge");var o=i("6uJb");var s=i("oxue");function l(){this.titles={}}l.prototype.getDimensionTitle=u;l.prototype.getMeasureTitle=d;l.prototype.resetTitles=p;var c=l;function u(t,e,i){b(this);return f.call(this,t,e,i,true)}function d(t,e,i){b(this);return f.call(this,t,e,i,false)}function p(){this.titles={}}function f(t,e,i,n){var a=h(t,this.titles);if(a)return a.promise;a=v(t,this.titles);a.promise=g(t,e,i,n);return a.promise}function h(t,e){var i=m(t);return e[i]}function v(t,e){var i=m(t);var n={id:i,promise:null};e[i]=n;return n}function g(t,e,i,n){var l="H"===t.qDef.qGrouping;var c=!!t.qLibraryId;if(l)return r["a"].when(t.qData.title);if(c){var u=n?e.getDimensionList:e.getMeasureList;return u.call(e).then((function(e){var a=n?s["a"].findLibraryDimension:s["a"].findLibraryMeasure;var r=a(t.qLibraryId,e);var l=r&&r.qData.labelExpression;if(!r)return o["default"].get(n?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure");if(!i&&l)return l;return r.qData.title}))}var d=t.qDef.qLabelExpression;var p=!!d;if(p){if(i)return r["a"].when(d);return e.evaluate(d)}var f;if(n){var h=t.qDef.qFieldLabels[0];f=h||t.qDef.qFieldDefs[0]}else f=t.qDef.qLabel||a.a.measureBase.getExpression(t);return r["a"].when(f)}function m(t){return t.qDef.cId}function b(t){if(!t)throw new Error("AlternativeTitleRetriever: Called without a context")}var y={create:_};var x=e["a"]=y;function _(){return new c}},"9pi8":function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("2Hli");var r='<div class="pp-component pp-media-component" ng-if="visible" tcl="media">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\t<div class="value">\n\t\t<div class="placeholder">\n\t\t\t<button ng-if="!readOnly" class="lui-overlay-button select-icon" qva-activate="openMediaLibrary()"\n\t\t\t\t\tq-title-translation="{{tooltip.select}}">\n\t\t\t\t<span class="lui-overlay-button__icon  lui-icon  lui-icon--image"></span>\n\t\t\t</button>\n\t\t\t<img ng-show="value" ng-src="{{mediaUrl}}" />\n\t\t\t<button ng-if="value && !readOnly" class="lui-overlay-button lui-overlay-button--small remove-icon"\n\t\t\t\tq-title-translation="{{tooltip.remove}}" qva-activate="save(null)">\n\t\t\t\t<span class="lui-overlay-button__icon  lui-icon  lui-icon--close  lui-icon--small"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n';var o=i("k9vo");var s=i("+Kna");var l={template:r,controller:["$scope",function(t){var e=function e(){return t.data};var i="function"===typeof t.definition.layoutRefFn?t.definition.layoutRefFn(t.data,t.args):t.definition.layoutRef;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);n["a"].defineCustom(t,t.args.handler,"tooltip");t.openMediaLibrary=function(){s["a"].show({onCancel:function e(i){i&&t.save(null)},onConfirm:function e(i,n){t.save(n)},selectedFile:a["a"].getValue(t.args.layout,i)})};t.update=function(){var e=a["a"].getValue(t.args.layout,i);if(e){e=o["a"].stripBasePath(e);t.mediaUrl=o["a"].addBasePath(e)}else t.mediaUrl=""};t.save=function(e){if(e){e=o["a"].stripBasePath(e);if(e!==t.value){t.value=e;t.$emit("saveProperties")}}else{t.value="";t.$emit("saveProperties")}};t.update();t.$on("layoutchanged",(function(){t.update()}))}]};var c=e["default"]=l},A3HI:function(t,e,i){"use strict";var n=i("TmNk");var a=i.n(n);var r=i("4nJ1");var o=i("X8RK");var s=i("mWu2");var l=i("sWge");var c=i("6uJb");var u=i("obmW");function d(t,e){if(t.qDef){if(e.qMeasure.qNumFormat&&!u["a"].isUsingMasterNumberFormat(t.qDef)){var i={qNumFormat:t.qDef.qNumFormat,numFormatFromTemplate:t.qDef.numFormatFromTemplate,isCustomFormatted:t.qDef.isCustomFormatted};t.qDef=r["a"].extend(true,{},t.qDef,e.qMeasure,i)}else t.qDef=r["a"].extend(true,{},t.qDef,e.qMeasure);t.qDef.quarantine&&delete t.qDef.quarantine;t.qDef.baseColor&&delete t.qDef.baseColor;t.qDef.coloring&&delete t.qDef.coloring}else if(void 0!==t.qExpression){t.qExpression=e.qMeasure.qDef;t.qLabel=e.qMeasure.qLabel;t.qLabelExpression=e.qMeasure.qLabelExpression}else t.qExpr=e.qMeasure.qDef;t.qLibraryId="";a.a.initBase(t)}function p(t){return o["a"].get(a.a.measureBase.getLibraryId(t)).then((function(e){return e.getProperties().then((function(e){d(t,e)}))}))}function f(t){var e=new l["a"];s["default"].getService("qvConfirmDialog").show({message:c["default"].get("Measure.Linked.BreakLinkDialog.Text"),icon:"link"}).closed.then((function(i){i?p(t).then((function(){e.resolve()}),(function(){e.reject()})):e.reject()}));return e.promise}e["a"]={breakLink:d,showBreakLinkDialog:f}},AaFn:function(t,e,i){"use strict";var n=i("0vQd");var a;var r=n["a"].extend("TreeNode",{addChild:function t(e){if(!e||!(e instanceof n["a"]))throw new TypeError("Expecting a Node as argument, but got ".concat(e));if(e===this)throw new Error("Can not add itself as child!");if(e._children&&e._children.length&&this.ancestors.indexOf(e)>=0)throw new Error("Can not add an ancestor as child!");e._parent&&e._parent!==this&&e._parent.removeChild(e);if(e._pushed){a=this._children.indexOf(e);a>=0&&this._children.splice(a,1)}e._pushed=true;this._children.push(e);e._parent=this;e._ancestors=null;return this},addChildren:function t(e){var i;var n=e?e.length:0;for(i=0;i<n;i++)this.addChild(e[i]);return this},removeChild:function t(e){a=this._children.indexOf(e);if(a>=0){this._children.splice(a,1);e._parent=null;e._ancestors=null}return this},removeChildren:function t(e){var i;var n;if(!this._children)return this;if(e){n=e.length;for(i=0;i<n;i++)this.removeChild(e[i])}else while(this._children.length)this.removeChild(this._children[0]);return this}});e["a"]=r},Adu7:function(t,e,i){"use strict";i.r(e);var n=i("mXGw");var a=i.n(n);var r=i("xARA");var o=i("W0B4");var s=i.n(o);var l=i("jr/W");var c=i("4nJ1");var u=i("6uJb");var d=i("acVu");function p(t,e){return m(t)||g(t,e)||h(t,e)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){if(!t)return;if("string"===typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(t,e)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function g(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[];var n=true;var a=false;var r=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){i.push(s.value);if(e&&i.length===e)break}}catch(t){a=true;r=t}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw r}}return i}function m(t){if(Array.isArray(t))return t}var b=function t(e){var i=Object(n["useState"])(""),r=p(i,2),o=r[0],s=r[1];var f=e.options.filter((function(t){return t.label.toLocaleLowerCase().indexOf(o.toLocaleLowerCase())>-1}));Object(n["useEffect"])((function(){e.open&&setTimeout((function(){document.getElementById("".concat(e.alignId,"-input")).focus()}))}));return a.a.createElement(l["j"],{className:"pp-searchable-list-popover",alignTo:document.getElementById(e.alignId),show:e.open,onOutside:e.closePopover},a.a.createElement(l["j"].Header,{className:"pp-searchable-list-popover__header"},a.a.createElement(l["j"].Title,{className:"pp-searchable-list-popover__title"},a.a.createElement(l["g"],{id:"".concat(e.alignId,"-input"),value:o,onChange:function t(e){s(e.target.value)}}))),a.a.createElement(l["j"].Body,{className:"pp-searchable-list-popover__body"},a.a.createElement(l["i"],{className:"pp-searchable-list-popover-content"},f.length?a.a.createElement(l["i"].Header,null,a.a.createElement(l["i"].Text,null,e.listHeader)):a.a.createElement("div",{className:"object-add-popover-nohits"},u["default"].get("Toolbox.Search.Nohits")),f.length>0&&f.map((function(t){return a.a.createElement(l["i"].Item,{key:t.value||"undefined",onClick:function i(){s("");e.selectValue(t)}},Object(d["b"])("SHEET_SHOW_CONDITION")&&!c["a"].evaluateCondition(t.showCondition)?a.a.createElement(l["f"],{className:"show-hide-icon lui-button__icon lui-icon lui-icon--view-disabled",title:u["default"].get("Object.Container.FalseShowCondition")}):"",a.a.createElement(l["i"].Text,null,t.icon&&a.a.createElement(l["f"],{className:"pp-searchable-popover-content__icon",name:t.icon})," ",t.label))})))))};b.propTypes={alignId:s.a.string.isRequired,options:s.a.array.isRequired,open:s.a.bool.isRequired,listHeader:s.a.string.isRequired,closePopover:s.a.func.isRequired,selectValue:s.a.func.isRequired};var y=b;var x=i("CyFZ");var _=i("wIyQ");var C=i("MGTR");function w(t,e){return I(t)||D(t,e)||M(t,e)||q()}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(t,e){if(!t)return;if("string"===typeof t)return S(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S(t,e)}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function D(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[];var n=true;var a=false;var r=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){i.push(s.value);if(e&&i.length===e)break}}catch(t){a=true;r=t}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw r}}return i}function I(t){if(Array.isArray(t))return t}function k(t){k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return k(t)}var L=function t(e){var i=e.data,n=e.options,a=e.reference;var r=c["a"].getValue(i,a);if(!r)return"";if("object"===k(r))return r.qStringExpression.qExpr;var o=n.find((function(t){return t.value===r}));if(!o)return r;return o.label};var T=function t(e){var i=e.data,r=e.options,o=e.def,s=e.saveValue,c=e.listHeader,d=e.reference;var p=Object(n["useState"])(false),f=w(p,2),h=f[0],v=f[1];var g=Object(n["useState"])(L({data:i,options:r,reference:d})),m=w(g,2),b=m[0],q=m[1];Object(n["useEffect"])((function(){var t=function t(){return v(false)};_["a"].on("start",t);return function(){return _["a"].off("start",t)}}));Object(n["useEffect"])((function(){var t="".concat(d.replace(/\./g,"-")).concat(i.cId?"-".concat(i.cId):"");C["a"].subscribe(t,(function(t){var e="string"===typeof t?t:t.qStringExpression.qExpr;var i=r.find((function(t){return t.value===e}));var n=i&&i.label||e;n!==b&&q(n)}));return function(){return C["a"].unsubscribe(t)}}));var M=function t(e){q(e);if(e.startsWith("="))s({qStringExpression:{qExpr:e}});else{var i;var n=r.find((function(t){return t.label===e}));var a=null!==(i=null===n||void 0===n?void 0:n.value)&&void 0!==i?i:e;s(a)}};var S=function t(){x["a"].show({expr:!b.length||b.startsWith("=")?b:"='".concat(b,"'"),title:"Expression.Dialog.Edit.Title"}).then((function(t){M(t.startsWith("=")?t:"=".concat(t))}))};var D=function t(e){q(e.label);v(false);s(e.value)};return a.a.createElement("div",{className:"pp-component pp-string-component pp-expression-with-dropdown"},a.a.createElement("div",{className:"label"},u["default"].get(o.translation||o.label)),a.a.createElement("div",{className:"value"},a.a.createElement(l["h"],null,a.a.createElement(l["h"].Input,{value:b,onChange:function t(e){q(e.target.value)},onBlur:function t(){M(b)},disabled:o.dropdownOnly}),o.expressionType?a.a.createElement(l["h"].Button,{onClick:S},a.a.createElement(l["f"],{name:"expression",className:b.startsWith("=")?"edit-expression active":null})):null,a.a.createElement(l["h"].Button,{id:"popover-button-".concat(d,"-").concat(i.cId),onClick:function t(){return v(!h)}},a.a.createElement(l["f"],{name:"triangle-bottom",size:"small"}))),a.a.createElement(y,{alignId:"popover-button-".concat(d,"-").concat(i.cId),options:r,open:h,listHeader:c,closePopover:function t(){setTimeout((function(){v(false)}))},selectValue:D})))};T.propTypes={data:s.a.object.isRequired,options:s.a.array.isRequired,def:s.a.object.isRequired,saveValue:s.a.func.isRequired,listHeader:s.a.string.isRequired};var E=T;var A=i("GG1N");var P=i("2Hli");var O=i("uVcZ");var R=function t(e){var i=e.data,n=e.definition;return"function"===typeof n.refFn?n.refFn(i):n.ref};var V={template:"<div></div>",controller:["$scope","$element",function(t,e){t.options=[];t.saveValue=function(e){P["a"].setValue(t.data,R(t),e);t.$emit("saveProperties")};function i(){t.loading=true;A["a"].fillOptions(t.definition,t.data,t.args.handler,t.options,t.args).then((function(){t.loading=false;t.options=JSON.parse(JSON.stringify(t.options))}),(function(){t.loading=false}))}i();t.$watch("loading",(function(){if(!t.loading){var i={component:O["a"].findComponent(t.definition),definition:t.definition};A["a"].defineLabel(i,t.definition,(function(){return t.data}),t.args.handler);Object(r["render"])(a.a.createElement(E,{data:t.data,options:t.options,def:t.definition,saveValue:t.saveValue,listHeader:i.label||"",reference:t.ref}),e[0])}}));t.$watch("data",(function(){i();t.ref=R(t);var e=P["a"].getValue(t.data,t.ref);if(void 0!==e){var n="".concat(t.ref.replace(/\./g,"-")).concat(t.data.cId?"-".concat(t.data.cId):"");C["a"].publish(n,e)}}));t.$on("$destroy",(function(){Object(r["unmountComponentAtNode"])(e[0])}))}]};var N=e["default"]=V},BUOA:function(t,e,i){"use strict";var n=i("H6Kg");var a=i("wIyQ");var r=i("acVu");var o={};var s=false;Object.defineProperty(o,"isDisabledForApp",{get:function t(){return s}});o.setIsDisabledForApp=function(t){if(s!==t){s=t;setTimeout((function(){a["a"].force("end")}))}};o.isDisabled=function(t){if(Object(r["b"])("OBJECT_HOVER_TOGGLE")){var e,i,n,a,o;var l=!!(null===t||void 0===t||null===(e=t.model)||void 0===e||null===(i=e.items)||void 0===i?void 0:i.dynamicChart)&&!!(null===(n=t.model.items.currentObject)||void 0===n||null===(a=n.layout)||void 0===a?void 0:a.disableNavMenu);return s||!!(null===t||void 0===t||null===(o=t.layout)||void 0===o?void 0:o.disableNavMenu)||l}return false};n["a"].UpdateObjProps.bind((function(t){o.setIsDisabledForApp(t.disableCellNavMenu)}));e["a"]=o},ByVn:function(t,e,i){"use strict";var n=i("4nJ1");e["a"]={migrateProperties:a,needToMigrateProperties:r};function a(t){var e=n["a"].findValuesOfQProperty(t,"qHyperCubeDef");e&&e.forEach((function(t){var e=t.qDimensions;e&&e.forEach((function(t){var e=t.qDef;true===e.autoSort&&e.qSortCriterias.forEach((function(t){t.qSortByNumeric=1;t.qSortByAscii=1}))}))}));return t}function r(t){var e=n["a"].findValuesOfQProperty(t,"qHyperCubeDef");return e.some((function(t){var e=t.qDimensions;return e.some((function(t){var e=t.qDef;return true===e.autoSort&&e.qSortCriterias.some((function(t){return 1!==t.qSortByNumeric||1!==t.qSortByAscii}))}))}))}},CXZG:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("0m+j");function l(t,e,i){var n=false;var r=null;var l=i.cond||function(){return true};var c=i.onStart||function t(){};var u=i.onStop||function t(){};var d=i.isEnabled||function(){return true};function p(t){if("string"===typeof i.elem)return a()(i.elem)[0];if("function"===typeof i.elem)return i.elem(t);return i.elem}function f(t){if("function"===typeof i.info)return i.info(a()(t.target).scope(),t);return i.info}function h(t){a()(t.target).off("remove",h);n.cancel();u(t,true)}t.on("qv-press",e,(function(t){n=null;var e=f(t);if(!d(e,t)){n=false;return}i.allowScroll||o.a.utils.touch||t.preventDefault()}));t.on("qv-swipe",e,(function(t){if(false===n)return;if(true===n){clearTimeout(r);r=null}else if(n){a()(t.target).off("remove",h);n.update(t);n.end(t);u(t,false)}n=false}));t.on("qv-swipecancel",e,(function(t){if(false===n)return;if(true===n){clearTimeout(r);r=null}else if(n){a()(t.target).off("remove",h);n.cancel();u(t,true)}n=false}));t.on("qv-swipestart qv-swipeupdate",e,(function(t){if(false===n)return;if(!n){var e=l(t.gestureData.swipe);if(e){n=true;o.a.WebkitHack.prevent();r=setTimeout((function(){r=null;a()(t.target).on("remove",h);c(t,a()(t.target).scope());var e=p(t);var i=f(t);n=s["a"].startDrag(e,i);n&&n.update(t)}),0)}else false===e&&(n=false)}if(n){t.preventDefault();true!==n&&n.update(t)}}))}e["a"]={addDrag:l}},"Co6/":function(t,e,i){"use strict";var n=i("2Hli");function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}var r={getTargetIndex:function t(e,i){var a=n["a"].getValue(e,"qHyperCubeDef.qDimensions",[]).length-1;return void 0===i?a:i},getAttrExps:function t(e,i){var a=r.getTargetIndex(e,i);var o="qHyperCubeDef.qDimensions.".concat(a,".qAttributeExpressions");return n["a"].getValue(e,o,[])},createAttributeExpression:function t(e,i){var n=e.definition.id;var a={};a.cId=i.cId;a.qAttribute=true;a.qExpression="";a.id=n;a.qLabel="";return a},deleteAttributeExpression:function t(e,i,n){i.splice(n,1);e.$emit("saveProperties")},setAttributeExpressionValue:function t(e,i,n){var o=e.args.properties;var s=i.ref;var l="object"===a(s);var c=r.getAttrExps(o,n);var u=c.findIndex((function(t){return t.cId===i.cId}));if(l){var d;if(-1===u){c.push(r.createAttributeExpression(e,i));u=c.length-1}c[u].qExpression=(null===(d=s.qStringExpression)||void 0===d?void 0:d.qExpr)||"";e.$emit("saveProperties")}else-1!==u&&r.deleteAttributeExpression(e,c,u)},findAttrIndex:function t(e,i){var n=-1;for(var a=0;a<e.length;a++)if(e[a].cId===i){n=a;break}return n}};e["a"]=r},CudP:function(t,e,i){"use strict";var n=i("4nJ1");var a=i("JbzQ");var r=i("sWge");var o=i("mWu2");var s=i("6uJb");function l(t,e){t.qDef=n["a"].extend(true,{},t.qDef,e.qDim);for(var i=0;i<t.qDef.qFieldDefs.length;++i)t.qDef.qFieldDefs[i]===t.qDef.qFieldLabels[i]&&(t.qDef.qFieldLabels[i]="");t.qDef.baseColor&&delete t.qDef.baseColor;delete t.qDef.coloring;delete t.qDef.title;t.qLibraryId=""}function c(t){return a["a"].get(t.qLibraryId).then((function(e){return e.getProperties().then((function(e){var i=new r["a"];if("N"===e.qDim.qGrouping){o["default"].getService("qvConfirmDialog").show({message:s["default"].get("Dimension.Linked.BreakLinkDialog.Text"),icon:"link"}).closed.then((function(n){if(n){l(t,e);i.resolve()}else i.reject()}));return i.promise}o["default"].getService("qvAlertDialog").show({message:s["default"].get("Dimension.Linked.BreakLink.Drilldown.Text")}).closed.then((function(){i.reject()}));return i.promise}))}))}e["a"]={breakLink:l,showBreakLinkDialog:c}},CxxQ:function(t,e,i){"use strict";i.r(e);var n=i("2Hli");var a=i("GG1N");var r='<div class="pp-component pp-attr-ref-component" ng-if="visible" tcl="items">\n\t<div ng-repeat="item in items track by item.key" tid="{{item.definition.tid}}" class="item">\n\t\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="innerData[$index]" x-args="args"></div>\n\t</div>\n</div>';var o=i("uVcZ");var s=i("fwzx");function l(t,e){if(!t.ref||e.filter((function(t){return!t.ref||!t.id})).length)throw new Error("Invalid input to attribute-expression-ref property component. Requires ref for component and ref for each item.")}function c(t,e){var i=s["a"].getById(e,t.id)||{};return n["a"].getValue(i,t.ref,void 0)}var u={template:r,controller:["$scope",function(t){var e=t.definition.items||{};var i;var r=t.definition.ref;l(t.definition,e);function u(){t.innerData=[];var a=n["a"].getValue(t.data,r,[]);t.items=Object.keys(e).filter((function(i,n){var r=e[i];t.innerData[n]=t.innerData[n]||{};t.innerData[n][r.ref]=c(r,a);t.innerData[n].id=r.id;if("function"===typeof r.show)return r.show(t.data,t.args.handler,t.args);if("boolean"===typeof r.show)return r.show;return true})).map((function(t){var i=e[t];return{component:o["a"].findComponent(i),definition:i,key:t}}));i||(i=t.$watch("innerData",(function(){var i=n["a"].getValue(t.data,r,[]);var a=i.length;var o=false;var l=[];e.forEach((function(e,a){var r=n["a"].getValue(t.innerData[a],e.ref,null);var u=c(e,i);var d=s["a"].getIndexById(i,e.id);if(null!==r&&""!==r){if(-1===d){i.push(t.innerData[a]);d=i.length-1;o=true}else if(r!==u){o=true;i[d][e.ref]=t.innerData[a][e.ref]}l[d]=true}else-1!==d&&delete i[d][e.ref]}));for(var u=i.length-1;u>=0;u--)true!==l[u]&&i.splice(u,1);i=s["a"].clean(i);o=o||a!==i.length;n["a"].setValue(t.data,r,i);o&&t.change()}),true))}t.$on("datachanged",(function(){u()}));t.$watch("data",(function(){u()}));t.$on("saveProperties",(function(e){e.targetScope!==t&&e.stopPropagation()}));a["a"].defineVisible(t,t.args.handler);a["a"].defineChange(t,t.args.handler)}]};var d=e["default"]=u},DWZC:function(t,e,i){"use strict";var n=i("AaFn");var a=i("P8Hz");var r=i("4nJ1");var o=i("BcSl");var s=i("WRI6");var l;var c;var u;var d;var p;function f(t,e){var i=t?h(t):null;if(i){var n=i.getDimensions();if(n.length)return"".concat(e.qText,",").concat(n.join(","))}return e.qText}function h(t){if("P"===t.data.qType&&t.parent)return t.parent.cacheItem;return t.cacheItem}function v(t,e){return t.labelExpRef?r["a"].getValue(e,t.labelExpRef):t.label}function g(t,e,i,a){var r=new n["a"];var o=[];var s;var p=[];if(t&&t.length){l=0;c=e&&e.length<2;u=e;d=i;r.data.qApprMaxGlyphCount=d[0]?d[0].qApprMaxGlyphCount:0;s=m(a,t[0].qSubNodes,r,o,p,0);return{dimensionTree:s,cacheItems:o}}return{dimensionTree:r,cacheItems:[]}}function m(t,e,i,r,o,s){var g;var y;var x;var _;var C;o[l]||(o[l]={});for(var w=0;w<e.length;w++){var q=[];var M=[];var S=[];if("T"===e[w].qType)continue;g=new n["a"];g.data.qType=e[w].qType;g.data.qMaxPos=e[w].qMaxPos;g.data.qMinNeg=e[w].qMinNeg;"P"===e[w].qType&&(p=e[w]);if("V"===e[w].qType||"E"===e[w].qType||"P"===e[w].qType){g.data.qText=e[w].qText;g.data.qNum=Number.isNaN(+e[w].qValue)?e[w].qNum:e[w].qValue;g.data.qValue=e[w].qValue;g.data.rowIndex=0;if(c){y=new n["a"];y.data.qType="_M";y.data.qMaxPos=g.data.qMaxPos;y.data.qMinNeg=g.data.qMinNeg;y.data.qText=u[0].qFallbackTitle;y.data.rowIndex=e[w].qRow;y.addChild(g);g=y}else g.data.rowIndex=e[w].qRow}else{g.data.qText="O"===e[w].qType&&d[s]?d[s].othersLabel||"":e[w].qText;d[s+1]&&(g.data.qApprMaxGlyphCount=d[s+1].qApprMaxGlyphCount);g.data.qElemNo=e[w].qElemNo;g.data.rowIndex=e[w].qRow}i.addChild(g);if("V"!==e[w].qType&&"P"!==e[w].qType){var D=f(i,e[w]);if(o[l][D]&&p){_=o[l][D];g.cacheItem=_}else{_=new a["a"](null,null,null,null,e[w].qRow,l);g.cacheItem=_;_.addDimension(g.data.qText);_.id=e[w].qElemNo;if("U"!==e[w].qType){e[w].qAttrDims&&e[w].qAttrDims.qValues.forEach((function(e,i){_.addAttributeDimension(e.qElemNo,e.qText,v(d[s].qAttrDimInfo[i],t))}));if(d[s]){var I=b(e[w].qAttrExps,d[s],t),k=I.customTooltipAttrExpsArr,L=I.customTooltipInfoAttrExpsArr,T=I.attributeExpressionArr;M=M.concat(k);S=S.concat(L);q=q.concat(T)}}var E=h(i);if(E){_=g.cacheItem;_.parent=E;E.children.push(_);C=_.parent.getDimensions();for(x in C)_.addDimension(C[x])}o[l][D]=_}}if("V"===e[w].qType){_=h(i);if(_){_.addMeasure(p?p.qText:g.data.qText,e[w].qValue,e[w].qText);r.includes(_)||r.push(_)}}if(e[w].qSubNodes&&e[w].qSubNodes.length>0){l++;g=m(t,e[w].qSubNodes,g,r,o,s+("V"!==e[w].qType?1:0))}q.forEach((function(t){_.addMeasure(t.label,t.value)}));M.forEach((function(t){_.addCustomTooltipAttribute(t)}));S.forEach((function(t){_.addCustomTooltipInfoAttributes(t)}))}--l;return i}function b(t,e,i){var n={customTooltipAttrExpsArr:[],customTooltipInfoAttrExpsArr:[],attributeExpressionArr:[]};var a=e.qAttrExprInfo;var r=s["a"].getCustomTooltipInfoIdList();t&&a&&t.qValues.forEach((function(t,e){if(a[e].id===o["a"].CUSTOM.EXPRESSION)n.customTooltipAttrExpsArr.push({qNum:t.qNum,qText:t.qText});else if(r[a[e].id]){var s=void 0!==t.qText?t.qText:a[e].qFallbackTitle;n.customTooltipInfoAttrExpsArr.push({value:s,id:a[e].id})}else n.attributeExpressionArr.push({value:t.qNum,label:v(a[e],i)})}));return n}e["a"]={prepareData:g,retrieveAttrExpsValues:b}},EDQw:function(t,e,i){"use strict";var n=i("2Hli");var a={className:/^\w[\w-]+/,attr:/^\[\w(?:[\w._-]+)?(?:[!]?=['"][\w\s*#_-]*['"])?\]/};var r={className:function t(e,i){return i.filter((function(t){var i=t.constructor.name;if(i){var n=e.replace(/(-[a-z])/g,(function(t){return t[1].toUpperCase()}));n=n[0].toUpperCase()+n.slice(1);return i===e||i===n}return false}))},attr:function t(e,i,a,r){return r.filter((function(t){var r=n["a"].getValue(t,e);if(!i)return"undefined"!==typeof r;if("undefined"===typeof r)return false;switch(i){case"=":return a===String(r);case"!=":return a!==String(r);default:break}return false}))}};var o={find:function t(e,i){var n;var a=[];var r=[];var o;if(i.isBranch){n=this._tokenize(e);o=i.descendants;n.forEach((function t(e){var i=o.slice();var n=[];var a=false;e.reverse().forEach((function t(e){if(" "===e.type){n.push(i);i=o.slice();a=false;return}i=this._filter(e,i);a=true}),this);a&&n.push(i);var s=n[0].filter((function(t){var e=t.parent;var i;var a;for(i=1;i<n.length;i++){while(e&&(a=n[i].indexOf(e))<0)e=e.parent;if(a<0)return false}return true}));r.push(s)}),this);r.forEach((function(t){t.forEach((function(t){a.indexOf(t)<0&&a.push(t)}))}))}return a||[]},_filter:function t(e,i){if(!i||!i.length||!e||"function"!==typeof r[e.type])return[];switch(e.type){case"className":return r[e.type](e.value,i);case"attr":return r[e.type](e.attribute,e.operator,e.attributeValue,i);default:break}return[]},_tokenize:function t(e){var i=[];var n;var r;var o;var s;e.split(/\s*,\s*/).forEach((function(t){t=t.trim();n=[];while(t){s=false;o=t.match(/^\s*([>+~]|\s)\s*/);if(o){s=true;n.push({type:" ",value:o[0]});t=t.slice(o[0].length)}for(var e in a){o=t.match(a[e]);if(o){s=true;t=t.slice(o[0].length);r={type:e,value:o[0]};if("attr"===e){o=o[0].match(/\[(\w[\w._-]+)?(?:([!]?=)['"]([\w\s#_-]*)['"])?\]/);r.attribute=o[1];r.operator=o[2];r.attributeValue=o[3]}n.push(r)}}n&&n.length&&i.indexOf(n)<0&&i.push(n);if(!s)break}}));return i}};e["a"]=o},Eqtb:function(t,e,i){"use strict";i.r(e);var n=i("Z9ZH");var a=i.n(n);var r=i("TmNk");var o=i.n(r);var s=i("mWu2");var l=i("uVcZ");var c=i("G1wx");var u=i("6uJb");var d=i("gF9a");var p=i("2Hli");var f=i("8H7g");var h=i("4Ox4");var v=i("VnWy");var g=i("Fbef");var m=i("OnHE");var b=i("kPub");var y=i("4nJ1");var x=i("U7Ny");e["default"]={name:"tooltip-data",template:h["a"],controller:["$scope","$element","$timeout","luiPopover",function(t,e,i,n){var r=t.args.cache;var h="tooltip-data_";var x=v["a"].create(t,n);var _=m["a"].create();var C;t.expandClicked=function(t,e){if(t.target.classList.contains("pp-nm-di__draggable"))return;e.expanded=!e.expanded;r.put(h+e.id,e.expanded)};var w=null;var q=null;t.addClicked=function(e){if(t.adding){A();t.adding=false;return}var i=e.currentTarget;E(i);t.adding=true};t.getAddLabel=function(){return u["default"].get(t.definition.addTranslation)};function M(e,i){var n=p["a"].getValue(e,"".concat(t.definition.baseRef,".qHyperCube.qMeasureInfo"));if(n)return n.find((function(t){return t.cId===i}));return}function S(){t.sortableItemLists.reset();_.resetTitles();var e=t.args.layout;var i=p["a"].getValue(t.data,t.definition.ref,[]);i.forEach((function(i,n){var a=i.qDef.cId;var s=M(e,a);var c=_.getCachedMeasureTitle(s);_.getMeasureTitle(s,i,true,t.args.app).then((function(t){c=t}));var u={title:function t(){return c},isInvalid:function t(){var i=M(e,a);return i&&!!i.qError},component:l["a"].getComponent("items"),definition:{type:"items",items:t.definition.items},data:i,args:t.args,id:a,index:n,type:"measure",expanded:r.get(h+a)||false,sortable:false!==t.definition.allowMove,templateSrc:"pp-data-item.ng.html",markerClass:"pp-measure"};o.a.measureBase.getLibraryId(i)||b["a"].extract(o.a.measureBase.getExpression(i)).then((function(t){u.isValidExtraction=t.isValid;u.extractedField=t.field}));var d=x.isChangeable(i);if(d){u.canChangeMeasureAggregation=true;u.currentAggregation=x.getAggregation(o.a.measureBase.getExpression(i));u.remainder=x.getRemainder(o.a.measureBase.getExpression(i))}C.addSortableItem(u)}))}function D(){p["a"].getValue(t.data,t.definition.ref)||p["a"].setValue(t.data,t.definition.ref,[])}function I(){var t={};t.qDef||(t.qDef={});t.qDef.qNumFormat||(t.qDef.qNumFormat={});t.qDef.cId||(t.qDef.cId=y["a"].generateId());t.qDef.autoSort=true;return t}function k(e){D();var i=p["a"].getValue(t.data,t.definition.ref,[]);i.push(e);p["a"].setValue(t.data,t.definition.ref,i);t.$emit("saveProperties");A();P()}function L(t){var e=I();e.qLibraryId=t.libraryId;delete e.qDef.qDef;delete e.qDef.qLabel;k(e)}function T(t){var e=I();e.qDef.qDef=t.value;e.qDef.qLabel="";k(e)}function E(e){O();var i={app:t.args.app,closeAddPopover:A,addLibraryMeasure:L,addExpressionMeasure:T};w=n.show({template:d["a"].template,controller:d["a"].controller,input:i,alignTo:e,dock:"bottom"})}function A(e){if(w){w.close();w=null}e&&e.target.classList.contains("pp-toplist-add-button")&&a.a.preventGestures();t.adding=false}t.removeItem=function(e){var i=p["a"].getValue(t.data,t.definition.ref,[]);i.splice(e.index,1);t.$emit("saveProperties")};t.openContextMenu=function(e,i){var n=s["default"].getService("qvContextMenu").menu();n.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i)}});q=s["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};function P(){i((function(){var t=e.find(".pp-nm-hcd__lists");var i="tooltip";var n=e.find("[tid='".concat(i,"'] .pp-nm-hcd__list-items"));var a=n.children().last();a[0]&&(t[0].scrollTop=a[0].offsetTop-1)}),100)}t.sortableItemLists=f["a"].create({options:{direction:"vertical",listKey:"list",scrollSelector:".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",preventClickDefault:false,gesture:{name:"swipe",options:{radiusThreshold:c["a"].treatAsDesktop()?4:0,preventDefault:false}}},onBegin:function e(i){this._super.apply(this,arguments);t.movingItem=i;O()},onMove:function e(){var i=this._super.apply(this,arguments);if(i){delete t.movingItem;var n=C.get().map((function(t){return t.data}));p["a"].setValue(t.data,t.definition.ref,n);t.$emit("saveProperties")}return i},onCancel:function e(){this._super.apply(this,arguments);delete t.movingItem}});C=t.sortableItemLists.createList(1,{title:u["default"].get(t.definition.translation),tid:"tooltip-measure",getAddLabel:t.getAddLabel,addClicked:t.addClicked,descriptionless:true});function O(){C.items.forEach((function(t){t.expanded=false;r.put(h+t.id,false)}))}t.isItemDraggable=function(e){if(!e.sortable)return false;var i=p["a"].getValue(t.data,t.definition.ref,[]);return i.length>1};t.showChangeAggregation=function(t){return t.canChangeMeasureAggregation&&!t.isDragged};t.getItemHeaderTitle=function(e){return t.showChangeAggregation(e)?e.remainder:e.title()};t.openChangeAggregationPopover=function(e,i){if(!t.showChangeAggregation(i))return;var n={isOpenButton:function t(e){return e.classList.contains("pp-nm-di__header-aggregation")},onAggregationChanged:function t(e,i){g["a"].gather({expression:e.extractedField,aggregation:i})}};x.openPopover(e,i.id,i,n)};t.isChangeAggregationPopoverOpen=function(t){return x.isPopoverOpen(t.id)};t.showItemDescription=function(){return false};t.showNextPossibleItem=function(e){var i=t.getUndraggedItems(e);var n=i.length;return n<15};t.showNextPossibleItemDescription=function(){return false};t.getUndraggedItems=function(t){return t.get((function(t){return!t.isDragged}))};t.$watchCollection("data.tooltip",S);t.$on("$destroy",(function(){A();q&&q.close()}))}]}},Fbef:function(t,e,i){"use strict";var n=i("LoC2");var a={gather:r};e["a"]=a;function r(t){t=t||{};if(!o(t))return;n["a"].put(t.expression,t.aggregation)}function o(t){return!!t.expression&&"string"===typeof t.expression&&!!t.aggregation&&"string"===typeof t.aggregation}},Fusc:function(t,e,i){"use strict";var n=i("9oDI");var a=l();var r={tokenize:s};var o=r;function s(t){if("string"!==typeof t)throw new Error("Expression-tokenizer: Expression must be a string");t=t.trim();"="===t.charAt(0)&&(t=t.substr(1));var e=[];var i=0;var n=c(t);n.forEach((function(n){var a=t.substr(i,n.start-i).trim();a&&e.push({content:a,isOperator:false});e.push({content:n.content,isOperator:true});i=n.end}));var a=t.substr(i,t.length);e.push({content:a.trim(),isOperator:false});return e}function l(){var t={};for(var e in n["a"].SYMBOLS)if(n["a"].SYMBOLS.hasOwnProperty(e)){var i=n["a"].SYMBOLS[e];t[i.LEFT]=i.RIGHT}return t}function c(t){var e=[];for(var i=0;i<t.length;i++){var n=t.charAt(i);if(u(n)){i=d(t,n,i);continue}var a=[];var r=false;var o=p(n);a=f(n);if(a.length){var s=t.substr(i).toLowerCase();for(var l=0;l<a.length;l++){var c=a[l];var v=h(s,c);if(v){e.push({content:c,start:i,end:i+c.length});r=true;i+=c.length-1;break}}}!r&&o&&e.push({content:n,start:i,end:i+1})}return e}function u(t){return a.hasOwnProperty(t)}function d(t,e,i){var r=e;var o=a[r];var s=t.substring(i).split("");var l=0;var c=false;for(var u=0;u<s.length;u++){var d=s[u];d===n["a"].SYMBOLS.STRING.LEFT&&(c=!c);if(c)continue;d===r&&l++;d===o&&l--;if(!l)return u+i}return i}function p(t){return n["a"].OPERATORS.SINGLES.indexOf(t.toLowerCase())>-1}function f(t){var e=[];var i=n["a"].OPERATORS.MULTIPLES.concat(n["a"].OPERATORS.WORDS).filter((function(t){return t.length>1})).map((function(t){return t.toLowerCase()}));i.forEach((function(i){0===i.indexOf(t.toLowerCase())&&e.push(i)}));return e}function h(t,e){var i=0===t.indexOf("".concat(e," "));var a=n["a"].OPERATORS.SINGLES.some((function(i){return 0===t.indexOf(e+i)}));return i||a}var v=i("ZszH");var g={stripComments:b};var m=g;function b(t){if(!t)return"";t=y(t);t=x(t);return t.trim()}function y(t){return t.replace(/\/\/(.*)$/gm,"")}function x(t){return t.replace(/\/\*[^]*?\*\//g,"")}var _={};var C={classify:q};var w=e["a"]=C;function q(t){if("string"!==typeof t)throw new Error("Expression-classifier: Expression must be a string");var e=t;if(_[e])return _[e];var i={content:t,count:0,result:{},results:[]};if(""===t){_[e]=i;return i}"="===t.charAt(0)&&(t=t.substr(1));var n=m.stripComments(t);var a=o.tokenize(n);i.count=a.length;a.forEach((function(t,e){var n;if(t.isOperator)i.results.push(t);else{n=M(t.content);i.results.push(n)}0===e&&(i.result=n)}));_[e]=i;return i}function M(t){var e={content:t,function:{content:"",isCommon:false},remainder:{content:"",isFunction:false,isCommonFunction:false,isCommaSeparated:false,isFieldlike:false,isString:false,isNumber:false,isQualifier:false,qualified:{qualifier:"",content:"",isFieldlike:false}}};var i=S(t);if(i.hasAggregation){e.function.content=D(t,i);e.function.isCommon=A(e.function.content);e.remainder.content=I(t,i);var n=S(e.remainder.content);e.remainder.isFunction=O(n);e.remainder.isCommonFunction=R(e.remainder.content,n);e.remainder.isQualifier=L(e.remainder.content);e.remainder.isCommaSeparated=P(e.remainder.content);if(e.remainder.isQualifier){var a=T(e.remainder.content);var r=E(e.remainder.content,a);var o=S(r);e.remainder.qualified={qualifier:a,content:r,isFieldlike:V(o)}}i=n}else e.remainder.content=e.content;e.remainder.isFieldlike=V(i);e.remainder.isString=N(e.remainder.content);e.remainder.isNumber=z(e.remainder.content);return e}function S(t){var e={};e.expression=t;e.hasPrefix="="===t.charAt(0);e.leftSymbolIndex=t.indexOf(n["a"].SYMBOLS.FUNCTION.LEFT);e.hasAggregation=e.leftSymbolIndex>0;e.isRightSymbolLast=t.substring(t.length-1)===n["a"].SYMBOLS.FUNCTION.RIGHT;e.isEncapsulated=e.hasAggregation&&e.isRightSymbolLast;e.hasOperator=k(t);return e}function D(t,e){var i=e.hasPrefix?1:0;var n=e.hasPrefix?e.leftSymbolIndex+1:e.leftSymbolIndex;return t.substr(i,n).trim()}function I(t,e){var i=t.substr(e.leftSymbolIndex);var n=i.substr(1,i.length-2);return n.trim()}function k(t){var e=n["a"].OPERATORS;var i=e.SINGLES;var a=e.MULTIPLES;var r=e.WORDS;var o=i.some((function(e){return t.indexOf(e)>-1}));if(o)return true;var s=a.some((function(e){return t.indexOf(e)>-1}));if(s)return true;var l=r.some((function(e){return t.indexOf(" ".concat(e," "))>-1}));return l}function L(t){return n["a"].QUALIFIERS.some((function(e){return 0===t.toLowerCase().indexOf(e)}))}function T(t){var e=n["a"].QUALIFIERS.filter((function(e){return 0===t.toLowerCase().indexOf(e)})).shift();return e}function E(t,e){return t.slice(e.length).trim()}function A(t){return n["a"].COMMON_FUNCTIONS.some((function(e){return t.toLowerCase()===e}))}function P(t){var e=v["a"].getCharacterIndexes(t,",");return e.some((function(e){return!$(t,e)}))}function O(t){return t.isEncapsulated&&!t.isBleedingOperator}function R(t,e){if(!e.isEncapsulated)return false;var i=t.substr(0,e.leftSymbolIndex);return A(i)}function V(t){var e=t.expression;if(N(t.expression))return false;var i=F(e,n["a"].SYMBOLS.FIELD.LEFT);var a=j(e,n["a"].SYMBOLS.FIELD.RIGHT);var r=v["a"].getCharacterCount(e,n["a"].SYMBOLS.FIELD.LEFT);var o=v["a"].getCharacterCount(e,n["a"].SYMBOLS.FIELD.RIGHT);if(i&&a&&1===r&&1===o)return true;return H(t)}function N(t){var e=F(t,n["a"].SYMBOLS.STRING.LEFT);var i=j(t,n["a"].SYMBOLS.STRING.RIGHT);var a=n["a"].SYMBOLS.STRING.LEFT===n["a"].SYMBOLS.STRING.RIGHT;var r=v["a"].getCharacterCount(t,n["a"].SYMBOLS.STRING.LEFT);var o;if(a)o=2===r;else{var s=v["a"].getCharacterCount(t,n["a"].SYMBOLS.STRING.RIGHT);o=1===r&&1===s}return e&&i&&o}function z(t){return!Number.isNaN(+t)}function F(t,e){return t.charAt(0)===e}function j(t,e){return t.charAt(t.length-1)===e}function H(t){if(t.hasAggregation)return false;var e=t.expression;var i=e.indexOf(" ")>-1;if(i)return false;var a=n["a"].OPERATORS.SINGLES.concat(n["a"].OPERATORS.MULTIPLES).some((function(t){return e.indexOf(t)>-1}));return!a}function $(t,e){return Object.keys(n["a"].SYMBOLS).some((function(i){var a=n["a"].SYMBOLS[i];return v["a"].getIsCharacterEncapsulated(t,e,a.LEFT,a.RIGHT)}))}},GxrR:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-slider-component" ng-if="visible" tcl="slider">\n\t<div class="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<div class="slider" pp-slider="sliderOptions" ng-model="value" ng-change="change()" ng-disabled="readOnly" ></div>\n\t</div>\n</div>';var r={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,e,t.args.handler);n["a"].defineValue(t,t.definition,e);t.sliderOptions={min:t.definition.min,max:t.definition.max,step:t.definition.step,range:"array"===t.definition.type}}]};var o=e["default"]=r},GzpM:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("mWu2");var l=i("6uJb");var c=i("2Hli");var u=i("G1wx");var d=i("8H7g");var p='<lui-popover style="min-width: 200px;width: 230px;" align-to="alignTo" position="position" collision="\'flipfit\'" on-close-view="closeAddPopover(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<ul class="lui-list">\n\t\t<li class="lui-list__item lui-list__action" ng-repeat="item in input.items" tid="layer-item" ng-click="input.addLayer(item.layer)">\n\t\t\t<span class="lui-list__text lui-list__text--ellipsis">\n\t\t\t\t{{item.title}}\n\t\t\t</span>\n\t\t</li>\n\t</ul>\n</lui-popover>\n\n';var f='<div class="pp-component pp-list-component pp-toplist" tcl="layers">\n\n  <div class="pp-no-layers-message" ng-if="!hasLayers && (noLayersHelpHeader || noLayersHelpText)">\n    <span class="no-layers-header">{{noLayersHelpHeader}}</span>\n    <p class="no-layers-text">{{noLayersHelpText}}</p>\n  </div>\n\n\t<div class="pp-list-container pp-layer-list" qv-sortable-list="sortableItemLists" ng-if="hasLayers">\n\t\t<ul class="pp-list-content lui-list">\n\t\t\t<li ng-repeat="item in sortableItemLists.lists[0].items track by item.id" ng-style="item.style"\n\t\t\t\tclass="lui-list__item"\n\t\t\t\tng-class="{ \'qv-pp-sortable\': item.sortable, \'on-the-move\': item === movingItem }"\n\t\t\t\tqva-activate="editLayer(item.id)" qva-context-menu="openContextMenu($event, item)" title="{{item.title}}">\n\n\t\t\t\t<span class="lui-list__aside move-handle qv-pp-sortable-handle">\n\t\t\t\t\t<span class="lui-icon  lui-icon--draggable" q-title-translation="Common.Move"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="lui-list__aside text-wrapper">\n\t\t\t\t  <span class="lui-list__text layer-title">{{item.title}}</span>\n\t\t\t\t  <span class="lui-list__text layer-sub-title">{{item.subTitle}}</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="lui-list__aside">\n\t\t\t\t  <span class="lui-icon  lui-icon--next  lui-icon--small"></span>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\n  <button ng-if="def.showAddButton" class="lui-button lui-button--block pp-toplist-add-button" ng-class="{\'lui-active\': adding === true}" qva-activate="addClicked($event)" qv-enter="addClicked($event)" qva-outside-ignore-for="{{\'addButton-\' + $id}}"\n          ng-disabled="addDisabled()" tid="add-data">\n    <span class="lui-button__text">{{getAddLabel()}}</span>\n  </button>\n</div>\n';var h=i("4nJ1");var v=i("VypT");var g=i("U7Ny");var m=e["default"]={template:f,controller:["$scope","luiPopover",function(t,e){var i={showAddButton:false};t.def=h["a"].extend(true,{},i,t.definition);t.noLayersHelpHeader=t.def.noLayersHelpHeader;t.noLayersHelpText=t.def.noLayersHelpText;var n=t.args.cache;var r="layers_";var f={};var g=null;var m;var b=c["a"].getValue(t.data,t.definition.ref)||[];var y=b.map((function(t){return t.cId}));var x={};y.forEach((function(t){x[t]=true}));function _(t){n.put(r+t,false)}t.editLayer=function(e,i){var a=m.get((function(t){return t.id===e}))[0];var o=t.definition.ref||"layers";var s={id:a.id,triggerId:"propertyPanelLayers",title:a.definition.title,subTitle:a.subTitle,layoutPath:"".concat(o,".").concat(a.index),propertiesPath:"".concat(o,".").concat(a.index),definition:a.definition,footer:{items:[{type:"button",translation:t.def.deleteBtnTranslation||"Common.Delete",icon:"bin",action:function e(i){i.preventDefault();t.removeLayer(a)}}]},transitions:{show:void 0===i||i,hide:true},stepOutCallback:_,dataPath:a.dataPath};var l=t.def.activePath;if(l){l="function"===typeof l?l.call(null,a):l;l&&l.length&&(s.activePath=l)}t.$root.$emit("showSubPanel",s);n.put(r+a.id,true)};t.removeLayer=function(e){var i=v["a"].getLayersProperties(t.data,t.definition.ref);i.splice(e.index,1);t.$emit("saveProperties");delete x[e.cId]};t.getAddLabel=function(){return l["default"].get(t.definition.addTranslation)};t.addClicked=function(i){if(t.adding){D();return}var n=v["a"].getLayersProperties(t.data,t.definition.ref);if(n&&n.length<=C()){var r=Object.keys(t.definition.layers).map((function(e){var i=t.definition.layers[e];return{title:l["default"].get(i.definition.translation),layer:i}}));g=e.show({template:p,input:{items:r,addLayer:w},alignTo:i.currentTarget,closeOnEscape:true});g.closing.then((function(e){e&&!a()(e.target).hasClass("lui-button__text")&&(t.adding=false)}));g.closed.then((function(){g=null}));t.adding=true}};function C(){if("function"===typeof t.definition.max)return t.definition.max.call(null,t.data,this);return t.definition.max||1e6}t.addDisabled=function(){var e=v["a"].getLayersProperties(t.data,t.definition.ref);return e&&e.length>=C()};function w(e){var i=v["a"].getLayersProperties(t.data,t.definition.ref);if(i&&i.length>=C())return;var n=h["a"].extend(true,{},e.initialProperties||{},{cId:h["a"].generateId()});i.push(n);t.$emit("saveProperties");D()}t.$on("pp-open-path",(function(t,e){var i=e.split(".");var a=i[0];var o=i[1];if("data"===a&&o){n.put(r+o,true);M()}}));function q(t,e){var i=t.map((function(t){return t.type}));var n=e.map((function(t){return t.type}));var a=i.join(",")===n.join(",");var r=i.length>n.length;var o=i.length===n.length&&!a;return r||o}function M(){var e=v["a"].getLayersProperties(t.data,t.definition.ref);var i=m.get();t.sortableItemLists.reset();e.forEach((function(e,i){var a=c["a"].getValue(t,"definition.layers.".concat(e.type,".definition"));if(a){var o="".concat(t.definition.ref||"layers",".").concat(i);var s=v["a"].createHyperCubeHandler(o,t.args.properties,t.args.layout,t.args.app);f[e.cId]=s;var u={title:"function"===typeof a.title?a.title(e,s):a.title,subTitle:l["default"].get(a.translation),footer:a.footer,id:e.cId,type:e.type,index:i,data:e,definition:a,sortable:true,dataPath:t.definition.dataPath};m.addSortableItem(u);n.get(r+e.cId)&&t.editLayer(u.id,false)}}));var a=q(i,m.get());a&&t.$root.$emit("hideSubPanel",{all:true});t.hasLayers=!m.isEmpty()}t.sortableItemLists=d["a"].create({options:{direction:"vertical",listKey:"list",listSelector:".pp-list-content",itemKey:"item",itemSelector:".qv-pp-sortable",itemDragSelector:".qv-pp-sortable-handle",gesture:{name:"swipe",options:{radiusThreshold:u["a"].treatAsDesktop()?4:0,preventDefault:false}}},onBegin:function e(i){this._super.apply(this,arguments);t.movingItem=i},onCancel:function e(){this._super.apply(this,arguments);delete t.movingItem},onMove:function e(){var i=this._super.apply(this,arguments);if(i){delete t.movingItem;var n=m.get().map((function(t){return t.data}));c["a"].setValue(t.data,t.definition.ref,n);t.$emit("saveProperties")}return i}});m=t.sortableItemLists.createList(1,{title:l["default"].get("properties.layers"),tid:"layers"});var S=null;function D(e){if(g){g.close();g=null}e&&a()(e.target).hasClass("pp-toplist-add-button")&&o.a.preventGestures();t.adding=false}t.openContextMenu=function(e,i){var n=s["default"].getService("qvContextMenu").menu();n.addItem({translation:t.def.deleteBtnTranslation||"Common.Delete",tid:"delete",select:function e(){t.removeLayer(i)}});S=s["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.$watchCollection("data.".concat(t.definition.ref),(function(){M();var e=c["a"].getValue(t.data,t.definition.ref)||[];var i=e.map((function(t){return t.cId}));if(y.length<e.length){var n=e.filter((function(t){return-1===y.indexOf(t.cId)}));var a=n[0];var r=!x[a.cId];t.$root.$emit("hideSubPanel",{all:true});var o=a.id||a.cId;if(r){a.id=o;t.editLayer(o,false)}x[o]=true}else{var s=y.join(",")!==i.join(",");s&&t.$root.$emit("hideSubPanel",{all:true})}y=i}));t.$on("$destroy",(function(){D();if(S){S.close();S=null}}))}]}},HBwF:function(t,e,i){"use strict";var n=i("sYQE");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function o(t,e,i){e&&r(t.prototype,e);i&&r(t,i);return t}var s=function(){function t(){a(this,t);this.plotMin=null;this.plotMax=null;this.plotRange=null;this.tickMin=this.plotMin;this.tickMax=this.plotMax;this.mainValues=[];this.secondaryValues=[];this._plotSize=0;this._calculationSize=0}o(t,[{key:"setSize",value:function t(e){this._plotSize=e}},{key:"getPositionOfValue",value:function t(e){return(e-this.plotMin)/this.plotRange*this._plotSize}},{key:"getValueOfPosition",value:function t(e){return this.plotMin+this.plotRange*e/this._plotSize}},{key:"getNormalizedValue",value:function t(e){return(e-this.plotMin)/this.plotRange}},{key:"calculateLimits",value:function t(){this._usedDataMin=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;this._usedDataMax=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;this.plotMin=null===this._explicitPlotMin||Number.isNaN(+this._explicitPlotMin)?this._usedDataMin:this._explicitPlotMin;this.plotMax=null===this._explicitPlotMax||Number.isNaN(+this._explicitPlotMax)?this._usedDataMax:this._explicitPlotMax;this.plotRange=this.plotMax-this.plotMin}},{key:"calculateTicks",value:function t(){var e=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;var i=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;var a=n["a"].calculateTicks(this._calculationSize,e,i,this._explicitPlotMin,this._explicitPlotMax,this._minTickSpacingInPixel,this._fontHeight,this._niceNumberEnabled,this._whiteSpaceOptimizingEnabled,.6,this._showExplicitMinMax,this._minTickDataSpacing);this._tickSpacing=a.tickSpacing;this.plotMin=a.plotMin;this.plotMax=a.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=a.tickMinValue;this.tickMax=a.tickMaxValue;this.mainValues=a.mainTickValues;this.secondaryValues=a.secondaryTickValues;0===this.mainValues.length&&this.mainValues.push(a.minTickValue);0===this._tickSpacing&&(this._tickSpacing=1);if(this._showExplicitMinMax){var r=this.mainValues[0];this.mainValues[0]=a.plotMin;r-a.plotMin>=a.tickSpacing/2&&this.mainValues.splice(1,0,r);var o=a.mainTickValues[a.mainTickValues.length-1];a.plotMax-o<=a.tickSpacing/2?this.mainValues[a.mainTickValues.length-1]=a.plotMax:this.mainValues.push(a.plotMax)}}},{key:"getValues",value:function t(){return{mainValues:this.mainValues,secondaryValues:this.secondaryValues}}}]);return t}();e["a"]=s},HUhx:function(t,e,i){"use strict";i.r(e);var n=i("2Hli");var a=i("uVcZ");var r='<div include-pp-component x-component="component" x-definition="itemDefinition" x-data="itemData" x-args="args"></div>\n';var o=e["default"]={template:r,controller:["$scope",function(t){function e(){var e=t.definition;t.component=a["a"].findComponent(e.item);t.itemDefinition=e.item;t.itemData=n["a"].getValue(t.data,t.definition.ref)}t.$on("datachanged",(function(){e()}));t.$watch("data",(function(){e()}))}]}},HXEA:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-link-component" ng-if="visible" tcl="link">\n\t\x3c!--<div class="label" ng-if="label">{{label}}</div>--\x3e\n\n\t<div class="value" style="text-align: right;">\n\t\t<a ng-href="{{url}}" target="_blank">{{label}}</a>\n\t</div>\n\n</div>\n';var r={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineCustom(t,t.args.handler,"url")}]};var o=e["default"]=r},Hils:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("uVcZ");var o=i("GG1N");var s=i("2sMT");var l=i("2Hli");var c=i("sWge");var u=i("G1wx");var d=i("cMY5");var p=i("JbzQ");var f=i("8H7g");var h=i("X13V");var v=i("zBv7");var g=i("wxEd");var m=i("4nJ1");var b={template:s["default"].template,controller:["$scope",function(t){var e=t.definition.items||{};t.items=Object.keys(e).filter((function(t){return e[t]})).map((function(t){var i=e[t];return{component:r["a"].findComponent(i),definition:i,key:t}}));t.$on("saveProperties",(function(e){e.stopPropagation();t.$broadcast("datachanged",t.data);t.args.model.setProperties(t.data)}));o["a"].defineVisible(t,t.args.handler);o["a"].defineReadOnly(t,t.args.handler)}]};var y={name:"filterpane-sorting",template:g["a"],controller:["$scope",function(t){var e=t.args.cache;var i="sorting_";var n;var r={items:t.definition.items||{},grouped:t.definition.grouped};t.$on("layoutchanged",(function(t){t.preventDefault()}));t.$on("datachanged",(function(t){t.preventDefault()}));t.expandClicked=function(t,n){if(n.disabled||a()(t.target).hasClass("pp-move-item"))return;n.expanded=!n.expanded;e.put(i+n.cId,n.expanded)};function o(e){var i={};var n={};e.forEach((function(e){i[e]={};n[e]=t.args.app.getObject(e)}));return c["a"].all(n).then((function(t){var n={};var a={};Object.keys(t).forEach((function(e){var r=t[e];i[e].model=r;n[e]=r.getProperties();a[e]=r.getLayout()}));return c["a"].all(n).then((function(t){e.forEach((function(e){i[e].properties=m["a"].extend(true,{},t[e])}));return c["a"].all(a).then((function(t){e.forEach((function(e){i[e].layout=t[e]}));return i}))}))}))}function s(a){if(!a.qChildList)return;var s=a.qChildList.qItems.map((function(t){return t.qInfo.qId}));p["a"].getListLayout().then((function(a){o(s).then((function(o){t.sortableItemLists.reset();var c=[];Object.keys(o).forEach((function(n,s){var u=new d["a"](t.definition,a,{});var p=o[n];var f=p.properties;var g=p.model;var m=p.layout.qListObject.qDimensionInfo;var y=l["a"].getValue(f,"qListObjectDef.qDef.cId");u.setProperties(f);u.setLayout(p.layout);var x;x=m.qError&&!v["a"].isCalcCondNotCalculatedErr(m.qError)?h["a"].getDimensionError(m.qError.qErrorCode):p.layout.title||m.title||m.qFallbackTitle||"";c.push({component:b,definition:r,title:function t(){return x},isInvalid:function t(){return!!m.qError&&!v["a"].isCalcCondNotCalculatedErr(m.qError)},data:f,id:n,cId:y,priority:s+1,args:{handler:u,cache:e,localeInfo:t.args.localeInfo,properties:f,model:g},expanded:e.get(i+y)||false,sortable:true,showPriority:true,templateSrc:"pp-sorting-item.ng.html"})}));c.sort((function(t,e){var i=s.indexOf(t.id);var n=s.indexOf(e.id);return i>n}));c.forEach((function(t){n.addSortableItem(t)}))}))}))}t.$on("layoutchanged",(function(t,e){s(e)}));s(t.args.layout);function g(){n.items.forEach((function(t){t.expanded=false;e.put(i+t.cId,false)}))}t.sortableItemLists=f["a"].create({options:{direction:"vertical",listKey:"list",listSelector:".pp-expandable-list",itemKey:"item",itemSelector:".qv-pp-sortable",itemDragSelector:".qv-pp-sortable-handle",gesture:{name:"swipe",options:{radiusThreshold:u["a"].treatAsDesktop()?4:0,preventDefault:false}}},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function t(){this._super.apply(this,arguments);g()},onMove:function e(){var i=this._super.apply(this,arguments);if(i){var a=n.get().map((function(t){return t.id}));t.args.model.setChildArrayOrder(a)}return i}});n=t.sortableItemLists.createList(1,{tid:"sorting"})}]};e["default"]=y},Hk9t:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("mWu2");var o=i("nHjU");var s=o["a"].extend({init:function t(e,i,n,o){this._super(e,i,n);var s=r["default"].getService("$compile");this._innerContainer=a()(o).appendTo(a()(this.container));s(this._innerContainer)(a()(this.container).scope().$new());this._innerScope=this._innerContainer.scope()},getInnerContainer:function t(){return this._innerContainer},setYMirrorMode:function t(e){this._super(e);this._innerScope.options.direction=this.readDirection},getInnerContainerScope:function t(){return this._innerScope},release:function t(){this._super();this._innerContainer.remove();this._innerContainer=null;this._innerScope.$destroy();this._innerScope=null}});e["a"]=s},"IL/a":function(t,e,i){"use strict";i.r(e);var n=i("Z9ZH");var a=i.n(n);var r=i("qIEf");var o=i.n(r);var s=i("uVcZ");var l=i("GG1N");var c=i("UV1h");var u='<div  class="pp-component pp-color-scale-creator-component" ng-show="visible" tcl="color-scale-creator">\n\t\t<div ng-if="!showValueIndicator()" class="invalid-expression-text" q-translation="properties.colorScaleCreator.cantShowSettings">\n\n\t\t</div>\n\t\t<div ng-if="label && showValueIndicator()" class="label" title="{{label}}" style="display: inline-block;">\n\t\t\t{{label}}\n\t\t</div>\n\t\t<div ng-if="add && showValueIndicator() && !hasInvalidExpression" class="add-button">\n\t\t\t<button tid="addLimit-button" class="lui-button pp-add-property ng-binding" qva-activate="addLimit($event)" ng-disabled="addDisabled(limits)" title="{{add}}">{{add}}</button>\n\t\t</div>\n\t\t<div class="color-creator-container" ng-show="showValueIndicator()">\n\t\t\t\x3c!-- picker --\x3e\n\t\t\t<div ng-show="!hasInvalidExpression">\n\t\t\t\t<div class="color-scale-container">\n\t\t\t\t\t<div class="value-indicator-wrapper">\n\t\t\t\t\t\t<div class="value-indicator-text" ng-style="getMeasureValueStyle()" title="{{measureValues[measureIndex].value}}" q-translation="properties.value"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div qv-color-picker-custom-new\n\t\t\t\t\t\t ng-if="useGlyph"\n\t\t\t\t\t\t on-close="closeColorpickerFoldout"\n\t\t\t\t\t\t class="color-scale lui-icon"\n\t\t\t\t\t\t ng-repeat="itemData in sortedSegments"\n\t\t\t\t\t\t qva-apply-style="getColorBackgroundStyle( sortedSegments, $index, itemData )"\n\t\t\t\t\t\t ng-model="itemData.pickerModel"\n\t\t\t\t\t\t palette="palette"\n\t\t\t\t\t\t use-glyph="{{useGlyph}}"\n\t\t\t\t\t\t keep-open="true"\n\t\t\t\t\t\t disable-none="true"\n\t\t\t\t\t\t extended="{{extended}}"\n\t\t\t\t\t\t on-change="onGlyphOrColorChange"\n\t\t\t\t\t\t ng-class="{\'no-transition\' : slide, \'left\' : $index === 0, \'right\' : ($index === sortedSegments.length-1)}"\n\t\t\t\t\t\t qva-activate="onClick($event)">\n\t\t\t\t\t\t <span ng-class="itemData.pickerModel.cssClass"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div qv-color-picker-custom-new\n\t\t\t\t\t\t ng-if="!useGlyph"\n\t\t\t\t\t\t on-close="closeColorpickerFoldout"\n\t\t\t\t\t\t class="color-scale"\n\t\t\t\t\t\t ng-repeat="itemData in sortedSegments"\n\t\t\t\t\t\t qva-apply-style="getColorBackgroundStyle( sortedSegments, $index, itemData )"\n\t\t\t\t\t\t ng-model="itemData.pickerModel"\n\t\t\t\t\t\t palette="palette"\n\t\t\t\t\t\t use-glyph="{{useGlyph}}"\n\t\t\t\t\t\t keep-open="true"\n\t\t\t\t\t\t disable-none="true"\n\t\t\t\t\t\t extended="{{extended}}"\n\t\t\t\t\t\t on-change="onGlyphOrColorChange"\n\t\t\t\t\t\t ng-class="{\'no-transition\' : slide, \'left\' : $index === 0, \'right\' : ($index === sortedSegments.length-1)}"\n\t\t\t\t\t\t qva-activate="onClick($event)">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="value-indicator" ng-class="getMeasureValueClass()" ng-style="getMeasureValueStyle()" title="{{measureValues[measureIndex].value}}"></div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="pp-component pp-slider-component" class="segment-slider" style="margin-bottom:5px; padding-right: 19px; padding-left: 15px;" ng-class="{\'notVisible\': limits.length < 1}">\n\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t<div class="slider colorSlider"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-show="hasInvalidExpression" class="invalid-limit-warning invalid-expression-text" q-translation="properties.colorScaleCreator.cantShowSettings">\n\t\t\t</div>\n\t\t\t<div class="hidden limit-options-arrow" ng-class="{\'notVisible\': limits.length < 1}">\n\t\t\t\t<div class="limit-options-arrow-fg" ng-class="{\'no-transition\' : slide}"></div>\n\t\t\t\t<div class="limit-options-arrow-bg" ng-class="{\'no-transition\' : slide}"></div>\n\t\t\t</div>\n\n\t\t\t<div class="limit-options hidden">\n\t\t\t\t<div ng-repeat="itemData in limits track by $index">\n\t\t\t\t\t<div class="limitInput" ng-if="$index == activeIndex" include-pp-component x-component="limitListItemComponent" x-definition="limitlistItemDefinition" x-data="itemData" x-args="args" ng-model="value">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div tid="limitOptions-gradient" ng-if="$index == activeIndex" include-pp-component x-component="limitGradientCheckBoxComponent" x-definition="limitGradientCheckBoxDefinition" x-data="itemData" x-args="args" ng-model="gradient">\n\t\t\t\t\t</div>\n\t\t\t\t\t<button tid="limitOptions-remove" ng-if="$index == activeIndex" class="lui-button  lui-button--block  pp-remove-property" qva-activate="removeLimit($index)">\n\t\t\t\t\t\t<span class="lui-button__text" q-translation="properties.colorScaleCreator.removeLimit" q-title-translation="properties.colorScaleCreator.removeLimit"></span>\n\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--bin  remove-icon" q-title-translation="Common.Delete"></span>\n\t\t\t\t\t</button>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!--\n\t\t\t<div ng-repeat="itemData in colors">\n\t\t\t\t<div ng-if="$index == activeIndex" include-pp-component x-component="colorListItemComponent" x-definition="colorlistItemDefinition" x-data="itemData" x-args="args"></div>\n\t\t\t</div>\n\t\t\t--\x3e\n\t\t</div>\n\t</div>\n</div>\n';var d=i("GF7R");var p=i("6uJb");var f=i("mWu2");var h=i("2Hli");var v=i("aT3D");var g=i("4nJ1");var m=i("i72x");var b=i("gKi2");function y(t){y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return y(t)}function x(t){return c["a"].resolveColor(t)}function _(t,e){if(!e.paletteColors||!e.paletteColors.length){e.paletteColors=e.colors.map((function(t){return{color:c["a"].resolveColor(t.color),icon:t.icon,index:-1}}));t.paletteColors=e.paletteColors.concat()}return e.paletteColors}function C(t,e){t.paletteColors=e.map((function(t){return{color:t.pickerModel.color,icon:t.pickerModel.icon,index:c["a"].currentPalette.indexOf(t.pickerModel.color)}}))}function w(t,e,i){t.paletteColors.push({color:-1!==e?c["a"].resolveColor({index:e}):i,index:e})}function q(t,e){t.paletteColors.splice(e+1,1)}function M(t,e){return Number(((t-e)/1e3).toFixed(20))}var S={template:u,controller:["$scope","$timeout","$element",function(t,e,i){var n=function e(){return t.data};var r=t.args.model.layout;var u=t.args.properties;t.isAltMeasure=false;if(t.data.qDef){var S=t.data.qDef.cId;var D=g["a"].getValue(u,"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",[]);t.isAltMeasure=D.some((function(t){return t&&t.qDef&&t.qDef.cId===S}))}if(t.isAltMeasure)return;var I=i.find(".colorSlider");var k;var L;var T;var E;var A=[6,5];l["a"].defineValue(t,t.definition.items.limits,n,"limits");l["a"].defineValue(t,t.definition.items.paletteColors,n,"paletteColors");t.palette=c["a"].currentPalette;t.extended=true;t.$watch("removeHandleActive",(function(t){if(!I||Number.isNaN(+t))return;I.children().eq(t).removeClass("active-handle")}));t.measureIndex=0;t.activeIndex=-1;t.add=p["default"].get("properties.colorScaleCreator.addLimit");t.maxSegments=6;t.useGlyph=!!t.definition.useGlyph&&t.definition.useGlyph;t.useAutoMinMax=!!t.definition.useAutoMinMax&&t.definition.useAutoMinMax;t.definition.conditionalColoringRef||(t.definition.conditionalColoringRef={props:"",layout:""});P();O();j();l["a"].defineLabel(t,t.definition,n,t.args.handler);l["a"].defineVisible(t,t.args.handler);t.sliderCreated=false;t.sliderOptions={min:L,max:T,step:M(T,L),values:t.layoutLimits.map((function(t){return t.value})),stop:function e(){f["default"].$apply(t,(function(){t.limits.forEach((function(e,i){if(t.activeIndex===i&&t.slide){e.value=t.sliderOptions.values[i];t.slide=false}}));t.firstClick=false;O();t.$emit("saveProperties")}))},slide:function e(i,n){if(n.values.length!==t.layoutLimits.length)return false;t.currentValue+=n.values[t.activeIndex]-t.firstClickValue;if(t.firstClick&&"object"===y(t.limits[t.activeIndex].value)||Math.abs(t.firstClickValue-t.currentValue)<200*t.sliderOptions.step)return false;t.slide=true;f["default"].$apply(t,(function(){t.limits[t.activeIndex].value=n.values[t.activeIndex];t.layoutLimits[t.activeIndex].value=n.values[t.activeIndex];t.sortedSegments=t.getSortedSegments();V()}));return true},change:function t(){R();return false},start:function e(i,n){f["default"].$apply(t,(function(){var e=0;var i=n.handle;if(!i||!o()(i).hasClass("ui-slider-handle"))return;while(null!=(i=i.previousSibling))e++;if(e!==t.activeIndex){t.updateSelectedHandle(t.activeIndex,e);G(e);t.firstClick=true;t.firstClickValue=t.sliderOptions.values[e];t.currentValue=t.firstClickValue}V()}))}};t.updateSelectedHandle=function(t,e){if(t===e)return;-1!==t&&I.children().eq(t).removeClass("active-handle");-1!==e&&I.children().eq(e).addClass("active-handle")};t.limitGradientCheckBoxComponent=s["a"].getComponent("checkbox");t.limitGradientCheckBoxDefinition={ref:"gradient",type:"boolean",defaultValue:false,translation:p["default"].get("properties.gradient")};t.limitListItemComponent=s["a"].getComponent("items");t.limitlistItemDefinition={items:t.definition.items.limits.items||{}};t.colorListItemComponent=s["a"].getComponent("items");t.colorlistItemDefinition={items:t.definition.items.paletteColors.items||{}};t.getArrowBackgroundStyle=function(t){if(!t)return;return{background:x(t.pickerModel.color)}};t.showValueIndicator=function(){return!!t.measureValues&&!Number.isNaN(+t.measureValues[t.measureIndex].value)};t.getMeasureValueClass=function(){var e=t.measureIndex,i=void 0===e?0:e;if(!t.measureValues||!t.measureValues[i])return;var n=t.measureValues[i].nValue;if(n<0)return"left";if(n>1)return"right";return""};t.getMeasureValueStyle=function(){if("function"===typeof t.definition.showMeasureValue&&!t.showMeasureValues)return{display:"none"};var e=t.measureIndex?t.measureIndex:0;if(!t.measureValues||!t.measureValues[e])return;var i=t.measureValues[e].nValue;if(i>1||i<0)return{left:"",display:"none"};var n="translateX(".concat(100*-i,"%)");return{left:"".concat(100*Math.max(Math.min(t.measureValues[e].nValue,1),0),"%"),"-webkit-transform":n,"-moz-transform":n,"-o-transform":n,"-ms-transform":n,transform:n}};function P(){t.conditionalColoringProps=h["a"].getValue(u,t.definition.conditionalColoringRef.props,u);Array.isArray(t.conditionalColoringProps)?t.conditionalColoringProps.some((function(e,i){if(t.data.qDef&&t.data.qDef.cId===t.conditionalColoringProps[i].qDef.cId){t.measureIndex=i;t.conditionalColoringProps=t.conditionalColoringProps[i];t.conditionalColoringLayout=h["a"].getValue(r,t.definition.conditionalColoringRef.layout)[i];return true}return false})):t.conditionalColoringLayout=h["a"].getValue(r,t.definition.conditionalColoringRef.layout,r);var e=t.conditionalColoringLayout.conditionalColoring?t.conditionalColoringLayout.conditionalColoring.segments:r.segmentInfo;t.layoutLimits=g["a"].extend([],e.limits);t.layoutColors=_(t,e)}function O(){k=t.conditionalColoringProps.qDef&&t.conditionalColoringProps.qDef.measureAxis?t.conditionalColoringProps.qDef.measureAxis:t.conditionalColoringLayout.measureAxis;if(t.useAutoMinMax){k||(k={});var e=m["a"].getAutoMinMax(t.layoutLimits,t.measureValues&&t.measureValues[t.measureIndex]?t.measureValues[t.measureIndex].value:void 0);k.min=e.min;k.max=e.max}L=k.min;T=k.max}function R(){"function"===typeof t.definition.updateRanges&&t.definition.updateRanges(t.args.properties)}function V(){if(Number.isNaN(+t.activeIndex)||t.activeIndex<0)return;var e="".concat((t.layoutLimits[t.activeIndex].value-L)/(T-L)*100,"%");i.find(".limit-options-arrow-fg").css("left",e);i.find(".limit-options-arrow-bg").css("left",e)}function N(t){var e=Math.min(Math.max(t.startLimit.value,0),1);var i=Math.max(Math.min(t.endLimit.value-t.startLimit.value,1-e),0);return"background-color: ".concat(x(t.pickerModel.color),"; color: ").concat("#000000"===x(t.pickerModel.color)?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.3)","; width: ").concat(100*i,"%; left: ").concat(100*e,"%;")}function z(){t.invalidExpressionIndex=-1;for(var e=0;e<t.layoutLimits.length;e++){var i=t.layoutLimits[e];Number.isNaN(+i.value)&&(t.invalidExpressionIndex=e)}t.hasInvalidExpression=-1!==t.invalidExpressionIndex}t.getColorBackgroundStyle=function(t,e,i){var n=t[e],a=n.startLimit,r=n.endLimit;var o=[];a.gradient&&o.push(new d["a"](x(t[e-1].pickerModel.color)).blend(new d["a"](x(t[e].pickerModel.color)),.5));o.push(x(t[e].pickerModel.color));r.gradient&&t[e+1]&&o.push(new d["a"](x(t[e+1].pickerModel.color)).blend(new d["a"](x(t[e].pickerModel.color)),.5));var s=3===o.length?[0,50,100]:[0,100];return"".concat(N(i)," ").concat(v["a"].getCSSLinearGradient("right",o,s))};t.getSortedSegments=function(){var e=t.layoutLimits.concat().sort((function(t,e){return t.value-e.value}));var i=t.layoutColors;var n=t.sortedSegments?t.sortedSegments.slice(0,i.length):[];var a=T;var r=L;var o={value:0,gradient:false};var s;var l;var c;var u;var d;if(i)for(d=0;d<i.length;d++){l=e[d]?{value:(e[d].value-r)/(a-r),gradient:e[d].gradient}:{value:1,gradient:false};c=x(i[d]);u=i[d].icon;s=n[d];if(s){s.startLimit=o;s.endLimit=l;s.pickerModel.color=c;s.pickerModel.cssClass=u?b["a"].getIconClass(u):""}else{s={startLimit:o,endLimit:l,pickerModel:{color:c,icon:u,cssClass:u?b["a"].getIconClass(u):""}};n.push(s)}o=l}else{s={startLimit:o,endLimit:l,pickerModel:{color:c,icon:u,cssClass:u?b["a"].getIconClass(u):""}};n.push(s)}i&&n.length>i.length&&n.splice(i.length,n.length-i.length);return n};t.onGlyphOrColorChange=function(){C(t,t.sortedSegments);t.$emit("saveProperties")};t.closeColorpickerFoldout=function(e){t.onGlyphOrColorChange();e&&o()(e.target).closest(".color-scale-container").length&&a.a.preventGestures()};var F=t.$on("layoutchanged",(function(){P();(t.nrSegmentsChanged||t.limits.length!==t.layoutLimits.length)&&(t.nrSegmentsInLayoutChanged=true);B()}));t.$on("$destroy",(function(){F()}));function j(e){if("function"===typeof t.definition.updateMeasureValues){var i=t.args.layout;var n=t.args.properties;t.measureValues=t.definition.updateMeasureValues(i,n);return}if(!e||!e[0])return;t.measureValues&&t.measureValues.length===e.length||(t.measureValues=[]);for(var a=0;a<e[0].length;a++)t.measureValues[a]={nValue:(e[0][a].qNum-L)/(T-L),value:e[0][a].qNum}}function H(){if("function"===typeof t.definition.showMeasureValue){var e=t.args.layout;t.showMeasureValues=t.definition.showMeasureValue(e)}}function $(){if(!t.measureValues||0===t.measureValues.length)return;for(var e=0;e<t.measureValues.length;e++)t.measureValues[e].nValue=(t.measureValues[e].value-L)/(T-L)}function B(){z();var e=h["a"].getValue(r,"qHyperCube.qDataPages.0.qMatrix",[[]]);j(e);H();if(!t.hasInvalidExpression){O();$()}if(t.nrSegmentsInLayoutChanged||!t.sliderCreated){t.initializeSlider();G();t.nrSegmentsChanged=false;t.nrSegmentsInLayoutChanged=false}t.checkSliderVisiblility();W()}function W(){t.sortedSegments=t.getSortedSegments();if(!t.layoutLimits||t.layoutLimits.length<1)return;t.sliderCreated=true;I.slider("option",{min:L,max:T,step:M(T,L)});I.slider("values",t.layoutLimits.map((function(t){return"NaN"!==t.value?t.value:(T+L)/2})));t.sliderOptions.min=L;t.sliderOptions.max=T;t.sliderOptions.step=M(T,L);V()}t.addLimit=function(n){var a;var r;var o=t.layoutLimits;var s=function t(e){var i=0;while(e>1){i++;e/=10}return i};var l=t.paletteColors[t.paletteColors.length-1].index===A[0]?A[1]:A[0];if(o.length+1>=t.maxSegments)return;if(o.length>0){a=(o[o.length-1].value+T)/2;r=1e3/Math.pow(10,s(a));a=Math.round(a*r)/r}else a=t.measureValues[t.measureIndex].value;t.limits.push({value:a,gradient:false});var c=t.definition.defaultSegmentColors,u=void 0===c?[]:c;if(u.length>t.paletteColors.length){var d=t.paletteColors.length;w(t,u[d].index,u[d].color)}else w(t,l);t.nrSegmentsChanged=true;e((function(){i.find(".limitInput").focus()}));O();R();t.$emit("saveProperties");n.preventDefault()};t.removeLimit=function(e){t.limits.splice(e,1);t.layoutLimits.splice(e,1);q(t,e);t.sortedSegments.splice(e+1,1);t.nrSegmentsChanged=true;G(-1);O();R();t.$emit("saveProperties")};function G(e){t.hasInvalidExpression&&(e=t.invalidExpressionIndex);"number"!==typeof e&&(e=t.layoutLimits.length-1);t.updateSelectedHandle(t.activeIndex,e);if(-1!==e&&-1===t.activeIndex){i.find(".limit-options-arrow").removeClass("hidden");i.find(".limit-options").removeClass("hidden")}else if(-1===e){i.find(".limit-options-arrow").addClass("hidden");i.find(".limit-options").addClass("hidden")}t.activeIndex=e}t.addDisabled=function(e){return e.length+1>=t.maxSegments};t.initializeSlider=function(){if(t.sliderCreated){I.slider("destroy");t.sliderCreated=false}t.sliderOptions.values=t.layoutLimits.map((function(t){return t.value}));I.slider(t.sliderOptions)};t.checkSliderVisiblility=function(){E=t.layoutLimits;(E.length>0&&I.hasClass("notVisible")||E.length<1&&!I.hasClass("notVisible"))&&I.toggleClass("notVisible")};e((function(){B();G();V()}))}]};var D=e["default"]=S},JCP6:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-button-component style-editor-button" tcl="style-editor" ng-click="openStyleEditor()">\n    <div>\n        <span class="lui-icon  lui-icon--palette"></span>\n        <span class="lui-list__text layer-title ng-binding">{{label}}</span>\n    </div>\n    <span class="lui-icon  lui-icon--next  lui-icon--small"></span>\n</div>';var r=i("6uJb");var o=i("4nJ1");var s={template:a,controller:["$scope",function(t){var e="pp-style-editor-".concat(o["a"].generateId());var i=function e(){return t.data};n["a"].defineLabel(t,t.definition,i,t.args.handler);var a;var s=function e(i){var n=i[t.definition.key];var a=n&&n.items?n.items:{};return Object.keys(a).map((function(t){return{key:t,item:a[t]}})).filter((function(t){return t.item.styleMeasure})).reduce((function(t,e){t[e.key]=e.item;return t}),{})};t.openStyleEditor=function(){var i="function"===typeof t.definition.refFn?t.definition.refFn(t.data,t.args):t.definition.ref;var n=t.definition.key;a="function"===typeof t.definition.defaultValues?t.definition.defaultValues(t.data):t.definition.defaultValues;t.setDefaultProps(i,n);var o=t.getComponentPathAndIndex(i,n);var s={id:e,triggerId:"propertyPanel",title:r["default"].get(t.definition.subtitle||"LayerStyleEditor.component.styleEditor"),definition:t.createSubDefinition(o),propertiesPath:o.path,stepOutCallback:t.stepOutCallback};t.$root.$emit("showSubPanel",s)};t.setDefaultProps=function(e,i){var n=t.args.properties;var r=a;if(Array.isArray(n[e])){if(!n[e].some((function(t){return t.key===i}))){n[e].push(r);t.args.model.setProperties(t.args.properties)}}else{n[e]=[r];t.args.model.setProperties(t.args.properties)}};t.getComponentPathAndIndex=function(e,i){var n=t.args.properties;var a;for(a=0;a<n[e].length;a++){var r=n[e][a];if(r.key===i){e="".concat(e,".").concat(a);break}}return{path:e,index:a}};t.createSubDefinition=function(e){var i="function"===typeof t.definition.items?t.definition.items(t.data):t.definition.items;t.addResetBtn(i);var n=s(i);Object.keys(n).length&&(i.styleMeasures={component:"style-measures",key:t.definition.key,ref:"styling",styleEditorRef:e.path,measuresRef:"qHyperCubeDef.qMeasures",alternativeMeasuresRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",items:n});var a={type:"items",components:"items",items:i};return a};t.addResetBtn=function(e){var i={component:"button",translation:t.definition.resetBtnTranslation||"LayerStyleEditor.component.resetAll",disabled:function e(i){return JSON.stringify(i)===JSON.stringify(t.definition.defaultValues)},action:function e(){t.resetToDefault()},defaultValues:a};e.resetBtn=i};t.resetToDefault=function(){var e=t.definition.ref;var i=t.args.properties;var n=t.definition.key;var r=a;var o=t.getComponentPathAndIndex(e,n);if(JSON.stringify(i[e][o.index])!==JSON.stringify(r)){i[e][o.index]=r;t.args.model.setProperties(t.args.properties)}};t.stepOutCallback=function(){var e=t.definition.ref;var i=t.args.properties;var n=t.definition.key;var r=a;var o=t.getComponentPathAndIndex(e,n);if(JSON.stringify(i[e][o.index])===JSON.stringify(r)){i[e].splice(o.index,1);t.args.model.setProperties(t.args.properties)}}}]};var l=e["default"]=s},JGF7:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-selection-list-component pp-measure-color-component" ng-if="visible" >\r\n\t<div class="label" ng-if="label">\r\n\t\t<div class="title" title="{{label}}">{{label}}</div>\r\n\t</div>\r\n\t<div class="pp-measure-color-colors-wrapper">\r\n\t\t<div class="pp-measure-color-color" ng-repeat="color in colors track by $index" ng-style="{\'background-color\': color}"></div>\r\n\t</div>\r\n</div>\r\n\r\n\r\n\r\n';var r=i("UV1h");var o=i("2Hli");var s={template:a,controller:["$scope",function(t){var e=function e(){return t.data};t.colors=[];function i(){var e=t.args.handler.layout.qHyperCube.qMeasureInfo;t.colors=e.filter((function(t){return o["a"].getValue(t,"coloring.baseColor.color")||o["a"].getValue(t,"baseColor.color")})).map((function(t){if(t.coloring&&t.coloring.baseColor)return r["a"].resolveColor(t.coloring.baseColor);return r["a"].resolveColor(t.baseColor)}))}t.$on("datachanged",(function(){i()}));t.$watch("data",(function(){i()}));n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e)}]};var l=e["default"]=s},JQia:function(t,e,i){"use strict";i.r(e);var n=i("mWu2");var a=i("uVcZ");var r=i("G1wx");var o=i("6uJb");var s=i("2Hli");var l=i("8H7g");var c=i("4Ox4");var u=i("OnHE");var d=i("kPub");var p=i("Co6/");var f=i("4nJ1");var h=i("U7Ny");function v(t){v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return v(t)}e["default"]={name:"image-picker-list",template:c["a"],controller:["$scope","$element","$timeout",function(t,e,i){var c=t.args.cache;var h="image-pick_";var g=u["a"].create();var m;var b="function"===typeof t.definition.refFn?t.definition.refFn(t.data,t.args):t.definition.ref;var y="function"===typeof t.definition.targetDimIndexFn?t.definition.targetDimIndexFn(t.data,t.args):t.definition.targetDimIndex;t.expandClicked=function(t,e){if(t.target.classList.contains("pp-nm-di__draggable"))return;e.expanded=!e.expanded;c.put(h+e.id,e.expanded)};var x=null;t.addClicked=function(){q()};t.getAddLabel=function(){return o["default"].get(t.definition.addTranslation)};function _(){return s["a"].getValue(t.data,b,[])}function C(e){s["a"].setValue(t.data,b,e)}function w(){t.sortableItemLists.reset();g.resetTitles();var e=_();e.forEach((function(e){var i;var n=e.cId;var r=null!==(i=e.type)&&void 0!==i?i:"media";var s={title:function t(){return r?o["default"].get("properties.imagePicker.".concat(r)):""},isInvalid:function i(){if("url"===e.type){var a=e.ref;var r="object"===v(a);if(r){var o=p["a"].getAttrExps(t.args.properties,y);var s=p["a"].findAttrIndex(o,n);return-1!==s&&!!o[s].qError}}return false},component:a["a"].getComponent("items"),definition:{type:"items",items:t.definition.items},data:e,args:t.args,id:n,type:"expression",expanded:c.get(h+n)||true,sortable:false!==t.definition.allowMove,templateSrc:"pp-data-item.ng.html",markerClass:"pp-dimension"};if("url"===e.type){var l=e.ref;var u="object"===v(l);if(u){var f=p["a"].getAttrExps(t.args.properties,y);var g=p["a"].findAttrIndex(f,n);-1!==g&&d["a"].extract(f[g].qExpression).then((function(t){s.isValidExtraction=t.isValid;s.extractedField=t.field}))}}m.addSortableItem(s)}))}function q(){var e={ref:void 0,type:"media",size:"small",cId:f["a"].generateId()};var i=_();i.push(e);C(i);t.$emit("saveProperties");M()}t.removeItem=function(e){var i=_();var n=p["a"].findAttrIndex(i,e.id);i.splice(n,1);var a=p["a"].getAttrExps(t.args.properties,y);var r=p["a"].findAttrIndex(a,e.id);-1!==r&&p["a"].deleteAttributeExpression(t,a,r);t.$emit("saveProperties")};t.duplicateItem=function(e){var i=f["a"].extend(true,{},e.data);i.cId=f["a"].generateId();var n=_();n.push(i);C(n);S();"url"===i.type&&p["a"].setAttributeExpressionValue(t,i,y);t.$emit("saveProperties")};t.openContextMenu=function(e,i){var a=n["default"].getService("qvContextMenu").menu();a.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i)}});t.showNextPossibleItem(m)&&a.addItem({translation:"Common.Duplicate",tid:"duplicate",select:function e(){t.duplicateItem(i)}});x=n["default"].getService("qvContextMenu").show(a,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};function M(){i((function(){var t=e.find(".pp-nm-hcd__lists");var i="image-pick_";var n=e.find("[tid='".concat(i,"'] .pp-nm-hcd__list-items"));var a=n.children().last();a[0]&&(t[0].scrollTop=a[0].offsetTop-1)}),100)}t.sortableItemLists=l["a"].create({options:{direction:"vertical",listKey:"list",scrollSelector:".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",preventClickDefault:false,gesture:{name:"swipe",options:{radiusThreshold:r["a"].treatAsDesktop()?4:0,preventDefault:false}}},onBegin:function e(i){this._super.apply(this,arguments);t.movingItem=i;S()},onMove:function e(){var i=this._super.apply(this,arguments);if(i){delete t.movingItem;var n=m.get().map((function(t){return t.data}));var a=_();var r=0;a.forEach((function(e,i){if(e.id===t.definition.id){a[i]=n[r];r+=1}}));C(a);t.$emit("saveProperties")}return i},onCancel:function e(){this._super.apply(this,arguments);delete t.movingItem}});m=t.sortableItemLists.createList(1,{title:o["default"].get(t.definition.translation),tid:"image-pick_",getAddLabel:t.getAddLabel,addClicked:t.addClicked,descriptionless:true});function S(){m.items.forEach((function(t){t.expanded=false;c.put(h+t.id,false)}))}t.isItemDraggable=function(t){if(!t.sortable)return false;var e=_();return e.length>1};t.getItemHeaderTitle=function(t){return t.title()};t.showItemDescription=function(){return false};t.showNextPossibleItem=function(e){var i=t.getUndraggedItems(e);var n=i.length;return n<t.definition.max};t.showNextPossibleItemDescription=function(){return false};t.getUndraggedItems=function(t){return t.get((function(t){return!t.isDragged}))};t.$watchCollection("data.".concat(b),w);t.$on("$destroy",(function(){x&&x.close()}))}]}},JRPt:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("6uJb");var r='<div class="pp-component pp-buttongroup-component" ng-if="visible" tcl="buttongroup">\n\t<div class="label" ng-if="label" title="{{label}}" ng-class="{ \'disabled\': readOnly }">\n\t\t{{label}}\n\t</div>\n\n\t<div class="value">\n\t\t<div class="lui-buttongroup" ng-if="!loading">\n\t\t\t<button ng-repeat="option in options track by option.value" class="lui-button" ng-disabled="readOnly"\n\t\t\t\tng-class="{ \'lui-active\': option.value == value, \'small-icon\' : definition.smallIconFont }"\n\t\t\t\tqva-activate="select(option.value)" tid="{{option.value}}"\n\t\t\t\tq-title-translation="{{option.tooltip || option.label}}">\n\t\t\t\t<span class="lui-button__text">{{option.label}}</span>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class="pp-loading-container" ng-if="loading">\n\t\t\t<div class="pp-loader qv-loader"></div>\n\t\t</div>\n\t\t<div ng-if="errorMessage" class="pp-invalid error">{{errorMessage}}</div>\n\t</div>\n</div>\n';var o={template:r,controller:["$scope",function(t){var e=function e(){return t.data};t.options=[];t.select=function(e){t.value=e;"function"===typeof t.definition.change&&t.definition.change(t.data,t.args.handler);t.$emit("saveProperties")};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineValue(t,t.definition,e);function i(e){t.loading=true;t.errorMessage="";n["a"].fillOptions(t.definition,e||t.data,t.args.handler,t.options,t.args).then((function(){t.errorMessage="";t.loading=false}),(function(){t.errorMessage=a["default"].get("Properties.PromiseFailed");t.loading=false}))}i();t.$on("datachanged",(function(t,e){i(e)}))}]};var s=e["default"]=o},K6JV:function(t,e,i){"use strict";i.r(e);var n=i("Z9ZH");var a=i.n(n);var r=i("TmNk");var o=i.n(r);var s=i("mWu2");var l=i("uVcZ");var c=i("G1wx");var u=i("zBv7");var d=i("6uJb");var p=i("4nJ1");var f=i("395F");var h=i("gF9a");var v=i("sYuT");var g=i("2Hli");var m=i("8H7g");var b=i("QCD8");var y=i("4Ox4");var x=i("OnHE");var _=i("VnWy");var C=i("Fbef");var w=i("zr60");var q=i("T0sl");var M=i("U7Ny");var S=i("+Yuz");var D=i("acVu");e["default"]={name:"columns",template:y["a"],controller:["$scope","$element","$timeout","luiPopover",function(t,e,i,n){var r=t.args.cache;var y="columns_";var M=l["a"].getComponent("items");var I=x["a"].create();var k=_["a"].create(t,n);t.expandClicked=function(t,e){if(e.disabled||t.target.classList.contains("pp-nm-di__draggable"))return;e.expanded=!e.expanded;r.put(y+e.id,e.expanded)};var L=null;var T=null;var E=null;var A;function P(){A.items.forEach((function(t){t.expanded=false;r.put(y+t.id,false)}))}function O(e){if(T){T.close();T=null}e&&e.target.classList.contains("pp-toplist-add-button")&&a.a.preventGestures();t.adding=false}function R(e){if(L){L.close();L=null}e&&e.target.classList.contains("pp-toplist-add-button")&&a.a.preventGestures();t.addType=null}function V(){i((function(){var t=e.find(".pp-nm-hcd__lists");var i=t.find(".pp-nm-hcd__list-items").children().last();i[0]&&(t[0].scrollTop=i[0].offsetTop-1)}),100)}function N(e){t.args.handler.addFieldDimension(e.value,"").then((function(){t.$emit("saveProperties",t.data);O();V()}))}function z(e){t.args.handler.addLibraryDimension(e.libraryId).then((function(){t.$emit("saveProperties",t.data);O();V()}))}function F(e){t.args.handler.addLibraryMeasure(e.libraryId).then((function(){t.$emit("saveProperties",t.data);O();V()}))}function j(e){t.args.handler.addExpressionMeasure(e.value,"").then((function(){t.$emit("saveProperties",t.data);O();V()}))}function H(e,i){t.addType=e;R();P();var a;var r={app:t.args.app,closeAddPopover:O};if("dimension"===e){a=f["a"];r.addFieldDimension=N;r.addLibraryDimension=z}else{a=h["a"];r.addLibraryMeasure=F;r.addExpressionMeasure=j}T=n.show({template:a.template,controller:a.controller,input:r,alignTo:i,dock:"bottom"})}function $(e){if(t.adding){R();t.adding=false;return}var i=e.currentTarget;L=n.show({template:v["a"].template,controller:v["a"].controller,input:{items:[{tid:"dimension",select:function t(){H("dimension",i)},disabled:function e(){return t.args.handler.getDimensions().length>=t.args.handler.maxDimensions()},translation:"Common.Dimension"},{tid:"measure",select:function t(){H("measure",i)},disabled:function e(){return t.args.handler.getMeasures().length>=t.args.handler.maxMeasures()},translation:"Common.Measure"}],closeTypeFoldout:R},alignTo:i});L.closing.then((function(e){e&&!e.target.classList.contains("lui-button__text")&&(t.adding=false)}));L.closed.then((function(){L=null}));t.adding=true}t.addClicked=function(t){$(t)};t.allowSaveLibrary=w["a"].allowSaveLibrary;t.saveLibraryItem=function(e){var i=e.data.qDef;var n;var a=false;if("measure"===e.type){n=function i(n){w["a"].setNewProperties(t.args.properties,e,n.id,"qMeasures");t.$emit("saveProperties")};w["a"].saveMeasureAsLibrary(i,n)}else{n=function i(n){if(!a){w["a"].setNewProperties(t.args.properties,e,n.id,"qDimensions");t.$emit("saveProperties");a=true}};w["a"].saveDimensionAsLibrary(i,n)}};t.hasMultipleAddOptions=function(){return true};t.getAddLabel=function(){return d["default"].get("properties.columns.add")};function B(){var e=g["a"].getValue(t.data,t.definition.sortIndexRef);if(void 0===e){e=q["a"].columnOrder.create(t.args.handler.getDimensionLayouts(),t.args.handler.getMeasureLayouts());g["a"].setValue(t.data,t.definition.sortIndexRef,e);t.$emit("saveProperties")}else if(e.length&&"number"!==typeof e[0]){g["a"].setValue(t.data,t.definition.sortIndexRef,e.map((function(t){return t.dataColIx})));t.$emit("saveProperties")}}function W(){B();var e=g["a"].getValue(t.data,t.definition.sortIndexRef);var i=t.data.qHyperCubeDef.qDimensions.length;t.sortableItemLists.reset();I.resetTitles();e.forEach((function(e,n){var a;var s;var l;var c;var d;var p;var f;var h;if(e<i){s=e;l=t.data.qHyperCubeDef.qDimensions[s];c="dimension";d=l.qDef.cId;a=t.definition.items.dimensions;f=t.args.handler.getDimensionLayout(d)}else{s=e-i;l=t.data.qHyperCubeDef.qMeasures[s];d=l.qDef.cId;c="measure";a=t.definition.items.measures;f=t.args.handler.getMeasureLayout(d);f||(f=t.args.handler.getMeasureLayouts()[s]);h=k.isChangeable(l)}if("dimension"===c){var v=f;if(v){p=I.getCachedDimensionTitle(v);I.getDimensionTitle(v,l,true,t.args.app).then((function(t){p=t}))}}else{var g=f;if(g){p=I.getCachedMeasureTitle(g);I.getMeasureTitle(g,l,true,t.args.app).then((function(t){p=t}))}}var m={getItemLayout:function t(){return f},title:function t(){return p},isInvalid:function t(){if("dimension"===c){var e=this.getItemLayout();return e&&!!e.qError&&!u["a"].isCalcCondNotCalculatedErr(e.qError)}var i=this.getItemLayout();return i&&!!i.qError},component:M,definition:{type:"items",items:a.items},data:l,args:t.args,id:d,expanded:r.get(y+d)||false,index:n,type:c,sourceIndex:s,dataColIx:e,templateSrc:"pp-data-item.ng.html",markerClass:"dimension"===c?"pp-dimension":"pp-measure",sortable:false!==t.definition.allowMove};if(h){m.canChangeMeasureAggregation=true;m.currentAggregation=k.getAggregation(o.a.measureBase.getExpression(l));m.remainder=k.getRemainder(o.a.measureBase.getExpression(l))}A.addSortableItem(m)}))}t.duplicateItem=function(e){if("dimension"===e.type){var i=p["a"].extend(true,{},e.data);delete i.qDef.cId;t.args.handler.addDimension(i,false).then((function(){P();t.$emit("saveProperties")}))}else{var n=p["a"].extend(true,{},e.data);delete n.qDef.cId;t.args.handler.addMeasure(n,false).then((function(){P();t.$emit("saveProperties")}))}};t.removeItem=function(e){"dimension"===e.type?t.args.handler.removeDimension(e.sourceIndex).then((function(){t.$emit("saveProperties")})):t.args.handler.removeMeasure(e.sourceIndex).then((function(){t.$emit("saveProperties")}))};t.openGlobalContextMenu=function(e){var i=s["default"].getService("qvContextMenu").menu();var n=t;Object(D["b"])("COPY_PASTE_MEASURE")&&i.addItem({translation:"Common.Paste",tid:"paste",select:function t(){S["a"].pasteItem(P,n)}});E=s["default"].getService("qvContextMenu").show(i,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.openContextMenu=function(e,i){e.stopPropagation();var n=s["default"].getService("qvContextMenu").menu();var a=t;Object(D["b"])("COPY_PASTE_MEASURE")&&n.addItem({translation:"Common.Copy",tid:"copy",select:function t(){S["a"].copyItem(i,a)}});Object(D["b"])("DUPLICATE")&&n.addItem({translation:"Common.Duplicate",tid:"duplicate",select:function e(){t.duplicateItem(i)}});n.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i)}});E=s["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.$on("pp-open-path",(function(t,e){var i=e.split(".");var n=i[0];var a=i[1];if("columns"===n&&a){r.put(y+a,true);V()}}));t.add=function(e){e&&e.trim().length&&("measure"===t.addType?j({value:e,label:e}):"dimension"===t.addType&&N({value:e,label:e}))};t.sortableItemLists=m["a"].create({options:{direction:"vertical",listKey:"list",scrollSelector:".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",preventClickDefault:false,gesture:{name:"swipe",options:{radiusThreshold:c["a"].treatAsDesktop()?4:0,preventDefault:false}}},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function t(e){this._super.apply(this,arguments);e.isDragged=true;P()},onMove:function e(){var i=b["a"].storeColumnWidths(t.data.qHyperCubeDef);var n=this.getIndexOfItem(arguments[0]);if(-1===n){this.onCancel();return false}this._super.apply(this,arguments);var a=this.getIndexOfItem(arguments[0]);if(-1===a){this.onCancel();return false}a<n&&n--;t.data.qHyperCubeDef.qColumnOrder=A.get().filter((function(t){return"empty-item"!==t.id})).map((function(t){return t.dataColIx}));b["a"].fixTableHypercubeOrders(t.data.qHyperCubeDef);b["a"].updateColumnInfoOrders(t.data.qHyperCubeDef,i);t.$emit("saveProperties");return true},onCancel:function t(e){this._super.apply(this,arguments);e&&(e.isDragged=false)},onEnd:function e(i){i&&(i.isDragged=false);t.$apply()}});A=t.sortableItemLists.createList(1,{title:d["default"].get("Common.Columns"),tid:"columns",getAddLabel:t.getAddLabel,addClicked:t.addClicked,descriptionless:true});t.isItemDraggable=function(e){if(!e.sortable)return false;var i=t.args.properties.qHyperCubeDef;var n=i.qDimensions.length+i.qMeasures.length;return n>1};t.showChangeAggregation=function(t){return t.canChangeMeasureAggregation&&!t.isDragged};t.getItemHeaderTitle=function(e){return t.showChangeAggregation(e)?e.remainder:e.title()};t.openChangeAggregationPopover=function(e,i){if(!t.showChangeAggregation(i))return;var n={isOpenButton:function t(e){return e.classList.contains("pp-nm-di__header-aggregation")},onAggregationChanged:function t(e,i){C["a"].gather({expression:e.extractedField,aggregation:i})}};k.openPopover(e,i.id,i,n)};t.isChangeAggregationPopoverOpen=function(t){return k.isPopoverOpen(t.id)};t.showItemDescription=function(){return false};t.showNextPossibleItem=function(e){var i=t.getUndraggedItems(e);var n=0;var a=0;var r=0;var o=0;i.forEach((function(t){"dimension"===t.type?n++:a++}));r=t.args.handler.dimensionDefinition.max-n;o=t.args.handler.measureDefinition.max-a;return!!r||!!o};t.showNextPossibleItemDescription=function(){return false};t.getUndraggedItems=function(t){return t.get((function(t){return!t.isDragged}))};t.$watchCollection("data.qHyperCubeDef.qColumnOrder",W);t.$watchCollection("data.qHyperCubeDef.qDimensions",W);t.$watchCollection("data.qHyperCubeDef.qMeasures",W);t.$on("$destroy",(function(){R();O();E&&E.close()}))}]}},"KM4/":function(t,e,i){"use strict";var n=i("6uJb");var a=i("2Hli");var r=i("pRem");var o=i("acVu");function s(t,e){var i=e.getDimensions();var n=e.getMeasures();var r=a["a"].getValue(t,"color.mode");i.length>1&&t.color?t.color.persistent=true:"byExpression"===r&&0===n.length&&a["a"].setValue(t,"color.mode","primary")}function l(t){var e;if(t.getDimensions().length>1){e=t.getSorting().indexOf(0);0!==e&&t.changeSorting(e,0)}}function c(t,e){a["a"].setValue(e,"color.dimensionId",void 0)}function u(t){if(t.qHyperCubeDef.qDimensions.length>1)r["a"].moveCustomTooltipAttrs(t);else{r["a"].setCustomTooltipAttrs(t);r["a"].unquarantineCustomTooltipAttrs(t)}}function d(t,e){if(1===t.qHyperCubeDef.qDimensions.length){r["a"].setCustomTooltipAttrs(t);r["a"].unquarantineCustomTooltipAttrs(t)}t.qHyperCubeDef.qDimensions.length>1&&r["a"].moveCustomTooltipAttrs(t,e)}function p(t,e){t.qHyperCubeDef.qDimensions.length>0?r["a"].moveCustomTooltipAttrs(t,e):r["a"].quarantineCustomTooltipAttrs(t,e)}function f(t,e){if(t.qHyperCubeDef.qDimensions.length>1)r["a"].moveCustomTooltipAttrs(t,e);else{r["a"].quarantineCustomTooltipAttrs(t,e);r["a"].setCustomTooltipAttrs(t);r["a"].unquarantineCustomTooltipAttrs(t)}}var h={dimensions:{min:1,max:15,description:function t(e,i){var a=e.qHyperCubeDef.qDimensions.length;var r=i>=a-1?"Visualizations.Descriptions.Rectangle":"Visualizations.Descriptions.Group";return n["default"].get(r)},add:function t(e,i,n){s(i,n);Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&u(i)},move:function t(e,i,n){l(n);s(i,n);Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&d(i,e)},remove:function t(e,i,n){c(e,i,n);s(i,n);Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&p(i,e)},replace:function t(e,i,n,r){a["a"].getValue(r,"color.dimensionId")===i.qDef.cId&&a["a"].setValue(r,"color.dimensionId",e.qDef.cId);Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&f(r,i)}},measures:{min:1,max:1,description:function t(e,i){var a=0===i?"Visualizations.Descriptions.Size":"Visualizations.Descriptions.Color";return n["default"].get(a)},add:function t(e,i,n){s(i,n)},move:function t(e,i,n){s(i,n)},remove:function t(e,i,n){s(i,n)}}};e["a"]=h},LB5b:function(t,e,i){"use strict";i.r(e);var n=i("TmNk");var a=i.n(n);var r='<div tcl="measures">\n\n\t\x3c!-- Expression --\x3e\n\t<div class="pp-component pp-string-component" tcl="string">\n\t\t<div class="label" q-translation="Common.Expression"></div>\n\t\t<div class="value">\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" maxlength="255" spellcheck="false" ng-readonly="expression.isLocked()"\n\t\t\t\t pp-input-validator pp-validation-on-result="expression.setIsValid(isValid)" pp-expression-editor="expression.value" editor-disabled="!expression.isLocked()"\n\t\t\t\t expression-type="measure" pp-expression-editor-on-apply="expression.onExpressionEditorApply(value)" ng-model="expression.value"\n\t\t\t\t ng-class="{ \'lui-invalid\': !expression.isValid, \'is-expression\': expression.isLocked() }" ng-change="change()" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }"\n\t\t\t\t qva-model-onkeyup tid="field" />\n\n\t\t\t\t<button class="lui-button  lui-input-group__item  lui-input-group__button" pp-expression-editor="expression.value" pp-expression-editor-on-apply="expression.onExpressionEditorApply(value)"\n\t\t\t\t expression-type="measure" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression edit-expression active"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="expression.isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n  </div>\n  \n  \x3c!-- Modifier --\x3e\n\t<div include-pp-component x-component="expandableLightComponent" x-definition="modifiersDefinition" x-data="data" x-args="args" ng-show="showModifiersTab()"></div>\n\n\t\x3c!-- Label expression --\x3e\n\t<div class="pp-component pp-string-component" tcl="string">\n\t\t<div class="label" q-translation="Common.Label"></div>\n\t\t<div class="value">\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input lui-input-group__item lui-input-group__input" type="text" maxlength="255" spellcheck="false" ng-readonly="label.isLocked()"\n\t\t\t\t pp-input-validator pp-validation-on-result="label.setIsValid(isValid)" pp-expression-editor="label.getValueForExpressionEditor()"\n\t\t\t\t editor-disabled="!label.isLocked()" expression-type="StringExpression" pp-expression-editor-on-apply="label.onExpressionEditorApply(value)"\n\t\t\t\t ng-model="label.value" ng-class="{ \'lui-invalid\': !label.isValid, \'is-expression\': label.isLocked() }" ng-change="change()"\n\t\t\t\t ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" qva-model-onkeyup tid="label" pp-placeholder="expression.value"\n\t\t\t\t pp-placeholder-suppress-equal="true" />\n\n\t\t\t\t<button class="lui-button lui-input-group__item lui-input-group__button" pp-expression-editor="label.getValueForExpressionEditor()"\n\t\t\t\t pp-expression-editor-on-apply="label.onExpressionEditorApply(value)" expression-type="StringExpression" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--expression edit-expression" ng-class="{ \'active\': label.interpretAsExpression() }"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="label.isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n\t</div>\n</div>';var o=i("GG1N");var s=i("2Hli");var l=i("ESef");var c=i("VIIj");var u=i("khNO");var d={template:r,controller:["$scope",f]};var p=e["default"]=d;function f(t){var e=t.definition.ref?"".concat(t.definition.ref,"."):"";var i=function e(){return t.data};var n=function i(n){if(void 0!==t.definition.labelRef)return t.definition.labelRef;return e+a.a.measureBase.getLabelRef(n)};var r=function i(n){if(void 0!==t.definition.labelExpressionRef)return t.definition.labelExpressionRef;return e+a.a.measureBase.getLabelExpressionRef(n)};o["a"].defineChange(t,t.args.handler);t.expression=d();t.expandableLightComponent=u["default"];t.modifiersDefinition=c["a"];t.showModifiersTab=function(){return!t.definition.hideModifiersTab};t.label=p();function d(){var n={definition:{type:"string",refFn:function i(){if("string"===typeof t.definition.expressionRef)return t.definition.expressionRef;return"".concat(e).concat(a.a.measureBase.getExpressionRef(t.data))},expression:"always"},isLocked:function t(){return f(n.value)},isValid:true,setIsValid:function t(e){n.isValid=e},onExpressionEditorApply:function e(i){n.value=i;t.change()}};o["a"].defineValue(n,n.definition,i,"value");return n}function p(){var e={isValid:true,setIsValid:function t(i){e.isValid=i},isLocked:function t(){return f(e.value)},onExpressionEditorApply:function i(n){var a;if(n){a=n.qStringExpression.qExpr;a&&"="!==a.charAt(0)&&(a="=".concat(a))}e.value=a;t.change()},interpretAsExpression:function t(){var i=e.value;return i&&"="===i.charAt(0)},getValueForExpressionEditor:function t(){var i=e.value;e.interpretAsExpression()&&(i={qStringExpression:{qExpr:i}});return i}};Object.defineProperty(e,"value",{get:function t(){var e=r(i());var a=n(i());var o=s["a"].getValue(i(),e);return o||s["a"].getValue(i(),a)},set:function t(e){var a=r(i());var o=n(i());var l=e&&0===e.indexOf("=")?a:o;s["a"].setValue(i(),l,e||void 0);var c=l===a?o:a;s["a"].setValue(i(),c,void 0)}});return e}function f(t){if(!t)return false;return-1!==t.indexOf("\n")||t.length>l["a"].name}}},LbcM:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-button-component" tcl="button">\n\t<button class="lui-button" qva-activate="action();" ng-disabled="disabled">{{label}}</button>\n</div>\n';var r={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineCustom(t,t.args.handler,"action");n["a"].defineCustom(t,t.args.handler,"disabled")}]};var o=e["default"]=r},N5Bn:function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("GG1N");var r='<div class="pp-component pp-expandable-items-component" tcl="expandable-items">\n\t<ul class="pp-expandable-list">\n\t\t<li ng-repeat="item in items track by item.key" tid="{{item.key}}">\n\t\t\t<div ng-if="::!isAutoChart" class="pp-expandable-list-header" ng-click="expandClicked(item)" ng-class="{ \'expanded\': item.expanded }">\n\t\t\t\t<i class="toggle-expand  lui-icon  {{ item.expanded ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }}"></i>\n\t\t\t\t<span class="text" title="{{item.label}}">{{item.label}}</span>\n\t\t\t</div>\n\t\t\t<div ng-if="::isAutoChart" class="pp-expandable-list-header-auto-chart" ng-click="expandClicked(item)" ng-class="{ \'expanded\': item.expanded }">\n\t\t\t\t<span class="text" title="{{item.label}}">{{item.label}}</span>\n\t\t\t\t<span class="toggle-expand lui-icon lui-icon--small lui-icon--arrow-right" ng-class="{ \'expanded\': item.expanded }"></span>\n\t\t\t</div>\n\t\t\t<div class="pp-expandable-list-content" ng-if="item.expanded" ng-class="{ \'grouped\': definition.grouped }">\n\t\t\t\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="item.data" x-args="args"></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>';var o={template:r,controller:["$scope",function(t){var e=t.definition.items||{};var i=function e(){return t.data};var r=t.args.cache;var o="expanded_".concat(t.translation||t.label,"_");if("container"===t.data.visualization){var s;t.isAutoChart="auto-chart"===(null===(s=t.args.model.items.currentModel)||void 0===s?void 0:s.genericType)}else t.isAutoChart="auto-chart"===t.data.visualization;t.expandClicked=function(t){t.expanded=!t.expanded;r.put(o+t.key,t.expanded)};function l(){t.items=Object.keys(e).filter((function(i){var n=e[i];if("function"===typeof n.show)return n.show(t.data,t.args.handler,t.args);if("boolean"===typeof n.show)return n.show;return true})).map((function(s){var l=e[s];var c=r.get(o+s);var u={component:n["a"].findComponent(l),definition:l,data:t.data,expanded:c||false,key:s};a["a"].defineLabel(u,l,i,t.args.handler);return u}))}t.$on("datachanged",(function(){l()}));t.$watch("data",(function(){l()}));a["a"].defineVisible(t,t.args.handler)}]};var s=e["default"]=o},NTho:function(t,e,i){"use strict";var n=i("ZszH");var a=i("9oDI");var r={addAggregation:o};e["a"]=r;function o(t,e){if("string"!==typeof t)throw new Error("Expression-assembler: Aggregation must be a string");if("string"!==typeof e)throw new Error("Expression-assembler: Content must be a string");var i=a["a"].SYMBOLS.FUNCTION.LEFT;var r=a["a"].SYMBOLS.FUNCTION.RIGHT;var o=n["a"].getFormattedAggregation(t);var s=o+i+e+r;return s}},NWoE:function(t,e,i){"use strict";var n=i("b5IE");var a=i("WoAn");var r=n["a"].extend("Circle",{init:function t(e,i,n){this._super();a["a"].apply(this,[e,i,n])},containsPoint:a["a"].prototype.pointInside,intersectsLocalLine:a["a"].prototype.intersectsLine,intersectsLocalRect:a["a"].prototype.intersectsRect,getLocalPoints:a["a"].prototype.getPoints,getLocalBoundingRect:function t(){return{x:this.cx-this.r,y:this.cy-this.r,width:2*this.r,height:2*this.r}},set:function t(){a["a"].prototype.set.apply(this,[].slice.call(arguments));this.invalidateBounds()}});Object.keys(a["a"].prototype).forEach((function(t){!r.prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","intersectsRect"].indexOf(t)<0&&(r.prototype[t]=a["a"].prototype[t])}));e["a"]=r},Nc9l:function(t,e,i){"use strict";var n=i("SOxp");e["a"]=n["a"].extend({init:function t(){this._listeners={}},listen:function t(e,i,n){if("function"!==typeof i)return this;this._listeners[e]||(this._listeners[e]=[]);this._listeners[e].push({callback:i,scope:n});return this},stopListen:function t(e,i,n){var a=this._listeners[e];var r;if(a)for(r=a.length-1;r>=0;r-=1)i?(n&&n===a[r].scope&&a[r].callback===i||!n&&a[r].callback===i)&&a.splice(r,1):a.splice(r,1);return this},fire:function t(e,i){var n=e;"string"!==typeof n&&(n=e.getType());var a=this._listeners[n];if(a)for(var r=a.length-1;r>=0;--r)"string"===typeof e?a[r].callback.apply(a[r].scope?a[r].scope:this,i||[]):a[r].callback.apply(a[r].scope?a[r].scope:this,[e]);return this},hasListener:function t(e){var i=e;"string"!==typeof i&&(i=e.getType());return this._listeners&&this._listeners[i]&&this._listeners[i].length}})},Nj0e:function(t,e,i){"use strict";var n=i("h2z3");function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function s(t,e,i){e&&o(t.prototype,e);i&&o(t,i);return t}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&c(t,e)}function c(t,e){c=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return c(t,e)}function u(t){var e=f();return function i(){var n=h(t),a;if(e){var r=h(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return d(this,a)}}function d(t,e){if(e&&("object"===a(e)||"function"===typeof e))return e;return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function h(t){h=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return h(t)}var v=function(t){l(i,t);var e=u(i);function i(){r(this,i);return e.apply(this,arguments)}s(i,[{key:"getDimensions",value:function t(){return[]}},{key:"getMeasures",value:function t(){return[]}}]);return i}(n["a"]);e["a"]=v},Oc2G:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("Nc9l");var o=i("MoEg");function s(){this._layoutComponents=[];this._componentSizes=[]}s.prototype={addComponent:function t(e){var i=this._layoutComponents;this.removeComponent(e);i.push(e)},removeComponent:function t(e){var i=this._layoutComponents;for(var n=0;n<i.length;++n)if(i[n]===e){i.splice(n,1);return}},_reduceLayoutRectForComponents:function t(e,i,n,a,r,o){var s;for(s=0;s<e.length;++s){if(!e[s]||!["left","right","bottom","top"].includes(e[s].dock)||!o(e[s]))continue;e[s].calculateRelevantSize(i,n,a);if(!e[s].isVisible(r))continue;e[s].relevantSize=Math.round(e[s].relevantSize);e[s].reduceLayoutRect(i)}},_reducePreliminaryLayoutRectForComponents:function t(e,i,n,a,r){var o;for(o=0;o<e.length;++o){if(!e[o]||!["left","right","bottom","top"].includes(e[o].dock)||!r(e[o]))continue;e[o].calculatePreliminaryRelevantSize?e[o].calculatePreliminaryRelevantSize(i,n):e[o].calculateRelevantSize(i,n);if(!e[o].isVisible(a))continue;e[o].reduceLayoutRect(i)}},_reduceComponentRectBySpacingH:function t(e,i,n,a){var r;var o;for(r=0;r<n.length;++r){o=n[r].perpendicularlyRelevantSpacing;if(o&&n[r].isVisible(a)){if(o.left>e.x&&e.x>=0){e.width-=o.left-e.x;e.x=o.left}o.right>i.width-e.x-e.width&&(e.width-=o.right-(i.width-e.x-e.width-i.x))}}},_reduceComponentRectBySpacingV:function t(e,i,n,a){var r;var o;for(r=0;r<n.length;++r){o=n[r].perpendicularlyRelevantSpacing;if(o&&n[r].isVisible(a)){if(o.top>e.y&&e.y>=0){e.height-=o.top-e.y;e.y=o.top}o.bottom>i.height-e.y-e.height&&(e.height-=o.bottom-(i.height-e.y-e.height-i.y))}}},_layoutComponent:function t(e,i,n,a){e&&e.insertAdjacentTo(e.dock&&"center"!==e.dock?e.isVertical()?n.x:n.y:a,e.isVisible(i))},layout:function t(e,i,n,a,r){var s=2;e=new o["a"](e.x,e.y,e.width,e.height);n=new o["a"](n.x,n.y,n.width,n.height);var d=n.width/e.width;var p=n.height/e.height;var f;var h=this._layoutComponents;h.sort((function(t,e){if("center"===t.dock)return"center"===e.dock?0:-1;if("center"===e.dock)return 1;return t.layoutOrder-e.layoutOrder}));e=new o["a"](e.x,e.y,e.width-2*s,e.height-2*s);var v=new o["a"](e.x,e.y,e.width,e.height);var g={x:new o["a"],y:new o["a"]};u.apply(this,[v,e,i,a,r]);v.x+=s;v.y+=s;g.x.set(v.x,v.y,v.width,v.height);g.y.set(v.x,v.y,v.width,v.height);for(var m=0;m<h.length;++m){h[m].setLayoutToContainerRatios(d,p);this._layoutComponent(h[m],i,g,v);f=c.call(this,h[m]);h[m].updateSize(!f||f.rect.width!==h[m].rect.width||f.rect.height!==h[m].rect.height);l.call(this,h[m])}}};function l(t){var e=this._componentSizes.filter((function(e){return e.component===t}))[0];if(!e){e={component:t};this._componentSizes.push(e)}e.rect=t.rect.clone()}function c(t){return this._componentSizes.filter((function(e){return e.component===t}))[0]}function u(t,e,i,n,a){var r;var o=this._layoutComponents.slice();var s=[{fn:"_reduceComponentRectBySpacingV",dock:["left","right"]},{fn:"_reduceComponentRectBySpacingH",dock:["top","bottom"]}];"vertical"===n&&s.reverse();o.sort((function(t,e){return(t.reductionOrder||1e3)-(e.reductionOrder||1e3)}));for(r=0;r<o.length;r++){o[r].perpendicularlyRelevantSpacing={top:0,left:0,right:0,bottom:0};o[r].preRelevantSizeCalculation&&o[r].preRelevantSizeCalculation()}var l=t.clone();s.forEach((function(t){this._reducePreliminaryLayoutRectForComponents(o,l,e,i,(function(e){return e&&t.dock.indexOf(e.dock)>=0}))}),this);s.forEach((function(t){this[t.fn](l,e,o,i)}),this);if(a&&a()){l=t.clone();s.forEach((function(t){this._reducePreliminaryLayoutRectForComponents(o,l,e,i,(function(e){return e&&t.dock.indexOf(e.dock)>=0}));this[t.fn](l,e,o,i)}),this)}s.forEach((function(n){this._reduceLayoutRectForComponents(o,t,e,l,i,(function(t){return t&&n.dock.indexOf(t.dock)>=0}))}),this);s.forEach((function(n){this[n.fn](t,e,o,i)}),this)}var d=s;var p=i("jRMJ");var f=i("WwCo");var h=i("bPi8");var v=i("7xSA");var g=i("6uJb");var m=i("ohbW");var b=26;var y=26;var x=54;var _=4;var C=20;var w=15;var q=10;var M=1;var S=100;function D(t){if(t.label)return t.label;if(t.min&&t.max)return"".concat(t.min," - ").concat(t.isMax?"":"<").concat(t.max);if(t.max)return"<".concat(t.max);return">".concat(t.min)}function I(t){var e=0;while(t&&t.parent){e++;t=t.parent}return e}function k(t,e,i){var n={};if(t){var a;var r;var o=t.length;var s;var l;var c=I(t[0])-e;for(a=0;a<o;a++){s=t[a];if(!s)continue;r=0;while(r<c&&s.parent){s=s.parent;r--}l=!Number.isNaN(+i)&&i>=0?s.getAttributeDimensions(i):s.id;n[l]?n[l].push(t[a]):n[l]=[t[a]]}}return n}function L(t,e,i,n,a,r,o){var s=[];var l;var c=0;var u=y;var d;var p=Math.min(S,t.length);var f=0;r=r||0;var h=k(e,r,o);i=i||{font:"13px 'QlikView Sans', sans-serif"};d=m["a"].getAverageLetterWidth(i.font)*C;n>(d+b)*t.length&&(d=n/t.length-b-M);var v={type:"text",fill:0,opacity:1,shape:{text:null,font:i.font,maxWidth:d,align:"left",baseline:"middle",maxNumLines:2}};for(var g=0;g<p;g++){var w=t[g];l=w.color.toHex();v.shape.text=D(w);var q=m["a"].measureTextObject(v);q.height=Math.ceil(q.height);c=Math.max(c,q.width);u=Math.max(u,q.height);var I=Math.floor(Math.max(q.height,y)*a);"range"===w.type?s.push({text:q.lines.join(" "),height:I,tipText:w.label,marker:"rect",color:l,isDimensionValue:true,locked:false,id:w.id,index:w.index,isMax:w.isMax,type:w.type}):s.push({text:q.lines.join(" "),tipText:w.label,height:I,marker:w.marker||"rect",color:l,isDimensionValue:true,locked:false,id:w.id,index:w.index,cacheItems:h[w.id],type:w.type});s[s.length-1].position=f;f+=s[s.length-1].height}var L=u;var T=Math.max(c+b,x);return{viewItems:s,cellHeight:L,cellWidth:T+M+2*_}}function T(t,e,i){var n=[];var a;var r=0;m["a"].setFont(e.font);for(a=t.length-1;a>=0;a--){var o=t[a];var s={colorFrom:o.grad[0].toHex(),colorTo:o.grad[1].toHex(),maxText:i.formatValue(o.max),minText:i.formatValue(o.min),max:o.id[0],min:o.id[1],limits:o.limits};n.push(s)}var l=t.length-1;var c=n[0].max>n[l].max?n[0].maxText:n[l].maxText;var u=n[0].min<n[l].min?n[0].minText:n[l].minText;r=Math.max(r,m["a"].getTextWidth(c.substr(0,q)),m["a"].getTextWidth(u.substr(0,q)));return{viewItems:n,labelHeight:m["a"].getFontHeight(e.font),maxLabelWidth:r+1}}function E(t,e){var i=m["a"].getAverageLetterWidth(e.font)*w;var n={type:"text",fill:0,opacity:1,shape:{text:t,font:e.font,maxWidth:i,align:"left",baseline:"middle",maxNumLines:2}};var a=m["a"].measureTextObject(n);return{text:a.lines.join(" "),fullText:t,height:a.height,width:a.width+M}}var A={prepareDiscreteData:L,prepareContinousData:T,prepareLegendTitle:E,Modes:{DISCRETE:"discrete",CONTINOUS:"continous"},constants:{PADDING:_}};var P=i("Hk9t");var O='<div qva-direction x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}" class="color-legend">\n    <div qv-discrete-legend\n         ng-if="discrete && visible"\n         view-items="viewItems"\n         options="options">\n    </div>\n\n\t<div qv-continous-legend\n\t\t ng-if="!discrete && visible"\n\t\t view-items="viewItems"\n\t\t options="options"></div>\n</div>\n';var R=i("2UuD");var V=i("UV1h");var N=i("Z9ZH");var z=i.n(N);var F=i("mWu2");var j='<div class="qv-continous-color-legend"\n\t ng-class="cclOrientationClass"\n\t ng-style="options.titleStyle">\n\t<div class="cl-title ccl-title"\n\t\t ng-if="options.legendTitle"\n\t\t ng-class="cclOrientationClass">\n\t\t<div qva-direction x-dir-text="{{options.legendTitle}}" x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}" class="ccl-title-inner"\n\t\t\t title="{{options.legendTitleTooltip}}">{{options.legendTitle}}</div>\n\t</div>\n    <div class="ccl-gradient"\n\t\t ng-class="cclOrientationClass"\n\t\t tid="ccl.gradient">\n        <div class="ccl-axis" ng-class="cclOrientationClass"  ng-style="options.labelStyle">\n\t\t\t<div ng-repeat="axisVal in axisValues track by $index" class="ccl-axis-value" ng-class="{\'first\': $first, \'last\':$last}" dir="ltr">{{axisVal}}</div>\n            \x3c!--\n                <div class="ccl-axis-top-value">{{axisValues[1]}}</div>\n                <div class="ccl-axis-bottom-value">{{axisValues[0]}}</div>\n                --\x3e\n        </div>\n\t\t<div class="ccl-gradient-color"\n\t\t\t ng-class="cclOrientationClass"\n\t\t\t qva-apply-style="cclGradientStyle">\n\t\t</div>\n\t\t<div dir="ltr" class="ccl-range"\n\t\t\t ng-show="selectionEnabled && !isLocked"\n\t\t\t ng-style="cclRangeStyle"\n\t\t\t ng-class="cclOrientationClass">\n\t\t\t<div ng-show="active" class="ccl-range-inner"\n\t\t\t\t ng-class="cclOrientationClass"\n\t\t\t\t ng-style="rangeStyle">\n\t\t\t\t<div class="ccl-axis-cover"\n\t\t\t\t\t ng-style="active && cclCoverStyle"\n\t\t\t\t\t tid="ccl.cover"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.cover}"></div>\n\t\t\t\t<div class="ccl-far-edge"\n\t\t\t\t\t tid="ccl.edge.far"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.far}">\n\t\t\t\t</div>\n\t\t\t\t<div class="ccl-near-edge"\n\t\t\t\t\t tid="ccl.edge.near"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.near}">\n\t\t\t\t</div>\n\t\t\t\t<div class="ccl-outer-bubble-wrapper"\n\t\t\t\t\t ng-class="active && cclOrientationClass">\n                    <qva-range-selection-bubble visible="active" active-component="fakeAxis" handle-points="handlePoints" horizontal="!options.vertical" far="false" data="values.start" active="activeOptions.near" tid="ccl.bubble.near"> </qva-range-selection-bubble>\n                    <qva-range-selection-bubble visible="active" active-component="fakeAxis" handle-points="handlePoints" horizontal="!options.vertical" far="true" data="values.end" active="activeOptions.far" tid="ccl.bubble.far"> </qva-range-selection-bubble>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>';var H=i("FJpR");var $=i("CpIe");var B=".legendRangeSelection";var W=Math.min;var G=Math.max;function U(t,e){if(!t||t.length!==e){var i=[];var n=1/e*2;for(var a=0;a<e/2;a++){i.push(n*a);i.push(n*(a+1))}return i}return t}function Y(t,e,i,n){var a="";n=U(n,t.length);var r=t.length;for(var o=0;o<r-1;o+=2){a+=", ".concat(t[o]," ").concat(100*n[o],"%");a+=", ".concat(t[o+1]," ").concat(100*n[o+1],"%")}var s=i?e?"bottom":"top":e?"left":"right";return"background: linear-gradient(to ".concat(s).concat(a,")")}function J(t,e,i){return e?t[0][i]>t[1][i]?0:1:t[0][i]<t[1][i]?0:1}function K(t){return["left","bottom"].includes(t)}function Z(t,e,i){var n=i?e.height():e.width();var a=i?"y":"x";t[0][a]=W(G(t[0][a],0),n);t[1][a]=W(G(t[1][a],0),n)}function Q(t,e,i,n){var a=[];if(i){a[e]=new H["a"](t[e].x,t[e].y+n);a[1^e]=t[1^e]}else{a[e]=new H["a"](t[e].x+n,t[e].y);a[1^e]=t[1^e]}return a}function X(t,e){var i=t.find(".ccl-axis");return e?i.outerWidth():i.outerHeight()}function tt(t,e){return{vertical:t.options.vertical,direction:t.options.vertical?"y":"x",grt:t.options.vertical?e:!e}}F["default"].directive("qvContinousLegend",[function(){return{template:j,replace:true,scope:true,link:function t(e,i){var n=false;var a={gradient:i.find(".ccl-gradient"),rangeElement:i.find(".ccl-range"),rangeInner:i.find(".ccl-range-inner"),axisCover:i.find(".ccl-axis-cover"),nearEdge:i.find(".ccl-near-edge"),farEdge:i.find(".ccl-far-edge")};e.fakeAxis={getPositionOfValue:function t(i){var n=e.viewItems[0].min;var r=e.viewItems[e.viewItems.length-1].max;var o=(i-n)/(r-n);var s=e.options.vertical?a.rangeElement.height():a.rangeElement.width();var l=e.options.vertical||!e.options.vertical&&e.options.yMirrorMode;l&&(o=1-o);return o*s},isDiscrete:function t(){return false}};e.activeOptions={far:false,near:false,cover:false};e.values={start:{},end:{}};e.setRangeStyle=function(t){if(!t||2!==t.length)return;e.relevantSize=X(i,e.options.vertical);var n=t[0];var a=t[1];var r=e.options.vertical?"y":"x";e.options.vertical?e.rangeStyle={height:Math.abs(n[r]-a[r]),top:Math.min(n[r],a[r])}:e.rangeStyle={width:Math.abs(n[r]-a[r]),left:Math.min(n[r],a[r])}};e.updateHandleValues=function(t,i){Z(t,a.rangeElement,e.options.vertical);e.setRangeStyle(t);if(e.active){var n=e.options.vertical?"y":"x";var o=e.options.vertical?a.rangeElement.height():a.rangeElement.width();var s=t[J(e.handlePoints,e.options.vertical,n)];var l=t[J(e.handlePoints,!e.options.vertical,n)];e.cclNearValueLabel=r(s);e.values.start.text=e.cclNearValueLabel;e.cclFarValueLabel=r(l);e.values.end.text=e.cclFarValueLabel;if(i){if(i.switch){var c=e.values.start.value;e.values.start.value=e.values.end.value;e.values.end.value=c}var u=e.viewItems[0].min;var d=e.viewItems[e.viewItems.length-1].max;0===i.index?e.values.start.value=Math.max(Math.min(i.value,d),u):e.values.end.value=Math.max(Math.min(i.value,d),u)}else if(e.options.vertical){e.values.start.value=e.positionToValue((o-s[n])/o);e.values.end.value=e.positionToValue((o-l[n])/o)}else{e.values.start.value=e.positionToValue(s[n]/o);e.values.end.value=e.positionToValue(l[n]/o)}}if(e.active&&e.options){var p=K(e.options.dock);m(e.options.vertical,p,false);m(e.options.vertical,p,true)}};e.updateHandlePoints=function(t){if(t){e.updateHandleValues(t);h(e.handlePoints)}};e.$on("rangeUpdate",(function(t,i,n,a){if(!Number.isNaN(+n))return;e.handlePoints=[i[0],i[1]];e.updateHandleValues(e.handlePoints,a);e.$digest();h(i,a);t.stopPropagation()}));e.$watchCollection("[viewItems, options.yMirrorMode, options.vertical]",(function(t){var i=t[0];var n=t[1];var a=t[2];var r=n&&!a;if(i&&i.length){var o=[];var s=[];for(var l=0;l<i.length;l++){o.push(i[l].colorTo);o.push(i[l].colorFrom);if(i[l].limits){s.push(i[l].limits[0]);s.push(i[l].limits[1])}}e.cclGradientStyle=Y(o,r,a,s);var c=[i[0].minText,i[i.length-1].maxText];a&&c.reverse();e.axisValues=c}}));function r(t){if(e.positionToFormattedValue&&t){var i;var n;if(e.options.vertical){i=a.rangeElement.height();n=1-t.y/i}else{i=a.rangeElement.width();n=t.x/i}return e.positionToFormattedValue(n)}return"".concat(t)}var o={right:"",bottom:""};var s={right:"0px",bottom:""};var l={bottom:"0px",right:""};e.$watchCollection("[options.vertical, options.dock, relevantSize]",(function(t){var i=t[0];var n=K(t[1]);var a=t[2];e.cclOrientationClass={vertical:i,horizontal:!i,near:n,far:!n};if(n){e.cclCoverStyle=i?{left:"0px",width:"".concat(a,"px")}:{bottom:"0px",height:"".concat(a,"px")};e.cclBubbleNearStyle=i?o:l;e.cclBubbleFarStyle=i?o:l}else{e.cclCoverStyle=i?{right:"0px",width:"".concat(a,"px")}:{top:"0px",height:"".concat(a,"px")};e.cclBubbleNearStyle=i?s:o;e.cclBubbleFarStyle=i?s:o}}));c.call(this);e.$watch("selectionEnabled",(function(t){t?c.call():d.call()}));e.$on("$destroy",(function(){d.call()}));e.$on("cancelSelection",(function(){e.active=false}));function c(){if(n||!e.selectionEnabled)return;n=true;var t="hey";var i;z()(a.gradient[0]).swipe({id:B,options:{preventDefault:true},start:function t(n,a){if(e.isLocked)return;var r=a.pagePoints[0];i=g(r.x,r.y);z.a.preventGestures(this.gestureHandler);p(n,a)},update:function t(n,a){if(e.isLocked)return;e.active=true;e.swiping=true;var r=a.pagePoints[0];e.handlePoints=[i,g(r.x,r.y)];e.updateHandlePoints(e.handlePoints);e.$digest()},end:function t(){if(e.isLocked){f();return}e.swiping=false;v()}});z()(a.axisCover[0]).tap({id:B,options:{preventDefault:true},start:function t(){z.a.preventGestures(this.gestureHandler)}}).swipe({id:B,options:{preventDefault:true},start:function i(n,a){t=e.handlePoints;z.a.preventGestures(this.gestureHandler);p(n,a);e.activeOptions.cover=true},update:function i(n,a){var r=e.options.vertical?a.swipe.deltaY:0;var o=e.options.vertical?0:a.swipe.deltaX;e.handlePoints=[new H["a"](t[0].x+o,t[0].y+r),new H["a"](t[1].x+o,t[1].y+r)];e.updateHandlePoints(e.handlePoints);e.$digest()},end:function t(){v();e.activeOptions.cover=false}});if(!z.a.utils.touch){u(a.farEdge[0],false);u(a.nearEdge[0],true)}e.$broadcast("on")}function u(t,i){var n;var a;var r=tt(e,i);var o;z()(t).tap({id:B,options:{preventDefault:true},start:function t(){z.a.preventGestures(this.gestureHandler)}}).swipe({id:B,options:{radiusThreshold:0},start:function t(o,s){r=tt(e,i);a=J(e.handlePoints,r.grt,r.direction);n=e.handlePoints;z.a.preventGestures(this.gestureHandler);p(o,s)},update:function t(i,s){e.handlePoints=Q(n,a,r.vertical,r.vertical?s.swipe.deltaY:s.swipe.deltaX);e.updateHandlePoints(e.handlePoints);e.activeOptions.near=false;e.activeOptions.far=false;o=J(e.handlePoints,r.grt,r.direction)?"far":"near";e.activeOptions[o]=true;e.$digest()},end:function t(){v(e.handlePoints);e.activeOptions.far=false;e.activeOptions.near=false;e.$digest()}})}function d(){e.active=false;Object.keys(a).forEach((function(t){z()(a[t][0]).off("*",B)}));n=false;e.$broadcast("off")}function p(t,i){e.$emit("rangeStart",t,i)}function f(){e.$emit("selectWhileLocked")}function h(t,i){e.$emit("rangeUpdate",t,e.options.vertical?a.rangeElement.height():a.rangeElement.width(),i)}function v(){var t;if(e.options.vertical&&e.handlePoints[0].y<e.handlePoints[1].y){t=[];t[1]=e.handlePoints[0];t[0]=e.handlePoints[1];e.handlePoints=t}else if(!e.options.vertical&&e.handlePoints[0].x>e.handlePoints[1].x){t=[];t[1]=e.handlePoints[0];t[0]=e.handlePoints[1];e.handlePoints=t}e.$emit("rangeEnd")}function g(t,e){var i=a.rangeElement.offset();return new H["a"](t-i.left,e-i.top)}function m(t,n,r){if(!a.nearBubbleWrapper){a.nearBubbleWrapper=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.near");a.nearBubble=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.near .bubble");a.farBubbleWrapper=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.far");a.farBubble=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.far .bubble")}a.nearBubbleWrapper.css(e.cclBubbleNearStyle);a.farBubbleWrapper.css(e.cclBubbleFarStyle);var o=b(t,r);o=o>0?o:0;r?a.nearBubble.css({"margin-left":"".concat(Math.round(o),"px")}):a.farBubble.css({"margin-right":"".concat(Math.round(o),"px")})}function b(t,e){if(t)return 0;if(e)return i.offset().left-(a.nearBubbleWrapper.offset().left-.5*a.nearBubbleWrapper.width()-5);return a.farBubbleWrapper.offset().left-i.offset().left+1.5*a.farBubbleWrapper.width()+5-i.width()}}}}]);var et=i("GMLQ");var it='<div class="qv-discrete-color-legend"\n\t ng-class="{ \'vertical\': options.vertical }"\n\t ng-style="options.labelStyle">\n\t<div class="cl-title dcl-title"\n\t\t ng-if="options.legendTitle && options.legendTitle.length"\n\t\t ng-style="options.titleStyle"\n\t\t ng-class="{\'vertical\': options.vertical }">\n\t\t<div class="dcl-title-inner" title="{{options.legendTitleTooltip}}" qva-direction x-dir-text="{{options.legendTitle}}" x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}">{{options.legendTitle}}</div>\n\t</div>\n\t<div class="dcl-flex" ng-class="{\'align\': align, \'vertical\': options.vertical, \'in-selections\': selectionsApi.active }"\n\t\t qv-selections-toggle-dimension-value="{ selector: \'.color-item\', itemKey: \'item\' }"\n\t\t qv-selections-on-toggle-dimension-value="selectionEnabled && !isScrolling && select($event, item)">\n\t\t<div ng-repeat="item in viewItems track by $index"\n\t\t\t ng-style="{\'height\':item.height,  \'width\': (options.vertical ? \'auto\' : options.cellWidth)}"\n\t\t\t class="color-item" ng-class="{\'selected\': item.selected}"\n\t\t\t tid="dcl.item">\n\t\t\t<div class="marker">\n\t\t\t\t<div ng-style="item.markerClass[\'glyph-triangle\']  ? {\'border-bottom-color\': item.color} : ( item.markerClass[\'glyph-inverse-triangle\'] ? {\'border-top-color\': item.color} : {background: item.color} )" ng-class="item.markerClass"></div>\n\t\t\t</div>\n\t\t\t<div qva-direction x-dir-text="{{item.text}}" class="text"\n\t\t\t\t title="{{item.tipText}}">{{item.text}}</div>\n\t\t</div>\n\t</div>\n\t<div class="dcl-buttons-v" ng-show="options.vertical && overflow">\n\t\t\x3c!--DOWN--\x3e\n\t\t<button class="dcl-down lui-fade-button" ng-disabled="!interactionEnabled || scrollAtEnd" tid="dcl.down">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-bottom"></span>\n\t\t</button>\n\t\t\x3c!--UP--\x3e\n\t\t<button class="dcl-up lui-fade-button" ng-disabled="!interactionEnabled || scrollAtStart" tid="dcl.up">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-top"></span>\n\t\t</button>\n\t</div>\n\t<div class="dcl-buttons-h" ng-show="!options.vertical && overflow">\n\t\t\x3c!--RIGHT--\x3e\n\t\t<button class="dcl-right lui-fade-button" ng-disabled="!interactionEnabled || scrollAtEnd" tid="dcl.right">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-right"></span>\n\t\t</button>\n\t\t\x3c!--LEFT--\x3e\n\t\t<button class="dcl-left lui-fade-button" ng-disabled="!interactionEnabled || scrollAtStart" tid="dcl.left">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-left"></span>\n\t\t</button>\n\t</div>\n</div>\n';var nt=i("i7ks");var at=i("zjn0");var rt=i("pSod");var ot=5;var st=10;var lt=".discretelegend";et["a"].directive("qvDiscreteLegend",["$timeout",function(t){return{template:it,replace:true,scope:true,link:function e(i,n){var a=n.find(".dcl-flex");i.$watch("viewItems",(function(t){t&&t.forEach((function(t){var e={};var i=Array.isArray(t.marker)?t.marker:[t.marker];for(var n=0;n<i.length;n++)switch(i[n]){case"line":case"!line":e["glyph-line"]=true;break;case"triangle":case"!triangle":e["glyph-triangle"]=true;break;case"inverse-triangle":case"!inverse-triangle":e["glyph-inverse-triangle"]=true;break;case"diamond":case"!diamond":e["glyph-diamond"]=true;break;case"circle":case"!circle":e["glyph-circle"]=true;break;case"rect":case"!rect":default:e["glyph-rect"]=true}t.markerClass=e}))}));i.callbacks&&(i.callbacks.paintLegend=function(){r();o()});i.$on("clearSelection",(function(){if(i.viewItems){i.selectedValues=[];for(var t=0;t<i.viewItems.length;t++){var e=i.viewItems[t];e.selected=false}}}));function r(){if(i.viewItems){i.selectedValues=[];for(var t=0;t<i.viewItems.length;t++){var e=i.viewItems[t];"dimension"===e.type&&(i.selectionsCache?e.selected=i.selectionsCache.isValueSelected(e.id[0]):"dimension"===e.type&&e.cacheItems&&e.cacheItems[0]&&(e.selected=e.cacheItems[0].selected))}}i.$digest()}i.select=function(t,e){if("others"!==e.type){"range"===e.type&&(e.selected=!e.selected);i.$emit("toggleSelect",t,[e]);"dimension"===e.type&&i.selectionsCache&&(e.selected=i.selectionsCache.isValueSelected(e.id[0]))}};i.$on("$destroy",(function(){b(n)}));i.$watch("explicitScrollPosition",(function(t){i.explicitScrollPosition=t}));function o(){if(void 0===i.explicitScrollPosition)h(i.options.vertical,true);else{var t=s(i.explicitScrollPosition,i.options.vertical);i.options.vertical?a.scrollTop(t):a.scrollLeft(t)}i.options.vertical?i.overflow=a[0].scrollHeight-a.height()>1:i.overflow=a[0].scrollWidth-a.width()>1}m(n,i);function s(t,e){var n=i.viewItems;if(!n)return 0;return e?n[t].position:t*i.options.cellWidth}function l(){if(i.options.vertical)return a.scrollTop();return a.scrollLeft()}function c(t){u(l(),t*(i.options.vertical?1:-1))}function u(t,e,n){var r;r=i.options.vertical?{scrollTop:"".concat(t+e,"px")}:{scrollLeft:"".concat(at["a"].getScrollPos("rtl"===i.options.direction,t,e),"px")};a.animate(r,n?200:0)}function d(t){if(t&&t.some((function(t){return void 0===t.position}))){t[0].position=0;for(var e=1;e<t.length;e++)t[e].position=t[e-1].position+t[e-1].height}}function p(t,e){for(var i=0;i<e.length;i++)if(e[i].position+e[i].height/2>=t)return i;return 0}function f(t,e){var n=i.viewItems;if(!n)return null;var r=0;var o;var s;var l=0;if(e){d(n);var c=a[0].scrollHeight-a.height();if(t>c){l=p(t,n);n[l].position<c&&l++}else l=p(t,n);r=n[l].position;s=l<=0;o=t>=c}else{r=Math.round(t/i.options.cellWidth)*i.options.cellWidth;l=Math.abs(Math.round(t/i.options.cellWidth));if(t+a.width()>=a[0].scrollWidth){r=t;l++}if("rtl"!==i.options.direction||"default"===at["a"].scrollImplementation){o=a.width()/i.options.cellWidth>=n.length/Math.floor(a.height()/i.options.cellHeight)-l;s=r<=0}else{s=a.width()/i.options.cellWidth>=n.length/Math.floor(a.height()/i.options.cellHeight)-l;o=l>=0}}return{position:r,index:l,end:o,start:s}}function h(e,n,r){r=r||0;var o=l();var s=f(o+r,e);if(s){if(s.position!==o){a.stop(true);u(s.position,0,n)}t((function(){i.scrollAtEnd=s.end;i.scrollAtStart=s.start}));i.$emit("scrollPositionChanged",s.index)}}function v(t,e,a){var r=false;var o=n.find(t).first();z()(n.find(t)[0]).longtap({id:lt,options:{timeThreshold:1e4},update:function t(n,s){if(s.percentage>2&&i.interactionEnabled){g(e*(a?ot:st));r=true;o.addClass("lui-active");z.a.preventGestures(this.gestureHandler)}},end:function t(){r=false;o.removeClass("lui-active");z.a.preventGestures(this.gestureHandler)},cancel:function t(){o.removeClass("lui-active");z.a.preventGestures(this.gestureHandler)}}).tap({end:function t(){if(i.interactionEnabled){if(r)h(a,true);else{g(e*(a?i.options.cellHeight:i.options.cellWidth));h(a,false)}r=false}}})}function g(t){c(t)}function m(t,e){var i=null;var n=nt["a"].throttle((function(t){if(e.interactionEnabled){var i=nt["a"].getMouseWheelData(t.originalEvent);var n;n=(i.delta>0?-1:1)*(e.options.vertical?e.options.cellHeight:e.options.cellWidth);e.options.yMirrorMode&&!e.options.vertical&&(n=-n);h(e.options.vertical,false,n)}}),20);a.on("mousewheel".concat(lt," DOMMouseScroll").concat(lt),(function(t){if(e.overflow){n(t);t.preventDefault();t.stopPropagation()}}));v(".dcl-up",-1,true);v(".dcl-down",1,true);v(".dcl-left",-1,false);v(".dcl-right",1,false);z()(a[0]).swipe({options:{useMomentum:true,inertia:.7,preventDefault:true},start:function t(n){if(e.interactionEnabled){i=l();e.isScrolling=true;z.a.preventGestures(this.gestureHandler);n.preventDefault()}},update:function t(n,a){if(null!==i&&a.swipe){var r=a.swipe.distance;e.options.vertical?"up"===a.swipe.direction?u(i,-r):"down"===a.swipe.direction&&u(i,r):"left"===a.swipe.direction?u(i,r):"right"===a.swipe.direction&&u(i,-r)}},end:function t(){if(null!==i){h(e.options.vertical,true);e.isScrolling=false;i=null}}})}function b(t){z()(a[0]).off();z()(t.find(".dcl-up")[0]).off();z()(t.find(".dcl-down")[0]).off();z()(t.find(".dcl-left")[0]).off();z()(t.find(".dcl-right")[0]).off()}}}}]);var ct=2;var ut=17;var dt=12;function pt(t,e,i){var n=t.getStyle(e,"fontSize");var a=parseInt(n,10)*i;var r=t.getStyle(e,"fontFamily");return"normal ".concat(a,"px ").concat(r)}function ft(t,e){return{backgroundColor:t.getStyle("legend","backgroundColor"),label:{font:pt(t,"legend.label",1),lineHeight:"1em"},scaledLabel:{font:pt(t,"legend.label",e),color:t.getStyle("legend.label","color"),lineHeight:"1em"},ticks:{color:"#a6a6a6",length:8},line:{color:"#666666"},title:{font:pt(t,"legend.title",1),lineHeight:"1em"},scaledTitle:{font:pt(t,"legend.title",e),color:t.getStyle("legend.title","color"),lineHeight:"1.2em"}}}function ht(t){return t&&"primary"!==t.colorMode}function vt(t,e,i){var n={};n.maxItemsPerRow=Math.floor((t.width-(i.show?i.width:0))/e.cellWidth);n.numRows=Math.ceil(e.viewItems.length/n.maxItemsPerRow);n.itemsPerRow=Math.ceil(e.viewItems.length/n.numRows);n.w=n.itemsPerRow*e.cellWidth;n.h=Math.ceil(Math.max(i.height,Math.min(e.cellHeight*ct,n.numRows*e.cellHeight)));return n}function gt(t,e,i){var n=5;return(i?Math.max(t.width,e.maxLabelWidth+ut+n):Math.max(e.labelHeight+ut,t.height))+20}var mt=P["a"].extend("BasicColorLegend",{init:function t(){var e=Array.prototype.slice.call(arguments);e.push(O);this._super.apply(this,e);this._styleService=V["a"].initializeService("object.".concat(this.options.parentType));this._legendContainer=this.getInnerContainer();this._dataInvalid=true;this.$scope=this.getInnerContainerScope();this.$scope.callbacks={};this._scrollPosition=0;this._mode={}},release:function t(){this._super();this.$scope=null;this._legendContainer=null},setColorMap:function t(e){this._colorMap=e;this.invalidateProperties("Legend.setColorMap");this.invalidateDisplay("Legend.setColorMap")},getColorMap:function t(){return this._colorMap},setProperties:function t(e){this._legendProperties=e;this._dataInvalid=true;return this.invalidateProperties("BasicColorMap.setProperties")},setExternalColorItems:function t(e){if(e&&e[0]&&e[0].qMatrix&&this._colorMap){this._externalDataPage=e;var i=e[0].qMatrix;var n=[];this._colorDataInfo=this._colorMap.getColorDataInfo();for(var a=0;a<i.length;a++){var r=i[a];n.push({id:[r[1].qNum],index:a,label:r[0].qText,type:"dimension"})}if(this._colorDataInfo&&this._colorDataInfo.hasOthers){var o=this._colorDataInfo.activeDimensionIndex;n.push({id:[-3],index:n.length,label:void 0!==o&&o>-1?this._colorDataInfo.othersLabels[o]:g["default"].get("properties.dimensionLimits.others"),type:"others"})}this._externalColorItems=n}else this._externalColorItems=null;this.invalidateProperties("Legend.setExternalColorItems")},getExternalDataPage:function t(){return this._externalDataPage},isVisible:function t(e){return this._super(e)&&this.hasValidData()&&ht(this._mode)&&this._legendProperties&&this._legendProperties.show},updateSize:function t(){this._super();this.invalidateProperties("LegendLight.calculateRelevantSize");this.updateNow(["properties"]);this._dataInvalid=true},_updateProperties:function t(){var e=this;if(!this._colorMap||!this._legendProperties){this._clearScope(this.$scope);return false}this._colorDataInfo=this._colorMap.getColorDataInfo();this._mode=this._colorDataInfo.legendMode||{};this._marker=this._colorMap.getLegendDataProvider()?this._colorMap.getLegendDataProvider().getLegendMarker():"rect";if(!this._mode.colorMode||this._colorDataInfo.altMode&&!this._externalColorItems&&"dimension"===this._mode.colorMode){this._clearScope(this.$scope);return false}var i=ft(this._styleService,this.chartScale);var n;if(this._externalColorItems&&"dimension"===this._mode.colorMode){n=this._externalColorItems;n.forEach((function(t){t.color=e._colorMap.getColorFromPreScaledValue(t.id[0],t.label);t.marker=e._marker}));n=n.filter((function(t){return!t.color.isInvalid()})).slice(0,100)}else{n=this._colorMap.getColorMapping().concat();n=n.filter((function(t){return!t.color.isInvalid()}))}this._mode.showTitle=this._data.legend.showTitle;if(!this.isVisible()||!n||!n.length){this._clearScope(this.$scope);return false}this.$scope.visible=true;this.$scope.selectionEnabled=false;if(this._mode.showTitle){this._titleMetrics=A.prepareLegendTitle(this._colorMap.getLegendTitle(),i.title);this._titleMetrics.show=this._mode.showTitle}else this._titleMetrics={show:false,width:0,height:0};if(this._mode.discrete){this._legendMetrics=A.prepareDiscreteData(n,this._selectableShapes,i.label,this.rect.width-(this._mode.showTitle&&this.isHorizontal()?this._titleMetrics.width:0),this.chartScale,this._colorMap.getDimensionIndex()[0],this._colorDataInfo.attrIndex);this.$scope.viewItems=this._legendMetrics.viewItems}else{this._formatter=this._colorMap.getValueFormatter()||R["a"].getStaticFormatter();this._formatter.prepare();this._legendMetrics=A.prepareContinousData(n,i.label,this._formatter);this.$scope.viewItems=this._legendMetrics.viewItems}if(this.isHorizontal()){this._horizontalMetrics=vt(this.rect,this._legendMetrics,this._titleMetrics);this.$scope.align=this._horizontalMetrics.numRows>=ct}this.$scope.discrete=this._mode.discrete;this.$scope.options.vertical=this.isVertical();this.$scope.options.labelStyle=i.scaledLabel;if(this.isDiscrete()){this.$scope.options.titleStyle=a.a.extend(true,{width:"".concat(Math.ceil(this._titleMetrics.width*this.chartScale),"px")},i.scaledTitle);this.$scope.options.titleHeight=(Math.max(this._titleMetrics.height,dt)+dt)*this.chartScale;this.$scope.options.legendTitle=this._titleMetrics.show?this._titleMetrics.text:null}else{this.$scope.options.titleStyle=i.scaledTitle;this.$scope.options.legendTitle=this._titleMetrics.text}this.$scope.options.legendTitleTooltip=this._titleMetrics.fullText;this.$scope.options.cellWidth=Math.ceil(this._legendMetrics.cellWidth*this.chartScale);this.$scope.options.cellHeight=Math.ceil(this._legendMetrics.cellHeight*this.chartScale);this.$scope.options.yMirrorMode=this.yMirrorMode;this.$scope.options.dock=this.dock;this.$scope.isLocked=this.isSelectionLocked();this._dataInvalid=false;return true},paint:function t(){this.$scope.callbacks&&this.$scope.callbacks.paintLegend&&this.$scope.callbacks.paintLegend()},calculateRelevantSize:function t(e){this._super();this.relevantSize=0;this.invalidateProperties("Legend.calculateRelevantSize");this.updateNow(["properties"]);if(this.isVisible()&&this._titleMetrics&&this._legendMetrics)if(this.isDiscrete())if(this.isHorizontal()){var i=vt(e,this._legendMetrics,this._titleMetrics);this.relevantSize=i.h+(i.numRows>ct?ct:i.numRows)+2*A.constants.PADDING}else this.relevantSize=Math.max(this._legendMetrics.cellWidth,this._titleMetrics.width);else this.relevantSize=gt(this._titleMetrics,this._legendMetrics,this.isVertical(),this._values)},isDiscrete:function t(){return this._mode.discrete},clear:function t(){this._super()},isSelectionLocked:function t(){return this._colorDataInfo.altMode&&this._colorDataInfo.internalMode===(this._colorMap?this._colorMap.DIMENSION:"dimension")?this._colorDataInfo.altLocked:this._super()},getAttributeDimensionInfo:function t(){return this._colorMap&&this._colorMap.hasAttributeDimension()?this._colorMap.getAttributeDimensionInfo():[]},_clearScope:function t(e){e.visible=false;e.viewItems=null;this._titleMetrics=null;this._legendMetrics=null},on:function t(){this._super();this.$scope.interactionEnabled=true},off:function t(){this._super();this.$scope.interactionEnabled=false}});Object.defineProperty(mt.prototype,"className",{value:"BasicColorLegend"});var bt=mt;function yt(t,e,i,n,a,r){var o;var s;var l=n[0].min;var c=n[n.length-1].max;var u=c-l;if(i){o=1-Math.max(t[0].y,t[1].y)/e;s=1-Math.min(t[0].y,t[1].y)/e}else if(a){o=1-Math.min(t[0].x,t[1].x)/e;s=1-Math.max(t[0].x,t[1].x)/e}else{o=Math.min(t[0].x,t[1].x)/e;s=Math.max(t[0].x,t[1].x)/e}o=0===o?l:o*u+l;s=1===s?c:s*u+l;return{idx:r,startVal:o,updateVal:s,isMax:true}}function xt(t,e,i){var n=e[0].min;var a=e[e.length-1].max;var r=a-n;i&&(t=1-t);return 0===t?n:1===t?a:t*r+n}function _t(t,e,i){var n=[];var a;for(var r=0;r<e.length;r++){a=e[r];n.push({idx:i,startVal:a.id[0],updateVal:a.id[1],isMax:a.isMax})}return n}function Ct(t){return!("measure"===t.colorMode&&"item"===t.boxType)}function wt(t,e,i){e.selectionEnabled=!!t._mode.selectionEnabled&&!!i&&t._on&&!i.handler._disableSelections;if(!i||!e.selectionEnabled){t._watchers&&t._watchers.forEach((function(t){t()}));t._watchers=null;return}if(t._watchers)return;t._watchers=[];t._watchers.push(e.$on("toggleSelect",(function(n,a,r){i.initComponent(null,t);if(Ct(t._mode)){if("range"===t._mode.boxType){i.rangeStart();var o=_t(e.viewItems,r,t._mode.rangeSelectionIndex);i.indices=[t._mode.rangeSelectionIndex];i.rangeUpdate(o,true);i.rangeEnd()}else{if(t.$scope.isLocked)t.selections.selectWhileLocked(t._mode.altMode?i.activeComponent.getAttributeDimensionInfo():void 0);else{var s=r.map((function(t){return t.id[0]}));var l=[];var c;var u=r.length;for(c=0;c<u;c++)r[c].cacheItems&&(l=l.concat(r[c].cacheItems));i.updateFromItems(a,l,t._mode.altMode,s)}t._mode.altMode||t.selections._selectedShapes.length||t.selectionsApi.clear()}n.preventDefault()}})));t._watchers.push(e.$on("rangeStart",(function(e,n,a){a&&i.initComponent(a.pagePoints[0]);t._formatter=t._colorMap.getValueFormatter()||R["a"].getStaticFormatter();t._formatter.prepare();i.rangeStart(true);e.preventDefault()})));t._watchers.push(e.$on("rangeUpdate",(function(e,n,a,r){var o=yt(n,a,t.isVertical(),t.$scope.viewItems,t.yMirrorMode,t._mode.rangeSelectionIndex);i.indices=[t._mode.rangeSelectionIndex];r&&(0===r.index?o.startVal=r.value:o.updateVal=r.value);i.rangeUpdate([o]);e.preventDefault()})));t._watchers.push(e.$on("rangeEnd",(function(t){i.rangeEnd();t.preventDefault()})));t._watchers.push(e.$on("rangeEditChanged",(function(e,n){t._nrEditing=n?t._nrEditing+1:t._nrEditing-1;if(t._nrEditing>1){i.confirmEdit();t._nrEditing=1;e.targetScope.onEditBubble()}t._editing=t._nrEditing>0;i.setIsEditing(t._editing,t.$scope)})));t._watchers.push(e.$on("scrollPositionChanged",(function(e,i){t._scrollPosition=i})));t._watchers.push(e.$on("selectWhileLocked",(function(){t.selections&&t.selections.selectWhileLocked()})))}var qt=bt.extend("ColorLegend",{init:function t(){var e=Array.prototype.slice.call(arguments);this._super.apply(this,e);this._nrEditing=0;this.$scope.options={};var i=this;this.formatValue=function(t){return i._formatter.formatValue(t)};this.$scope.positionToFormattedValue=function(t){return i.formatValue(xt(t,i.$scope.viewItems,i.yMirrorMode&&!i.isVertical()))};this.$scope.positionToValue=function(t){return xt(t,i.$scope.viewItems,i.yMirrorMode&&!i.isVertical())}},setData:function t(e){this._super(e);this.setProperties(e.legend)},getSelectionIndices:function t(){return this._colorMap.getSelectionIndices()},setSelectableShapes:function t(e){this._super(e);this._dataInvalid=true;this.invalidateProperties("Legend.setSelectableShapes")},setHasValidData:function t(e){this._super(e);if(!e){this.clear();this._clearScope(this.$scope)}},_updateProperties:function t(){if(!this._super())return false;this.$scope.selectionEnabled=!this.options._disableSelections&&this._mode.selectionEnabled&&this.$scope.interactionEnabled&&!!this.selections;this.$scope.selectionsApi=this.selectionsApi;this.$scope.selectionsCache=this._colorDataInfo&&this._colorDataInfo.altMode&&this.attributeSelectionsCache;wt(this,this.$scope,this.selections);return true},on:function t(){this._super();wt(this,this.$scope,this.selections)},off:function t(){this._super();wt(this,this.$scope,this.selections)},getType:function t(){return this.selections},getSelectionMode:function t(){return this._mode.legend},clearSelection:function t(){this.$scope.$broadcast("clearSelection");this.$scope.$broadcast("cancelSelection")},cancelSelection:function t(){this.$scope.$broadcast("cancelSelection")},getScrollPosition:function t(){return this._scrollPosition},setScrollPosition:function t(e){this.$scope.explicitScrollPosition=e}});Object.defineProperties(qt.prototype,{selections:{get:function t(){return this._selections},set:function t(e){this._selections=e;wt(this,this.$scope,this.selections)}}});Object.defineProperty(qt.prototype,"className",{value:"ColorLegend"});var Mt=qt;var St=i("QLJv");var Dt=i("xnZp");var It=i("6eqC");var kt=i("qZHi");var Lt=i("iTPj");var Tt=i("hmfc");var Et=i("6WTg");var At=i("sWge");function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function Rt(t,e,i){e&&Ot(t.prototype,e);i&&Ot(t,i);return t}var Vt={ROW:1,VALUE:2};function Nt(t,e,i){var n=e.indexOf(t);-1===n&&false!==i?e.push(t):-1===n||i||e.splice(n,1)}function zt(t){var e=[];var i;t.forEach((function(t){t.split(";").forEach((function(t){i=t.split(":");e[+i[0]]||(e[+i[0]]=[]);-1===e[i[0]].indexOf(+i[1])&&e[i[0]].push(+i[1])}))}));return e}function Ft(t){t._dirty&&(t.columns=zt(t.values));t._dirty=false}function jt(t,e){var i=[];do{e&&-1===e.indexOf(t.col)||i.push("".concat(t.col,":").concat(t.id))}while((t=t.parent)&&"undefined"!==typeof t.col&&"undefined"!==typeof t.id);return i.join(";")}var Ht=function(){function t(){Pt(this,t);this.rows=[];this.values=[];this.columns=[];this.indicesToTrack=null;this._dirty=false;this.selectionMode=Vt.ROW|Vt.VALUE}Rt(t,[{key:"clear",value:function t(){this.clearRows();this.clearValues()}},{key:"toggle",value:function t(e,i){this.toggleRow(e.row,i);this.toggleValue(e.value,e.col,i)}},{key:"toggleByCacheItem",value:function t(e){this.toggleRow(e.rowIndex||e.row||0,e.selected);var i=jt(e,this.indicesToTrack);i&&Nt(i,this.values,e.selected);this._dirty=true}},{key:"toggleRow",value:function t(e,i){Nt(e,this.rows,i)}},{key:"toggleValue",value:function t(e,i,n){Nt("".concat(i||0,":").concat(e),this.values,n);this._dirty=true}},{key:"isRowSelected",value:function t(e){return!!(this.selectionMode&Vt.ROW)&&-1!==this.rows.indexOf(e)}},{key:"isValueSelected",value:function t(e,i){if(!(this.selectionMode&Vt.VALUE))return false;Ft(this);return"undefined"!==typeof this.columns[i||0]&&-1!==this.columns[i||0].indexOf(e)}},{key:"isValueChainSelected",value:function t(e){if(!(this.selectionMode&Vt.VALUE))return false;if(this.indicesToTrack){Ft(this);var i=jt(e,this.indicesToTrack).split(";");return i.length&&!i.some((function(t){var e=t.split(":");return!("undefined"!==typeof this.columns[+e[0]||0]&&-1!==this.columns[+e[0]||0].indexOf(+e[1]))}),this)}return-1!==this.values.indexOf("string"===typeof e?e:jt(e,this.indicesToTrack))}},{key:"isCacheItemSelected",value:function t(e){return this.isValueChainSelected(e)||this.isRowSelected(e.rowIndex||e.row||0)}},{key:"hasSelections",value:function t(){return!!(this.selectionMode&Vt.ROW)&&this.rows.length>0||!!(this.selectionMode&Vt.VALUE)&&this.values.length>0}},{key:"setRows",value:function t(e){this.rows=e.slice()}},{key:"setValues",value:function t(e,i){this.values=e.map((function(t){return"".concat(i||0,":").concat(t)}));this._dirty=true}},{key:"getSelectedColumns",value:function t(){Ft(this);var e=this.columns;return e.filter((function(t){return"undefined"!==typeof t})).map((function(t){return e.indexOf(t)}))}},{key:"getSelectedValuesInColumn",value:function t(e){Ft(this);return this.columns[e||0]||[]}},{key:"getSelectedValues",value:function t(){Ft(this);return this.columns}},{key:"clearRows",value:function t(){this.rows.length=0}},{key:"clearValues",value:function t(){this.values=[];this.columns.length=0;this._dirty=false}},{key:"setSelectionMode",value:function t(e){this.selectionMode=e}},{key:"trackByIndices",value:function t(e){this.indicesToTrack=Array.isArray(e)?e.slice():null}}]);return t}();Ht.prototype.SELECTION_MODE=Vt;Ht.SELECTION_MODE=Vt;var $t=Ht;function Bt(t){Bt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Bt(t)}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function Ut(t,e,i){e&&Gt(t.prototype,e);i&&Gt(t,i);return t}function Yt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&Jt(t,e)}function Jt(t,e){Jt=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return Jt(t,e)}function Kt(t){var e=Xt();return function i(){var n=te(t),a;if(e){var r=te(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt(this,a)}}function Zt(t,e){if(e&&("object"===Bt(e)||"function"===typeof e))return e;return Qt(t)}function Qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xt(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function te(t){te=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return te(t)}var ee=function(t){Yt(i,t);var e=Kt(i);function i(){Wt(this,i);return e.apply(this,arguments)}Ut(i,[{key:"isCacheItemSelected",value:function t(e){var i=e.getAttributeDimensions();return i&&1===i.length&&this.isValueSelected(i[0])}}]);return i}($t);var ie=ee;function ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function re(t,e,i){e&&ae(t.prototype,e);i&&ae(t,i);return t}var oe=function(){function t(e){ne(this,t);this.collection=e||[]}re(t,[{key:"clear",value:function t(){this.collection.forEach((function(t){t.clear()}))}},{key:"add",value:function t(e){-1===this.collection.indexOf(e)&&this.collection.push(e)}},{key:"remove",value:function t(e){var i=this.collection.indexOf(e);-1!==i&&this.collection.splice(i,1)}},{key:"isCacheItemSelected",value:function t(e){return this.collection.some((function(t){return t.isCacheItemSelected(e)}))}}]);return t}();var se=oe;var le=i("xN6f");var ce=i("acVu");var ue='<div class="qv-viz-disclaimer"\n\t ng-if="visible && (attributes.limitedData || attributes.onlyNullColor || attributes.hasNegativeOrZeroData || attributes.hasDataRangeIncludingZero) && !attributes.doesNotFit"\n\t style="font-size: 1em;"\n\t qva-direction x-dir-setting="{{direction}}" x-dir-text="{{languageString}}">\n\t<span class="ltr-star">*</span>\n\t<span ng-if="attributes.limitedData" q-translation="Object.Disclaimer.LimitedData" q-title-translation="Object.Disclaimer.LimitedData"></span>\n\t<span ng-if="attributes.onlyNullColor" q-translation="Object.Disclaimer.OnlyNanColor" q-title-translation="Object.Disclaimer.OnlyNanColor"></span>\n\t<span ng-if="attributes.hasNegativeOrZeroData" q-translation="Object.Disclaimer.NegativeOrZeroValues" q-title-translation="Object.Disclaimer.NegativeOrZeroValues"></span>\n\t<span ng-if="attributes.hasDataRangeIncludingZero" q-translation="Object.Disclaimer.DataRangeIncludingZero" q-title-translation="Object.Disclaimer.DataRangeIncludingZero"></span>\n\t<span class="rtl-star">*</span>\n</div>\n';F["default"].directive("qvaChartDisclaimer",[function(){return{template:ue,scope:{attributes:"=",visible:"=",direction:"="},link:function t(e){e.languageString=g["default"].get("Object.Disclaimer.LimitedData")}}}]);var de={debug:true,components:{}};function pe(t){if(this._chartScale!==t){this._chartScale=t;this.$scope.dataAttributes.chartScale=t;Object.keys(this.components).forEach((function(t){this.components[t].chartScale=this._chartScale}),this)}}function fe(){var t=this.container.parentElement;var e;var i;var n="";var a="";var r;var o;var s;t.style.height="100%";t.style.width="";t.style.left="";t.style.top="";if(!this._readStoredData||this.options.freeResize){pe.call(this,1);return}e=this.container.clientWidth;i=this.container.clientHeight;var l=this._data.snapshotData.content.size;var c=l.w;var u=l.h;var d=c/u;var p=e/i;if(d<=p){s=i/u;r=i*d/e;e="".concat(100*r,"%");i="100%";n="".concat(50*(1-r),"%")}else{s=e/c;o=e/d/i;i="".concat(100*o,"%");e="";a="".concat(50*(1-o),"%")}pe.call(this,s);t.style.width=e;t.style.height=i;t.style.left=n;t.style.top=a}function he(){this._sizeChanged=false;fe.call(this);var t=this.rect;var e=this.container.clientWidth;var i=this.container.clientHeight;var n=new o["a"](0,0,e,i);var a;var r;this.containerRect=new o["a"](0,0,e,i);this._readStoredData&&!this.options.freeResize&&(r={width:this._data.snapshotData.content.size.w,height:this._data.snapshotData.content.size.h});r&&(n=new o["a"](0,0,r.width,r.height));if(!t||t.width!==n.width||t.height!==n.height){for(a in this.components)this.components[a].setOuterRect(n.x+1,n.y+1,n.width-2,n.height-2);this.rect=n;this._updateLayoutMode(this.rect.width,this.rect.height);this._sizeChanged=true}}function ve(t,e){Object.keys(this.components).forEach((function(i){["colorLegend","xAxis","dimensionAxis","timeAxis","continuousAxis","dataArea"].includes(i)&&this.components[i].setGlobalOpacity(t,e||false)}),this)}function ge(){var t;this.chartFormatter=new Tt["a"](this.backendApi.localeInfo,this._data.qHyperCube.qMeasureInfo);for(t in this.components){this.components[t].chartFormatter=this.chartFormatter;this.components[t].measureFormatters=this.chartFormatter.getFormatters();this.components[t].combinedMeasuresFormatter=this.chartFormatter.getCombinedMeasuresFormatter()}}function me(){var t;var e={};for(t in r["a"].prototype)r["a"].prototype.hasOwnProperty(t)&&"init"!==t&&(e[t]=r["a"].prototype[t]);return e}function be(){var t=this;this.backendApi.clearSelections();var e=this.components.dataArea.getSelectableShapes();e.forEach((function(e){e.selected=false;t.onSelection.ToggleShape.call(t,e)}));this.selectionsCacheCollection.clear();this.onSelection.scheduleInvalidation.call(this)}var ye=Et["a"].extend(me());var xe=ye.extend({refreshSelections:function t(){this.specialCaseForSingleSelect=false},initialize:function t(){this._super();this._initiateBindings()},init:function t(e,i,n,o,s){r["a"].prototype.init.call(this);n=a.a.extend(true,n||{},{},de);var l=i.find(".qv-viz");this._super(e,l,n,o);this.container=l[0];this.backendApi=o;this.selectionsApi=s;this.layoutEngine=new d;this.components={};this.providers={};this._changeWatchers=[];this._createComponents();this._createProviders();this._chartScale=1;this.chartFormatter=new Tt["a"](this.backendApi.localeInfo);this.selectionsCache=new $t;this.attributeSelectionsCache=new ie;this.selectionsCacheCollection=new se([this.selectionsCache,this.attributeSelectionsCache]);this.selectionsCache.setSelectionMode($t.SELECTION_MODE.VALUE);this._chartContext=new It["a"];this._layoutMode=kt["a"].LayoutMode.FULL;this.$scope.dataAttributes={};this.resize();this.specialCaseForSingleSelect=false;this._navigation=n.navigation},clearSelections:be,selectionModeAlpha:.5,getVerticalComponents:function t(){var e=[];this._data&&this._data.legend&&this.components&&this.components.colorLegend&&this.components.colorLegend.isVertical()&&e.push({comp:this.components.colorLegend,dock:this._data.legend.dock});return e},setYMirrorMode:function t(e){if(this.yMirrorMode===e)return;this.yMirrorMode=e;for(var i in this.components)this.components[i].setYMirrorMode(e);this.tooltips&&(this.tooltips.yMirrorMode=e);this.updateVerticalComponentsDock()},updateVerticalComponentsDock:function t(){var e;var i;var n;var a;this._verticalComponents=this.getVerticalComponents();var r=this._verticalComponents?this._verticalComponents.length:0;for(e=0;e<r;e++){i=this._verticalComponents[e];n=i.comp;if("far"===i.dock||"near"===i.dock||"auto"===i.dock){a="far"===i.dock||"auto"===i.dock;n.setDock(this.yMirrorMode?a?"left":"right":a?"right":"left")}}},setMinimumRequirements:function t(e,i){this._requirements={dimensions:{min:e},measures:{min:i}}},onToggleLasso:function t(e){this.toggleLasso=e},isLassoDisabled:function t(){return!this.selections.allowLasso},onSelection:{ToggleShape:function t(e){var i=this.$scope.layout.layers?this.$scope.layout.layers[0]:this.$scope.layout;var n=i.qListObject?i.qListObject:i.qHyperCube;if(!e.selected&&1===n.qSize.qcy){this.specialCaseForSingleSelect=true;return}this.toggleCacheItem?this.toggleCacheItem(e):this.onSelection.scheduleInvalidation.call(this);if(e.id<-2||e.id>-1){this.selections.getActiveType().activeComponent&&this.selectionsCache.trackByIndices(this.selections.getActiveType().activeComponent.getSelectionIndices());this.selectionsCache.toggleByCacheItem(e)}this.specialCaseForSingleSelect=false;this._haveToggledShapes=this.selectionsCache.hasSelections()},Activated:function t(){ve.apply(this,[this.selectionModeAlpha]);this._haveToggledShapes=false},Deactivated:function t(){ve.apply(this,[1,true]);this.selectionsCacheCollection.clear();this.toggleLasso=false},Select:function t(e,i,n,a){var r=this;if(this.specialCaseForSingleSelect)return;var o=Array.isArray(n)?n:[n||0];if(this.selectionsCache.hasSelections()){var s;var l=this.selectionsCache.getSelectedValuesInColumn(o[0]);var c=-1;"K"===this._data.qHyperCube.qMode&&(c=l.indexOf(-3));s=1===o.length&&-1===c?this.backendApi.selectValues(o[0],l,false):this.backendApi.select(this.selectionsCache.rows,o,a);s.then((function(t){t||be.call(r)})).catch((function(t){t.isHandled=true}))}else e.length&&e.every((function(t){return!t.selected}))&&this.selectionsApi.clear()},SelectAttributeDim:function t(e,i){var n=this;e.forEach((function(t){this.attributeSelectionsCache.toggleValue(t,!!i&&void 0)}),this);var a=this.attributeSelectionsCache.getSelectedValuesInColumn(0);var r=this.providers.colorMap&&this.providers.colorMap.getColorDataInfo();r&&r.legendPath&&this.backendApi.selectValues(0,a,false,r.legendPath).then((function(t){t||be.call(n)}))},SelectRange:function t(e,i){var n=this;e&&0!==e.length?"dimension"===e[0].type?this.backendApi.selectDimensionRange(e).then((function(t){t||be.call(n)})):this.backendApi.selectRange(e,i).then((function(t){t||be.call(n)})):this.selectionsApi.clear()},Confirm:function t(){},Cancel:function t(){this.selectionsCacheCollection.clear()},Clear:function t(){this.selectionsCacheCollection.clear()},scheduleInvalidation:function t(){var e=this;this._invalidationTimer||(this._invalidationTimer=setTimeout((function(){e.onSelection.invalidate.call(e);e._invalidationTimer=null}),10))},cancelInvalidation:function t(){clearTimeout(this._invalidationTimer);this._invalidationTimer=null},invalidate:function t(){this.components.dataArea.invalidateDisplay("Chart.onSelection.invalidate");this.components.colorLegend&&this.components.colorLegend.invalidateDisplay("Chart.onSelection.invalidate");Object.keys(this.components).forEach((function(t){(this.components[t]instanceof h["a"]||this.components[t]instanceof v["a"]&&this.components[t].isDimension)&&this.components[t].invalidateDisplay("Chart.onSelection.invalidate")}),this)}},getLayoutMode:function t(){return this._layoutMode},getVerticalLayoutMode:function t(){return this._verticalLayoutMode},getHorizontalLayoutMode:function t(){return this._horizontalLayoutMode},setLayoutMode:function t(e){this._explicitLayoutMode=e;if(this._layoutMode!==e){this._layoutMode=e;this.fire("layoutModeChanged")}},getSnapshotSize:function t(){return this.rect?{w:this.rect.width,h:this.rect.height}:{w:0,h:0}},_updateLayoutMode:function t(e,i){if(this._explicitLayoutMode)return;this._layoutMode=kt["a"].getLayoutMode(e,i);this._horizontalLayoutMode=kt["a"].getHorizontalLayoutMode(e);this._verticalLayoutMode=kt["a"].getVerticalLayoutMode(i);this.fire("layoutModeChanged");this.fire("verticalLayoutModeChanged");this.fire("horizontalLayoutModeChanged")},_createProviders:function t(){var e=this.options;if(e.providers.colorMap){this.providers.colorMap="function"===typeof e.providers.colorMap.clazz?new e.providers.colorMap.clazz(e.providers.colorMap,this.backendApi.model.app):new Dt["a"](e.providers.colorMap,this.backendApi.model.app);this.components.dataArea&&this.components.dataArea.setColorMap(this.providers.colorMap);this.components.colorLegend&&this.components.colorLegend.setColorMap(this.providers.colorMap)}},_initiateBindings:function t(){this._changeWatchers||(this._changeWatchers=[]);Object.keys(this.components).forEach((function(t){this._changeWatchers.push(Lt["a"].bindProperty(this.components[t],"layoutMode",this,"layoutMode"));this._changeWatchers.push(Lt["a"].bindProperty(this.components[t],"verticalLayoutMode",this,"verticalLayoutMode"));this._changeWatchers.push(Lt["a"].bindProperty(this.components[t],"horizontalLayoutMode",this,"horizontalLayoutMode"))}),this);this.components.dataArea&&this._changeWatchers.push(Lt["a"].bindSetter(this._updateSelectionCache.bind(this),this.components.dataArea,"selectableShapes"))},_updateSelectionCache:function t(e){var i=this.selections&&this.selections.cache||this.tooltips&&this.tooltips.cache;if(!i)return;e=e||this.components.dataArea.getSelectableShapes();var n=this.selectionsCacheCollection;var a=!(!this.selections||!this.selections.getActiveType)&&this.selections.getActiveType();var r=!!a;i.clear();e.forEach((function(t){i.add(t)}));r&&(/^item/.test(a.getActiveMode())?e.forEach((function(t){t.selected=n.isCacheItemSelected(t)})):(a.activeComponent instanceof f["a"]&&"range.measure"===a.getActiveMode()||a.activeComponent instanceof Mt&&"range"===a.getActiveMode())&&a.updateShapesState());Object.keys(this.components).forEach((function(t){["colorLegend","xAxis","dimensionAxis"].includes(t)&&this.components[t].setSelectableShapes(e)}),this)},_createComponents:function t(){var e=this;var i=this.components;var n=this.options;var a;var r;var o;Object.keys(n.components).map((function(t){return{sortKey:n.components[t].sortKey||0,cmpKey:t}})).sort((function(t,e){return t.sortKey-e.sortKey})).forEach((function(t){var s=t.cmpKey;a=["component",s].join(".");r=n.components[s];r.label=s;o=null;if("function"===typeof n.components[s].clazz)o=n.components[s].clazz;else switch(s){case"dataArea":case"dataArea2":o=p["a"];break;case"colorLegend":o=Mt;break;case"basicColorLegend":o=bt;break;default:break}if(o){r.parentType=e.constructor.name.charAt(0).toLowerCase()+e.constructor.name.slice(1);r._disableSelections=n._disableSelections;i[s]=new o(this.container,r,a);i[s].selectionsApi=e.selectionsApi;i[s].backendApi=e.backendApi;i[s]instanceof St["a"]||this.layoutEngine.addComponent(i[s])}}),this)},preLayout:function t(){},layout:function t(e,i){this.layoutEngine.layout(this.rect,this._layoutMode,this.containerRect,e,i)},resize:function t(){if(this._data&&this.isDataValid(this._data)){this.prePaint(this._data);return this._paint()}return At["a"].resolve()},setSnapshotData:function t(e,i){var n=this.getSnapshotSize();var a={};Object.keys(this.components).forEach((function(t){a[t]={visible:this.components[t].isVisible(),dock:this.components[t].dock,size:{w:this.components[t].rect.width,h:this.components[t].rect.height}}}),this);e.snapshotData.content={chartData:this.getSnapshotChartData(i),size:{w:n.w,h:n.h},components:a,v:.96}},getSnapshotChartData:function t(){var e={};if(this.components.colorLegend){e.legendScrollOffset=this.components.colorLegend.getScrollPosition();var i=this.components.colorLegend.getExternalDataPage();i&&(e.legendDataPage=i)}if(this.providers.colorMap){var n=this.providers.colorMap.getSnapshotChartData();n.forEach((function(t){e[t.key]=t.data}))}return e},getViewState:function t(){return{legendScrollOffset:this.components.colorLegend?this.components.colorLegend.getScrollPosition():0}},getSnapshotStoredChartData:function t(){if(this._data&&this._data.snapshotData&&this._data.snapshotData.content)return this._data.snapshotData.content.chartData;return},setInteractionState:function t(e,i){this._super(e,i);var n=this;Object.keys(this.components).forEach((function(t){n.components[t].setUseTransition(n._navigation&&(n._inAnalysisState||n._inEditState))}))},_postResize:function t(){this._data.legend&&this.components.colorLegend&&this._updateLegendDock(this.components.colorLegend,this._data)},_paint:function t(){if(!this.isValid(this._data))return this.clear().then((function(){return{invalid:true}}));var e=this.getSnapshotStoredChartData();if(this.components.colorLegend){this.components.colorLegend.pagingMode=this._pagingMode||0;this._readStoredData&&e?this.components.colorLegend.setScrollPosition(e.legendScrollOffset||0):this.options.viewState&&this.components.colorLegend.setScrollPosition(this.options.viewState.legendScrollOffset||0)}he.call(this);this.$scope.dataAttributes.doesNotFit=this.rect.height<10;this._sizeChanged&&this._postResize();return At["a"].resolve()},paint:function t(e){if(e.qSelectionInfo&&e.qSelectionInfo.qInSelections||!this.isValid(this._data))return At["a"].resolve();return this._paint()},suppressOnPaint:function t(e){var i=this._super(e);i&&this.prePaint(e);return i},prePaint:function t(){this.$scope.dataAttributes.layoutMode=this._layoutMode;this.$scope.dataAttributes.onlyNullColor=false;return this._super()},_preUpdateData:function t(e){if(this.providers.colorMap){if(this._readStoredData){this.providers.colorMap.setSnapshotChartData(e.snapshotData.content.chartData);this.components.miniChart&&this.components.miniChart.setSnapshotChartData(e.snapshotData.content.chartData)}else{this.providers.colorMap.setSnapshotChartData();this.components.miniChart&&this.components.miniChart.setSnapshotChartData()}return this.providers.colorMap.setData(e).then((function(){return e}))}return At["a"].resolve(e)},updateData:function t(e){var i=this;if(i._destroyed)return At["a"].reject();var n=i.isValid(e);var a;for(a in i.components)i.components[a].setHasValidData(n);if(!n){i.updateSelectableState(e);i._updateSelectionCache([]);return i.clear()}this._readStoredData=this.options._readStoredData||e&&e.snapshotData&&e.snapshotData.content;return this._preUpdateData(e).then(r);function r(t){if(i._destroyed)return At["a"].reject();i._data=t;var e=i._updateData(t);i.setYMirrorMode(i.options&&"rtl"===i.options.direction&&!(i._data&&i._data.reverseRtl));function n(){if(i._destroyed)return At["a"].reject();if(i.providers.colorMap){var t=i.providers.colorMap.getColorDataInfo();if(i.components.colorLegend&&t&&t.legendPath){if(i._readStoredData){i.components.colorLegend.setExternalColorItems(i._data.snapshotData.content.chartData.legendDataPage);return At["a"].resolve()}return At["a"].all([i.backendApi.getData(t.legendPages,t.legendPath).then((function(t){i.components.colorLegend.setExternalColorItems(t)}))])}i.components.colorLegend.setExternalColorItems(null);return At["a"].resolve()}return At["a"].resolve()}if(e&&"function"===typeof e.then)return e.then(n);e=n();return e}},_updateData:function t(e){var i;this._data=e;this._readStoredData=this.options._readStoredData||e&&e.snapshotData&&e.snapshotData.content;this.selectionsCacheCollection.clear();if(e.legend&&this.components.colorLegend){this.components.colorLegend["".concat(e.legend.auto||e.legend.show?"show":"hide","Component")]();this.components.colorLegend.attributeSelectionsCache=this.attributeSelectionsCache;this._updateLegendDock(this.components.colorLegend,e)}ge.call(this);if(this.providers.colorMap){this.providers.colorMap.setMeasureFormatters(this.chartFormatter.getFormatters());this.providers.colorMap.setGenericFormatter(this.chartFormatter.createFormatter())}if(this.tooltips){this.tooltips.measureFormatters=this.chartFormatter.getFormatters();this.tooltips.parentScope=this.$scope;this.tooltips.colorMap=this.providers.colorMap}this._chartContext.refresh(e);var n=this.isValid(this._data);for(i in this.components)this.components[i]._hasValidData=n;this.updateSelectableState();return At["a"].resolve()},_updateLegendDock:function t(e,i){i.legend&&i.legend.dock&&"auto"!==i.legend.dock?e.setDock(i.legend.dock):e.setDock(e.outerRect.height/e.outerRect.width<1?this.yMirrorMode?"left":"right":"bottom")},destroy:function t(){this.off();while(this._changeWatchers.length)this._changeWatchers.pop().unbind();var e;for(e in this.components)this.components[e].release();for(e in this.providers)this.providers[e].release&&this.providers[e].release();this.$scope.dataAttributes={};if(this.selections){this.selections.cache.clear();this.selections.release();this.selections=null}if(this.tooltips){this.tooltips.release();this.tooltips=null}this._chartContext.release();this._super.apply(this,arguments)},clear:function t(){var e=[];Object.keys(this.components).forEach((function(t){e.push(this.components[t].clear())}),this);return At["a"].all(e)},isValid:function t(e){return this.isDataValid(e)},isDataValid:function t(e){var i=!!e&&!!e.qHyperCube&&e.qHyperCube.qDimensionInfo.length&&!e.qHyperCube.qDimensionInfo.some((function(t){return!!t.qError}))&&e.qHyperCube.qMeasureInfo.length&&!e.qHyperCube.qMeasureInfo.some((function(t){return!!t.qError}));return i},isDataSelectable:function t(e,i){if(!this.isValid(this._data)||!this._inAnalysisState)return false;if(void 0!==i)return true!==e.qHyperCube.qDimensionInfo[i].qLocked;return e.qHyperCube.qDimensionInfo.some((function(t){return true!==t.qLocked}))},updateSelectableState:function t(e){if(!this.selections)return;var i=!this.isDataSelectable(e||this._data);Object.keys(this.components).forEach((function(t){this.components[t].setSelectionLocked(i)}),this);this.selections&&this.selections.setLocked(i)},on:function t(){this._navigation&&Object.keys(this.components).forEach((function(t){this.components[t].on()}),this);this._super();this.updateSelectableState(this._data)},off:function t(){this._navigation&&Object.keys(this.components).forEach((function(t){this.components[t].off()}),this);this._super()},selectWhileLocked:function t(e){nt["a"].showLockedFeedback(e||this._data.qHyperCube.qDimensionInfo)},selectWhileSingleSelect:function t(e){nt["a"].showLockedFeedback(e||this._data.qHyperCube.qDimensionInfo)},getPreferredSize:function t(){return this._super()},getContextMenu:function t(e,i,n){if(Object(ce["b"])("COPY_DATA_CHART")&&n.target&&this.tooltips){var a=this.tooltips.shapesFrom.shapeFromPoint({x:n.offsetX,y:n.offsetY});if(a){var r="".concat(a.getDimensions().join(","),";").concat(a.getMeasures().join(","),";").concat(a.labels.join(","));r&&""!==r&&i.addItem({icon:"lui-icon lui-icon--copy",translation:"$Copy Cell",tid:"copy-cell-context-item",select:function t(){le["a"].copyToClipboard(r)}})}}return this._super(e,i,n)}});var _e=e["a"]=xe},Ogpq:function(t,e,i){"use strict";i.r(e);var n=i("Z9ZH");var a=i.n(n);var r=i("mWu2");var o=i("uVcZ");var s=i("G1wx");var l=i("6uJb");var c=i("gF9a");var u=i("2Hli");var d=i("8H7g");var p=i("4Ox4");var f=i("VnWy");var h=i("Fbef");var v=i("OnHE");var g=i("kPub");var m=i("4nJ1");var b=i("U7Ny");var y=i("Fusc");var x=i("obmW");var _=i("acVu");e["default"]={name:"tooltip-data",template:p["a"],controller:["$scope","$element","$timeout","luiPopover",function(t,e,i,n){var p=t.args.cache;var b="tooltip-data_";var C=f["a"].create(t,n);var w=v["a"].create();var q;var M="function"===typeof t.definition.refFn?t.definition.refFn(t.data,t.args):t.definition.ref;var S="function"===typeof t.definition.targetDimIndexFn?t.definition.targetDimIndexFn(t.data,t.args):t.definition.targetDimIndex;t.expandClicked=function(t,e){if(t.target.classList.contains("pp-nm-di__draggable"))return;e.expanded=!e.expanded;p.put(b+e.id,e.expanded)};var D=null;var I=null;t.addClicked=function(e){if(t.adding){j();t.adding=false;return}var i=e.currentTarget;F(i);t.adding=true};t.getAddLabel=function(){return l["default"].get(t.definition.addTranslation)};function k(t,e){var i=A();var n="".concat(M,"qHyperCube.qDimensionInfo.").concat(i,".qAttrExprInfo");var a=u["a"].getValue(t,n,[]);if(a)return a.find((function(t){return t.cId===e}));return}function L(){var e=A();var i="".concat(M,"qHyperCubeDef.qDimensions.").concat(e,".qAttributeExpressions");return u["a"].getValue(t.data,i,[])}function T(){var e=L();return e.filter((function(e){return e.id===t.definition.id}))}function E(e){var i=A();var n="".concat(M,"qHyperCubeDef.qDimensions.").concat(i,".qAttributeExpressions");u["a"].setValue(t.data,n,e)}function A(){var e=t.args.layout;var i=u["a"].getValue(e,"".concat(M,"qHyperCube.qDimensionInfo"),[]).length-1;return void 0===S?i:S}function P(t){if(!t||!t.qExpression)return false;var e=!!t.qLabel||!!t.qLabelExpression;if(e||t.qLibraryId.length>0)return false;var i=y["a"].classify(t.qExpression);return 1===i.count&&i.result.function.isCommon}function O(){t.sortableItemLists.reset();w.resetTitles();var e=t.args.layout;var i=T();i.forEach((function(i){var n=i.cId;var a=k(e,n);var r=w.getCachedMeasureTitle(a);w.getMeasureTitle(a,i,true,t.args.app).then((function(t){r=t}));var s={title:function t(){return r},isInvalid:function t(){var i=k(e,n);return i&&!!i.qError},component:o["a"].getComponent("items"),definition:{type:"items",items:t.definition.items},data:i,args:t.args,id:n,type:"expression",expanded:p.get(b+n)||false,sortable:false!==t.definition.allowMove,templateSrc:"pp-data-item.ng.html",markerClass:"pp-measure"};0===i.qLibraryId.length&&g["a"].extract(i.qExpression).then((function(t){s.isValidExtraction=t.isValid;s.extractedField=t.field}));var l=P(i);if(l){s.canChangeMeasureAggregation=true;s.currentAggregation=C.getAggregation(i.qExpression);s.remainder=C.getRemainder(i.qExpression)}q.addSortableItem(s)}))}function R(){var e={};e.qExpression||(e.qExpression={});e.qNumFormat||(e.qNumFormat={});e.cId||(e.cId=m["a"].generateId());e.autoSort=true;e.qAttribute=true;e.id=t.definition.id;return e}function V(e){var i=L();i.push(e);E(i);t.$emit("saveProperties");j();H()}function N(t){var e=R();e.qLibraryId=t.libraryId;Object(_["b"])("MASTER_MEASURE_FORMAT")&&x["a"].useMasterNumberFormat(e);delete e.qExpression;delete e.qLabel;V(e)}function z(t){var e=R();e.qExpression=t.value;e.qLabel="";V(e)}function F(e){$();var i={app:t.args.app,closeAddPopover:j,addLibraryMeasure:N,addExpressionMeasure:z};D=n.show({template:c["a"].template,controller:c["a"].controller,input:i,alignTo:e,dock:"bottom"})}function j(e){if(D){D.close();D=null}e&&e.target.classList.contains("pp-toplist-add-button")&&a.a.preventGestures();t.adding=false}t.removeItem=function(e){var i=L();var n=i.findIndex((function(t){return t.cId===e.id}));i.splice(n,1);t.$emit("saveProperties")};t.duplicateItem=function(e){var i=m["a"].extend(true,{},e.data);i.cId=m["a"].generateId();var n=L();n.push(i);E(n);$();t.$emit("saveProperties")};t.openContextMenu=function(e,i){var n=r["default"].getService("qvContextMenu").menu();n.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i)}});t.showNextPossibleItem(q)&&n.addItem({translation:"Common.Duplicate",tid:"duplicate",select:function e(){t.duplicateItem(i)}});I=r["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};function H(){i((function(){var t=e.find(".pp-nm-hcd__lists");var i="tooltip";var n=e.find("[tid='".concat(i,"'] .pp-nm-hcd__list-items"));var a=n.children().last();a[0]&&(t[0].scrollTop=a[0].offsetTop-1)}),100)}t.sortableItemLists=d["a"].create({options:{direction:"vertical",listKey:"list",scrollSelector:".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",preventClickDefault:false,gesture:{name:"swipe",options:{radiusThreshold:s["a"].treatAsDesktop()?4:0,preventDefault:false}}},onBegin:function e(i){this._super.apply(this,arguments);t.movingItem=i;$()},onMove:function e(){var i=this._super.apply(this,arguments);if(i){delete t.movingItem;var n=q.get().map((function(t){return t.data}));var a=L();var r=0;a.forEach((function(e,i){if(e.id===t.definition.id){a[i]=n[r];r+=1}}));E(a);t.$emit("saveProperties")}return i},onCancel:function e(){this._super.apply(this,arguments);delete t.movingItem}});q=t.sortableItemLists.createList(1,{title:l["default"].get(t.definition.translation),tid:"tooltip-measure",getAddLabel:t.getAddLabel,addClicked:t.addClicked,descriptionless:true});function $(){q.items.forEach((function(t){t.expanded=false;p.put(b+t.id,false)}))}t.isItemDraggable=function(t){if(!t.sortable)return false;var e=T();return e.length>1};t.showChangeAggregation=function(t){return t.canChangeMeasureAggregation&&!t.isDragged};t.getItemHeaderTitle=function(e){return t.showChangeAggregation(e)?e.remainder:e.title()};t.openChangeAggregationPopover=function(e,i){if(!t.showChangeAggregation(i))return;var n={isOpenButton:function t(e){return e.classList.contains("pp-nm-di__header-aggregation")},onAggregationChanged:function t(e,i){h["a"].gather({expression:e.extractedField,aggregation:i})},expressionRef:"qExpression"};C.openPopover(e,i.id,i,n)};t.isChangeAggregationPopoverOpen=function(t){return C.isPopoverOpen(t.id)};t.showItemDescription=function(){return false};t.showNextPossibleItem=function(e){var i=t.getUndraggedItems(e);var n=i.length;return n<15};t.showNextPossibleItemDescription=function(){return false};t.getUndraggedItems=function(t){return t.get((function(t){return!t.isDragged}))};t.$watchCollection("data",O);t.$on("$destroy",(function(){j();I&&I.close()}))}]}},OnHE:function(t,e,i){"use strict";var n=i("kp36");function a(){this.titleRetriever=n["a"].create();this.measureCache={};this.expressionCache={};this.dimensionCache={}}a.prototype.getDimensionTitle=o;a.prototype.getMeasureTitle=s;a.prototype.getCachedMeasureTitle=c;a.prototype.getCachedDimensionTitle=l;a.prototype.resetTitles=u;var r=a;function o(t,e,i,n){var a=this;return this.titleRetriever.getDimensionTitle(t,e,i,n).then((function(e){t&&p(a.dimensionCache,t.cId,e);return e}))}function s(t,e,i,n){var a=this;return this.titleRetriever.getMeasureTitle(t,e,i,n).then((function(e){t&&p(a.measureCache,t.cId,e);return e}))}function l(t){return t?d(this.dimensionCache,t.cId):""}function c(t){return t?d(this.measureCache,t.cId):""}function u(){this.titleRetriever.resetTitles()}function d(t,e){return t[e]||""}function p(t,e,i){t[e]=i}var f={create:v};var h=e["a"]=f;function v(){return new r}},Ow2L:function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("GG1N");var r='<div pp-accordion="items" x-args="args" x-definition="definition" tabindex=\'-1\' class="pp-accordion-container" tcl="accordion">\n\t<div class="pp-section" ng-repeat="item in items" pp-accordion-item tid="{{item.key}}">\n\t\t<h4 class="pp-section-header" ng-class="{ \'last\': $last }">{{item.label}}</h4>\n\t\t<div class="pp-section-content" include-pp-component x-component="item.component" x-definition="item.definition"\n\t\t\t x-data="data" x-args="args" x-path="{{item.path}}">\n\t\t</div>\n\t</div>\n</div>';var o={template:r,controller:["$scope",function(t){var e=t.definition.items||{};var i=function e(){return t.data};t.items=Object.keys(e).filter((function(t){var i=e[t];if("boolean"===typeof i.show)return i.show;return true})).map((function(r){var o=e[r];var s={component:n["a"].findComponent(o),definition:o,key:r,path:r};a["a"].defineLabel(s,o,i,t.args.handler);return s}))}]};var s=e["default"]=o},P2vc:function(t,e,i){"use strict";var n=i("wkj2");var a=i("MoEg");function r(t,e,i){var a=t.length>0?t[0].positions:[];var r=e._style;var l=e._radialOptions;var f=new n["a"];var h=r.ticks.major.length*i;var v=r.label.offset*i*20;var g;var m="far"===e.getAlignment()?"left":"right";var b=[];var y=Math.min(e.rect.height,e.rect.width);var x=0;var _;var C;var w;var q;var M=[];var S=e._radius;var D="left"===m?1:-1;h*=D;g=D>0?0:e.rect.width;e.getShowLine()&&b.push({stroke:r.line.color,shape:{cx:e._centerPoint.x,cy:e._centerPoint.y,radius:S,radianOffset:0,start:l.start,end:l.end},type:"arc"});if(e.getShowLabels())for(var I=0;I<a.length;I++){_=(a[I]-x)/(y-x);w=u(_,e);q=d(w);q.r+=v;q=p(q,e._centerPoint);C=c(_,e);q.angle=C;M.push(q);f.save();f.translate(w.x+e._centerPoint.x,w.y+e._centerPoint.y);f.rotate(C);b.push({stroke:r.ticks.major.color,opacity:e.ticks[I].opacity,transform:f.elements,shape:{x1:0,x2:-h,y1:0,y2:0},type:"line"});f.restore()}g+=r.ticks.major.length*D;if(e._showLabels&&e._layoutMode>1)for(var k=0;k<t.length;k++){b=b.concat(o(t[k],M,g,e));g+=t[k].labelSpace*D}e._showTitle&&e._layoutMode>1&&(b=b.concat(s(e,r)));e._renderer.shapes=b;e._renderer.render()}function o(t,e,i,n){var a=t.labels;var r=e;var o=t.opacities;var s;var l;var c=[];var u=n._style;var d;var p;var f;var h;var v=a?a.length:0;if(0===v)return;var g=v-1;for(var m=0;m<v;m++){p=n.yMirrorMode?a[g-m]:a[m];s=n._renderer.getTextWidth(p,u.label.font);f=r[m];d=f.angle;l=d-.1<3*Math.PI/2&&d+.1>3*Math.PI/2?"center":d<Math.PI/2||d>3*Math.PI/2?"left":"right";c.push({type:"text",fill:u.label.color,opacity:o?o[m]:1,shape:{text:p,x:f.x,y:f.y,maxWidth:f.x-s<0?f.x:f.x+s>n.rect.width?n.rect.width-f.x:s,height:h,maxNumLines:1,font:u.label.font,align:l,baseline:"middle"}})}return c}function s(t,e){var i=[];var n=Math.min(t.rect.width,t.rect.height);var a=l(t);i.push({type:"text",fill:e.title.color,opacity:1,shape:{text:t._title,x:a.x,y:a.y+n*(.06+Math.min(n-300,0)/-300*.04),maxWidth:1.4*t._radius,maxNumLines:1,font:e.title.font,align:"center",baseline:"middle"}});return i}function l(t){var e={x:t.rect.width/2,y:t.rect.height/2};return e}function c(t,e){var i=e._radialOptions;var n=Math.max(Math.min(t,1),0)*(i.end-i.start)+i.start;return n}function u(t,e,i){var n=e._radialOptions;var a=t*(n.end-n.start)+n.start;var r=e._radius;return p({a:a,r:r},i)}function d(t){return{r:Math.sqrt(t.x*t.x+t.y*t.y),a:Math.atan2(t.y,t.x)}}function p(t,e){e||(e={x:0,y:0});return{x:e.x+t.r*Math.cos(t.a),y:e.y+t.r*Math.sin(t.a)}}e["a"]={renderRadial:r,getPointOfValue:u,getPolPos:d,getCartPos:p,getAngleOfNormalizedValue:c}},P8Hz:function(t,e,i){"use strict";var n=i("BQvq");function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function s(t,e,i){e&&o(t.prototype,e);i&&o(t,i);return t}function l(t,e,i){l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,n){var a=c(e,i);if(!a)return;var r=Object.getOwnPropertyDescriptor(a,i);if(r.get)return r.get.call(n);return r.value};return l(t,e,i||t)}function c(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=g(t);if(null===t)break}return t}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&d(t,e)}function d(t,e){d=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return d(t,e)}function p(t){var e=v();return function i(){var n=g(t),a;if(e){var r=g(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f(this,a)}}function f(t,e){if(e&&("object"===a(e)||"function"===typeof e))return e;return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function g(t){g=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return g(t)}var m=function(t){u(i,t);var e=p(i);function i(){r(this,i);return e.apply(this,arguments)}s(i,[{key:"addShape",value:function t(e,n,a,r){l(g(i.prototype),"addShape",this).call(this,e,n,a);if(void 0!==r){this._shapeMeasures||(this._shapeMeasures=[]);this._shapeMeasures.push(r)}}},{key:"getMeasuresIndices",value:function t(e){if(this._shapeMeasures&&void 0!==this._shapeMeasures[this._shapes.indexOf(e)]){var n=this._shapeMeasures[this._shapes.indexOf(e)];return void 0!==n?[n]:[]}return l(g(i.prototype),"getMeasuresIndices",this).call(this)}}]);return i}(n["a"]);e["a"]=m},Pd1s:function(t,e,i){"use strict";var n=i("2Hli");var a=i("pRem");var r=i("6uJb");var o=i("acVu");function s(t){var e=t.getMeasures();2===e.length?t.setSorting([2,1,0]):3===e.length&&t.setSorting([3,2,1,0])}function l(t,e){var i=e.getMeasures();var a=n["a"].getValue(t,"color.mode");"byExpression"===a&&0===i.length&&n["a"].setValue(t,"color.mode","primary")}function c(t){a["a"].setCustomTooltipAttrs(t);a["a"].unquarantineCustomTooltipAttrs(t)}function u(t){if(t.qHyperCubeDef.qDimensions.length>0){a["a"].setCustomTooltipAttrs(t);a["a"].unquarantineCustomTooltipAttrs(t)}}function d(t,e){a["a"].quarantineCustomTooltipAttrs(t,e)}function p(t,e){a["a"].quarantineCustomTooltipAttrs(t,e);a["a"].setCustomTooltipAttrs(t);a["a"].unquarantineCustomTooltipAttrs(t)}var f={dimensions:{min:1,max:1,description:function t(){return r["default"].get("Visualizations.Descriptions.Bubble")},add:function t(e,i){Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&c(i)},move:function t(e,i){Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&u(i)},remove:function t(e,i){Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&d(i,e)},replace:function t(e,i,n,a){Object(o["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&p(a,i)}},measures:{min:2,max:3,description:function t(e,i){var n;n=0===i?"properties.xAxis":1===i?"properties.yAxis":2===i?"Visualizations.Descriptions.Size":"Visualizations.Descriptions.Color";return r["default"].get(n)},add:function t(e,i,n){s(n);e.qSortBy.qSortByNumeric=-1},remove:function t(e,i,n){s(n);l(i,n)}}};e["a"]=f},Q5XB:function(t,e,i){"use strict";var n=i("b5IE");var a=i("AaFn");var r;var o=n["a"].extend("Container",{init:function t(){this._super()},addChild:function t(e){a["a"].prototype.addChild.call(this,e);this.doInvalidate&&e.invalidate()},addChildren:a["a"].prototype.addChildren,removeChild:function t(e){this.doInvalidate&&e.invalidate();e._stage=null;var i=e.descendants;var n=i?i.length:0;var r;for(r=0;r<n;r++)i[r]._stage=null;a["a"].prototype.removeChild.call(this,e);return this},removeChildren:function t(e){var i;var n;var a;var r;var o;if(!this._children)return this;if(e){a=e.length;for(i=0;i<a;i++)this.removeChild(e[i])}else{a=this._children.length;for(i=0;i<a;i++){this._children[i]._parent=null;this._children[i]._ancestors=null;this._children[i]._stage=null;r=this._children[i].descendants;o=r?r.length:0;for(n=0;n<o;n++)r[n]._stage=null}this._children.length=0}return this},containsPoint:function t(e,i){if(this._children&&this._children.length)for(var n=0,a=this._children.length;n<a;n++)if(this._children[n].containsPoint(e,i))return true;return false},intersectsLocalRect:function t(e){if(this._children&&this._children.length)for(var i=0,n=this._children.length;i<n;i++)if(this._children[i].intersectsLocalRect(e))return true;return false},intersectsLocalLine:function t(e){if(this._children&&this._children.length)for(var i=0,n=this._children.length;i<n;i++)if(this._children[i].intersectsLocalLine(e))return true;return false},getLocalPoints:function t(){var e=[];if(this._children&&this._children.length)for(var i=0,n=this._children.length;i<n;i++)e=e.concat(this._children[i].getLocalPoints());return e},getLocalBoundingRect:function t(){var e=false;var i;var n;var a;var o;var s;var l;var c;if(this._children&&this._children.length){for(l=0,c=this._children.length;l<c;l++){s=this._children[l].getVisualBounds();if(!s||Number.isNaN(+s.width+s.height+s.x+s.y))continue;if(e){i=Math.min(i,s.x);a=Math.max(a,s.x+s.width);n=Math.min(n,s.y);o=Math.max(o,s.y+s.height)}else{i=s.x;a=s.x+s.width;n=s.y;o=s.y+s.height;e=true}}return e?{x:i,y:n,width:a-i,height:o-n}:r}return r},_calculateBounds:function t(){var e=this._bounds;var i=this.getLocalBoundingRect();var n=0;if(i){e.set(i.x,i.y,i.width,i.height);this._vmBounds.set(i.x,i.y,i.width,i.height);this._visualBounds.set(i.x-n,i.y-n,i.width+2*n,i.height+2*n)}else{e.set(NaN,NaN,NaN,NaN);this._vmBounds.set(NaN,NaN,NaN,NaN);this._visualBounds.set(NaN,NaN,NaN,NaN)}this._dirtyBounds=false}});e["a"]=o},QLJv:function(t,e,i){"use strict";var n=i("nHjU");var a=i("7xSA");var r=i("jRMJ");var o=i("6eqC");var s=i("xnZp");var l=i("iTPj");var c=i("GF7R");var u=i("sWge");function d(t){var e=[];var i=[];t.qHyperCube.qMeasureInfo.forEach((function(t){t.series&&"bar"!==t.series.type&&1===t.series.axis?i.push(t):e.push(t)}));return{primaryMeasures:e,secondaryMeasures:i}}function p(t,e){var i={};var n;if(e)for(n in t)i[n]="qHyperCube"===n?{qDataPages:[],qDimensionInfo:t.qHyperCube.qDimensionInfo.slice(),qMeasureInfo:t.qHyperCube.qMeasureInfo.slice(),qStackedDataPages:[],qMode:"S",qSize:t.qHyperCube.qSize}:t[n];else{if(!t.reducedHyperCube)return t;i={};for(n in t)i[n]="qHyperCube"===n?t.reducedHyperCube:t[n]}return i}var f=n["a"].extend("MiniChart",{init:function t(e,i){this._super.apply(this,Array.prototype.slice.call(arguments));this.components={};this._changeWatchers=[];this.options=i;this._chartContext=new o["a"];this._createComponents();var n=12303291;this._colorMap=void 0;this._constantColorMap={getColorByNode:function t(){return new c["a"](n)},getColor:function t(){return new c["a"](n)}};this.components.dataArea.setColorMap&&this.components.dataArea.setColorMap(this._constantColorMap);this.components.continuousAxis&&this.components.dataArea.setContinuousAxis(this.components.continuousAxis);this.components.dataArea.setLayoutMode(3);this._changeWatchers.push(l["a"].bindProperty(this.components.dataArea,"dimensionTree",this._chartContext,"dimensionTree"));this._logScale=false},setYMirrorMode:function t(e){if(this.yMirrorMode===e)return;this.yMirrorMode=e;for(var i in this.components)this.components[i].setYMirrorMode(e)},setData:function t(e,i){this._reducedDataPromise=null;if(!e||!e.qHyperCube)return u["a"].resolve();this.isDimensionContinuous=i;this.components.dataArea.setIsDimensionContinuous&&this.components.dataArea.setIsDimensionContinuous(i);if(i){this._data=e;return this.invalidateProperties("Mini-chart: setData")}this._data=null;var n=e.qHyperCube;var a=this;var r=Math.min(2e3,1e4/(n.qMeasureInfo.length+1));var o=-1;var s=("linechart"===e.visualization||"barchart"===e.visualization&&e.barGrouping&&"stacked"===e.barGrouping.grouping)&&n.qDimensionInfo.length>1&&"K"===n.qMode?1:0;if("function"!==typeof this.backendApi.getReducedData){this._data=p(e);return this.invalidateProperties()}var l=p(e,true);var c=l.qHyperCube;this._reducedDataPromise=this.backendApi.getReducedData([{qTop:0,qLeft:s,qWidth:e.qHyperCube.qDimensionInfo.length+e.qHyperCube.qMeasureInfo.length+s,qHeight:r}],o).then((function(t){c.qDataPages=t;a._data=l;if(s&&t&&(t[0].isReduced||t[0].qIsReduced)){c.qDimensionInfo=n.qDimensionInfo.slice(0,1);c.qMeasureInfo=[n.qMeasureInfo[0],n.qMeasureInfo[0]]}return a.invalidateProperties()}));return this._reducedDataPromise},calculateRelevantSize:function t(){this.relevantSize=Math.max(30,Math.min(40,this.outerRect[this.isVertical()?"width":"height"]/8))},setRect:function t(e,i,n,a){this.rect.width===n&&this.rect.height===a||this.invalidateDisplay();this._super(e,i,n,a);for(var r in this.components)this.components[r].setRect(0,0,n,a);this.updateSize()},setOuterRect:function t(e,i,n,a){this._super(e,i,n,a);for(var r in this.components)this.components[r].setOuterRect(e,i,n,a)},setLayoutToContainerRatios:function t(e,i){this._super(e,i);for(var n in this.components)this.components[n].setLayoutToContainerRatios(e,i)},setContainerRect:function t(e,i,n,a){this._super(e,i,n,a);for(var r in this.components)this.components[r].setContainerRect(e,i,n,a)},updateSize:function t(){this._super();for(var e in this.components)this.components[e].updateSize()},isVisible:function t(e){return this._super(e)&&this.rect&&this.rect.width>0&&this.rect.height>0},setLogScale:function t(e){this._logScale=e;true!==this._logScale&&(this._logScale=false)},getLogScale:function t(){return this._logScale},setHasValidData:function t(e){this._super(e);Object.keys(this.components).forEach((function(t){this.components[t].setHasValidData(e)}),this)},setDock:function t(e){this._super(e);if(this.isVertical()){this.components.measureAxis.setDock("top");this.components.dimensionAxis.setDock("left")}else{this.components.measureAxis.setDock("left");this.components.dimensionAxis.setDock("bottom")}},paint:function t(e,i){if(!i||!this.isVisible())return u["a"].resolve();this._super(e,i);var n;var a=[];this.components.dataArea.rect=this.rect.clone();this.components.dimensionAxis.rect=this.components.dataArea.rect;this.components.measureAxis.rect=this.components.dataArea.rect;this.components.dataArea.rect.x=0;this.components.dataArea.rect.y=0;this.components.dimensionAxis.invalidateProperties("MiniChart.paint");this.components.dimensionAxis.updateNow(["properties"]);this.components.measureAxis.invalidateProperties("MiniChart.paint");this.components.measureAxis.updateNow(["properties"]);this.components.dimensionAxis.calculateValuePositionMappingInfo();this.components.measureAxis.calculateValuePositionMappingInfo();for(n in this.components)a.push(this.components[n].invalidateDisplay("MiniChart.paint"));return u["a"].all(a)},_createComponents:function t(){var e=this.components;var i=this.options;Object.keys(i.components).forEach((function(t){var n=[this.testId||"component",t].join(".");var o=i.components[t];var s;o.label=t;if("function"===typeof i.components[t].clazz)s=i.components[t].clazz;else switch(t){case"dataArea":s=r["a"];break;case"yAxis":case"measureAxis":s=a["a"];break;default:break}s&&(e[t]=new s(this.container,o,n));e[t].setUseTransition&&e[t].setUseTransition(false)}),this)},setActiveDimensionAxis:function t(e){if(this.components[e]){this._activeDimAxis=this.components[e];this.components.dataArea&&this.components.dataArea.setActiveDimensionAxis(this.components[e])}},updateAxis:function t(e){var i;var n;var a;var r;var o;var s;var l;if("combochart"===e.visualization){r=e.qHyperCube.qMeasureInfo.filter((function(t){return!t.series||"bar"===t.series.type}));o=d(e);s=o.primaryMeasures;l=o.secondaryMeasures;n=Math.min.apply(this,l.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));a=Math.max.apply(this,l.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})));this.components.secondaryMeasureAxis.setDataRange(n,a);n=Math.min.apply(this,s.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));a=Math.max.apply(this,s.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})))}else{n=Math.min.apply(this,e.qHyperCube.qMeasureInfo.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));a=Math.max.apply(this,e.qHyperCube.qMeasureInfo.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})))}var c=this.components.measureAxis;var u=this.components.dimensionAxis;c.setNiceNumberEnabled(false);c.setLogScale(this._logScale);if("barchart"===e.visualization){a=Math.max(0,a);n=Math.min(0,n)}var p=this.components.dataArea.getMinorAxisData();if(p){"combochart"===e.visualization&&s.forEach((function(t){if(r.indexOf(t)<0&&!Number.isNaN(+t.qMin)){p.min=Math.min(t.qMin,p.min);p.max=Math.max(t.qMax,p.max)}}));a=p.max;n=p.min}if(n===a&&0===a||Number.isNaN(+n)&&Number.isNaN(+a)){a=10;n=-10;c.setDataRange(n,a)}else(p||this.isDimensionContinuous)&&c.setDataRange(n,a);if(this.isDimensionContinuous){if(e.qHyperCube.qDimensionInfo){n=e.qHyperCube.qDimensionInfo[0].qMin;a=e.qHyperCube.qDimensionInfo[0].qMax;this._activeDimAxis.setDataRange(n,a);this._activeDimAxis.setPlotMin(n);this._activeDimAxis.setPlotMax(a)}}else{i=this.components.dataArea.getMajorAxisData();i?u.setDataRange(i.data,i.info):u.setDataRange([],[])}},setBackendApi:function t(e){this.backendApi=e},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},getReducedDataHypercube:function t(){var e=this;return this._reducedDataPromise?this._reducedDataPromise.then((function(){return e._data.qHyperCube})):u["a"].resolve()},setSnapshotChartData:function t(e){this._snapshotChartData=e},setOrientation:function t(e){this._orientation=e||"horizontal"},_updateProperties:function t(){if(!this._data)return;var e=this._data;var i=this;function n(){i._chartContext.refresh(e);i._miniColorMap&&i._miniColorMap.setDimensionTree(i._chartContext.getDimensionTree());i.components.dataArea.setData(e);i.components.dataArea.updateNow(["properties"]);i.updateAxis(e);return i._updateDisplay()}if(e&&e.qHyperCube&&e.qHyperCube.qDimensionInfo[0]){var a=e.qHyperCube.qDataPages[0]&&e.qHyperCube.qDataPages[0].qIsReduced;if(this.components.dataArea.setColorMap){if(this.isDimensionContinuous||!a&&(e.color.auto||"byExpression"!==e.color.mode)){this._miniColorMap||(this._miniColorMap=new s["a"](null,this.backendApi.model.app));this._colorMap&&(e.color.persistent=!!this._colorMap.getColorDataInfo().persistentColors);this.components.dataArea.setColorMap(this._miniColorMap);this._miniColorMap.setSnapshotChartData(this._snapshotChartData);return this._miniColorMap.setData(e).then(n)}this.components.dataArea.setColorMap(this._constantColorMap)}}return n()},clear:function t(){Object.keys(this.components).forEach((function(t){this.components[t].clear()}),this)},release:function t(){this._super();Object.keys(this.components).forEach((function(t){this.components[t].release()}),this);this._miniColorMap&&this._miniColorMap.release();while(this._changeWatchers.length)this._changeWatchers.pop().unbind();this._chartContext.release()},showComponent:function t(){this._super.apply(this);if(this.components.dataArea&&this.components.dataArea.renderers)for(var e in this.components.dataArea.renderers)this.components.dataArea.renderers[e].show()},hideComponent:function t(){this._super.apply(this);if(this.components.dataArea&&this.components.dataArea.renderers)for(var e in this.components.dataArea.renderers)this.components.dataArea.renderers[e].hide()}});Object.defineProperty(f.prototype,"className",{value:"MiniChart"});e["a"]=f},QrGG:function(t,e,i){"use strict";i.r(e);var n=i("6uJb");var a=i("GG1N");var r=i("KThf");var o=i("gh04");var s='<div class="pp-component pp-dropdown-component" ng-if="visible" tcl="dropdown">\n    <div class="label" ng-if="label" title="{{label}}" ng-class="{ \'disabled\': readOnly }">{{label}}</div>\n\n\t<div class="value">\n\t\t<div qva-activate="onSelectSheet()" class="lui-select" qui-disabled="readOnly" qui-tid="{{key}}">\n\t\t\t<div class="select ng-pristine ng-valid" ng-class="{ \'qui-hover\': hover }" ng-mouseenter="hover = true" ng-mouseleave="hover = false" ng-disabled="readOnly" >\n\t\t\t\t{{title}}\n\t\t\t</div>\n\t\t\t<div class="arrow"></div>\n\t\t\t<div class="border"></div>\n\t\t</div>\n\n\t</div>\n</div>\n';function l(t){o["a"].get(t.value).then((function(e){e.getLayout().then((function(e){var i=e&&e.labelExpression;var n=e&&e.qMeta&&e.qMeta.title;t.title=i||n||""}))})).catch((function(){t.title=n["default"].get("properties.selectSheet")}))}var c={template:s,controller:["$scope",function(t){var e=function e(){return t.data};t.$on("datachanged",(function(){if(!t.data.sheetLink)return;t.value=t.data.sheetLink;l(t)}));t.$on("sheetSelected",(function(e,i){var n=i.qInfo.qId;if(t.value===n)return;t.value=n;t.$emit("saveProperties")}));t.onSelectSheet=function(){r["a"].onSelectSheet(t)};a["a"].defineLabel(t,t.definition,e,t.args.handler);a["a"].defineVisible(t,t.args.handler);a["a"].defineReadOnly(t,t.args.handler);a["a"].defineValue(t,t.definition,e);if(t.value)l(t);else{t.value="";t.title=n["default"].get("properties.selectSheet")}}]};var u=e["default"]=c},S1lg:function(t,e,i){"use strict";e["a"]=function(){return i.e(86).then(i.t.bind(null,"c3D3",7)).then((function(t){var e=t.default;return e}))}},T7lR:function(t,e,i){"use strict";var n=i("b5IE");var a=i("MoEg");var r=n["a"].extend("Rect",{init:function t(e,i,n,r,o){this._super();this._radius=o||0;a["a"].apply(this,[e,i,n,r])},containsPoint:a["a"].prototype.pointInside,intersectsLocalLine:a["a"].prototype.intersectsLine,intersectsLocalRect:a["a"].prototype.intersectsRect,getLocalBoundingRect:a["a"].prototype.getBoundingRect,getLocalPoints:a["a"].prototype.getPoints,set:function t(e,i,n,r,o){a["a"].prototype.set.apply(this,[e,i,n,r]);o>=0&&(this._radius=o);this.invalidateBounds()}});Object.keys(a["a"].prototype).forEach((function(t){!r.prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","intersectsRect"].indexOf(t)<0&&(r.prototype[t]=a["a"].prototype[t])}));e["a"]=r},TFfc:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("6uJb");var r=i("YH1i");var o=i("2Hli");var s={template:r["a"],controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);t.options=[];var i=void 0!==t.definition.numFormatRef?t.definition.numFormatRef:"qDef";i=i.length>0?"".concat(i,"."):i;Object.defineProperty(t,"value",{get:function e(){var n=o["a"].getValue(t.data,"".concat(i,"isCustomFormatted"));if(!n)return o["a"].getValue(t.data,"".concat(i,"qNumFormat.qType"),"U");return"OFF"},set:function e(n){if("OFF"===n){o["a"].setValue(t.data,"".concat(i,"isCustomFormatted"),true);o["a"].setValue(t.data,"".concat(i,"qNumFormat.qType"),"U")}else{o["a"].setValue(t.data,"".concat(i,"isCustomFormatted"),false);o["a"].setValue(t.data,"".concat(i,"qNumFormat.qType"),n)}}});function r(){var e=t.value;var i=t.options.some((function(t){return t.value===e}));i||t.options.splice(0,0,{value:e,label:a["default"].get("properties.selectValue")})}function s(e){t.loading=true;t.errorMessage="";n["a"].fillOptions(t.definition,e||t.data,t.args.handler,t.options,t.args).then((function(){r();t.errorMessage="";t.loading=false}),(function(){r();t.errorMessage=a["default"].get("Properties.PromiseFailed");t.loading=false}))}r();s();t.$on("datachanged",(function(t,e){s(e)}))}]};e["default"]=s},URmv:function(t,e,i){"use strict";i.r(e);var n=i("TmNk");var a=i.n(n);var r=i("GG1N");var o=i("2Hli");var s=i("oxue");var l=i("6uJb");var c='<div class="pp-component pp-string-component pp-library-item-component" ng-if="visible" tcl="library-item">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<div class="lui-input-group">\n\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" ng-model="value" disabled="disabled" title="{{value}}"\n\t\t\t\t   spellcheck="false" ng-class="{ \'lui-invalid\': invalid }"/>\n\t\t\t<button class="lui-button  lui-input-group__item  lui-input-group__button" qva-activate="breakLink()" ng-show="!invalid" tid="unlink-btn">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--link  edit-expression" q-title-translation="{{toolTopTranslationKey}}"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n</div>\n\n\x3c!-- Modifier --\x3e\n<div include-pp-component ng-if="isMeasure" x-component="expandableLightComponent" x-definition="modifiersDefinition" x-data="data" x-args="args" ng-show="showModifiersTab()"></div>\n';var u=i("CudP");var d=i("A3HI");var p=i("VIIj");var f=i("khNO");function h(t,e){var i=e.lastIndexOf(".");if(-1!==i){e=e.substr(0,i);t=o["a"].getValue(t,e)}return t}var v={template:c,controller:["$scope",function(t){var e=function e(){return t.data};t.isMeasure="measure"===t.definition.libraryItemType;r["a"].defineLabel(t,t.definition,e,t.args.handler);r["a"].defineVisible(t,t.args.handler);r["a"].defineReadOnly(t,t.args.handler);r["a"].defineChange(t,t.args.handler);t.breakLink=function(){var e=h(t.data,t.definition.ref);t.isMeasure?d["a"].showBreakLinkDialog(e).then((function(){t.change()})):u["a"].showBreakLinkDialog(e).then((function(){t.change()}))};t.toolTopTranslationKey=t.isMeasure?"Measure.Unlink":"Dimension.Unlink";t.expandableLightComponent=f["default"];t.modifiersDefinition=p["a"];t.showModifiersTab=function(){return!t.definition.hideModifiersTab};function i(){var e;if(t.isMeasure){e=a.a.measureBase.getLibraryId(t.data,t.definition.ref);t.args.app.getMeasureList().then((function(i){var n=s["a"].findLibraryMeasure(e,i);t.value=n?n.qData.title:l["default"].get("Object.ErrorMessage.MissingMeasure");t.invalid=!n}))}else{e=o["a"].getValue(t.data,t.definition.ref);t.args.app.getDimensionList().then((function(i){var n=s["a"].findLibraryDimension(e,i);t.value=n?n.qData.title:l["default"].get("Object.ErrorMessage.MissingDimension");t.invalid=!n}))}}t.$on("datachanged",(function(){i()}));i()}]};var g=e["default"]=v},USFI:function(t,e,i){"use strict";var n=i("9Bsw");function a(){this.alternativeTitleRetriever=n["a"].create();this.cache={}}a.prototype.getDimensionTitle=o;a.prototype.getCachedDimensionTitle=s;a.prototype.getMeasureTitle=l;a.prototype.getCachedMeasureTitle=c;a.prototype.resetTitles=u;var r=a;function o(t,e,i){var n=this;return this.alternativeTitleRetriever.getDimensionTitle(t,e,i).then((function(e){p(n.cache,t.qDef.cId,e);return e}))}function s(t){return d(this.cache,t.qDef.cId)}function l(t,e,i){var n=this;return this.alternativeTitleRetriever.getMeasureTitle(t,e,i).then((function(e){p(n.cache,t.qDef.cId,e);return e}))}function c(t){return d(this.cache,t.qDef.cId)}function u(){this.alternativeTitleRetriever.resetTitles()}function d(t,e){return t[e]||""}function p(t,e,i){t[e]=i}var f={create:v};var h=e["a"]=f;function v(){return new r}},UYVP:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("2Hli");var r=i("ESef");var o='<div tcl="dimensions">\n\n\t\x3c!-- Field --\x3e\n\t<div class="pp-component pp-string-component" tcl="string">\n\t\t<div class="label" q-translation="Common.Field"></div>\n\t\t<div class="value">\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input lui-input-group__item lui-input-group__input" type="text" maxlength="255" spellcheck="false" ng-readonly="items[0].field.isLocked()"\n\t\t\t\t pp-input-validator pp-validation-on-result="items[0].field.setIsValid(isValid)" pp-expression-editor="items[0].field.value"\n\t\t\t\t editor-disabled="!items[0].field.isLocked()" expression-type="dimension" pp-expression-editor-on-apply="items[0].field.onExpressionEditorApply(value)"\n\t\t\t\t ng-model="items[0].field.value" ng-class="{ \'lui-invalid\': !items[0].field.isValid, \'is-expression\': items[0].field.isLocked() }"\n\t\t\t\t ng-change="change()" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" qva-model-onkeyup tid="field" />\n\n\t\t\t\t<button class="lui-button lui-input-group__item lui-input-group__button" pp-expression-editor="items[0].field.value"\n\t\t\t\t pp-expression-editor-on-apply="items[0].field.onExpressionEditorApply(value)" expression-type="dimension" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression edit-expression" ng-class="{ \'active\': items[0].field.interpretAsExpression() }"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="items[0].field.isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n\t</div>\n\n\t\x3c!-- Label expression --\x3e\n\t<div class="pp-component pp-string-component" tcl="string">\n\t\t<div class="label" q-translation="Common.Label"></div>\n\t\t<div class="value">\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input lui-input-group__item lui-input-group__input" type="text" maxlength="255" spellcheck="false" ng-readonly="items[0].label.isLocked()"\n\t\t\t\t pp-input-validator pp-validation-on-result="items[0].label.setIsValid(isValid)" pp-expression-editor="items[0].label.getValueForExpressionEditor()"\n\t\t\t\t editor-disabled="!items[0].label.isLocked()" expression-type="StringExpression" pp-expression-editor-on-apply="items[0].label.onExpressionEditorApply(value)"\n\t\t\t\t ng-model="items[0].label.value" ng-class="{ \'lui-invalid\': !items[0].label.isValid, \'is-expression\': items[0].label.isLocked() }"\n\t\t\t\t ng-change="change()" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" qva-model-onkeyup tid="label" pp-placeholder="items[0].field.value"\n\t\t\t\t pp-placeholder-suppress-equal="true" />\n\n\t\t\t\t<button class="lui-button lui-input-group__item lui-input-group__button" pp-expression-editor="items[0].label.getValueForExpressionEditor()"\n\t\t\t\t pp-expression-editor-on-apply="items[0].label.onExpressionEditorApply(value)" expression-type="StringExpression" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--expression edit-expression" ng-class="{ \'active\': items[0].label.interpretAsExpression() }"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="items[0].label.isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n\t</div>\n</div>';var s={template:o,controller:["$scope",c]};var l=e["default"]=s;function c(t){var e=t.definition.ref?"".concat(t.definition.ref,"."):"";var i="".concat(e,"qDef.qFieldDefs");var o="".concat(e,"qDef.qFieldLabels");var s="".concat(e,"qDef.qLabelExpression");var l=function e(){return t.data};n["a"].defineChange(t,t.args.handler);t.items=u();t.$watchCollection("data.".concat(i),c);t.$watch("data.".concat(s),c);function c(){t.items=u()}function u(){var e=a["a"].getValue(t.data,i,[]);var n=e.map(d);return n}function d(t,e){var i={field:p(t,e),label:f(e)};return i}function p(e,a){var r={definition:{type:"string",ref:g(i,a),expression:"always"},isLocked:function t(){return h(r.value)},isValid:true,setIsValid:function t(e){r.isValid=e},onExpressionEditorApply:function e(i){r.value=i;t.change()},interpretAsExpression:function t(){return v(r.value)}};n["a"].defineValue(r,r.definition,l,"value");return r}function f(e){var i={isValid:true,setIsValid:function t(e){i.isValid=e},isLocked:function t(){return h(i.value)},onExpressionEditorApply:function e(n){var a;if(n){a=n.qStringExpression.qExpr;a&&"="!==a.charAt(0)&&(a="=".concat(a))}i.value=a;t.change()},interpretAsExpression:function t(){return v(i.value)},getValueForExpressionEditor:function t(){var e=i.value;i.interpretAsExpression()&&(e={qStringExpression:{qExpr:e}});return e}};var n=g(o,e);Object.defineProperty(i,"value",{get:function t(){var e=a["a"].getValue(l(),s);return e||a["a"].getValue(l(),n)},set:function t(e){var i=e&&0===e.indexOf("=")?s:n;a["a"].setValue(l(),i,e||void 0);var r=i===s?n:s;a["a"].setValue(l(),r,void 0)}});return i}function h(t){if(!t)return false;return-1!==t.indexOf("\n")||t.length>r["a"].name}function v(t){return t&&"="===t.charAt(0)}function g(t,e){return"".concat(t,".").concat(e)}}},"UuE/":function(t,e,i){"use strict";var n=i("mWu2");var a=i("sWge");var r=i("8wLh");var o=i("n5Vb");var s=i("wIyQ");var l={template:null,controller:["$scope","$element","$timeout",function(t,e,i){var n=this;n.close=function(){r()};function r(){i((function(){t.destroyComponent();e.remove()}));s["a"].off("start.listbox-popover-error",r)}function o(){return i((function(){return e.find(".toolbar-wrapper").outerWidth()}))}var l=t.input.onPopoverClose;var c=null;t.closingDeferred.promise.then((function(t){c&&c();l(t);r()}));t.$on("listboxPopoverFocusSelectionsToolbar",(function(){t.$broadcast("focusSelectionsToolbar")}));a["a"].all({object:t.input.getVisualization(),width:o()}).then((function(e){var i=e.object;var n=e.width;i.getSelectionToolbar().then((function(e){t.toolbar=e;t.toolbar.showLock=t.input.options.showLock;t.toolbar.position={width:n};t.toolbar.onMoveFocus=function(t){i.focus(t)};i.activateSelections()}));i.loaded.then((function(){i.ext.hasError(i)&&s["a"].on("start.listbox-popover-error",r)}));i.selectionsApi.watchDeactivated((function(){r()}));c=function t(){i.selectionsApi.confirm()}}))}]};var c=l;var u=i("B52N");var d='<lui-popover\n\t\tclass="qv-listbox-popover"\n\t\tstyle="min-width: 200px;width: 234px;height: 332px"\n\t\ton-close-view="closeView(event)"\n\t\tqva-outside-ignore-for="{{input.qvaOutsideIgnoreFor}}"\n\t\tqva-mouse-wheel-outside="close()">\n\t<lui-popover-body style="height: 332px" class="lui-nopad">\n\t\t<qv-spinner show="!input.model" spinner-height="100px" spinner-width="100px" show-Delay="300" center-in-parent="true"></qv-spinner>\n\t\t<div class="toolbar-wrapper"\n\t\t\t qva-include-selection-toolbar\n\t\t\t component="input.selectionToolbarComponent"\n\t\t\t toolbar="toolbar"\n\t\t\t options="input.options"></div>\n\t\t<div class="listbox-wrapper">\n\t\t\t<qv-object object="object" model="input.model" options="input.options"></qv-object>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>\n';var p=i("6dxF");var f;var h;var v=e["a"]={showDelayed:function t(e,i){var r=Object(a["a"])();f&&f.close();h={getVisualization:function t(){return r.promise},onPopoverClose:this.onPopoverClose,options:{setController:r.resolve,isPopover:true,showLock:i.showLock,search:i.search||{},smallDevice:u["default"].isSmallDevice,direction:i.direction},selectionToolbarComponent:o["a"],onClose:c};f=n["default"].getService("luiPopover").show({template:d,controller:c.controller,alignTo:i.$alignToElement[0],input:h,closeOnResize:false,dock:"top"});e.then((function(t){h.model=t})).catch((function(t){false}));return f},show:function t(e,i){return this.showDelayed(a["a"].when(e),i)},showField:function t(e,i,n,o){var s=this;return r["a"].createTransientField(i,e,o).then((function(t){return a["a"].resolve(s.show(t,n))})).catch((function(t){false}))},showDimension:function t(e,i,n,a){var o=this;r["a"].createTransientDimension(i,e,a).then((function(t){o.show(t,n)})).catch((function(t){false}))},close:function t(){f&&f.close();f=null},onPopoverClose:function t(){},getPopover:function t(){return f},onClosing:function t(){}}},VIIj:function(t,e,i){"use strict";var n=i("TmNk");var a=i.n(n);var r=i("4nJ1");var o=i("6uJb");var s=i("2Hli");var l="none";function c(t){t.forEach((function(t){a.a.modifiers[t.type]&&a.a.modifiers[t.type].initModifier(t)}))}function u(t,e){if(!t)return l;for(var i=0;i<t.length;i++){var n=t[i].type;if(!t[i].disabled&&a.a.modifiers[n]&&(!e||(Array.isArray(e)&&e.indexOf(n))>-1))return n}return l}function d(t){if(!t)return-1;for(var e=0;e<t.length;e++)if(!t[e].disabled)return e;return-1}function p(t,e){if(!t)return-1;for(var i=0;i<t.length;i++)if(t[i].type===e)return i;return-1}function f(t,e){if(!t)return[];return t.filter((function(t){return t.type===e}))}function h(t,e){var i=r["a"].getValue(t,e);var n=d(i);if(n>-1)return"".concat(e,".").concat(n);return e}function v(t){if(!t)return true;return t.every((function(t){return t.disabled}))}function g(t){if(!t)return;for(var e=0;e<t.length;e++)t[e].disabled=true}var m="qDef.modifiers";var b="none";var y={};var x=Object.keys(a.a.modifiers);x.forEach((function(t){y[t]=true}));function _(t,e,i){return"function"===typeof t.refFn?t.refFn(e,i):t.ref}function C(t,e,i,n){var a;var o=function n(){var a=r["a"].getValue(t.args,"ext.support.modifiers");var o=_(e,i(),t.args);var l=s["a"].getValue(i(),o);if("undefined"===typeof l)return b;return u(l,a)};var l=function n(a){var r=i();var o=_(e,r,t.args);var l=s["a"].getValue(r,o);if(y[a])if(l&&l.length){g(l);var c=p(l,a);c>-1?l[c].disabled=false:l.push({type:a,disabled:false})}else s["a"].setValue(r,o,[{type:a,disabled:false}]);else g(l)};a="undefined"!==typeof n?n:"value";Object.defineProperty(t,a,{get:o,set:l})}function w(t){return"".concat(h(t,m),".outputExpression")}var q={type:"items",component:"items",delimited:true,maxHeight:1024,label:function t(e,i,n){var a=r["a"].getValue(e,m);var s=r["a"].getValue(n,"ext.support.modifiers");var l=u(a,s);return l!==b?o["default"].get("properties.modifier.by.".concat(l)):o["default"].get("properties.modifier")},show:function t(e,i,n){var o=r["a"].getValue(n,"ext.support.modifiers");return o&&Array.isArray(o)&&o.some((function(t){return!!a.a.modifiers[t]}))},items:{dropDown:{ref:m,type:"boolean",component:"dropdown",defineValueFn:C,defaultValue:b,options:function t(e,i,n){var o=r["a"].getValue(n,"ext.support.modifiers",[]);var s=x.filter((function(t){return o.indexOf(t)>-1})).map((function(t){return{value:t,translation:a.a.modifiers[t].translationKey||"properties.modifier.".concat(t)}}));var l=[{value:b,translation:"Common.None"}].concat(s);return l},change:function t(e){var i=r["a"].getValue(e,m);c(i);a.a.cleanUpMeasure(e);v(i)||a.a.initBase(e,true)}},accumulation:a.a.modifiers.accumulation&&a.a.modifiers.accumulation.propertyPanelDef(m),movingAverage:a.a.modifiers.movingAverage&&a.a.modifiers.movingAverage.propertyPanelDef(m),difference:a.a.modifiers.difference&&a.a.modifiers.difference.propertyPanelDef(m),normalization:a.a.modifiers.normalization&&a.a.modifiers.normalization.propertyPanelDef(m),showExpression:{type:"items",component:"expandable-light",maxHeight:530,translation:"properties.modifier.showOutput",show:function t(e,i,n){var o=r["a"].getValue(e,m);var s=r["a"].getValue(n,"ext.support.modifiers");var l=u(o,s);if(l===b)return false;var c=a.a.isApplicableSupportedModifiers({modifierTypes:[l],properties:i.properties});return c},items:{expression:{refFn:w,type:"string",component:"textarea",maxHeight:512,readOnly:function t(){return true}}}}}};q.items.accumulation||delete q.items.accumulation;q.items.movingAverage||delete q.items.movingAverage;q.items.difference||delete q.items.difference;q.items.normalization||delete q.items.normalization;var M=e["a"]=q},VnWy:function(t,e,i){"use strict";var n=i("TmNk");var a=i.n(n);var r=i("9oDI");var o=i("ZszH");var s=i("NTho");var l='<lui-popover class="pp-selectaggregation-popover">\n\t<div class="lui-popover__body lui-popover__body lui-nopad">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item" \n\t\t\t\tng-repeat="aggregation in aggregations" \n\t\t\t\tng-class="{ \'lui-active\': aggregation === getCurrentAggregation() }"\n\t\t\t\tng-click="onAggregationChanged(aggregation)"\n\t\t\t\ttitle="{{aggregation}}">\n\t\t\t\t<span class="lui-list__text lui-list__action">{{aggregation}}</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>';var c=i("4nJ1");function u(t,e){p(this,t,e)}u.prototype.open=f;u.prototype.close=h;u.prototype.isOpen=v;var d=u;function p(t,e,i){e||g("Scope is required");i||g("LuiPopover is required");t.scope=e;t.luiPopover=i;t.popover=null;t.defaultConfig={isOpenButton:function t(){return false},onAggregationChanged:function t(){}};var n=r["a"].COMMON_FUNCTIONS.map((function(t){return o["a"].getFormattedAggregation(t)}));t.settings={template:l,input:{aggregations:n},dock:"bottom",closeOnResize:true,closeOnOutside:true}}function f(t,e,i){t.stopPropagation();var n=this;if(n.popover){n.popover=null;return}var r=c["a"].extend({},n.defaultConfig,i);n.settings.alignTo=t.target;n.settings.input.getCurrentAggregation=function(){return e.currentAggregation};n.settings.input.onAggregationChanged=function(t){e.currentAggregation=t;var o=s["a"].addAggregation(t,e.remainder);var l=void 0!==(null===i||void 0===i?void 0:i.expressionRef)?i.expressionRef:a.a.measureBase.getExpressionRef(e.data);c["a"].setValue(e.data,l,o);r.onAggregationChanged(e,t);n.scope.$emit("saveProperties");h.call(n)};n.popover=n.luiPopover.show(n.settings);n.popover.closing.then((function(t){t&&!r.isOpenButton(t.target)&&(n.popover=null)}))}function h(){if(this.popover){this.popover.close();this.popover=null}}function v(){return!!this.popover}function g(t){throw new Error("ChangeAggregationPopover: ".concat(t))}var m={create:y};var b=m;function y(t,e){return new d(t,e)}var x=i("Fusc");function _(t,e){w(t,e,this)}_.prototype.isChangeable=q;_.prototype.getAggregation=M;_.prototype.getRemainder=S;_.prototype.openPopover=D;_.prototype.closePopover=I;_.prototype.isPopoverOpen=k;var C=_;function w(t,e,i){t||L("Scope is required");e||L("LuiPopover is required");i.popovers=[];i.createPopover=function(){return b.create(t,e)}}function q(t){if(!t||!t.qDef)return false;var e=c["a"].getValue(t,a.a.measureBase.getLabelRef(t));var i=c["a"].getValue(t,a.a.measureBase.getLabelExpressionRef(t));var n=!!e||!!i;var r=!!a.a.measureBase.getLibraryId(t);if(n||r)return false;var o=x["a"].classify(a.a.measureBase.getExpression(t));return 1===o.count&&o.result.function.isCommon}function M(t){if(!t)return"";var e=x["a"].classify(t);return o["a"].getFormattedAggregation(e.result.function.content)}function S(t){if(!t)return"";var e=x["a"].classify(t);return e.result.remainder.content}function D(t,e,i,n){var a=this;var r=a.popovers[e];if(!r){r=a.createPopover();a.popovers[e]=r}Object.keys(this.popovers).forEach((function(t){if(t===e)return;a.popovers[t].close();delete a.popovers[t]}));r.open(t,i,n)}function I(t){var e=this.popovers[t];if(e){e.close();delete this.popovers[t]}}function k(t){var e=this.popovers[t];return!!e&&e.isOpen()}function L(t){throw new Error("ChangeMeasureAggregationService: ".concat(t))}var T={create:A};var E=e["a"]=T;function A(t,e){return new C(t,e)}},VypT:function(t,e,i){"use strict";var n=i("bTsw");var a=i("2Hli");var r=i("zBv7");var o=i("X13V");e["a"]={getLayersProperties:s,getDimensionTitle:l,createHyperCubeHandler:c};function s(t,e){return a["a"].getValue(t,e||"layers")}function l(t,e){if(!t.length)return"";var i=t[0];var n=e.getDimensionLayout(i.qDef.cId);if(!n)return"";if(n.qError&&!r["a"].isCalcCondNotCalculatedErr(n.qError))return o["a"].getDimensionError(n.qError.qErrorCode);var a=i.qLibraryId;var s="H"===n.qGrouping;if(s||a)return n.title||"";return i.qDef.qLabelExpression||n.qFallbackTitle||""}function c(t,e,i,a){var r=new n["a"]({app:a,path:t});r.setProperties(e);r.setLayout(i);return r}},Vyxi:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("6uJb");var l=i("4nJ1");var c=i("GG1N");var u='<div class="pp-component pp-colorby-component" ng-if="visible" tcl="string">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<div class="lui-input-group">\n\t\t\t<input class="lui-input lui-input-group__item lui-input-group__input" ng-disabled="linked || disableInput" qva-focus="autoFocus" qv-enter="onEnter()" qva-blur="onBlur()" ng-keyup="onKeyUp($event)" maxlength="255"\n\t\t\t\t   ng-model="inputData.label" type="text" ng-attr-placeholder="{{placeholder}}" />\n\t\t\t<button ng-if="linked" class="lui-button lui-input-group__item lui-input-group__button" q-title-translation="{{breakLinkTooltip}}" ng-click="breakLink()">\n\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--link"></span>\n\t\t\t</button>\n\t\t\t<button ng-if="!linked && !disableInput" class="lui-button lui-input-group__item lui-input-group__button" q-title-translation="Tooltip.OpenExpressionEditor" ng-click="editExpression()">\n\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--expression edit-expression"></span>\n\t\t\t</button>\n\t\t\t<button class="lui-button lui-caret lui-input-group__item lui-input-group__button" ng-click="onSelectLibraryItem($event)" q-title-translation="{{selectLibraryItemTooltip}}" ng-class="{\'lui-active\': adding === true}"></button>\n\t\t</div>\n\t</div>\n</div>';var d=i("gF9a");var p=i("395F");var f=i("oxue");var h=i("CyFZ");var v=i("CudP");var g=i("A3HI");function m(t){return"="===t.charAt(0)?t:"=".concat(t)}function b(t){return t.split(" ").length>1&&"="!==t.charAt(0)&&"["!==t.charAt(0)?"[".concat(t,"]"):t}var y=function(t,e){return m(e?b(t):t)};var x={template:u,controller:["$scope","$element","luiPopover",function(t,e,i){var n=function e(){return t.data};var r="dimension"===t.definition.libraryItemType;var u=r?t.args.app.getDimensionList:t.args.app.getMeasureList;var m=r?f["a"].findLibraryDimension:f["a"].findLibraryMeasure;var b=r?v["a"].showBreakLinkDialog:g["a"].showBreakLinkDialog;var x=r?p["a"]:d["a"];var _;var C;t.adding=false;t.inputData={label:""};t.placeholder=s["default"].get(t.definition.translation);t.breakLinkTooltip=r?"Dimension.Unlink":"Measure.Unlink";t.selectLibraryItemTooltip=r?"properties.colorBy.selectDimension":"properties.colorBy.selectMeasure";function w(){if(_){_.close();_=null}C&&o.a.preventGestures();t.adding=false;C=null}function q(e){if(!e)return;if(e.activeDimensionIndex>-1){t.inputData.label=s["default"].get("properties.colorBy.currentDimension",e.activeDimensionIndex+1);t.linked=false;t.disableInput=true}else if(e.activeMeasureIndex>-1){t.inputData.label=s["default"].get("properties.colorBy.currentMeasure",e.activeMeasureIndex+1);t.linked=false;t.disableInput=true}else if(e.key){t.disableInput=false;if("libraryItem"===e.type)u.call(t.args.app).then((function(i){var n=m(e.key,i);if(n){t.inputData.label=n.qData.title;t.linked=true}else{t.inputData.label=s["default"].get(r?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure");t.linked=false;t.definition.change(t.data,t.args.handler,{libraryId:void 0,value:""})}t.invalid=!n}));else{t.inputData.label=t.value.key&&"="===t.value.key.charAt(0)?t.value.key.substr(1):t.value.key;t.linked=false;t.definition.change(t.data,t.args.handler,{libraryId:void 0,value:t.inputData.key})}}}function M(e){var i;t.definition.change&&(i=t.definition.change(t.data,t.args.handler,e));if(i&&i.then)i.then((function(){t.$emit("saveProperties");w()}));else{t.$emit("saveProperties");w()}}function S(t,e){if(e.activeDimensionIndex>=0)return t.value.activeDimensionIndex===e.activeDimensionIndex;if(e.activeMeasureIndex>=0)return t.value.activeMeasureIndex===e.activeMeasureIndex;return}function D(e){var i;var n;var a="";if(e.libraryId){i=e.libraryId;n="libraryItem"}else{i=e.value;n="expression"}if(t.value.key===i&&t.value.type===n&&S(t,e)){w();return}if(t.linked&&"libraryItem"===t.value.type&&"expression"===n)a=e.label||"";else{var r=e.value&&"="===e.value.charAt(0)?e.value.substr(1):e.value;a=t.value.label===t.value.key||"=".concat(t.value.label)===t.value.key?r:t.value.label}var o={label:a,key:i,type:n};e.activeDimensionIndex>=0?o.activeDimensionIndex=e.activeDimensionIndex:e.activeMeasureIndex>=0&&(o.activeMeasureIndex=e.activeMeasureIndex);t.value=o;M(e)}function I(e,i){var n=e>-1?s["default"].get("properties.colorBy.currentDimension",e+1):"";var a=i>-1?s["default"].get("properties.colorBy.currentMeasure",i+1):"";if(n.length>0)return n;if(a.length>0)return a;return t.value.key}t.$watch("value",(function(e){"libraryItem"===e.type&&e.label!==e.key&&(t.inputData.label=e.label);q(t.value)}),true);t.onEnter=function(){if(!t.adding){t.adding=true;D({libraryId:void 0,value:t.inputData.label})}a()(e[0].getElementsByClassName("lui-input")[0]).blur()};t.onBlur=function(){if(!t.adding){t.adding=true;D({libraryId:void 0,value:t.inputData.label})}};t.onKeyUp=function(i){if(27===i.keyCode){t.inputData.label=t.value.label;a()(e[0].getElementsByClassName("lui-input")[0]).blur()}};t.breakLink=function(){var e={qLibraryId:t.value.key,qDef:{}};var i=t.definition.numFormatRef&&l["a"].getValue(t.data,t.definition.numFormatRef);if(i){e.qDef.qNumFormat=i.qNumFormat;e.qDef.isCustomFormatted=i.isCustomFormatted;e.qDef.numFormatFromTemplate=i.numFormatFromTemplate;e.qDef.quarantine=i.quarantine}b(e).then((function(){if(i){i.qNumFormat=e.qDef.qNumFormat;i.isCustomFormatted=e.qDef.isCustomFormatted;i.numFormatFromTemplate=e.qDef.numFormatFromTemplate;i.quarantine=e.qDef.quarantine}D({libraryId:void 0,label:r?e.qDef.qFieldLabels[0]:e.qDef.qLabel,value:r?y(e.qDef.qFieldDefs[0],true):e.qDef.qDef});t.linked=false}))};t.editExpression=function(){h["a"].show({expr:I(t.value.activeDimensionIndex,t.value.activeMeasureIndex),title:"Dimension.Expression.Dialog.Edit.Title"}).then((function(t){D({libraryId:void 0,value:y(t)})}))};t.onSelectLibraryItem=function(e){function n(e){e.value=y(e.value,!!e.label);t.linked=false;D(e)}function a(e){t.disableInput=true;t.linked=false;D(e)}function o(e){t.disableInput=true;t.linked=false;D(e)}if(t.adding){w();return}t.adding=true;C=e.target;var s={template:x.template,controller:x.controller,input:{app:t.args.app,closeAddPopover:w,allowExpressionEditor:true,activeMeasures:t.args.handler.getMeasures(),activeDimensions:t.args.handler.getDimensions()},alignTo:C,dock:"bottom"};if(r){s.input.addFieldDimension=n;s.input.addLibraryDimension=D;s.input.addActiveDimension=o}else{s.input.addLibraryMeasure=D;s.input.addExpressionMeasure=D;s.input.addActiveMeasure=a}_=i.show(s);_.closing.then((function(e){e&&!(e.target.classList.contains("lui-button")||e.target.classList.contains("lui-caret")||e.target.classList.contains("lui-input-group__item")||e.target.classList.contains("lui-input-group__button"))&&(t.adding=false)}))};c["a"].defineVisible(t,t.args.handler);c["a"].defineReadOnly(t,t.args.handler);c["a"].defineValue(t,t.definition,n);c["a"].defineLabel(t,t.definition,n,t.args.handler)}]};var _=e["default"]=x},WoAn:function(t,e,i){"use strict";var n=i("MoEg");function a(t,e,i){0===arguments.length?this.set(0,0,0):this.set(t,e,i)}a.prototype={toString:function t(){return"".concat(this.cx," ").concat(this.cy," ").concat(this.r)},clone:function t(){return new a(this.cx,this.cy,this.r)},set:function t(e,i,n){this.cx=e;this.cy=i;this.r=n;this.radius=n},setPosition:function t(e,i){this.cx=e;this.cy=i},setRadius:function t(e){this.radius=e},combineWith:function t(){},intersectsWith:function t(e){return e.pointInside(this.cx,this.cy)},intersectsRect:function t(e){return e.pointInside(this.cx,this.cy)},intersectsLine:function t(e){if(this.pointInside(e.x1,e.y1)||this.pointInside(e.x2,e.y2))return true;var i;var n;var a;var r=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));var o=(e.x2-e.x1)/r;var s=(e.y2-e.y1)/r;var l=o*(this.cx-e.x1)+s*(this.cy-e.y1);var c=o*(this.cx-e.x2)+s*(this.cy-e.y2);if(l>=0&&c<=1){i=l*o+e.x1;n=l*s+e.y1;a=Math.sqrt(Math.pow(i-this.cx,2)+Math.pow(n-this.cy,2));if(a<=this.r)return true}else if(c>=0&&c<=1){i=c*o+e.x2;n=c*s+e.y2;a=Math.sqrt(Math.pow(i-this.cx,2)+Math.pow(n-this.cy,2));if(a<=this.r)return true}return false},pointInside:function t(e,i){var n=Math.sqrt(Math.pow(this.cx-e,2)+Math.pow(this.cy-i,2));return n<=this.r},getPoints:function t(){return[{x:this.cx,y:this.cy}]},getBoundingRect:function t(){return new n["a"](this.cx-this.r,this.cy-this.r,2*this.r,2*this.r)}};e["a"]=a},WwCo:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("nHjU");var o=i("P2vc");var s=i("ohbW");var l=i("wkj2");var c=i("MoEg");var u=i("R0oC");var d=i("UV1h");var p=0;var f=1;var h=3;var v=1;function g(){var t=this;var e=this.getLevels()||[];if(!e.length&&!this._showTitle_internal){this._renderer.clear();return}this._cacheItems&&this._cacheItems.length&&(this._cacheItems[0].objectShapes?this._cacheItems.forEach((function(e){e.objectShapes[t.selectionIdentifier]=null})):this._cacheItems.forEach((function(e){e.clearShapes(t.selectionIdentifier)})));this.isRadial()?o["a"].renderRadial(e,this,this._windowSizeMultiplier):this.isVertical()?C.apply(this,[e]):M.apply(this,[e,this.indicators])}function m(t,e,i,n){var a=t.labels;var r=t.positions;var o=Math.abs(this._fontHeight*Math.sin(i));var s=t.labelSpace;var c=Math.abs(s/Math.sin(i));var d=Math.cos(i);var p;var f;var h;var v;var g;var m;var b;var y;var x=this.yMirrorMode?-Math.PI/2:Math.PI/2;var _=(new l["a"]).skew(x-i,0).scale(this._discreteSpacing*(this._groupSize||1)/this._fontHeight,1).translate(0,-n*this._fontHeight/2).rotate(-x);var C=[];var w;var q=i<0?"right":"left";var M="middle";"near"===this.getAlignment()&&"center"!==q&&(q="left"===q?"right":"left");for(w=0;w<a.length;w++){p=r[w];if(p<0||p>this.rect.width)continue;b=new l["a"];b.translate(r[w],e+n*o/2);b.rotate(i);m="right"===q?Math.min((p+this._edgeBleed.left)/d,c):Math.min((this.rect.width-p+this._edgeBleed.right)/d,c);m-=2*o;C.push({type:"text",fill:this._style.label.color,opacity:t.opacities[w],transform:b.elements,shape:{text:a[w]||"",font:this._style.label.font,maxWidth:m,align:q,baseline:M}});if(S(this._cacheItems,this.isDiscrete(),t.indecies,w)){f="left"===q?0:-Math.abs(s);h=this._fontHeight/2;v=[{x:f,y:-h},{x:f+s,y:-h},{x:f+s,y:h},{x:f,y:h}];y=new l["a"];y.translate(r[w]-t.offsets[w],e+n*o/2);y.multiply(_);g=new u["a"](y.transformPoints(v));D(this._cacheItems,t.indecies[w],this.selectionIdentifier,g)}}return C}function b(t,e){t<e/2?t+=e/2-t:e/2>this._plotSize-t+this._padding.left&&(t-=e/2-(this._plotSize-t+this._padding.left));return t}function y(t,e,i){var n=20;var a="near"===this.getAlignment()?"bottom":"top";var r=t.align||"center";var o;var l;var u;var d;var p;var h;var v;var g;var m=t.labels;var y=t.positions;var _=t.opacities;var C=t.labelMode;var w=this._style;var q=t.widths;var M=[];for(o=0;o<m.length;o++){g=q[o];if(t.labelsBetweenTicks){if(this.yMirrorMode&&(y[o+1]>this.rect.width||y[o]<0))continue;if(!this.yMirrorMode&&(y[o+1]<0||y[o]>this.rect.width))continue;h=Math.min(this.rect.width,Math.max(0,y[o]));v=Math.min(this.rect.width,Math.max(0,y[o+1]||(this.yMirrorMode?Number.MIN_VALUE:Number.MAX_VALUE)));l=h+("left"===r?this._labelPadding:-this._labelPadding);g=Math.min(g,Math.abs(h-v)-this._labelPadding);if(g<this._labelPadding+n)continue}else{l=y[o];if(l<-.5||l>this.rect.width+.5)continue}if(this.isDiscrete()&&C===f&&(0===o||o===m.length-1)){u=s["a"].measureTextObject({type:"text",shape:{text:m[o]||"",x:l,y:e,maxWidth:q[o]-this._labelPadding,font:this._style.label.font,align:r,baseline:a}}).width;0===o&&l<u/2?l+=u/2-l:o===m.length-1&&u/2>this._plotSize-l&&(l-=u/2-(this._plotSize-l))}p=e+(C===f?0:1.5*this._fontHeight*(o%2)*i);if(S(this._cacheItems,this.isDiscrete(),t.indecies,o)){d=new c["a"](y[o]-t.offsets[o]-t.fullWidths[o]/2,p-("bottom"===a?this._fontHeight*w.label.lineHeight:0),t.fullWidths[o],this._fontHeight*w.label.lineHeight);D(this._cacheItems,t.indecies[o],this.selectionIdentifier,d)}M.push({type:"text",fill:this._style.label.color,opacity:_?_[o]:1,_index:o,shape:{text:m[o]||"",x:l,y:p,maxWidth:g-this._labelPadding,font:this._style.label.font,align:r,baseline:a}})}var I=t.labelsBetweenTicks&&m.length>=2&&(this.yMirrorMode?-.5===y[m.length-1]:this.rect.width-y[m.length-1]===.5);I&&x.call(this,{objectsToRender:M,positions:y,values:m,opacities:_,widths:q,align:r,baseline:a,y:e});if(!this.isDiscrete()&&M.length>0&&!t.labelsBetweenTicks){var k=M[0];u=s["a"].measureTextObject(k).width;k.shape.x=b.apply(this,[k.shape.x,u]);k=M[M.length-1];u=s["a"].measureTextObject(k).width;k.shape.x=b.apply(this,[k.shape.x,u])}return M}function x(t){if(0===t.objectsToRender.length)return;var e=t.objectsToRender;var i=t.positions;var n=t.values;var a=t.opacities;var r=t.widths;var o=t.align;var l=t.baseline;var c=t.y;var u=Math.min(this.rect.width,Math.max(0,i[n.length-1]));var d=u+("left"===o?-this._labelPadding:this._labelPadding);var p=s["a"].measureTextObject(e[e.length-1]).width;var f={text:n[n.length-1],font:this._style.label.font,baseline:l};var h=s["a"].measureDisplayTextObject(f).width;if(p+h+3*this._labelPadding>r[n.length-2]){if(!(n.length>2))return;e.length-=1}e.push({type:"text",fill:this._style.label.color,opacity:a?a[n.length-1]:1,_index:n.length-1,shape:{text:n[n.length-1]||"",x:d,y:c,maxWidth:r[n.length-2]-this._labelPadding,font:this._style.label.font,align:"left"===o?"right":"left",baseline:l}})}function _(t,e,i){var n=t.labels;var a=t.positions;var r=t.opacities;var o=t.labelSpace;var s=[];var l=this._style;var u;var d;var p;var f;var h=this._renderer.getFontHeight(l.label.font);p=a.length>1?Math.abs(a[0]-a[1]):this.rect.height;this.isDiscrete()||(p=0);for(d=0;d<n.length;d++){u=a[d];u=Math.max(h/2,Math.min(this._padding.top+this._plotSize-h/2,u));if(u-.5<0||u+.5>this.rect.height)continue;if(S(this._cacheItems,this.isDiscrete(),t.indecies,d)){f=new c["a"](e-("right"===i?o:0),a[d]-t.fullWidths[d]/2-t.offsets[d],o,t.fullWidths[d]);D(this._cacheItems,t.indecies[d],this.selectionIdentifier,f)}s.push({type:"text",fill:l.label.color,opacity:r?r[d]:1,shape:{text:n[d],x:e,y:u-p/2,maxWidth:o,height:p,maxNumLines:1,font:l.label.font,align:i,baseline:"middle"}})}return s}function C(t){var e=t[0]?t[0].positions:[];var i=t[0]?t[0].opacities:[];var n=this._style;var a=this.isDiscrete()?0:n.ticks.major.length;var r=1;var o;var s;var c=new l["a"];var u="far"===this.getAlignment()?"left":"right";var d=[];var f;var h="left"===u?1:-1;a*=h;o=h>0?0:this.rect.width;s=0;o+=h*r/2;s+=this._padding.top;this._showLine_internal&&d.push({stroke:n.line.color,shape:{x1:o,x2:o,y1:s-1,y2:s+this._plotSize},type:"line"});if(!this.isDiscrete()&&this._showLabels_internal){if(this._showLabels_internal)for(f=0;f<e.length;f++)e[f]>=0&&e[f]<=this.rect.height&&d.push({stroke:n.ticks.major.color,opacity:i[f],shape:{x1:o,x2:o+a,y1:e[f],y2:e[f]},type:"line"});o+=n.ticks.major.length*h}if(this._showLabels_internal){o+=n.label.margin*h;t.reverse();for(f=0;f<t.length;f++){if(t[f].labelMode===p)continue;d=d.concat(_.apply(this,[t[f],o,u]));o+=t[f].labelSpace*h}t.reverse()}if(this._showTitle_internal){c=new l["a"];c.translate((h>0?o:0)+(h>0?this.rect.width-o:o)/2,this._padding.top+this._plotSize/2);c.rotate(.5*Math.PI*("right"===u?-1:1));d.push({type:"text",fill:n.title.color,transform:c.elements,shape:{text:this._title||"",maxWidth:this._plotSize,font:n.title.font,align:"center",baseline:"middle"}})}this._renderer.shapes=d;this._renderer.render()}function w(t,e,i,n,a){if(!e)return;for(var r=0;r<e.positions.length;r++)e.positions[r]>=0&&e.positions[r]<=this.rect.width&&t.push({stroke:a,opacity:e.opacities[r],shape:{x1:e.positions[r],x2:e.positions[r],y1:i,y2:i+n},type:"line"})}function q(t,e){var i=this._padding.left||0;t.push({stroke:this._style.line.color,shape:{x1:i-1,x2:i+this._plotSize,y1:e,y2:e},type:"line"})}function M(t,e){var i=!!t[0]&&t[0].labelsBetweenTicks;var n=this._style.ticks.major.length;var a;var r="far"===this.getAlignment()?1:-1;var o=[];var s;var l;var c;n*=r;var u=this._padding.left||0;a="near"===this.getAlignment()?this.rect.height-1:this.isDiscrete()&&this.isHorizontal()?-1:0;a+=v/2*r;q.call(this,o,a);if(!this.isDiscrete()){a+=v*r/2;if(!i){w.call(this,o,t[0],a,n,this._style.ticks.major.color);a+=n}}if(this._showLabels_internal){w.call(this,o,e,a,3,this._style.ticks.major.color);a+=this._style.label.margin*r;for(s=0;s<t.length;s++){if(t[s].labelMode===p)continue;if(i){n=t[0].labelSpace*r*(s+(t[s].outOfSyncWithLevelBelow?0:1));l=a-this._style.label.margin*r-(t[s].outOfSyncWithLevelBelow?0:t[0].labelSpace*r*s);c=t.length>1&&s<t.length-1?this._style.ticks.minor.color:this._style.ticks.major.color;w.call(this,o,t[s],l,n,c)}o=t[s].labelMode===h?o.concat(m.apply(this,[t[s],a,t[s].radians,r])):o.concat(y.apply(this,[t[s],a,r]));t[s].labelSpace&&(a+=t[s].labelSpace*r)}}this._showTitle_internal&&o.push({type:"text",fill:this._style.title.color,shape:{x:u,y:r>0?a:0,width:this._plotSize,height:r>0?this.rect.height-a:a,text:this._title||"",font:this._style.title.font,align:"center",baseline:"middle"}});this._renderer.shapes=o;this._renderer.render()}function S(t,e,i,n){return e&&t&&i&&t[i[n][0]]}function D(t,e,i,n){Array.isArray(e)?e.forEach((function(e){t[e].addShape(i,n)})):t[e].addShape(i,n)}var I=r["a"].extend("Axis",{init:function t(e,i,n){this._super.apply(this,[e,a.a.extend(true,{},{components:{title:{show:true,showFlag:i.showFlag},labels:{show:false,showFlag:i.showFlag}}},i),n]);this._fontHeight=20;this._titleShowFlag=i.titleShowFlag||null;this._showLabels=true;this._showLabels_internal=true;this._showLine=true;this._showLine_internal=true;this._showTitle=false;this._dataIndex=0;this._radial=false;this._relevantAngle=0;this._labelPadding=4;this._cacheItems=null;this._styleService=d["a"].initializeService("object.".concat(i.parentType));this._style=this._getStyleObject(this._styleService);this._padding={top:0,bottom:0,left:0,right:0};this._renderer=new s["a"](this.container);this._$renderAreaWrap&&this._$renderAreaWrap.addClass("qv-chart-component-axis");this.innerRect=new c["a"](0,0,0,0);this.renderers={axis:this._renderer};this.isDimension=i.isDimension},getLevels:function t(){return[]},setSelectableShapes:function t(e){this._cacheItems=e},setSelectedRanges:function t(){},calculateValuePositionMappingInfo:function t(){},_calculatePlotSize:function t(e){var i=0;var n;var a;if(this.isRadial()){n=Math.min(e.height,e.width);a=.4*n;this._relevantAngle=Math.abs(this._radialOptions.end-this._radialOptions.start);i=Math.tan(-this._relevantAngle/4+Math.PI/2)*n*.02;this._radius=a+i;this._centerPoint={x:e.width/2,y:e.height/2+4*i}}else n=this.isVertical()?e.height-this._padding.top-this._padding.bottom:e.width-this._padding.left-this._padding.right;0===this._plotSize&&0!==n,this._plotSize=n},_calculateEdgeBleedAndPlotSize:function t(e){this._edgeBleed={top:(this.isVertical(),1),bottom:this.isVertical()?1:0,left:this.isVertical()?1:Math.max(e.x,1),right:this.isVertical()?0:Math.max(0,this.outerRect.width-e.width-e.x)};this._calculatePlotSize(e)},preRelevantSizeCalculation:function t(){this._isSizing=true;this.updateNow(["properties"]);this._isVertical=this.isVertical();this._style=this._getStyleObject(this._styleService,this._layoutMode,this.isDiscrete());this._fontHeight=Math.ceil(this._renderer.getFontHeight(this._style.label.font));var e=this._isVertical;this._showTitle_internal=r["a"].prototype.isVisible.call({show:this._showTitle&&!!this._title,_verticalLayoutMode:this._verticalLayoutMode,_horizontalLayoutMode:this._horizontalLayoutMode,isVertical:function t(){return e},showFlag:null!==this._titleShowFlag?this._titleShowFlag:this.showFlag<<1},this._layoutMode);if(this._showTitle_internal){this._titleFontHeight=this._renderer.getFontHeight(this._style.title.font);this.relevantSize+=this._titleFontHeight*this._style.title.lineHeight}},calculatePreliminaryRelevantSize:function t(e,i){var n=0;var a=0;var r=e[this.isVertical()?"height":"width"];this._isSizing=true;this.relevantSize=0;this.preliminaryRelevantSize=0;this._preliminaryStatics=0;if(r<=0)return;var o=this.calculatePreliminaryLabelSpace(e,i);n=o.relevantLabelSize||0;a=o.relevantSpacing||0;this.isDiscrete()?this._preliminaryStatics+=v:this._preliminaryStatics+=this._style.ticks.major.length;if(n){this.preliminaryRelevantSize+=n;this.preliminaryRelevantSize+=this._style.label.margin}this._showTitle_internal&&(this._preliminaryStatics+=this._titleFontHeight*this._style.title.lineHeight);this.preliminaryRelevantSize+=this._preliminaryStatics;this.preliminaryRelevantSize=Math.ceil(this.preliminaryRelevantSize);this.perpendicularlyRelevantSpacing={top:0,left:this.yMirrorMode&&"near"===this.getAlignment()||!this.yMirrorMode&&"far"===this.getAlignment()?a:0,right:this.yMirrorMode&&"far"===this.getAlignment()||!this.yMirrorMode&&"near"===this.getAlignment()?a:0,bottom:0};this.relevantSize=this.preliminaryRelevantSize},calculateRelevantSize:function t(e,i,n){this._isSizing=true;this._isVertical=this.isVertical();this.relevantSize=0;var a=n||e;var r=0;var o=0;this.rect.set(a.x,a.y,a.width,a.height);this._calculationSize=a[this.isVertical()?"height":"width"];this.isVertical()?this._calculationSize-=this._padding.top+this._padding.bottom:this._calculationSize-=this._padding.left+this._padding.right;this._plotSize=this._calculationSize;if(0===a.width)return;var s=this.calculateLabelSpace(e,i,n);r=s.relevantLabelSize||0;o=s.relevantSpacing||0;if(r){this.relevantSize+=r;this.relevantSize+=this._style.label.margin}this.relevantSize+=this._preliminaryStatics;this.relevantSize=Math.ceil(this.relevantSize);this.perpendicularlyRelevantSpacing={top:0,left:this.yMirrorMode&&"near"===this.getAlignment()||!this.yMirrorMode&&"far"===this.getAlignment()?o:0,right:this.yMirrorMode&&"far"===this.getAlignment()||!this.yMirrorMode&&"near"===this.getAlignment()?o:0,bottom:0};this._isSizing=false;return this},insertAdjacentTo:function t(e,i){this._super(e,i);if(!this.isDiscrete())switch(this.dock){case"top":this.rect.y+=1;break;case"bottom":this.rect.y-=1;break;default:break}},_getStyleObject:function t(e,i,n){var a=e.layoutMap[i]||"medium";var r=n?".discrete":"";var o=e.scaleFontSize(e.getStyle("axis.label.name","fontSize"),i,r);var s=e.getStyle("axis.label.name","fontFamily");var l=e.scaleFontSize(e.getStyle("axis.title","fontSize"),"full"===a?i:"medium",r);var c=e.getStyle("axis.title","fontFamily");var u={backgroundColor:e.getStyle("","backgroundColor"),label:{lineHeight:1.4,color:e.getStyle("axis.label.name","color"),margin:4,offset:1,font:"normal ".concat(o," ").concat(s)},ticks:{major:{color:e.getStyle("axis.line.major","color"),length:8},minor:{color:e.getStyle("axis.line.minor","color"),length:8}},line:{color:e.getStyle("axis.line.major","color")},title:{lineHeight:1.4,font:"normal ".concat(l," ").concat(c),color:e.getStyle("axis.title","color")}};return u},isVisible:function t(){return this._super.apply(this,[].slice.call(arguments))&&this._showSubcomponents},setShowLabels:function t(e){this._showLabels_internal=e;this._showLabels=e},getShowLabels:function t(){return this._showLabels},getSpacingMode:function t(){return},setShowLine:function t(e){this._showLine_internal=e;this._showLine=e},getShowLine:function t(){return this._showLine},setShowStrategy:function t(e){this._showSubcomponents="none"!==e;this._showTitle=["all","title"].includes(e);this._showTitle_internal=this._showTitle;this.components.title.show=this._showSubcomponents&&["all","title"].includes(e);this._showLabels=["all","labels"].includes(e);this._showLabels_internal=this._showLabels;this.components.labels.show=this._showSubcomponents&&["all","labels"].includes(e)},getShowStrategy:function t(){return this._showSubcomponents},setTitle:function t(e){this._title=e},setLabelMode:function t(e){this._explicitLabelMode=e},setLabels:function t(e){this._explicitLabels=e},setCurrentDataIndices:function t(e){this._currentDataIndices=Array.isArray(e)?e:[e]},setDataIndices:function t(e){this._dataIndices=Array.isArray(e)?e:[e]},setDataRange:function t(){},setOffset:function t(){},setInnerOffset:function t(){},getInnerOffset:function t(){},getNumDiscreteUnits:function t(){},setNumDiscreteUnits:function t(){},getNumDiscreteUnitsInView:function t(){},setMaxDiscreteUnitSize:function t(){},setMinDiscreteUnitSize:function t(){},setUnitAlignment:function t(){},_updateProperties:function t(){var e=this.getType().indices;this._formatter=1===e.length&&this.measureFormatters.length?this.measureFormatters[e[0]]:this.combinedMeasuresFormatter||this._defaultFormatter;this.container.setAttribute("data-type",this.isDiscrete()?"discrete":"continuous");return this},updateSize:function t(){this._super();this._calculateEdgeBleedAndPlotSize(this.rect);this._renderer.edgeBleed=this._edgeBleed;this.innerRect=new c["a"](this.rect.x+this._padding.left,this.rect.y+this._padding.top,this.rect.width-this._padding.left-this._padding.right,this.rect.height-this._padding.top-this._padding.bottom);this._isVertical=this.isVertical()},paint:function t(){g.apply(this,[]);this.fire("rendered");return this},isDiscrete:function t(){return false},getPositionOfValue:function t(){},getAngleOfValue:function t(){},getValueOfPosition:function t(){},getType:function t(){return{type:this.isDimension||this.isDiscrete()?"dimension":"measure",indices:this._dataIndices||[0],current:this._currentDataIndices||[0]}},setPadding:function t(e,i,n,a){this._padding={top:e>0?e:0,right:i>0?i:0,bottom:n>0?n:0,left:a>0?a:0}},getPadding:function t(){return this._padding},isVertical:function t(){var e=this.options.dock;switch(e){case"left":case"right":return true;case"center":return"vertical"===this._orientation;default:return false}},setOrientation:function t(e){this._orientation=e},setAlignment:function t(e){this._align=e},getAlignment:function t(){var e=this.options.dock;switch(e){case"left":case"top":return"near";case"center":return this._align;default:return"far"}},setRadial:function t(e,i){this._radial=e;this._radialOptions=i},isRadial:function t(){return this._radial}});e["a"]=I},Xhga:function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("2Hli");var r='<div class="image-picker-component" tcl="sorting">\n\t<div ng-init="init()" include-pp-component x-component="item.component" x-definition="item.definition" x-data="item.data" x-args="item.args"></div>\n</div>\n';var o=i("Co6/");var s=i("acVu");function l(t){return p(t)||d(t)||u(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(t,e)}function d(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function p(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h={template:r,controller:["$scope",function(t){var e=t.definition.id;var i="function"===typeof t.definition.baseRefFn?t.definition.baseRefFn(t.data,t.args):t.definition.baseRef;var r="function"===typeof t.definition.targetDimIndexFn?t.definition.targetDimIndexFn(t.data,t.args):t.definition.targetDimIndex;function c(e){var n=t.args.properties;var r="".concat(i);var s=a["a"].getValue(n,r,[]);if(s.length>0)return"".concat(i,".").concat(o["a"].findAttrIndex(s,e.cId));return}function u(){t.item={component:n["a"].getComponent("items"),definition:{type:"items",ref:"",items:{imagePickerComponent:{type:"array",component:"image-picker-list",translation:"properties.imagePicker.images",addTranslation:"properties.imagePicker.addImage",allowAdd:true,allowRemove:true,allowMove:false,grouped:true,targetDimIndex:t.definition.targetDimIndex,targetDimIndexFn:t.definition.targetDimIndexFn,max:t.definition.max,ref:i,id:e,items:{imageType:{type:"string",component:"dropdown",ref:"type",translation:"properties.imagePicker.type",show:function t(){return Object(s["b"])("CUSTOM_TOOLTIP_IMAGES")},change:function e(i){a["a"].setValue(i,"ref",void 0);var n=t.args.properties;var s=o["a"].getAttrExps(n,r);var l=o["a"].findAttrIndex(s,i.cId);o["a"].deleteAttributeExpression(t,s,l)},options:[{value:"media",translation:"properties.imagePicker.media"}].concat(l(Object(s["b"])("IMAGE_BUNDLE_LOAD")?[{value:"field",translation:"properties.imagePicker.field"}]:[]),[{value:"url",translation:"properties.imagePicker.url"}]),defaultValue:"media"},imageSize:{type:"string",component:"dropdown",ref:"size",translation:"properties.imagePicker.size",options:[{translation:"properties.imagePicker.small",value:"small"},{translation:"properties.imagePicker.medium",value:"medium"},{translation:"properties.imagePicker.large",value:"large"},{translation:"properties.imagePicker.original",value:"original"}],defaultValue:"small"},imageValues:{component:"items",grouped:true,items:{media:{schemaIgnore:true,translation:"properties.imagePicker.media",tooltip:{select:"properties.media.select",remove:"properties.media.removeBackground"},type:"string",component:"media",defaultValue:"",show:function t(e){var i=a["a"].getValue(e,"type");return!i||"media"===i},ref:"ref.qStaticContentUrlDef.qUrl",layoutRefFn:function t(e){return"".concat(c(e),".ref.qStaticContentUrl.qUrl")}},field:{schemaIgnore:true,translation:"properties.imagePicker.selectDimension",type:"object",defaultValue:{},component:"color-by-dropdown",libraryItemType:"dimension",show:function t(e){var i=a["a"].getValue(e,"type");return"field"===i},change:function e(i){o["a"].setAttributeExpressionValue(t,i,r)},ref:"ref"},url:{translation:"properties.imagePicker.url",minlength:1,expression:"optional",type:"string",defaultValue:"",show:function t(e){return"url"===a["a"].getValue(e,"type")},change:function e(i){o["a"].setAttributeExpressionValue(t,i,r)},ref:"ref"}}}}}}},args:t.args}}function d(){u();t.item.data=t.data}t.$watchCollection("data",d);t.init=function(){d()}}]};var v=e["default"]=h},Y1Qi:function(t,e,i){"use strict";var n=i("Z9ZH");var a=i.n(n);var r=i("mWu2");var o='<div class="column-width-adjuster">\n\t<qv-column-width-adjust-column ng-repeat="column in columns" column="column" explicit-column-width="explicitColumnWidths[$index]" x-rtl="rtl" min-col-width="minColWidth"></qv-column-width-adjust-column>\n</div>\n';var s='<div class="column-width-adjust-column" ng-style="columnStyle">\n\t<div class="column-width-adjust-line" ng-class="{active : isActive}"></div>\n</div>\n';r["default"].directive("qvTableColumnWidthAdjuster",[function(){return{restrict:"E",replace:true,template:o,scope:{columns:"=",explicitColumnWidths:"=",rtl:"=",minColWidth:"="}}}]);r["default"].directive("qvColumnWidthAdjustColumn",[function(){return{restrict:"E",scope:{column:"=",explicitColumnWidth:"=",rtl:"=",minColWidth:"="},template:s,replace:true,link:function t(e,i){var n="columnAdjuster";var r=e.minColWidth||40;var o;e.columnStyle={};e.$watch("column.left",(function(){e.columnStyle.left="".concat(e.column.left,"px")}));e.$watch("column.hidden",(function(){e.columnStyle.display=e.column.hidden?"none":"block"}));e.$watch("column.height",(function(){e.columnStyle.height="".concat(e.column.height,"px")}));e.$watch("column.top",(function(){e.columnStyle.top="".concat(e.column.top,"px")}));e.$on("$destroy",(function(){a()(i[0]).off("*",n)}));a()(i[0]).swipe({id:n,options:{radiusThreshold:5,preventDefault:false},start:function t(){e.explicitColumnWidth=e.column.width;o=e.explicitColumnWidth;e.$emit("onExplicitColumnStarted")},update:function t(i,n){var a=(e.rtl?-1:1)*n.swipe.deltaX;var s=Math.max(o+a,r);e.isActive||(e.isActive=true);e.explicitColumnWidth=s;e.$apply();e.$emit("onExplicitColumnChanging")},end:function t(){e.isActive=false;e.$emit("onExplicitColumnChanged")}}).doubletap({id:n,end:function t(){e.isActive=false;e.explicitColumnWidth=-1;e.$apply();e.$emit("onExplicitColumnChanged")}})}}}])},Y2ww:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("mWu2");var o=i("q6LT");function s(t,e,i){var n;var a;var r;var o=[];for(a=0;a<e.length;a++)for(n=0;n<t.length;n++){r={qType:i,qCol:e[a],qRow:t[n]};o.push(r)}return o}var l=o["a"].extend("PivotApi",{init:function t(e){this._super(e,"/qHyperCubeDef",{mode:"P"});this.cacheCube.setMethodName("getHyperCubePivotData")},updateCache:function t(e){if(e&&e.qHyperCube&&"P"===e.qHyperCube.qMode){this.cacheCube.set(e.qHyperCube.qPivotDataPages);this.cacheCube.setCubeSize(e.qHyperCube.qSize)}else this.cacheCube.clear();this.backendStackThrottle.clear()},getData:function t(e){switch(this.model.layout.qHyperCube.qMode){case"P":return this.cacheCube.getData(e);default:throw new Error("you are using a non-supported backend-api")}},getReducedData:function t(e,i,n){n=void 0!==n?n:"D1";return this.model.getHyperCubeReducedData(this.path,e,i,n)},select:function t(e,i,n){switch(this.model.layout.qHyperCube.qMode){case"P":return this.model.selectPivotCells(this.path,s(e,i,n));default:throw new Error("you are using a non-supported backend-api")}},expandTop:function t(e,i,n){return this.model.expandTop(this.path,e,i,n)},expandLeft:function t(e,i,n){return this.model.expandLeft(this.path,e,i,n)},collapseTop:function t(e,i,n){return this.model.collapseTop(this.path,e,i,n)},collapseLeft:function t(e,i,n){return this.model.collapseLeft(this.path,e,i,n)},clearSelections:function t(){return this.model.resetMadeSelections()},hasSelections:function t(){return this.model.layout.qSelectionInfo.qMadeSelections},getSize:function t(){return this.model.layout.qHyperCube.qSize}});var c=l;var u=i("Sn1l");var d=i("2Hli");var p=i("4nJ1");var f=i("6uJb");var h=i("fwzx");var v=i("UV1h");var g=i("e5Ml");var m=i("acVu");function b(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?b(Object(i),true).forEach((function(e){x(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function x(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}function _(t,e,i){if(!i.properties.qHyperCubeDef.qIndentMode)return true;var n=i.properties.qHyperCubeDef.qInterColumnSortOrder.indexOf(-1);var a=i.properties.qHyperCubeDef.qNoOfLeftDims;n>-1&&n<a&&a--;var r=i.properties.qHyperCubeDef.qDimensions.indexOf(t);return 0===r||r>=a}function C(t){t.qAttributeExpressions[0]=t.qAttributeExpressions[0]||{};t.qAttributeExpressions[1]=t.qAttributeExpressions[1]||{};t.qAttributeExpressions[0].id=h["a"].IDMAP.CELL_BACKGROUND_COLOR;t.qAttributeExpressions[1].id=h["a"].IDMAP.CELL_FOREGROUND_COLOR}var w={textAlignAuto:{ref:"qDef.textAlign.auto",type:"boolean",component:"switch",show:Object(m["b"])("PIVOT_ALIGN"),translation:"Common.Text.TextAlignment",change:function t(e){p["a"].setDefaultValue(e,"qDef.textAlign.align","left")},options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],defaultValue:true},textAlign:{ref:"qDef.textAlign.align",type:"string",component:"item-selection-list",horizontal:true,items:[{component:"icon-item",icon:"align_left",labelPlacement:"bottom",value:"left",translation:"properties.dock.left"},{component:"icon-item",icon:"align_center",labelPlacement:"bottom",value:"center",translation:"Common.Center"},{component:"icon-item",icon:"align_right",labelPlacement:"bottom",value:"right",translation:"properties.dock.right"}],defaultValue:"left",show:function t(e){return void 0!==e.qDef.textAlign&&!e.qDef.textAlign.auto}}};var q=v["a"].initializeService("object.pivotTable");var M={uses:"settings",items:{presentation:{type:"items",translation:"properties.presentation",grouped:true,items:{style:{type:"items",items:[{component:"style-editor",translation:"LayerStyleEditor.component.styling",subtitle:"LayerStyleEditor.component.styling",resetBtnTranslation:"LayerStyleEditor.component.resetAll",key:"theme",ref:"components",show:Object(m["b"])("PIVOT_CUSTOM_STYLES"),defaultValue:[],defaultValues:{key:"theme",content:{fontSize:null,fontColor:{index:-1,color:null},hoverEffect:false,hoverColor:{index:-1,color:null},hoverFontColor:{index:-1,color:null}},header:{fontSize:null,fontColor:{index:-1,color:null}}},items:{chart:{type:"items",items:{headerFontSize:{show:true,ref:"header.fontSize",translation:"ThemeStyleEditor.style.headerFontSize",component:"integer",placeholder:function t(){return parseInt(q.getStyle("header","fontSize"),10)},maxlength:3,change:function t(e){e.header.fontSize=Math.max(5,Math.min(300,Math.floor(e.header.fontSize)))}},headerFontColor:{show:true,ref:"header.fontColor",translation:"ThemeStyleEditor.style.headerFontColor",type:"object",component:"color-picker",dualOutput:true},fontSize:{show:true,translation:"ThemeStyleEditor.style.cellFontSize",ref:"content.fontSize",component:"integer",placeholder:function t(){return parseInt(q.getStyle("content","fontSize"),10)},maxlength:3,change:function t(e){e.content.fontSize=Math.max(5,Math.min(300,Math.floor(e.content.fontSize)))}},fontColor:{show:true,ref:"content.fontColor",translation:"ThemeStyleEditor.style.cellFontColor",type:"object",component:"color-picker",dualOutput:true},hoverEffect:{show:Object(m["b"])("TABLE_HOVER_ROW"),ref:"content.hoverEffect",translation:"ThemeStyleEditor.style.hoverEffect",type:"boolean",component:"switch",options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},hoverColor:{show:function t(e){return Object(m["b"])("TABLE_HOVER_ROW")&&e.content.hoverEffect},ref:"content.hoverColor",translation:"ThemeStyleEditor.style.hoverStyle",type:"object",component:"color-picker",dualOutput:true},hoverFontColor:{show:function t(e){return Object(m["b"])("TABLE_HOVER_ROW")&&e.content.hoverEffect},ref:"content.hoverFontColor",translation:"ThemeStyleEditor.style.hoverFontStyle",type:"object",component:"color-picker",dualOutput:true},scrollbarSize:{show:Object(m["b"])("TABLE_SCROLLBAR_SIZE"),ref:"scrollbar.size",translation:"ThemeStyleEditor.style.scrollbarSize",component:"dropdown",defaultValue:function t(){return q.getStyle("scrollbar","size")||"small"},options:[{value:"small",translation:"Common.Small"},{value:"medium",translation:"Common.Medium"},{value:"large",translation:"Common.Large"}]}}}}}]},rowStyle:{type:"items",items:{RowsTitle:{type:"string",component:"text",translation:"properties.pivot.rows"},alwaysFullyExpanded:{ref:"qHyperCubeDef.qAlwaysFullyExpanded",type:"boolean",translation:"properties.pivot.fullyExpanded",defaultValue:false},indentMode:{ref:"qHyperCubeDef.qIndentMode",type:"boolean",translation:"properties.pivot.indentMode"},resetProperties:{type:"object",component:"button",translation:"properties.pivot.resetExpansionButton",show:Object(m["b"])("USE_PIVOT_STATE"),disabled:function t(e){return e.qHyperCubeDef.qAlwaysFullyExpanded},action:function t(e,i,n,a){e.qHyperCubeDef.qExpansionState=[];a.$emit("saveProperties",e)}}}}}}}};var S={type:"items",show:Object(m["b"])("PIVOT_BY_Y"),items:{sortbyYToggle:{ref:"qHyperCubeDef.qSortbyYValue",type:"boolean",component:"switch",translation:"properties.sorting.sortByY.label",convertFunctions:{get:function t(e){return!!e("integer")},set:function t(e,i){i("integer",e?-1:0)}},options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},sortbyYOrder:{ref:"qHyperCubeDef.qSortbyYValue",type:"string",component:"dropdown",defaultValue:0,options:[{value:1,translation:"properties.sorting.ascending"},{value:-1,translation:"properties.sorting.descending"}],show:function t(e){var i,n;return 0!==(null!==(i=null===e||void 0===e||null===(n=e.qHyperCubeDef)||void 0===n?void 0:n.qSortbyYValue)&&void 0!==i?i:0)}}}};var D={type:"items",translation:"properties.sorting",items:{sortbyY:S,defaultSorting:{uses:"sorting",items:{dimensions:{showPriority:false,allowMove:false},measures:{included:false}}},searchSorting:{ref:"search.sorting",type:"string",component:"dropdown",defaultValue:g["f"],translation:"Object.Table.SortingInSearch",show:Object(m["b"])("TABLE_SEARCH_SORTING"),options:[{value:g["f"],translation:"Common.Auto"},{value:g["g"],translation:"Object.Table.SortingInSearch.InheritFromDimension"}]}}};var I={type:"string",component:"expression",ref:"qCalcCondition.qCond",expression:"optional",expressionType:"ValueExpr",translation:"Object.Table.Columns.VisibilityCondition",defaultValue:{qv:""},tid:"visibilityCondition",isExpression:function t(e){return"string"===typeof e&&e.trim().length>0}};var k={tableColorBgByExpression:{component:"expression",expressionType:"measure",ref:"qAttributeExpressions.0.qExpression",translation:"Object.Table.Measure.BackgroundExpression",defaultValue:"",change:C},tableColorByExpression:{component:"expression",expressionType:"measure",ref:"qAttributeExpressions.1.qExpression",translation:"Object.Table.Measure.ForegroundExpression",defaultValue:"",change:C}};var L={type:"items",component:"pivot-data",translation:"properties.data",addTranslation:"Properties.AddData",items:{dimensions:p["a"].extend(true,{},u["a"].dimensions,{items:y(y({globalGrouping:{type:"boolean",translation:"properties.dimensionLimits.globalGrouping",ref:"qOtherTotalSpec.qGlobalOtherGrouping",defaultValue:false,show:function t(e){return"OTHER_OFF"!==d["a"].getValue(e,"qOtherTotalSpec.qOtherMode")}},totalMode:{type:"string",component:"switch",translation:"properties.showTotals",ref:"qOtherTotalSpec.qTotalMode",defaultValue:g["i"],trueOption:{value:g["h"],translation:"properties.on"},falseOption:{value:g["i"],translation:"properties.off"},show:_},totalsLabel:{type:"string",component:"expression",expressionType:"StringExpr",ref:"qTotalLabel",translation:"properties.totals.label",defaultValue:function t(){return f["default"].get("Object.Table.Totals")},show:function t(e,i,n){return d["a"].getValue(e,"qOtherTotalSpec.qTotalMode")!==g["i"]&&_(e,i,n)}},visibilityCondition:I},k),w)}),measures:p["a"].extend(true,{},u["a"].measures,{items:y(y({visibilityCondition:I},k),w)})}};var T={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}}}};var E={data:L,sorting:D,addons:T,settings:M};var A={type:"items",component:"accordion",items:E};var P=i("bTsw");var O=i("sWge");var R=i("G3JA");var V=i("dTxP");function N(t,e,i,n,a){var r=t.hcProperties.qNoOfLeftDims;var o=e.length;var s=t.hcProperties.qInterColumnSortOrder;var l=s.indexOf(-1);function c(){s.splice(l,1);s.push(o);s.splice(l+1,0,-1)}if(n||-1!==r&&!Number.isNaN(+r))if(!n&&r>=0){if(l>=r)c();else{-1!==l&&--r;a<=r&&-1!==l?c():s.push(o)}if("number"===typeof a&&a<r){var u=Math.max(a-1,0);e.splice(u,0,i)}else e.splice(r,0,i);t.hcProperties.qNoOfLeftDims++}else{0===o&&(t.hcProperties.qNoOfLeftDims=0);var d="number"===typeof a?a+r:void 0;l>=d?c():s.push(o);"number"===typeof a?d>l&&l>-1?e.splice(d-1,0,i):e.splice(d,0,i):e.push(i)}else{t.hcProperties.qNoOfLeftDims=1;s.unshift(o);e.splice(0,0,i)}}var z={rearrange:N};function F(t){F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return F(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function $(t,e,i){e&&H(t.prototype,e);i&&H(t,i);return t}function B(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&W(t,e)}function W(t,e){W=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return W(t,e)}function G(t){var e=J();return function i(){var n=K(t),a;if(e){var r=K(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return U(this,a)}}function U(t,e){if(e&&("object"===F(e)||"function"===typeof e))return e;return Y(t)}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function K(t){K=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return K(t)}var Z=1e3;var Q=1e3;var X=function(t){B(i,t);var e=G(i);function i(){j(this,i);return e.apply(this,arguments)}$(i,[{key:"addDimension",value:function t(e,i,n){var a=this.getDimensions();var r=void 0!==i&&i;var o=this;e.qDef.cId||(e.qDef.cId=p["a"].generateId());if(a.length<this.maxDimensions())return this.autoSortDimension(e).then((function(){V["a"].fixPivotHypercubeOrders(o.hcProperties);z.rearrange(o,a,e,r,n);return O["a"].resolve(e)}));return O["a"].resolve()}},{key:"reinsertDimension",value:function t(e,i,n){var a=this.getDimensions();e.qDef.cId||(e.qDef.cId=p["a"].generateId());if(a.length<this.maxDimensions())return this.addDimension(e,i,n);if(a.length<Q){n=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(n,0,e);return O["a"].resolve(e)}return O["a"].resolve()}},{key:"removeDimension",value:function t(e){var i=this.getDimensions();var n=this.properties.qHyperCubeDef.qNoOfLeftDims;var a=this.hcProperties.qInterColumnSortOrder;var r;var o;for(o=0;o<a.length;o++)if(a[o]===e){r=o;break}r+1<=n&&this.properties.qHyperCubeDef.qNoOfLeftDims--;var s=this.properties.qHyperCubeDef.columnWidths?this.properties.qHyperCubeDef.columnWidths[1]:void 0;Array.isArray(s)&&s.length>e&&s.splice(e,1);var l=i.splice(e,1)[0];R["a"].indexRemoved(this.hcProperties.qInterColumnSortOrder,e);V["a"].fixPivotHypercubeOrders(this.hcProperties);return O["a"].resolve(l)}},{key:"addMeasure",value:function t(e,i,n,a){var r=this.getMeasures();var o=this;e.qDef.cId||(e.qDef.cId=p["a"].generateId());a||delete e.qDef.qNumFormat;if(r.length<this.maxMeasures()){var s=1===r.length;r.push(e);return this.autoSortMeasure(e).then((function(){s&&o.hcProperties.qInterColumnSortOrder.push(-1);return e}))}if(r.length<Z){this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.push(e);return O["a"].resolve(e)}return O["a"].resolve()}},{key:"reinsertMeasure",value:function t(e,i){var n=this.getMeasures();e.qDef.cId||(e.qDef.cId=p["a"].generateId());i=void 0!==i?i:n.length;if(n.length<this.maxMeasures()){n.splice(i,0,e);if(this.hcProperties&&this.hcProperties.qInterColumnSortOrder&&2===n.length){var a=this.hcProperties.qInterColumnSortOrder.indexOf(-1);-1===a&&this.hcProperties.qInterColumnSortOrder.push(-1)}}else if(n.length<Z){i=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(i,0,e)}return O["a"].resolve(e)}},{key:"removeMeasure",value:function t(e){var i=this.getMeasures();var n;var a;var r;if(e<i.length){n=2===i.length;a=this.hcProperties.qMeasures.splice(e,1)[0];if(n){var o=this.hcProperties.qInterColumnSortOrder;r=o.indexOf(-1);o.splice(r,1);r+1<=this.hcProperties.qNoOfLeftDims&&this.hcProperties.qNoOfLeftDims--}}else a=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(e-i.length,1)[0];return O["a"].resolve(a)}},{key:"getSorting",value:function t(){throw new Error("don't call this")}},{key:"changeSorting",value:function t(){throw new Error("don't call this")}},{key:"setSorting",value:function t(){throw new Error("don't call this")}}]);return i}(P["a"]);var tt=X;var et=i("4zDG");var it=i("T+/0");var nt="qHyperCubeDef.qDimensions";var at="dimensions";var rt="qOtherTotalSpec.qTotalMode";var ot="totalMode";function st(t){it["a"].quarantineArrayProp(t,nt,rt,at,ot)}function lt(t){it["a"].unquarantineArrayProp(t,nt,rt,at,ot)}var ct={quarantine:st,unquarantine:lt};function ut(t){var e=h["a"].getIndexById(t,h["a"].IDMAP.CELL_BACKGROUND_COLOR);return e>-1?t[e]:0!==h["a"].getIndexById(t,h["a"].IDMAP.CELL_FOREGROUND_COLOR)?t[0]:t[1]}function dt(t){var e=h["a"].getIndexById(t,h["a"].IDMAP.CELL_FOREGROUND_COLOR);return e>-1?t[e]:1!==h["a"].getIndexById(t,h["a"].IDMAP.CELL_BACKGROUND_COLOR)?t[1]:t[0]}function pt(t){var e=t.qAttributeExpressions;var i=ut(e);var n=dt(e);e[0]=i;e[1]=n}function ft(t){var e=t.qAttributeExpressions;e&&e[0]&&(e[0].id=h["a"].IDMAP.CELL_BACKGROUND_COLOR);e&&e[1]&&(e[1].id=h["a"].IDMAP.CELL_FOREGROUND_COLOR)}function ht(t,e,i){var n=et["default"].pivotChart.importProperties.apply(et["default"],[t,e,i]);et["default"].unquarantineObject(n.qProperty,"pivotTableColumnWidths")||d["a"].setValue(n,"qProperty.qHyperCubeDef.columnWidths",e.qHyperCubeDef.columnWidths.concat());var a=p["a"].getValue(n,"qProperty.qHyperCubeDef.qMeasures",[]);a.forEach(pt);et["default"].conditionalShow.unquarantine(n.qProperty);ct.unquarantine(n.qProperty);return n}function vt(t){var e=et["default"].pivotChart.exportProperties.apply(et["default"],[t]);et["default"].quarantineProperty("qHyperCubeDef.columnWidths",e,"pivotTableColumnWidths");et["default"].conditionalShow.quarantine(e.properties);ct.quarantine(e.properties);var i=p["a"].getValue(e,"properties.qHyperCubeDef.qMeasures",[]);i.forEach(ft);return e}var gt={importProperties:ht,exportProperties:vt};var mt=i("/5Yl");var bt='<div class="qv-pt" ng-class="{ \'qv-pt-interactive\': interactive, \'sortable-active\': pivoting.dragPlaceholder, \'qv-rtl-layout\': options.direction === \'rtl\', \'touch-on\': !treatAsDesktop }" aria-hidden="true" ng-click="onClick($event)">\n\t<qv-table-column-width-adjuster\n\t\t\tmin-col-width="scrollApi.settings.column.minColWidth"\n\t\t\tng-if="navigatable && !selectionsApi.active && layout.qHyperCube.qNoOfLeftDims"\n\t\t\tcolumns="columns"\n\t\t\texplicit-column-widths="explicitColumnWidths"\n\t\t\tx-rtl="rtl"\n\t\t\tdir="{{direction}}">\n\t</qv-table-column-width-adjuster>\n\t<qv-scroll-area x-non-mouse-viewport-scrolling="nonMouseViewportScrolling"\n\t\t\t\t\tclass="qv-grid-object-scroll-area"\n\t\t\t\t\tqva-delegated-activate=".qv-pt-expandable#interactive && !selectionsApi.active && collapseExpand($event);"\n\t\t\t\t\tqv-sortable-list="pivoting"\n\t\t\t\t\tx-direction="viewport.direction">\n\t\t<table\tdir="{{viewport.direction}}"\n\t\t\t\tqv-selections-select-while-locked="selectWhileLocked()"\n\t\t\t\tqv-selections-toggle-dimension-value="{ selector: \'.cell\' }"\n\t\t\t\tqv-selections-on-toggle-dimension-value="interactive && selectDimensionValue(cell, $event)"\n\t\t\t\tqv-selections-exclude-toggle-dimension-value="excludeDimensionToggle($event)"\n\t\t\t\tqv-selections-multiselect="{ selector: \'.cell:not(.null-value)\' }"\n\t\t\t\tqv-selections-start-multiselect="interactive && activateSelections(cell)"\n\t\t\t\tqv-selections-update-multiselect="interactive && multiselectDimensionValues(start, current, dataColIx)"\n\t\t\t\tqv-selections-end-multiselect="interactive && multiselect()">\n\t\t\t<colgroup>\n\t\t\t\t<col ng-repeat="cell in metaGhostHeaders.headers" ng-style="cell.style" />\n\t\t\t</colgroup>\n\t\t\t<tbody ng-style="themeStyle.header">\n\t\t\t\t<tr ng-repeat="row in grid.headerRows" tid="header.row"\n\t\t\t\t\tng-class="row.classList" on-finish-render>\n\t\t\t\t\t<th ng-repeat="cell in row.cells"\n\t\t\t\t\t\tng-class="cell.classList"\n\t\t\t\t\t\tclass="cell"\n\t\t\t\t\t\tcolspan="{{cell.colspan}}"\n\t\t\t\t\t\trowspan="{{cell.rowspan}}"\n\t\t\t\t\t\tng-style="cell.style"\n\t\t\t\t\t\tqv-pivot-table-include="cell.templateSrc"\n\t\t\t\t\t\ttitle="{{cell.text}}"\n\t\t\t\t\t\ttid="header.row.cell"></th>\n\t\t\t\t</tr>\n\t\t\t\t<tr ng-mouseover="grid.hover(row, true, themeStyle)" ng-mouseleave="grid.hover(row, false, themeStyle)" ng-repeat="row in grid.rows" tid="data.row" ng-style="!row.isHovering && themeStyle.content.default" on-finish-render>\n\t\t\t\t\t<td ng-repeat="cell in row.cells"\n\t\t\t\t\t\tng-class="[{\'color-dark\': cell.color.bgByExpression && !cell.color.bgIsDark && !cell.isHovering, \'color-light\': cell.color.bgByExpression && cell.color.bgIsDark && !cell.isHovering, \'null-value\' : cell.isNullValue && !cell.isHovering}, cell.classList]"\n\t\t\t\t\t\tclass="cell"\n\t\t\t\t\t\tcolspan="{{cell.colspan}}"\n\t\t\t\t\t\trowspan="{{cell.rowspan}}"\n\t\t\t\t\t\tng-style="!cell.selected && !cell.selectedHighlighted && (cell.isHovering ? cell.hoverStyle : cell.style)"\n\t\t\t\t\t\tqv-pivot-table-include="cell.templateSrc"\n\t\t\t\t\t\ttitle="{{cell.text}}"\n\t\t\t\t\t\ttid="data.row.cell"></td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</qv-scroll-area>\n</div>\n';var yt='<div class="value" ng-style="{\'textAlign\':cell.textAlign}" ng-class="{ \'qv-rtl-text\': cell.isRtl }" ng-bind="cell.text" dir="{{cell.dir}}"></div>\n';var xt='<div class="value" dir="{{cell.dir}}" ng-style="{\'textAlign\':cell.textAlign}" ng-class="{ \'qv-rtl-text\': cell.isRtl }">\n\t<i class="qv-pt-expandable lui-icon" ng-if="cell.collapseExpandClass" ng-class="cell.collapseExpandClass"></i>\n\t<span ng-bind="cell.text"></span>\n</div>\n';var _t='<div class="left-meta-headers list"\n\t tid="meta.rows"\n\t ng-repeat="list in [pivoting.rows]"\n\t qv-pivot-table-include="list.templateSrc">\n</div>';var Ct='<div class="top-meta-headers list"\n\t tid="meta.columns"\n\t ng-repeat="list in [pivoting.columns]"\n\t qv-pivot-table-include="list.templateSrc">\n</div>';var wt='<div class="button-wrapper"\n\t ng-repeat="header in list.items track by header.id"\n\t qv-pivot-table-include="header.templateSrc">\n</div>';var qt='<div class="lui-button qv-pt-meta-button"\n\t\ttid="meta.button"\n\t\tng-style="header.style"\n\t\tng-class="{ \'lui-active\': header.open, \'pseudo\': header.isPseudoDim, \'dragging\': header.dragging, \'lui-disabled\': !interactive || selectionsApi.active }"\n\t\tqva-outside-ignore-for="{{header.qvaOutsideIgnoreFor}}"\n\t\tqva-activate="!header.isPseudoDim && !selectionsApi.active && interactive && showDimension($event, header)">\n\t<span ng-if="header.locked" class="lui-icon lui-icon--lock"></span>\n\t<div class="meta-text" dir="{{header.dir}}" title="{{header.title}}">{{header.title}}</div>\n\t<span ng-if="!header.isPseudoDim" class="lui-icon lui-icon--search"></span>\n</div>\n';var Mt=i("G1wx");var St=i("qEw4");var Dt=i("yIOy");var It=i("B52N");var kt=i("ByVn");var Lt=i("xN6f");var Tt=i("UuE/");var Et=i("akA2");var At=i("5/lS");r["default"].provider("qvDataGrid",(function t(){this.$get=[function(){return function t(e){return new At["a"](e)}}]}));var Pt=function t(e,i){var n=Math.pow(10,i);var a=Math.floor(e*n)/n;return Number(Number(a).toFixed(i))};var Ot=8;function Rt(t,e,i){this.calcApprMaxGlyphCnt=t;this.maxGlyphCnt=i;this.isWidthFlexible=e;this.style={}}function Vt(t,e,i){var n=10;var a={glyphWidth:Ot,collapseExpandIconGlyphCnt:Mt["a"].treatAsDesktop()?3:4,columnPaddingGlyphCnt:3,metaHeaderMaxGlyphCnt:(150+n)/Ot,cellPaddingGlyphCnt:Math.ceil(12/Ot),buttonPaddingGlyphCnt:Math.ceil(20/Ot),buttonArrowGlyphCnt:Math.ceil(13/Ot),buttonMarginOfSafetyGlyphCnt:2,leftTree:{minNonEmptyGlyphCnt:12,emptyGlyphCnt:3,widthFactor:.35},topTree:{wideWidthFactor:.3,growFactor:1.2,minGlyphCnt:8}};this.opts=p["a"].extend(true,a,t);this.layout=e;this.viewportRect=i;this.headers=[];this.maxGlyphs=0;this.availableGlyphs=0;this.leftCellCnt=0;this.dataColumnsInfo={cnt:0,width:0}}Vt.prototype={_reset:function t(){this.headers.length=0;this.maxGlyphs=0;this.availableGlyphs=0;this.leftCellCnt=0;this.dataColumnsInfo.cnt=0;this.dataColumnsInfo.width=0},_addCollapseExpandHeader:function t(e){var i=new Rt(this.opts.collapseExpandIconGlyphCnt,false);i.isCollapseExpandIcon=true;e.push(i);this.availableGlyphs-=this.opts.collapseExpandIconGlyphCnt},_addCollapseExpandHeaders:function t(e){for(var i=0;i<this.leftDimCnt-1&&this.leftDimCnt>1&&this.leftDimCnt<=this.sortOrderCnt;++i)this._addCollapseExpandHeader(e)},_getLeftCollapseExpandCnt:function t(e){return this.isIndentMode?this.leftDimCnt-1:e},_addLeftTreeMetaGhostHeader:function t(e,i,n){var a=n>i;var r=new Rt(i,a,n);e.push(r);this.availableGlyphs-=i},_addEmptyLeftTreeMetaGhostHeader:function t(e,i){var n=new Rt(i||this.opts.leftTree.emptyGlyphCnt,false);e.push(n);this.availableGlyphs-=n.calcApprMaxGlyphCnt},_getDataGhostHeaders:function t(){var e=[];var i;var n;for(i=0;this.availableGlyphs>0&&this.totDataColCnt>0&&i<this.totDataColCnt;++i){n=this.longestMeasureGlyphCnt;n+=this.opts.columnPaddingGlyphCnt;n/this.longestTopDimGlyphCnt<this.opts.topTree.wideWidthFactor&&(n*=this.opts.topTree.growFactor);0===i&&n>this.availableGlyphs&&(n=this.availableGlyphs);if(this.availableGlyphs-n<0){this.availableGlyphs=0;break}this.availableGlyphs-=n;var a=new Rt(n,true);e.push(a)}return e},_getLeftGhostHeaders:function t(e,i,n){var a=[];var r=this.opts.collapseExpandIconGlyphCnt*this._getLeftCollapseExpandCnt(i);var o=this.longestLeftDimGlyphCnt;var s=Math.min(this.longestLeftDimTitleGlyphCnt,this.opts.metaHeaderMaxGlyphCnt);i>0?this.isIndentMode?this._getLeftGhostHeadersIndent(a,o,s,r,i,n):this._getLeftGhostHeadersNonIndent(a,i,s,r):this._addEmptyLeftTreeMetaGhostHeader(a,e);return a},_isSpaceForDataColumn:function t(e,i){return this.maxGlyphs-e>=i.calcApprMaxGlyphCnt},_getLeftGhostHeadersIndent:function t(e,i,n,a,r,o){var s=i;var l;var c;this.pseudoInLeftTree&&(s+=this.longestMeasureTitleGlyphCnt);r>0&&s<this.opts.leftTree.minNonEmptyGlyphCnt&&(s=this.opts.leftTree.minNonEmptyGlyphCnt);s<n-a&&(0===o.length||o.length>0&&this._isSpaceForDataColumn(n-a,o[0]))&&(s=n-a);if(s+a>this.availableGlyphs&&o.length>0&&!this._isSpaceForDataColumn(s+a,o[0])){var u=[];var d=[];u.push(Math.ceil(s/3));u.push(Math.ceil(this.opts.leftTree.widthFactor*this.maxGlyphs));u.push(this.opts.metaHeaderMaxGlyphCnt);d.push(Math.min.apply(null,u));r>0&&d.push(this.opts.leftTree.minNonEmptyGlyphCnt);d.push(this.availableGlyphs);c=s;l=Math.max.apply(null,d)}else l=s;this._addCollapseExpandHeaders(e);this._addLeftTreeMetaGhostHeader(e,l,c)},_getLeftGhostHeadersNonIndent:function t(e,i,n,a){this._getLeftDimsWidths(i,n,a).forEach((function(t){this._addCollapseExpandHeader(e);this._addLeftTreeMetaGhostHeader(e,t)}),this)},_getLeftDimsWidths:function t(e,i,n){var a=[];var r=0;var o=0;var s;var l;var c;var u;var d=Math.max(0,this.maxGlyphs-this.opts.topTree.minGlyphCnt);for(l=0;l<e;++l){s=this._getDimGlyphCnt(l)+this.opts.cellPaddingGlyphCnt;r+=s;a.push({target:s,adjusted:s})}if(r<i-n){var p=i-n-r;var f=a[a.length-1];f.target+=Math.min(p,this.maxGlyphs-r);f.adjusted=f.target;r=a.reduce((function(t,e){return t+e.target}),0)}if(r+n>this.availableGlyphs&&r+n>this.maxGlyphs*this.opts.leftTree.widthFactor){r=0;for(l=0;l<e;++l){s=Math.min(this.opts.metaHeaderMaxGlyphCnt-this.opts.collapseExpandIconGlyphCnt,a[l].target>8?a[l].target/2:a[l].target);a[l].adjusted=s;r+=s}}if(r+n>this.availableGlyphs&&r+n>d){o=(r+n-d)/r;for(l=0;l<e;++l){s=a[l].adjusted;a[l].adjusted=Math.max(1,Pt(s-s*o,1))}}else if(r+n<this.availableGlyphs){u=this.availableGlyphs-r-n;c=a.reduce((function(t,e){return t+(e.adjusted<e.target?e.target:0)}),0);for(l=0;l<e;++l){s=a[l];s.adjusted<s.target&&(a[l].adjusted+=Math.floor(s.target/c*u))}}return a.map((function(t){return t.adjusted}))},_calculateGhostMetaHeadersWidth:function t(e,i){var n=1;var a;var r;var o;i=i||this.headers;i.forEach((function(t){t.minWidth=t.calcApprMaxGlyphCnt*this.opts.glyphWidth;t.widthFactor=t.minWidth/e;n-=t.widthFactor}),this);if(n>0){a=n;o=i.filter((function(t){return t.isWidthFlexible&&t.maxGlyphCnt>t.calcApprMaxGlyphCnt}));r=o.reduce((function(t,e){return e.maxGlyphCnt-e.calcApprMaxGlyphCnt}),0);o.forEach((function(t){var i=t.maxGlyphCnt-t.calcApprMaxGlyphCnt;var o=i/r;var s=Math.min(i*this.opts.glyphWidth/e,o*a);t.widthFactor+=s;n-=s}),this)}if(n>0){o=i.filter((function(t){return true===t.isWidthFlexible}));o.forEach((function(t){t.widthFactor+=n/o.length}))}i.forEach((function(t){t.width=Math.floor(t.widthFactor*e);t.style.width="".concat(t.width,"px")}))},calculateColumns:function t(e){var i=0;var n=[];var a=true;e.forEach((function(t){t.column=i;if(a){n[i]=[];a=false}n[i][n[i].length]=t;if(!t.isCollapseExpandIcon){i++;a=true}}));return n},calculateNumColumns:function t(e){return e.reduce((function(t,e){return t+(e.isCollapseExpandIcon?0:1)}),0)},_updateLeftHeadersGlyphCnt:function t(e,i){var n=e.filter((function(t){return!t.isCollapseExpandIcon}));var a=e.filter((function(t){return t.isCollapseExpandIcon}));var r=n.reduce((function(t,e){return t+e.calcApprMaxGlyphCnt}),0);var o=a.reduce((function(t,e){return t+e.calcApprMaxGlyphCnt}),0);var s=r*this.opts.glyphWidth;var l=o*this.opts.glyphWidth;i=Math.max(i,l);var c=i-l;var u=c/s;var d=0;n.forEach((function(t){t.oldCalcApprMaxGlyphCnt=t.calcApprMaxGlyphCnt;t.calcApprMaxGlyphCnt=Math.floor(t.calcApprMaxGlyphCnt*u);t.calcApprMaxGlyphCnt=Math.max(4,t.calcApprMaxGlyphCnt);d+=t.calcApprMaxGlyphCnt}));var p=Math.floor(c/this.opts.glyphWidth)-d;n.sort((function(t,e){return e.calcApprMaxGlyphCnt-t.calcApprMaxGlyphCnt}));for(var f=0;f<p;f++)n[f].calcApprMaxGlyphCnt+=1},update:function t(e,i,n){var a;var r=[];var o=[];var s=[];var l=0;n=n||this.explicitColumnWidths;this._reset();this.maxGlyphs=Math.floor(this.viewportRect.width/this.opts.glyphWidth);this.availableGlyphs=this.maxGlyphs;this.availableGlyphs>0&&(r=this._getDataGhostHeaders());var c=this._getLeftGhostHeaders(e,i,r);var u=this.calculateColumns(c);for(var d=0;d<u.length;d++)if(n[d]>0){this._updateLeftHeadersGlyphCnt(u[d],n[d]);o=o.concat(u[d])}else s=s.concat(u[d]);var p=r.reduce((function(t,e){return t+e.calcApprMaxGlyphCnt}),0);var f=c.reduce((function(t,e){return t+e.calcApprMaxGlyphCnt}),0);while(r.length>0&&p+f>this.maxGlyphs){a=r.pop();if(0===r.length&&this.maxGlyphs-f>=this.opts.topTree.minGlyphCnt){a.calcApprMaxGlyphCnt=this.maxGlyphs-f;r.push(a);p=a.calcApprMaxGlyphCnt;break}p-=a.calcApprMaxGlyphCnt}this.leftHeaders=c;this.dataHeaders=r;this.leftColumns=u;this.headers=c.concat(r);this.dataColumnsInfo.cnt=r.length;this.leftCellCnt=c.length;if(c.length&&n&&n.length){for(var h=0;h<u.length;h++)if(n[h]>0){this._calculateGhostMetaHeadersWidth(n[h],u[h],this.viewportRect.width);l+=u[h].reduce((function(t,e){return t+e.minWidth}),0)}this._calculateGhostMetaHeadersWidth(this.viewportRect.width-l,s.concat(r),this.viewportRect.width);c.forEach((function(t){t.oldCalcApprMaxGlyphCnt&&(t.calcApprMaxGlyphCnt=t.oldCalcApprMaxGlyphCnt)}))}else this._calculateGhostMetaHeadersWidth(this.viewportRect.width);this.dataColumnsInfo.width=r[0]?r[0].widthFactor*this.viewportRect.width:0},_getDimGlyphCnt:function t(e){if(e===this.pseudoDimIndex)return this.longestMeasureTitleGlyphCnt;return this.layout.qHyperCube.qDimensionInfo[this.sortOrder[e]].qApprMaxGlyphCount},getDimInfo:function t(e,i){i||(i=0);if(e+i===this.pseudoDimIndex)return;return this.layout.qHyperCube.qDimensionInfo[this.sortOrder[e+i]]}};function Nt(t){var e=!!this.layout.qHyperCube.qAlwaysFullyExpanded;return this.sortOrder.filter((function(e,i){return t?i>=this.leftDimCnt:i<this.leftDimCnt}),this).map((function(t,i){var n=0;if(-1===t)return 0;var a=this.layout.qHyperCube.qDimensionInfo[t];if(i+1<this.leftDimCnt){n=a.qApprMaxGlyphCount;e||(n+=this.opts.collapseExpandIconGlyphCnt);n=Math.max(a.othersLabel?a.othersLabel.length:0,n)}else{n=a.qApprMaxGlyphCount;n+=this.opts.columnPaddingGlyphCnt}return n}),this).sort((function(t,e){return e-t}))[0]||0}function zt(t){return this.sortOrder.filter((function(e,i){return t?i>=this.leftDimCnt:i<this.leftDimCnt}),this).map((function(t){var e=0;if(-1===t)e=f["default"].get("Common.Measures").length;else{e=this.layout.qHyperCube.qDimensionInfo[t].qFallbackTitle.length+this.opts.buttonArrowGlyphCnt;this.layout.qHyperCube.qDimensionInfo[t].othersLabel&&(e=Math.max(this.layout.qHyperCube.qDimensionInfo[t].othersLabel.length,e))}return e+this.opts.buttonPaddingGlyphCnt+this.opts.buttonMarginOfSafetyGlyphCnt}),this).sort((function(t,e){return e-t}))[0]||0}function Ft(t){return/[\u3040-\u9FBF]/.test(t)||/[\uFF65-\uFF9F]/.test(t)}function jt(t){return Ft(t)?1.6:1}Object.defineProperties(Vt.prototype,{isIndentMode:{get:function t(){return this.layout.qHyperCube.qIndentMode}},pseudoDimIndex:{get:function t(){var e=this.sortOrder.indexOf(-1);return~e?e:this.sortOrderCnt}},longestMeasureGlyphCnt:{get:function t(){return this.layout.qHyperCube.qMeasureInfo.map((function(t){return Math.max(t.qApprMaxGlyphCount,2)})).sort((function(t,e){return e-t}))[0]||0}},longestMeasureTitleGlyphCnt:{get:function t(){var e=this.layout;e=void 0===e?{}:e;var i=e.qHyperCube;i=void 0===i?{}:i;var n=i.qMeasureInfo,a=void 0===n?[]:n;return a.map((function(t){return(t.qFallbackTitle||"").split("").reduce((function(t,e){return t+jt(e)}),0)})).sort((function(t,e){return e-t}))[0]||0}},longestLeftDimTitleGlyphCnt:{get:function t(){return zt.call(this)}},longestLeftDimGlyphCnt:{get:function t(){return Nt.call(this)}},longestTopDimGlyphCnt:{get:function t(){return Nt.call(this,true)}},sortOrder:{get:function t(){return this.layout.qHyperCube.qEffectiveInterColumnSortOrder}},sortOrderCnt:{get:function t(){return this.sortOrder.length}},leftDimCnt:{get:function t(){return this.layout.qHyperCube.qNoOfLeftDims>=0?this.layout.qHyperCube.qNoOfLeftDims:this.sortOrderCnt}},topDimCnt:{get:function t(){return this.sortOrderCnt-this.leftDimCnt}},totDataColCnt:{get:function t(){return this.layout.qHyperCube.qSize.qcx}},pseudoInLeftTree:{get:function t(){return this.pseudoDimIndex<this.leftDimCnt}},pseudoInTopTree:{get:function t(){return-1!==this.sortOrder.slice(this.leftDimCnt).indexOf(-1)}},columnWidths:{get:function t(){var e=this.layout.qHyperCube.columnWidths;if(V["a"].isValidColumnWidths(e))return[e[0].slice(),e[1].slice()];return[[],[]]}},explicitColumnWidths:{get:function t(){var e=this.columnWidths;if(!e||!e.length||1===e.length&&!Array.isArray(e[0])&&e[0]<=0)return[];var i;if(e.length&&!Array.isArray(e[0])&&e[0]>0)i=e;else{if(this.isIndentMode)return e&&Array.isArray(e[0])?e[0]:[];i=e&&Array.isArray(e[1])?e[1]:[]}var n=i?i.length:0;var a=[];for(var r=0;r<n;r++)a[r]=i[this.sortOrder[r]];return a}}});r["default"].provider("qvPivotTableMetaGhostHeadersProvider",(function t(){this.$get=[function(){return function t(e,i,n){return new Vt(e,i,n)}}]}));var Ht=i("8H7g");var $t=i("zjn0");var Bt=Ht["a"].extend("SortableMetaLists",{init:function t(e,i,n,a,r,o,s){this._super.apply(this,[e]);this.layout=r;this.backendApi=i;this.grid=n;this.metaGhostHeaders=a;this.$id=o;this.currentPopover=s;this.rows=this.createList();this.rows.templateSrc="pt-meta-list.ng.html";this.columns=this.createList();this.columns.templateSrc="pt-meta-list.ng.html"},reset:function t(){this._super.apply(this,arguments)},update:function t(e){var i;var n;var a;var r;var o;var s;var l=f["default"].get("Common.Values");this.reset();for(i=0;i<this.sortOrderCnt;++i){n=this.sortOrder[i];if(i<this.metaGhostHeaders.leftDimCnt)a=this.rows;else{if(e<=0)continue;a=this.columns}if(-1!==n){s=this.layout.qHyperCube.qDimensionInfo[n].qGroupFieldDefs[this.layout.qHyperCube.qDimensionInfo[n].qGroupPos];o=this.layout.qHyperCube.qDimensionInfo[n].qFallbackTitle;r={title:o,id:this.layout.qHyperCube.qDimensionInfo[n].cId,fieldName:s,style:{},qvaOutsideIgnoreFor:"qv-pt-meta-header-".concat(this.$id),open:this.currentPopover.header&&s===this.currentPopover.header.fieldName,dimIx:n,locked:!!this.layout.qHyperCube.qDimensionInfo[n].qLocked,dir:$t["a"].getAutoOrAlternativeDirection(o)}}else{o=l;r={title:l,dimIx:-1,isPseudoDim:true,style:{},locked:false,dir:$t["a"].getAutoOrAlternativeDirection(o)}}r.templateSrc="pt-meta-item.ng.html";a.addSortableItem(r)}}});Object.defineProperties(Bt.prototype,{sortOrder:{get:function t(){return this.layout.qHyperCube.qEffectiveInterColumnSortOrder}},sortOrderCnt:{get:function t(){return this.sortOrder.length}}});var Wt=Bt;function Gt(){this.$get=[function(){return function t(e,i,n,a,r,o,s,l){return new(Wt.extend("PivotTableSortableMetaLists",{addPlaceholder:function t(e,i){var n=this._super.apply(this,arguments);n.style.width=i.width;e.dragging=true},allowAutoScroll:function t(){return false},onBegin:function t(){this._super.apply(this,arguments);s.off();l.off();this.toggleCellsWhenSorting(this.grid.headerRows,this.grid.rows,true)},enable:function t(){this._super.apply(this,arguments);s.on();l.on();this.toggleCellsWhenSorting(this.grid.headerRows,this.grid.rows,false)},allowDrag:function t(){var t=this._super.apply(this,arguments);return t&&!(a&&a.qSelectionInfo&&a.qSelectionInfo.qMadeSelections)},onMove:function t(e){this._super.apply(this,arguments);this.patchPivotingProperties(e.dimIx)},onMoveToList:function t(e){var i=this._super.apply(this,arguments);i&&this.patchPivotingProperties(e.dimIx);return i},onEnterList:function t(e){e===this.rows&&e.isEmpty()&&this.metaGhostHeaders.update(2*this.metaGhostHeaders.opts.leftTree.emptyGlyphCnt);this._super.apply(this,arguments);e===this.columns&&this.rows.isEmpty()&&this.metaGhostHeaders.update(this.metaGhostHeaders.opts.leftTree.emptyGlyphCnt)},patchPivotingProperties:function t(i){var n;var r;function o(t){return t.dimIx}var s=this.rows.items.map(o);var l=this.columns.items.map(o);this.backendApi.model.getEffectiveProperties().then((function(t){V["a"].validatePivotHyperCube(t.qHyperCubeDef);n=V["a"].reorderColumnOrderDef(i,s,l,t.qHyperCubeDef);r=V["a"].getNoLeftDimsDef(i,s,a.qHyperCube,t.qHyperCubeDef);V["a"].reorderPivotDimensions(t.qHyperCubeDef,n);var o=[{qPath:"/qHyperCubeDef/qInterColumnSortOrder",qOp:"replace",qValue:JSON.stringify(t.qHyperCubeDef.qInterColumnSortOrder)},{qPath:"/qHyperCubeDef/qNoOfLeftDims",qOp:"replace",qValue:JSON.stringify(r)},{qPath:"/qHyperCubeDef/qDimensions",qOp:"replace",qValue:JSON.stringify(t.qHyperCubeDef.qDimensions)}];t.qHyperCubeDef.columnWidths&&o.push({qPath:"/qHyperCubeDef/columnWidths",qOp:"replace",qValue:JSON.stringify(t.qHyperCubeDef.columnWidths)});e.applyPatches(o,true)}))},toggleCellsWhenSorting:function t(){var e;var i;for(e=arguments.length-1;e>=0;--e){if(!Array.isArray(arguments[e])){i=arguments[e];continue}var n=void 0;var a=arguments[e];var r=void 0;var o=void 0;var s=void 0;for(n=0;n<a.length;++n){o=a[n].cells.length;for(r=0;r<o;++r){s=a[n].cells[r];s.isMeta?s[i?"addClass":"removeClass"]("drop"):s[i?"addClass":"removeClass"]("locked")}}}}}))({listSelector:".meta",listKey:function t(e){return e.find(".list").scope().list},itemSelector:".button-wrapper",itemDragSelector:".button-wrapper",itemKey:"header",containerSelector:"table"},e,i,n,a,r,o)}}]}r["default"].provider("qvPivotTablePivoting",Gt);function Ut(t,e){var i=t[0].getBoundingClientRect();return{height:e.size.h,width:e.size.w,top:i.top,left:i.left}}var Yt={getSnapshotScrollAreaBBox:Ut};function Jt(t,e,i,n,a,r,o,s,l,c){var u=e.find(n);var d=u.find(a);var p=d.find(r);var f;var h;var v={minRowHeight:i,rect:{left:0,top:0,width:0,height:0},scrollRect:{left:0,top:0,width:0,height:0},rowCount:0,direction:c.direction,getVirtualScrollController:function t(){return u.controller("qvScrollArea")},getSortableListController:function t(){return u.controller("qvSortableList")},getMultiSelectController:function t(){return p.controller("qvSelectionsMultiselect")},getEmptyMetaCellsOfLastHeaderRow:function t(){var e=u.find(".last-top-row .header.empty.left-meta.bottom-meta");return e},getFirstDataCell:function t(){var e=u.find(o);var i={top:0,left:0,width:0};if(e.length){var n=e[0].getBoundingClientRect();var a=e.position();i.top=a.top;i.left=a.left;i.width=n.width}return i},getTopHeaders:function t(){return u.find(s)},getScrollAreaBBox:function t(){if(l&&l.object&&!c.freeResize)return Yt.getSnapshotScrollAreaBBox(u,l.object);return u[0].getBoundingClientRect()},getScrollAreaPosition:function t(){return u.position()},getScrollContentBBox:function t(){return d[0].getBoundingClientRect()},updateRowCount:function t(e){v.rowCount=Math.ceil(e)},getMaxRowCount:function t(){return Math.ceil(v.scrollRect.height/v.minRowHeight)},getVisibleRowCount:function t(){var i=e[0].querySelector(o);var n;if(!i)return 0;var a=i.parentNode;n=Array.prototype.slice.call(a.parentNode.childNodes);n=n.filter((function(t){return t.nodeType===Node.ELEMENT_NODE}));n=n.splice(n.indexOf(a));function r(t,e){var i=t.offsetTop+t.getBoundingClientRect().height;var n=e.top+e.height;return i<=n}function s(t,e){var i=e-t;return 1===i?e:Math.floor(t+i/2)}function l(t,e,i){var n=i-e;var a=s(e,i);var o=r(t[a],v.scrollRect);if(0===n)return o?a:-1;if(1===n)return o?a:l(t,e,e);if(o)return l(t,a,i);return l(t,e,a)}if(0===n.length)return 0;var c=l(n,0,n.length-1)+1;if(c===n.length){var u=n[n.length-1];var d=v.scrollRect.top+v.scrollRect.height-(u.offsetTop+u.getBoundingClientRect().height);c+=Math.floor(d/(3*v.minRowHeight))}return c},updateRect:function e(){f=t((function(){var t=v.getScrollAreaBBox();var e=v.getFirstDataCell();v.rect.top=t.top;v.rect.left=t.left;v.rect.width=t.width;v.rect.height=t.height;v.updateRowCount((v.rect.height-e.top)/v.minRowHeight)}),false);return f},updateScrollRect:function e(i){h=t((function(){var t=v.getScrollAreaPosition();var e=v.getFirstDataCell();v.scrollRect.top=t.top+e.top;v.scrollRect.height=v.rect.height-e.top;if("rtl"===v.direction){v.scrollRect.left=0;v.scrollRect.width=e.left+e.width}else{v.scrollRect.left=e.left;v.scrollRect.width=v.rect.width-e.left}if(i){v.updateRowCount(v.collapsedRowCount||v.scrollRect.height/v.minRowHeight);delete v.collapsedRowCount}}),false);return h},getScrollRect:function t(){return{top:v.scrollRect.top,left:v.scrollRect.left,width:v.scrollRect.width,height:v.scrollRect.height}}};return v}function Kt(t){return Jt.bind(null,t)}function Zt(){this.$get=["$timeout",Kt]}r["default"].provider("qvPivotTableViewportProvider",Zt);function Qt(t,e,i){var n=t.getVirtualScrollController();var a;var r={active:false,activeFromStart:false};var o={xAxis:0,yAxis:0};var s={page:{qLeft:0,qTop:0,qWidth:0,qHeight:0},equalsPage:function t(e){return this.page.qLeft===e.qLeft&&this.page.qTop===e.qTop&&this.page.qWidth===e.qWidth&&this.page.qHeight===e.qHeight},setPage:function t(e){this.page.qLeft=e.qLeft;this.page.qTop=e.qTop;this.page.qWidth=e.qWidth;this.page.qHeight=e.qHeight},onGetData:function t(e){a=e},scroll:function t(e,i,a){var r=n.getScrollAmount(e,i,a);n.scroll(r.deltaX,r.deltaY,false,false)},DELTA_MODE:n.DELTA_MODE,setScrollViewport:function e(){return t.updateScrollRect(false).then((function(){n.setViewport(t.getScrollRect())})).catch((function(t){false}))},setVirtualSize:function a(){var o=this;return t.updateScrollRect(true).then((function(){var a;r.active=false;r.activeFromStart=false;if(t.scrollRect.top+t.scrollRect.height>=t.rect.height&&s.page.qHeight>=i.qcy){a=t.getVisibleRowCount();if(a<s.page.qHeight){r.active=true;r.activeFromStart=true;t.updateRowCount(a)}}var l={vPosY:o.page.qTop*t.minRowHeight,vPosX:o.page.qLeft*e.width};var c=s.page.qWidth===i.qcx?t.scrollRect.width:i.qcx*e.width;var u={width:c,height:i.qcy*t.minRowHeight};var d={width:t.scrollRect.width,height:t.rowCount*t.minRowHeight};n.setVirtualSize(u,d,t.getScrollRect());(l.vPosY>0||l.vPosX>0)&&n.scroll(l.vPosX,l.vPosY)})).catch((function(t){false}))},alignToBottom:function e(){var i=false;if(r.active){if(o.yAxis>0){var a=t.getVisibleRowCount();a<t.rowCount&&t.updateRowCount(a)}else{var s=t.getMaxRowCount();t.rowCount>=s&&(r.active=false);i=true}n.setVirtualViewport({width:t.scrollRect.width,height:t.rowCount*t.minRowHeight});i&&n.setVirtualScrollPos(0,-1e-12)}}};function l(e){var n=t.getMaxRowCount();if(r.activeFromStart)return;e.qHeight=Math.min(i.qcy-e.qTop,n);t.updateRowCount(e.qHeight)}function c(i){return{qLeft:e.cnt>0?Math.round(i.vPosX/e.width):0,qTop:Math.round(i.vPosY/t.minRowHeight),qWidth:Math.max(1,e.cnt),qHeight:Math.max(1,t.rowCount)}}function u(t){if(t.qTop>0&&t.qTop+t.qHeight>i.qcy){t.qTop=Math.max(0,i.qcy-t.qHeight);t.qHeight=Math.min(i.qcy,t.qHeight)}if(t.qLeft>0&&t.qLeft+t.qWidth>i.qcx){t.qLeft=Math.max(0,i.qcx-t.qWidth);t.qWidth=Math.min(i.qcx,t.qWidth)}}n.onScroll((function(t,e){var i=n.getVirtualPosition();var d=n.getMaxPosition();var p=c(i);if(r.active&&e<0){l(p);d=n.getMaxPosition()}d.vPosY>0&&i.vPosY===d.vPosY&&(r.active=true);u(p);r.lastTop=p.qTop;o.xAxis=t;o.yAxis=e;if(!s.equalsPage(p)||r.active){s.setPage(p);a(s.page).then((function(){s.alignToBottom()}))}}));n.getScrollAmount=function(i,a,r){var o=n.getVirtualPosition();var s=n.getMaxPosition();switch(r){case 1:return{deltaX:e.width*i,deltaY:t.minRowHeight*a};case 2:return{deltaX:e.cnt*e.width*i,deltaY:t.minRowHeight*t.rowCount*a};case 10:return{deltaX:0,deltaY:a>0?o.vPosY*a:o.vPosY-s.vPosY};default:return{deltaX:i,deltaY:a}}};return s}function Xt(){return Qt}function te(){this.$get=[Xt]}r["default"].provider("qvPivotTableVirtualScrollProvider",te);var ee=i("i7ks");var ie=i("T0sl");var ne=i("qOK+");function ae(t,e,i,n,r,o){var s=ne["a"].$new();var l;function c(t,e){var i;var n=[];var a=s.dataValuesArray.length;var r=t.getRowsByCellType(t.CELL_TYPE_TOP).concat(t.getRowsByCellType(t.CELL_TYPE_LEFT));var o=e?ie["a"].getSiblingCells(t,e):[];for(var l=0;l<r.length;++l)n=n.concat(r[l].cells);for(var c=0;c<n.length;++c){i=n[c];var u=-1!==o.indexOf(i);u&&!i.isDimensionValue||!u&&!i.isMeta?ne["a"][a?"lockCell":"unlockCell"](t,i):ne["a"][a>0?"removeCellStyle":"restoreCellStyle"](i)}}function u(){if(!s.active)return;ne["a"].updatePivot(n,s,s.currentCell);c(n,s.currentCell)}function p(){o.on();l&&l()}function f(){o.on();l&&l()}function h(){if(!s.active||!s.currentCell)return;ie["a"].getSiblingCells(n,s.currentCell).forEach((function(t){ne["a"].deselectCell(n,t)}));c(n,s.currentCell)}function v(t,e){var i=d["a"].getValue(t,"layout.qHyperCube.qDimensionInfo.".concat(e),{});var n=i.qIsOneAndOnlyOne||false;return n}t.excludeDimensionToggle=function(t){return!e.active&&a()(t.target).is(".qv-pt-expandable")};t.selectDimensionValue=function(a,r){var o=e.getKeyAsToggleSelected(r);var u;u=ne["a"].isColumnar(n,a)?a.dataColIx:t.metaGhostHeaders.leftDimCnt+a.dataRowIx;var d=t.layout.qHyperCube.qEffectiveInterColumnSortOrder[u];if(v(t,d)||!o){h();ne["a"].reset(s)}l=ne["a"].selectDimensionValue(t.$id,i,e,s,a,n,o);c(n,s.currentCell)};t.activateSelections=function(n){l=ne["a"].activateSelections(t.$id,i,e,s,n)};t.multiselectDimensionValues=function(a,r){var o;var l;var u;var d=ie["a"].getSiblingCells(n,a);var p=d.length;var f;var h=ne["a"].isColumnar(n,a);var v=h?a.dataRowIx:a.dataColIx;var g=h?r.dataRowIx:r.dataColIx;if(-1===d.indexOf(r)||!r.isDimensionValue)return;for(o=0;o<p;++o){u=d[o];l=h?u.dataRowIx:u.dataColIx;f=v<=g?l>=v&&l<=g:l>=g&&l<=v;f&&u.isDimensionValue&&u!==r&&ne["a"].selectDimensionCells(i,e,s,t.grid,u,false)}ne["a"].selectDimensionCells(i,e,s,t.grid,r,false);c(n,s.currentCell)};t.multiselect=function(){s.active&&ne["a"].sendSelection(i,e,s,n,s.currentCell)};t.selectWhileLocked=function(){if(s.dataValuesArray.length>0)return;ee["a"].showLockedFeedback(r.qHyperCube.qDimensionInfo)};e.watchActivated((function(){o.off()}));ne["a"].init(e,i,s,p,f,h);return{updateSelections:u}}function re(){return ae}function oe(){this.$get=[re]}r["default"].provider("qvPivotTableSelectionsProvider",oe);var se=i("Pz+M");var le='<div class="qv-pivot-panel"\n\t qv-sortable-list="sortableItemLists">\n\t<div class="qv-pivot-panel-row" ng-repeat="row in grid.rows">\n\t\t<div class="qv-pivot-panel-column" ng-if="$first"></div>\n\t\t<div ng-repeat="list in row.lists" class="qv-pivot-panel-column" ng-class="{\'qv-pivot-panel-disabled\': list.disabled}">\n\t\t\t<h2>{{list.title}}</h2>\n\t\t\t<div class="qv-pivot-panel-list">\n\t\t\t\t<ul>\n\t\t\t\t\t<li ng-repeat="item in list.items track by item.id" class="qv-pivot-panel-item" ng-class="item.classList" ng-include src="itemTemplateSrc"></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n';var ce='<div class="field-wrapper field-token" ng-style="item.style">\n\t<div ng-if="list.showMoveHandle" class="icon-handle"></div>\n\t<div class="field-text">{{item.title}}</div>\n</div>\n';var ue=i("IVN8");var de={Dimension:"dimension",Measure:"measure",Pseudo:"pseudo"};r["default"].getService("$templateCache").put("pivot-panel-item.ng.html",ce);r["default"].directive("qvPivotPanel2",[function(){return{restrict:"E",template:le,replace:true,scope:{layout:"=layout",backendApi:"=backendApi"},controller:["$scope","$element",function(t,e){var i=this;t.itemTemplateSrc="pivot-panel-item.ng.html";t.sortableItemLists=Ht["a"].create({options:{listKey:"list",listSelector:".qv-pivot-panel-column",itemSelector:".sortable",itemDragSelector:".icon-handle",itemKey:"item"},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.addClass("sortable")},bindAutoScroll:function t(){var i=e.find(".qv-pivot-panel-list ul");i.each((function(){var t=a()(this);var e=t.scope().list;e.scrollInfo={elem:t[0],clientRect:t[0].getBoundingClientRect(),scrollWidth:t[0].scrollWidth,scrollHeight:t[0].scrollHeight}}))},onBegin:function t(){this._super.apply(this,arguments);this.bindAutoScroll()},onEnterList:function t(){this.bindAutoScroll()},onMove:function t(){var e=this._super.apply(this,arguments);e&&i.sortOrderUpdated();return e},onMoveToList:function t(e,n){var a=this._super.apply(this,arguments);if(a){if(n.disabled)return;i.sortOrderUpdated()}return a},onAutoScroll:function t(e,i,n,a){this._super.apply(this,arguments);!i&&n&&(i=this.getList(n));if(!i)return;var r=i.scrollInfo;a(r.elem,r.clientRect,r.scrollWidth,r.scrollHeight)}});t.columns=t.sortableItemLists.createList(1,{title:f["default"].get("Common.Columns"),showMoveHandle:true});t.rows=t.sortableItemLists.createList(1,{title:f["default"].get("Common.Rows"),showMoveHandle:true});t.measures=t.sortableItemLists.createList(2,{title:f["default"].get("Common.Measures")});t.grid={rows:[]};t.grid.rows.push({lists:[t.columns]});t.grid.rows.push({lists:[t.rows,t.measures]});i.sortOrderUpdated=function(){var e=[];t.rows.items.forEach((function(t){e.push(t.dimIndex)}));var i=e.length;t.columns.items.forEach((function(t){e.push(t.dimIndex)}));var n=[{qPath:"/qHyperCubeDef/qInterColumnSortOrder",qOp:"replace",qValue:JSON.stringify(e)},{qPath:"/qHyperCubeDef/qNoOfLeftDims",qOp:"replace",qValue:JSON.stringify(i)}];t.backendApi.applyPatches(n,true)};function n(t){var e;e=t.qLibraryId?t.title||"":t.qFallbackTitle||"";return e}function r(){var e=t.layout.qHyperCube.qNoOfLeftDims;t.sortableItemLists.reset();var i=t.layout.qHyperCube.qEffectiveInterColumnSortOrder.map((function(e){t.$broadcast("pivotPanelUpdated");if(-1===e)return{title:"Measures",cId:"pseudo-dimension",type:de.Pseudo,dimIndex:e,cssClass:["sortable","is-pseudo"]};var i=t.layout.qHyperCube.qDimensionInfo[e];return{title:n(i),cId:i.cId,type:de.Dimension,dimIndex:e,cssClass:["sortable"]}}));e=e<0?i.length:e;i.splice(0,e).forEach((function(e){var i=t.rows.add(e.title,e.cId,e.cssClass,1);i.dimIndex=e.dimIndex}));i.forEach((function(e){var i=t.columns.add(e.title,e.cId,e.cssClass,1);i.dimIndex=e.dimIndex}));t.layout.qHyperCube.qMeasureInfo.forEach((function(e){t.measures.add(e.qFallbackTitle||"",e.cId,[],2)}))}t.$watchCollection("layout.qHyperCube.qDimensionInfo",r);t.$watchCollection("layout.qHyperCube.qEffectiveInterColumnSortOrder",r);t.$watchCollection("layout.qHyperCube.qMeasureInfo",r);t.$watchCollection("layout.qHyperCube.qNoOfLeftDims",r)}]}}]);var pe=i("Y1Qi");var fe=i("m57d");var he=i("GF7R");var ve=i("sMS6");var ge=21;var me=31;var be="1.53846154em";var ye="2.30769231em";r["default"].directive("qvPivotTableInclude",["$compile","$animate",function(t,e){return{link:function i(n,a,o){e.enabled(a,false);n.$watch(o.qvPivotTableInclude,(function(){var e=n.$eval(o.qvPivotTableInclude);var i=r["default"].getService("$templateCache");var s=i.get(e);a.html(s);t(a.contents())(n)}))}}}]);r["default"].directive("onFinishRender",["$timeout",function(t){return{restrict:"A",link:function e(i){true===i.$last&&t((function(){i.$emit("ngRepeatFinished")}))}}}]);function xe(t,e){var i=t.layout.qInfo.qId;t.themeStyle={header:{"font-size":e.getStyle("header","fontSize",true,i),color:e.getStyle("header","color",true,i)},content:{default:{"font-size":e.getStyle("content","fontSize",true,i),color:e.getStyle("content","color",true,i)},hover:{"font-size":e.getStyle("content","fontSize",true,i),color:e.getStyle("content.hover","color",true,i),"background-color":e.getStyle("content.hover","backgroundColor",true,i)}}};t.viewport&&(t.viewport.minRowHeight=Ce(t));if(Object(m["b"])("TABLE_SCROLLBAR_SIZE")&&(null===t||void 0===t?void 0:t.virtualScrollCtrl)){var n=e.getStyle("scrollbar","size",true,i);t.virtualScrollCtrl.setScrollbarSize(n)}}function _e(t){return true===t.capturedOnDesktop||Mt["a"].treatAsDesktop()&&false!==t.capturedOnDesktop}function Ce(t){var e=t.treatAsDesktop;var i=t.themeStyle.content.default["font-size"];if(i){var n={lineHeight:e?be:ye};return Object(ve["a"])(i,n,"pivot").outer}return e?ge:me}function we(t,e){t.currentPopover.header===e?e.open=false:t.currentPopover.header&&(t.currentPopover.header.open=false);t.currentPopover.header=void 0;t.pivoting.update(t.metaGhostHeaders.dataColumnsInfo.cnt)}function qe(t,e){e.on();t.processPaint()}function Me(t){return d["a"].getValue(t,"layout.qHyperCube.qDimensionInfo.0.qIsOneAndOnlyOne",false)}function Se(t,e,i,n,o,s,l){var c=r["default"].getService("$templateCache");c.put("pt-cell-item.ng.html",yt);c.put("pt-header-cell-item.ng.html",xt);c.put("pt-meta-left.ng.html",_t);c.put("pt-meta-top.ng.html",Ct);c.put("pt-meta-list.ng.html",wt);c.put("pt-meta-item.ng.html",qt);function u(r,c,u,d){var f;var h;var g;var b;var y;var x=[];d.styleService=v["a"].initializeService("object.pivotTable");xe(r,d.styleService);r.themeChangedCallback=function(){r.layout&&_(r.layout.components,r.layout.qInfo.qId,d.styleService);xe(r,d.styleService)};v["a"].ThemeChanged.bind(r.themeChangedCallback);function _(t,e,i){if(Object(m["b"])("PIVOT_CUSTOM_STYLES")&&t&&t.length){var n=t.filter((function(t){return"theme"===t.key}))[0];if(n){var a={};var r=n.content||{};var o=n.header||{};var s=n.scrollbar||{};r.fontSize&&(a["content.fontSize"]="".concat(r.fontSize,"px"));r.fontColor&&"none"!==v["a"].resolveColor(r.fontColor)&&(a["content.color"]=v["a"].resolveColor(r.fontColor));o.fontSize&&(a["header.fontSize"]="".concat(o.fontSize,"px"));o.fontColor&&"none"!==v["a"].resolveColor(o.fontColor)&&(a["header.color"]=v["a"].resolveColor(o.fontColor));r.hoverEffect&&"none"!==v["a"].resolveColor(r.hoverColor)&&(a["content.hover.backgroundColor"]=v["a"].resolveColor(r.hoverColor));r.hoverEffect&&"none"!==v["a"].resolveColor(r.hoverFontColor)?a["content.hover.color"]=v["a"].resolveColor(r.hoverFontColor):r.hoverEffect&&"none"!==v["a"].resolveColor(r.hoverColor)&&he["a"].isDark(v["a"].resolveColor(r.hoverColor))?a["content.hover.color"]=v["a"].resolveColor("#ffffff"):r.hoverEffect&&"none"===v["a"].resolveColor(r.hoverColor)&&"none"===v["a"].resolveColor(r.hoverFontColor)&&"inherit"===i.getStyle("content.hover","color",true)&&"inherit"===i.getStyle("content.hover","backgroundColor",true)&&(a["content.hover.backgroundColor"]=v["a"].resolveColor("#f4f4f4"));s.size&&(a["scrollbar.size"]=v["a"].resolveColor(s.size));v["a"].setOverrides(e,a)}else v["a"].setOverrides(e,null)}}r.currentPopover={header:void 0};r.nonMouseViewportScrolling={scrollbarSize:36,className:"show-non-mouse-scrollbars"};r.grid=t("pivot");r.treatAsDesktop=_e(r.layout.snapshotData||{});r.viewport=n(c,Ce(r),".qv-grid-object-scroll-area",".scroll-content","table",".first-data-cell","th.top:nth-child(2)",r.layout.snapshotData,r.options);var C=r.viewport.getVirtualScrollController();r.virtualScrollCtrl=C;var w=r.viewport.getSortableListController();var q=r.viewport.getMultiSelectController();r.metaGhostHeaders=i({},r.layout,r.viewport.rect);r.pivoting=e(r.backendApi,r.grid,r.metaGhostHeaders,r.layout,r.$id,r.currentPopover,C,q);var M=function t(e,i){if("%"===e.substring(e.length-1,e.length))return parseFloat(e)*i/100;return parseFloat(e)};var S=function t(e){var i=y[e].getBoundingClientRect();var n=y.position();x[e]||(x[e]={});x[e].top=n.top;x[e].left=n.left;x[e].width=i.width;x[e].height=i.height};var D=function t(e,i,n){if(n)return x[i].width;var a=e.metaGhostHeaders.leftColumns[i];return a.reduce((function(t,i){return t+Math.max(0,M(i.style.width,e.viewport.rect.width))}),0)};var I=function t(e,i){if(!e.columns[i].definedTopHeight){Object.defineProperties(e.columns[i],{top:{get:function t(){return this._top||0}},height:{get:function t(){return this._height||40}}});e.columns[i].definedTopHeight=true}};var k=function t(e,i){e.explicitColumnWidths||(e.explicitColumnWidths=e.metaGhostHeaders.explicitColumnWidths);e.columns||(e.columns=[]);e.columns.length>i&&e.columns.splice(i,e.columns.length-i);e.explicitColumnWidths.length>i&&e.explicitColumnWidths.splice(i,e.explicitColumnWidths.length-i)};var L=function t(e,i,n,a){e.explicitColumnWidths[n]>0&&(e.explicitColumnWidths[n]=i);e.columns[n]||(e.columns[n]={});e.columns[n].index=n;e.columns[n].width=i;e.columns[n].isLastColumn=a;if(x[n]){e.columns[n]._top=a?0:x[n].top;e.columns[n]._height=a?x[n].top+x[n].height:x[n].height}else{e.columns[n]._top=0;e.columns[n]._height=40}I(e,n)};var T=function t(e,i){var n;var a;var r;var o=[];var s=e.metaGhostHeaders.leftColumns.length;if(i){y=e.viewport.getEmptyMetaCellsOfLastHeaderRow();if(!y||y.length!==s)return;for(n=0;n<s;n++)S(n)}else e.changingColumnIndex>=0&&S(e.changingColumnIndex);k(e,s);for(n=0;n<s;n++){a=D(e,n,i&&y);r=n===s-1;L(e,a,n,r);o[n]=0===n?a:o[n-1]+a}for(n=0;n<s;n++)e.columns[n].left=e.rtl?e.viewport.rect.width-o[n]:o[n];i&&(e.changingColumnIndex=-1)};r.$on("onExplicitColumnStarted",(function(t){var e=t.targetScope.column.index;var i=0;var n=r.metaGhostHeaders.opts.topTree.minGlyphCnt*r.metaGhostHeaders.opts.glyphWidth;b=r.explicitColumnWidths[e]?r.explicitColumnWidths[e]:r.columns[e].width;var a=r.metaGhostHeaders.dataHeaders;for(var o=0;o<a.length;o++){a[o].oldWidth=a[o].width;i+=a[o].width}g=b+i-n}));r.$on("onExplicitColumnChanging",(function(t){if(0===r.layout.qHyperCube.qNoOfLeftDims)return;var e=t.targetScope.column.index;var i=r.metaGhostHeaders.leftColumns[e];var n=0;r.changingColumnIndex=e;if(t.targetScope.explicitColumnWidth>g){t.targetScope.explicitColumnWidth=g;r.explicitColumnWidths[e]=g}if(1===r.metaGhostHeaders.leftColumns.length&&t.targetScope.explicitColumnWidth<70){t.targetScope.explicitColumnWidth=70;r.explicitColumnWidths[e]=70}if(r.metaGhostHeaders.leftColumns.length>1&&t.targetScope.explicitColumnWidth<40){t.targetScope.explicitColumnWidth=40;r.explicitColumnWidths[e]=40}for(var a=0;a<i.length;a++)i[a].isCollapseExpandIcon&&(n+=i[a].width);i[i.length-1].width=r.explicitColumnWidths[e]-n;i[i.length-1].style.width="".concat(i[i.length-1].width,"px");var o=r.metaGhostHeaders.dataHeaders;var s=(r.explicitColumnWidths[e]-b)/o.length;for(var l=0;l<o.length;l++){o[l].width=Math.max(o[l].oldWidth-s,o[l].minWidth);o[l].style.width="".concat(o[l].width,"px")}T(r)}));r.$on("onExplicitColumnChanged",(function(){r.metaGhostHeaders.update(0,ie["a"].getLeftTreeDepth(r.layout.qHyperCube.qPivotDataPages[0]),r.explicitColumnWidths);T(r);r.applyColumnWidthSoftPatch(r.explicitColumnWidths)}));r.$on("$destroy",(function(){r.themeChangedCallback&&v["a"].ThemeChanged.unbind(r.themeChangedCallback);l.cancel(f);l.cancel(h)}));r.applyColumnWidthSoftPatch=function(t){var e=r.layout.qHyperCube;var i=e.columnWidths?"replace":"add";var n=e.qIndentMode?1:0;var a=e.columnWidths;var o=r.metaGhostHeaders.leftColumns?r.metaGhostHeaders.leftColumns.length:0;var s;a&&Array.isArray(a[0])||(a=[[],[]]);if(n)a[0]=t;else{s=e.qEffectiveInterColumnSortOrder;for(var l=0;l<o;l++)a[1][s[l]]=t[l]}var c=[{qPath:"/qHyperCubeDef/columnWidths",qOp:i.toString(),qValue:JSON.stringify(a)}];r.backendApi.applyPatches(c,true)};r.selections=s(r,r.selectionsApi,r.backendApi,r.grid,r.layout,w);r.virtualScroll=o(r.viewport,r.metaGhostHeaders.dataColumnsInfo,r.layout.qHyperCube.qSize);r.virtualScroll.onGetData((function(t){return r.getData(t,true).then((function(){l.cancel(f);f=l((function(){return r.virtualScroll.setScrollViewport()}),100);return f})).catch((function(t){false}))}));r.getData=function(t,e){var i=Object(O["a"])();r.backendApi.getData([t]).then((function(n){r.onUpdateData(n,t,e).then((function(){i.resolve()}))})).catch((function(t){false}));return i.promise};r.onUpdateData=function(t,e,i){ie["a"].updatePivotItems(r,t,[e],i);r.selections.updateSelections();return l((function(){}),0,false)};r.onClick=function(t){a()(t.target).closest(".cell-content").focus()};r.process=function(t){var e;t&&r.virtualScroll.setPage(t);if(null===(e=r.options.viewState)||void 0===e?void 0:e.page){t.qLeft=r.options.viewState.page.qLeft;t.qTop=r.options.viewState.page.qTop;return r.getData(t)}return r.getData(r.virtualScroll.page).then((function(){r.virtualScroll.setVirtualSize();l.cancel(h);h=l((function(){T(r,true)}),100);return h})).catch((function(t){false}))};r.processPaint=function(){return r.updateMetaInfo().then((function(t){var e=r.layout.qHyperCube.qLastExpandedPos;var i=e&&void 0!==r.expandedPosDiffX&&void 0!==r.expandedPosDiffY;var n=r.viewport.getVisibleRowCount();var a={qLeft:Math.max(0,i?e.qx-r.expandedPosDiffX:0),qTop:Math.max(0,i?e.qy-r.expandedPosDiffY:0),qWidth:t.qWidth,qHeight:t.qHeight};e&&a.qLeft+a.qWidth>r.layout.qHyperCube.qSize.qcx&&(a.qLeft=Math.max(0,r.layout.qHyperCube.qSize.qcx-t.qWidth));e&&a.qTop+a.qHeight>=r.layout.qHyperCube.qSize.qcy&&(a.qTop=Math.max(0,r.layout.qHyperCube.qSize.qcy-t.qHeight));if(e&&r.collapsed&&a.qTop+n>r.layout.qHyperCube.qSize.qcy){r.viewport.collapsedRowCount=n;a.qTop=Math.max(0,r.layout.qHyperCube.qSize.qcy-n);a.qHeight=n}delete r.expandedPosDiffX;delete r.expandedPosDiffY;delete r.collapsed;return r.process(a)}))};r.processResize=function(){return r.updateMetaInfo().then((function(t){var e=r.layout.qHyperCube.qSize;var i={qLeft:r.virtualScroll.page.qLeft,qTop:r.virtualScroll.page.qTop,qWidth:t.qWidth,qHeight:t.qHeight};i.qTop+i.qHeight>e.qcy&&(i.qTop=Math.max(0,e.qcy-i.qHeight));i.qLeft+i.qWidth>e.qcx&&(i.qLeft=Math.max(0,e.qcx-i.qWidth));r.$emit("ngRepeatFinished");return r.process(i)}))};d.setDirection=function(){r.viewport.direction=r.options.direction;r.rtl="rtl"===r.options.direction;r.processPaint()};d.getSelectionToolbar=function(){var t=[];Me(r)||t.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function t(){this.selectionsApi.clear()},isDisabled:function t(){return!this.selectionsApi.selectionsMade}});return new St["a"](d.$scope.backendApi,d.$scope.selectionsApi,false,false,t,[])};r.updateMetaInfo=function(){return r.viewport.updateRect().then((function(){var t=r.metaGhostHeaders.explicitColumnWidths;r.metaGhostHeaders.update(0,ie["a"].getLeftTreeDepth(r.layout.qHyperCube.qPivotDataPages[0]),t);r.pivoting.update(r.metaGhostHeaders.dataColumnsInfo.cnt);T(r);return{qWidth:Math.max(1,r.metaGhostHeaders.dataColumnsInfo.cnt),qHeight:Math.max(1,r.viewport.rowCount)}}))};r.collapseExpand=function(t){var e=a()(t.target);var i=e.scope().cell;if(!i)return;r.expandedPosDiffX=i.dataColIx-r.virtualScroll.page.qLeft;r.expandedPosDiffY=i.dataRowIx-r.virtualScroll.page.qTop;if("lui-icon--plus"===i.collapseExpandClass)i.hasClass("top")?r.backendApi.expandTop(i.dataRowIx,i.dataColIx,false):i.hasClass("left")&&r.backendApi.expandLeft(i.dataRowIx,i.dataColIx,false);else if("lui-icon--minus"===i.collapseExpandClass){r.collapsed=true;i.hasClass("top")?r.backendApi.collapseTop(i.dataRowIx,i.dataColIx,false):i.hasClass("left")&&r.backendApi.collapseLeft(i.dataRowIx,i.dataColIx,false)}};r.showDimension=function(t,e){var i=a()(t.target).closest(".qv-pt-meta-button");w.off();if(r.currentPopover.header===e){e.open=false;r.currentPopover.header=void 0;Tt["a"].close();qe(r,w);return}if(r.currentPopover.header){r.currentPopover.header.open=false;r.currentPopover.header=void 0}var n={cId:e.id,fieldName:e.fieldName,alignToElement:i,outsideIgnoreNamespace:"qv-pt-meta-header-".concat(r.$id),selectionsDeactivatedFn:function t(){r.currentPopover.header=void 0;w.on();r.processPaint()}};It["default"].isSmallDevice?Object(fe["a"])(Et["a"],r,n):Object(fe["a"])(Tt["a"],r,n).then((function(t){var i;t.closing.then((function(t){if(t&&!a()(t.target).closest(".qv-pt-meta-button").length>0){we(r,e);qe(r,w)}i=t}));t.closed.then((function(){if(!i){we(r,e);qe(r,w)}t=null}))}));e.open=true;r.currentPopover.header=e};function E(t,e,i){r.interactive=t&&e;r.navigatable=t&&i;if(t){if(i){C.on();w.on()}}else if(!t){C.off();w.off()}}d.setInteractionState=function(){var t=r.object.inAnalysisState();var e=false!==r.options.navigation;var i=false!==r.options.selections;E(t,i,e)};d.getContextMenu=function(t,e,i){if(i.target){var n=a()(i.target).closest(".qv-pt");if(n){var o=i.target.innerText;o&&""!==o&&e.addItem({icon:"lui-icon lui-icon--copy",translation:"contextMenu.copyCellValue",tid:"copy-cell-context-item",select:function t(){Lt["a"].copyToClipboard(o)}})}}var s=this.$scope.metaGhostHeaders;var l=s.leftDimCnt-(s.pseudoInLeftTree?1:0);var c=s.topDimCnt-(s.pseudoInTopTree?1:0);if(l>1||c>1)return t.model.getEffectiveProperties().then((function(i){if(i.qHyperCubeDef.qAlwaysFullyExpanded||t.viewDataToggled)return;var n=e.addItem({translation:"Object.PivotTable.ContextMenu.ExpandCollapse",tid:"expand-collapse-group"});n.addItem({icon:"lui-icon lui-icon--plus",translation:"Object.PivotTable.ContextMenu.ExpandAll",tid:"expand-all",select:function t(){r.backendApi.expandTop(0,0,true);r.backendApi.expandLeft(0,0,true)}});n.addItem({icon:"lui-icon lui-icon--minus",translation:"Object.PivotTable.ContextMenu.CollapseAll",tid:"collapse-all",select:function t(){r.backendApi.collapseTop(0,0,true);r.backendApi.collapseLeft(0,0,true)}})}));return};d.suppressOnPaint=function(t){if(this.$scope.object._forcePaint){this.$scope.object._forcePaint=false;return false}return Dt["a"].isInSelection(t)};d.onPaint=function(){this.setInteractionState(r.options.interactionState);if(r.layout.qInfo&&r.layout.qInfo.qId){_(r.layout.components,r.layout.qInfo.qId,d.styleService);xe(this.$scope,this.styleService,r.layout.qInfo.qId)}if(!this.suppressOnPaint(this.$scope.layout)&&void 0===this.$scope.currentPopover.header){w.cancel();Dt["a"].isModalSelectionModel(this.$scope.object.model)&&this.$scope.selectionsApi.confirm();return r.processPaint()}this.$scope.currentPopover.header&&r.pivoting.update(r.metaGhostHeaders.dataColumnsInfo.cnt);return O["a"].resolve()};d.onResize=function(){return r.processResize()};d.setSnapshotData=function(t){var e=r.virtualScroll.page;return r.backendApi.getData([e]).then((function(e){if(!r.backendApi.isSnapshot){e[0].qArea.qTop=0;e[0].qArea.qLeft=0}t.qHyperCube.qPivotDataPages=e;t.qHyperCube.qSize.qcx=e[0].qArea.qWidth;t.snapshotData.capturedOnDesktop=Mt["a"].treatAsDesktop();return t})).catch((function(t){false}))};d.getPreferredSize=function(){var t=Object(O["a"])();var e=this.$scope.$on("ngRepeatFinished",(function(){t.resolve({w:c.width(),h:c.find("table").height()+5});e()}));return t.promise};d.getViewState=function(){var t=p["a"].extend({},r.virtualScroll.page);return{page:t}}}return{restrict:"E",replace:true,template:bt,require:"qvObjectContent",link:u}}r["default"].directive("qvPivotTable",["qvDataGrid","qvPivotTablePivoting","qvPivotTableMetaGhostHeadersProvider","qvPivotTableViewportProvider","qvPivotTableVirtualScrollProvider","qvPivotTableSelectionsProvider","$timeout",Se]);var De=e["default"]={initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qSuppressMissing:true,qMode:"P",qShowTotalsAbove:true,qInitialDataFetch:[{qTop:0,qLeft:0,qWidth:50,qHeight:50}],qIndentMode:true,columnWidths:[]}},data:{dimensions:{min:1,max:1e3,description:function t(e,i,n){var a=n&&"rows"===n.type?"Visualizations.Descriptions.Row":"Visualizations.Descriptions.Column";return f["default"].get(a)}},measures:{min:1,max:1e3,description:function t(){return f["default"].get("Visualizations.Descriptions.Values")}}},getCreatePropertyHandler:function t(e){var i=mt["a"].mapProperties(this.mappedDefinition.items.data.items.dimensions);var n=mt["a"].mapProperties(this.mappedDefinition.items.data.items.measures);return new tt({app:e,dimensionDefinition:this.dimensionDefinition,measureDefinition:this.measureDefinition,dimensionProperties:i,measureProperties:n})},support:{cssScaling:true,snapshot:true,export:true,exportData:true,sharing:false,viewData:true},migrate:{properties:function t(e){return kt["a"].migrateProperties(e)}},type:"pivot-table",template:"<qv-pivot-table></qv-pivot-table>",BackendApi:c,definition:A,importProperties:gt.importProperties,exportProperties:gt.exportProperties}},YH1i:function(t,e,i){"use strict";e["a"]='<div class="pp-component pp-dropdown-component" ng-if="visible" tcl="dropdown">\n    <div class="label" ng-if="label" title="{{title || label}}" ng-class="{ \'disabled\': readOnly }">\n\t\t{{label}}\n\t</div>\n\n\t<div class="value">\n\t\t<div ng-if="!loading">\n\t\t\t<lui-select ng-if="!supportTooltip" x-model="value" x-change="change()" x-disabled="readOnly"\n\t\t\t\t\t\tx-options="option.value as option.label for option in options" tid="{{key}}">\n\t\t\t</lui-select>\n\t\t\t<lui-select ng-if="supportTooltip" x-model="value" x-change="change()" x-disabled="readOnly" tid="{{key}}">\n\t\t\t\t<option ng-repeat="option in options" ng-value="option.value" title="{{option.tooltip}}">{{option.label}}</option>\n\t\t\t</lui-select>\n\t\t\t<div style="display: none" class="tids">\n\t\t\t\t<i ng-repeat="option in options">{{option.value}}</i>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="pp-loading-container" ng-if="loading">\n\t\t\t<div class="pp-loader qv-loader"></div>\n\t\t</div>\n\t\t<div ng-if="errorMessage" class="pp-invalid error">{{errorMessage}}</div>\n\t</div>\n</div>'},"YK9/":function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("mWu2");var o=i("6uJb");var s=i("sWge");var l=i("UbZW");var c=i.n(l);var u='<div class="qv-ti" style=\'width: 100%; height: 100%;\' qva-activate="edit()">\n\t<div class="media-tool-scrollbar" ng-if="!editing && !initializing && !saving && !empty" dir="{{ direction }}">\n\t\t<div class="qv-media-tool-html" ng-class="[sizeClass, visibilityClass, responsiveClass, {\'qv-interactive\': navigation}]" ng-click="clickHtml($event)" ng-bind-html="html" dir="{{ textDirection }}"></div>\n\t</div>\n\t<div class="text-image-hint" ng-if="empty && !editing" ng-class="{ \'selected\': isSelected() }">\n\t\t<div class="hint-content" ng-show="!isSelected() || !editmode || object.isLink">\n\t\t\t<i class="hint-icon lui-icon lui-icon--text"></i>\n\t\t\t<div class="text" q-translation="Object.TextImage.EmptyHint"></div>\n\t\t</div>\n\t\t<div class="hint-content" ng-show="isSelected() && editmode && !object.isLink">\n\t\t\t<i class="hint-icon lui-icon lui-icon--plus"></i>\n\t\t\t<div class="text" q-translation="Object.TextImage.EmptySelectedHint"></div>\n\t\t</div>\n\t</div>\n\t<div class="qv-media-tool-editor" ng-class="[sizeClass, visibilityClass, responsiveClass]" ng-if="initializing || editing || saving" qv-text-image-editor x-editor-options="editorOptions" x-save="save" dir="{{ direction }}" qva-outside-ignore-for="media-toolbar"></div>\n</div>';var d={type:"items",component:"accordion",items:{data:{uses:"data",items:{measures:{disabledRef:""},dimensions:{disabledRef:""}}},settings:{uses:"settings",items:{general:{items:{showTitles:{defaultValue:false}}},presentation:{type:"items",translation:"properties.presentation",items:{responsive:{type:"string",component:"dropdown",ref:"responsive",translation:"properties.textImage.responsive",defaultValue:"all",undefinedValue:"none",snapshot:{tid:"property-responsive"},options:[{value:"all",translation:"properties.textImage.responsive.textImages"},{value:"text",translation:"properties.textImage.responsive.text"},{value:"images",translation:"properties.textImage.responsive.images"},{value:"none",translation:"properties.textImage.responsive.none"}]}}},markdown:{type:"string",ref:"markdown",show:false,defaultValue:""},images:{type:"array",ref:"images",show:false,defaultValue:[]},backgroundImage:{type:"items",translation:"properties.backgroundImage",grouped:true,items:{useBackgroundImage:{ref:"background.isUsed",type:"boolean",translation:"properties.backgroundImage.use",component:"switch",defaultValue:false,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},backgroundUrl:{ref:"background.url.qStaticContentUrlDef.qUrl",layoutRef:"background.url.qStaticContentUrl.qUrl",schemaIgnore:true,translation:"Common.Image",tooltip:{select:"properties.media.select",remove:"properties.media.removeBackground"},type:"string",component:"media",defaultValue:"",show:function t(e){var i;return null===e||void 0===e||null===(i=e.background)||void 0===i?void 0:i.isUsed}},backgroundSize:{ref:"background.size",translation:"properties.backgroundImage.size",type:"string",component:"dropdown",defaultValue:"auto",options:[{value:"auto",translation:"properties.backgroundImage.originalSize"},{value:"alwaysFit",translation:"properties.backgroundImage.sizeAlwaysFit"},{value:"fitWidth",translation:"properties.backgroundImage.sizeFitWidth"},{value:"fitHeight",translation:"properties.backgroundImage.sizeFitHeight"},{value:"fill",translation:"properties.backgroundImage.sizeStretch"}],show:function t(e){var i,n,a,r;return(null===e||void 0===e||null===(i=e.background)||void 0===i?void 0:i.isUsed)&&(null===e||void 0===e||null===(n=e.background)||void 0===n||null===(a=n.url)||void 0===a||null===(r=a.qStaticContentUrlDef)||void 0===r?void 0:r.qUrl)}},backgroundPosition:{ref:"background.position",translation:"Common.Position",type:"string",component:"align-matrix",defaultValue:"topLeft",show:function t(e){var i,n,a,r,o;return(null===e||void 0===e||null===(i=e.background)||void 0===i?void 0:i.isUsed)&&(null===e||void 0===e||null===(n=e.background)||void 0===n||null===(a=n.url)||void 0===a||null===(r=a.qStaticContentUrlDef)||void 0===r?void 0:r.qUrl)&&"fill"!==(null===e||void 0===e||null===(o=e.background)||void 0===o?void 0:o.size)},currentSize:function t(e){var i;return null===e||void 0===e||null===(i=e.background)||void 0===i?void 0:i.size}}}}}}}};var p=i("YWN+");var f=i("tszv");var h=i("mJsV");var v=i("ESef");var g=i("G3JA");var m=i("4nJ1");function b(t,e){var i=[];var n=[];var a=t.map((function(t){return t.qDef.cId}));var r=e.map((function(t){return t.qDef.cId}));for(var o=r.length-1;o>=0;--o)a.includes(r[o])||i.push({index:o,id:r[o],measure:e[o]});for(var s=0;s<a.length;++s)r.includes(a[s])?a.lastIndexOf(a[s])!==s&&n.push({index:s,id:a[s],measure:t[s]}):n.push({index:s,id:a[s],measure:t[s]});return{removed:i,added:n}}function y(t,e){return e.replace(/=\[(\w*?)]\((\w*?)\)/g,(function(e,i,n){if(t===n)return"";return e}))}function x(t,e,i,n){var a=-1;return i.replace(/=\[(\w*?)]\((\w*?)\)/g,(function(i,r,o){if(o===t){++a;var s="undefined"!==typeof n;if(!s||s&&a===n)return"=[".concat(r,"](").concat(e,")")}return i}))}function _(t,e){var i=e.qHyperCubeDef.qMeasures;var n=b(t,i);n.removed.forEach((function(t){var n=t.index;i.splice(n,1);g["a"].indexRemoved(e.qHyperCubeDef.qInterColumnSortOrder,e.qHyperCubeDef.qDimensions.length+n)}));n.added.forEach((function(t){var n=t.measure.qDef.cId;var a=m["a"].generateId();t.measure.qDef.cId=a;i.push(t.measure);g["a"].indexAdded(e.qHyperCubeDef.qInterColumnSortOrder,e.qHyperCubeDef.qDimensions.length+i.length-1);e.markdown=x(n,a,e.markdown,1)}))}var C={removeMeasure:y,replaceMeasure:x,syncMeasures:_};var w=i("gaHo");var q=i("k9vo");function M(t,e){var i=[];var n=[];var a;var r=t.map((function(t){return t.id||""}));var o=e.map((function(t){return t.id}));for(a=o.length-1;a>=0;--a)r.includes(o[a])||i.push({index:a,id:o[a],url:e[a].url});function s(t){for(var i=0;i<e.length;i++)if(e[i].id===t)return e[i].url.qStaticContentUrlDef.qUrl;return null}for(a=0;a<r.length;++a)o.includes(r[a])?r.lastIndexOf(r[a])!==a&&n.push({index:a,id:r[a],url:s(r[a])}):n.push({index:a,id:r[a],url:t[a].url});return{removed:i,added:n}}function S(t,e,i,n){var a=-1;return i.replace(/!\[(\w*?)]\((.*?)\)/g,(function(i,r,o){if(r===t){++a;var s="undefined"!==typeof n;if(!s||s&&a===n)return"![".concat(e,"](").concat(o,")")}return i}))}function D(t,e){e.images||(e.images=[]);var i=e.images;var n=M(t,i);n.removed.forEach((function(t){var e=t.index;i.splice(e,1)}));n.added.forEach((function(t){var n=t.id;var a=m["a"].generateId();var r=w["a"].unescapeMarkdown(t.url);r=q["a"].stripBasePath(r);i.push({id:a,url:{qStaticContentUrlDef:{qUrl:r}}});e.markdown=S(n,a,e.markdown,n?1:0)}))}var I={syncImages:D};var k=i("zjn0");var L=i("wIyQ");var T=i("kntI");var E={auto:"auto auto",alwaysFit:"contain",fitWidth:"100% auto",fitHeight:"auto 100%",fill:"100% 100%"};var A={topLeft:"0% 0%",centerLeft:"50% 0%",bottomLeft:"100% 0%",topCenter:"0% 50%",centerCenter:"50% 50%",bottomCenter:"100% 50%",topRight:"0% 100%",centerRight:"50% 100%",bottomRight:"100% 100%"};r["default"].directive("qvTextImageEditor",[function(){return{restrict:"A",scope:{editorOptions:"=",save:"="},link:function t(e,i){h["a"].show(i,f["a"],e.editorOptions);i.on("qv-outside",(function(t){var i=a()(t.target);if(i.closest(".qv-texttool-toolbar, .modal-container, .qui-immidiateContextual, .lui-popover, .lui-dialog").length)return;e.save()}));e.$on("$destroy",(function(){e.save();h["a"].hide()}))}}}]);function P(t){return t.background&&t.background.isUsed&&t.background.url&&t.background.url.qStaticContentUrl&&t.background.url.qStaticContentUrl.qUrl||""}function O(t,e){var i=r["default"].getService("$timeout");var n=e.find(".qv-media-tool-html")[0];if("none"===t.responsive||"undefined"===typeof t.responsive)return i((function(){t.sizeClass="";t.sizeStyle={maxWidth:"",maxHeight:""};a()(n).find("img").css(t.sizeStyle);t.visibilityClass="";t.responsiveClass=""}),0);t.sizeClass="";t.visibilityClass="hidden";"images"===t.responsive?t.responsiveClass="responsive-images":"text"===t.responsive?t.responsiveClass="responsive-text":t.responsiveClass="responsive-images responsive-text";if(!n){t.visibilityClass="";return s["a"].resolve()}return i((function(){if(""===t.visibilityClass)return;t.sizeClass="";t.sizeStyle={maxWidth:"100%",maxHeight:"100%"};a()(n).find("img").css(t.sizeStyle);a()(n).addClass("default-font-size");var e=n.offsetWidth-n.clientWidth;var i=(n.scrollHeight+e*n.offsetHeight/48)/n.clientHeight;a()(n).width("auto");a()(n).removeClass("default-font-size");if(i>1){t.sizeStyle={maxWidth:"".concat(Math.floor(1/i*100),"%"),maxHeight:"".concat(Math.floor(1/i*100),"%")};a()(n).find("img").css(t.sizeStyle)}t.sizeClass=i>3?"bp-4":i>2?"bp-3":i>1.5?"bp-2":i>1?"bp-1":"";t.visibilityClass=""}),10)}function R(t){return!h["a"].hasContent(t)||""===t.trim()}function V(t){var e=0;if(document.createRange){var i=document.createRange();i.selectNodeContents(t);if(i.getBoundingClientRect){var n=i.getBoundingClientRect();n&&(e=n.bottom-n.top)}}return e}function N(t){return!R(t.markdown)||P(t)}var z=e["default"]={type:"text-image",BackendApi:p["a"],definition:d,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[]},images:[],markdown:"",background:{url:{},size:"auto"}},data:{measures:{min:0,max:1e3,description:function t(){return o["default"].get("Visualizations.Descriptions.TextImage.Measure")},add:function t(e,i){i.markdown+="=[](".concat(e.qDef.cId,")")},remove:function t(e,i){i.markdown=C.removeMeasure(e.qDef.cId,i.markdown)},replace:function t(e,i,n,a){a.markdown=C.replaceMeasure(i.qDef.cId,e.qDef.cId,a.markdown)}}},support:{cssScaling:true,snapshot:N,export:N,exportData:true,sharing:false},exportProperties:null,importProperties:null,template:u,showRequirements:function t(){return false},getDropMeasureOptions:function t(e,i,n,a){if(i.getMeasures().length<i.maxMeasures())"expression"===e.item.type?i.addExpressionMeasure(e.item.name,"").then((function(){n.setProperties(i.properties)})):i.addLibraryMeasure(e.item.id).then((function(){n.setProperties(i.properties)}));else{e.ReplaceMeasures(n,i);a()}},controller:["$scope","$element","$sce",function(t,e,i){var n=e.find(".qv-ti");t.isSelected=function(){var e,i;return(null===(e=t.options)||void 0===e?void 0:e.isActive)||(null===(i=t.options)||void 0===i?void 0:i.isZoomed)};t.$watch("editing",(function(e){t.object.preventDrag=e}));function o(){var t=h["a"].getEditorElement();T["a"].enable(t,true)}t.edit=function(){if(!t.object.inEditState()||t.editing||t.object.isLink)return;if(t.isSelected()){t.saving=false;t.saved=false;t.backendApi.getProperties().then((function(e){var i=t.object.getCreatePropertyHandler();i.setProperties(e);t.editorOptions={markdown:e.markdown,maxlength:v["a"].textImage,toolbar:{style:"popover",buttons:"all",width:561},useMeasures:true,layout:t.backendApi.model.layout,properties:e,propertyHandler:i,copiedMeasures:[],insertedImages:[],onOpen:function e(i){i.saveRange();t.$apply((function(){t.editing=true;t.initializing=false}));setTimeout((function(){o()}),0)},isActive:function e(){return t.editing||t.initializing}};t.initializing=true}))}};function l(t){var e=[];t.find(".tokenized-measure").each((function(t,i){var n=i.getAttribute("data-measure");n=c.a.decompressFromBase64(n);e.push(JSON.parse(n))}));return e}function u(t){function e(t){var e=h["a"].getOptions().insertedImages;for(var i=0;i<e.length;i++)if(e[i].url===t)return e[i].urlDef;return null}var i=[];t.find("img:not(.tokenized-measure)").each((function(t,n){var a=n.getAttribute("data-image-id");var r=n.getAttribute("src");var o=e(r);o||(o=n.getAttribute("src"));i.push({id:a,url:o})}));return i}t.save=function(){if(t.saving||t.saved)return;h["a"].closing();var e=h["a"].getMarkdown();var i=h["a"].getEditorElement();if(null!==e&&e!==t.markdown){t.saving=true;var n=h["a"].getOptions().properties;n.markdown=e;C.syncMeasures(l(i),n);I.syncImages(u(i),n);t.backendApi.model.setProperties(n);t.saved=true}else t.editing=false};t.clickHtml=function(e){var i=!t.navigation;i&&a()(e.target).closest("a").length&&e.preventDefault()};function d(){r["default"].$apply(t,(function(){t.editing=false}))}this.onPaint=function(e){var a="";var o="";var l="";var c="";var u=[];t.finishRender=false;if(t.saving){t.editing=false;t.saving=false}a=P(e);if(a){q["a"].stripBasePath(a);a=a.replace(/"/g,'\\"');a=a.replace(/'/g,"\\'");o=q["a"].addBasePath(a);l=E[e.background.size]||E.auto;c=A[e.background.position]||A.topLeft;var d=new Image;var p=Object(s["a"])();u.push(p.promise);d.onload=function(){p.resolve()};d.onerror=function(){p.resolve()};d.src=o;if(d.complete){d.onload=null;d.onerror=null;p.resolve()}}n.css({backgroundImage:"url('".concat(o,"')"),backgroundSize:l,backgroundPosition:c,backgroundRepeat:"no-repeat"});t.empty=R(e.markdown)&&!a;t.html=i.trustAsHtml(h["a"].toHTML(e.markdown,e,true));t.direction=this.view.options.direction;t.textDirection=k["a"].getAutoOrAlternativeDirection(e.markdown);t.markdown=e.markdown;t.responsive=e.responsive;var f=r["default"].getService("$timeout");var v=O(t,n).then((function(){return f((function(){n.find("img").each((function(t,e){e.complete||function(t){var e=Object(s["a"])();u.push(e.promise);t.onload=function(){e.resolve()};t.onerror=function(){e.resolve()}}(e)}));if(u.length)return s["a"].all(u).then((function(e){return O(t,n).then((function(){t.finishRender=true;return e}))}));t.finishRender=true;return s["a"].resolve()}),0,false)}));return v.then((function(){if(t.backendApi.isSnapshot){e.snapshotData.scrollTopPercent&&n.closest(".qv-object-content").css("top","".concat(-e.snapshotData.scrollTopPercent,"%"));e.snapshotData.verticalScrollWidth&&n.find(".qv-media-tool-html").css("padding-right","".concat(e.snapshotData.verticalScrollWidth,"px"))}return f((function(){}),500)}))};this.onResize=function(){return this.onPaint.apply(this,arguments)};this.setInteractionState=function(e){this._super(e);if(this.view){t.navigation=(t.options.navigation||t.options.limitedInteraction)&&t.object.inAnalysisState();t.editmode=t.object.inEditState();t.editmode||(t.editing=false)}};this.getPreferredSize=function(){var e=Object(s["a"])();var i=t.$watch("finishRender",(function(t){if(true===t){var a=0;n.find(".qv-media-tool-html").contents().each((function(){a+=3===this.nodeType?V(this):this.offsetHeight;"BR"===this.nodeName&&(a+=8)}));e.resolve(a?{w:n.width(),h:a}:void 0);i()}}));return e.promise};this.setSnapshotData=function(e){if(t.backendApi.isSnapshot)t.object.layout.snapshotData.scrollTopPercent&&(e.snapshotData.scrollTopPercent=t.object.layout.snapshotData.scrollTopPercent);else{var i=n.find(".qv-media-tool-html")[0];e.snapshotData.scrollTopPercent=i.scrollTop/i.clientHeight*100;e.snapshotData.verticalScrollWidth=a()(i).innerWidth()-i.clientWidth}};L["a"].on("start",d);t.$on("$destroy",(function(){L["a"].off("start",d)}))}],getDropFieldOptions:function t(e,i,n,a,r){e.AddFieldAsMeasure(n,i,r);a()},getDropDimensionOptions:function t(e,i,n,a){a()}}},"YWN+":function(t,e,i){"use strict";var n=i("q6LT");var a=n["a"].extend("HyperCube",{init:function t(e,i){this._super(e,"/qHyperCubeDef",i);this.cacheCube.setMethodName("getHyperCubeData")},updateCache:function t(e){if(e&&e.qHyperCube){this.cacheCube.set(e.qHyperCube.qDataPages);this.cacheCube.setCubeSize(e.qHyperCube.qSize)}else this.cacheCube.clear()},getData:function t(e,i){if(i)return this.model.getHyperCubeData(i,e);return this.cacheCube.getData(e)},getHyperCubeBinnedData:function t(e,i,n,a){return this.model.getHyperCubeBinnedData(this.path,e,{width:0,height:0},i,n,a,0)},getHyperCubeContinousData:function t(e,i){return this.model.getHyperCubeContinuousData(this.path,e,i)},getReducedData:function t(e,i,n){n=void 0!==n?n:"D1";return this.model.getHyperCubeReducedData(this.path,e,i,n)},selectDimensionRange:function t(e){var i=e.map((function(t){return{qDimIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:true,qMaxInclEq:t.range.maxIncluded}}}));return this.model.selectHyperCubeContinuousRange(this.path,i)},selectRange:function t(e,i,n){i=!!i;n=n||[];var a=e.map((function(t){return{qMeasureIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:false!==t.range.minInclEq,qMaxInclEq:false!==t.range.maxInclEq}}}));return this.model.rangeSelectHyperCubeValues(this.path,a,n,i)},selectRects:function t(e,i){i=i||[];var n=e.map((function(t){var e=t[0];var n=t[1];return{qRanges:[{qMeasureIx:e.idx,qRange:{qMin:e.range.min,qMax:e.range.max,qMinInclEq:false!==e.range.minInclEq,qMaxInclEq:false!==e.range.maxInclEq}},{qMeasureIx:n.idx,qRange:{qMin:n.range.min,qMax:n.range.max,qMinInclEq:false!==n.range.minInclEq,qMaxInclEq:false!==n.range.maxInclEq}}],qColumnToSelect:i}}));return this.model.multiRangeSelectHyperCubeValues(this.path,n,false)},select:function t(e,i){return this.model.selectHyperCubeCells(this.path,e,i)},selectValues:function t(e,i,n,a){return this.model.selectHyperCubeValues(a||this.path,e,i,n)},getProperties:function t(){return this.model.getProperties()},getDimensionInfos:function t(){return this.model.layout.qHyperCube.qDimensionInfo},getMeasureInfos:function t(){return this.model.layout.qHyperCube.qMeasureInfo},clearSelections:function t(){return this.model.resetMadeSelections()},hasSelections:function t(){return this.model.layout.qSelectionInfo.qMadeSelections}});e["a"]=a},ZM1a:function(t,e,i){"use strict";var n=i("ZrpC");e["a"]={displayObject:n["a"],render:function t(e,i,n){var a;var r;var o;var s;var l;var c;e.beginPath();for(l=0;l<this._polygons.length;l++){a=this._polygons[l].points;r=a?a.length:0;o=a[0];if(!o)return;c=o;e.moveTo(o.x,o.y);for(s=1;s<r;s+=1){o=a[s];e.lineTo(o.x,o.y)}false===this.close||!n||c.x===o.x&&c.y===o.y||e.lineTo(c.x,c.y)}false!==this.close&&e.closePath();i&&e.fill();n&&e.stroke()}}},ZrpC:function(t,e,i){"use strict";var n=i("b5IE");var a=i("R0oC");var r=i("cQOM");var o=n["a"].extend("Polygon",{init:function t(e){this._super();e?this.set(e):this._polygons=[]},getLocalBoundingRect:function t(){var e;if(this._polygons&&this._polygons.length){e=this._polygons.reduce((function(t,e){return t.combineWith(e.getBoundingRect())}),this._polygons[0].getBoundingRect());return{x:e.x,y:e.y,width:e.width,height:e.height}}return},getLocalPoints:function t(){return this._polygons&&this._polygons[0]?this._polygons[0].points:[]},getPartialFromRange:function t(e,i){var n;var a=0;var r=[];var s=this._polygons[0]?this._polygons[0].points:[];var l=s.length;var c=e<=i;while(a<l&&(c?s[a].x<e:s[a].x>e))a++;if(a&&a<l){n=(e-s[a-1].x)/(s[a].x-s[a-1].x);r.push({x:e,y:s[a-1].y+n*(s[a].y-s[a-1].y),y_:s[a-1].y_+n*(s[a].y_-s[a-1].y_)})}while(a<l&&(c?s[a].x<i:s[a].x>i)){r.push({x:s[a].x,y:s[a].y,y_:s[a].y_});a++}if(a&&a<l){n=(i-s[a-1].x)/(s[a].x-s[a-1].x);r.push({x:i,y:s[a-1].y+n*(s[a].y-s[a-1].y),y_:s[a-1].y_+n*(s[a].y_-s[a-1].y_)})}if(!r.length)return;return new o(r)},set:function t(e){var i=e&&e[0]&&Array.isArray(e[0])?e:[e];this._polygons=i.map((function(t){return new a["a"](t)}));this.invalidateBounds()},intersectsLocalLine:function t(e){return this._polygons.some((function(t){return t.intersectsLine(e)}))},intersectsLocalRect:function t(e){return this._polygons.some((function(t){return a["a"].prototype.intersectsRect.call(t,e)}))},containsPoint:function t(e,i){return this._polygons.some((function(t){return t.pointInside(e,i)}))}});e["a"]=o},a5hU:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("mWu2");var o=i("uVcZ");var s=i("GG1N");var l=i("2Hli");var c=i("/5Yl");var u=i("G1wx");var d=i("8H7g");var p=i("4nJ1");var f='<div class="pp-component pp-list-component pp-toplist" ng-if="visible" tcl="list">\n\t<div class="pp-toplist-content pp-list-container pp-nm-hcd__lists" qv-sortable-list="sortableItemLists">\n    \x3c!-- List title --\x3e\n    <span ng-if="definition.titleTranslation" class="label pp-list-title" q-translation={{definition.titleTranslation}}></span>\n    \x3c!-- List --\x3e\n\t\t<ul class="pp-expandable-list pp-list-content">\n\t\t\t<li ng-repeat="item in sortableItemLists.lists[0].items track by item.id" class="pp-nm-di" ng-style="item.style">\n\t\t\t\t\x3c!-- Header --\x3e\n\t\t\t\t<div class="pp-nm-di__header" ng-class="{\'expanded\': item.expanded,\t\'draggable\': item.sortable, \'qv-pp-sortable\': item.sortable}" ng-style="item.style"\n\t\t\t\t ng-click="expandClicked($event, item)" qva-context-menu="openContextMenu($event, item)">\n\t\t\t\t\t\x3c!-- Header content --\x3e\n\t\t\t\t\t<div class="pp-nm-di__header-content">\n\t\t\t\t\t\t\x3c!-- Header title --\x3e\n\t\t\t\t\t\t<div class="pp-nm-di__header-title" title="{{item.title()}}">\n\t\t\t\t\t\t\t{{item.title()}}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- Header icons --\x3e\n\t\t\t\t\t\t<i ng-if="item.markerClass" ng-class="item.markerClass"></i>\n\t\t\t\t\t\t<i class="lui-icon pp-nm-di__header-toggle lui-icon--arrow-right" ng-class="{ \'expanded\': item.expanded }"></i>\n\t\t\t\t\t\t<i class="lui-icon lui-icon--draggable pp-nm-di__draggable qv-pp-sortable-handle" pp-di-draggable-hover\n\t\t\t\t\t\t q-title-translation="Common.Move"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- Content --\x3e\n\t\t\t\t<div class="pp-nm-di__content" ng-if="item.expanded">\n\n\t\t\t\t\t<div class="pp-nm-di__content-body">\n\t\t\t\t\t\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="item.data" x-args="args"></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- Content footer - Remove button --\x3e\n\t\t\t\t\t<div class="pp-nm-di__content-footer" ng-if="definition.allowRemove">\n\t\t\t\t\t\t<button class="lui-button pp-nm-di__remove-button" ng-click="removeItem(item.index)">\n\t\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--bin remove-icon" q-title-translation="Common.Delete"></span>\n\t\t\t\t\t\t\t<span class="lui-button__text" q-translation="Common.Delete"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="pp-nm-di" ng-if="definition.allowAdd">\n\t\t\t\t<button title="{{definition.addTranslation | translate}}" class="lui-button lui-button--block pp-toplist-add-button"  ng-disabled="addDisabled() || !definition.allowAdd"\n\t\t\t\tqva-activate="addClicked()" tid="add-item">\n\t\t\t\t   <span class="lui-button__text">{{definition.addTranslation | translate}}</span>\n\t\t\t   </button>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>';var h=i("U7Ny");function v(t){v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return v(t)}var g=false;var m={template:f,controller:["$scope","$element",function(t,e){var i=t.args.cache;var n="list_".concat(t.definition.ref,"_");var f;function h(e){if(t.definition.cId)return l["a"].getValue(e,t.definition.cId,"");return e&&e.cId}function m(e,i){l["a"].setValue(e,t.definition.cId||"cId",i)}s["a"].defineVisible(t,t.args.handler);t.itemId=function(t){var e=h(t);if(!e){e=t.$$hashKey||p["a"].generateId();m(t,e);delete t.$$hashKey}return e};t.isExpanded=function(t){return i.get(n+h(t))};t.expandClicked=function(t,r){if(a()(t.target).hasClass("pp-move-item"))return;e.find("input").blur();var o=h(r.data);var s=i.get(n+o)||false;r.expanded=!s;i.put(n+o,r.expanded);t.preventDefault();t.stopPropagation()};t.addClicked=function(){if(!t.addDisabled()){var e=c["a"].mapProperties(t.definition);x();if("function"===typeof t.definition.add&&t.definition.customAdd){t.definition.add.call(null,e,t.data,t.args.handler);return}e.cId=p["a"].generateId();"function"===typeof t.definition.add&&t.definition.add.call(null,e,t.data,t.args.handler);var a=l["a"].getValue(t.data,t.definition.ref,[]);a.push(e);i.put(n+e.cId,true);t.$emit("saveProperties")}};t.removeItem=function(e){var i=l["a"].getValue(t.data,t.definition.ref,[]);var n=i[e];"function"===typeof t.definition.remove&&t.definition.remove.call(null,n,t.data,t.args.handler);i.splice(e,1);t.$emit("saveProperties")};var b=null;t.openContextMenu=function(e,i){var n=r["default"].getService("qvContextMenu").menu();n.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i.index)}});b=r["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};function y(){t.sortableItemLists.reset();var e=l["a"].getValue(t.data,t.definition.ref,[]);e.forEach((function(e,a){var r=t.itemId(e);var s={title:function i(){var i;var n=t.definition.itemTitleRef;if(n){i="function"===typeof n?n.call(null,e,a,t.args.handler):l["a"].getValue(e,n,"");"object"===v(i)&&(i=i.qStringExpression?i.qStringExpression.qExpr:i.qValueExpression.qExpr)}else i="".concat(a,"1");return i},component:o["a"].getComponent("items"),definition:{type:"items",items:t.definition.items},data:e,id:r,index:a,expanded:i.get(n+r)||false,disabled:true,sortable:false!==t.definition.allowMove};f.addSortableItem(s)}))}t.sortableItemLists=d["a"].create({options:{direction:"vertical",listKey:"list",listSelector:".pp-expandable-list",itemKey:"item",itemSelector:false!==t.definition.allowMove?".qv-pp-sortable":"",itemDragSelector:false!==t.definition.allowMove?".qv-pp-sortable-handle":"",gesture:{name:"swipe",options:{radiusThreshold:u["a"].treatAsDesktop()?4:0,preventDefault:false}}},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function t(){if(g)return;this._super.apply(this,arguments);var i=e.find(".pp-list-content");i.css("height",i.innerHeight());x();g=true},onCancel:function t(){this._super.apply(this,arguments);g=false},removePlaceholder:function t(){this._super.apply(this,arguments);var i=e.find(".pp-list-content");i.css("height","")},onMove:function e(){var i=this._super.apply(this,arguments);if(i){var n=f.get().map((function(t){return t.data}));l["a"].setValue(t.data,t.definition.ref,n);t.$emit("saveProperties")}g=false;return i}});function x(){f.items.forEach((function(t){t.expanded=false;i.put(n+h(t.data),false)}))}t.$watchCollection("data.".concat(t.definition.ref),y);t.addDisabled=function(){var e=l["a"].getValue(t.data,t.definition.ref,[]);return t.definition.allowAdd&&e.length>=_()};f=t.sortableItemLists.createList(1,{tid:"list"});function _(){if("function"===typeof t.definition.max)return t.definition.max.call(null,t.data,this);return t.definition.max||1e6}t.$on("$destroy",(function(){g=false;if(b){b.close();b=null}}))}]};var b=e["default"]=m},aT3D:function(t,e,i){"use strict";var n={};var a={moz:"-moz-linear-gradient(",webkit:"-webkit-linear-gradient(",opera:" -o-linear-gradient(",ie:"-ms-linear-gradient(",w3c:"linear-gradient(to "};var r={top:"bottom",bottom:"top",right:"left",left:"right"};n.getCSSLinearGradient=function(t,e,i,n){if(1===e.length)return"background:".concat(e[0],";");var o="";var s=")";if(n)for(var l=e.length-1;l>=0;l--)o+=", ".concat(e[l]," ").concat(100-i[l],"%");else for(var c=0;c<e.length;c++)o+=", ".concat(e[c]," ").concat(i[c],"%");return"background:".concat(e[Math.floor(e.length/2)],"; background:").concat(a.moz).concat(r[t]).concat(o).concat(s,"; background:").concat(a.webkit).concat(r[t]).concat(o).concat(s,"; background:").concat(a.opera).concat(r[t]).concat(o).concat(s,"; background:").concat(a.ie).concat(r[t]).concat(o).concat(s,"; background:").concat(a.w3c).concat(t).concat(o).concat(s,";")};e["a"]=n},akA2:function(t,e,i){"use strict";var n=i("NFdj");var a=i.n(n);var r=i("mWu2");var o=i("sWge");var s=i("8wLh");var l=i("n5Vb");var c=i("wIyQ");var u={template:null,controller:["$scope","$element","$timeout",function(t,e,i){var n=this;n.selectionsActivated=function(){};n.selectionsDeactivated=function(){};n.close=function(){a()};function a(){i((function(){t.destroyComponent();e.remove()}));c["a"].off("start.listbox-popover-error",a)}function r(){return i((function(){return e.find(".toolbar-wrapper").outerWidth()}))}t.closeView=function(e){t.onPopoverClose(e);a()};o["a"].all({object:t.getVisualization(),width:r()}).then((function(e){var i=e.object;var r=e.width;i.getSelectionToolbar().then((function(e){t.toolbar=e;t.toolbar.showLock=t.options.showLock;t.toolbar.position={width:r};i.activateSelections()}));i.loaded.then((function(){i.ext.hasError(i)&&c["a"].on("start.listbox-popover-error",a)}));i.selectionsApi.watchActivated((function(){n.selectionsActivated()}));i.selectionsApi.watchDeactivated((function(){n.selectionsDeactivated();a()}));t.closeView=function(e){i.selectionsApi.confirm();t.onPopoverClose(e);a()}}))}]};var d=u;var p=i("B52N");var f='<div\n\tclass="qv-listbox-popover-small-device">\n\t<div class="toolbar-wrapper"\n\t\tqva-include-selection-toolbar\n\t\tcomponent="selectionToolbarComponent"\n\t\ttoolbar="toolbar"\n\t\toptions="options">\n\t</div>\n\t<h1 qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{model.layout.title || model.layout.qListObject.qDimensionInfo.qFallbackTitle}}" class="qvt-visualization-title">{{model.layout.title || model.layout.qListObject.qDimensionInfo.qFallbackTitle}}</h1>\n\t<div class="listbox-wrapper">\n\t\t<qv-object object="object" model="model" options="options"></qv-object>\n\t</div>\n</div>\n';var h=i("6dxF");var v;var g=e["a"]={show:function t(e,i,n,s){var c=Object(o["a"])();var u={$alignToElement:i.$alignToElement,popupPosition:i.position||"bottom",collision:i.collision||"none",qvaOutsideIgnoreFor:i.qvaOutsideIgnoreFor,getVisualization:function t(){return c.promise},model:e,onPopoverClose:this.onPopoverClose,options:{setController:c.resolve,isPopover:true,showLock:i.showLock,search:i.search||{},smallDevice:p["default"].isSmallDevice,direction:i.direction},selectionToolbarComponent:l["a"]};if(v){v.selectionsActivated=function(){};v.selectionsDeactivated=function(){};v.close()}var h=r["default"].getService("$document");var g=h.find("body");var m=a.a.element("<div>");g.append(m);d.template=f;v=m.showComponent(d,u);v.selectionsActivated=function(){"function"===typeof s&&s()};v.selectionsDeactivated=function(){"function"===typeof n&&n();n=null;s=null};return v},showField:function t(e,i,n,a,r,l){var c=this;return s["a"].createTransientField(i,e,a).then((function(t){return o["a"].resolve(c.show(t,n,r,l))}))},showDimension:function t(e,i,n,a,r,o){var l=this;s["a"].createTransientDimension(i,e,a).then((function(t){l.show(t,n,r,o)}))},close:function t(){v&&v.close()},onPopoverClose:function t(){}}},b5IE:function(t,e,i){"use strict";var n=i("0vQd");var a=i("wkj2");var r=i("MoEg");var o=i("EDQw");var s={translate:function t(e,i){this.matrix.translate(e,i);this._dirtyBounds=true;this.invalidate();return this},rotate:function t(e){this.matrix.rotate(e);this._dirtyBounds=true;this.invalidate();return this},scale:function t(e,i){this.matrix.scale(e,i);this._dirtyBounds=true;this.invalidate();return this}};function l(){this.matrix=new a["a"];this.scale=s.scale;this.rotate=s.rotate;this.translate=s.translate;this._dirtyBounds=true}var c=n["a"].extend("DisplayObject",{init:function t(){this._super();this._dirtyBounds=true;this._bounds=new r["a"](NaN,NaN,NaN,NaN);this._vmBounds=new r["a"](NaN,NaN,NaN,NaN);this._visualBounds=new r["a"](NaN,NaN,NaN,NaN);this._stage=null;this.rData={inherited:{}};this._modelView=null;this._inverseModelView=null;this._inheritedProps={}},find:function t(e){return o["a"].find(e,this)},translate:function t(e,i){if(0===e&&0===i)return this;l.call(this);return s.translate.call(this,e,i)},rotate:function t(e){if(Number.isNaN(+e)||0===e)return this;l.call(this);return s.rotate.call(this,e)},scale:function t(e,i){if(1===e)return this;l.call(this);return s.scale.call(this,e,i)},clearTransform:function t(){if(this.matrix){this.matrix.identity();this._dirtyBounds=true;this.invalidate()}return this},invalidate:function t(){var e=this._stage||this.stage;e&&e.invalidateObject(this);this._inheritedProps={};return this},attr:function t(e){if("undefined"!==typeof this[e])return this[e];if("undefined"!==typeof this.rData.inherited[e])return this.rData.inherited[e];return},attrs:function t(e){for(var i in e)"undefined"===typeof e[i]?delete this[i]:this[i]=e[i];return this},getBoundingRect:function t(){this._dirtyBounds&&this._calculateBounds();return this._vmBounds},getVisualBounds:function t(){this._dirtyBounds&&this._calculateBounds();return this._visualBounds},getVisualExpansion:function t(){var e=this.attr("stroke");if(!e)return 0;var i=this.attr("strokeWidth");if(!i)return 0;return i/2},pointInside:function t(e,i){if(false===this.visible)return false;var n=this.getInverseModelView();var a;if(n&&true!==this._transformedIncomingPoint){a=n.transformPoint({x:e,y:i});return this.containsPoint(a.x,a.y)}return this.containsPoint(e,i)},intersectsLine:function t(e){if(false===this.visible)return false;var i=this.getInverseModelView();var n;var a;var r;if(i&&true!==this._transformedIncomingPoint){a=i.transformPoint({x:e.x1,y:e.y1});r=i.transformPoint({x:e.x2,y:e.y2});e=e.clone();e.set(a.x,a.y,r.x,r.y);this._transformedIncomingPoint=true;n=this.intersectsLocalLine(e);delete this._transformedIncomingPoint;return n}return this.intersectsLocalLine(e)},intersectsRect:function t(e){if(false===this.visible)return false;var i=this.getInverseModelView();var n;var a;if(i&&true!==this._transformedIncomingPoint){this._transformedIncomingPoint=true;n=this._getTransformedBoundsOfRect(i,e);a=this.intersectsLocalRect(n);delete this._transformedIncomingPoint;return a}return this.intersectsLocalRect(e)},getPoints:function t(){if(false===this.visible)return[];var e=this.getModelView();var i;var n;var a;if(e){i=this.getLocalPoints().slice();for(n=0,a=i?i.length:0;n<a;n++)i[n]=e.transformPoint(i[n]);return i}return this.getLocalPoints()},getLocalPoints:function t(){return[]},intersectsLocalLine:function t(){return false},intersectsLocalRect:function t(e){var i="function"===typeof e.getPoints?e.getPoints():[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];var n;var a=i.length;for(n=0;n<a;n++)if(this.containsPoint(i[n].x,i[n].y))return true;i=this.getLocalPoints();a=i.length;for(n=0;n<a;n++)if(i[n].x>=e.x&&i[n].x<=e.x+e.width&&i[n].y>=e.y&&i[n].y<=e.y+e.height)return true;return false},containsPoint:function t(){return false},getLocalBoundingRect:function t(){return this._bounds},invalidateBounds:function t(){this._dirtyBounds=true;return this},clearModelView:function t(){this._modelView=null;this._inverseModelView=null;this._isModelViewCalculated=false;this._dirtyBounds=true},getModelView:function t(){this._modelView||this._isModelViewCalculated||this._calculateModelView();return this._modelView},getInverseModelView:function t(){this._inverseModelView||this._isModelViewCalculated||this._calculateModelView();return this._inverseModelView},destroy:function t(){this._stage=null},_calculateBounds:function t(){var e=this._bounds;var i=this.getLocalBoundingRect();var n=this.getModelView();var a=this.getVisualExpansion();var r;if(i){e.set(i.x,i.y,i.width,i.height);if(n){r=this._getTransformedBoundsOfRect(n,e);this._vmBounds.set(r.x,r.y,r.width,r.height);r=this._getTransformedBoundsOfRect(n,{x:e.x-a,y:e.y-a,width:e.width+2*a,height:e.height+2*a});this._visualBounds.set(r.x,r.y,r.width,r.height)}else{this._vmBounds.set(i.x,i.y,i.width,i.height);this._visualBounds.set(i.x-a,i.y-a,i.width+2*a,i.height+2*a)}}else{e.set(NaN,NaN,NaN,NaN);this._vmBounds.set(NaN,NaN,NaN,NaN);this._visualBounds.set(NaN,NaN,NaN,NaN)}this._dirtyBounds=false},_getTransformedBoundsOfRect:function t(e,i){var n=e.transformPoints([{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}]);var a=n.map((function(t){return t.x}));var o=n.map((function(t){return t.y}));var s=Math.min.apply(null,a);var l=Math.max.apply(null,a);var c=Math.min.apply(null,o);var u=Math.max.apply(null,o);return new r["a"](s,c,l-s,u-c)},_calculateModelView:function t(){var e=this;while(e&&!e.rData.vmTransform)e=e._parent;this._isModelViewCalculated=true;if(!e)return false;if(!e._modelView){e._modelView=new a["a"];e._inverseModelView=new a["a"]}if(e.rData.dirtyVMTransform){e._modelView.set(e.rData.vmTransform);e._inverseModelView.set(e.rData.vmTransform).invert();delete e.rData.dirtyVMTransform}this._modelView=e._modelView;this._inverseModelView=e._inverseModelView;return true}});Object.defineProperties(c.prototype,{stage:{get:function t(){this._parent&&!this._stage?this._stage=this._parent.stage:this._parent||this._stage===this||(this._stage=null);return this._stage}}});e["a"]=c},bPi8:function(t,e,i){"use strict";var n=i("WwCo");var a=i("MoEg");var r=i("wvr8");function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}var s=0;var l=1;var c=3;function u(t){var e=this._cacheItems;return e&&t&&t.some((function(t){return e[t]&&e[t].selected}))?1:this._globalAlpha}function d(t,e,i){var n;var a;var r=this.isHorizontal();var o=[];var s=[];var l=[];var c=[];var d=[];var p=[];var f=[];for(n=0;n<t.length;n+=1){a={center:this.getPositionOfValue(n,e),width:this.getWidthOfValue(n,e)};if(a.width>=2*this._discreteSpacing&&(a.center-this._discreteSpacing+a.width/2<0||a.center+this._discreteSpacing-a.width/2>i))continue;if(a.width<2*this._discreteSpacing&&(a.center<0||a.center>i))continue;c.push(a.width);r&&a.center+a.width/2>i?o.push(Math.min(i,i-(a.center-a.width/2))):r&&a.center-a.width/2<0?o.push(Math.min(i,a.width/2+a.center)):o.push(Math.min(i,a.width));if(a.width>this._discreteSpacing){var h=Math.max(1,Math.min(a.center,i-1));s.push(h);l.push(h-a.center)}else{s.push(a.center);l.push(0)}d.push(t[n].label);p.push(t[n].cacheIndex?t[n].cacheIndex:0);f.push(u.apply(this,[t[n].cacheIndex]))}return{labels:d,widths:o,positions:s,indecies:p,opacities:f,offsets:l,fullWidths:c}}function p(t,e,i,n,a,s){if(!t||!t.length)return[];var l=[];var c;var u;var d;var f;var h;var v;for(c=0;c<t.length;c++){u=t[c];d={};f="";h=null;if("object"===o(u)){f=u.label;h=u.children?p(u.children,e,i+1,d,a,s):null;d.cacheIndex="cacheIndex"in t[c]?t[c].cacheIndex:[];d.group=true===u.group;u.id&&(s[u.id]=d)}else f=u;d.label=f||"";d.parent=n;v=r["a"].getCharacterRatios(d.label);h&&h.length&&(d.children=h);l.push(d);if(!e[i]){e[i]={data:[]};e[i].show=(!a||!a[i]||false!==a[i].show)&&!e[i].silo;e[i].qApprMaxGlyphCount=a&&a[i]&&a[i].qApprMaxGlyphCount||10;e[i].characterRatios={latin:0,cjk:0,longestCjk:{latin:0,cjk:0},longestLatin:{latin:0,cjk:0}};e[i].groupSize=a&&a[i]?a[i].groupSize:void 0}e[i].data.push(d);e[i].characterRatios.latin+=v.latin;e[i].characterRatios.cjk+=v.cjk;if(e[i].characterRatios.longestLatin.latin<v.latin){e[i].characterRatios.longestLatin.latin=v.latin;e[i].characterRatios.longestLatin.cjk=v.cjk}if(e[i].characterRatios.longestCjk.cjk<v.cjk){e[i].characterRatios.longestCjk.cjk=v.cjk;e[i].characterRatios.longestCjk.latin=v.latin}}return l}function f(t){var e=t.parent;var i=[];while(e){e.collapseChildren||i.push(e);e=e.parent}return i}function h(t,e){var i=t[t.length-1].data;var n;var a;var r;var o;var s;var l;var c;var u;i[0].distanceFrom=e/2;i[0].distanceTo=i[0].distanceFrom+1;n=f(i[0]);c=n.filter((function(t){return t.group}))[0];for(o=1;o<i.length;o++){l=i[o-1].distanceTo;a=f(i[o]);u=a.filter((function(t){return t.group}))[0];if(u!==c){for(s=0;s<a.length;s++)if(a[s]===n[s]&&(a[s]<0||a[s].group))break;l+=e*s;c=u;n=a}i[o].distanceFrom=l;i[o].distanceTo=i[o].distanceFrom+1}if(t.length>1)for(o=t.length-2;o>=0;o--){r=t[o].data;for(s=0;s<r.length;s++){r[s].distanceFrom=r[s].children[0].distanceFrom;r[s].distanceTo=r[s].children[r[s].children.length-1].distanceTo}}}function v(t,e,i,n){var a;var o=e.getTextWidth("m",i);var s=e.getAverageLetterWidth(i);if(n){a=e.getTextWidth("客",i);var l=r["a"].estimateLabelWidth(n.cjk*t,n.latin*t,a,o,s);var c=r["a"].estimateLabelWidth(n.longestCjk.cjk,n.longestCjk.latin,a,o,s);var u=r["a"].estimateLabelWidth(n.longestLatin.cjk,n.longestLatin.latin,a,o,s);return Math.max(l,c,u)}return r["a"].estimateLabelWidth(0,t,0,o,s)}var g=n["a"].extend("DiscreteAxis",{init:function t(){this._super.apply(this,[].slice.call(arguments));this._unitsOffset=0;this._innerOffset=0;this._shrinkToFitThreshold=arguments[1]&&null!==arguments[1].shrinkToFitThreshold?arguments[1].shrinkToFitThreshold:.85;this._maxDiscreteUnitSize=null;this._minDiscreteUnitSize=null;this._alignmentOffset=0;this._unitAlignment="center";this._angle1=-40;this._angle2=-90},setYMirrorMode:function t(e){this._super(e);if(e){this._angle1=40;this._angle2=90}else{this._angle1=-40;this._angle2=-90}},updateSize:function t(){this._super();1===this._numDiscrete?this._discreteSpacing=Math.min(this._discreteSpacing,this._plotSize/this._numDiscrete):this._discreteSpacing-=(this._preliminarySize-this._plotSize)/(this._numUnitsInView||1);this._alignmentOffset=this._getAlignmentOffset(this._unitAlignment,this._plotSize);this.extendedRect=new a["a"](this.rect.x-this._edgeBleed.left,this.rect.y-this._edgeBleed.top,this.rect.width+this._edgeBleed.left+this._edgeBleed.right,this.rect.height+this._edgeBleed.top+this._edgeBleed.bottom)},updateLevels:function t(){var e=this._oldLevels;this._levels.forEach((function(t,i){t.labelSpace=e[i].labelSpace;t.labelMode=e[i].labelMode;t.radians=e[i].radians;t.show=e[i].show}))},setLabelLevelVisibility:function t(e){this._labelLevelVisibility=e;this._levels&&this._levels.forEach((function(t,i){t.show=false!==e[i]}))},_getPerpendicularExtensionForTiltedLabels:function t(e,i,n,a){var r=this._angle1*Math.PI/180;var o=Math.abs(Math.sin(r))*e.longestLabelWidth;var s;var l=0;o=Math.min(a,o);s=Math.abs(Math.cos(r))*o;s=Math.max(s-this._discreteSpacing/2,0);if("bottom"===this.dock){s=Math.max(s-this._alignmentOffset,0);s>i.x&&(l=s-i.x)}else if("top"===this.dock){s=Math.max(s-("center"===this._unitAlignment?this._alignmentOffset:this._getAlignmentOffset("far"===this._unitAlignment?"near":"far")),0);s>n.width-i.x-i.width&&(l=s-(n.width-n.x-i.x-i.width))}return l},_getLabelMode:function t(e,i,n){var a=e.qApprMaxGlyphCount;var r;if(!this._showLabels||"none"===this._explicitLabelMode)return s;if(this._explicitLabelMode&&"auto"!==this._explicitLabelMode)return"none"===this._explicitLabelMode?s:"tilted"===this._explicitLabelMode?c:l;if(i&&this.isHorizontal()&&e.data&&e.data.length){r=v(a,this._renderer,this._style.label.font,e.characterRatios);e.groupSize&&(n*=e.groupSize);if(n<r)return c}return l},preRelevantSizeCalculation:function t(){this._super();var e;var i=this._levels?this._levels.filter((function(t){return false!==t.show})):[];var n=i.length;var a=this.outerRect[this.isVertical()?"width":"height"]/4;var r=0;var o=0;if(this.isVisible()){for(e=0;e<n;e++){i[e].longestLabelWidth=v(i[e].qApprMaxGlyphCount,this._renderer,this._style.label.font,i[e].characterRatios);r+=i[e].longestLabelWidth}for(e=0;e<n;e++){i[e].labelSizeRatio=Math.min(1/n,i[e].longestLabelWidth/Math.min(r,a));o+=i[e].labelSizeRatio}o<1&&n>1?i[0].labelSizeRatio===1/n?i[0].labelSizeRatio+=1-o:i[1].labelSizeRatio===1/n&&(i[1].labelSizeRatio+=1-o):1===n&&(i[0].labelSizeRatio=1)}},calculatePreliminaryLabelSpace:function t(e,i){var n;var a=this._hideMyLabels;var r=this._levels?this._levels.filter((function(t){return false!==t.show&&!a})):[];var o=r.length;var u=this.outerRect[this._isVertical?"width":"height"]/4;var d=this._fontHeight*this._style.label.lineHeight;var p=0;var f=0;var h=0;this._preliminarySize=e[this._isVertical?"height":"width"];this._calculateDiscreteUnits(this._preliminarySize);if(this.isVisible())for(n=0;n<o;n++){r[n].labelMode=this._getLabelMode(r[n],n===r.length-1,this._discreteSpacing);var v=0;switch(r[n].labelMode){case l:var g=Math.min(r[n].labelSizeRatio*u,r[n].longestLabelWidth);r[n].labelSpace=this.isHorizontal()?d:Math.min(r[n].labelSizeRatio*u,r[n].longestLabelWidth);f=Math.max(0,g-r[n].labelSpace);break;case c:r[n].radians=this._angle1*Math.PI/180;v=this._getPerpendicularExtensionForTiltedLabels(r[n],e,i,u*r[n].labelSizeRatio);v>e.width/5&&(r[n].radians=this._angle2*Math.PI/180);r[n].labelSpace=Math.abs(Math.sin(r[n].radians))*r[n].longestLabelWidth+Math.abs(this._fontHeight*Math.sin(r[n].radians)*2);r[n].labelSpace=Math.min(f+r[n].labelSizeRatio*u+Math.abs(this._fontHeight*Math.sin(r[n].radians)/2),r[n].labelSpace);break;default:r[n].labelSpace=0}if(r[n].labelMode===c){p=Math.max(p,Math.min(e.width/3,Math.ceil(Math.cos(r[n].radians)*r[n].labelSpace)));p=Math.max(p-this._discreteSpacing/2,0);"bottom"===this.dock?p=Math.max(p-this._alignmentOffset,0):"top"===this.dock&&(p=Math.max(p-("center"===this._unitAlignment?this._alignmentOffset:this._getAlignmentOffset("far"===this._unitAlignment?"near":"far")),0));p=Math.ceil(p)}h+=r[n].labelSpace}if(p>0){"bottom"===this.dock&&p>e.x?this._preliminarySize-=p-e.x:"top"===this.dock&&p>i.width-e.x-e.width&&(this._preliminarySize-=p-(i.width-i.x-e.x-e.width));this._calculateDiscreteUnits(this._preliminarySize)}this.fire("numDiscreteUnitsChanged");this.fire("numDiscreteUnitsInViewChanged");this._showLabels_internal=this._showLabels&&r&&r.some((function(t){return t.labelMode!==s}));this._preliminaryRelevantSize={relevantLabelSize:h,relevantSpacing:p};return this._preliminaryRelevantSize},calculateLabelSpace:function t(){this.updateNow(["properties"]);return this._preliminaryRelevantSize},setDataRange:function t(e,i){var n;var a;var r;this._levels&&this._levels.length&&(this._oldLevels=this._levels.map((function(t){return{labelMode:t.labelMode,labelSpace:t.labelSpace,radians:t.radians,show:t.show,groupSize:t.groupSize}})));this._levels=[];this._labelIds={};p(e,this._levels,0,-1,i,this._labelIds);var o=this._levels.length>1?1:0;if(this._levels&&this._levels.length){h(this._levels,o);for(var s=0;s<this._levels.length;s++)if(this._levels[s].characterRatios){r=this._levels[s].characterRatios.latin+this._levels[s].characterRatios.cjk||1;this._levels[s].characterRatios.latin/=r;this._levels[s].characterRatios.cjk/=r}n=this._levels[this._levels.length-1].data;a=n[n.length-1].distanceTo+o/2;this._numDiscrete=n.length;this._numDiscrete=a||0;if(this._explicitNumDiscrete){this._numDiscrete=this._explicitNumDiscrete;this._numDiscrete=this._explicitNumDiscrete}}return this},setOffset:function t(e){if(this._unitsOffset===e)return;this._unitsOffset=e;this.invalidateProperties();this.invalidateDisplay("setOffset");this.fire("changed");return this},getOffset:function t(){return this._unitsOffset},setInnerOffset:function t(e){this._innerOffset=e},getInnerOffset:function t(){return this._innerOffset||0},getNumDiscreteUnits:function t(){return this._numDiscrete},setNumDiscreteUnits:function t(e){this._explicitNumDiscrete=e},getNumDiscreteUnitsInView:function t(){return this._numUnitsInView},setMaxDiscreteUnitSize:function t(e){this._maxDiscreteUnitSize=e},setMinDiscreteUnitSize:function t(e){this._minDiscreteUnitSize=e},setUnitAlignment:function t(e){this._unitAlignment=e},isDiscrete:function t(){return true},setLockedInfo:function t(e){this._lockedInfo=e},getLevels:function t(){var e=[];var i;var n;if(this._levels&&this._levels.length)for(n=0;n<this._levels.length;n++){if(!this._levels[n].show)continue;i=d.call(this,this._levels[n].data,n,this._plotSize);i.labelMode=this._levels[n].labelMode;i.labelSpace=this._levels[n].labelSpace;i.radians=this._levels[n].radians;e.push(i)}return e},calculateValuePositionMappingInfo:function t(){this._calculateDiscreteUnits(this._plotSize)},getDiscreteSpacing:function t(){return this._discreteSpacing},getPositionOfValue:function t(e,i){var n=this._levels.length-1;"undefined"!==typeof i&&(n=Math.min(this._levels.length-1,Math.max(0,i)));var a=this._levels[n].data;var r=a[e];var o=r.distanceFrom+.5*(r.distanceTo-r.distanceFrom)+this._innerOffset-this._unitsOffset;var s=o*this._discreteSpacing+this._alignmentOffset;return!this._isVertical&&this.yMirrorMode?this._plotSize-s:s},getWidthOfValue:function t(e,i){var n=this._levels.length-1;"undefined"!==typeof i&&(n=Math.min(this._levels.length-1,Math.max(0,i)));var a=this._levels[n].data;return(a[e].distanceTo-a[e].distanceFrom)*this._discreteSpacing},getPositionOfId:function t(e){var i=this._labelIds[e]||this._labelIds[e.split(";").reverse().slice(-1).reverse().join(";")];if(!i)return 0;var n=i.distanceFrom+.5*(i.distanceTo-i.distanceFrom)+this._innerOffset-this._unitsOffset;var a=n*this._discreteSpacing+this._alignmentOffset;return!this._isVertical&&this.yMirrorMode?this._plotSize-a:a},getWidthOfId:function t(e){var i=this._labelIds[e]||this._labelIds[e.split(";").reverse().slice(-1).reverse().join(";")];if(!i)return 0;return(i.distanceTo-i.distanceFrom)*this._discreteSpacing},getValueOfPosition:function t(e){var i;var n;var a;var r=this._levels[0].data;var o=r.length;var s;e=!this._isVertical&&this.yMirrorMode?this._plotSize-e:e;for(a=0;a<o;a+=1){s=r[a];i=(s.distanceFrom+this._innerOffset-this._unitsOffset)*this._discreteSpacing;n=i+(s.distanceTo-s.distanceFrom)*this._discreteSpacing;if(e>=i&&e<=n)return s.label}return""},_calculateDiscreteUnits:function t(e){this._discreteSpacing=Math.max(null!==this._minDiscreteUnitSize?this._minDiscreteUnitSize:0,e/this._numDiscrete);null!==this._maxDiscreteUnitSize&&(this._discreteSpacing=Math.min(this._maxDiscreteUnitSize,this._discreteSpacing));(1===this._numDiscrete||this._numDiscrete*this._discreteSpacing>e&&this._numDiscrete*this._discreteSpacing*this._shrinkToFitThreshold<e)&&(this._discreteSpacing=Math.min(this._discreteSpacing,e/this._numDiscrete));this._alignmentOffset=this._getAlignmentOffset(this._unitAlignment,e);this._numUnitsInView=Math.min(this._numDiscrete,Number((e/this._discreteSpacing).toFixed(5)))},_getAlignmentOffset:function t(e,i){var n=null!==this._maxDiscreteUnitSize&&this._discreteSpacing<i/this._numDiscrete?.5*(i-this._numDiscrete*this._discreteSpacing):0;if("near"===e)return 0;if("far"===e)return 2*n;return n}});e["a"]=g},bhQ1:function(t,e,i){"use strict";i.r(e);e["default"]='<div class="pp-nm-di qv-pp-sortable" ng-class="{ \'draggable\': isItemDraggable(item), \'dragged\': item.isDragged }">\n\n\t\x3c!-- Description --\x3e\n\t<div class="pp-nm-di__description" ng-if="showItemDescription(item)">\n\t\t{{getItemDescription(item)}}\n\t</div>\n\n\t\x3c!-- Header --\x3e\n\t<div class="pp-nm-di__header"\n\t\t ng-class="{\n\t\t\t \'expanded\': item.expanded,\n\t\t\t \'invalid\': item.isInvalid(),\n\t\t\t \'disabled\': item.disabled,\n\t\t\t \'draggable\': isItemDraggable(item) }"\n\t\t ng-style="item.style"\n\t\t ng-click="expandClicked($event, item)"\n\t\t qva-context-menu="openContextMenu($event, item)">\n\n\t\t\x3c!-- Change aggregation dropdown --\x3e\n\t\t<button class="lui-button pp-nm-di__header-aggregation"\n\t\t\t\tng-show="showChangeAggregation(item)"\n\t\t\t\tng-click="openChangeAggregationPopover($event, item)"\n\t\t\t\tng-class="{ \'lui-active\': isChangeAggregationPopoverOpen(item) }"\n\t\t\t\ttitle="{{item.currentAggregation}}">\n\t\t\t{{item.currentAggregation}}\n\t\t</button>\n\n\t\t\x3c!-- Header content --\x3e\n\t\t<div class="pp-nm-di__header-content">\n\n\t\t\t\x3c!-- Header title --\x3e\n\t\t\t<div class="pp-nm-di__header-title" title="{{getItemHeaderTitle(item)}}">\n\t\t\t\t{{getItemHeaderTitle(item)}}\n\t\t\t</div>\n\n\t\t\t\x3c!-- Header icons --\x3e\n\t\t\t<i ng-if="item.markerClass" ng-class="item.markerClass"></i>\n\t\t\t<i class="lui-icon pp-nm-di__header-toggle lui-icon--arrow-right" ng-class="{ \'expanded\': item.expanded }"></i>\n\t\t\t<i class="lui-icon lui-icon--draggable pp-nm-di__draggable qv-pp-sortable-handle" pp-di-draggable-hover q-title-translation="Common.Move"></i>\n\t\t</div>\n\t</div>\n\n\t\x3c!-- Content --\x3e\n\t<div class="pp-nm-di__content" ng-if="item.expanded">\n\n\t\t\x3c!-- Content body - Master or inline dimension / measure --\x3e\n\t\t<div class="pp-nm-di__content-body">\n\t\t\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="item.data" x-args="item.args"></div>\n\t\t</div>\n\n\t\t\x3c!-- Content footer - Remove button --\x3e\n\t\t<div class="pp-nm-di__content-footer">\n\t\t\t<div class="pp-string-component" ng-if="allowSaveLibrary(item)">\n\t\t\t\t<span class="label" q-translation="properties.masterItem"></span>\n\t\t\t</div>\n\t\t\t<button class="lui-button pp-nm-di__save-button" ng-if="allowSaveLibrary(item)" ng-click="saveLibraryItem(item)" tid="create-master-button">\n\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--link remove-icon" q-title-translation="properties.createMasterItem"></span>\n\t\t\t\t<span class="lui-button__text" q-translation="properties.createMasterItem"></span>\n\t\t\t</button>\n\t\t\t<button class="lui-button pp-nm-di__remove-button" ng-click="removeItem(item)">\n\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--bin remove-icon" q-title-translation="Common.Delete"></span>\n\t\t\t\t<span class="lui-button__text" q-translation="Common.Delete"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n'},cC1C:function(t,e,i){"use strict";i.r(e);var n=i("mXGw");var a=i.n(n);var r=i("xARA");var o=i("MGTR");var s=i("4nJ1");var l=i("2Hli");var c=i("GG1N");var u=i("uVcZ");var d=i("W0B4");var p=i.n(d);var f=i("jr/W");var h=i("mWu2");var v=i("6uJb");var g=i("UV1h");var m=i("l7Dq");var b=i("wIyQ");function y(t,e){return q(t)||w(t,e)||_(t,e)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(t,e){if(!t)return;if("string"===typeof t)return C(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return C(t,e)}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function w(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[];var n=true;var a=false;var r=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){i.push(s.value);if(e&&i.length===e)break}}catch(t){a=true;r=t}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw r}}return i}function q(t){if(Array.isArray(t))return t}var M;var S=function t(e){var i=e.data,r=e.def,s=e.saveSize,l=e.saveColor;var c=Object(n["useState"])(false),u=y(c,2),d=u[0],p=u[1];var x=Object(n["useState"])(null===i.size),_=y(x,2),C=_[0],w=_[1];var q=Object(n["useState"])(null===i.size?"":i.size),S=y(q,2),D=S[0],I=S[1];var k=Object(n["useState"])(i.color),L=y(k,2),T=L[0],E=L[1];var A=h["default"].getService("luiPopover");var P=g["a"].current().palettes.ui[0].colors;var O="".concat(r.ref,"-color-popover-button");var R=v["default"].get(r.translation||r.label);var V=function t(e){if(!(""===e.target.value&&C)){var i=Math.max(5,Math.min(300,Math.floor(e.target.value)));I(i);s(i);C&&w(false)}};Object(n["useEffect"])((function(){var t=function t(){if(M){M.close();M=void 0;p(false)}};b["a"].on("start",t);return function(){return b["a"].off("start",t)}}));Object(n["useEffect"])((function(){var t=function t(e){var i=e.size,n=e.color;w(null===i);I(null===i?"":i);E(n)};o["a"].subscribe(r.ref,t);return function(){return o["a"].unsubscribe(r.ref,t)}}));return a.a.createElement("div",{className:"pp-component pp-string-component pp-size-color-dropdown"},a.a.createElement("div",{className:"label",title:R},v["default"].get(R)),a.a.createElement("div",{className:"value"},a.a.createElement(f["h"],null,a.a.createElement(f["h"].Input,{type:"number",value:D,onChange:function t(e){I(e.target.value)},onKeyUp:function t(e){if("Enter"===e.key){V(e);e.target.blur()}},onFocus:function t(e){e.target.placeholder=""},onBlur:function t(e){V(e);e.target.placeholder=r.placeholder()},placeholder:r.placeholder()}),a.a.createElement(f["h"].Button,{id:O,onClick:function t(e){if(d)p(false);else{p(true);M=A.show({template:m["a"].popupComponent.template,controller:m["a"].popupComponent.controller,input:{$palette:P,$disableNone:true,$defaultColor:T.color||"none",$inputViewValue:T.color||"none",$extended:true,onColorChange:function t(e,i,n){var a={color:n,index:i};E(a);l(a)}},alignTo:e.target,closeOnEscape:true,closeOnOutside:true,variant:"inverse"});M.closing.then((function(t){t&&t.target.id!==O&&p(false)}))}},style:{background:g["a"].resolveColor(T,P)}}))))};S.propTypes={data:p.a.object.isRequired,def:p.a.object.isRequired,saveSize:p.a.func.isRequired,saveColor:p.a.func.isRequired};var D=S;var I={template:"<div></div>",controller:["$scope","$element",function t(e,i){var n=e.definition;var d="".concat(n.ref,".").concat(n.subRefs.size);var p="".concat(n.ref,".").concat(n.subRefs.color);var f={component:u["a"].findComponent(e.definition),definition:e.definition};c["a"].defineLabel(f,e.definition,(function(){return e.data}),e.args.handler);var h=s["a"].getValue(e.data,d,null);var v=s["a"].getValue(e.data,p,{});e.saveSize=function(t){l["a"].setValue(e.data,d,t);e.$emit("saveProperties")};e.saveColor=function(t){l["a"].setValue(e.data,p,t);e.$emit("saveProperties")};Object(r["render"])(a.a.createElement(D,{data:{size:h,color:v},def:n,saveSize:e.saveSize,saveColor:e.saveColor}),i[0]);e.$watch("data",(function(){h=s["a"].getValue(e.data,d,null);v=s["a"].getValue(e.data,p,{});o["a"].publish(n.ref,{size:h,color:v})}));e.$on("$destroy",(function(){Object(r["unmountComponentAtNode"])(i[0])}))}]};var k=e["default"]=I},d9Vk:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("2Hli");var r=i("ESef");var o='<div class="pp-component pp-string-component" ng-if="visible" tcl="string">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<div class="lui-input-group">\n\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" maxlength="{{maxlength}}" spellcheck="{{!isExpression()}}"\n\t\t\t\tng-class="{\'lui-invalid\': invalid, \'is-expression\': isLocked() }"\n\t\t\t\tpp-placeholder="placeholder"\n\t\t\t\tng-model="displayValue" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" qva-model-onkeyup\n\t\t\t\tpp-input-validator ng-readonly="isLocked()" ng-disabled="readOnly" ng-change="change()"\n\t\t\t\tpp-expression-editor="value" editor-disabled="!isLocked()" expression-type="{{definition.expressionType}}" tid="{{key}}" />\n\n\t\t\t<button class="lui-button  lui-input-group__item  lui-input-group__button" ng-show="!readOnly"\n\t\t\t\t\tpp-expression-editor="value" expression-type="{{definition.expressionType}}"\n\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression  edit-expression" ng-class="{\'active\': isExpression()}"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n</div>\n';function s(t){s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return s(t)}var l={template:o,controller:["$scope",function(t){var e=function e(){return t.data};t.definition.maxlength?t.maxlength=t.definition.maxlength:t.maxlength=r["a"].expression;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);n["a"].definePlaceholder(t,t.definition);Object.defineProperty(t,"displayValue",{get:function e(){var i=t.definition.expressionType;var n=t.value;switch(i){case"StringExpr":case"ValueExpr":n&&"object"===s(n)&&(n=n.qv);break;case"StringExpression":n&&"object"===s(n)&&(n=n.qStringExpression.qExpr);break;case"ValueExpression":n&&"object"===s(n)&&(n=n.qValueExpression.qExpr);break;default:break}return n},set:function e(i){var n=t.definition.expressionType;var a;switch(n){case"StringExpr":case"ValueExpr":a={qv:i};break;case"StringExpression":a={qStringExpression:{qExpr:i}};break;case"ValueExpression":a={qValueExpression:{qExpr:i}};break;default:a=i}t.value=a}});t.isExpression=function(){var e=t.definition.expressionType;var i=a["a"].getValue(t.data,t.definition.ref);if("StringExpr"===e)return i.qv&&"="===i.qv[0];if("dimension"===e)return 0===i.indexOf("=");return true};t.isLocked=function(){var e=t.value;var i=t.definition.expressionType;switch(i){case"StringExpr":case"ValueExpr":e&&"object"===s(e)&&(e=e.qv);break;case"StringExpression":e&&"object"===s(e)&&(e=e.qStringExpression.qExpr);break;case"ValueExpression":e&&"object"===s(e)&&(e=e.qValueExpression.qExpr);break;default:break}return e&&(-1!==e.indexOf("\n")||e.length>t.maxlength)}}]};var c=e["default"]=l},dFmT:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-string-component pp-tags-component" ng-if="visible" tcl="tags">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\t<div class="tagcloudContainer">\n\t\t<qv-tagcloud tags="value" on-change="change()"></qv-tagcloud>\n\t</div>\n</div>\n';var r=i("Bcg+");var o={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,e,t.args.handler);n["a"].defineValue(t,t.definition,e)}]};var s=e["default"]=o},dTxP:function(t,e,i){"use strict";var n=i("G3JA");function a(t,e){var i={};var n=[];var a=false;var r=-1!==e.indexOf(-1);e.forEach((function(t){i[t]?a=true:i[t]=true}));a=r?a||t.length+1!==Object.keys(i).length:a||t.length!==Object.keys(i).length;Object.keys(i).forEach((function(t){"-1"!==t&&n.push(parseInt(t,10))}));n=n.sort((function(t,e){return t-e}));for(var o=0;o<n.length;++o)a=a||n[o]!==o;return a}function r(t){var e=t.qDimensions;function i(){var i=[];for(var n=0;n<e.length;n++)i.push(n);var a=t.qMeasures.length>=2;a&&i.push(-1);return i}a(e,t.qInterColumnSortOrder)&&(t.qInterColumnSortOrder=i())}function o(t){return t&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1])}function s(t){r(t);var e=t.qDimensions;var i=t.qInterColumnSortOrder;var a=i.filter((function(t){return-1!==t}));function o(){for(var t=0;t<a.length;t++)if(-1!==a[t]&&a[t]!==t){var r=a[t];var o=a.indexOf(t);var s=a[o];n["a"].swap(a,t,o);n["a"].swap(e,t,o);n["a"].swap(i,i.indexOf(r),i.indexOf(s))}}o()}function l(t,e){if(!o(t.columnWidths))return;var i=t.columnWidths[1];var n=[];e.forEach((function(t){-1!==t&&n.push(i[t])}));n.forEach((function(t,e){i[e]=t}))}function c(t,e){var i=t.qDimensions;var n=t.qInterColumnSortOrder;var a=[];var r=e.indexOf(-1);e.forEach((function(t){-1!==t&&a.push(i[t])}));a.forEach((function(t,e){i[e]=t}));n.splice(0,n.length);for(var o=0;o<a.length;o++)n.push(o);r>-1&&n.splice(r,0,-1);l(t,e)}function u(t,e){var i=t.qMeasures;var n=[];e.forEach((function(t){n.push(i[t])}));i.splice(0,i.length);n.forEach((function(t){i.push(t)}))}function d(t,e,i,n){var a=n.qInterColumnSortOrder.slice();var r=n.qNoOfLeftDims;var o=a.indexOf(t)<=r-1;var s=a.indexOf(t);a.splice(s,1);var l=e.concat(i);var c=l.indexOf(t);var u;var d;var p=e[0]===t&&1===e.length;var f=i[0]===t&&1===i.length;if(p||f)u=r-(o?1:0);else if(c>0){d=l[c-1];u=a.indexOf(d)+1}else{d=l[0];u=Math.max(0,a.indexOf(d)-1)}a.splice(u,0,t);return a}function p(t,e,i,n){var a=i.qEffectiveInterColumnSortOrder;var r=i.qNoOfLeftDims;var o=n.qNoOfLeftDims;var s=a.indexOf(t)<=r-1;var l=-1!==e.indexOf(t);if(l&&!s)return o+1;if(!l&&s)return o-1;return o}e["a"]={validatePivotHyperCube:r,fixPivotHypercubeOrders:s,reorderPivotDimensions:c,reorderMeasures:u,isInvalidOrderArray:a,isValidColumnWidths:o,reorderColumnOrderDef:d,getNoLeftDimsDef:p}},dX5N:function(t,e,i){"use strict";i.r(e);var n=i("6uJb");var a=i("8IgQ");var r=i("2n0V");var o=i("GG1N");var s='<div \n    class="pp-component pp-chart-type-component"    \n    tcl="chart-type" \n    qva-activate="changeChartType()">\n\n    <div class="wrapper item-border item-interaction" ng-class="{ \'selected\': selected }"></div>\n    <div class="title" ng-class="{ \'bold\': selected }">{{title}}</div>\n</div>';var l=i("ftSa");var c=i("fca/");var u=i("jaci");var d={template:s,controller:["$scope","$element",function(t,e){var i;var s=e.find(".wrapper");var d=function e(){return t.data};o["a"].defineLabel(t,t.definition,d,t.args.handler);o["a"].defineCustom(t,t.definition,"app");o["a"].defineCustom(t,t.definition,"type");o["a"].defineCustom(t,t.definition,"properties");o["a"].defineCustom(t,t.definition,"currentType");o["a"].defineCustom(t,t.definition,"recommended");t.selected=t.type===t.currentType;a["a"].load().then((function(){t.title=n["default"].get(r["a"].getType(t.type).getLibraryInfo().translationKey)}));var p={isReadonly:true,isPopover:false,selectionsDisabled:true,interactionState:0,components:{miniChart:{show:false},xAxisTitle:{show:false},yAxisTitle:{show:false},scrollArea:{showFlag:0}},direction:u["a"].direction};t.changeChartType=function(){return t.args.model.getProperties().then((function(e){t.recommended?delete e.preferredChart:e.preferredChart=t.type;delete e.qUndoExclude.hashCode;t.args.model.setProperties(e)}))};function f(){i&&i.resize()}function h(t,e){return c["a"].createChart(t,e,false).then((function(t){i=new l["a"](e,t)}))}h(t.properties,t.app).then((function(){i.show(s,p)}));t.$on("ppAccordionNewPath",(function(){f()}));f()}]};var p=e["default"]=d},djNn:function(t,e,i){"use strict";var n=i("b5IE");var a=i("cQOM");var r=i("4nJ1");var o=n["a"].extend("Line",{init:function t(e,i,n,r){this._super();a["a"].apply(this,[e,i,n,r])},containsPoint:function t(){return false},intersectsLocalLine:a["a"].prototype.intersectsLine,intersectsLocalRect:a["a"].prototype.intersectsRect,getLocalPoints:a["a"].prototype.getPoints,getLocalBoundingRect:function t(){var e=Math.min(this.x1,this.x2);var i=Math.max(this.x1,this.x2);var n=Math.min(this.y1,this.y2);var a=Math.max(this.y1,this.y2);return{x:e,y:n,width:i-e,height:a-n}},set:function t(){a["a"].prototype.set.apply(this,[].slice.call(arguments));this.invalidateBounds()},getPartialFromRange:function t(e,i){if(i<this.x1||e>this.x2)return;var n=this.x2-this.x1;var a=this.y2-this.y1;var s=e<=this.x1?0:(e-this.x1)/n;var l=i>=this.x2?1:(i-this.x1)/n;var c=new o(this.x1+s*n,this.y1+s*a,this.x1+l*n,this.y1+l*a);c.data=r["a"].extend({},this.data);if(!Number.isNaN(+this.data.y1_)){var u=this.data.y2_-this.data.y1_;c.data.y1_=this.data.y1_+s*u;c.data.y2_=this.data.y1_+l*u}return c}});Object.keys(a["a"].prototype).forEach((function(t){!a["a"].prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","intersectsRect"].indexOf(t)<0&&(o.prototype[t]=a["a"].prototype[t])}));e["a"]=o},eLyq:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("mWu2");var l=i("uVcZ");var c=i("GG1N");var u=i("2sMT");var d=i("2Hli");var p=i("G1wx");var f=i("sWge");var h=i("cMY5");var v=i("X13V");var g=i("6uJb");var m=i("395F");var b=i("8H7g");var y=i("4Ox4");var x=i("4nJ1");var _=i("zBv7");var C=i("zr60");var w=i("bmRg");var q=i("U7Ny");var M=i("+Yuz");var S=i("acVu");var D={template:u["default"].template,controller:["$scope",function(t){var e=t.definition.items||{};t.items=Object.keys(e).filter((function(t){return e[t]})).map((function(t){var i=e[t];return{component:l["a"].findComponent(i),definition:i,key:t}}));t.$on("saveProperties",(function(e){e.stopPropagation();t.$broadcast("datachanged",t.data);t.args.model.setProperties(t.data)}));c["a"].defineVisible(t,t.args.handler);c["a"].defineReadOnly(t,t.args.handler)}]};var I={name:"filterpane-data",template:y["a"],controller:["$scope","$element","$timeout","luiPopover",function(t,e,i,n){var r=t.args.cache;var l="dimensions_";var c=null;var u;var y={items:t.definition.items||{},grouped:t.definition.grouped};var q=null;function I(e){if(c){c.close();c=null}e&&a()(e.target).hasClass("pp-toplist-add-button")&&o.a.preventGestures();t.adding=false}t.$on("layoutchanged",(function(t){t.preventDefault()}));t.$on("datachanged",(function(t){t.preventDefault()}));function k(t){return d["a"].getValue(t,"qListObjectDef.qDef.cId","")}function L(){u.items.forEach((function(t){t.expanded=false;r.put(l+t.cId,false)}))}function T(){i((function(){var t=e.find(".pp-nm-hcd__lists");var i=t.find(".pp-nm-hcd__list-items").children().last();i[0]&&(t[0].scrollTop=i[0].offsetTop-1)}),100)}function E(e){t.args.handler.setModel(t.args.model);t.args.handler.addFieldDimension(e.value,e.value).then((function(){I();T()}))}function A(e){t.args.handler.setModel(t.args.model);t.args.handler.addLibraryDimension(e.libraryId).then((function(){I();T()}))}t.expandClicked=function(t,e){if(e.disabled||a()(t.target).hasClass("pp-nm-di__draggable"))return;e.expanded=!e.expanded;r.put(l+k(e.data),e.expanded)};t.addClicked=function(e){if(t.adding){I();return}if(!t.addDisabled()){L();c=n.show({template:m["a"].template,controller:m["a"].controller,input:{app:t.args.app,position:"bottom",allowExpressionEditor:true,closeAddPopover:I,addFieldDimension:E,addLibraryDimension:A},alignTo:e.currentTarget,closeOnEscape:true,dock:"bottom"});c.closing.then((function(e){e&&!(e.target.classList.contains("lui-button")||e.target.classList.contains("pp-toplist-add-button")||e.target.classList.contains("lui-button__text"))&&(t.adding=false)}));c.closed.then((function(){c=null}));t.adding=true}};t.allowSaveLibrary=C["a"].allowSaveLibrary;function P(e){var i={};var n={};e.forEach((function(e){i[e]={};n[e]=t.args.app.getObject(e)}));return f["a"].all(n).then((function(t){var n={};var a={};Object.keys(t).forEach((function(e){var r=t[e];i[e].model=r;n[e]=r.getProperties();a[e]=r.getLayout()}));return f["a"].all(n).then((function(t){e.forEach((function(e){i[e].properties=x["a"].extend(true,{},t[e])}));return f["a"].all(a).then((function(t){e.forEach((function(e){i[e].layout=t[e]}));return i}))}))}))}function O(e){if(!e.qChildList)return;var i=e.qChildList.qItems.map((function(t){return t.qInfo.qId}));P(i).then((function(e){t.sortableItemLists.reset();i.forEach((function(i,n){var a=new h["a"]({app:t.args.app,dimensionDefinition:t.definition,dimensionProperties:{}});var o=e[i];var s=o.properties;var c=o.model;var d=o.layout.qListObject.qDimensionInfo;var p=k(s);a.setProperties(s);a.setLayout(o.layout);var f={title:function t(){if(d.qError&&!_["a"].isCalcCondNotCalculatedErr(d.qError))return v["a"].getDimensionError(d.qError.qErrorCode);return o.layout.title||d.qFallbackTitle||""},isInvalid:function t(){return!!d.qError&&!_["a"].isCalcCondNotCalculatedErr(d.qError)},data:s,id:i,cId:p,index:n,component:D,definition:y,templateSrc:"pp-data-item.ng.html",markerClass:"pp-dimension",args:{handler:a,cache:r,localeInfo:t.args.localeInfo,app:t.args.app,properties:s,model:c},expanded:r.get(l+p)||false,sortable:false!==t.definition.allowMove};u.addSortableItem(f)}))}))}t.saveLibraryItem=function(e){var i=e.data.qListObjectDef.qDef;var n=false;var a=function i(a,r){if(!n){e.args.properties.qListObjectDef.qLibraryId=a.id;e.args.properties.qListObjectDef.qDef.qFieldDefs=[];e.args.properties.title=r.qLabelExpression?{qStringExpression:{qExpr:r.qLabelExpression}}:r.title;e.args.model.setProperties(e.args.properties).then((function(){O(t.args.layout)}));n=true}};C["a"].saveDimensionAsLibrary(i,a,e.data.title)};t.getAddLabel=function(){return g["default"].get("properties.dimensions.add")};t.duplicateItem=function(e){t.args.handler.setModel(t.args.model);var i=x["a"].extend(true,{},e.data);if(e.data.qListObjectDef.qLibraryId)return t.args.handler.addLibraryDimension(i.qListObjectDef.qLibraryId).then((function(){L();t.$emit("saveProperties")}));var n=i.qListObjectDef.qDef.qFieldDefs[0];return t.args.handler.addFieldDimension(n,n).then((function(){L();t.$emit("saveProperties")}))};t.removeItem=function(e){t.args.handler.setModel(t.args.model);t.args.handler.removeDimension(e.index)};t.addDisabled=function(){return!t.args.handler.canAddDimension()};t.openGlobalContextMenu=function(e){var i=s["default"].getService("qvContextMenu").menu();var n=t;var a="copiedItem";var r=w["a"].get(a);Object(S["b"])("COPY_PASTE_MEASURE")&&"dimension"===r.type&&i.addItem({translation:"Common.Paste",tid:"paste",select:function t(){M["a"].pasteItem(L,n)}});q=s["default"].getService("qvContextMenu").show(i,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.openContextMenu=function(e,i){e.stopPropagation();var n=s["default"].getService("qvContextMenu").menu();Object(S["b"])("DUPLICATE")&&n.addItem({translation:"Common.Duplicate",tid:"duplicate",select:function e(){t.duplicateItem(i)}});n.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i)}});q=s["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.$on("layoutchanged",(function(t,e){O(e)}));O(t.args.layout);t.sortableItemLists=b["a"].create({options:{direction:"vertical",listKey:"list",scrollSelector:".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",preventClickDefault:false,gesture:{name:"swipe",options:{radiusThreshold:p["a"].treatAsDesktop()?4:0,preventDefault:false}}},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function t(e){this._super.apply(this,arguments);e.isDragged=true;L()},onMove:function e(){var i=this._super.apply(this,arguments);if(i){var n=u.get().filter((function(t){return"empty-item"!==t.id})).map((function(t){return t.id}));t.args.model.setChildArrayOrder(n)}return i},onCancel:function t(e){this._super.apply(this,arguments);e&&(e.isDragged=false)},onEnd:function e(i){i&&(i.isDragged=false);t.$apply()}});u=t.sortableItemLists.createList(1,{title:g["default"].get("Common.Dimensions"),tid:"dimensions",getAddLabel:function t(){return g["default"].get("properties.dimensions.add")},addClicked:t.addClicked});t.$on("pp-open-path",(function(t,e){var i=e.split(".");var n=i[0];var a=i[1];if("dimensions"===n&&a){r.put(l+a,true);T()}}));t.isItemDraggable=function(e){if(!e.sortable)return false;var i=t.args.layout.qChildList;if(!i)return false;var n=i.qItems.length;return n>1};t.getItemHeaderTitle=function(t){return t.title()};function R(e){var i=t.sortableItemLists.getList(e);var n=t.getUndraggedItems(i);var a=n.indexOf(e);return a}t.showItemDescription=function(t){if(t.isDragged)return false;var e=R(t);return 0===e};t.getItemDescription=function(e){var i=R(e);var n=t.args.ext.data.dimensions.description(t.args.properties,i);return n};t.showNextPossibleItem=function(e){var i=t.getUndraggedItems(e);var n=t.args.ext.data.dimensions.max;var a=n-i.length;return a>0};t.showNextPossibleItemDescription=function(e){var i=t.getUndraggedItems(e);return 0===i.length};t.getNextPossibleItemDescription=function(){return t.args.ext.data.dimensions.description(t.args.properties,0)};t.getUndraggedItems=function(t){return t.get((function(t){return!t.isDragged}))};t.$on("$destroy",(function(){I();q&&q.close()}))}]};e["default"]=I},edM1:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("uVcZ");var l=i("2Hli");var c=i("gF9a");var u=i("wIyQ");var d='<div class="pp-component pp-list-component pp-toplist" tcl="measures">\n\t<button class="lui-button  lui-button--block  pp-toplist-add-button" ng-class="{\'lui-active\': adding}" qva-activate="addClicked($event)" qv-enter="addClicked($event)"\n\t\t\tng-disabled="addDisabled() || !definition.allowAdd" q-translation="{{definition.addTranslation}}" tid="add-measure"></button>\n\n\t<ul class="pp-expandable-list pp-toplist-content pp-measure-list" pp-sortable="sortableOptions">\n\t\t<li ng-repeat="item in items track by item.id" ng-class="{ \'locked\': item.locked || !definition.allowMove }" class="expandable-list-item">\n\t\t\t<div class="pp-expandable-list-header pp-measure pp-sublist-header" qva-activate="itemClicked( $event, item )" qva-longtapdrag="enableTouchDrag()"\n\t\t\t\t ng-class="{ \'expanded\': item.expanded && !item.disabled, \'disabled\': item.disabled, \'invalid\': isInvalid( $index ) }" pp-sortable-handle>\n\t\t\t\t<span class="toggle-expand  lui-icon  {{ item.expanded && !item.disabled ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }}"></span>\n\t\t\t\t<span class="text" title="{{item.title()}}">{{item.title()}}</span>\n\t\t\t\t<span class="icon icon-trash pp-delete-property" ng-if="definition.allowRemove" q-title-translation="Common.Delete"></span>\n\t\t\t</div>\n\t\t\t<div class="pp-expandable-list-content" ng-if="item.expanded && !item.disabled">\n\t\t\t\t<div include-pp-component x-component="listItemComponent" x-definition="listItemDefinition" x-data="item.data" x-args="args"></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>\n';var p=i("OnHE");var f=i("9Bsw");var h={template:d,controller:["$scope","$element","$timeout","luiPopover",function(t,e,i,n){var r=t.args.cache;var d="measures_";var h=p["a"].create();var v=f["a"].create();t.listItemComponent=s["a"].getComponent("items");t.listItemDefinition={items:t.definition.items||{},grouped:t.definition.grouped};function g(){var e=t.definition;h.resetTitles();v.resetTitles();var i=l["a"].getValue(t.data,t.definition.ref,[]);var n=i.map((function(i,n){var a=i.qDef.cId;var o=t.args.handler.getMeasureLayout(a);var l=h.getCachedMeasureTitle(o);h.getMeasureTitle(o,i,true,t.args.app).then((function(t){l=t}));return{title:function t(){return l},component:s["a"].getComponent("items"),definition:e,data:i,id:a,index:n,expanded:r.get(d+a)||false,disabled:false}}));var a=l["a"].getValue(t.data,t.definition.disabledRef,[]);var o=a.map((function(n,a){var o=n.qDef.cId;var l;v.getMeasureTitle(n,t.args.app,true).then((function(t){l=t}));return{title:function t(){return l},component:s["a"].getComponent("items"),definition:e,data:n,id:o,index:i.length+a,expanded:r.get(d+o)||false,disabled:true}}));t.items=n.concat(o)}t.$watchCollection("data.".concat(t.definition.ref),(function(){g()}));t.$watchCollection("data.".concat(t.definition.disabledRef),(function(){g()}));t.isInvalid=function(e){var i=t.args.handler.getMeasureLayouts()[e];return i&&!!i.qError};t.itemClicked=function(e,i){if(a()(e.target).hasClass("pp-delete-property")){i.index=i.disabled?i.index-t.args.handler.hcProperties.qMeasures.length:i.index;t.args.handler.removeMeasure(i.index,i.disabled).then((function(){t.$emit("saveProperties")}))}else{var n=r.get(d+i.data.qDef.cId)||false;if(!i.disabled){i.expanded=!n;r.put(d+i.data.qDef.cId,!n)}}};t.addDisabled=function(){return t.args.handler.getMeasures().length>=t.args.handler.maxMeasures()};var m=null;t.addClicked=function(e){var i;if(t.adding){b();return}if(!t.addDisabled()&&!t.adding){m=n.show({template:c["a"].template,controller:c["a"].controller,alignTo:e.currentTarget,input:{app:t.args.app,closeAddPopover:b,addLibraryMeasure:x,addExpressionMeasure:_},position:"bottom",closeOnEscape:true});t.adding=true}m.closing.then((function(e){e&&!a()(e.target).hasClass("pp-toplist-add-button")&&(t.adding=false);i=e}));m.closed.then((function(){i||(t.adding=false);m=null}))};function b(e){if(m){m.close();m=null}e&&a()(e.target).hasClass("pp-toplist-add-button")&&o.a.preventGestures();t.adding=false}function y(){i((function(){var t=e.find(".pp-toplist-content");var i=t.children().last();t[0].scrollTop=i[0].offsetTop-1}),100)}function x(e){t.args.handler.addLibraryMeasure(e.libraryId).then((function(e){r.put(d+e.qDef.cId,true);t.$emit("saveProperties");b();y()}))}function _(e){t.args.handler.addExpressionMeasure(e.value,"").then((function(e){r.put(d+e.qDef.cId,true);t.$emit("saveProperties");b();y()}))}t.sortableOptions={disabled:!t.definition.allowMove,onMove:function e(i,n){t.args.handler.moveMeasure(i,n).then((function(){t.$emit("saveProperties")}))}};u["a"].on("start",b);t.$on("$destroy",(function(){u["a"].off("start",b)}))}]};var v=e["default"]=h},ekjZ:function(t,e,i){"use strict";i.r(e);e["default"]='<div class="pp-data-empty-hint">\n\t<span q-translation="Common.NoData"></span>\n</div>'},fOjz:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-string-component" ng-if="visible" tcl="string">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<input type="text" class="lui-input" maxlength="{{definition.maxlength || 255}}" tid="{{key}}" spellcheck="false"\n\t\t\t   ng-model="value" ng-class="{ \'qui-invalid\': invalid }" ng-disabled="readOnly" ng-change="change()"\n\t\t\t   ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" qva-model-onkeyup pp-input-validator/>\n\n\t</div>\n</div>\n<div class="pp-component pp-number-formatter-component">\n\t<div class="label">{{example_title}}</div>\n\t<div class="value">{{example}}</div>\n</div>\n<button class="lui-button pp-add-property" qva-activate="reset()" qv-enter="reset()" ng-disabled="isDefaultFormat || resetting"\n        ng-show="showReset" q-translation="{{definition.resetTranslation}}"></button>\n';var r=i("6uJb");var o=i("2UuD");var s=i("FMzN");var l=i("Vrq/");var c=i("2Hli");var u;var d;var p;var f;var h=1000.12;var v=new Date(2014,1,17,15,30,40);var g=1.0453718171296298;function m(t,e){var i;var n;var a;var r;switch(t.qType){case"D":case"T":case"TS":r=u;i=v;break;case"IV":r=d;i=g;break;case"M":r=p;i=h;break;case"R":a=t.qDec||".";n=t.qThou;default:r=f;i=h;break}return r.format(i,"undefined"!==typeof e?e:t.qFmt,n,a)}function b(t,e,i){var n=c["a"].getValue(e,"".concat(t,"qNumFormat"));c["a"].setValue(e,"".concat(t,"qNumFormat.qFmt"),l["a"].getDefaultNumericFormat(n,i))}function y(t,e,i,n){var a=c["a"].getValue(i,"".concat(t,"qNumFormat"));return e===l["a"].getDefaultNumericFormat(a,n)}var x={template:a,controller:["$scope",function(t){var e=function e(){return t.data};var i=t.args.localeInfo;var a=void 0!==t.definition.numFormatRef?t.definition.numFormatRef:"qDef";a=a.length>0?"".concat(a,"."):a;u=new s["a"](i,"","","","D");d=new s["a"](i,"","","","IV");p=new o["a"](i,"","","","M");f=new o["a"](i,"","","","F");n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);p.thousandDelimiter=t.args.localeInfo.qMoneyThousandSep||"";p.decimalDelimiter=t.args.localeInfo.qMoneyDecimalSep||".";d.pattern=t.args.localeInfo.qTimeFmt;f.thousandDelimiter=t.args.localeInfo.qThousandSep||"";f.decimalDelimiter=t.args.localeInfo.qDecimalSep||".";t.onkeyup=function(e){t.$apply((function(){t.example=m(c["a"].getValue(t.data,"".concat(a,"qNumFormat")),l["a"].getNormalizedFormat(c["a"].getValue(t.data,"".concat(a,"qNumFormat")),e[0].value))}))};t.example_title=r["default"].get("properties.numberFormatting.example");function h(){t.example=m(c["a"].getValue(t.data,"".concat(a,"qNumFormat")));t.resetting=false;t.isDefaultFormat=y(a,c["a"].getValue(t.data,"".concat(a,"qNumFormat.qFmt")),t.data,t.args.localeInfo);t.showReset="R"===c["a"].getValue(t.data,"".concat(a,"qNumFormat.qType"))}t.reset=function(){if(!t.resetting){b(a,t.data,t.args.localeInfo);t.resetting=true;t.$emit("saveProperties")}};t.$watch("data",(function(){h()}));t.$on("datachanged",(function(){h()}));h()}]};var _=e["default"]=x},fUuM:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("ESef");var r='<div class="pp-component pp-string-component" ng-if="visible" tcl="string">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<div ng-class="{ \'lui-input-group\': isExpressionDefinition }">\n\t\t\t<input type="text" maxlength="{{maxlength}}" spellcheck="{{!isExpression()}}" class="lui-input" ng-class="{\n\t\t\t\t\t\'lui-invalid\': invalid,\n\t\t\t\t\t\'lui-input-group__item\': isExpressionDefinition,\n\t\t\t\t\t\'lui-input-group__input\': isExpressionDefinition,\n\t\t\t\t\t\'is-expression\': isLocked()\n\t\t\t\t}"\n\t\t\t   ng-model="displayValue" pp-placeholder="placeholder" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }"\n\t\t\t   qva-model-onkeyup pp-input-validator ng-readonly="isLocked()" ng-disabled="readOnly" ng-change="change()"\n\t\t\t   pp-expression-editor="value" editor-disabled="!isLocked()" expression-type="{{expressionType}}" tid="{{key}}" />\n\n\t\t\t<button class="lui-input-group__item  lui-input-group__button  lui-button" ng-show="isExpressionDefinition && !readOnly"\n\t\t\t\t\tpp-expression-editor="value" expression-type="{{expressionType}}"\n\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression edit-expression" ng-class="{\'active\': isExpression()}"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n</div>\n';var o={template:r,controller:["$scope",function(t){var e=function e(){return t.data};t.definition.maxlength?t.maxlength=t.definition.maxlength:t.maxlength=a["a"].name;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);n["a"].defineExpression(t,false,true);n["a"].definePlaceholder(t,t.definition)}]};var s=e["default"]=o},fcHB:function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("ngrb");var r=i("2Hli");var o='<div style="position:relative; height: 100%;" tcl="sorting">\n\t<div ng-if="show()" include-pp-component x-component="item.component" x-definition="item.definition" x-data="item.data" x-args="item.args"></div>\n</div>';var s={template:o,controller:["$scope",function(t){function e(){var e=t.definition.ref;if(e)return r["a"].getValue(t.data,e);return t.data}t.show=function(){var t=e();return!t.qDef.autoSort};var i={};Object.keys(t.definition.sortingItems).forEach((function(n){if(t.definition.sortingItems[n]){var r=a["a"][n];var o=r(null,(function(){return e().qDef.qReverseSort}));i[n]=o}}));i.defaultSortMessage={component:"text",translation:"properties.sorting.defaultSortingMessage",show:function t(e){return!(i.ascii&&e.qSortByAscii||i.numeric&&e.qSortByNumeric)}};t.item={component:n["a"].getComponent("items"),definition:{type:"items",grouped:true,items:i},args:t.args};function o(){var i=e();t.item.data=i.qSortBy||{}}t.$on("datachanged",(function(){o()}));t.$watch("data",(function(){o()}))}]};var l=e["default"]=s},fcQb:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("mWu2");var o=i("4nJ1");var s=i("sWge");var l=i("q6LT");var c=l["a"].extend("FieldApi",{init:function t(e){this._super(e,"/dimensions");this.cacheCube.setMethodName("getListObjectData")},updateCache:function t(){},getProperties:function t(){return this.model.getProperties()},getData:function t(e){return this.cacheCube.getData(e)},getSize:function t(){return this.model.layout.qListObject.qSize},isLocked:function t(){return this.model.layout.qListObject.qDimensionInfo.qLocked}});var u=c;var d={FREQUENCY_NONE:"N",FREQUENCY_VALUE:"V",FREQUENCY_PERCENT:"P",FREQUENCY_RELATIVE:"R"};var p=d;var f=i("acVu");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),true).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}var m={textAlignAuto:{ref:"qListObjectDef.qDef.textAlign.auto",type:"boolean",component:"switch",show:Object(f["b"])("LISTBOX_ALIGN"),translation:"Common.Text.TextAlignment",change:function t(e){o["a"].setDefaultValue(e,"qDef.textAlign.align","left")},options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],defaultValue:true},textAlign:{ref:"qListObjectDef.qDef.textAlign.align",type:"string",component:"item-selection-list",horizontal:true,items:[{component:"icon-item",icon:"align_left",labelPlacement:"bottom",value:"left",translation:"properties.dock.left"},{component:"icon-item",icon:"align_center",labelPlacement:"bottom",value:"center",translation:"Common.Center"},{component:"icon-item",icon:"align_right",labelPlacement:"bottom",value:"right",translation:"properties.dock.right"}],defaultValue:"left",show:function t(e){return!o["a"].getValue(e,"qListObjectDef.qDef.textAlign.auto",true)}}};var b={qSortByState:1,qSortByAscii:1,qSortByNumeric:1,qSortByLoadOrder:1};var y={uses:"settings",items:{general:{items:{showTitles:{defaultValue:false}}}}};var x={type:"array",component:"filterpane-data",translation:"Common.Data",allowAdd:true,allowRemove:true,allowMove:true,addTranslation:"properties.dimensions.add",grouped:false,ref:"qChildListDef",items:v({libraryId:{type:"string",component:"library-item",libraryItemType:"dimension",ref:"qListObjectDef.qLibraryId",translation:"Common.Dimension",show:function t(e){return e.qListObjectDef.qLibraryId}},field:{type:"string",component:"expression",expressionType:"dimension",ref:"qListObjectDef.qDef.qFieldDefs.0",translation:"Common.Field",show:function t(e){return!e.qListObjectDef.qLibraryId},change:function t(e){var i=e.qListObjectDef.qDef;i.qFieldLabels||(i.qFieldLabels=[]);i.qFieldLabels[0]=i.qFieldDefs[0]}},title:{ref:"title",type:"string",expression:"optional",translation:"Common.Title"},frequencyCountMode:{ref:"qListObjectDef.qFrequencyMode",type:"string",component:"dropdown",show:function t(){return Object(f["b"])("LIST_BOX_FREQUENCY_COUNT")},translation:"properties.frequencyCountMode",change:function t(e){e.qListObjectDef.frequencyEnabled=e.qListObjectDef.qFrequencyMode!==p.FREQUENCY_NONE},options:[{value:p.FREQUENCY_NONE,translation:"properties.frequencyCountNone"},{value:p.FREQUENCY_VALUE,translation:"properties.frequencyCountAsValue"},{value:p.FREQUENCY_PERCENT,translation:"properties.frequencyCountAsPercent"}]},autoSort:{ref:"qListObjectDef.qDef.autoSort",type:"boolean",defaultValue:true,show:false},cId:{ref:"qListObjectDef.qDef.cId",type:"string",show:false}},m)};var _={type:"items",component:"filterpane-sorting",translation:"properties.sorting",allowMove:true,schemaIgnore:true,items:{autoSort:{ref:"qListObjectDef.qDef.autoSort",type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],change:function t(e){if(e.qListObjectDef.qDef.autoSort){var i=e.qListObjectDef;for(var n=0;n<i.qDef.qSortCriterias.length;n++)i.qDef.qSortCriterias[n]=b}}},dimension:{component:"sorting-dimension",ref:"qListObjectDef",show:function t(e){return!e.qListObjectDef.qDef.autoSort},sortingItems:{state:true,expression:true,frequency:true,numeric:true,ascii:true}}}};var C={type:"items",component:"accordion",items:{data:x,sorting:_,settings:y}};var w=i("h2z3");var q=i("KvOU");var M=i("oxue");var S=i("2n0V");function D(t){D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return D(t)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function L(t,e,i){e&&k(t.prototype,e);i&&k(t,i);return t}function T(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&E(t,e)}function E(t,e){E=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return E(t,e)}function A(t){var e=R();return function i(){var n=V(t),a;if(e){var r=V(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return P(this,a)}}function P(t,e){if(e&&("object"===D(e)||"function"===typeof e))return e;return O(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function V(t){V=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return V(t)}var N=1e3;var z=function(t){T(i,t);var e=A(i);function i(t){var n;I(this,i);n=e.call(this,t);n.dimensionLayout=[];n.dimensions=[];return n}L(i,[{key:"autoSortDimension",value:function t(e){if(e.qLibraryId)return this.app.getDimensionList().then((function(t){var i=M["a"].findLibraryDimension(e.qLibraryId,t);var n=i?i.qData.info:void 0;q["a"].autoSortDimension(e,n);return e}));return this.app.getFieldList().then((function(t){var i=M["a"].findField(e.qDef.qFieldDefs[0],t);var n=i?[i]:void 0;q["a"].autoSortDimension(e,n);return e}))}},{key:"getDimensions",value:function t(){return this.dimensions||[]}},{key:"minDimensions",value:function t(){return 1}},{key:"maxDimensions",value:function t(){return 1e3}},{key:"setModel",value:function t(e){this.model=e}},{key:"addDimension",value:function t(e){var i=this;var n;var a;e.qDef.cId=o["a"].generateId();e.qShowAlternatives=true;if(this.getDimensions().length<N){n=S["a"].getType("listbox");a=n.getInitialProperties({});return a.then((function(t){return i.autoSortDimension(e).then((function(){t.qListObjectDef=e;if(e.qLibraryId)return i.app.getDimension(e.qLibraryId).then((function(e){return e.getProperties().then((function(e){e.qDim.qLabelExpression?t.title={qStringExpression:{qExpr:e.qDim.qLabelExpression}}:t.title=e.qDim.title;return i.model.createChild(t,i.properties).then((function(){return t.qListObjectDef}))}))}));t.title=e.qDef.title||e.qDef.qFieldLabels[0]||e.qDef.qFieldDefs[0];return i.model.createChild(t,i.properties).then((function(){return t.qListObjectDef}))}))}))}return}},{key:"removeDimension",value:function t(e){var i=this.layout.qChildList.qItems[e];return this.model.destroyChild(i.qInfo.qId,this.properties).then((function(){return i}))}},{key:"getDimensionLayouts",value:function t(){return this.dimensionLayout||[]}},{key:"getDimensionLayout",value:function t(e){var i=this.getDimensionLayouts();if(i[e])return i[e].qListObject.qDimensionInfo;return""}}]);return i}(w["a"]);var F=z;var j=i("/5Yl");var H='<qv-filterpane\n\t\tclass="qv-filterpane"\n\t\tqv-collapsed-listbox-delegated-open\n\t\toutside-ignore-name="outsideIgnoreName"\n\t\tinteractive="interactive"\n\t\tqva-direction x-dir-setting="{{options.direction}}"\n\t\tng-class="{\'qv-filterpane-scrollable\': !hasExpanded && !options.zoomEnabled}"\n\t\tng-keydown="handleKeyDown($event)"\n\t\trole="list">\n\t<div ng-repeat="column in columns"\n\t\t class="qv-filterpane-column"\n\t\t ng-class="{ \'qv-fullscreen-hidden\': !hasFocus() && $last && column.showAll && !object.expanded }"\n\t\t role="presentation">\n\t\t<div ng-repeat="item in column.items"\n\t\t\t ng-class="{\'qv-filterpane-collapsed\': !item.expand, \'qv-filterpane-expanded\': item.expand}"\n\t\t\t ng-style="{height: item.height}"\n\t\t\t tid="qv-object-filterpane.dimension"\n\t\t\t qv-focusable-filterpane-item="{ type: \'item\' }"\n\t\t\t tabindex="-1"\n\t\t\t role="listitem">\n\t\t\t<qv-object ng-if="item.expand" model="item.model" options="item.options" object="item.object" ng-click="clickToFocusInListbox(item)"></qv-object>\n\t\t\t<qv-collapsed-listbox ng-if="!item.expand" model="item.model" read-direction="options.direction" outside-ignore-name="outsideIgnoreName" responsive-mode="item.responsiveMode" interactive="interactive"></qv-collapsed-listbox>\n\t\t</div>\n\n\t\t<div ng-if="column.showAll && object.expanded"\n\t\t\tclass="qv-filterpane-collapsed qv-filterpane-showall"\n\t\t\tqv-focusable-filterpane-item="{ type: \'fullscreen\' }"\n\t\t\ttabindex="-1"\n\t\t\trole="listitem"\n\t\t>\n\t\t\t<span class="lui-icon lui-icon--more" aria-hidden="true"></span>\n\t\t\t<div class="presentation" q-title-translation="Tooltip.Filterpane.NotAllItemsShow"></div>\n\t\t</div>\n\n\t\t<div ng-if="column.showAll && !object.expanded"\n\t\t\t class="qv-filterpane-collapsed qv-filterpane-fullscreen"\n\t\t\t qv-focusable-filterpane-item="{ type: \'fullscreen\' }"\n\t\t\t aria-label="{{fullscreenButtonLabel}}"\n\t\t\t tabindex="-1"\n\t\t\t role="listitem">\n\t\t\t<button class="lui-button"\n\t\t\t\tng-class="{ \'lui-disabled\': !object.inAnalysisState() }"\n\t\t\t\tng-click="triggerFullScreen()"\n\t\t\t\tq-title-translation="Tooltip.Filterpane.ClickForFullScreen"\n\t\t\t\ttabindex="-1"\n\t\t\t>\n\t\t\t\t<span class="lui-icon lui-icon--more lui-button__icon" aria-hidden="true"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</qv-filterpane>\n';var $=i("7w0t");var B=i("6eTc");var W=i("4zDG");var G=i("6uJb");var U=i("g1uV");var Y={init:function t(e,i){var n=e.columns;var a=0===n[0].itemCount;var r=i?i.colIdx:0;var o=i?i.rowIdx:0;e.focus={item:a?n[0].fullscreen:n[r].items[o],isFullscreenBtn:a,focusInListbox:false}},updateFocus:function t(e,i){var n=e.columns;var a=n[n.length-1];var r=e.focus;if(a.showAll)if(a.fullscreen){a.fullscreen.colIdx=n.length-1;a.fullscreen.rowIdx=a.itemCount}else a.fullscreen={colIdx:n.length-1,rowIdx:a.itemCount,id:"fullscreen"};else a.fullscreen=null;if(r&&!r.focusInListbox&&i){this.setFocusById(e,i);e.hasFocus()&&r.item&&r.item.focus&&r.item.focus()}},setFocusById:function t(e,i){var n=e.focus;var a=e.columns;for(var r=0;r<a.length;++r){var o=a[r].items;for(var s=0;s<o.length;++s)if(o[s].id===i){n.item=a[r].items[s];return}}var l=a[a.length-1];if(l.showAll){n.item=l.fullscreen;n.forceFocus=e.hasFocus();n.isFullscreenBtn=true}else{n.item=l.items[l.itemCount-1];n.isFullscreenBtn=false}},handleNavigation:function t(e,i){var n=e.focus;var a=n.item.rowIdx;var r=n.item.colIdx;var o=e.columns;var s=o.length-1;var l=n.isFullscreenBtn?a-1:o[r].itemCount-1;var c=!o[s].itemCount;var u=o[s].fullscreen;switch(i){case U["a"].ARROW_UP:if(a>0){a-=1;n.isFullscreenBtn=false}else if(0===a&&r>0){r-=1;a=o[r].itemCount-1;n.isFullscreenBtn=false}break;case U["a"].ARROW_DOWN:if(a<l)a+=1;else if(a===l)if(u&&r===s)n.isFullscreenBtn=true;else if(r<s){r+=1;a=0;n.isFullscreenBtn=r===s&&c}break;case U["a"].ARROW_RIGHT:if(r<s){r+=1;a=0;n.isFullscreenBtn=r===s&&c}break;case U["a"].ARROW_LEFT:if(r>0){r-=1;a=0;n.isFullscreenBtn=false}break;default:break}n.item=n.isFullscreenBtn?u:o[r].items[a];n.item.focus()}};var J=i("NFdj");var K=i.n(J);var Z=i("B52N");var Q=i("2Hli");var X=34;var tt=28;var et=10;var it=89;var nt=160;var at=20;var rt=47;var ot=30;var st={getMaxColumns:function t(e){return Z["default"].isSmallDevice?1:Math.floor((e.width+at)/(nt+at))||1},getMaxItemsPerColumn:function t(e){return Math.max(1,Math.floor((e.height+et)/(X+et)))},getDimensionCount:function t(e){return e.qChildList.qItems.length},getColumnItemsCount:function t(e){var i=0;e.forEach((function(t){i+=t.itemCount}));return i},getHeightOf:function t(e){var i=(X+et)*e-et;return Math.max(i,0)},getDimensionCardinal:function t(e){var i=Q["a"].getValue(e,"model.layout.qListObject.qDimensionInfo.qStateCounts",void 0);if(!i)return;return Object.keys(i).reduce((function(t,e){return t+i[e]}),0)},getHeightOfExpanded:function t(e){var i=e*ot+rt+3;return i},doesAllFit:function t(e,i,n){return n<=e*i},haveRoomToExpandOne:function t(e,i){var n=i.itemCount>1?et:0;return!Z["default"].isSmallDevice&&e.height>this.getHeightOf(i.itemCount-1)+it+n},getSize:function t(e,i){return{width:e.innerWidth()-1,height:e.innerHeight(),dimensionCount:this.getDimensionCount(i)}},sizeChanged:function t(e,i){return!K.a.equals(e,i)},calculateColumns:function t(e,i,n){var a=!Z["default"].isSmallDevice&&e.height>it;var r=this.getMaxColumns(e);var o=this.getMaxItemsPerColumn(e);var s=this.getColumnItemsCount(i);if(a&&this.doesAllFit(o,r-i.length-1,e.dimensionCount-s-1)){i.push({expand:true,itemCount:1});s+1<e.dimensionCount&&this.calculateColumns(e,i,n)}else{var l;l=Math.min(e.dimensionCount-s,o);if(Z["default"].isSmallDevice)l=e.dimensionCount-s;else if(!n){l=Math.ceil((e.dimensionCount-s)/(r-i.length));l=Math.min(o,l);l=Math.min(e.dimensionCount-s,l)}i.push({expand:false,itemCount:l});if(i.length>=r&&o>0&&this.getColumnItemsCount(i)<e.dimensionCount){i[i.length-1].showAll=true;tt+et>e.height-this.getHeightOf(o)&&(i[i.length-1].itemCount=Math.max(i[i.length-1].itemCount-1,0))}this.getColumnItemsCount(i)<e.dimensionCount&&i.length<r&&this.calculateColumns(e,i,n)}},balanceColumns:function t(e,i){var n;var a=i.filter((function(t){return t.expand}));var r=i.filter((function(t){return false===t.expand}));if(r.length>0&&!r[r.length-1].showAll&&this.haveRoomToExpandOne(e,r[r.length-1]))r[r.length-1].expand=true;else{n=this.getColumnItemsCount(r);r.forEach((function(t,e){var i=e<n%r.length?1:0;var a=Math.floor(n/r.length)+i;t.itemCount=a}),this)}return r.concat(a)},getDimensions:function t(e){return e.qChildList.qItems.map((function(t){return{id:t.qInfo.qId,expand:false,height:void 0,responsiveMode:"full"}}))},sortDimensions:function t(e,i){var n=e.qChildList.qItems.map((function(t){return t.qInfo.qId}));return n.map((function(t){return i.filter((function(e){return e.id===t}))[0]}))},isValid:function t(e){return!!e&&!!e.qChildList&&!!e.qChildList.qItems&&this.getDimensionCount(e)>0},mergeColumnsAndDimensions:function t(e,i){e.forEach((function(t){t.items=i.slice(0,t.itemCount);i=i.slice(t.itemCount)}),this);return e},reSizeArray:function t(e,i,n,a){while(e.length>i)e.pop();while(e.length<i)e.push(n.extend(true,{},a))},dimensionsEqual:function t(e,i){return e.id===i.id&&e.expand===i.expand&&e.height===i.height},shouldDimensionBeUpdated:function t(e,i){return!this.dimensionsEqual(e,i)},patchScope:function t(e,i,n){this.resizeScopeArrays(e,i,n);e.columns.forEach((function(t,n,a){var r=i[n];a[n].showAll=r.showAll;a[n].expand=r.expand;a[n].itemCount=r.itemCount;t.items.forEach((function(t,i){var a=r.items[i];if(this.shouldDimensionBeUpdated(t,a)){t.colIdx=n;t.rowIdx=i;a.expand||delete t.options;a.expand&&!t.options&&(t.options={isPopover:false,isReadonly:e.object.isReadonly,interactionState:e.options.interactionState,card:e.options.card,selections:e.options.selections,navigation:e.options.navigation,direction:e.options.direction});this.copyDimensionValues(a,t)}}),this)}),this)},expandOne:function t(e,i){var n;var a;var r;for(n=0;n<e.length;n++){a=e[n];if(a.cardinal&&!a.expand){r=this.getHeightOfExpanded(a.cardinal);if(r<i){a.expand=true;a.height="".concat(r,"px");return r+et}}}return false},calculateExpandPriority:function t(e,i){e.forEach((function(t){var e=this;if(t.expand){var n=0;var a=i.height-this.getHeightOf(t.itemCount-1)-et;var r=0;t.items.forEach((function(t){t.cardinal=e.getDimensionCardinal(t)}));var o=t.items.concat().sort((function(t,e){return t.cardinal-e.cardinal}));if(o.length>1){while(a>it){var s=this.expandOne(o,a);if(!s)break;n++;r+=s;a=i.height-this.getHeightOf(t.itemCount-n)-r}var l=o.filter((function(t){return t.expand}));r=0;l.forEach((function(t){r+=this.getHeightOfExpanded(t.cardinal)+et}),this);a=i.height-this.getHeightOf(t.itemCount-l.length)-r}var c=o.filter((function(t){return!t.expand}));if(a>it&&c.length){var u=c[0];var d=c.length>1?et:0;if(!u.expand){o.length>1&&(u.height="".concat(i.height-this.getHeightOf(c.length-1)-r-d,"px"));u.expand=true}}}if(1===t.items.length&&i.height<X-4){t.items[0].responsiveMode=i.height<.5*X?"spark":"small";t.items[0].height="".concat(i.height,"px")}}),this)},resolveAllModels:function t(e,i,n,a){var r=[];i.forEach((function(t,i){var a=e.columns[i]||{items:[]};t.items.forEach((function(t,e){var i=a.items[e]||{};this.shouldDimensionBeUpdated(t,i)||!i.model?r.push(n(t)):t.model=i.model}),this)}),this);return a.all(r)},resizeScopeArrays:function t(e,i,n){e.columns.length!==i.length&&this.reSizeArray(e.columns,i.length,n,{items:[]});e.columns.forEach((function(t,a){t.items.length!==i[a].items.length&&this.reSizeArray(e.columns[a].items,i[a].items.length,n,{})}),this)},copyDimensionValues:function t(e,i){Object.keys(e).forEach((function(t){i[t]=e[t]}))},getResolveModelFunction:function t(e){return function(t){return this.resolveModel(t,e)}.bind(this)},resolveModel:function t(e,i){return i.getObject(e.id).then((function(t){e.model=t;return t.getLayout()}))}};var lt=i("5/nM");var ct=i("xN6f");var ut=i("sCDE");var dt='<div class="qv-collapsed-listbox"\n\t ng-class="{locked: isLocked, error: hasError, spark: responsiveMode == \'spark\', small: responsiveMode == \'small\', interactive: interactive}"\n\t ng-style="backgroundStyle"\n\t qva-outside-ignore-for="{{outsideIgnoreName}}"\n\t qva-direction x-dir-setting="{{readDirection}}">\n\t<div class="error-layer"></div>\n\t<div class="title-wrapper" ng-style="listStyle">\n\t\t<span ng-if="isLocked" class="lui-icon lui-icon--lock" qva-direction x-dir-setting="{{readDirection}}"></span>\n\t\t<span ng-if="isDrillDown" class="lui-icon lui-icon--drill-down" q-title-translation="Tooltip.dimensions.drilldown" x-dir-setting="{{readDirection}}"></span>\n\t\t<span class="title" ng-attr-title="{{title}}" qva-direction x-dir-setting="{{readDirection}}" x-dir-text="{{title}}">{{title}}</span>\n\t</div>\n\t<qv-state-count-bar ng-if="!hasError" state-counts="stateCounts" options="options"></qv-state-count-bar>\n</div>\n';var pt=i("UV1h");var ft=i("UuE/");var ht=i("akA2");var vt=i("nzqh");r["default"].directive("qvCollapsedListbox",[function(){return{restrict:"E",replace:true,template:dt,scope:{model:"=",outsideIgnoreName:"=",responsiveMode:"=",interactive:"=",readDirection:"="},require:"^?qv-collapsed-listbox-delegated-open",link:function t(e){var i=pt["a"].initializeService("object.listBox");var n=function t(){e.backgroundStyle={"background-color":i.getStyle("","backgroundColor")};e.listStyle={color:i.getStyle("title.main","color"),"font-size":i.getStyle("title.main","fontSize")}};n();pt["a"].ThemeChanged.bind(n);e.$on("$destroy",(function(){pt["a"].ThemeChanged.unbind(n)}));e.title="";e.hasError=false;e.isLocked=false;e.options={direction:e.readDirection};Object(ut["a"])(e,"model",(function(t){r["default"].$apply(e,(function(){var i=t.qListObject.qDimensionInfo;e.hasError=!!(t.qListObject.qError||t.qListObject.qDimensionInfo.qError);e.stateCounts=i.qStateCounts;e.isLocked=i.qStateCounts.qLocked>0;e.isDrillDown="H"===i.qGrouping;e.title=t.title;e.id=t.qInfo.qId}))}))}}}]);r["default"].directive("qvCollapsedListboxDelegatedOpen",[function(){return{restrict:"A",scope:{outsideIgnoreName:"=",interactive:"=?"},controller:["$scope","$element",function(t,e){var i;function n(t,e){return{left:t.position().left-e.position().left,top:t.position().top-e.position().top,right:e.width()-t.position().left-t.width(),bottom:e.height()-t.position().top-t.height()}}function r(t,e){var i=n(t,e);var a;a=Math.max(i.left,i.right)>Math.max(i.top,i.bottom)?i.left>i.right?"left":"right":i.top>i.bottom?"top":"bottom";return a}var o=function n(o,s,l){var c=o.isolateScope().model;var u=o.isolateScope().id;var d=o.isolateScope().options.direction;var p={qvaOutsideIgnoreFor:t.outsideIgnoreName,$alignToElement:o,position:r(o,e),collision:"flipfit",direction:d};if(!t.interactive)return;if(u===i){Z["default"].isSmallDevice?ht["a"].close():ft["a"].close();i=void 0;return}i=u;var f=Z["default"].isSmallDevice?ht["a"].show(c,p):ft["a"].show(c,p);var h;if(!Z["default"].isSmallDevice){f.closing.then((function(t){t&&!a()(t.target).closest(".qv-collapsed-listbox").length>0&&(i=void 0);h=t}));f.closed.then((function(){f=null;h||(i=void 0);s&&(l?l():o.closest(".qv-filterpane-collapsed").focus())}))}};t.$on("openPopover",(function(t,e){var i=a()(e.target).find(".qv-collapsed-listbox");o(i,true,e.callback)}));var s=".qv-collapsed-listbox:not(.error)";e.on("click",s,(function(t){t.preventDefault();var e=a()(t.target).closest(".qv-collapsed-listbox");o(e,false)}));t.$on("$destroy",(function(){e.off("click",s)}))}]}}]);var gt="qvFocusableFilterpaneItem";r["default"].directive(gt,[function(){return{restrict:"A",link:function t(e,i,n){var a=e.$eval(n[gt]).type;e.$on("listboxBlur",(function(){var t;e.item&&(t={colIdx:e.item.colIdx,rowIdx:e.item.rowIdx});e.setFocus(t)}));e.$on("listTab",(function(){e.focus.item.blur()}));function r(){i[0].setAttribute("tabindex",0);i[0].focus()}function o(){i[0].setAttribute("tabindex",-1)}if("item"===a){e.item.focus=r;e.item.blur=o;e.focus&&(e.focus.shouldResetFocus?e.setFocus({colIdx:0,rowIdx:0}):e.hasFocus()&&e.focus.item.id===e.item.id&&e.focus.item.focus())}else if("fullscreen"===a){e.column.fullscreen||(e.column.fullscreen={});e.column.fullscreen.focus=r;e.column.fullscreen.blur=o;if(e.focus)if(e.focus.shouldResetFocus){e.shouldBlurToObject?e.blurToObjectCallback():e.setFocus({colIdx:0,rowIdx:0});e.focus.shouldResetFocus=true}else if(e.focus.isFullscreenBtn){e.focus.item=e.column.fullscreen;(e.hasFocus()||e.focus.forceFocus)&&e.focus.item.focus()}}}}}]);var mt=1e3;var bt=1;var yt=0;function xt(){return"filterpane-".concat(++yt)}function _t(t){return t.columns.some((function(t){return t.items.some((function(t){return t.expand&&(!t.object||1!==t.object.renderState)}))}))}var Ct=$["a"].extend({size:{},columns:[],expandable:false,getContextMenu:function t(e,i,n){if(n.target&&Object(f["b"])("COPY_FILTERPANE_VALUE")){var r=a()(n.target).closest(".qv-listbox-container");if(r){var o=n.target.innerText;o&&""!==o&&i.addItem({icon:"lui-icon lui-icon--copy",translation:"contextMenu.copyCellValue",tid:"copy-cell-context-item",select:function t(){ct["a"].copyToClipboard(o)}})}}},init:function t(e,i,n){var r=this;this.$scope=e;this.$element=i;this.$timeout=n;this.filterpaneLayout=st;this.updateDeferred;e.object.throbberApi.off();this.showThrobberTimeout=n((function(){e.object.throbberApi.show()}),1e3);e.outsideIgnoreName=xt();e.columns=[];e.ext.expandable=function(){return this.expandable}.bind(this);e.options||(e.options={});e.navService=Y;e.fullscreenButtonLabel=G["default"].get("Accessibility.Filterpane.SpaceForFullScreen");function o(t){e.focus&&e.focus.item&&!t||Y.init(e,t);if(1===e.columns.length&&e.columns[0].itemCount<=1)e.setFocusInsideListbox(i,e.blurToObjectCallback);else{e.focus.item.focus();e.focus.focusInListbox=false}}e.setFocus=o;e.object.setOnFocusHandler(o);e.setFocusInsideListbox=function(t,i){if(e.focus.isFullscreenBtn){e.triggerFullScreen();e.focus.shouldResetFocus=true;e.shouldBlurToObject=!!i}else if(e.focus.item.expand){e.focus.item.object.focus(false,i);e.focus.focusInListbox=true}else e.$broadcast("openPopover",{target:t,callback:i})};e.blurToObjectCallback=function(){if("function"===typeof e.object.blur){e.focus.focusInListbox=false;e.object.blur()}};e.handleKeyDown=function(t){if(e.focus.focusInListbox)return;if(t.which===U["a"].ESCAPE){if(e.object.expanded){e.$emit("zoomOut");e.focus.shouldResetFocus=true}else"function"===typeof e.object.blur&&e.object.blur();t.preventDefault()}else if(t.which===U["a"].ENTER||t.which===U["a"].SPACE)e.setFocusInsideListbox(t.target);else if(U["a"].isArrow(t.which)){t.preventDefault();t.stopPropagation();e.navService.handleNavigation(e,t.which)}};e.clickToFocusInListbox=function(t){e.focus||(e.focus={});e.focus.focusInListbox=true;e.focus.item=t};e.hasFocus=function(){return i[0].contains(document.activeElement)};e.triggerFullScreen=function(){if(e.object.inAnalysisState()){a()(".embedded-sheet-toolbar").length>0&&a()(".embedded-sheet-toolbar").css("display","none");e.$emit("zoomOnCell")}};e.$on("objectRenderStateChange",(function(t,i){t.stopPropagation();i&&!_t(e)&&r.renderStateDfd.resolve()}));i.on("focusout",(function(t){if(null===t.target.getAttribute("tabIndex"))return;var e=a()(t.target);var i=e.scope().item;!i&&e.closest(".qv-filterpane-column").scope().column&&(i=e.closest(".qv-filterpane-column").scope().column.fullscreen);i&&"function"===typeof i.blur&&i.blur()}));e.$on("$destroy",(function(){i.off("focusout")}))},onPaint:function t(){var e=this;this.renderStateDfd=Object(s["a"])();this.update(this.$scope.layout).then((function(){_t(e.$scope)||e.renderStateDfd.resolve()}));return this.renderStateDfd.promise},onResize:function t(){var e=this;this.renderStateDfd=Object(s["a"])();this.update(this.$scope.layout).then((function(){_t(e.$scope)||e.renderStateDfd.resolve()}));return this.renderStateDfd.promise},update:function t(e){var i=this;this.updateDeferred&&this.updateDeferred.reject();this.updateDeferred=new s["a"];var n=this.size;var a=this.$scope;var r=this.columns;var l=this.$element;var c=a.focus;var u=a.object.model.app;var d=this.filterpaneLayout;var p=d.getSize(l,e);var f=d.getResolveModelFunction(u);var h;var v;if(d.sizeChanged(n,p)){c&&(v=c.item?c.item.id:"fullscreen");n=p;this.size=p;r=this.getColumns(n);this.columns=r}if(!d.isValid(e)){r=[];a.columns=r;return s["a"].resolve()}h=d.getDimensions(e);h=d.sortDimensions(e,h);this.dimensions=h;this.preferredSizeDeferred&&this.preferredSizeDeferred.resolve();r=d.mergeColumnsAndDimensions(r,h);d.resolveAllModels(a,r,f,s["a"]).then((function(){i.updateDeferred.resolve()}));this.updateDeferred.promise.then((function(){d.calculateExpandPriority(r,n);d.patchScope(a,r,o["a"]);i.$timeout.cancel(i.showThrobberTimeout);a.object.throbberApi.hide();i.expandable=!a.columns.some((function(t){return t.items.some((function(t){var e=t.model;return e&&e.layout&&e.layout.qSelectionInfo&&e.layout.qSelectionInfo.qInSelections}))}));a.hasExpanded=a.columns.some((function(t){return t.expand}));a.navService.updateFocus(a,v)}));return this.updateDeferred.promise},getColumns:function t(e){var i=[];this.filterpaneLayout.calculateColumns(e,i,this.$scope.options.zoomEnabled);return this.filterpaneLayout.balanceColumns(e,i)},setInteractionState:function t(e){this.$scope.interactive=this.$scope.object&&this.$scope.object.inAnalysisState()&&false!==this.$scope.options.navigation&&false!==this.$scope.options.selections;this.$scope.columns.forEach((function(t){t.items.forEach((function(t){t.expand&&t.object.setInteractionState(e)}))}))},setDirection:function t(e){this.$scope.options&&(this.$scope.options.direction=e);this.$scope.columns.forEach((function(t){t.items.forEach((function(t){t.expand&&t.object.setDirection(e)}))}))},getPreferredSize:function t(){var e=Object(s["a"])();this.preferredSizeDeferred&&this.preferredSizeDeferred.reject();this.preferredSizeDeferred=Object(s["a"])();var i=this;this.preferredSizeDeferred.promise.then((function(){i.preferredSizeDeferred=null;e.resolve({w:i.$element.width(),h:i.filterpaneLayout.getHeightOf(i.dimensions.length)})}));this.dimensions&&this.preferredSizeDeferred.resolve();return e.promise}});Ct.$inject=["$scope","$element","$timeout"];var wt={type:"filterpane",template:H,BackendApi:u,controller:Ct,definition:C,initialProperties:{qChildListDef:{qData:{info:"/qInfo"}}},data:{dimensions:{min:1,max:1e3,description:function t(){return G["default"].get("Visualizations.Descriptions.Pane")}}},expandable:function t(){return false},mapProperties:function t(){this.mappedDefinition=j["a"].mapDefinition(this.definition,this.type);this.dimensionDefinition={min:1}},getCreatePropertyHandler:function t(e){return new F({app:e,dimensionDefinition:this.dimensionDefinition})},addFieldDimension:function t(e,i){return i.model.getProperties().then((function(t){var n=i.getCreatePropertyHandler();n.setProperties(t);n.setModel(i.model);return n.addFieldDimension(e.value,e.displayName).then((function(t){r["default"].$rootScope.$broadcast("pp-open-path","data.".concat(t.qDef.cId))}))}))},addLibraryDimension:function t(e,i){return i.model.getProperties().then((function(t){var n=i.getCreatePropertyHandler();n.setProperties(t);n.setModel(i.model);return n.addLibraryDimension(e.libraryId).then((function(t){r["default"].$rootScope.$broadcast("pp-open-path","data.".concat(t.qDef.cId))}))}))},getDropFieldOptions:function t(e,i,n){if(i.getDimensions().length<i.maxDimensions()){i.setModel(n);i.addFieldDimension(e.item.name,e.item.displayName).then((function(t){n.setProperties(i.properties);r["default"].$rootScope.$broadcast("pp-open-path","data.".concat(t.qDef.cId))}))}},getDropDimensionOptions:function t(e,i,n){if(i.getDimensions().length<i.maxDimensions()){i.setModel(n);i.addLibraryDimension(e.item.id).then((function(t){n.setProperties(i.properties);r["default"].$rootScope.$broadcast("pp-open-path","data.".concat(t.qDef.cId))}))}},getDropMeasureOptions:function t(e,i,n,a){a()},getExportRawDataOptions:function t(e,i){return i.model.getLayout().then((function(t){if(1===t.qChildList.qItems.length){e.addItem({translation:"contextMenu.export",tid:"export",select:function e(){i.model.app.getObject(t.qChildList.qItems[0].qInfo.qId).then((function(t){lt["a"].show(t)}))}});return}var n=[];e.addItem({translation:"Export.AllDimensions",tid:"export-all-dimensions",select:function t(){lt["a"].show(i.model)}});t.qChildList.qItems.forEach((function(t){n.push(i.model.app.getObject(t.qInfo.qId).then((function(t){return t.getLayout().then((function(i){e.addItem({translation:i.title,tid:"export",select:function e(){lt["a"].show(t)}})}))})))}));return s["a"].all(n)}))},exportProperties:function t(e){var i=new B["a"];var n=e.qProperty;var a=i.data[0];var r;var o;var s;var l;var c;if(e.qChildren)for(o=0;o<e.qChildren.length;++o){r=e.qChildren[o].qProperty;a.dimensions.push({qDef:r.qListObjectDef.qDef,qLibraryId:r.qListObjectDef.qLibraryId,qOtherTotalSpec:r.qListObjectDef.qOtherTotalSpec||{qOtherMode:"OTHER_OFF",qOtherCounted:{qv:"10"}},title:r.title})}if(n.qLayoutExclude&&n.qLayoutExclude.qHyperCubeDef){if(n.qLayoutExclude.qHyperCubeDef.qDimensions)for(o=0;o<n.qLayoutExclude.qHyperCubeDef.qDimensions.length;++o)a.excludedDimensions.push(n.qLayoutExclude.qHyperCubeDef.qDimensions[o]);if(n.qLayoutExclude.qHyperCubeDef.qMeasures)for(o=0;o<n.qLayoutExclude.qHyperCubeDef.qMeasures.length;++o)a.excludedMeasures.push(n.qLayoutExclude.qHyperCubeDef.qMeasures[o]);if(n.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder)for(o=0;o<n.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.length;++o)a.interColumnSortOrder.push(n.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder[o])}for(l in n)"qChildListDef"!==l&&(i.properties[l]=n[l]);n.qLayoutExclude||(n.qLayoutExclude={});if(n.qLayoutExclude.disabled){for(l in n.qLayoutExclude.disabled){c=l;i.properties.hasOwnProperty(c)||(i.properties[c]=n.qLayoutExclude.disabled[l])}n.qLayoutExclude.disabled.previousShowTitles&&(i.properties.showTitles=true)}delete n.qLayoutExclude;for(o=0;o<a.dimensions.length;++o)for(s=0;s<a.dimensions[o].qDef.qSortCriterias.length;++s){a.dimensions[0].qDef.qSortCriterias[s].qSortByFrequency=0;a.dimensions[0].qDef.qSortCriterias[s].qSortByState=0}return i},importProperties:function t(e,i){var n={qChildren:[]};var a={};var r=e.data[0];var s;var l;a.qLayoutExclude||(a.qLayoutExclude={});a.qLayoutExclude.disabled={};for(s in e.properties)"qLayoutExclude"===s?e.properties[s].quarantine&&(a.qLayoutExclude.quarantine=o["a"].extend(true,{},e.properties[s].quarantine)):i.hasOwnProperty(s)||W["default"].isMasterItemProp(s)?a[s]=e.properties[s]:a.qLayoutExclude.disabled[s]=e.properties[s];a=o["a"].extend(true,{},i,a);for(l=0;l<r.dimensions.length;++l)if(n.qChildren.length<mt)n.qChildren.push({qProperty:q["a"].createDefaultListBox(r.dimensions[l],r.dimensions[l].title),qChildren:[]});else{a.qLayoutExclude||(a.qLayoutExclude={});a.qLayoutExclude.qHyperCubeDef||(a.qLayoutExclude.qHyperCubeDef={});a.qLayoutExclude.qHyperCubeDef.qDimensions||(a.qLayoutExclude.qHyperCubeDef.qDimensions=[]);a.qLayoutExclude.qHyperCubeDef.qDimensions.push(r.dimensions[l])}if(r.measures.length){a.qLayoutExclude.qHyperCubeDef||(a.qLayoutExclude.qHyperCubeDef={});a.qLayoutExclude.qHyperCubeDef.qMeasures||(a.qLayoutExclude.qHyperCubeDef.qMeasures=[]);for(l=0;l<r.measures.length;++l)a.qLayoutExclude.qHyperCubeDef.qMeasures.push(r.measures[l])}for(l=0;l<r.excludedDimensions.length;++l)if(n.qChildren.length<bt)n.qChildren.push({qProperty:q["a"].createDefaultListBox(r.excludedDimensions[l],r.excludedDimensions[l].title),qChildren:[]});else{a.qLayoutExclude.qHyperCubeDef||(a.qLayoutExclude.qHyperCubeDef={});a.qLayoutExclude.qHyperCubeDef.qDimensions||(a.qLayoutExclude.qHyperCubeDef.qDimensions=[]);a.qLayoutExclude.qHyperCubeDef.qDimensions.push(r.excludedDimensions[l])}for(l=0;l<r.excludedMeasures.length;++l){a.qLayoutExclude.qHyperCubeDef||(a.qLayoutExclude.qHyperCubeDef={});a.qLayoutExclude.qHyperCubeDef.qMeasures||(a.qLayoutExclude.qHyperCubeDef.qMeasures=[]);a.qLayoutExclude.qHyperCubeDef.qMeasures.push(r.excludedMeasures[l])}for(l=0;l<r.interColumnSortOrder.length;++l)if(a.qLayoutExclude.qHyperCubeDef){a.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder||(a.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder=[]);a.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.push(r.interColumnSortOrder[l])}W["default"].importCommonProperties(a,e,i);if(a.showTitles){a.qLayoutExclude.disabled.previousShowTitles=true;a.showTitles=false}n.qProperty=a;return n}};var qt=e["default"]=wt},"fca/":function(t,e,i){"use strict";var n=i("RBCx");var a=i("sWge");e["a"]={createInitialChart:s,createChart:o,convertChart:l,getPropertyTreeForConvertedChart:c,createConvertedChart:u};function r(t){var e=t.qHyperCubeDef;if(e&&e.qMeasures&&e.qDimensions){var i=e.qDimensions.concat(e.qMeasures);i.forEach((function(t){t.qAttributeExpressions&&t.qAttributeExpressions.forEach((function(t){t.qAttribute=true}))}))}}function o(t,e,i){var n=d(e,i).bind(e);r(t);return n(t)}function s(t,e,i){p(t,e,i);return n["a"].getInitialProperties(t).then((function(t){return o(t,e,i)}))}function l(t,e,i){if(!t)throw new Error("No extension provided");var n=i||t.model;return c(t,e,i).then((function(t){return i.setFullPropertyTree(t).then((function(){return n}))}))}function c(t,e,i){if(!t)throw new Error("No extension provided");var r=i||t.model;return a["a"].all([n["a"].getExtensionType(e),n["a"].getInitialProperties(e),r.getFullPropertyTree()]).then((function(e){var i=e[0];var n=e[1];var a=e[2];var r;delete a.qProperty.qInfo.qId;if(t.exportProperties&&i.importProperties){var o;"boxplot"===t.type&&(o="boxplotDef");a.qProperty.containerChildId&&(n.containerChildId=a.qProperty.containerChildId);r=i.importProperties(t.exportProperties(a,o),n,i)}else r={qProperty:n,qChildren:[]};return r}))}function u(t,e,i,n){p(e,i,n);return(t.model.properties,i,n).then((function(i){return l(t,e,i)}))}function d(t,e){return e?t.createObject:t.createSessionObject}function p(t,e,i){if(!e||!t)throw new Error("Invalid inparameters: type or app missing");if(i)throw new Error("Persisted objects not implemented yet")}},fkEm:function(t,e,i){"use strict";var n=i("6uJb");var a={dimensions:{min:1,max:1,description:function t(){return n["default"].get("Visualization.Histogram.Binning")},add:function t(){},move:function t(){},remove:function t(){}}};e["a"]=a},gF9a:function(t,e,i){"use strict";var n=i("sWge");var a=i("5ezW");var r=i("4nJ1");var o=i("G3JA");var s=i("G1wx");var l=i("oxue");var c='<lui-popover class="add-popover-wrapper" style="min-width: 200px;width: 230px;" align-to="alignTo" position="position" collision="\'flipfit\'" on-close-view="closeAddPopover(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<div ng-show="!step2">\n\t\t<object-add-typeahead>\n\t\t\t<lui-popover-header>\n\t\t\t\t\t<div class="lui-input-group">\n\t\t\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" name="new-measure" autocomplete="off" ng-model="search.term" tid="add-measure-input" qva-focus="autoFocus"\n\t\t\t\t\t\t\t   maxlength="255" object-add-typeahead-input on-escape="onEscape($event)" on-enter="onEnter($event)"/>\n\n\t\t\t\t\t\t<button ng-if="allowExpressionEditor !== false" class="lui-button  lui-input-group__item  lui-input-group__button" qva-activate="close()"\n\t\t\t\t\t\t\t\tpp-expression-editor="search.term" pp-expression-editor-on-apply="addExpressionMeasure({value:value})" expression-type="measure"\n\t\t\t\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor" tid="fx-button">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression  edit-expression"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t</lui-popover-header>\n\t\t\t<div class="object-add-popover-content" object-add-typeahead-menu>\n\t\t\t\t<ul class="lui-list">\n\t\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="measure in activeMeasures" tid="measure-item"\n\t\t\t\t\t\tobject-add-typeahead-item="measure" on-select="addActiveMeasure(measure)">\n\t\t\t\t\t\t<span qve-highlight text="{{measure.translatedTitle}}" title="{{measure.translatedTitle}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="object-add-popover-list-header" ng-if="measures.length"  q-translation="Common.Measures"></div>\n\t\t\t\t<ul class="lui-list">\n\t\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="measure in measures" tid="measure-item"\n\t\t\t\t\t\tobject-add-typeahead-item="measure" on-select="addLibraryMeasure(measure)">\n\t\t\t\t\t\t<span qve-highlight text="{{measure.value}}" title="{{measure.value}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="object-add-popover-list-header" ng-if="fields.length" q-translation="Visualization.Requirements.FromField"></div>\n\t\t\t\t<ul class="lui-list">\n\t\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in fields" tid="field-item"\n\t\t\t\t\t\tobject-add-typeahead-item="field" on-select="showFromField(field)"\n\t\t\t\t\t\tng-class="{\'derived-field\': (field.isDerived && search.term === \'\')}"\t>\n\t\t\t\t\t\t<i ng-if="isDirectDiscoveryField( field )" class="lui-icon  lui-icon--direct-discovery  lui-list__aside" q-title-translation="{{ getDirectDiscoveryTypeTranslationKey( field.qTags ) }}"></i>\n\t\t\t\t\t\t<span ng-if="field.isGeoField" class="lui-icon lui-icon--map lui-list__aside"></span>\n\t\t\t\t\t\t<span ng-if="field.isDateField" class="lui-icon lui-icon--calendar lui-list__aside"></span>\n\t\t\t\t\t\t<span qve-highlight text="{{getFieldDisplayName(field)}}" title="{{field.toolTip}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t\t\t<i class="object-add-popover-toogle-step2-icon  lui-list__aside lui-icon  lui-icon--triangle-right"></i>\n\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="object-add-popover-nohits" ng-if="!measures.length && !fields.length" q-translation="Toolbox.Search.Nohits"></div>\n\t\t\t</div>\n\t\t</object-add-typeahead>\n\t</div>\n\t<div class="object-add-popover back" ng-show="step2">\n\t\t<div class="object-add-popover-header">\n\t\t\t<div qva-activate="goBack($event);">\n\t\t\t\t<i class="object-add-popover-back-icon  lui-icon  lui-icon--triangle-left"></i>\n\t\t\t\t<span q-translation="Visualization.Requirements.Back"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="object-add-popover-content">\n\t\t\t<div class="object-add-popover-list-header" q-translation="Visualization.Requirements.Aggregation"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="suggestion in fieldSuggestions" qva-activate="addFromField(suggestion)" tid="from-field-item">\n\t\t\t\t\t<span class="lui-list__text lui-list__text--ellipsis" title="{{suggestion.aggregation}}({{suggestion.field}})">{{suggestion.aggregation}}({{suggestion.field}})</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</lui-popover>\n';var u=i("JUQR");var d=i("knjk");var p=i("6uJb");var f=i("dtUF");var h=100;function v(t,e){if(""===e)return t;return t.filter((function(t){if("undefined"===typeof t.value)return false;return a["a"].string(t.value.toLowerCase()).indexOf(a["a"].string(e.toLowerCase()))>-1}))}var g={template:c,controller:["$scope",function(t){t.search={term:""};t.isDirectDiscoveryField=u["a"].isDirectDiscoveryField;t.getDirectDiscoveryTypeTranslationKey=u["a"].getTypeTranslationKey;t.autoFocus=s["a"].treatAsDesktop();t.position||(t.position="right");t.onEscape=function(e){if(""!==t.search.term){e.stopPropagation();t.search.term=""}else t.close()};t.onEnter=function(e){if(""!==t.search.term){e.stopPropagation();t.addExpressionMeasure({value:t.search.term})}else t.close()};t.showFromField=function(e){t.currentField=e;t.step2=true};t.goBack=function(e){e.preventDefault();t.currentField=null;t.step2=false};t.$watch("currentField",(function(e){t.fieldSuggestions=e?["Sum","Count","Avg","Min","Max"].map((function(e){var i=r["a"].escapeField(t.currentField.value);return{aggregation:e,field:i}})):[]}));t.addFromField=function(e){var i="".concat(e.aggregation,"(").concat(e.field,")");t.addExpressionMeasure({value:i})};t.getFieldDisplayName=function(e){return""===t.search.term?e.label:d["a"].trimAutoCalendarName(e.value)};var e=null;t.$watch("search.term",(function(i){function a(){var n=v(e.measures,i);var a=v(e.fields,i);var r=v(e.activeMeasures,i);if(n.length+r.length>h){n=o["a"].limit(n,Math.max(h-r.length,0));a=[]}else n.length+r.length+a.length>h&&(a=o["a"].limit(a,Math.max(h-n.length-r.length,0)));t.fields=a;t.measures=n;t.activeMeasures=r}e?a():n["a"].all({fields:l["a"].getSortedFields(t.app),measures:l["a"].getSortedMeasures(t.app),activeMeasures:t.activeMeasures}).then((function(t){var n=t.fields.map((function(t){var e=t.isDerived&&""===i?t.qName.substring(t.qName.lastIndexOf(".")+1,t.qName.length):t.qName;return{toolTip:t.qName,value:t.qName,trimmedValue:t.displayName,label:e,field:t.qName,qTags:t.qTags,isDerived:t.isDerived,isDateField:t.isDateField,isGeoField:t.isGeoField,activeMeasureIndex:-1}}));var r=t.measures.map((function(t){return{value:t.qData.title,label:t.qData.title,libraryId:t.qInfo.qId,activeMeasureIndex:-1}}));var o=[];t.activeMeasures&&t.activeMeasures.length&&(o=t.activeMeasures.map((function(t,e){var i={};t.qLibraryId?r.forEach((function(e){if(e.libraryId===t.qLibraryId){i.value=e.value;i.label=e.label}i.libraryId=t.libraryId})):n.forEach((function(e){if(e.value===t.qDef.qDef){i.label=e.label;i.value=e.value}}));i.translatedTitle=p["default"].get("properties.colorBy.currentMeasure",e+1);i.activeMeasureIndex=e;return i})));e={fields:n,measures:r,activeMeasures:o};a()}))}))}],scope:{alignTo:"=",app:"=",addExpressionMeasure:"=",addLibraryMeasure:"=",addActiveMeasure:"=",close:"=",qvaOutsideIgnoreFor:"=",position:"=",allowExpressionEditor:"@"}};var m=e["a"]=g},gaHo:function(t,e,i){"use strict";var n=i("4nJ1");var a={};function r(){var t=a.formatters.map((function(t){if(t.character)return n["a"].escapeRegExp(t.character);return""}));var e="(".concat(t.join("|"),"){1}\\[");var i="\\]\\(([^\\\\)]*(?:\\\\.[^\\\\)]*)*)\\)";var r="((?![\\s\\S]*?".concat(e,"[\\s\\S]*?)[\\s\\S]*?)");a.markdownRegex=new RegExp(e+r+i,"mg")}function o(t,e,i){var n=t.exec(e);var a=[];while(n){if(a.indexOf(n.index)>-1)break;a.push(n.index);e=i(e,n);n=t.exec(e)}return a.length?o(t,e,i):e}function s(t){return t.split("").reverse().join("")}a.register=function(t){a.formatters.push(t);r()};a.toHTML=function(t,e){var i=e||l();var n=false;t=t.replace(/\$&amp;/g,"&#36;&amp;");t=o(a.markdownRegex,t,(function(t,e){return t.replace(e[0],(function(){return a.getFormatter(e[1]).toHTML.callback(e[2],e[4])}))}));i.forEach((function(e){if(!e.toHTML||!e.toHTML.regex)return;e.toHTML.reverse&&(t=s(t));t=o(e.toHTML.regex,t,(function(t,i){var a=i.splice(0,1)[0];n=true;return t.replace(a,e.toHTML.callback.apply(e.toHTML.callback,i))}));e.toHTML.reverse&&(t=s(t))}));return n?a.toHTML(t,e):t};a.toMarkdown=function(t,e){var i=e||c();var n=new Option;n.innerHTML=t;i.forEach((function(t){t.toMarkdown.tags.forEach((function(e){var i=Array.prototype.slice.call(n.getElementsByTagName(e.name)).reverse();i.forEach((function(i){var n=!e.attr.length||e.attr.some((function(t){return i.hasAttribute(t)}));var a=e.dontMatchAttr&&e.dontMatchAttr.some((function(t){return i.hasAttribute(t)}));if("img"===e.name&&i.hasAttribute("src")&&!i.hasAttribute("data\\-measure")){var r=i.getAttribute("src");i.setAttribute("src",r.replace(/\\/g,""))}var o;o=t.toMarkdown.regex?n&&!a&&t.toMarkdown.regex.exec(i.outerHTML.trim()):[i.outerHTML.trim()];if(!a&&n&&o){var s=document.createElement("span");s.innerHTML=t.toMarkdown.callback.apply(i,o.slice(1));i.parentNode.replaceChild(s,i)}}))}))}));return n.innerHTML.replace(/<(\/)?span>/g,"")};a.getFormatter=function(t){var e;var i=a.formatters;for(e=0;e<i.length;e++)if(i[e].character===t)return i[e];return null};function l(){var t=a.formatters.filter((function(t){return!!t.toHTML}));t.sort((function(t,e){var i=t.toHTML.priority||0;var n=e.toHTML.priority||0;return n-i}));return t}function c(){var t=a.formatters.filter((function(t){return!!t.toMarkdown}));t.sort((function(t,e){var i=t.toMarkdown.priority||0;var n=e.toMarkdown.priority||0;return n-i}));return t}a.escapeMarkdown=function(t){return t.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/~/g,"\\~").replace(/-/g,"\\-")};a.unescapeMarkdown=function(t){return t.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\~/g,"~").replace(/\\-/g,"-")};a.reset=function(){a.formatters=[];a.markdownRegex=null};a.reset();e["a"]=a},gapF:function(t,e,i){"use strict";var n=i("4nJ1");var a=i("n7pR");var r=i("zjn0");function o(t,e){var i;var r="undefined"!==typeof e.paletteColor?a["a"].Theme.resolveColor(e.paletteColor):"transparent";var o={value:0,line:{stroke:r,strokeDasharray:null===e||void 0===e||null===(i=e.style)||void 0===i?void 0:i.lineType}};return n["a"].extend(true,o,t||{})}function s(t,e){var i=e&&e.chartID;var r=a["a"].getStyle(i,"referenceLine.label.name","color");var o=a["a"].getFontSize(i,"referenceLine.label.name","fontSize");var s=a["a"].getStyle(i,"referenceLine.label.name","fontFamily");e.paletteColor?r=a["a"].Theme.resolveColor(e.paletteColor):r||(r="transparent");var l={value:0,line:{stroke:"transparent"},label:{align:"center",vAlign:"middle",text:"",fill:r,fontFamily:s,fontSize:o,maxWidthPx:135}};return n["a"].extend(true,l,t||{})}var l=function t(e){return e&&false!==e.show&&0!==e.show&&"0"!==e.show&&void 0!==e.refLineExpr};function c(t){var e=t.refLine,i=t.label,n=t.valueString;if(false!==e.showValue){if(false!==e.showLabel)return"".concat(i," ").concat(r["a"].lrm,"(").concat(n,")").concat(r["a"].lrm);return"".concat(r["a"].lrm,"(").concat(n,")").concat(r["a"].lrm)}if(false!==e.showLabel)return i;return""}e["a"]={lineSettings:o,lineLabelSettings:s,isVisible:l,getRefLineTitle:c}},h5Bm:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("6uJb");var r=i("YH1i");var o={template:r["a"],controller:["$scope",function(t){var e=function e(){return t.data};var i=t.definition&&t.definition.title||{};n["a"].defineTitle(t,i,e,t.args.handler);n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);var r=t.definition.defineValueFn||n["a"].defineValue;r(t,t.definition,e);t.supportTooltip=t.definition.supportTooltip;t.options=[];function o(){var e=t.value;var i=t.options.some((function(t){return t.value===e}));i||t.options.splice(0,0,{value:e,label:a["default"].get("properties.selectValue")})}function s(e){t.loading=true;t.errorMessage="";n["a"].fillOptions(t.definition,e||t.data,t.args.handler,t.options,t.args).then((function(){o();t.errorMessage="";t.loading=false}),(function(){o();t.errorMessage=a["default"].get("Properties.PromiseFailed");t.loading=false}))}o();s();t.$on("datachanged",(function(){s()}));t.$watch("data",(function(){s()}))}]};e["default"]=o},hHMc:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("6uJb");var r=i("YH1i");var o={template:r["a"],controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineValue(t,t.definition,e);function i(){var e=t.value;var i=t.options.some((function(t){return t.value===e}));i||t.options.splice(0,0,{value:e,label:a["default"].get("properties.selectValue")})}function r(){var e=t.args.handler.getDimensions();var n;var a;var r;var o;t.options.splice(0,t.options.length);for(o=0;o<e.length;++o){n=e[o];r=n.qDef.cId;a=t.args.handler.getDimensionLayout(r);n.qLibraryId&&a&&!a.qError?n.qError||t.options.push({value:r,label:a.title}):t.options.push({value:r,label:a&&a.qFallbackTitle||""})}i()}t.options=[];r();t.$on("layoutchanged",(function(){r()}))}]};e["default"]=o},hSVP:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("uVcZ");var o=i("GG1N");var s='<div class="pp-component pp-item-selection-list-component" ng-if="visible" tcl="item-selection-list">\n  <div class="label header" ng-if="label" title="{{label}}">{{label}}</div>\n\n  <ul class="pp-item-selection-list"\n    ng-class="{\'vertical\' : !horizontal, \'small\' : small, \'multiple-select\' : multipleSelect}">\n    <li ng-repeat="item in items" ng-click="onChange(this)" ng-show="itemVisible(item)"\n      ng-style="{ width: getWidth(item), margin: itemsMargin }"\n      ng-class="{\'transparent-border\': definition.itemBorder}">\n      <div ng-show="item.labelPlacement == \'top\'" class="label"\n        ng-class="{ \'disabled\': readOnly, \'bold\': ( definition.itemsBoldSelect && isSelected(this) ) }">\n        <span>{{item.label}}</span>\n      </div>\n      <button ng-disabled="readOnly"\n        ng-class="{\'item\': true, \'selected\': isSelected(this), \'item-border\': definition.itemBorder}"\n        ng-style="{\'border-radius\': itemsRadius}" title="{{item.label}}">\n        <div include-pp-component x-component="item.component" x-definition="item.definition" x-data="data"\n          x-args="args"></div>\n      </button>\n      <div ng-show="item.labelPlacement == \'bottom\'" class="label"\n        ng-class="{ \'disabled\': readOnly, \'bold\': ( definition.itemsBoldSelect && isSelected(this) ) }">\n        <span>{{item.label}}</span>\n      </div>\n    </li>\n  </ul>\n</div>';function l(t){l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return l(t)}var c={template:s,controller:["$scope",function(t){var e=t.definition.items||{};var i=function e(){return t.data};e="function"===typeof e?e():e;t.items=Object.keys(e).filter((function(t){return e[t]})).map((function(n,a,s){var l=e[n];var c={component:r["a"].findComponent(l),definition:l,data:t.data,key:n,value:l.value,show:l.show,labelPlacement:l.labelPlacement||"top",width:l.width};if(t.definition.horizontal&&s.length%3===0){c.definition.small=true;delete c.width}o["a"].defineLabel(c,l,i,t.args.handler);return c}));t.multipleSelect=t.definition.multipleSelect||false;t.horizontal=t.definition.horizontal||false;t.small=t.items.length%3===0;var n=c(t.definition.itemsRadius);n&&(t.itemsRadius=n);var s=c(t.definition.itemsSpacing);s&&(t.itemsMargin=(t.horizontal?[0,s,0,0]:[s,0,0,0]).join(" "));o["a"].defineLabel(t,t.definition,i,t.args.handler);o["a"].defineVisible(t,t.args.handler);o["a"].defineReadOnly(t,t.args.handler);o["a"].defineValue(t,t.definition,i);function c(t,e){e=e||"px";if(!["number","string"].includes(l(t)))return null;var i=t.toString().length!==parseFloat(t).toString().length;return i?t:t+e}t.itemVisible=function(e){if("boolean"===typeof e.show)return e.show;if("function"===typeof e.show)return e.show.call(null,t.data,t.args.handler);return true};t.getWidth=function(e){var i=t.definition.horizontal?"45%":"100%";var n=e.width;var r=parseFloat(n);var o;switch(l(n)){case"string":n=a.a.trim(n);o=n.length?n:i;break;case"number":o=Number.isNaN(+r)?i:"".concat(n,"px");break;default:e.definition&&e.definition.small||(o=i)}return o};t.onChange=function(e){t.multipleSelect?t.value[e.item.value]=!t.value[e.item.value]:t.value=e.item.value;"function"===typeof t.definition.change&&t.definition.change(t.data,t.args.handler,t.args);t.$emit("saveProperties")};t.isSelected=function(e){return t.multipleSelect?!!t.value[e.item.value]:e.item.value===t.value};t.options=[]}]};var u=e["default"]=c},hpzB:function(t,e,i){"use strict";var n={getAxisUnitAlignment:function t(e,i){if(["near","far"].includes(e))return i?e:"near"===e?"far":"near";if(i)return"left"===e?"near":"far";return"bottom"===e?"far":"near"},roundToHalf:function t(e){var i=Math.round(e);return i-e>=0?i-.5:i+.5},getTicks:function t(e){var i=[];e&&e.forEach((function(t){i.push({position:0,value:t,opacity:1})}));return i},getAvgTickWidth:function t(e){if(!e||e.length<2)return 0;return Math.abs(e[e.length-1]-e[0])/(e.length-1)}};e["a"]=n},iSqg:function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("ngrb");var r=i("2Hli");var o='<div class="" style="position:relative; height: 100%;" tcl="sorting">\n\t<div class="pp-component pp-dropdown-component" ng-if="show() && isGroup()" tcl="dropdown">\n\t\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t\t<div class="value">\n\t\t\t<lui-select x-model="dropdown.activeIndex" x-disabled="readOnly"\n\t\t\t\t\t\tx-options="option.value as option.label for option in dropdown.options" tid="{{key}}">\n\t\t\t</lui-select>\n\t\t</div>\n\t</div>\n\n\t<div class="separator"></div>\n\n\t<div ng-if="show()" include-pp-component x-component="item.component" x-definition="item.definition" x-data="item.data" x-args="item.args"></div>\n</div>';var s={template:o,controller:["$scope",function(t){var e=t.args.cache;var i="sorting_dimension_";t.dropdown={activeIndex:e.get(i+o().qDef.cId)||0,options:[]};function o(){var e=t.definition.ref;if(e)return r["a"].getValue(t.data,e);return t.data}function s(){var e=[];var i=o().qDef.cId;var n=t.args.handler.getDimensionLayout(i);n&&"H"===n.qGrouping&&n.qGroupFallbackTitles.forEach((function(t,i){e.push({value:i,label:t})}));t.dropdown.options=e}t.show=function(){var t=o();return!t.qDef.autoSort};t.isGroup=function(){var e=o();if(!e.qLibraryId)return false;var i=e.qDef.cId;var n=t.args.handler.getDimensionLayout(i);return n&&"H"===n.qGrouping};var l={};Object.keys(t.definition.sortingItems).forEach((function(e){if(t.definition.sortingItems[e]){var i=a["a"][e];var n=i(null,(function(){return o().qDef.qReverseSort}));l[e]=n}}));l.defaultSortMessage={component:"text",translation:"properties.sorting.defaultSortingMessage",show:function t(e){return!(l.ascii&&e.qSortByAscii||l.numeric&&e.qSortByNumeric||l.expression&&e.qSortByExpression||l.frequency&&e.qSortByFrequency)}};t.item={component:n["a"].getComponent("items"),definition:{type:"items",grouped:true,items:l},args:t.args};function c(t,e){for(var i=0;i<=e;i++)t[i]||(t[i]={})}function u(){t.dropdown.activeIndex>=t.dropdown.options.length&&(t.dropdown.activeIndex=0);var e=o();c(e.qDef.qSortCriterias,t.dropdown.activeIndex);var i=e.qDef.qSortCriterias[t.dropdown.activeIndex];t.item.data=i}t.$watch("dropdown.activeIndex",(function(t){e.put(i+o().qDef.cId,t);s();u()}));t.$on("datachanged",(function(){u()}));t.$watch("data",(function(){u()}))}]};var l=e["default"]=s},iTPj:function(t,e,i){"use strict";var n=i("SOxp");var a=i("Nc9l");function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function s(t,e,i){e&&o(t.prototype,e);i&&o(t,i);return t}var l=function(){function t(e){r(this,t);this._type=e}s(t,[{key:"getType",value:function t(){return this._type}}]);return t}();var c=l;function u(t){u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return u(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&f(t,e)}function f(t,e){f=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return f(t,e)}function h(t){var e=m();return function i(){var n=b(t),a;if(e){var r=b(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v(this,a)}}function v(t,e){if(e&&("object"===u(e)||"function"===typeof e))return e;return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function b(t){b=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return b(t)}var y=function(t){p(i,t);var e=h(i);function i(t,n,a){var r;d(this,i);r=e.call(this,"propertyChange");r.property=t;r.oldValue=n;r.newValue=a;return r}return i}(c);var x=y;var _="__setters";var C=a["a"].extend("Link",{init:function t(e,i){this._super();this._property=i;this._host=e},setHost:function t(e){if(this._host===e&&this._hostObserved)return;this.unobserve();this._host=e;this.observe()},observe:function t(e){if(!this._host){this.fire("hostPropertyValueChanged",[void 0]);return}I(this._host,this._property);var i=this;var n=D(this._property);this._callback=function(t){t.property===i._property&&i.fire("hostPropertyValueChanged",[t.newValue])};this._callbackSimple=function(){"function"===typeof this[n]&&i.fire("hostPropertyValueChanged",[this[n]()])};e||"function"!==typeof this._host[n]||i.fire("hostPropertyValueChanged",[this._host[n]()]);this._host.listen("propertyChange",this._callback);this._host.listen("".concat(this._property,"Changed"),this._callbackSimple);this._hostObserved=true},unobserve:function t(){if(!this._host)return;this._callback&&this._host.stopListen("propertyChange",this._callback);this._callbackSimple&&this._host.stopListen("".concat(this._property,"Changed"),this._callbackSimple);if(this._host[_]&&this._host[_][this._property]){var e=this._host[_][this._property];var i;e.observers--;if(e.observers<=0){i="set".concat(this._property.substring(0,1).toUpperCase()).concat(this._property.substring(1));if(e.isOriginalOwn)this._host[i]=e.original;else{this._host[i]=null;delete this._host[i]}e.original=null;this._host[_][this._property]=null;delete this._host[_][this._property]}}this._host=void 0;this._callback=void 0;this._callbackSimple=void 0;this._hostObserved=false}});var w=n["a"].extend("Chain",{init:function t(e,i){this._links=[];if(1===arguments.length&&"function"===typeof e)this._setter=e;else{this._wannabe=e;this._wannabeProp=i}},add:function t(e){var i=this;var n;e.listen("hostPropertyValueChanged",(function(t){n=i._links.indexOf(this);if(n===i._links.length-1)if(i._setter)i._setter(t);else{var e="set".concat(i._wannabeProp.substring(0,1).toUpperCase()).concat(i._wannabeProp.substring(1));"function"===typeof i._wannabe[e]&&i._wannabe[e](t)}else i._links[n+1].setHost(t)}));this._links.push(e)},startObserving:function t(e){this._links[0].observe(e)},isBroken:function t(){return this._isBroken},unwatch:function t(){var e=this._links.pop();while(e){e.unobserve();e.stopListen("hostPropertyValueChanged");e=this._links.pop()}this._setter=void 0;this._wannabe=void 0;this._wannabeProp=void 0}});var q=n["a"].extend("ChangeWatcher",{init:function t(e){this._chain=e},unbind:function t(){this._chain.unwatch()}});var M={};M.bindProperty=function(t,e,i,n,a){return S(t,e,i,n,a)};M.bindSetter=function(t,e,i,n){return S(t,e,i,n)};function S(){var t;var e;var i;var n;var a;var r;var o;if(4===arguments.length){i=new w(arguments[0]);t=arguments[1];e=arguments[2];a=arguments[3]}else{i=new w(arguments[0],arguments[1]);t=arguments[2];e=arguments[3];a=arguments[4]}var s=e.split(".");n=s[0];for(o=0;o<s.length;o++){r=new C(t,n);i.add(r);t=t&&"function"===typeof t[D(n)]?t[D(n)]():void 0;n=s[o+1]}i.startObserving(a);return new q(i)}function D(t){return"get".concat(t.substring(0,1).toUpperCase()).concat(t.substring(1))}function I(t,e){var i=e.substring(0,1).toUpperCase()+e.substring(1);var n;var a;if("function"!==typeof t["set".concat(i)])return;t[_]||(t[_]={});if(void 0===t[_][e]){n=t["set".concat(i)];a=t.hasOwnProperty("set".concat(i));t["set".concat(i)]=function a(r){var o="function"===typeof t["get".concat(i)]?t["get".concat(i)]():void 0;if("function"===typeof t["get".concat(i)]&&r===o){n.call(t,r);return}n.call(t,r);t.fire(new x(e,o,r))};t[_][e]={observers:1,original:n,isOriginalOwn:a,keep:false}}else t[_][e].observers++}M.getter=D;var k=e["a"]=M},jHdw:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("ESef");var r='<div class="pp-component pp-textarea-component" ng-if="visible" tcl="textarea">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\n\t<div class="value">\n\t\t<div class="lui-textarea simple-textarea" ng-class="{\'lui-invalid\': invalid, \'lui-focused\': active, \'lui-disabled\': readOnly}" ng-style="{\'max-height\': maxHeight}">\n\t\t\t<div class="textarea-wrapper" ng-class="{ \'is-expression\': isExpressionDefinition }">\n\t\t\t\t<textarea type="text" maxlength="{{maxlength}}" rows="{{rows}}" class="lui-textarea wrapped-textarea" placeholder="{{placeholder}}"\n\t\t\t\t\tpp-expression-editor="value" expression-type="{{expressionType}}" editor-disabled="!isLocked()"\n\t\t\t\t\tng-model="displayValue" ng-readonly="readOnly" ng-change="change()"\n\t\t\t\t\tng-model-options="{ updateOn: \'blur\', allowInvalid: true }" pp-input-validator tid="{{key}}"\n\t\t\t\t\tng-focus="focused()" ng-blur="blurred()">\n\t\t\t\t</textarea>\n\t\t\t</div>\n\n\t\t\t<button ng-show="isExpressionDefinition && !readOnly"\n\t\t\t\t\tpp-expression-editor="value"\n\t\t\t\t\texpression-type="{{expressionType}}"\n\t\t\t\t\tclass="lui-fade-button wrapped-button"\n\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--expression edit-expression" ng-class="{\'active\': isExpression()}"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n';var o=e["default"]={template:r,controller:["$scope",function(t){var e=function e(){return t.data};t.rows=t.definition.rows||3;t.maxlength=t.definition.maxlength||a["a"].description;t.maxHeight=t.definition.maxHeight;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);n["a"].defineExpression(t,false,false);n["a"].definePlaceholder(t,t.definition);t.focused=function(){t.active=true};t.blurred=function(){t.active=false}}]}},jRMJ:function(t,e,i){"use strict";var n=i("nHjU");var a=n["a"].extend({paint:function t(e){this._super(e)}});e["a"]=a},jaF1:function(t,e,i){"use strict";e["a"]={convert:n};function n(t,e){if(!t||!e)throw new Error("Missing required parameter(s)");var i=t.data&&t.data.qDef&&t.data.qDef.qDef;if(!i)throw new Error("Unsupported operation: Can not convert a non-measure to dimension");var n=t.data.qDef;var a=e.createFieldDimension("=".concat(t.extractedField),n.qLabel);n.qLabelExpression&&n.qLabelExpression.length&&(a.qDef.qLabelExpression=n.qLabelExpression);return a}},jhii:function(t,e,i){"use strict";i.r(e);e["default"]='<div class="pp-expandable-list-header" qva-activate="expandClicked($event,item);"\n\t ng-style="item.style"\n\t ng-class="{ \'expanded\': item.expanded, \'invalid\': item.isInvalid(), \'disabled\': item.disabled, \'qv-pp-sortable\': item.sortable }">\n\t<span class="priority" ng-if="item.showPriority">{{item.priority}}</span>\n\t<i class="toggle-expand  lui-icon  {{ item.expanded ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }}"></i>\n\t<span class="text" title="{{item.title()}}">{{item.title()}}</span>\n\t<span class="lui-icon lui-icon--handle pp-move-item qv-pp-sortable-handle" ng-if="item.sortable" q-title-translation="Common.Move"></span>\n</div>\n<div class="pp-expandable-list-content" ng-if="item.expanded">\n\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="item.data" x-args="item.args"></div>\n</div>\n'},jwMR:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("6uJb");var r=i("4nJ1");var o='<div class="pp-component pp-switch-component" ng-if="visible" tcl="switch">\n\t<div ng-class="{ \'inverse\': definition.inverse }" class="label" ng-if="definition.context !== \'header\' && label" ng-disabled="readOnly">\n\t\t<div class="title" title="{{label}}">{{label}}</div>\n\t\t<div class="value" title="{{getDescription(value)}}"> {{getDescription(value)}}</div>\n\t</div>\n\n\t<div ng-class="{ \'inverse\': definition.inverse }" class="label" ng-if="definition.context === \'header\'" ng-disabled="readOnly">\n\t\t<div class="title" ng-if="label" title="{{label}}">{{label}}</div>\n\t\t<div class="value" title="{{getDescription(value)}}" ng-class="{ \'only-value\': !label }" > {{getDescription(value)}}</div>\n\t</div>\n\t<lui-switch ng-class="{ \'lui-switch--inverse\': definition.inverse }" x-model="switchValue" x-disabled="readOnly" tid="{{key}}"></lui-switch>\n</div>\n';var s={template:o,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);var i;var o;if("undefined"!==typeof t.definition.trueOption){i=r["a"].extend({value:true},t.definition.trueOption);o=r["a"].extend({value:false},t.definition.falseOption)}else if(true===t.definition.options[0].value){i=t.definition.options[0];o=t.definition.options[1]}else{i=t.definition.options[1];o=t.definition.options[0]}if(i.translation){i.label=a["default"].get(i.translation);delete i.translation;t.trueOption=i}else if("function"===typeof i.label){t.trueOption={value:i.value};Object.defineProperty(t.trueOption,"label",{get:function n(){return i.label(e(),t.args.handler)}})}else t.trueOption=i;if(o.translation){o.label=a["default"].get(o.translation);delete o.translation;t.falseOption=o}else if("function"===typeof o.label){t.falseOption={value:o.value};Object.defineProperty(t.falseOption,"label",{get:function i(){return o.label(e(),t.args.handler)}})}else t.falseOption=o;t.getDescription=function(e){return e===i.value?t.trueOption.label:t.falseOption.label};Object.defineProperty(t,"switchValue",{get:function e(){return t.value===i.value},set:t.definition.interceptor?l:s});function s(e){t.value=e?i.value:o.value;t.change()}function l(e){var i=true;var n=t.definition.interceptorPredicate;"function"===typeof n&&(i=n(e));i?t.definition.interceptor().then((function(t){t&&s(e)})):s(e)}}]};var l=e["default"]=s},k0VT:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("mWu2");var l=i("uVcZ");var c=i("zBv7");var u=i("6uJb");var d=i("4nJ1");var p=i("395F");var f=i("gF9a");var h=i("G1wx");var v=i("sYuT");var g=i("4Ox4");var m=i("8H7g");var b=i("dTxP");var y=i("OnHE");var x=i("VnWy");function _(t,e){if(!t||!e)throw new Error("Missing required parameter")}function C(t){return t.isInvalid&&t.isInvalid()}function w(t,e){_(t,e);return!(t.isInvalid&&t.isInvalid())&&"dimension"===t.type&&!t.data.qLibraryId&&"measures"===e.tid}function q(t,e){_(t,e);return!(t.isInvalid&&t.isInvalid())&&"measure"===t.type&&!t.data.qLibraryId&&("rows"===e.tid||"columns"===e.tid)}var M={isInvalid:C,isMovingDimToMea:w,isMovingMeaToDim:q};var S=i("pvUo");var D=i("jaF1");var I=i("kPub");var k=i("Fbef");var L=i("zr60");var T=i("U7Ny");var E=i("IVN8");var A=i("+Yuz");var P=i("acVu");var O="pp-data-item.ng.html";function R(t){return t.data&&t.data.qLibraryId&&t.data.qLibraryId.length>0}var V=e["default"]={name:"pivot-data",template:g["a"],controller:["$scope","$element","$timeout","luiPopover",function(t,e,i,n){var r=t.args.cache;var g="data_";var _=l["a"].getComponent("items");var C=null;var w=null;var q=null;var T;var E;var V;var N=y["a"].create();var z=x["a"].create(t,n);var F={id:"pp-pseudo-item",templateSrc:"pp-pseudo-item.ng.html",index:-1};function j(){if(q){q.close();q=null}}function H(t){i((function(){var i=e.find(".pp-nm-hcd__lists");var n=e.find("[tid='".concat(t,"'] .pp-nm-hcd__list-items"));var a=n.children().last();a[0]&&(i[0].scrollTop=a[0].offsetTop-1)}),100)}function $(e,i){var n=t.args.handler.createFieldDimension(e.value,"");t.args.handler.addDimension(n,i).then((function(){t.$emit("saveProperties",t.data);j();H(i?"columns":"rows")}))}function B(e,i){var n=t.args.handler.createLibraryDimension(e.libraryId);t.args.handler.addDimension(n,i).then((function(){t.$emit("saveProperties",t.data);j();H(i?"columns":"rows")}))}function W(e){t.args.handler.addLibraryMeasure(e.libraryId).then((function(){t.$emit("saveProperties",t.data);j();H("measures")}))}function G(e){t.args.handler.addExpressionMeasure(e.value,"").then((function(){t.$emit("saveProperties",t.data);j();H("measures")}))}function U(){var e=0;var i=[];var n=[];T.get().forEach((function(t){if("empty-item"!==t.id){i.push(t.index);e++}}));E.get().forEach((function(t){"empty-item"!==t.id&&i.push(t.index)}));V.get().forEach((function(t){"empty-item"!==t.id&&n.push(t.index)}));t.data.qHyperCubeDef.qNoOfLeftDims=e;b["a"].validatePivotHyperCube(t.data.qHyperCubeDef);b["a"].reorderPivotDimensions(t.data.qHyperCubeDef,i);b["a"].reorderMeasures(t.data.qHyperCubeDef,n);t.$emit("saveProperties")}t.getAddLabel=function(){return u["default"].get("properties.add")};function Y(t){if(C){C.close();C=null}t&&t.target.classList.contains("pp-toplist-add-button")&&o.a.preventGestures()}function J(){T.get().forEach((function(t){t.expanded=false;r.put(g+t.id,false)}));E.get().forEach((function(t){t.expanded=false;r.put(g+t.id,false)}));V.get().forEach((function(t){t.expanded=false;r.put(g+t.id,false)}))}function K(e,i){if(q){q=null;return}Y();J();var r={alignTo:i,input:{app:t.args.app,allowExpressionEditor:true,closeAddPopover:j},closeOnEscape:true,dock:"bottom"};var s;if("rows"===e){s=p["a"];r.input.addFieldDimension=$;r.input.addLibraryDimension=B}else if("columns"===e){s=p["a"];r.input.addFieldDimension=function(t){$(t,true)};r.input.addLibraryDimension=function(t){B(t,true)}}else{s=f["a"];r.input.addLibraryMeasure=W;r.input.addExpressionMeasure=G}r.template=s.template;r.controller=s.controller;q=n.show(r);q.closing.then((function(e){if(e){var i=a()(e.target);if(!i.hasClass("pp-nm-di__add-button")&&!i.parents(".pp-nm-di__add-button").length){q=null;o.a.preventGestures()}}t.adding=false}));q.closed.then((function(){q=null}))}function Z(e){if(t.adding){Y();t.adding=false;return}var i=e.currentTarget;C=n.show({template:v["a"].template,controller:v["a"].controller,input:{items:[{translation:"Common.Row",tid:"row",select:function t(){K("rows",i)},disabled:function e(){return t.args.handler.getDimensions().length>=t.args.handler.maxDimensions()}},{translation:"Common.Column",tid:"column",select:function t(){K("columns",i)},disabled:function e(){return t.args.handler.getMeasures().length>=t.args.handler.maxMeasures()}},{translation:"Common.Measure",tid:"measure",select:function t(){K("measures",i)},disabled:function e(){return t.args.handler.getMeasures().length>=t.args.handler.maxMeasures()}}],closeTypeFoldout:Y},alignTo:i});C.closing.then((function(e){e&&!e.target.classList.contains("lui-button__text")&&(t.adding=false)}));C.closed.then((function(){C=null}));t.adding=true}t.addClicked=function(t){Z(t)};t.allowSaveLibrary=L["a"].allowSaveLibrary;t.saveLibraryItem=function(e){var i=e.data.qDef;var n;var a=false;if("measure"===e.type){n=function i(n){L["a"].setNewProperties(t.args.properties,e,n.id,"qMeasures");t.$emit("saveProperties")};L["a"].saveMeasureAsLibrary(i,n)}else{n=function i(n){if(!a){L["a"].setNewProperties(t.args.properties,e,n.id,"qDimensions");t.$emit("saveProperties");a=true}};L["a"].saveDimensionAsLibrary(i,n)}};t.sortableItemLists=m["a"].create({options:{direction:"vertical",listKey:"list",scrollSelector:".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",preventClickDefault:false,gesture:{name:"swipe",options:{radiusThreshold:h["a"].treatAsDesktop()?4:0,preventDefault:false}}},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function t(e){this._super.apply(this,arguments);e.isDragged=true;J();if("dimension"===e.type){if(R(e)||M.isInvalid(e)){V.setLocked(true);V.disabled=true}}else if("measure"===e.type){if(R(e)||!e.isValidExtraction){T.setLocked(true);E.setLocked(true);T.disabled=true;E.disabled=true}V.setLocked(false);V.disabled=false}else if("pp-pseudo-item"===e.id){V.setLocked(true);V.disabled=true}},onMove:function e(i,n){if(-1===this.getIndexOfItem(i)||-1===this.getIndexOfItem(n)){this.onCancel();return false}var a=this.getList(n);var r=a.items.indexOf(n);var o=function e(){t.$emit("saveProperties")};this._super.apply(this,arguments);if(M.isMovingDimToMea(i,a))S["a"].convert(i,i.args.handler).then((function(e){t.args.handler.removeDimension(i.index).then((function(){return t.args.handler.reinsertMeasure(e,r)})).then((function(){o()}))}));else if(M.isMovingMeaToDim(i,a)){var s=D["a"].convert(i,i.args.handler);var l="columns"===a.tid;t.args.handler.removeMeasure(i.index).then((function(){return t.args.handler.reinsertDimension(s,l,r)})).then((function(){o()}))}else U();return true},onMoveToList:function e(i,n){var a=this.getList(i);var r=n.items.length-1;var o=function e(){t.$emit("saveProperties")};var s=this._super.apply(this,arguments);if(!s)return s;if(M.isMovingDimToMea(i,n))S["a"].convert(i,i.args.handler).then((function(e){t.args.handler.removeDimension(i.index).then((function(){return t.args.handler.reinsertMeasure(e,r)})).then((function(){o()}))}));else if(M.isMovingMeaToDim(i,n)){var l=D["a"].convert(i,i.args.handler);t.args.handler.removeMeasure(i.index).then((function(){return t.args.handler.reinsertDimension(l,false,r)})).then((function(){o()}))}else a!==n&&U();return s},onCancel:function t(e){this._super.apply(this,arguments);e&&(e.isDragged=false)},onEnd:function e(i){i&&(i.isDragged=false);T.setLocked(false);E.setLocked(false);V.setLocked(false);T.disabled=false;E.disabled=false;V.disabled=false;t.$apply()}});function Q(){var e=t.getUndraggedItems(T);var i=t.getUndraggedItems(E);var n=e.length+i.length;var a=e.indexOf(F)>-1||i.indexOf(F)>-1;a&&n--;return n}T=t.sortableItemLists.createList(1,{title:u["default"].get("Common.Dimensions"),tid:"rows",hasHeaderlessSibling:true,getAddLabel:t.getAddLabel,addClicked:function t(e){K("rows",e.target)},getUndraggedItemsCount:function t(){return Q()},getMax:function e(){return t.args.handler.maxDimensions()},getItemDescription:function e(i){return t.args.handler.dimensionDefinition.description(t.args.properties,i,{type:"rows"})}});E=t.sortableItemLists.createList(1,{title:u["default"].get("Common.Columns"),tid:"columns",hideHeader:true,getAddLabel:t.getAddLabel,addClicked:function t(e){K("columns",e.target)},getUndraggedItemsCount:function t(){return Q()},getMax:function e(){return t.args.handler.maxDimensions()},getItemDescription:function e(i){return t.args.handler.dimensionDefinition.description(t.args.properties,i,{type:"columns"})}});var X=1;V=t.sortableItemLists.createList(X,{title:u["default"].get("Common.Measures"),tid:"measures",getAddLabel:t.getAddLabel,addClicked:function t(e){K("measures",e.target)},getUndraggedItemsCount:function e(){var i=t.getUndraggedItems(V);return i.length},getMax:function e(){return t.args.handler.maxMeasures()},getItemDescription:function e(i){return t.args.handler.measureDefinition.description(t.args.properties,i)}});t.openGlobalContextMenu=function(e){var i=s["default"].getService("qvContextMenu").menu();var n=t;Object(P["b"])("COPY_PASTE_MEASURE")&&i.addItem({translation:"Common.Paste",tid:"paste",select:function t(){A["a"].pasteItem(J,n)}});w=s["default"].getService("qvContextMenu").show(i,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.openContextMenu=function(e,i){e.stopPropagation();var n=s["default"].getService("qvContextMenu").menu();var a=t;Object(P["b"])("COPY_PASTE_MEASURE")&&n.addItem({translation:"Common.Copy",tid:"copy",select:function t(){A["a"].copyItem(i,a)}});Object(P["b"])("DUPLICATE")&&n.addItem({translation:"Common.Duplicate",tid:"duplicate",select:function e(){t.duplicateItem(i)}});n.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i)}});w=s["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.expandClicked=function(t,e){if(t.target.classList.contains("pp-nm-di__draggable"))return;e.expanded=!e.expanded;r.put(g+e.id,e.expanded);t.stopPropagation()};t.duplicateItem=function(e){if("dimension"===e.type){var i=t.sortableItemLists.getList(e);var n="columns"===i.tid;var a=d["a"].extend(true,{},e.data);delete a.qDef.cId;t.args.handler.addDimension(a,n).then((function(){J();t.$emit("saveProperties")}))}else{var r=d["a"].extend(true,{},e.data);delete r.qDef.cId;t.args.handler.addMeasure(r,false,void 0,true).then((function(){J();t.$emit("saveProperties")}))}};t.removeItem=function(e){"measure"===e.type?t.args.handler.removeMeasure(e.index).then((function(){t.$emit("saveProperties")})):t.args.handler.removeDimension(e.index).then((function(){t.$emit("saveProperties")}))};function tt(){var e=t.data.qHyperCubeDef.qNoOfLeftDims>=0?t.data.qHyperCubeDef.qNoOfLeftDims:t.data.qHyperCubeDef.qDimensions.length;t.sortableItemLists.reset();N.resetTitles();t.data.qHyperCubeDef.qInterColumnSortOrder.forEach((function(i,n){var a=n<e?T:E;var o;if(-1!==i){var s=t.data.qHyperCubeDef.qDimensions[i];var l=s.qDef.cId;var u=t.args.handler.getDimensionLayout(l);var d=N.getCachedDimensionTitle(u);N.getDimensionTitle(u,s,true,t.args.app).then((function(t){d=t}));o={component:_,definition:{type:"items",items:t.definition.items.dimensions.items},data:s,args:t.args,id:l,index:i,type:"dimension",expanded:r.get(g+l)||false,templateSrc:O,markerClass:"pp-dimension",title:function t(){return d},isInvalid:function e(){var i=t.args.handler.getDimensionLayout(l);return i&&!!i.qError&&!c["a"].isCalcCondNotCalculatedErr(i.qError)}}}else-1===i&&(o=F);a.addSortableItem(o)}));t.data.qHyperCubeDef.qMeasures.forEach((function(e,i){var n=e.qDef.cId;var a=t.args.handler.getMeasureLayout(n);a||(a=t.args.handler.getMeasureLayouts()[i]);var o=N.getCachedMeasureTitle(a);var s=z.isChangeable(e);N.getMeasureTitle(a,e,true,t.args.app).then((function(t){o=t}));var l={component:_,definition:{type:"items",items:t.definition.items.measures.items},data:e,args:t.args,id:n,index:i,type:"measure",expanded:r.get(g+n)||false,templateSrc:O,markerClass:"pp-measure",title:function t(){return o},isInvalid:function t(){return a&&!!a.qError}};e.qLibraryId||I["a"].extract(e.qDef.qDef).then((function(t){l.isValidExtraction=t.isValid;l.extractedField=t.field}));if(s){l.canChangeMeasureAggregation=true;l.currentAggregation=z.getAggregation(e.qDef.qDef);l.remainder=z.getRemainder(e.qDef.qDef)}V.addSortableItem(l,X)}))}t.isItemDraggable=function(e){var i="dimension"===e.type;var n=e===F;if(i||n)return true;var a=t.data.qHyperCubeDef.qMeasures.length;var r=a>1;var o=e.isValidExtraction;return r||o};t.showChangeAggregation=function(t){return t.canChangeMeasureAggregation&&!t.isDragged};t.getItemHeaderTitle=function(e){return t.showChangeAggregation(e)?e.remainder:e.title()};t.openChangeAggregationPopover=function(e,i){if(!t.showChangeAggregation(i))return;var n={isOpenButton:function t(e){return e.classList.contains("pp-nm-di__header-aggregation")},onAggregationChanged:function t(e,i){k["a"].gather({expression:e.extractedField,aggregation:i})}};z.openPopover(e,i.id,i,n)};t.isChangeAggregationPopoverOpen=function(t){return z.isPopoverOpen(t.id)};function et(e){var i=t.sortableItemLists.getList(e);var n=t.getUndraggedItems(i);var a=n.indexOf(e);return a}t.showItemDescription=function(t){var e=et(t);return 0===e};t.getItemDescription=function(e){var i=t.sortableItemLists.getList(e);var n=et(e);return i.getItemDescription(n)};t.showNextPossibleItem=function(t){var e=t.getUndraggedItemsCount();var i=t.getMax()-e;return i>0};t.showNextPossibleItemDescription=function(e){var i=t.getUndraggedItems(e);return!i.length};t.getNextPossibleItemDescription=function(e){var i=t.getUndraggedItems(e);return e.getItemDescription(i.length)};t.getUndraggedItems=function(t){return t.get((function(t){return!t.isDragged}))};t.$watchCollection("data.qHyperCubeDef.qDimensions",tt);t.$watchCollection("data.qHyperCubeDef.qMeasures",tt);t.$watchCollection("data.qHyperCubeDef.qInterColumnSortOrder",tt);t.$watch("data.qHyperCubeDef.qNoOfLeftDims",tt);t.$on("$destroy",(function(){Y();j();w&&w.close()}))}]}},kBqq:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div ng-if="visible" class="pp-component pp-image-item-component" ng-class="{ \'item-border\': definition.itemBorder, \'item-interaction\': definition.itemInteractive }" qva-apply-style="style" tcl="image-item">\n\t<img ng-src="{{definition.src}}"></img>\n</div>';var r=i("CpIe");function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}var s={template:a,controller:["$scope",function(t){var e=function e(){return t.data};t.style=(t.definition.width?"width:".concat(i(t.definition.width),";"):"")+(t.definition.height?"height:".concat(i(t.definition.height),";"):"");n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineValue(t,t.definition,e);function i(t){switch(o(t)){case"undefined":case"object":return"";case"string":return t;case"number":default:return"".concat(t,"px")}}}]};var l=e["default"]=s},kPub:function(t,e,i){"use strict";var n=i("sWge");var a=i("Fusc");var r={isValid:s};var o=r;function s(t){if(!t)return false;if(t.isFieldlike)return true;if(t.qualified.isFieldlike)return true;return false}var l={extract:u};var c=e["a"]=l;function u(t){if("string"!==typeof t)throw new Error("Field-extractor: Expression must be a string");var e={field:"",isValid:false};var i=a["a"].classify(t);if(1!==i.count)return n["a"].when(e);var r=i.result.remainder;e.field=r.isQualifier?r.qualified.content:r.content;e.isValid=o.isValid(r);return n["a"].when(e)}},kaF8:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("mWu2");var o=i("2Hli");var s=i("GG1N");var l=i("kp36");var c=i("9Bsw");var u=i("2sMT");var d='<div class="pp-component style-measures" tcl="style-measures">\n  <div class="label" ng-if="label" title={{label}}>\n    {{label}}\n  </div>\n\t<div ng-repeat="item in items()" class="item">\n      <div class="pp-nm-di">    \n        <div class="pp-nm-di__header"\n\t\t ng-class="{ \'expanded\': item.expanded }",\t\t \n     ng-click="toggleExpanded(item)"\n     qva-context-menu="openContextMenu($event, item)">\n      <div class="pp-nm-di__header-title" title="{{item.label()}}">\n        {{item.label()}}\n      </div>\n      <i class="lui-icon pp-nm-di__header-toggle lui-icon--arrow-right" ng-class="{ \'expanded\': item.expanded }"></i>\n    </div>\n    <div class="pp-nm-di__content" ng-if="item.expanded">\n      <div class="pp-nm-di__content-body">\n        <div include-pp-component x-component="itemsComponent" x-definition="item.definition" x-data="item.measureDef" x-args="args"></div>\n      </div>\n    </div>\n  </div>\n\t</div>\n  <button class="lui-button pp-style-measures-add-button" ng-disabled="!canAddMeasure()" ng-class="{\'lui-active\': isAddMeasureOpen()}" ng-click="openAddMeasure($event)" q-translation="Common.Add"></button>\n</div>';var p='<lui-popover class="add-popover-wrapper pp-style-measures-popover">\n\t<div class="lui-popover__body lui-popover__body lui-nopad">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item" \n\t\t\t\tng-repeat="measure in measures" \t\t\t\t\n\t\t\t\tng-click="add(measure)">\n\t\t\t\t<span class="lui-list__text lui-list__action">{{measure.label()}}</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover> ';function f(t){return m(t)||g(t)||v(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(t,e)}function g(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function m(t){if(Array.isArray(t))return b(t)}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var y=e["default"]={template:d,controller:["$scope","luiPopover",function(t,e){var i=o["a"].getValue;var n=t.args,d=n.app,h=n.cache,v=n.handler;var g=t.definition;var m=g.key,b=g.styleEditorRef,y=g.measuresRef,x=g.alternativeMeasuresRef;var _=l["a"].create();var C=c["a"].create();var w={properties:t.args.handler.properties,popover:null,contextMenu:null};s["a"].defineChange(t,t.args.handler);t.itemsComponent=u["default"];var q=function t(e){return i(e,g.ref)};var M=function t(e,i){return i?C.getMeasureTitle(e,d,true):_.getMeasureTitle(v.getMeasureLayout(e.qDef.cId),e,true,d)};var S=function e(i){return{component:"button",translation:"Common.Delete",action:function e(){o["a"].setValue(i,g.ref,void 0);t.change()}}};var D=function e(n){var r=a.a.extend(true,{},t.definition.items);Object.keys(r).forEach((function(t){var e=r[t];var a=q(n);var o=a&&a.length?a.map((function(t){return t.key})).indexOf(t):0;var s=e.ref;e.ref="".concat(g.ref,".").concat(-1===o?0:o,".").concat(s);e.defaultValue=i(w.properties,"".concat(b,".").concat(s))}));r.deleteButton=S(n);return{items:r}};var I=function t(e,i){var n={label:""};M(e,i).then((function(t){n.label=t}));var a=e.qDef;var r="style_measures_".concat(a.cId);var o=q(a);return{key:r,measureDef:a,hasStyling:!!(o&&o.length&&o.some((function(t){return t.key===m}))),label:function t(){return n.label},expanded:h.get(r)||false,alternative:i,definition:D(a)}};var k=[];var L=function t(){k.length=0;k.push.apply(k,f(i(w.properties,y,[]).map((function(t){return I(t,false)}))));k.push.apply(k,f(i(w.properties,x,[]).map((function(t){return I(t,true)}))))};L();t.$on("datachanged",(function(t,e){w.properties=e;L()}));t.canAddMeasure=function(){return k.some((function(t){return!t.hasStyling}))};var T=function t(){return k.filter((function(t){return!t.hasStyling}))};t.items=function(){return k.filter((function(t){return t.hasStyling}))};t.toggleExpanded=function(t){t.expanded=!t.expanded;h.put(t.key,t.expanded)};t.isAddMeasureOpen=function(){return!!w.popover};var E=function e(){if(!t.isAddMeasureOpen())return;w.popover.close();w.popover=null};t.openAddMeasure=function(n){if(t.isAddMeasureOpen()){E();return}w.popover=e.show({template:p,input:{measures:T(),add:function e(n){i(n.measureDef,g.ref)||o["a"].setValue(n.measureDef,g.ref,[]);var a=q(n.measureDef);a.some((function(t){return t.key===m}))||a.push({key:m,style:{}});t.change();E()}},alignTo:n.target,dock:"bottom",closeOnResize:true,closeOnOutside:true});w.popover.closing.then((function(t){t&&!t.target.classList.contains("pp-style-measures-add-button")&&(w.popover=null)}))};t.openContextMenu=function(e,i){var n=r["default"].getService("qvContextMenu").menu();n.addItem({translation:"Common.Delete",tid:"delete",select:function e(){o["a"].setValue(i.measureDef,g.ref,void 0);t.change()}});w.contextMenu=r["default"].getService("qvContextMenu").show(n,{position:{x:e.pageX,y:e.pageY},docking:"Top"})}}]}},kaG6:function(t,e,i){"use strict";var n=i("6uJb");var a={measures:{min:1,max:50,description:function t(){return n["default"].get("Visualizations.Descriptions.Bars")},add:function t(){},move:function t(){},remove:function t(){}}};e["a"]=a},khNO:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("2sMT");var o=i("GG1N");var s='<div class="pp-component pp-expandable-light-component" tcl="expandable-light" ng-if="visible" ng-class="{ \'expanded\': expanded }">\n  <div class="pp-expandable-light-header" ng-click="toggleExpanded()">\n    <i class="toggle-expand  lui-icon  {{ expanded ? \'lui-icon--arrow-down\' : \'lui-icon--arrow-right\' }}"></i>\n    <span class="text" title="{{label}}">{{label}}</span>\n  </div>\n  <div class="pp-expandable-light-content" ng-class="{ \'grouped\': definition.delimited }">\n    <div include-pp-component x-component="itemsComponent" x-definition="definition" x-data="data" x-args="args"></div>\n  </div>\n</div>';var l="updateExpandableHeight";var c={template:s,controller:["$scope","$element","$timeout",function(t,e,i){var n=function e(){return t.data};o["a"].defineLabel(t,t.definition,n,t.args.handler);o["a"].defineVisible(t,t.args.handler);t.itemsComponent=r["default"];t.expanded=false;var s=t.definition.maxHeight||0;var c=function t(){return e.find(".pp-expandable-light-content").first()};var u=function t(e){return e.children().first()};var d=function e(){var i=c();if(!t.expanded){i.css({maxHeight:0});return}var n=u(i);var r=t.expanded?n.height():0;var o=0;n.find(".expanded > .pp-expandable-light-content").each((function(t,e){o+=u(a()(e)).height()}));r+=o;r=Math.max(s,r);i.css({maxHeight:r})};t.toggleExpanded=function(){t.expanded=!t.expanded;d();t.$parent.$emit(l)};t.$on(l,(function(){i().then(d)}));t.$on("datachanged",(function(){i().then(d)}))}]};var u=e["default"]=c},kntI:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("zjn0");var o=i("jaci");var s={};var l=r["a"].supportDirAuto();function c(t){return t.is("textarea,input")&&0===t.val().length||""===t[0].textContent&&0===t.has("img").length}function u(t,e){c(t)?t.css("direction",e):"rtl"!==t.css("direction")&&"ltr"!==t.css("direction")||t.css("direction","")}function d(t,e,i){t.find("div,p").each((function(t,n){e?"auto"!==n.getAttribute("dir")&&n.setAttribute("dir","auto"):n.setAttribute("dir",r["a"].detectTextDirection(n.innerText));u(a()(n),i)}))}s.enable=function(t,e){var i=a()(t);u(i,o["a"].direction);i.attr("dir",r["a"].getAutoOrAlternativeDirection(i[0].innerText));if(e){i.attr("x-auto-direction-for-paragraphs","");d(i,l,o["a"].direction)}i.on("keyup",(function(){l||i.attr("dir",r["a"].detectTextDirection(i[0].innerText));e&&d(i,l,o["a"].direction);u(i,o["a"].direction)}))};e["a"]=s},kp36:function(t,e,i){"use strict";var n=i("TmNk");var a=i.n(n);var r=i("sWge");var o=i("zBv7");var s=i("X13V");var l=i("X8RK");var c=i("JbzQ");function u(){this.measureTitles={};this.dimensionTitles={}}u.prototype.getDimensionTitle=p;u.prototype.getMeasureTitle=f;u.prototype.resetTitles=h;var d=u;function p(t,e,i,n){var a=v(t,this.dimensionTitles);if(a)return a.promise;a=m(t,this.dimensionTitles);a.promise=x(t,e,i,n);return a.promise}function f(t,e,i,n){var a=g(t,this.measureTitles);if(a)return a.promise;a=b(t,this.measureTitles);a.promise=y(t,e,i,n);return a.promise}function h(){this.measureTitles={};this.dimensionTitles={}}function v(t,e){var i=_(t);return e[i]}function g(t,e){var i=_(t);return e[i]}function m(t,e){var i=_(t);var n={id:i,promise:null};e[i]=n;return n}function b(t,e){var i=_(t);var n={id:i,promise:null};e[i]=n;return n}function y(t,e,i,n){if(!t)return r["a"].when("");var o=a.a.measureBase.getLibraryId(e);if(t.qError)return r["a"].when(s["a"].getMeasureError(t.qError.qErrorCode));if(o&&i){if(!n)throw new Error("TitleRetriever: Argument 'app' is required");return l["a"].get(o,n).then((function(t){return t.getProperties()})).then((function(t){return t.qMeasure.qLabel||""}))}var c=void 0!==e.qDef?e.qDef:e;if(!o&&i)return r["a"].when(c.qLabelExpression||c.qLabel||a.a.measureBase.getExpression(e)||t.qFallbackTitle||"");return r["a"].when(t.qFallbackTitle||"")}function x(t,e,i,n){if(!t)return r["a"].when("");var a=e.qLibraryId;var l="H"===t.qGrouping;if(t.qError&&!o["a"].isCalcCondNotCalculatedErr(t.qError))return r["a"].when(s["a"].getDimensionError(t.qError.qErrorCode));if(l||a&&i){if(!n)throw new Error("TitleRetriever: Argument 'app' is required");return c["a"].get(a,n).then((function(t){return t.getLayout()})).then((function(t){return t.qDim.title||""}))}if(!a&&i)return r["a"].when(e.qDef.qLabelExpression||t.qFallbackTitle||"");return r["a"].when(t.qFallbackTitle||"")}function _(t){return t&&t.cId}var C={create:q};var w=e["a"]=C;function q(){return new d}},"kr+q":function(t,e,i){"use strict";var n=i("NFdj");var a=i.n(n);var r=i("n5Vb");var o=i("4nJ1");var s=i("+GbC");function l(t,e){var i=t[0].getBoundingClientRect();var n=e[0].getBoundingClientRect();var a;var r;var o;var s;if(e.is("th, td")){r=e.closest("table")[0].getBoundingClientRect();a=e.prevAll();o=a.length?a.last():e;s=o[0].getBoundingClientRect();if(s.left-r.left===1)return{top:n.top-i.top,left:n.left-1-i.left,width:n.width}}return{top:n.top-i.top,left:n.left-i.left,width:n.width}}var c;var u;var d={open:function t(e,i,n){var s=l(e,i);var d={top:-44+s.top,width:s.width+(n.offsetWidth||0),left:s.left};n.toolbar=o["a"].extend(true,n.toolbar,{position:d,menuMaxHeight:n.menuMaxHeight});c=a.a.element("<div>");u=c.showComponent(r["a"],n);c.appendTo(e);this.Opened.emit()},refresh:function t(){u&&u.refresh()},close:function t(){if(u){u.close();this.Closed.emit();u=void 0}c&&c.remove()},confirm:function t(){if(u){u.confirm();u=void 0}this.close()},focus:function t(){u&&u.focus()}};s["a"].create(d,"Closed");s["a"].create(d,"Opened");e["a"]=d},lIOl:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("6uJb");var r='<div class="pp-component pp-radiobuttons-component" ng-if="visible" tcl="radiobuttons">\n\t<div class="label" ng-if="label" title="{{label}}" ng-class="{ \'disabled\': readOnly }">\n\t\t{{label}}\n\t</div>\n\n\t<div class="value">\n\t\t<div ng-if="!loading">\n\t\t\t<label ng-repeat="option in options" class="lui-radiobutton" title="{{option.tooltip}}" qva-activate="click()">\n\t\t\t\t<input class="lui-radiobutton__input" type="radio" ng-value="option.value" ng-model="value" ng-change="change()" ng-disabled="readOnly">\n\t\t\t\t<div class="lui-radiobutton__radio-wrap">\n\t\t\t\t\t<span class="lui-radiobutton__radio"></span>\n\t\t\t\t\t<span class="lui-radiobutton__radio-text" title="{{option.label}}">{{option.label}}</span>\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class="pp-loading-container" ng-if="loading">\n\t\t\t<div class="pp-loader qv-loader"></div>\n\t\t</div>\n\t\t<div ng-if="errorMessage" class="pp-invalid error">{{errorMessage}}</div>\n\t</div>\n</div>\n';var o={template:r,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineValue(t,t.definition,e);t.options=[];function i(e){t.loading=true;t.errorMessage="";n["a"].fillOptions(t.definition,e||t.data,t.args.handler,t.options,t.args).then((function(){t.errorMessage="";t.loading=false}),(function(){t.errorMessage=a["default"].get("Properties.PromiseFailed");t.loading=false}))}i();t.$on("datachanged",(function(t,e){i(e)}))}]};var s=e["default"]=o},lnqa:function(t,e,i){"use strict";var n=i("b5IE");var a=i("cQOM");var r=i("WoAn");var o=i("MoEg");function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function c(t,e,i){e&&l(t.prototype,e);i&&l(t,i);return t}var u=function(){function t(e,i){s(this,t);this.x=e||0;this.y=i||0}c(t,[{key:"clone",value:function e(){return new t(this.x,this.y)}},{key:"add",value:function t(e){this.x+=e.x;this.y+=e.y}},{key:"dot",value:function t(e){return this.x*e.x+this.y*e.y}},{key:"length",value:function t(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]);return t}();u.add=function(t,e){return t.clone().add(e)};var d=u;var p=["top","left","bottom","right"];var f={top:"left",left:"bottom",bottom:"right",right:"top"};var h={top:"right",left:"top",bottom:"left",right:"bottom"};function v(t,e,i,n,a,r,o){this.cx=t;this.cy=e;this.innerRadius=i;this.radius=n;this.radianOffset=(o<0?o+2*Math.PI:o)%(2*Math.PI);this.start=a;this.start-=this.start>Math.PI?2*Math.PI:0;this.end=r;this.end-=this.end>Math.PI?2*Math.PI:0;this.arcCenter=(a+r)/2%(2*Math.PI);this.x1=t+n*Math.cos(this.start+this.radianOffset);this.y1=e+n*Math.sin(this.start+this.radianOffset);this.x2=t+n*Math.cos(this.end+this.radianOffset);this.y2=e+n*Math.sin(this.end+this.radianOffset);this.x3=t+i*Math.cos(this.start+this.radianOffset);this.y3=e+i*Math.sin(this.start+this.radianOffset);this.x4=t+i*Math.cos(this.end+this.radianOffset);this.y4=e+i*Math.sin(this.end+this.radianOffset)}v.prototype={getDistance:function t(e,i,n,a){var r=Math.abs(e-n);var o=Math.abs(i-a);var s=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));return s},getAngle:function t(e,i,n,a){var r=e-n;var o=i-a;var s=Math.atan2(o,r)-this.radianOffset;s=s<0?s+2*Math.PI:s;s=s>Math.PI?s-2*Math.PI:s;return s},pointInside:function t(e,i){var n=this.getAngle(e,i,this.cx,this.cy);var a=this.getDistance(e,i,this.cx,this.cy);var r=this.start;var o=this.end;if(a>this.radius||a<this.innerRadius)return false;if(n>=r&&n<=o)return true;if(r>o&&(n<=o||n>=r))return true;return false},getDirection:function t(e){e+=Math.PI/4;e<0&&(e+=2*Math.PI);e%=2*Math.PI;var i=3;e>=1.5*Math.PI?i=0:e>=Math.PI?i=1:e>=Math.PI/2&&(i=2);return p[i]},getSecondaryDirection:function t(e){var i=this.getDirection(e);e+=Math.PI/4;return e%(Math.PI/2)>Math.PI/4?h[i]:f[i]},getPoints:function t(){var e=[];e.push({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},{x:this.x3,y:this.y3},{x:this.x4,y:this.y4});return e},getBoundingRect:function t(){var e=Math.min(Math.min(this.x1,this.x2),Math.min(this.x3,this.x4));var i=Math.min(Math.min(this.y1,this.y2),Math.min(this.y3,this.y4));var n=Math.max(Math.max(this.x1,this.x2),Math.max(this.x3,this.x4))-e;var a=Math.max(Math.max(this.y1,this.y2),Math.max(this.y3,this.y4))-i;return new o["a"](e,i,n,a)},getRelevantPosition:function t(){var e=this.cx+this.radius*Math.cos(this.arcCenter+this.radianOffset);var i=this.cy+this.radius*Math.sin(this.arcCenter+this.radianOffset);var n=this.getDirection(this.arcCenter+this.radianOffset);var a=this.getSecondaryDirection(this.arcCenter+this.radianOffset);return{pos:{x:e,y:i},direction:[n,a].concat(a===f[n]?[h[n],f[a]]:[f[n],h[a]])}},intersectsWith:function t(e){return this.intersectsLine(new a["a"](e.x,e.y,e.x+e.width,e.y))||this.intersectsLine(new a["a"](e.x+e.width,e.y,e.x+e.width,e.y+e.height))||this.intersectsLine(new a["a"](e.x,e.y+e.height,e.x+e.width,e.y+e.height))||this.intersectsLine(new a["a"](e.x,e.y,e.x,e.y+e.height))},intersectsLine:function t(e){if(this.pointInside(e.x1,e.y1)||this.pointInside(e.x2,e.y2))return true;if(e.intersectsLine(new a["a"](this.x1,this.y1,this.x4,this.y4))||e.intersectsLine(new a["a"](this.x3,this.y3,this.x2,this.y2)))return true;var i=new r["a"](this.cx,this.cy,this.innerRadius);if(this.innerRadius>0&&i.pointInside(e.x1,e.y1)&&i.pointInside(e.x2,e.y2))return false;var n=new d(e.x2-e.x1,e.y2-e.y1);var o=new d(e.x1-this.cx,e.y2-this.cy);var s=n.dot(n);var l=2*o.dot(n);var c=o.dot(o)-this.radius*this.radius;var u=l*l-4*s*c;var p;var f=[];if(u<0)return false;u=Math.sqrt(u);var h=(-l-u)/(2*s);var v=(-l+u)/(2*s);h>=0&&h<=1&&f.push({x:e.x1+h*n.x,y:e.y1+h*n.y});v>=0&&v<=1&&f.push({x:e.x1+v*n.x,y:e.y1+v*n.y});if(!f.length)return false;for(var g=0;g<f.length;g++){p=this.getAngle(f[g].x,f[g].y,this.cx,this.cy);if(p>=this.start&&p<=this.end)return true;if(this.start>this.end&&(p<=this.end||p>=this.start))return true}return false}};var g=v;var m=Math.PI/2;var b=3*Math.PI/2;var y=2*Math.PI;var x=n["a"].extend("Arc",{init:function t(e,i,n,a,r,o,s){this._super();g.apply(this,[e,i,n,a,r,o,s])},containsPoint:g.prototype.pointInside,intersectsLocalLine:g.prototype.intersectsLine,getLocalPoints:g.prototype.getPoints,intersectsLocalRect:function t(e){return g.prototype.intersectsWith.call(this,e)},getLocalBoundingRect:function t(){var e=[this.x1,this.x2,this.x3,this.x4];var i=[this.y1,this.y2,this.y3,this.y4];var n=(this.start+this.radianOffset)%y;var a=n+this.end-this.start;(n<y&&a>y||n<0&&a>0)&&e.push(this.cx+this.radius);n<m&&a>m&&i.push(this.cy+this.radius);n<Math.PI&&a>Math.PI&&e.push(this.cx-this.radius);(n<b&&a>b||n<-m&&a>-m)&&i.push(this.cy-this.radius);var r=Math.min.apply(null,e);var o=Math.min.apply(null,i);return{x:r,y:o,width:Math.max.apply(null,e)-r,height:Math.max.apply(null,i)-o}},getRelevantPosition:function t(){var e=this.getModelView();var i=g.prototype.getRelevantPosition.call(this);if(e){var n=this.cx+this.radius*Math.cos(this.arcCenter+this.radianOffset);var a=this.cy+this.radius*Math.sin(this.arcCenter+this.radianOffset);var r={x:n,y:a};r=e.transformPoint(r);i.pos.x=r.x;i.pos.y=r.y}return i},set:function t(){g.apply(this,[].slice.call(arguments));this.invalidateBounds()}});Object.keys(g.prototype).forEach((function(t){!x.prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","getRelevantPosition","intersectsRect"].indexOf(t)<0&&(x.prototype[t]=g.prototype[t])}));var _=e["a"]=x},m57d:function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i("4nJ1");var a=i("e5Ml");function r(t,e,i,n,a,r,o){try{var s=t[r](o);var l=s.value}catch(t){i(t);return}s.done?e(l):Promise.resolve(l).then(n,a)}function o(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var o=t.apply(e,i);function s(t){r(o,n,a,s,l,"next",t)}function l(t){r(o,n,a,s,l,"throw",t)}s(void 0)}))}}function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),true).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}var u={qSortByAscii:0,qSortByNumeric:0,qSortByLoadOrder:0};function d(t,e){var i=t||{},n=i.qHyperCubeDef;n=void 0===n?{}:n;var a=n.qDimensions,r=void 0===a?[]:a;return r.find((function(t){var i=t.qDef,n=void 0===i?{}:i;return n.cId===e}))}function p(t){var e=t||{},i=e.qDef;i=void 0===i?{}:i;var n=i.qSortCriterias,a=void 0===n?[{}]:n;a[0]=l(l({},u),a[0]);return a}function f(t){var e=t||{},i=e.qDef;i=void 0===i?{}:i;var n=i.qReverseSort,a=void 0!==n&&n;return a}function h(t){var e=t||{},i=e.search;i=void 0===i?{}:i;var n=i.sorting,r=void 0===n?a["f"]:n;return r}function v(t,e,i){return g.apply(this,arguments)}function g(){g=o(regeneratorRuntime.mark((function t(e,i,r){var o;var s,l,c,u,v,g,m,b,y,x,_;return regeneratorRuntime.wrap((function t(C){while(1)switch(C.prev=C.next){case 0:s=r.fieldName,l=r.cId,c=r.outsideIgnoreNamespace,u=r.alignToElement,v=r.selectionsDeactivatedFn;g={};m=h(i.layout);C.next=5;return i.backendApi.model.getEffectiveProperties();case 5:b=C.sent;y=d(b,l);if(m===a["g"]&&l){x=p(y);_=f(y);_&&(x[0].qSortByState=-1);n["a"].setValue(g,"qListObjectDef.qDef.qSortCriterias",x);n["a"].setValue(g,"qListObjectDef.qDef.qReverseSort",_)}i.layout&&i.layout.qStateName&&(g.qStateName=i.layout.qStateName);(null===y||void 0===y||null===(o=y.qDef)||void 0===o?void 0:o.textAlign)&&n["a"].setValue(g,"qListObjectDef.qDef.textAlign",y.qDef.textAlign);return C.abrupt("return",e.showField(s,i.backendApi.model.app,{$alignToElement:u,qvaOutsideIgnoreFor:c,collision:"flipfit",direction:i.options.direction},g,v));case 11:case"end":return C.stop()}}),t)})));return g.apply(this,arguments)}},mJsV:function(t,e,i){"use strict";var n=i("mWu2");var a=i("8T2z");var r=i.n(a);var o;var s;var l;var c;e["a"]={show:function t(e,i,n){c=n;o=e.showComponent(i,{options:n})},hide:function t(){if(o){o.scope().destroy();o=null;c=null}},closing:function t(){o&&o.closing()},isActive:function t(){if(c&&"function"===typeof c.isActive)return c.isActive();return!!o},getCurrentLayout:function t(){return s},useImageArray:function t(){return l},getOptions:function t(){return c||{}},getMarkdown:function t(){var e=o.scope().getParagraph();var i;if(e){i=e.saveAndGetData();if(i)return i.text}return null},hasContent:function t(e){return e&&"^[\n](left)"!==e},getParagraph:function t(){return o.scope().getParagraph()},getEditorElement:function t(){return o.scope().getEditorElement()},getRange:function t(){return o.scope().currentRange},toHTML:function t(e,i,a){var o=n["default"].getService("$sce");s=i;l=a;if(e){var c=r.a.toHTML(e);e=r.a.toMarkdown(c);return o.getTrustedHtml(r.a.toHTML(e))}return""},toMarkdown:function t(e){if(e)return r.a.toMarkdown(e);return""}}},n5Vb:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("mWu2");var o='<div\n\tqva-direction\n\tclass="qv-selection-toolbar qvt-selection-toolbar"\n\tng-style="toolbar.style"\n\tng-class="{ \'sel-toolbar-card\': !options.isPopover, \'sel-toolbar-popover\': options.isPopover, \'sel-toolbar-click-to-unlock-bg\': locked }"\n\tng-click="locked && toggleLock($event);"\n>\n\t<label class="hidden-screen-reader-label" ng-attr-id="{{\'selections-toolbar-sr-label-\' + $id }}" aria-live="assertive"></label>\n\t<ul\n\t\tclass="sel-toolbar-list"\n\t\trole="group"\n\t>\n\t\t\t<li\n\t\t\t\tng-repeat="item in items"\n\t\t\t\tng-class="[item.clazz, getItemClass(item)]"\n\t\t\t\tng-keydown="handleKeyDown($event, item)"\n\t\t\t\tng-keyup="handleKeyUp($event, item)"\n\t\t\t\ttabindex="-1"\n\t\t\t\tng-attr-aria-haspopup="{{item.ariaHasPopup()}}"\n\t\t\t\tng-attr-aria-isexpanded="{{item.ariaIsExpanded()}}"\n\t\t\t\tng-attr-aria-hidden="{{item.ariaHidden}}"\n\t\t\t\tng-attr-aria-disabled="{{itemIsDisabled(item)}}"\n\t\t\t\tqv-selection-toolbar-template\n\t\t\t>\n\t\t\t</li>\n\t</ul>\n\n\t<qv-selection-toolbar-dropdown></qv-selection-toolbar-dropdown>\n</div>';var s={BUTTON_WIDTH:44,SEPARATOR_WIDTH:1,SELECT_DEFAULT_WIDTH:200,BORDER_SPACING:8,EXTRA_EDGE_PADDING:2,TYPE_BUTTON:"button",TYPE_SEPARATOR:"separator",TYPE_SELECT:"select",TYPE_TEXT:"text",TYPE_CLOSE:"close",MENU_BUTTON_TID:"selection-toolbar.toggleShowMenu",LOCK_BUTTON_TID:"selection-toolbar.lock"};Object.freeze(s);var l=s;var c=i("sWge");var u=i("4nJ1");var d=i("g1uV");var p=i("6uJb");var f=l.TYPE_BUTTON,h=l.TYPE_SELECT,v=l.TYPE_SEPARATOR,g=l.TYPE_TEXT,m=l.TYPE_CLOSE;var b=l.BUTTON_WIDTH,y=l.BORDER_SPACING,x=l.SEPARATOR_WIDTH,_=l.SELECT_DEFAULT_WIDTH,C=l.EXTRA_EDGE_PADDING;var w=l.MORE_BUTTON_TID,q=l.LOCK_BUTTON_TID;var M=function t(e){if(e.component)return e.component;if("sel-toolbar-icon-separator"===e.buttonClass)return v;return f};var S=function t(e){return e.filter((function(t){var e=M(t);return e!==v&&e!==g}))};var D=function t(e){var i={component:f,tid:w,isIcon:true,iconClass:"lui-icon--more",action:function t(i){e.toolbar.showMenu=!e.toolbar.showMenu;e.toolbar.showMenu&&i.originalEvent instanceof KeyboardEvent&&e.$broadcast("focusDropdown")},ariaHasPopup:function t(){return true},ariaIsExpanded:function t(){return e.toolbar.showMenu}};Object.defineProperties(i,{name:{get:function t(){return e.toolbar.showMenu?"Tooltip.CloseSelectionMenu":"Tooltip.SelectionMenu"}},buttonClass:{get:function t(){return e.toolbar.showMenu?"sel-toolbar-icon-toggle menu-active":"sel-toolbar-icon-toggle"}}});return i};var I=function t(e){var i={component:f,tid:q,isIcon:true,clazz:"sel-toolbar-list-item-lockunlock",action:function t(i){e.toggleLock(i)},isDisabled:function t(){return!e.locked&&!e.toolbar.backendApi.hasSelections()}};Object.defineProperties(i,{name:{get:function t(){return e.locked?"SelectionToolbar.ClickToUnlock":"SelectionToolbar.ClickToLock"}},iconClass:{get:function t(){return e.locked?"sel-toolbar-menu-span-icon lui-icon--lock":"sel-toolbar-menu-span-icon lui-icon--unlock"}}});return i};var k=function t(){var e={clazz:"sel-toolbar-unlock",component:g,name:"SelectionToolbar.ClickToUnlock"};return e};var L=function t(){var e={component:m,clazz:"sel-toolbar-list-item-close"};return e};var T=function t(){var e={tid:"sel-toolbar-menu-back",iconClass:"lui-icon--triangle-left",clazz:"back-item",name:"Back"};return e};var E=function t(e){var i=M(e);switch(i){case f:return b+y;case v:return x+y;case h:return(e.width||_)+y;default:return}};var A={totalWidth:0,widths:[],hasItems:function t(){return this.getItemCount()>0},reset:function t(e){this.totalWidth=e;this.widths.length=0},addWidth:function t(e){this.widths.push(e)},removeLastWidth:function t(){this.widths.pop()},getRemainingWidth:function t(){var e=this.widths.reduce((function(t,e){return t+e}),0);return this.totalWidth-e},getItemCount:function t(){return this.widths.length}};var P=function t(e,i,n,a){var r=0;var o;var s;A.reset(i-(y+2*C));for(s=n.length-1;s>=0;s--){o=E(n[s]);if(!(o<=A.getRemainingWidth()))break;A.addWidth(o)}e&&(r+=b+y);(a.length>0||n.length>A.getItemCount())&&(r+=b+y);while(A.hasItems()&&A.getRemainingWidth()<r)A.removeLastWidth();return A.getItemCount()};var O='<button\n  tid="{{item.tid}}"\n  ng-click="itemAction($event, item)"\n  q-title-translation="{{item.name}}"\n  ng-disabled="itemIsDisabled(item)"\n  ng-attr-aria-disabled="{{itemIsDisabled(item)}}"\n  class="sel-toolbar-btn"\n  ng-class="[item.buttonClass, item.isIcon ? \'sel-toolbar-icon\' : \'\', item.isActive(this) ? \'menu-active\' : \'\']"\n  tabindex="-1"\n>\n  <span class="sel-toolbar-span-icon lui-icon" ng-class="item.iconClass" ng-bind-html="item.getSvgIcon()"></span>\n</button>';var R='<select\n  ng-show="shouldShowSelect(item)"\n  ng-disabled="itemIsDisabled(item)"\n  tid="item.tid"\n  q-title-translation="{{item.name}}"\n  ng-style="{width: item.width}"\n  class="lui-select"\n  ng-model="item.value"\n  ng-change="item.action(item)"\n>\n  <option ng-if="item.noSelectOption" value="{{item.noSelectOption.value || \'\'}}">{{item.noSelectOption.label || item.noSelectOption.value || ""}}</option>\n  <option ng-repeat="option in item.options" value="{{option.value}}">{{option.label || option.value}}</option>\n</select>';var V='<p class="sel-toolbar-menu-text" q-translation="{{item.name}}" aria-hidden="true"></p>';var N='<qui-toolbarbutton ng-click="close($event)">\n  <span class="sel-toolbar-menu-text sel-toolbar-btn-close-text" q-translation="Common.Close"></span>\n</qui-toolbarbutton>';var z='<div class="sel-toolbar-icon-separator"></div>';var F;function j(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}var H=l.TYPE_BUTTON,$=l.TYPE_SELECT,B=l.TYPE_SEPARATOR,W=l.TYPE_TEXT,G=l.TYPE_CLOSE;var U=(F={},j(F,H,O),j(F,$,R),j(F,W,V),j(F,G,N),j(F,B,z),F);var Y=U;r["default"].directive("qvSelectionToolbarTemplate",["$compile","$animate",function(t,e){return{link:function i(n,a){e.enabled(a,false);n.$on("setFocusItem",(function(t,e){var i=n.item;i===e&&a.focus()}));n.$watch("item",(function(){var e=n.item;var i=M(e);var r=U[i];a.html(r);t(a.contents())(n)}))}}}]);var J='<ul\n  ng-show="toolbar.showMenu"\n  class="sel-toolbar-menu"\n  ng-style="toolbar.menuStyle"\n  role="group"\n>\n  <li\n    ng-repeat="item in menuItems"\n    class="sel-toolbar-menu-item"\n    tid="{{item.tid}}"\n    q-title-translation="{{item.name}}"\n    tabindex="-1"\n    ng-class="{\n      \'disabled\': itemIsDisabled(item),\n      \'selected\': isItemSelected(item),\n      \'selection-toolbar-menu-table-align-center\': !menuItems.length,\n      [item.clazz]: item.clazz\n    }"\n    ng-keydown="handleKeyDownDropdown($event, item)"\n    ng-keyup="handleKeyUpDropdown($event, item)"\n    ng-click="menuAction($event, item)"\n    ng-attr-aria-disabled="{{itemIsDisabled(item)}}"\n    qv-selection-toolbar-dropdown-item\n  >\n    \x3c!-- Item icon --\x3e\n    <i ng-if="item.iconClass" class="sel-toolbar-menu-span-icon lui-icon" ng-class="item.iconClass"></i>\n\n    \x3c!-- Item label --\x3e\n    <span ng-if="menuItems.length || ( item.name && !item.iconClass )" class="sel-toolbar-menu-text" ng-class="{\'menu-text-without-left-icon\': !item.iconClass, \'menu-text-with-right-icon\': item.items}" q-translation="{{item.name}}"></span>\n\n    \x3c!-- "Click to see more"-icon --\x3e\n    <i ng-if="item.items" class="sel-toolbar-menu-span-icon next-icon lui-list__aside lui-icon lui-icon--triangle-right"></i>\n  </li>\n</ul>';var K=i("acVu");r["default"].directive("qvSelectionToolbarDropdown",[function(){return{template:J,link:function t(e){if(Object(K["b"])("ACC_SEL_MENU")){e.handleKeyDownDropdown=function(t,a){var r,o;switch(t.which){case d["a"].TAB:t.preventDefault();e.toolbar.showMenu=false;null===(r=(o=e.toolbar).onMoveFocus)||void 0===r?void 0:r.call(o,t.shiftKey);break;case d["a"].ARROW_UP:case d["a"].ARROW_LEFT:t.stopPropagation();n(a);break;case d["a"].ARROW_DOWN:case d["a"].ARROW_RIGHT:t.stopPropagation();i(a);break;case d["a"].ENTER:case d["a"].SPACE:t.stopPropagation();break;default:break}};e.handleKeyUpDropdown=function(t,i){switch(t.which){case d["a"].ENTER:case d["a"].SPACE:t.stopPropagation();e.menuAction(t,i);break;case d["a"].ESCAPE:t.stopPropagation();e.$emit("closeDropdownMenu");break;default:break}}}function i(t){var i=e.menuItems,n=void 0===i?[]:i;var a=n.indexOf(t);-1!==a&&a!==n.length-1&&e.$broadcast("setFocusDropdownItem",n[a+1])}function n(t){var i=e.menuItems,n=void 0===i?[]:i;var a=n.indexOf(t);-1!==a&&0!==a&&e.$broadcast("setFocusDropdownItem",n[a-1])}e.$on("focusDropdown",(function(){var t=e.menuItems,i=void 0===t?[]:t;e.$broadcast("setFocusDropdownItem",i[0])}))}}}]);r["default"].directive("qvSelectionToolbarDropdownItem",["$timeout",function(t){return{link:function e(i,n){i.$on("setFocusDropdownItem",(function(e,a){var r=i.item;r===a&&t((function(){return n.focus()}),100)}))}}}]);function Z(t){Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Z(t)}function Q(t){return it(t)||et(t)||tt(t)||X()}function X(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tt(t,e){if(!t)return;if("string"===typeof t)return nt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nt(t,e)}function et(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function it(t){if(Array.isArray(t))return nt(t)}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var at=l.SELECT_DEFAULT_WIDTH;var rt=l.TYPE_BUTTON,ot=l.TYPE_SEPARATOR,st=l.TYPE_SELECT;var lt=l.MORE_BUTTON_TID,ct=l.LOCK_BUTTON_TID;r["default"].componentDirective("qvaIncludeSelectionToolbar",{toolbar:"=",options:"="});var ut={template:o,controller:["$scope","$element","$timeout",function(t,e,i){var n=this;var o=Object(c["a"])();var s=o.promise;var l={};var f;t.items=[];t.menuItems=[];t.levels=[];t.selectionInfo={show:false,selected:0,total:0};t.locked=false;t.lassoEnabled=false;function h(i){var n=p["default"].get(i);e.find("#selections-toolbar-sr-label-".concat(t.$id)).text(n)}if(Object(K["b"])("ACC_SEL_MENU")){t.handleKeyDown=function(e,i){var n,a;switch(e.which){case d["a"].TAB:e.stopPropagation();e.preventDefault();h("");null===(n=(a=t.toolbar).onMoveFocus)||void 0===n?void 0:n.call(a,e.shiftKey);break;case d["a"].ARROW_UP:case d["a"].ARROW_LEFT:e.stopPropagation();g(i);break;case d["a"].ARROW_DOWN:case d["a"].ARROW_RIGHT:e.stopPropagation();v(i);break;case d["a"].ENTER:case d["a"].SPACE:y(e,i);break;default:break}};t.handleKeyUp=function(e,i){var n=t.toolbar.selectionsApi;switch(e.which){case d["a"].ENTER:case d["a"].SPACE:e.stopPropagation();break;case d["a"].ESCAPE:e.stopPropagation();n.cancel();v(i);break;default:break}};t.$on("closeDropdownMenu",(function(){m();t.toolbar.showMenu=false}));t.$on("focusSelectionsToolbar",(function(){n.focus()}))}function v(e){var i=t.items,n=void 0===i?[]:i;var a=S(n);var r=a.indexOf(e);-1!==r&&r!==a.length-1&&t.$broadcast("setFocusItem",a[r+1])}function g(e){var i=t.items,n=void 0===i?[]:i;var a=S(n);var r=a.indexOf(e);-1!==r&&0!==r&&t.$broadcast("setFocusItem",a[r-1])}function m(){var e=t.items,i=void 0===e?[]:e;var n=i.filter((function(t){return t.tid===lt}));t.$broadcast("setFocusItem",n[0])}function b(){var e=t.items,i=void 0===e?[]:e;var n=i.filter((function(t){return t.tid===ct}));t.$broadcast("setFocusItem",n[0])}function y(e,n){if(n&&!t.itemIsDisabled(n)){"string"===typeof n.actionSrMessage&&h(n.actionSrMessage);i((function(){t.itemAction(e,n)}),0)}}function x(t,e){t._componentId=e;t.items&&t.items.forEach((function(t){t._componentId=e}))}function _(e){e.forEach((function(t){t._componentId&&x(t,t._componentId)}));t.menuItems=e}function C(t){t.forEach((function(t){x(t,t._componentId||u["a"].generateId());l[t._componentId]=t}))}function w(){var e=t.toolbar;var i=[].concat(e.buttons);var n=[].concat(e.menuButtons);var a=e.showLock||t.locked;var r=P(a,e.style.width,i,n);var o=[];t.items=[];t.levels=[];var s=i.concat(n).filter((function(t){return t.component}));C(s);if(!t.locked){for(var l=0;l<r&&i.length;++l){var c=i.pop();c.component?o.push(c):t.items.push(c)}t.items.reverse()}i.forEach((function(t){M(t)!==ot&&n.unshift(t)}));_(n);!t.locked&&n.length>0&&t.items.unshift(D(t));a&&t.items.unshift(I(t));t.locked&&t.items.push(k());t.locked&&t.options.smallDevice&&t.items.push(L());q(o)}this.layoutItems=w;function q(e){e.forEach((function(e){switch(e.component){case st:var i={width:at};var n=u["a"].extend(true,i,e);u["a"].extend(e,n);t.items.unshift(e);break;default:throw new Error("Selection toolbar component: ".concat(e.component," was not recognized"))}}))}this.confirm=function(){var e=t.toolbar.selectionsApi;e.confirm()};this.close=function(){t.destroyComponent()};this.focus=function(){var e=t.items,i=void 0===e?[]:e;var n=S(i);h("SelectionsToolbar.FocusInSelectionsMenuSrMessage");n.length&&t.$broadcast("setFocusItem",n[n.length-1])};this.refresh=function(){r["default"].$apply(t)};function E(){f=null;var e=t.levels.pop();_(e.items)}function A(e){var i=[T()].concat(Q(e));t.levels.push({items:t.menuItems});_(i)}function O(t){return l[t]}t.shouldShowSelect=function(e){var i=!t.locked&&(void 0===e.show||"boolean"===typeof e.show&&false!==e.show||"function"===typeof e.show&&e.show(e.value));return!!i};t.itemAction=function(e,i){e.originalEvent.preventDefault();e.stopPropagation();i.action.call(t.toolbar,e)};t.itemIsDisabled=function(e){switch(Z(e.isDisabled)){case"function":return!!e.isDisabled.call(t.toolbar);case"boolean":return e.isDisabled;default:return false}};t.getItemClass=function(t){var e=M(t);switch(e){case rt:return"sel-toolbar-list-item";default:return""}};t.isItemSelected=function(t){var e=t.items;var i=O(t._componentId)||{};var n=!e&&t._componentId&&t.hasOwnProperty("value")&&i.value===t.value;return!!n};t.menuAction=function(e,i){e.originalEvent.preventDefault();if(t.itemIsDisabled(i))return;var n="LI"===e.target.tagName?a()(e.target):a()(e.target).parents("li");var r=n.scope();var o=i.tid;if(i&&i.items){f=r;A(i.items)}else if("sel-toolbar-menu-back"===o)E();else{f&&E();var s=i.action||f&&f.action;if(!s)throw Error("selection-toolbar: menu item has no action function defined");s.call(t.toolbar,i);t.toolbar.showMenu=!t.toolbar.showMenu;!t.toolbar.showMenu&&e.originalEvent instanceof KeyboardEvent&&m()}};t.toggleLasso=function(){t.lassoEnabled=!t.lassoEnabled;t.toolbar.toggleLasso(t.lassoEnabled)};function R(n){t.locked=n;t.toolbar.showMenu=false;s.then((function(){var t=e[0].contains(document.activeElement);w();Object(K["b"])("ACC_SEL_MENU")&&t&&i((function(){b()}))}))}t.toggleLock=function(e){e.originalEvent.preventDefault();e.stopPropagation();var i=t.toolbar,n=i.backendApi,a=i.selectionsApi;if(n.isLocked()){a.selectionsMade=true;n.unlock()}else n.lock()};t.close=function(e){e.originalEvent.preventDefault();e.stopPropagation();var i=t.toolbar.selectionsApi;i.confirm()};t.$watch("toolbar.backendApi.isLocked()",(function(t){void 0!==t&&R(!!t)}));t.$watch("toolbar.position",(function(e){if(!e)return;t.toolbar.style=e;o.resolve();R(!!t.toolbar.backendApi.isLocked&&t.toolbar.backendApi.isLocked())}));t.$watch("toolbar.menuMaxHeight",(function(e){if(!e)return;t.toolbar.menuStyle={maxHeight:e}}));t.$watch("options.lassoEnabled",(function(e){t.lassoEnabled=e}))}]};var dt=e["a"]=ut},n7pR:function(t,e,i){"use strict";var n=i("GF7R");var a=i("UV1h");var r={Theme:a["a"],TRANSPARENT_BLACK:"rgba( 0,0,0,0.2 )",TRANSPARENT_WHITE:"rgba( 255,255,255,0.7 )",LIGHT_GREY:"#ccc",DARK_GREY:"#666",BLACK:"#000",WHITE:"#fff",getInverse:function t(e){var i=new n["a"](e);var a=i.getAlpha();if(0===a)return this.BLACK;return i.isDark()?this.WHITE:this.BLACK},getContrastingGrey:function t(e){var i=new n["a"](e);var a=i.getAlpha();if(0===a)return this.DARK_GREY;return n["a"].getBestContrast(i,new n["a"](r.LIGHT_GREY),new n["a"](r.DARK_GREY))},getBestContrast:function t(e,i,a){return n["a"].getBestContrast(new n["a"](e),new n["a"](i),new n["a"](a))},getContrastingTransparent:function t(e){var i=new n["a"](e);var a=i.getAlpha();if(0===a||"none"===e)return this.TRANSPARENT_BLACK;return i.isDark()?this.TRANSPARENT_WHITE:this.TRANSPARENT_BLACK},getStyle:function t(e,i,n){e=e||"";this["".concat(e,"StyleService")]||(this["".concat(e,"StyleService")]=a["a"].initializeService("object.".concat(e)));return this["".concat(e,"StyleService")].getStyle(i,n)},getFontSize:function t(e,i,n){e=e||"";this["".concat(e,"StyleService")]||(this["".concat(e,"StyleService")]=a["a"].initializeService("object.".concat(e)));var r=this["".concat(e,"StyleService")];return r.scaleFontSize(r.getStyle(i,"fontSize"),n)}};e["a"]=r},nHjU:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("sWge");var o=i("Nc9l");var s=i("8fQa");function l(t,e){var i;this._validating=true;if(this._invalidatedProperties&&(!t||t&&t.includes("properties"))){i=u.call(this);i&&"function"===typeof i.then&&this._pendingDfds.push(i)}if(this._invalidatedDisplay&&(!t||t&&t.includes("display"))){i=c.call(this);i&&"function"===typeof i.then&&this._pendingDfds.push(i)}this._validating=false;this._invalidated=this._invalidatedDisplay||this._invalidatedProperties;if(this._invalidated){if(!t){var n=this;var a=this.dfd;this._timer=s["a"].request((function(){n._validate(null,a)}))}}else if(this._pendingDfds.length){r["a"].all(this._pendingDfds).then((function(){e.__qvState=1;e.resolve()})).catch((function(t){false}));this._pendingDfds=[]}else{e.__qvState=1;e.resolve()}}function c(){var t=this._updateDisplay();this._invalidatedDisplay=false;this.__invalidators.display=[];return t}function u(){var t=this._updateProperties();this._invalidatedProperties=false;this.__invalidators.properties=[];return t}function d(){if(!this._invalidated&&!this._validating&&!this._released){var t=this;this._invalidated=true;var e=Object(r["a"])();e.__qvState=0;e.__id=++this._dfdCount;this.dfd=e;this._timer=s["a"].request((function(){t._validate(null,e)}))}if(this.dfd)return this.dfd.promise;return}var p=o["a"].extend("Invalidatable",{init:function t(){this._super();this.__invalidators={size:[],display:[],properties:[]};this._pendingDfds=[];this._dfdCount=0},invalidate:function t(){if(this._released)return r["a"].reject();return d.call(this)},invalidateProperties:function t(e){if(this._released)return r["a"].reject();if(!this._invalidatedProperties){this._invalidatedProperties=true;d.call(this)}this.__invalidators.properties.push(e);return this.dfd.promise},invalidateDisplay:function t(e){if(this._released)return r["a"].reject();if(!this._invalidatedDisplay){this._invalidatedDisplay=true;d.call(this)}this.__invalidators.display.push(e);return this.dfd.promise},validateNow:function t(){this._invalidated=true;this.updateNow();return this},updateNow:function t(e){if(this._invalidated&&!this._validating){var i=e&&e.includes("display")===this._invalidatedDisplay;var n=e&&e.includes("properties")===this._invalidatedProperties;if(!e||i&&n){s["a"].cancel(this._timer);this._timer=null}this._validate(e,this.dfd)}return this},_update:function t(){return this},_updateDisplay:function t(){},_updateProperties:function t(){},cancel:function t(){s["a"].cancel(this._timer);this._invalidatedProperties=false;this.__invalidators.properties=[];this._invalidatedDisplay=false;this.__invalidators.display=[];this._invalidated=false;if(this.dfd){this.dfd.__qvState=2;this.dfd.reject()}},release:function t(){this._released=true;this.cancel();this.dfd=null},_validate:function t(e,i){l.call(this,e,i)}});var f=i("4nJ1");function h(t){h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return h(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function m(t,e,i){e&&g(t.prototype,e);i&&g(t,i);return t}var b=function(){function t(e,i,n,a){v(this,t);this.namespace=".transitionhelper";this._updateCallback=e;this._endCallback=i;this._transitionTime=n||500;this._scope=a;this._inAnimation=false;this._transitionProgress=0;this._lastFrame=false;this._animationCallback=function(){return null};this._initiateAnimation=true;this._transitionEnabled=true;this._transitionDelay=0;this._transitionCurve=""}m(t,[{key:"transition",value:function t(e,i,n,a,o,s){var l=this;var c=Object(r["a"])();this._oldValues=e;this._currentValues=i;this._newValues=n;this._updateCallback=o;this._endCallback=a;this._scope=s;_.apply(this,[e,i]);this._initiateAnimation=true;this._inAnimation||this._lastFrame?c.resolve():this._transitionDelay>0?this._transitionTimeout=setTimeout((function(){C.apply(l,[e,i,n,c])}),this._transitionDelay):C.apply(this,[e,i,n,c]);return c.promise}},{key:"clear",value:function t(){clearInterval(this._animationCallback);clearTimeout(this._transitionTimeout);this._inAnimation=false;this._lastFrame=true;this._transitionProgress=1}},{key:"setTransitionTime",value:function t(e){this._transitionTime=e}},{key:"setDelay",value:function t(e){this._transitionDelay=e}},{key:"setTransitionCurve",value:function t(e){this._transitionCurve=e}}],[{key:"checkEqual",value:function e(i,n){for(var a in n){if(!(a in i))return false;if(h(n[a])!==h(i[a]))return false;if(Array.isArray(n[a])){if(!t.checkEqual(i[a],n[a]))return false}else if(n[a]!==i[a]&&void 0!==i[a]&&!("number"===typeof n[a]&&"number"===typeof i[a]&&Number.isNaN(+n[a])&&Number.isNaN(+i[a])))return false}return true}}]);return t}();function y(t,e,i,n){_.apply(this,[t,e]);var a=false;var r=this;var o=b.checkEqual(t,i);for(var s in i)void 0===t[s]&&(a=true);if(o){r._endCallback&&r._endCallback.call(r._scope);n.resolve();return}if(a){f["a"].extend(e,i);f["a"].extend(t,i);r._endCallback&&r._endCallback.call(r._scope);n.resolve();return}var l=this._transitionTime;var c=Date.now();this._inAnimation=true;this._initiateAnimation=false;this._transitionProgress=0;f["a"].extend(e,x(t,e,i,0));this._animationCallback=setInterval((function(){var a=(Date.now()-c)/l;var o;if(a>1){clearInterval(r._animationCallback);f["a"].extend(e,x(t,e,i,1));r._updateCallback&&r._updateCallback.call(r._scope);r._inAnimation=false;r._lastFrame=true;r._transitionProgress=1}else{switch(r._transitionCurve){case"linear":o=a;break;case"easeout":o=Math.sin(Math.PI*a/2);break;case"easein":o=1-Math.cos(Math.PI*a/2);break;default:o=(1+Math.cos(Math.PI*(1+a)))/2;break}r._transitionProgress=o;f["a"].extend(e,x(t,e,i,o));r._updateCallback&&r._updateCallback.call(r._scope)}if(a>1){e=f["a"].extend({},i);r._endCallback.call(r._scope);n.resolve()}}),15)}function x(t,e,i,n){var a;var r=function t(e,r){f["a"].extend(e,x(e,i[a][r],n))};var o=function t(e,i,r){i[a]=x(e[a],i[a],r[a],n)};if(n<=0)return t;if(n>=1)return i;for(a in t){if(!t&&i){void 0!==i.opacity&&(e.opacity=n);e=f["a"].extend(e,i);continue}if(t&&!i){void 0!==t.opacity&&(e.opacity=1-n);continue}t[a]instanceof Array?t[a].forEach(r):Number.isNaN(+t[a])&&t[a]instanceof Object&&o(t,e,i);t[a]&&!i[a]&&(e[a]=i[a]);if(null===t[a]||null===i[a]||Number.isNaN(+t[a])||Number.isNaN(+i[a]))continue;e[a]=t[a]*(1-n)+i[a]*n}return e}function _(t,e){f["a"].extend(t,e);clearInterval(this._animationCallback);this._inAnimation=false;this._lastFrame=false}function C(t,e,i,n){this._inAnimation||this._initiateAnimation&&this._transitionEnabled?y.call(this,t,e,i,n):n.resolve()}var w=b;var q=i("MoEg");var M=i("lnqa");var S=i("qZHi");function D(t){D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return D(t)}function I(t){if(!this._$renderAreaWrap)return;this.containerRect=new q["a"](this.rect.x*this.layoutToContainerRatios.x||1,this.rect.y*this.layoutToContainerRatios.y||1,this.rect.width*this.layoutToContainerRatios.x||1,this.rect.height*this.layoutToContainerRatios.y||1);this.container.style.left="".concat(this.containerRect.x,"px");this.container.style.top="".concat(this.containerRect.y,"px");this.container.style.width="".concat(this.containerRect.width,"px");this.container.style.height="".concat(this.containerRect.height,"px");var e=this.isVisible(t)&&0!==this.rect.width&&0!==this.rect.height?"block":"none";this.container.style.display!==e&&(this.container.style.display=e)}function k(t,e){return w.checkEqual(t,e)}function L(t){if(!t)return"";t=t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())}));return t.replace(/^-/,"")}var T=p.extend("ChartComponent",{init:function t(e,i,n){this._super();this.testId=n;this.options=a.a.extend(true,{},{dock:"center",show:true,relevantSize:0,showFlag:this.ShowFlags.SPARK,components:{}},i);this.rect=new q["a"];this._transitionHelper=new w;this._transitionHelper.setTransitionCurve("easein");this._oldProperties={};this._currentProperties={};this._transitionProperties={};this._useTransition=false;this.outerRect=new q["a"];this.containerRect=new q["a"];this.layoutToContainerRatios={x:1,y:1};this.renderers={};this.dock=this.options.dock;this.show=this.options.show;this.isMini=this.options.isMini;this.relevantSize=this.options.relevantSize;this.showFlag=this.options.showFlag;this.layoutOrder=this.options.order||1;this.reductionOrder=this.options.reductionOrder;this.parentContainer=e;this.components=this.options.components;this.selectionIdentifier=this.options.label;this._selectionIndices=[0];this.chartFormatter=null;this.measureFormatters=[];this._globalAlpha=1;this._hasValidData=false;this._createRenderArea();try{var r=i&&i.tcl?i.tcl:L(this.constructor.name);r&&this._$renderAreaWrap[0].setAttribute("tcl",r)}catch(t){}this.chartScale=1;this._edgeBleed={top:0,bottom:0,left:0,right:0}},ShowFlags:{SPARK:1,XSMALL:2,SMALL:4,MEDIUM:8,FULL:16},setData:function t(e){this._data=e;return this.invalidateProperties("ChartComponent.setData")},getTransformedShape:function t(e){var i;var n=this.layoutToContainerRatios.x||1;var a=this.layoutToContainerRatios.y||1;if(e instanceof q["a"])i=new q["a"](e.x*n,e.y*a,e.width*n,e.height*a);else if(e instanceof M["a"]){var r=e.getModelView();var o={x:e.cx*n,y:e.cy*a};r&&(o=r.transformPoint(o));i=new M["a"](o.x,o.y,Math.min(n,a)*e.innerRadius,Math.min(n,a)*e.radius,e.start,e.end,e.radianOffset)}return i},getTransformedPoint:function t(e,i){return{x:e*this.layoutToContainerRatios.x||1,y:i*this.layoutToContainerRatios.y||1}},getOriginalPoint:function t(e,i){return{x:e/this.layoutToContainerRatios.x||1,y:i/this.layoutToContainerRatios.y||1}},setLayoutMode:function t(e){if(this._layoutMode===e)return;this._layoutMode=e;var i=/\s*qv-layout-\S+\s*/g;var n=this._layoutMode?" qv-layout-".concat(S["a"].getLayoutModeKey(e)):"";this.container.className.match(i)?this.container.className=this.container.className.replace(/\s*qv-layout-\S+/g,n):this.container.className+=n;this.invalidateDisplay("ChartComponent.setLayoutMode")},getLayoutMode:function t(){return this._layoutMode},setVerticalLayoutMode:function t(e){this._verticalLayoutMode=e},setHorizontalLayoutMode:function t(e){this._horizontalLayoutMode=e},setSelectableShapes:function t(e){this._selectableShapes=e},getSelectableShapes:function t(){return this._selectableShapes||[]},getSelectedCacheItems:function t(){var e;var i=this._selectableShapes?this._selectableShapes.length:0;var n=[];for(e=0;e<i;e++)this._selectableShapes[e].selected&&n.push(this._selectableShapes[e]);return n},getRect:function t(){return this.rect},setRect:function t(e,i,n,a){this.rect.set(e,i,n,a)},setUseTransition:function t(e){this._useTransition=e},getUseTransition:function t(){return this._useTransition},getTransitionHelper:function t(){return this._transitionHelper},setOuterRect:function t(e,i,n,a){this.outerRect.set(e,i,n,a)},setLayoutToContainerRatios:function t(e,i){this.layoutToContainerRatios={x:e,y:i}},setContainerRect:function t(e,i,n,a){this.containerRect.set(e,i,n,a)},setSelectionIndices:function t(e){if(!e||!(e instanceof Array))throw new Error("invalid input, selectionsIndices has to be an Array");this._selectionIndices=e},getSelectionIndices:function t(){return this._selectionIndices},setSelectionLocked:function t(e){this._selectionLocked=e},isSelectionLocked:function t(e){e=e||this._data;var i=this.getSelectionIndices();if(!e||!Array.isArray(i)||!i.length)return this._selectionLocked;return!e.qHyperCube.qDimensionInfo.filter((function(t,e){return-1!==i.indexOf(e)}),this).some((function(t){return true!==t.qLocked}))},setYMirrorMode:function t(e){this.yMirrorMode=e;this.readDirection=this.yMirrorMode?"rtl":"ltr"},setDock:function t(e){switch(e){case"left":case"top":case"right":case"bottom":case"center":break;default:throw new Error("".concat(e," invalid parameter"))}this.options.dock=e;this.dock=e},getOppositeDock:function t(){var e=this.options.dock;switch(e){case"left":return"right";case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"center":return"center";default:throw new Error("".concat(e," invalid parameter"))}},isHorizontal:function t(){var e=this.options.dock;switch(e){case"top":case"bottom":return true;default:return false}},isVertical:function t(){var e=this.options.dock;switch(e){case"left":case"right":return true;default:return false}},showComponent:function t(){this.show=this.options.show;if(this.renderers)for(var e in this.renderers)this.renderers[e].show()},hideComponent:function t(){this.show=false;if(this.renderers)for(var e in this.renderers)this.renderers[e].hide()},getFormatter:function t(){return this._formatter||this.measureFormatters[0]||{format:function t(e){return e.toString()}}},isVisible:function t(e){void 0===e&&(e=this._layoutMode);var i=this.showFlag;var n=e;if("object"===D(i)){"whenVertical"in i&&(i=this.isVertical()?i.whenVertical:i.whenHorizontal);if("vertical"in i)return this.show&&!!(i.vertical&this._verticalLayoutMode)&&!!(i.horizontal&this._horizontalLayoutMode)}return this.show&&!!(i&n)},setHasValidData:function t(e){this._hasValidData=e},hasValidData:function t(){return this._hasValidData},calculateRelevantSize:function t(){this.relevantSize=this.options.relevantSize},reduceLayoutRect:function t(e){switch(this.dock){case"top":e.y+=this.relevantSize;e.height-=this.relevantSize;break;case"bottom":e.height-=this.relevantSize;break;case"left":e.x+=this.relevantSize;e.width-=this.relevantSize;break;case"right":e.width-=this.relevantSize;break;default:break}},insertAdjacentTo:function t(e,i){switch(this.dock){case"top":this.rect.x=e.x;this.rect.y=e.y-this.relevantSize;this.rect.width=e.width;this.rect.height=this.isVisible(this._layoutMode)?this.relevantSize:0;if(i){e.y-=this.relevantSize;e.height+=this.relevantSize}break;case"bottom":this.rect.x=e.x;this.rect.y=e.getBottom();this.rect.width=e.width;this.rect.height=this.isVisible(this._layoutMode)?this.relevantSize:0;i&&(e.height+=this.relevantSize);break;case"left":this.rect.x=e.x-this.relevantSize;this.rect.y=e.y;this.rect.width=this.isVisible(this._layoutMode)?this.relevantSize:0;this.rect.height=e.height;if(i){e.x-=this.relevantSize;e.width+=this.relevantSize}break;case"right":this.rect.x=e.getRight();this.rect.y=e.y;this.rect.width=this.isVisible(this._layoutMode)?this.relevantSize:0;this.rect.height=e.height;i&&(e.width+=this.relevantSize);break;case"center":this.rect.x=e.x;this.rect.y=e.y;this.rect.width=e.width;this.rect.height=e.height;break;default:break}},_updateProperties:function t(){return this._transition()},_updateDisplay:function t(){if(!this.hasValidData())return this.clear();if(this.isVisible(this._layoutMode)&&this.rect.width>0&&this.rect.height>0)return this.paint(this._layoutMode,this._data);return r["a"].resolve()},updateSize:function t(){I.call(this,this._layoutMode);for(var e in this.renderers){this.renderers[e].setDimensions(0,0,this.rect.width,this.rect.height);this.renderers[e].setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y)}this._windowSizeMultiplier=Math.min(Math.min(this.rect.width,this.rect.height)/600,1)},_transition:function t(){if(this._useTransition)if(k(this._currentProperties,this._transitionProperties))this._onAnimatitonEnd();else{this._inTransition=true;this._transitionHelper.transition(this._oldProperties,this._currentProperties,this._transitionProperties,this._onAnimatitonEnd,this._updateDisplay,this)}else{a.a.extend(this._currentProperties,this._transitionProperties);a.a.extend(this._oldProperties,this._transitionProperties);this.invalidateDisplay("onAnimatitonEnd")}},paint:function t(){},setGlobalOpacity:function t(e,i){this._globalAlpha=e;i||this.invalidateDisplay("ChartComponent.setGlobalOpacity")},_createRenderArea:function t(){if(!this.parentContainer)return;this.container=document.createElement("div");this._$renderAreaWrap=a()(this.container);this._$renderAreaWrap.attr("tid",this.testId);this._$renderAreaWrap.css({position:"absolute"}).addClass("qv-chart-component");this.parentContainer.appendChild(this.container)},_onAnimatitonEnd:function t(){this._inTransition=false;this._oldProperties=a.a.extend(true,{},this._transitionProperties);this.invalidateDisplay("onAnimatitonEnd")},invalidateProperties:function t(e){return this._super(e).catch((function(t){false}))},invalidateDisplay:function t(e){return this._super(e).catch((function(t){false}))},release:function t(){this._super();if(this.renderers)for(var e in this.renderers)this.renderers[e].release();this.container=null;this._$renderAreaWrap=null;this._selectableShapes=null;this._transitionHelper.clear()},clear:function t(){var e=[];if(this.renderers)for(var i in this.renderers)e.push(this.renderers[i].clear());return r["a"].all(e)},on:function t(){this._on=true},off:function t(){this._on=false}});var E=e["a"]=T},nQ1F:function(t,e,i){"use strict";i.r(e);var n='<div class="pp-component pp-header-parent-link" ng-if="args.headerLabel">\n\t<div class="property-sub-header" ng-click="args.headerAction()">\n\t\t<div class="header-wrapper">\n\t\t\t<div class="back-navigation">\n\t\t\t\t<span class="lui-icon back-icon  lui-icon--previous  lui-icon--small"></span>\n\t\t\t</div>\n\t\t\t<div class="text-wrapper">\n\t\t\t\t<div class="navigation-title">{{args.headerLabel}}</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="pp-component pp-header-with-switch-component" tid="assistance-header" tcl="switch">\n\t<div class="header-with-switch-icon">\n\t\t<span class="type-icon lui-icon lui-icon--{{iconName}}" ng-class="className"></span>\n\t</div>\n\t<div class="switch-container" ng-if="!disableAutoChart">\t\t\t\n\t\t\t<div class="label" ng-if="label" ng-show="shouldHideToggleSwitch" title="{{label}}">\n\t\t\t\t{{label}}\n\t\t\t</div>\n\t\t\t<div ng-hide="shouldHideToggleSwitch" \n\t\t\t\t include-pp-component \t\t\t\t\n\t\t\t\t x-component="switchComponent.component" \n\t\t\t\t x-definition="switchComponent.definition" \n\t\t\t\t x-data="switchComponent.data" \n\t\t\t\t x-args="switchComponent.args"></div>\t\t\n\t</div>\n</div>\n';var a=i("2n0V");var r=i("fca/");function o(t){t.properties.qUndoExclude.generated.qStateName=t.properties.qStateName;t.properties.qUndoExclude.generated.containerChildId=t.properties.containerChildId;return t.setFullPropertyTree({qProperty:t.properties.qUndoExclude.generated,qChildren:[]}).then((function(){return t}))}function s(t){var e=t.layout.visualization;var i="auto-chart";return a["a"].getType(e).getExtensionType().then((function(e){return r["a"].convertChart(e,i,t)}))}var l={convertToAutoChart:s,convertToGenericChart:o};var c=i("uVcZ");var u=i("6Z/P");var d=i("6uJb");var p=i("sWge");var f=i("z4LI");var h=i("p+Qe");var v=i("Uzwy");var g=i("acVu");var m={template:n,controller:["$scope","qvConfirmDialog",function(t,e){var i,n,a,r,o,s,m;t.disableAutoChart=true;v["a"].isCreRunning().then((function(e){t.disableAutoChart=!e||Object(g["b"])("DISABLE_AUTO_CHART")||h["a"].isVariableDefined("DISABLE_AUTO_CHART")}));"sheet"===t.data.qInfo.qType||"filterpane"===t.data.visualization||"action-button"===t.data.visualization||"container"===t.data.qInfo.qType?t.visible=false:t.visible=true;var b=t.data.visualization;u["a"].getGrid()&&(t.data=u["a"].getGrid().activeCell||u["a"].getGrid().zoomCell||{});t.data.autoMode="auto-chart"===b;t.label=null!==(i=null===(n=t.data.model)||void 0===n||null===(a=n.items)||void 0===a||null===(r=a.currenModel)||void 0===r||null===(o=r.layout)||void 0===o?void 0:o.title)&&void 0!==i?i:null===(s=t.data.model)||void 0===s||null===(m=s.layout)||void 0===m?void 0:m.title;t.iconName=t.args.iconName;t.className="auto-chart"===b?"auto-chart-icon":"";var y={title:d["default"].get("ToAutoChart.Dialog.Header"),message:"".concat(d["default"].get("ToAutoChart.Dialog.Content1"),"<div class='sub-body'>").concat(d["default"].get("ToAutoChart.Dialog.Content2"),"</div>"),okLabel:d["default"].get("Common.Apply")};var x=function e(i){var n,a;var r;var o;var s="container"===(null===(n=t.data.model)||void 0===n?void 0:n.genericType)?t.data.model.items.currentModel:t.data.model;if(t.data.autoMode){if(i){r=!!s&&(!s.layout.qUndoExclude||!s.layout.qUndoExclude.generated);o=!!(s&&s.layout&&s.layout.qHyperCube)&&(0===s.layout.qHyperCube.qDimensionInfo.length&&0===s.layout.qHyperCube.qMeasureInfo.length)}else{r=!!s&&(!s.properties.qUndoExclude||!s.properties.qUndoExclude.generated);o=!!(s&&s.properties&&s.properties.qHyperCubeDef)&&(0===s.properties.qHyperCubeDef.qDimensions.length&&0===s.properties.qHyperCubeDef.qMeasures.length)}return r||o}function l(){return s&&"widget"===s.layout.visualization}var c="container"===(null===(a=t.data.model)||void 0===a?void 0:a.genericType)?t.data.model.items.currentObject:t.data.object;function u(){return c&&c.ext&&(c.ext.data.dimensions||c.ext.data.measures)}var d=!!t.data.model&&(!!t.data.model.layout.extensionMeta&&t.data.model.layout.extensionMeta.isThirdParty);var p=!!c&&(!!c.ext&&!!c.ext.importProperties&&!!c.ext.exportProperties);if(l())return!u();return!p||d};t.shouldHideToggleSwitch=x();var _=d["default"].get("ChartSuggestion.Header");t.switchComponent={component:c["a"].findComponent({type:"items",component:"switch"}),definition:{ref:"autoMode",type:"boolean",component:"switch",defaultValue:"auto-chart"===b,options:[{value:true,label:_},{value:false,label:_}],label:function e(){var i,n,a,r,o,s,l,c,u,d,p,f,h,v;var g=null!==(i=null===(n=t.data.model)||void 0===n||null===(a=n.items)||void 0===a||null===(r=a.currenModel)||void 0===r||null===(o=r.layout)||void 0===o?void 0:o.showTitle)&&void 0!==i?i:null===(s=t.data.model)||void 0===s||null===(l=s.layout)||void 0===l?void 0:l.showTitle;var m=g?null!==(c=null===(u=t.data.model)||void 0===u||null===(d=u.items)||void 0===d||null===(p=d.currenModel)||void 0===p||null===(f=p.layout)||void 0===f?void 0:f.title)&&void 0!==c?c:null===(h=t.data.model)||void 0===h||null===(v=h.layout)||void 0===v?void 0:v.title:"";return m},show:t.visible,shouldUpdateTitle:true,context:"header",change:function e(){var i=new p["a"];var n=u["a"].getGrid().activeCell||u["a"].getGrid().zoomCell;if(n){var a;var r=n.model;var o=t.data.autoMode?l.convertToAutoChart:l.convertToGenericChart;t.shouldHideToggleSwitch=x();o("container"===r.genericType?null===(a=r.items)||void 0===a?void 0:a.currentModel:r).then((function(){i.resolve(false)}))}else i.resolve(false);return i.promise},interceptor:function t(){return e.show(y).closed},interceptorPredicate:function t(e){return e}},data:t.data,args:t.args};t.$on("layoutchanged",(function(e,i){var n;if("container"===(null===(n=t.data.model)||void 0===n?void 0:n.genericType)){var a,r,o;""===(null===(a=t.data.items)||void 0===a||null===(r=a.currentModel)||void 0===r||null===(o=r.layout)||void 0===o?void 0:o.title)&&(t.label=t.data.items.currentModel.layout.showTitles?t.data.items.currentModel.layout.title:"")}else(i.title||""===i.title)&&(t.label=i.showTitles?i.title:"");t.shouldHideToggleSwitch=x(true)}));if(f["a"].view===f["a"].Views.masterObject){t.switchComponent.definition.show=false;t.visible=false}}]};var b=e["default"]=m},naOk:function(t,e,i){"use strict";i.r(e);var n=i("UV1h");var a=i("GG1N");var r=i("2Hli");var o='<div class="pp-component pp-color-picker-component" ng-if="visible" tcl="color-picker">\n\t<div ng-if="label" class="label" title="{{label}}" style="display:inline-block;">\n\t\t{{label}}\n\t</div>\n\t<div class="value picker" style="display: inline-block;">\n\t\t<div qv-color-picker-button-new\n\t\t\t on-close="closeColorpickerFoldout"\n\t\t\t on-open="openColorPickerFoldout"\n\t\t\t ng-model="value"\n\t\t\t ng-change="change()"\n\t\t\t palette="palette"\n\t\t\t disable-none="{{disableNone}}"\n\t\t\t extended="{{extended}}"\n\t\t\t ng-disabled="readOnly" \n\t\t\t ng-disabled="readOnly"\n\t\t\t toggle-open="true">\n\t\t</div>\n\t</div>\n</div>';var s=i("S4RG");var l=i("MW42");function c(t){c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return c(t)}var u={template:o,controller:["$scope",function(t){var e;var i;var o=function e(){return t.data};t.disableNone=null===(e=t.definition.disableNone)||void 0===e||e;a["a"].defineLabel(t,t.definition,o,t.args.handler);a["a"].defineVisible(t,t.args.handler);a["a"].defineReadOnly(t,t.args.handler);a["a"].defineChange(t,t.args.handler);if(t.definition.dualOutput||"object"===t.definition.type||"object"===c(t.definition.defaultValue)){Object.defineProperty(t,"value",{get:function e(){return n["a"].resolveColor(r["a"].getValue(o(),t.definition.ref,{}))},set:function e(i){var a="undefined"!==typeof i.color?i.color:i;var s="undefined"!==typeof i.index?i.index:n["a"].currentPalette.indexOf(i);r["a"].setValue(o(),t.definition.ref,{index:s,color:a})}});t.palette=n["a"].currentPalette;t.extended=true}else{Object.defineProperty(t,"value",{get:function e(){return n["a"].resolveColor(r["a"].getValue(o(),t.definition.ref,{}),n["a"].deprecatedPalette)},set:function e(i){var a="undefined"!==typeof i.color?i.color:i;var s=n["a"].deprecatedPalette.indexOf(a);r["a"].setValue(o(),t.definition.ref,s)}});t.palette=n["a"].deprecatedPalette;t.disableNone=false;t.extended=false}t.closeColorpickerFoldout=function(){i=void 0};t.openColorPickerFoldout=function(t){i=t};t.$on("$destroy",(function(){i&&i.close()}))}]};var d=e["default"]=u},ngrb:function(t,e,i){"use strict";function n(t,e){t=t||function(){return false};e=e||1;return{get:function t(e){return!!e("integer")},set:function i(n,a){if(n){var r=t();var o=r?-1:1;o*=e;a("integer",o)}else a("integer",0)}}}function a(t){t=t||function(){return false};return{get:function e(i){var n=t()?-1:1;var a=i("integer")*n;switch(a){case-1:return"descending";case 1:return"ascending";default:return"disabled"}},set:function e(i,n){var a=t();switch(i){case"descending":n("integer",a?1:-1);break;case"ascending":n("integer",a?-1:1);break;case"disabled":n("integer",0);break;default:n("integer",void 0);break}}}}function r(t){var e=function e(){return!t||!t()};return a(e)}var o={booleanConvertFunctions:n,enumConvertFunctions:a,invertedEnumConvertFunctions:r};var s=i("4nJ1");var l=[{value:"ascending",translation:"properties.sorting.ascending"},{value:"descending",translation:"properties.sorting.descending"}];function c(t,e,i){return{type:"items",items:{toggled:{type:"boolean",ref:t,translation:e,convertFunctions:i.toggled},order:{type:"string",component:"dropdown",ref:t,options:l,convertFunctions:i.sorting,show:function e(i){return 0!==s["a"].getValue(i,t,0)}}}}}function u(t,e){t=t||"qSortByState";var i={toggled:o.booleanConvertFunctions(e),sorting:o.invertedEnumConvertFunctions(e)};return c(t,"properties.sorting.sortByState",i)}function d(t,e){t=t||"qSortByFrequency";var i={toggled:o.booleanConvertFunctions(e),sorting:o.invertedEnumConvertFunctions(e)};return c(t,"properties.sorting.sortByFrequency",i)}function p(t,e){t=t||"qSortByAscii";var i={toggled:o.booleanConvertFunctions(e),sorting:o.enumConvertFunctions(e)};return c(t,"properties.sorting.sortByAlphabetic",i)}function f(t,e){t=t||"qSortByNumeric";var i={toggled:o.booleanConvertFunctions(e,-1),sorting:o.enumConvertFunctions(e)};return c(t,"properties.sorting.sortByNumeric",i)}function h(t,e){t=t||"qSortByExpression";var i={toggled:o.booleanConvertFunctions(e),sorting:o.enumConvertFunctions(e)};var n=c(t,"properties.sorting.sortByExpression",i);n.items.expression={type:"number",component:"expression",expressionType:"ValueExpr",ref:"qExpression",translation:"Common.Expression",defaultValue:"",show:function e(i){return 0!==s["a"].getValue(i,t,0)}};return n}var v=e["a"]={state:u,ascii:p,numeric:f,expression:h,frequency:d}},nkvf:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-icon-button-component"  tcl="icon-button">\n    <button class="icon-button" ng-disabled="disabled" ng-click="action();">\n        <span class="lui-list__aside" ng-if="!loading">\n            <span class="lui-icon icon-wrapper" ng-class="iconClass">{{icon}}</span>\n        </span>\n        <span class="lui-list__aside" ng-if="loading">\n            <qv-spinner show="loading"></qv-spinner>\n        </span>\n        <span class="lui-list__aside text-wrapper">\n            <span class="lui-list__text button-title"> {{title}}</span>\n            <span class="lui-list__text button-sub-title">{{subTitle}}</span>\n        </span>\n        <span class="lui-list__aside" ng-if="!disabled">\n            <span class="lui-icon lui-icon--small lui-icon--arrow-right icon-arrow"></span>\n        </span>\n    </button>\n</div>';var r=i("kh9L");var o={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineCustom(t,t.args.handler,"action");n["a"].defineCustom(t,t.args.handler,"loading");n["a"].defineCustom(t,t.args.handler,"title");n["a"].defineCustom(t,t.args.handler,"subTitle");n["a"].defineCustom(t,t.args.handler,"icon");n["a"].defineCustom(t,t.args.handler,"iconClass");t.definition&&t.definition.disabled&&Object.defineProperty(t,"disabled",{get:function e(){return t.definition.disabled(t.data,t.args.handler,t.args)}})}]};var s=e["default"]=o},noUX:function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("GG1N");var r=i("2Hli");var o=i("C61d");var s='<div class="pp-component pp-items-component" tcl="items">\n\t<div ng-repeat="item in items track by item.key" tid="{{item.key}}" class="item" ng-class="{ \'grouped\': definition.grouped }">\n\t\t<div include-pp-component x-component="item.component" x-definition="item.definition" x-data="newData" x-args="args"></div>\n\t</div>\n</div>';var l={template:s,controller:["$scope",function(t){var e={expr:{ref:"cond",type:"string",component:"expression",expressionType:"ValueExpr",translation:"properties.hyperCube.calcCond",change:t.definition.condChange},customErrorMessage:{ref:"msg",component:"expression",defaultValue:"",type:"string",expressionType:"StringExpr",expression:"optional",placeholderTranslation:"Object.ErrorMessage.CalculationCondition",translation:"properties.hyperCube.calcCondMessage",show:function t(e){var i=r["a"].getValue(e,"cond");return i.qv&&""!==i.qv},change:t.definition.msgChange}};t.items=Object.keys(e).map((function(t){var i=e[t];return{component:n["a"].findComponent(i),definition:i,key:t}}));function i(){if(t.definition.ref)return r["a"].getValue(t.data,t.definition.ref);return t.data}t.newData={};Object.defineProperty(t.newData,"cond",{get:function e(){var n=i();var a=o["a"].getPropCondition(n,t.definition.oldCondRef);return{qv:a}},set:function e(n){var a=i();o["a"].setPropCondition(a,n.qv,t.definition.oldCondRef);t.change()}});Object.defineProperty(t.newData,"msg",{get:function t(){var e=i();var n=o["a"].getPropMessage(e);return{qv:n}},set:function e(n){var a=i();o["a"].setPropMessage(a,n.qv);t.change()}});a["a"].defineChange(t,t.args.handler)}]};var c=e["default"]=l},nzqh:function(t,e,i){"use strict";var n=i("mWu2");var a='<div class="qv-state-count-bar" tid="stateCount" qva-direction x-dir-setting="{{options.direction}}">\n\t<div class="state selected" ng-style="{\'width\': percents.qSelected + \'%\'}"></div>\n\t<div class="state locked" ng-style="{\'width\': percents.qLocked + \'%\'}"></div>\n\t<div class="state optional" ng-style="{\'width\':  percents.qOption + \'%\'}"></div>\n\t<div class="state alternative" ng-style="{\'width\':  percents.qAlternative + \'%\'}"></div>\n</div>';n["default"].directive("qvStateCountBar",[function(){return{restrict:"E",template:a,replace:true,scope:{stateCounts:"=",options:"="},link:function t(e){e.percents=[];e.$watchCollection("stateCounts",(function(){i()}));function i(){var t=e.stateCounts;if(!t)return;var i=a(t);e.percents=r(i)}function n(t){return Object.keys(t).reduce((function(e,i){return e+t[i]}),0)}function a(t){var e=n(t);var i={};["qSelected","qLocked","qOption","qAlternative"].forEach((function(n){var a=t[n]||0;var r=Math.round(a/e*100);a>0&&0===r&&(r=1);i[n]=r}));return i}function r(t){var e={};var i;var n;var a=0;for(i in t){e[i]=t[i];(!n||t[i]>t[n])&&(n=i);a+=t[i]}a>100&&(e[n]=t[n]-(a-100));return e}}}}])},ohbW:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("SOxp");var o=i("MoEg");var s=i("8fQa");var l=i("wkj2");var c=i("sWge");var u=i("zjn0");var d=window.devicePixelRatio||1;var p=document.createElement("canvas");var f=p.getContext("2d");var h=document.createElement("span");var v=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;var g=d/v;var m={};var b=[];var y=!u["a"].supportDirAuto();h.innerText="Wj";var x={rect:function t(e,i){e.x*=i.x;e.y*=i.y;e.width*=i.x;e.height*=i.y},line:function t(e,i){e.x1*=i.x;e.y1*=i.y;e.x2*=i.x;e.y2*=i.y},circle:function t(e,i){e.cx*=i.x;e.cy*=i.y;e.r*=Math.min(i.x,i.y)},polygon:function t(e,i){var n;var a;for(n=0;n<e.points.length;n++){a=e.points[n];a.x*=i.x;a.y*=i.y}},text:function t(e,i){e.x*=i.x;e.y*=i.y;e.width*=i.x;e.height*=i.y}};function _(t,e){b.length>100&&delete m[b.shift()];b.push(t);m[t]=e}function C(t){if(t.font in m)return m[t.font];var e=1.5*t.measureText("m").width;_(t.font,e);return e}function w(t,e,i,n,a){var r=e.shape.points;var o=r?r.length:0;var s;var l;t.beginPath();s=r[0];if(!s)return;t.moveTo(s.x,s.y);for(l=1;l<o;l+=1){s=r[l];t.lineTo(s.x,s.y)}a&&t.closePath();i&&t.fill();n&&t.stroke()}var q={rect:function t(e,i,n,a){n&&e.fillRect(i.shape.x||0,i.shape.y||0,i.shape.width||0,i.shape.height||0);a&&e.strokeRect(i.shape.x||0,i.shape.y||0,i.shape.width||0,i.shape.height||0)},roundRect:function t(e,i,n,a){e.beginPath();e.moveTo(i.shape.x+i.shape.radius,i.shape.y);e.lineTo(i.shape.x+i.shape.width-i.shape.radius,i.shape.y);e.quadraticCurveTo(i.shape.x+i.shape.width,i.shape.y,i.shape.x+i.shape.width,i.shape.y+i.shape.radius);e.lineTo(i.shape.x+i.shape.width,i.shape.y+i.shape.height-i.shape.radius);e.quadraticCurveTo(i.shape.x+i.shape.width,i.shape.y+i.shape.height,i.shape.x+i.shape.width-i.shape.radius,i.shape.y+i.shape.height);e.lineTo(i.shape.x+i.shape.radius,i.shape.y+i.shape.height);e.quadraticCurveTo(i.shape.x,i.shape.y+i.shape.height,i.shape.x,i.shape.y+i.shape.height-i.shape.radius);e.lineTo(i.shape.x,i.shape.y+i.shape.radius);e.quadraticCurveTo(i.shape.x,i.shape.y,i.shape.x+i.shape.radius,i.shape.y);e.closePath();n&&e.fill();a&&e.stroke()},circle:function t(e,i,n,a){i.shape&&i.shape.r&&!i.shape.radius&&(i.shape.radius=i.shape.r);if(Number.isNaN(+i.shape.cx)||Number.isNaN(+i.shape.cy)||Number.isNaN(+i.shape.radius)||i.shape.radius<=0)return;var r=.551784;e.save();e.translate(i.shape.cx,i.shape.cy);e.scale(i.shape.radius,i.shape.radius);e.beginPath();e.moveTo(1,0);e.bezierCurveTo(1,-r,r,-1,0,-1);e.bezierCurveTo(-r,-1,-1,-r,-1,0);e.bezierCurveTo(-1,r,-r,1,0,1);e.bezierCurveTo(r,1,1,r,1,0);e.closePath();e.restore();n&&e.fill();a&&e.stroke()},line:function t(e,i,n,a){if(!a)return;e.beginPath();e.moveTo(i.shape.x1,i.shape.y1);e.lineTo(i.shape.x2,i.shape.y2);e.stroke()},polygon:function t(e,i,n,a){w(e,i,n,a,true)},polyline:function t(e,i,n,a){w(e,i,n,a)},polygons:function t(e,i,n,a){var t=i.shape.polygons;var r=t?t.length:0;var o;var s;var l;var c;var u;var d;e.beginPath();for(u=0;u<r;u++){o=t[u];s=o.points;l=s?s.length:0;if(0===l)continue;c=s[0];if(!c)continue;e.moveTo(c.x,c.y);for(d=1;d<l;d+=1){c=s[d];e.lineTo(c.x,c.y)}}n&&e.fill();a&&e.stroke()},multipolygon:function t(e,i,n,a){var r=i.shape.geopolygons;var o=r?r.length:0;var s;var l;var c;var u;var d;var p;var f;var h;e.beginPath();for(p=0;p<o;p++){s=r[p].getPolygons();l=s?s.length:0;for(f=0;f<l;f++){c=s[f].points;u=c?c.length:0;if(0===u)continue;d=c[0];if(!d)continue;e.moveTo(d.x,d.y);for(h=1;h<u;h+=1){d=c[h];e.lineTo(d.x,d.y)}}}n&&e.fill();a&&e.stroke()},arc:function t(e,i,n,a){var t=i.shape;e.beginPath();if(t.end-t.start===2*Math.PI){e.arc(t.cx,t.cy,t.radius,t.start+t.radianOffset,t.end+t.radianOffset,false);e.moveTo(t.cx+t.innerRadius*Math.cos(t.radianOffset+t.start),t.cy+t.innerRadius*Math.sin(t.radianOffset+t.start));e.arc(t.cx,t.cy,t.innerRadius,t.end+t.radianOffset,t.start+t.radianOffset,true)}else{e.arc(t.cx,t.cy,t.radius,t.start+t.radianOffset,t.end+t.radianOffset,false);if(!Number.isNaN(+t.innerRadius)&&t.innerRadius!==t.radius){e.lineTo(t.innerRadius*Math.cos(t.end+t.radianOffset)+t.cx,t.innerRadius*Math.sin(t.end+t.radianOffset)+t.cy);t.innerRadius>0&&e.arc(t.cx,t.cy,t.innerRadius,t.end+t.radianOffset,t.start+t.radianOffset,true);e.lineTo(t.radius*Math.cos(t.start+t.radianOffset)+t.cx,t.radius*Math.sin(t.start+t.radianOffset)+t.cy)}}e.closePath();n&&e.fill();a&&e.stroke()},text:function t(e,i){if(!i.shape||!i.shape.text||!i.fill)return;i.shape.font&&(e.font=i.shape.font);i.shape.align&&(e.textAlign=i.shape.align);i.shape.baseline&&(e.textBaseline=i.shape.baseline);I(e,i.shape)}};function M(t,e,i){var n;var a=t?t.replace(/^\s*|\s*$/,"").split(" "):[];var r=[];var o;var s;var l=a[0];if(!l)return[];for(n=1;n<a.length;n++){o="".concat(l," ").concat(a[n]);s=f.measureText(o).width;if(s>e&&i>r.length){r.push(l);l=a[n]}else l=o}r.length<i?r.push(l):r[Math.max(0,r.length-1)]?r[Math.max(0,r.length-1)]+=" ".concat(l):r[Math.max(0,r.length-1)]=" ".concat(l);return r}function S(t,e,i){if(void 0===t)return;var n;var a;var r;var o;var s;var l;var c;var u="…";var d;var p=f.measureText("i").width;for(n=0;n<t.length;n++){a=t[n];c=Math.ceil(Math.max(0,e/p))+1;if(c<a.length){o=a.slice(c);a=a.slice(0,c)}else o="";r=a;if(a&&a.length>1&&f.measureText(a).width>e){s=false;for(l=a.length;l>0;l--){r=r.substring(0,r.length-1);d=r+(n+1<i?"-":u);if(f.measureText(d).width<e){o=a.substring(l-1)+o;a=d;s=true;break}}if(!s){o=a.substring(1);a=a.substring(0,1)}if(!s&&!l){o="";a=u}}t[n]=String(a).trim();o&&n<t.length-1?t[n+1]="".concat(o," ").concat(t[n+1]):o&&t.length<i&&t.push(o)}}function D(t,e,i){var n=i.maxWidth;var a;if(Number.isNaN(+n))return[t];a=e>1?M(t,n,e):[t];S(a,n,e);return a}function I(t,e,i){var n=e.text;var a=(e.lineHeight||1)*C(t);var r="maxWidth"in e?e.maxWidth:e.width;var o="maxHeight"in e?e.maxHeight:e.height;var s=e.width;var l=e.height;var c=e.maxNumLines;var d=e.x||0;var p=e.y||0;var h=t.textAlign;var v="center"===h&&y;var g;var m;var b;f.font=t.font;Number.isNaN(+c)&&(c=o?Math.max(1,Math.floor(o/a)):1);var x=D(n,c,{maxWidth:r,maxHeight:o});if(i){s=0;for(g=0;g<x.length;g++)s=Math.max(s,t.measureText(x[g]).width);return{lines:x,numLines:x.length,width:s,height:x.length*a,truncated:Array.isArray(/…$/.exec(x[x.length-1]))}}"middle"===t.textBaseline?"undefined"!==typeof l?p+=l/2:x.length&&(p-=(x.length-1)*a/2):"bottom"===t.textBaseline&&("undefined"!==typeof l?p+=l:p-=(x.length-1)*a);"center"===t.textAlign&&s?d+=s/2:"right"===t.textAlign&&s&&(d+=s);for(g=0;g<x.length;g++){m=u["a"].detectTextDirection(x[g]);t.canvas.dir=m;if(v&&"rtl"===m){t.textAlign="left";b=d-t.measureText(x[g]).width/2}else{t.textAlign=h;b=d}t.canvas.dir=u["a"].detectTextDirection(x[g]);t.fillText(x[g],b,p);p+=a}t.textAlign=h;return}function k(t,e,i,n,a,r){var o;var s;var l;var c;var u;var d;var p;for(o=0;o<i.length;o+=1){c=i[o];if(!c)continue;t.save();l=c.transform;if(l){e.save();e.multiply(l)}"opacity"in c&&(t.globalAlpha=c.opacity);if(c.fill)if(c.fill.gradient){p=c.fill.gradient;if(Number.isNaN(+p.x0)||Number.isNaN(+p.y0)||Number.isNaN(+p.x1)||Number.isNaN(+p.y1))return;d=t.createLinearGradient(p.x0,p.y0,p.x1,p.y1);for(s=0;s<p.limits.length;s++)d.addColorStop(p.limits[s],p.colors[s]);t.fillStyle=d}else t.fillStyle=c.fill;if(c.stroke&&0!==c.strokeWidth){if(c.stroke.gradient){p=c.stroke.gradient;d=t.createLinearGradient(p.x0,p.y0,p.x1,p.y1);for(s=0;s<p.limits.length;s++)d.addColorStop(p.limits[s],p.colors[s]);t.strokeStyle=d}else t.strokeStyle=c.stroke;t.lineWidth=c.strokeWidth||1;c.strokeDasharray&&c.strokeDasharray.length&&t.setLineDash(c.strokeDasharray);n>1&&"polygon"!==c.type&&(t.lineWidth/=n)}c.lineJoin&&(t.lineJoin=c.lineJoin);c.lineCap&&(t.lineCap=c.lineCap);u=e.elements;if("group"===c.type){e.save();if(c.clip){t.beginPath();t.setTransform(u[0][0],u[1][0],u[0][1],u[1][1],u[0][2],u[1][2]);t.rect(c.clip.rect.x,c.clip.rect.y,c.clip.rect.width,c.clip.rect.height);t.clip()}k(t,e,c.children,void 0,!!c.fill||!!a,!!c.stroke&&0!==c.strokeWidth||!!r);e.restore()}else if(c.type in q){t.setTransform(u[0][0],u[1][0],u[0][1],u[1][1],u[0][2],u[1][2]);q[c.type](t,c,!!c.fill||!!a,!!c.stroke&&0!==c.strokeWidth||!!r)}t.globalAlpha=1;l&&e.restore();t.restore()}}function L(t,e,i){if(i){var n=e.elements;switch(i.type){case"clip":t.save();t.setTransform(n[0][0],n[1][0],n[0][1],n[1][1],n[0][2],n[1][2]);t.beginPath();t.rect(i.rect.x,i.rect.y,i.rect.width,i.rect.height);t.clip();break;case"slice":break;default:break}}}function T(t,e){e&&t.restore()}var E=r["a"].extend({init:function t(e,i){var n=a.a.extend(true,{storeObjects:false},i);this._container=e;this._canvas=document.createElement("canvas");this._canvas.style.position="absolute";this._canvas.width=0;this._canvas.height=0;n.name&&this._canvas.setAttribute("name",n.name);this.storeRenderedObjects=true===n.storeObjects;this.scaling={x:1,y:1};this._container&&this._container.appendChild(this._canvas);this.rect=new o["a"](0,0,0,0);this.shapes=[];this._matrix=new l["a"]},setDimensions:function t(e,i,n,a){this.rect.set(e,i,n,a)},setDimensionsToContainerRatio:function t(e,i){this.scaling={x:e,y:i};this.ratios={x:e,y:i}},show:function t(){this._canvas.style.display=""},hide:function t(){this._canvas.style.display="none"},clear:function t(e){if(e){if(!this._clearTimer){var i=this;this._clearTimer=s["a"].request((function(){if(i._clearTimer){i._canvas.width=0;i._clearTimer=0}}))}}else{s["a"].cancel(this._clearTimer);this._clearTimer=0;this._canvas.width=0;this._canvas.height=0;a()(this._canvas).data("shapes",null);this.shapes=[]}},render:function t(){s["a"].cancel(this._clearTimer);this._clearTimer=0;d=window.devicePixelRatio||1;v=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;g=d/v;var e=this._canvas;var i=e.getContext("2d");var n=g;var r=this._matrix;var o=0;var l=0;var u;var p;p=this.rect.height*this.scaling.y;u=this.rect.width*this.scaling.x;if(this.edgeBleed){o=this.edgeBleed.left*this.scaling.x;l=this.edgeBleed.top*this.scaling.y;p+=this.edgeBleed.top*this.scaling.y+this.edgeBleed.bottom*this.scaling.y;u+=this.edgeBleed.left*this.scaling.x+this.edgeBleed.right*this.scaling.x}p=Math.round(p);u=Math.round(u);this._canvas.style.left="".concat(-o,"px");this._canvas.style.top="".concat(-l,"px");if(e.width!==u||e.height!==p){e.width=n*u;e.height=n*p;this._canvas.style.width="".concat(u,"px");this._canvas.style.height="".concat(p,"px")}else i.clearRect(0,0,e.width,e.height);i.save();r.save();r.scale(n*this.scaling.x,n*this.scaling.y);r.translate(o/this.scaling.x,l/this.scaling.y);L(i,r,this.viewBox);k(i,r,this.shapes,this.scaling.x);T(i,this.viewBox);i.restore();r.restore();this.storeRenderedObjects&&a()(this._canvas).data("shapes",this.shapes);return c["a"].resolve()},setFont:function t(e){this._canvas.getContext("2d").font=e},getFontHeight:function t(e){if("string"!==typeof e)throw new Error("CanvasRenderer.getFontHeight(): Input font is not a string");if(e in m)return m[e];var i=this._canvas.getContext("2d");var n;if(i.font!==e){i.save();i.font=e;n=1.5*i.measureText("m").width;i.restore()}else n=1.5*i.measureText("m").width;_(e,n);return n},getTextWidth:function t(e,i){var n=this._canvas.getContext("2d");n.save();n.font=i;var a=void 0!==e?Math.ceil(n.measureText(e).width):0;n.restore();return a},getEMFontWidth:function t(e){var i="m";var n=this._canvas.getContext("2d");n.save();n.font=e;var a=n.measureText(i).width;n.restore();return a},getAverageLetterWidth:function t(e){var i="eeeaaaiinnoorsstldumcph";f.font=e||this._canvas.getContext("2d").font;var n=f.measureText(i).width;return n/i.length},release:function t(){a()(this._canvas).data("shapes",null);this.shapes=[];if(this._container){this._container.removeChild(this._canvas);this._container=null}},applyTransform:function t(){var e;for(e=0;e<this.shapes.length;e+=1)this.shapes[e].type in x&&x[this.shapes[e].type](this.shapes[e].shape,this.ratios)}});E.getTextWidth=function(t){return Math.ceil(f.measureText(t).width)};E.setFont=function(t){f.font=t};E.getAverageLetterWidth=function(t){var e="eeeaaaiinnoorsstldumcph";f.font=t;var i=f.measureText(e).width;return i/e.length};E.measureText=function(t,e){var i=f;var n;if(e&&i.font!==e){i.save();i.font=e}var a=i.measureText(t).width;if(e in m)n=m[e];else{n=1.5*i.measureText("m").width;_(e,n)}e&&i.restore();var r=void 0!==t?{width:a,height:n}:{width:0,height:0};return r};E.measureTextObject=function(t){t.shape.font&&(f.font=t.shape.font);t.shape.align&&(f.textAlign=t.shape.align);t.shape.baseline&&(f.textBaseline=t.shape.baseline);return I(f,t.shape,true)};E.measureDisplayTextObject=function(t){t.font&&(f.font=t.font);t.align&&(f.textAlign=t.align);t.baseline&&(f.textBaseline=t.baseline);return I(f,t,true)};E.getFontHeight=function(t){var e=f;if(t in m)return m[t];if(t){e.save();e.font=t}var i=1.5*e.measureText("m").width;_(t,i);t&&e.restore();return i};E.getDevicePixelToBackingStoreRatio=function(){return(window.devicePixelRatio||1)/(f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1)};e["a"]=E},otw7:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-icon-item-component lui-icon" ng-class="{ \'small\' : small }" ng-if="visible" qva-apply-style="style" tcl="icon-item">\n\t{{content}}\n</div>';var r=i("CpIe");var o={template:a,controller:["$scope",function(t){var e=function e(){return t.data};t.content="function"===typeof t.definition.icon?t.definition.icon(t.args.layout):t.definition.icon;t.small=t.definition.small||false;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineValue(t,t.definition,e);var i;"function"===typeof t.definition.icon&&(i=t.$on("layoutchanged",(function(e,i){t.content=t.definition.icon(i)})));t.$on("$destroy",(function(){i&&i()}))}]};var s=e["default"]=o},"p8j/":function(t,e,i){"use strict";i.r(e);var n=i("uVcZ");var a=i("GG1N");var r='<div class="pp-component pp-options-list-component" ng-if="visible" tcl="item-options-list">\n\t\n\t<div class="label value" ng-if="def.showValue && value">\n\t\t\t<span>{{ valueLabel }}</span>\n\t</div>\n\n\t<div qva-activate="showSubPanelWithOptions()" class="button-wrapper">\n\t\t<button ng-if="!entryComponentDefinition" ng-disabled="readOnly" class="lui-button pp-add-property ng-binding entry-button" title="{{ label }}">\n\t\t\t{{ label }}\n\t\t</button>\n\n\t\t<div ng-if="entryComponentDefinition" ng-disabled="readOnly" class="entry-button entry-button-component" title="{{ def.label }}">\n\t\t\t<div include-pp-component x-component="entryButtonComponent" x-definition="entryComponentDefinition" x-data="data" x-args="args"></div>\n\t\t</div>\n\t</div>\n\n\t<div ng-show="def.labelDisclaimer" class="label disclaimer">\n\t\t<span>{{ labelDisclaimer }}</span>\n\t</div>\n\n</div>';var o=i("6uJb");var s=i("4nJ1");var l=i("2Hli");var c={template:r,controller:["$scope",function(t){var e="pp-options-list-".concat(s["a"].generateId());var i=r();t.def=i;c();p(t.value);function r(){var e={showValue:false,valueTranslation:"{0}",horizontal:false,boldLabelForSelect:false,itemBorder:true,optionsRadius:3,optionsSpacing:0,optionsBoldSelect:true,labelDisclaimer:null};return s["a"].extend(true,{},e,t.definition)}function c(){var e=function e(){return t.data};a["a"].defineVisible(t,t.args.handler);a["a"].defineReadOnly(t,t.args.handler);a["a"].defineValue(t,i,e)}function u(){var e={component:"image-item",labelPlacement:"bottom",width:"100%"};var n="function"===typeof i.options?i.options(t.data):i.options;if(!n||!n.length)throw TypeError("No options returned/not specified in definition of options-list");return n.map((function(t){t.translation=o["default"].get(t.translation);return s["a"].extend(true,{},e,t)}))}function d(t){var e=u();if(!e||!e.length)throw new Error("no items");var i=e.filter((function(e){return e.value===t}))[0];return i}t.getItemFromValue=d;function p(e){if(!i.showValue)return;var n=d(e)||{};var a=n.translation||"";var r=o["default"].get(a);var s=o["default"].get(i.valueTranslation);t.valueLabel=s.replace(/\{0\}/g,r)}function f(i){i.id=i.id||e;i.triggerId="addLayer";t.$root.$emit("showSubPanel",i)}function h(){t.$root.$emit("hideSubPanel",{id:e})}t.showSubPanelWithOptions=function(){t.$root.$emit("showSubPanel",{id:e,triggerId:"propertyPanel",title:o["default"].get(i.title),definition:v()})};if(i.entryComponentDefinition){t.entryComponentDefinition=i.entryComponentDefinition;t.entryButtonComponent=n["a"].findComponent(t.entryComponentDefinition);t.entryComponentDefinition.src=d(t.value).src}function v(){var e={ref:i.ref,type:i.type,component:"item-selection-list",itemsRadius:i.optionsRadius,itemsSpacing:i.optionsSpacing,itemsBoldSelect:i.optionsBoldSelect,horizontal:i.horizontal,defaultValue:i.defaultValue,boldSelectLabel:i.boldSelectLabel,label:o["default"].get(i.optionsLabel),itemBorder:i.itemBorder,items:u(),change:function e(n){var a=l["a"].getValue(n,i.ref);p(a);h();"function"===typeof i.change&&i.change.apply(null,[].concat.apply([],arguments).concat(f));var r=d(a);t.entryComponentDefinition&&(t.entryComponentDefinition.src=r.src)}};return e}function g(){if(i.entryComponentDefinition){t.entryComponentDefinition=i.entryComponentDefinition;t.entryComponentDefinition.src=d(t.value).src}}t.label=o["default"].get(i.translation);t.labelDisclaimer=o["default"].get(i.labelDisclaimer);t.$watch("data.".concat(i.ref),g.bind(this))}]};var u=e["default"]=c},pSod:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("mWu2");var l=i("G1wx");s["default"].directive("qvSelectionsToggleDimensionValue",["$parse",function(t){return{restrict:"A",link:function e(i,n,r){var s=t(r.qvSelectionsToggleDimensionValue)();var l=s.selector;var c=".".concat(i.$id,"-toggle-dimension-value");var u=s.itemKey||"cell";o()(n[0]).tap({id:c,options:{preventDefault:false},end:function t(e){var n=a()(e.target).closest(l);if(!n.length)return;if(i.$eval(r.qvSelectionsExcludeToggleDimensionValue,{$event:e}))return;var o=n.scope()[u];if(!o||!o.isDimensionValue)return;if(o.locked){i.$eval(r.qvSelectionsSelectWhileLocked);return}i.$apply((function(){var t={$event:e};t[u]=o;i.$eval(r.qvSelectionsOnToggleDimensionValue,t)}))}});i.$on("$destroy",(function(){o()(n[0]).off("*",c)}))}}}]);s["default"].directive("qvSelectionsMultiselect",["$parse",function(t){return{restrict:"A",controller:function t(){},link:function e(i,n,r,s){var c=t(r.qvSelectionsMultiselect)();var u=c.selector;var d=c.itemKey||"cell";var p="".concat(i.$id,"-multiselect");var f="".concat(i.$id,"-2finger-multiselect");var h;var v;var g;var m;function b(){o()(n[0]).tap({id:p,options:{preventDefault:false},start:function t(e){g=a()(e.target).closest(u)}});o()(n[0]).swipe({id:p,options:{radiusThreshold:4,preventDefault:false},start:function t(e){if(!l["a"].isMouse(e)||!g.length){this.cancel();return}var n=g.scope()[d];if(!n.isDimensionValue){this.cancel();return}if(n.locked){i.$eval(r.qvSelectionsSelectWhileLocked);this.cancel();return}m=n;var a={$event:e};a[d]=n;i.$apply(i.$eval(r.qvSelectionsStartMultiselect,a))},update:function t(e){var n=a()(e.target).closest(u);if(!n.length)return;var o=n.scope()[d];i.$apply(i.$eval(r.qvSelectionsUpdateMultiselect,{start:m,current:o,dataColIx:o.dataColIx}))},end:function t(e){i.$apply(i.$eval(r.qvSelectionsEndMultiselect,{$event:e}))}});return function(){o()(n[0]).off("*",p)}}function y(){o()(n[0]).tap({id:f,options:{touches:2,preventDefault:false},end:function t(e,n){var o=n.pagePoints[0];var s=n.pagePoints[1];var l;var c=o?a()(document.elementFromPoint(o.x,o.y)):void 0;var p=s?a()(document.elementFromPoint(s.x,s.y)):void 0;var f=c?c.closest(u).scope():void 0;var h=p?p.closest(u).scope():void 0;var v=f?f[d]:void 0;var g=h?h[d]:void 0;if(!v||!g||!v.isDimensionValue||!g.isDimensionValue)return;if(v.locked||g.locked){i.$eval(r.qvSelectionsSelectWhileLocked);return}i.$apply((function(){l={offsetLeft:c[0].offsetLeft,width:c[0].clientWidth,$event:e};l[d]=v;i.$eval(r.qvSelectionsStartMultiselect,l);i.$eval(r.qvSelectionsUpdateMultiselect,{start:v,current:g,dataColIx:v.dataColIx});i.$eval(r.qvSelectionsEndMultiselect,{$event:e})}))}});return function(){o()(n[0]).off("*",f)}}s.on=function(){h||(h=b());v||(v=y())};s.off=function(){if(h){h();h=void 0}if(v){v();v=void 0}};i.$watch("interactive",(function(t){if(void 0===t)return;t?s.on():s.off()}));i.$on("$destroy",(function(){s.off()}))}}}])},plXO:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("sWge");var o=i("SOxp");var s=i("Q5XB");var l=i("MoEg");var c=i("+GbC");var u=s["a"].extend("Stage",{init:function t(){this._super();this._stage=this;this._dimensions=new l["a"](0,0,0,0);c["a"].create(this,"Invalid")},invalidateObject:function t(e){this.Invalid.emit(e);return this},destroy:function t(){this._super();c["a"].release(this)}});var d=u;var p=i("EDQw");var f=o["a"].extend("Renderer",{init:function t(){this._stage=new d;this._stageBinding=function(t){this.invalidateObject(t)}.bind(this);this._stage.Invalid.bind(this._stageBinding);this.scaling={x:1,y:1};this._size=new l["a"];this._extendedSize=new l["a"]},find:function t(e){return p["a"].find(e,this._stage)},setDimensions:function t(e,i,n,a){this._size.set(e,i,n,a)},setDimensionsToContainerRatio:function t(e,i){this.scaling={x:e,y:i}},release:function t(){this._stage&&this._stage.Invalid&&this._stage.Invalid.unbind(this._stageBinding);this._stage.destroy();this._stageBinding=null},render:function t(){},clear:function t(){},invalidateObject:function t(){}});Object.defineProperties(f.prototype,{stage:{get:function t(){return this._stage}}});var h=f;var v=i("wkj2");var g=i("8fQa");var m=i("rwE6");var b=i("022E");var y=i("djNn");var x={displayObject:y["a"],render:function t(e,i,n){if(!n)return;e.beginPath();e.moveTo(this.x1,this.y1);e.lineTo(this.x2,this.y2);e.stroke()}};var _=i("ZM1a");var C=i("lnqa");var w={displayObject:C["a"],render:function t(e,i,n){e.beginPath();if(0===this.innerRadius){e.arc(this.cx,this.cy,this.radius,this.start+this.radianOffset,this.end+this.radianOffset,false);e.lineTo(this.innerRadius*Math.cos(this.end+this.radianOffset)+this.cx,this.innerRadius*Math.sin(this.end+this.radianOffset)+this.cy)}else if(this.end-this.start===2*Math.PI){e.arc(this.cx,this.cy,this.radius,this.start+this.radianOffset,this.end+this.radianOffset,false);e.moveTo(this.cx+this.innerRadius*Math.cos(this.radianOffset+this.start),this.cy+this.innerRadius*Math.sin(this.radianOffset+this.start));e.arc(this.cx,this.cy,this.innerRadius,this.end+this.radianOffset,this.start+this.radianOffset,true)}else{e.arc(this.cx,this.cy,this.radius,this.start+this.radianOffset,this.end+this.radianOffset,false);e.lineTo(this.innerRadius*Math.cos(this.end+this.radianOffset)+this.cx,this.innerRadius*Math.sin(this.end+this.radianOffset)+this.cy);e.arc(this.cx,this.cy,this.innerRadius,this.end+this.radianOffset,this.start+this.radianOffset,true);e.lineTo(this.radius*Math.cos(this.start+this.radianOffset)+this.cx,this.radius*Math.sin(this.start+this.radianOffset)+this.cy)}i&&e.fill();if(n){e.closePath();e.stroke()}}};var q=i("wdNe");var M=i("zjn0");var S=!M["a"].supportDirAuto();var D={displayObject:q["a"],render:function t(e,i,n){var a=this.x||0;var r=this.y||0;var o=this.lines||[];var s=o.length;var l=[];var c=this.lineHeight;var u=e.textAlign;var d="center"===u&&S;var p;var f;var h;a=this.getHorizontalAnchor();r=this.getVerticalAnchorFirstLine();i&&l.push("fillText");n&&(this.strokeFirst?l.unshift("strokeText"):l.push("strokeText"));if(!l.length)return;for(p=0;p<s;p++){f=M["a"].detectTextDirection(o[p]);e.canvas.dir=f;if(d&&"rtl"===f){e.textAlign="left";h=a-e.measureText(o[p]).width/2}else{e.textAlign=u;h=a}e[l[0]](o[p],h,r);l[1]&&e[l[1]](o[p],h,r);r+=c}e.textAlign=u}};var I=1;var k=[m["a"],b["a"],x,_["a"],w,D];var L={};var T=k.length;var E=document.createElement("canvas");var A=E.getContext("2d");var P=["fill","stroke","strokeWidth","opacity","font","align","baseline","lineJoin","lineCap"];var O=new RegExp(P.join("|"));var R=P.length;var V={fill:"fillStyle",stroke:"strokeStyle",strokeWidth:"lineWidth",opacity:"globalAlpha",align:"textAlign",baseline:"textBaseline"};var N={PENDING:0,RESOLVED:1,REJECTED:2};var z={};var F=[];function j(t,e){F.length>100&&delete z[F.shift()];F.push(t);z[t]=e}function H(){var t={dfd:Object(r["a"])(),state:N.PENDING};var e=t.dfd.promise;e.then((function(){t.state=N.RESOLVED}),(function(){t.state=N.REJECTED}));return t}function $(t,e,i,n,a){return n+a*(t-e)/i}var B=0;var W=h.extend("CanvasRenderer",{init:function t(e,i){this._super();this._id=++B;this._canvas=document.createElement("canvas");this._canvas.width=this._size.width;this._canvas.height=this._size.height;this._canvas.style.position="absolute";this._canvas.style.top="0";this._canvas.style.left="0";this._bufferCanvas=document.createElement("canvas");this._bufferCanvas.width=this._canvas.width;this._bufferCanvas.height=this._canvas.height;this._mvMatrix=new v["a"];this._wrapper=document.createElement("div");this._wrapper.style.position="relative";this._wrapper.style.left="0";this._wrapper.style.top="0";this._wrapper.appendChild(this._canvas);i&&i.name&&a()(this._wrapper).attr({tid:i.name});a()(this._wrapper).attr({tcl:"renderer"});this._wrapper.__do_not_use__renderer=this;this.container=e;this.container.appendChild(this._wrapper);this._isCompositingEnabled=true;this._invalidObjects=[];this._transformMatrix=new v["a"];this._storeNewImage=true},setDimensions:function t(e,i,n,a){this._super(e,i,n,a);this._wrapper.style.left="".concat(e,"px");this._wrapper.style.top="".concat(i,"px")},setCompositingEnabled:function t(e){this._isCompositingEnabled=e},getCompositingEnabled:function t(){return this._isCompositingEnabled},render:function t(e){if(this._rendering)return;this._resetImage();this._renderDfdObj&&this._renderDfdObj.state===N.PENDING||(this._renderDfdObj=H());if(e)this._invalidate(true,false);else{this._doClear=false;this._doRender=true;this._validate()}return this._renderDfdObj.dfd.promise},clear:function t(e){if(this._rendering)return;if(e)this._invalidate(false,true);else{this._doRender=false;this._doClear=true;this._validate()}},release:function t(){this._super();this._clearSchedule();a()(this._wrapper).removeData();this._bufferCanvas=null;this._canvas=null;if(this.container){this.container.removeChild(this._wrapper);this.container=null}},invalidateObject:function t(e){this._isCompositingEnabled&&this._invalidObjects.indexOf(e)<0&&this._invalidObjects.push(e);this.render(true)},transformScene:function t(e){this._transformMatrix=e.clone();this._invalidate(true,false);return this},translateScene:function t(e,i){this._transformMatrix.translate(e,i);this._invalidate(true,false);return this},scaleScene:function t(e,i,n){this._transformMatrix.translate(-e,-i);this._transformMatrix.scale(n,n);this._transformMatrix.translate(e,i);this._invalidate(true,false);return this},setAttribute:function t(e,i){var n;for(n in i)i.hasOwnProperty(n)&&(this._wrapper[e][n]=i[n])},getTextWidth:function t(e,i){return W.getTextWidth(e,i,this._canvas.getContext("2d"))},getFontHeight:function t(e){return W.getFontHeight(e,this._canvas.getContext("2d"))},_render:function t(){if(!this._canvas)return;this._rendering=true;var e=this._canvas;var i=e.getContext("2d");var n=this._mvMatrix;var a=[];var r=this._isCompositingEnabled&&!this._transformMatrix.isIdentity();var o=W.getDevicePixelToBackingStoreRatio();if(r&&this._storeNewImage){this._storeImage();this._storeNewImage=false}if(!this._updateSize()){if(this._isCompositingEnabled){a=this._getInvalidViews().filter((function(t){return!t.hasNaN()}));if(a.length&&r)a=[];else if(r){i.clearRect(0,0,e.width,e.height);a=a.concat(this._getInvalidImageParts()).filter((function(t){return!t.hasNaN()}))}}a.length||i.clearRect(0,0,e.width,e.height)}i.save();n.save();this.stage.matrix&&this.stage.matrix.identity();this.stage.scale(this.scaling.x,this.scaling.y);this.stage.translate(-this._extendedSize.x,-this._extendedSize.y);this.stage.translate(this._transformMatrix.elements[0][2],this._transformMatrix.elements[1][2]);i.setTransform(o,0,0,o,0,0);if(a.length){if(r){i.save();i.setTransform(1,0,0,1,0,0);this._patchImage();this._transformMatrix.identity();i.restore()}i.beginPath();a.forEach((function(t){i.rect(t.x,t.y,t.width,t.height)}));i.clip();i.clearRect(0,0,this._extendedSize.width,this._extendedSize.height)}if(!a.length){var s=new l["a"](0,0,this.scaling.x*this._extendedSize.width,this.scaling.y*this._extendedSize.height);a.push(s)}W._updateTransforms([this.stage],n,{});W._renderDisplayObjects(i,[this.stage],!!this._isCompositingEnabled&&a,o);n.restore();i.restore();this._invalidObjects=[];this._rendering=false},_updateSize:function t(){var e=this._canvas;var i=W.getDevicePixelToBackingStoreRatio();var n=this._extendedSize;this.edgeBleed?n.set(-this.edgeBleed.left,-this.edgeBleed.top,this._size.width+this.edgeBleed.left+this.edgeBleed.right,this._size.height+this.edgeBleed.top+this.edgeBleed.bottom):n.set(this._size.x,this._size.y,this._size.width,this._size.height);var a=new l["a"](Math.round(n.x*this.scaling.x),Math.round(n.y*this.scaling.y),Math.round(n.width*this.scaling.x),Math.round(n.height*this.scaling.y));var r=Math.round(i*a.width);var o=Math.round(i*a.height);this._canvas.style.left="".concat(a.x,"px");this._canvas.style.top="".concat(a.y,"px");if(e.width!==r||e.height!==o){e.width=r;e.height=o;e.style.width="".concat(a.width,"px");e.style.height="".concat(a.height,"px");this._bufferCanvas.width=r;this._bufferCanvas.height=o;return true}return false},_invalidate:function t(e,i){this._doRender=e||this._doRender;this._doClear=i||this._doClear;if(!this._invalidated){var n=this;this._invalidated=true;this._timer=g["a"].request((function(){n._validate()}),this._canvas)}},_validate:function t(){this._doClear&&!this._doRender?this._clear():this._doRender&&this._render();this._renderDfdObj&&this._renderDfdObj.state===N.PENDING&&this._renderDfdObj.dfd.resolve();this._clearSchedule()},_clear:function t(){this._canvas&&(this._canvas.width=this._canvas.width)},_clearSchedule:function t(){if(this._timer){g["a"].cancel(this._timer);this._timer=null}this._renderDfdObj&&this._renderDfdObj.state===N.PENDING&&this._renderDfdObj.dfd.reject();this._doRender=false;this._doClear=false;this._invalidated=false},_getInvalidViews:function t(){var e;var i=this._invalidObjects?this._invalidObjects.length:0;var n=new l["a"];var a=false;var r=false;var o=new l["a"];var s;var c;var u;var d;var p;var f;var h;var v;var g;var m;for(e=0;e<i;e++){s=this._invalidObjects[e].getVisualBounds();c=this._invalidObjects[e].rData.oldVisualBounds;if(!a&&s){u=s.x;p=s.x+s.width;d=s.y;f=s.y+s.height;a=true}else if(s){u=Math.min(u,s.x);p=Math.max(p,s.x+s.width);d=Math.min(d,s.y);f=Math.max(f,s.y+s.height)}if(!r&&c){h=c.x;g=c.x+c.width;v=c.y;m=c.y+c.height;r=true}else if(c){h=Math.min(h,c.x);g=Math.max(g,c.x+c.width);v=Math.min(v,c.y);m=Math.max(m,c.y+c.height)}}n.set(Math.floor(u)-1,Math.floor(d)-1,Math.ceil(p-u)+2,Math.ceil(f-d)+2);o.set(Math.floor(h)-1,Math.floor(v)-1,Math.ceil(g-h)+2,Math.ceil(m-v)+2);if(n.x!==o.x||n.y!==o.y||n.width!==o.width||n.height!==o.height)return[n,o];return[n]},_getInvalidImageParts:function t(){var e=[];var i=this._transformMatrix.elements[0][0];var n=this._transformMatrix.elements[0][2];var a=this._transformMatrix.elements[1][2];if(i&&i>1)e.push(new l["a"](0,0,0,0));else if(i&&i<1)e.push(new l["a"](0,0,0,0));else{0!==n&&this._size.width>Math.abs(n)&&e.push(new l["a"](n>0?0:this._size.width+n,0,Math.abs(n),this._size.height));0!==a&&this._size.height>Math.abs(a)&&e.push(new l["a"](0,a>0?0:this._size.height+a,this._size.width,Math.abs(a)))}return e},_storeImage:function t(){var e=this._bufferCanvas.getContext("2d");e.clearRect(0,0,this._bufferCanvas.width,this._bufferCanvas.height);e.drawImage(this._canvas,0,0)},_patchImage:function t(){var e=W.getDevicePixelToBackingStoreRatio();var i=this._transformMatrix.elements[0][0];if(1!==i){var n;var a;var r;var o;var s;var l;var c;var u;var d={x:0,y:this._size.height};var p={x:this._size.width,y:0};var f=this._transformMatrix.transformPoint(d);var h=this._transformMatrix.transformPoint(p);var v=h.x-f.x;var g=h.y-f.y;var m=f.x/v;var b=h.y/g;if(i>1){c=0;u=0;n=this._size.width;a=this._size.height;r=-m*this._size.width;o=b*this._size.height;s=this._size.width/i;l=this._size.height/i}else{r=0;o=0;s=this._size.width;l=this._size.height;n=this._size.width*i;a=this._size.height*i;c=m*n;u=-b*a}s*=e;l*=e;r*=e;o*=e;c*=e;u*=e;n*=e;a*=e;if(r>this._bufferCanvas.width||r+s<0||o>this._bufferCanvas.height||o+l<0)this._canvas.getContext("2d").drawImage(this._bufferCanvas,0,0,0,0,0,0,0,0);else{var y=Math.max(r,0);var x=Math.min(r+s,this._bufferCanvas.width);var _=$(y,r,s,c,n);var C=$(x,r,s,c,n);var w=x-y;var q=C-_;var M=Math.max(o,0);var S=Math.min(o+l,this._bufferCanvas.height);var D=$(M,o,l,u,a);var I=$(S,o,l,u,a);var k=S-M;var L=I-D;this._canvas.getContext("2d").drawImage(this._bufferCanvas,y,M,w,k,_,D,q,L)}}else this._canvas.getContext("2d").drawImage(this._bufferCanvas,this._transformMatrix.elements[0][2]*e,this._transformMatrix.elements[1][2]*e)},_resetImage:function t(){this._transformMatrix.identity();this._storeNewImage=true}});W.getFontHeightOfContext=function(t){return 1.5*t.measureText("m").width};W.getFontHeight=function(t,e){if("string"!==typeof t)throw new Error("CanvasRenderer.getFontHeight(): Input font is not a string");if(t in z)return z[t];var i;e=e||A;if(e.font!==t){e.save();e.font=t;i=1.5*e.measureText("m").width;e.restore()}else i=1.5*e.measureText("m").width;j(t,i);return i};W.getTextWidth=function(t,e,i){i=i||A;i.save();i.font=e;var n=void 0!==t?Math.ceil(i.measureText(t).width):0;i.restore();return n};W.getDevicePixelToBackingStoreRatio=function(){return(window.devicePixelRatio||1)/(A.webkitBackingStorePixelRatio||A.mozBackingStorePixelRatio||A.msBackingStorePixelRatio||A.oBackingStorePixelRatio||A.backingStorePixelRatio||1)};W.measureText=function(t,e,i){var n;i=i||A;if(e&&i.font!==e){i.save();i.font=e}var a=i.measureText(t).width;if(e in z)n=z[e];else{n=1.5*i.measureText("m").width;j(e,n)}e&&i.restore();var r=void 0!==t?{width:a,height:n}:{width:0,height:0};return r};W._renderDisplayObjects=function(t,e,i,n){var a;var r;var o;var s;var l=i?i.length:0;var c=[];var u=true;var d;var p=[];var f;r=e?e.length:0;for(a=0;a<r;a++){o=e[a];if(false===o.visible||false===o.data.isVisible)continue;if(l){u=false;for(d=0;d<l;d++)if(i[d].intersectsWith(o.getVisualBounds())){u=true;break}if(!u)continue}s=W._getRenderFn(e[a]);f=o.children.length>0;if("function"!==typeof s&&!f)continue;if(o.zIndex>0){c[o.zIndex]||(c[o.zIndex]={index:o.zIndex,objects:[]});c[o.zIndex].objects.push({object:o,renderFn:s,hasChildren:f});continue}W._renderObject(t,o,s,f,i,n)}c=c.filter((function(t){return t&&t.objects.length})).sort((function(t,e){return t.index-e.index}));for(a=0;a<c.length;a++){p=c[a].objects;r=p.length;for(d=0;d<r;d++)W._renderObject(t,p[d].object,p[d].renderFn,p[d].hasChildren,i,n)}};W._renderObject=function(t,e,i,n,a,r){var o;var s;var l;var c;var u;if("function"===typeof i){s=e.attr("strokeWidth");"undefined"===typeof s&&(s=1);l=!!e.attr("fill");c=!!e.attr("stroke")&&s>0}t.save();e.rData.stroke=c;e.rData.strokeWidth=s;if(a){u=e.getVisualBounds();e.rData.oldVisualBounds={x:u.x,y:u.y,width:u.width,height:u.height}}W._applyAttributes(t,e);if(e.rData.vmTransform){o=e.rData.vmTransform;t.setTransform(r*o[0][0],r*o[1][0],r*o[0][1],r*o[1][1],r*o[0][2],r*o[1][2])}if(e.clip){t.beginPath();t.rect(e.clip.x,e.clip.y,e.clip.width,e.clip.height);t.clip()}if(l||c){e.preRender&&e.preRender();i.apply(e,[t,l,c])}n&&W._renderDisplayObjects(t,e.children,a,r);t.restore()};W._registerRenderFn=function(t,e){var i;if("function"!==typeof t)throw new TypeError("First parameter must be a function");i="function"!==typeof e&&"function"===typeof e.constructor?e.constructor:e;i.__renderFnId="_".concat(I++);L[i.__renderFnId]=t};W._getRenderFn=function(t){var e=t.__renderFnId||(t.constructor?t.constructor.__renderFnId:void 0);if(e)return L[e];var i;for(i=0;i<T;i++)if(k[i].displayObject===t.constructor){W._registerRenderFn(k[i].render,t);return k[i].render}for(i=0;i<T;i++)if(t instanceof k[i].displayObject){W._registerRenderFn(k[i].render,t);return k[i].render}t.constructor.__renderFnId="does not exist";return};W._updateTransforms=function(t,e,i){var n;var a;var r;var o;var s;var l={};var c=t?t.length:0;for(s in i)O.test(s)&&(l[s]=i[s]);for(n=0;n<c;n++){a=t[n];a.clearModelView();if(a.matrix){e.save();e.multiply(a.matrix);a.rData.vmTransform=e.elements;a.rData.dirtyVMTransform=true}a.rData.inherited={};for(s in l)a.rData.inherited[s]=l[s];o=a.children;if(o&&o.length){for(r=0;r<R;r++)a.hasOwnProperty(P[r])&&(l[s]=a[s]);W._updateTransforms(o,e,l)}a.matrix&&e.restore()}};W.Gradient={LINEAR:0,RADIAL:1};W._applyAttributes=function(t,e){var i;var n;for(n=0;n<R;n++){i=P[n];i in e&&"undefined"!==typeof e[i]&&(("fill"===i||"stroke"===i)&&e[i]&&e[i].gradient?e[i].gradient.r?t[V[i]]=W._createGradient(t,e[i].gradient,W.Gradient.RADIAL)||"#000000":t[V[i]]=W._createLinearGradient(t,e[i].gradient)||"#000000":t[V[i]||i]=e[i])}};W._createLinearGradient=function(t,e){return W._createGradient(t,e,W.Gradient.LINEAR)};W._createGradient=function(t,e,i){var n;if(Number.isNaN(+e.x0)||Number.isNaN(+e.y0)||Number.isNaN(+e.x1)||Number.isNaN(+e.y1))return;n=i===W.Gradient.RADIAL?t.createRadialGradient(e.x0,e.y0,0,e.x1,e.y1,e.r):t.createLinearGradient(e.x0,e.y0,e.x1,e.y1);var a=e.limits.length;for(var r=0;r<a;r++)n.addColorStop(e.limits[r],e.colors[r]);return n};W.registerRenderObject=function(t){k.push(t);T=k.length};var G=e["a"]=W},poXS:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("ESef");var r='<div class="pp-component pp-integer-component" ng-if="visible" tcl="integer">\n  <div class="label" ng-if="label" title="{{ label }}">{{ label }}</div>\n\n  <div class="value">\n    <div ng-class="{ \'lui-input-group\': isExpressionDefinition }">\n      <input type="text" maxlength="{{ maxlength }}" spellcheck="{{ !isExpression() }}" class="lui-input" ng-class="{\n\t\t\t\t\t\'lui-invalid\': invalid,\n\t\t\t\t\t\'lui-input-group__item\': isExpressionDefinition,\n\t\t\t\t\t\'lui-input-group__input\': isExpressionDefinition,\n\t\t\t\t\t\'is-expression\': isLocked()\n\t\t\t\t}" ng-model="displayValue" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" qva-model-onkeyup\n        pp-input-validator ng-readonly="isLocked()" ng-disabled="readOnly" ng-change="change()"\n        pp-expression-editor="value" pp-placeholder="{{placeholder}}" editor-disabled="!isLocked()"\n        expression-type="{{ expressionType }}" tid="{{ key }}" pattern="[0-9]+" />\n\n      <button class="lui-input-group__item  lui-input-group__button  lui-button"\n        ng-show="isExpressionDefinition && !readOnly" pp-expression-editor="value"\n        expression-type="{{ expressionType }}" q-title-translation="Tooltip.OpenExpressionEditor">\n        <span class="lui-button__icon  lui-icon  lui-icon--expression edit-expression"\n          ng-class="{\'active\': isExpression()}"></span>\n      </button>\n    </div>\n  </div>\n\n  <div ng-if="isLocked()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n</div>';var o={template:r,controller:["$scope",function(t){var e=function e(){return t.data};t.definition.maxlength?t.maxlength=t.definition.maxlength:t.maxlength=a["a"].name;t.placeholder="function"===typeof t.definition.placeholder?t.definition.placeholder():t.definition.placeholder;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);n["a"].defineExpression(t,true,true)}]};var s=e["default"]=o},pvUo:function(t,e,i){"use strict";var n=i("sWge");var a=i("oxue");var r=i("goAJ");var o=i("ZszH");var s=i("NTho");e["a"]={convert:l};function l(t,e){if(!t||!e||!e.app)throw new Error("Missing required parameter(s)");var i=t.data&&t.data.qDef;var l=i&&i.qFieldDefs&&i.qFieldDefs.length;if(!l)throw new Error("Unsupported operation: Can not convert a non-field to measure");var u=i.qFieldDefs[0];var d=i.qFieldLabels&&i.qFieldLabels[0];var p=e.app;var f={aggregation:r["a"].getAggregationForExpression(u,p,a["a"].findField),isField:c(p,u)};return n["a"].all(f).then((function(t){var n="countdistinct"===t.aggregation.toLowerCase();var a=n?"count":t.aggregation;var r=o["a"].getNormalizedExpression(u);t.isField&&(r="[".concat(r,"]"));n&&(r="distinct ".concat(r));var l=s["a"].addAggregation(a,r);var c=e.createExpressionMeasure(l,d);i.qLabelExpression&&i.qLabelExpression.length&&(c.qDef.qLabelExpression=i.qLabelExpression);return c}))}function c(t,e){return t.getFieldList().then((function(t){var i=o["a"].getNormalizedExpression(e);var n=a["a"].findField(i,t);return!!n}))}},qD1B:function(t,e,i){"use strict";var n=i("6uJb");var a={measures:{min:1,max:1,description:function t(e){var i="horizontal"===e.orientation?"properties.xAxis":"properties.yAxis";return n["default"].get(i)},add:function t(){},move:function t(){},remove:function t(){}},dimensions:{min:1,max:2,description:function t(e,i){var a;a=0===i?"Visualizations.Descriptions.Box":"horizontal"===e.orientation?"properties.yAxis":"properties.xAxis";return n["default"].get(a)},add:function t(){},move:function t(){},remove:function t(){}}};e["a"]=a},"qOK+":function(t,e,i){"use strict";var n=i("mWu2");var a=i("4nJ1");var r=i("T0sl");var o=i("pSod");var s={$new:function t(){var e={active:false,currentDataColIx:-1,effectiveDataColIx:-1,currentDataRowIx:-1,currentCell:void 0,activationCell:void 0,dataValues:{},unbindKeyboard:null};Object.defineProperties(e,{dataValuesArray:{get:function t(){var e;var i=[];var n=Object.keys(this.dataValues);var a=n.length;for(e=0;e<a;++e)i.push(parseInt(n[e],10));return i}},selectedIndices:{get:function t(){var e;var i=[];var n=this.dataValuesArray;var a=n.length;for(e=0;e<a;++e)i.push(this.dataValues[n[e]]);return i}}});return e},init:function t(e,i,n,a,r,o){e.confirm=function(){i.endSelections(true);e.deactivated();s.reset(n);s.hide(n);a()};e.cancel=function(){i.endSelections(false);e.deactivated();s.reset(n);s.hide(n);r()};e.clear=function(){n.dataValues={};o();s.reset(n);i.clearSelections();e.selectionsMade=false}},reset:function t(e){e.dataValues={};e.currentDataColIx=-1;e.effectiveDataColIx=-1;e.currentDataRowIx=-1;e.currentCell=void 0},show:function t(e,i){if(e.active)return;e.currentDataColIx=i.dataColIx;e.effectiveDataColIx=i.effectiveDataColIx;e.currentDataRowIx=i.dataRowIx;e.activationCell=a["a"].extend(true,{},i);e.active=true},hide:function t(e){e.active=false},bindKeyboard:function t(e,i){var a=".selections-keyboard-".concat(i);var r=n["default"].getService("$document");r.on("keyup".concat(a),(function(t){27===t.which?e.cancel():13===t.which&&e.confirm()}));return function(){r.off(a)}},isColumnar:function t(e,i){return i.type===e.CELL_TYPE_LEFT||i.type===e.CELL_TYPE_DATA},selectValue:function t(e,i,n){n.dataValues[i.dataValue]=s.isColumnar(e,i)?i.dataRowIx:i.dataColIx;n.currentDataColIx=i.dataColIx;n.effectiveDataColIx=i.effectiveDataColIx;n.currentDataRowIx=i.dataRowIx},selectCell:function t(e,i,n){if(e.gridType===e.GRID_TYPE_PIVOT){i[n?"addClass":"removeClass"]("selected-highlighted");i[n?"removeClass":"addClass"]("selected")}i.selectedHighlighted=!!n;i.selected=!n},lockCell:function t(e,i){e.gridType===e.GRID_TYPE_PIVOT?i.addClass("locked"):i.isSelectLocked=true},deselectValue:function t(e,i,n){delete n.dataValues[i.dataValue]},deselectCell:function t(e,i){if(e.gridType===e.GRID_TYPE_PIVOT){i.removeClass("selected-highlighted");i.removeClass("selected")}i.selectedHighlighted=false;i.selected=false},unlockCell:function t(e,i){e.gridType===e.GRID_TYPE_PIVOT?i.removeClass("locked"):i.isSelectLocked=false},removeCellStyle:function t(e){if(e.color.bgByExpression||e.style.color){e.styleCache={style:a["a"].extend(true,{},e.style),bgByExpression:e.color.bgByExpression};e.style="";e.color.bgByExpression=false}},restoreCellStyle:function t(e){if(e.styleCache){e.style=a["a"].extend(true,{},e.styleCache.style);e.color.bgByExpression=e.styleCache.bgByExpression;delete e.styleCache}},getSelectionType:function t(e,i){var n={};n[e.CELL_TYPE_TOP]="T";n[e.CELL_TYPE_LEFT]="L";n[e.CELL_TYPE_DATA]="D";return n[i]},sendSelection:function t(e,i,n,a,r){var o;var l;var c=n.selectedIndices;if(0===c.length)return;if(s.isColumnar(a,n.currentCell)){o=["number"===typeof n.effectiveDataColIx?n.effectiveDataColIx:n.currentDataColIx];l=n.selectedIndices}else{o=n.selectedIndices;l=[n.currentDataRowIx]}var u=s.getSelectionType(a,r.type);i.selectionsMade=true;e.select(l,o,u).then((function(t){t||i.clear()}))},getCellCountWithDataValue:function t(e,i,n){var a=[];var r=0;if(0===i.length)return 0;for(var o=0;o<i.length;++o){var l=i[o];var c=s.isColumnar(e,l)?l.dataColIx:l.dataRowIx;if(l.dataValue===n&&-1===a.indexOf(c)){a.push(c);r++}}return r},getSiblingCell:function t(e,i){if(e.gridType===e.GRID_TYPE_PIVOT)return i.currentCell;return i.activationCell},selectDimensionCells:function t(e,i,n,o,l,c){var u=l.dataValue;var d=s.isSelected(n,l);var p=r["a"].getSiblingCells(o,s.getSiblingCell(o,n)||l);if(-1===p.indexOf(l))return;var f=l.type===o.CELL_TYPE_TOP?e.getSize().qcx:e.getSize().qcy;var h=s.getCellCountWithDataValue(o,p,u);if(f===h&&c&&d)return;p.forEach((function(t){t.dataValue in n.dataValues&&s.selectCell(o,t)}));if(c&&d){s.deselectValue(o,l,n);p.forEach((function(t){t.dataValue===u&&s.deselectCell(o,t)}))}else if(d){if(!c){p.forEach((function(t){t.dataValue===u&&s.selectCell(o,t)}));s.selectCell(o,l,true)}}else{s.selectValue(o,l,n);p.forEach((function(t){t.dataValue===u&&s.selectCell(o,t)}));s.selectCell(o,l,true)}n.currentCell=a["a"].extend(true,{},l);return function(){0===n.dataValuesArray.length?i.clear():s.sendSelection(e,i,n,o,l)}},selectDimensionValue:function t(e,i,n,a,r,o,l){var c=s.activateSelections(e,i,n,a,r);var u;if(!r.locked&&!r.isNullValue){u=s.selectDimensionCells(i,n,a,o,r,l);u&&u()}return c},activateSelections:function t(e,i,a,r,o){if(!r.active&&!o.locked){i.beginSelections();s.show(r,o);r.unbindKeyboard=s.bindKeyboard(a,e);var l=n["default"].getService("$timeout");a.active=true;l((function(){a.activated(true)}))}return function(){r.unbindKeyboard()}},isSelected:function t(e,i){return i.dataValue in e.dataValues},updateStraight:function t(e,i,n){if(i.dataValuesArray.length){var a=r["a"].getSiblingCells(e,n);for(var o=0;o<a.length;++o){var l=a[o];if(l.dataValue in i.dataValues){s.selectCell(e,l);i.currentDataRowIx===l.dataRowIx&&s.selectCell(e,l,true)}}}},updatePivot:function t(e,i,n){if(i.dataValuesArray.length){var a=r["a"].getSiblingCells(e,n);for(var o=0;o<a.length;++o){var l=a[o];l.dataValue in i.dataValues&&s.selectCell(e,l)}}}};e["a"]=s},qZHi:function(t,e,i){"use strict";var n={SPARK:1,XSMALL:3,SMALL:7,MEDIUM:15,FULL:31};var a=[[550,450,n.FULL],[400,220,n.MEDIUM],[300,150,n.SMALL],[150,75,n.XSMALL],[0,0,n.SPARK]];var r=[[450,n.FULL],[220,n.MEDIUM],[150,n.SMALL],[75,n.XSMALL],[0,n.SPARK]];var o=[[550,n.FULL],[400,n.MEDIUM],[300,n.SMALL],[150,n.XSMALL],[0,n.SPARK]];var s=a.length;function l(t,e){var i;for(i=0;i<s;++i)if(t>=a[i][0]&&e>=a[i][1])return a[i][2];return n.SPARK}function c(t){var e;for(e=0;e<s;++e)if(t>=r[e][0])return r[e][1];return n.SPARK}function u(t){var e;for(e=0;e<s;++e)if(t>=o[e][0])return o[e][1];return n.SPARK}function d(t){var e=Object.keys(n).filter((function(e){return n[e]===t}))[0];return e&&e.toLowerCase()||""}e["a"]={LayoutMode:n,getLayoutMode:l,getLayoutModeKey:d,getHorizontalLayoutMode:u,getVerticalLayoutMode:c}},rwE6:function(t,e,i){"use strict";var n=i("T7lR");e["a"]={displayObject:n["a"],render:function t(e,i,n){if(this._radius){var a=this.x;var r=this.y;var o=this.width;var s=this.height;var l=Math.min(this._radius,o/2,s/2);var c=a+o;var u=r+s;e.beginPath();e.moveTo(a+l,r);e.quadraticCurveTo(a,r,a,r+l);e.lineTo(a,u-l);e.quadraticCurveTo(a,u,a+l,u);e.lineTo(c-l,u);e.quadraticCurveTo(c,u,c,u-l);e.lineTo(c,r+l);e.quadraticCurveTo(c,r,c-l,r);e.lineTo(a+l,r);e.closePath();i&&e.fill();n&&e.stroke()}else{i&&e.fillRect(this.x,this.y,this.width,this.height);n&&e.strokeRect(this.x,this.y,this.width,this.height)}}}},s0yP:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a=i("YH1i");var r=i("2UuD");var o=i("FMzN");var s=i("2Hli");var l=1000.12;var c=.1234;var u=new Date(2014,1,17,15,30,40);function d(t,e,i,n,a,d,p){var f={};var h=e.concat(t.options||[]).filter((function(t){if(t.fmt in f)return false;f[t.fmt]=true;return true}));h=h.map((function(t){var e;var a;var s;switch(t.type){case"D":s=new o["a"](d,"","","","D");a=u;break;case"M":s=new r["a"](d,"","","","M");a=l;break;default:s=new r["a"](d,"","","","F");a=/%$/.test(t.fmt)?c:l;break}if(t.label)e="function"===typeof t.label?t.label.call(null,i,n,d):t.label;else{e=s.format(a,t.fmt,t.thousand,t.decimal);t.fmt.indexOf(";")>=0&&(e+="; ".concat(s.format(-a,t.fmt,t.thousand,t.decimal)))}return{value:t.fmt,label:e,type:t.type}}));var v=s["a"].getValue(i,"".concat(p,"qNumFormat.qType"),"F");h=h.filter((function(t){return v===t.type}));a.splice(0,a.length);for(var g=0;g<h.length;++g)a.push(h[g]);return h}function p(t,e){var i=[];t.qDateFmt&&i.push({fmt:t.qDateFmt});i.push({fmt:"YYYY-MM-DD"});i.push({fmt:"DD MM YYYY"});i.push({fmt:"DD MMM YYYY"});i.push({fmt:"DD MMMM YYYY"});i.push({fmt:"MM/DD/YYYY"});i.push({fmt:"MMMM DD, YYYY"});t.qTimestampFmt&&i.push({fmt:t.qTimestampFmt});i.push({fmt:"YYYY-MM-DD hh:mm:ss[.fff]"});t.qTimeFmt&&i.push({fmt:t.qTimeFmt});i.push({fmt:"hh:mm:ss"});i.push({fmt:"h:mm:ss tt"});i.forEach((function(t){t.type="D";e.push(t)}))}function f(t,e){var i=[];t.qMoneyFmt&&i.push({fmt:t.qMoneyFmt,type:"M"});i.forEach((function(i){i.decimal=t.qMoneyDecimalSep;i.thousand=t.qMoneyThousandSep;e.push(i)}))}function h(t,e){var i=[];var n=t.qThousandSep;var a=t.qDecimalSep||".";if(t.qThousandSep){i.push({fmt:"#".concat(n,"##0")});i.push({fmt:"#".concat(n,"##0").concat(a,"0")});i.push({fmt:"#".concat(n,"##0").concat(a,"00")})}else{i.push({fmt:"0"});i.push({fmt:"0".concat(a,"0")});i.push({fmt:"0".concat(a,"00")})}i.push({fmt:"0%"});i.push({fmt:"0".concat(a,"0%")});i.push({fmt:"0".concat(a,"00%")});i.forEach((function(t){t.decimal=a;t.thousand=n;t.type="F";e.push(t)}))}function v(t,e){h(t,e);f(t,e);p(t,e)}var g={template:a["a"],controller:["$scope",function(t){var e=function e(){return t.data};var i=[];var a=void 0!==t.definition.numFormatRef?t.definition.numFormatRef:"qDef";a=a.length>0?"".concat(a,"."):a;n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineValue(t,t.definition,e);t.options=[];v(t.args.localeInfo,i);d(t.definition,i,t.data,t.args.handler,t.options,t.args.localeInfo,a);t.$watch("data.".concat(a,"qNumFormat.qType"),(function(){d(t.definition,i,t.data,t.args.handler,t.options,t.args.localeInfo,a)}))}]};var m=e["default"]=g},sMS6:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n={};var a=function t(e,i){var n=document.createElement("tr");n.style.fontSize=e;var a=document.createElement("td");Object.keys(i).forEach((function(t){a.style[t]=i[t]}));var r=document.createElement("div");r.innerHTML="t";a.appendChild(r);n.appendChild(a);var o=document.getElementsByTagName("body")[0];o.appendChild(n);var s=n.getBoundingClientRect().height;var l=r.getBoundingClientRect().height;o.removeChild(n);return{outer:Math.ceil(s),inner:Math.ceil(l)}};var r=function t(e,i,a){n[a]||(n[a]={});n[a][e]=i};var o=function t(e,i){var a;return null===(a=n[i])||void 0===a?void 0:a[e]};function s(t,e,i){var n=o(t,i);if(!n){n=a(t,e);r(t,n,i)}return n}},sPK5:function(t,e,i){"use strict";i.r(e);var n=i("PoH+");var a=i.n(n);var r=i("2Hli");var o=i("GG1N");var s='<div class="pp-component pp-palette-creator" ng-if="visible" tcl="palette-creator">\n\t<qv-palette-creator colors="value.colors" min-max="value.minMax" percentage="value.percentage" limits="value.limits" types="value.types"></qv-palette-creator>\n</div> ';var l=i("Up9c");var c={template:s,controller:["$scope",function(t){var e=function e(){return t.data};o["a"].defineLabel(t,t.definition,e,t.args.handler);o["a"].defineVisible(t,t.args.handler);o["a"].defineReadOnly(t,t.args.handler);o["a"].defineChange(t,t.args.handler);o["a"].defineValue(t,t.definition,e);t.value=t.value||{};t.value.colors=r["a"].getValue(t,"value.colors",t.definition.colors);t.value.limits=r["a"].getValue(t,"value.limits",t.definition.limits);t.value.types=r["a"].getValue(t,"value.types",t.definition.types);t.value.minMax=r["a"].getValue(t,"value.minMax",t.definition.minMax);t.value.percentage=r["a"].getValue(t,"value.percentage",t.definition.percentage);var i=a.a.debounce((function(){t.change()}),300);t.$watch("value",(function(){i()}),true);t.change()}]};var u=e["default"]=c},sWkO:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-data-header" ng-style="{\'margin-top\': marginTop}">\n    <span class="pp-data-header-text">{{label}}</span>\n</div>';var r={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);t.marginTop=t.definition.marginTop||"0px"}]};var o=e["default"]=r},sYQE:function(t,e,i){"use strict";var n=Math.log(10);var a=1e-12;var r={log:function t(e,i){if(e<=0||i<=0)return NaN;return Math.log(e)/Math.log(i)},log10:function t(e){if(e<=0)return NaN;return Math.log(e)/n},eliminateFloatingError:function t(e){var i=Math.round(e);Math.abs(e-i)<a&&(e=i);return e},getNiceNumber:function t(e){var i;if(0===e)return 0;var a=Math.floor(Math.log(Math.abs(e))/n);var r=e/Math.pow(10,a);i=r<=1?1:r<=2?2:r<=5?5:10;return i*Math.pow(10,a)*(e<0?-1:1)},getSmallNiceNumber:function t(e){var i;if(0===e)return 0;var a=Math.floor(Math.log(Math.abs(e))/n);var r=e/Math.pow(10,a);if(r<1){i=5;a--}else i=r<2?1:r<5?2:5;return i*Math.pow(10,a)*(e<0?-1:1)},getMagnitude:function t(e){if(0===e)return 0;var i=Math.floor(Math.log(Math.abs(e))/n);return Math.pow(10,i)},getFraction:function t(e){if(0===e)return 0;var i=Math.floor(Math.log(Math.abs(e))/n);return e/Math.pow(10,i)},getGoodNumber:function t(e){var i;if(0===e)return 0;var a=Math.floor(Math.log(Math.abs(e))/n);var r=e/Math.pow(10,a);i=Math.ceil(r);7!==i&&9!==i||i++;r>1&&r<=1.5?i=1.5:r>2&&r<=2.5&&(i=2.5);return i*Math.pow(10,a)*(e<0?-1:1)},calculateTicks:function t(e,i,n,a,r,o,s,c,u,d,p,f){var v;var C=false;void 0===p&&(p=false);Number.isNaN(+a)&&(a=null);Number.isNaN(+r)&&(r=null);if(i>n){v=i;i=n;n=v}if(null!==a&&null!==r&&a>r){v=a;a=r;r=v}this.plotSize=e;this.dataMin=i;this.dataMax=n;this.explicitPlotMin=a;this.explicitPlotMax=r;this.minTickSpacingInPixel=o;this.usedDataMin=null===this.explicitPlotMin?this.dataMin:this.explicitPlotMin;this.usedDataMax=null===this.explicitPlotMax?this.dataMax:this.explicitPlotMax;this.absMax=Math.max(Math.abs(this.usedDataMax),Math.abs(this.usedDataMin));this.absMin=Math.min(Math.abs(this.usedDataMax),Math.abs(this.usedDataMin));this.usedDataRange=this.usedDataMax-this.usedDataMin;this.maxNumIntervals=this.plotSize/this.minTickSpacingInPixel;this.maxNumTicks=this.maxNumIntervals+1;this.minTickDataSpacing=f||0;this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);this.fontHeight=s;this.niceNumberEnabled=c;this.tickBaseValue=0;this.spaceUseLimit=void 0===d?.6:d;this.spaceOptimizingEnabled=u;this.plotMaxCanBeTuned=null===this.explicitPlotMax&&this.usedDataMax>0;this.plotMinCanBeTuned=null===this.explicitPlotMin&&this.usedDataMin<0;if(!c||0===e){this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;this.tickDataSpacingNN=this.tickDataSpacing;w.call(this);return k.call(this)}if(null!==this.explicitPlotMax&&this.explicitPlotMax<this.usedDataMin||null!==this.explicitPlotMin&&this.explicitPlotMin>this.usedDataMax){C=true;l.call(this)}else if(0===this.usedDataRange)h.call(this);else if(this.maxNumIntervals<1)b.call(this);else{this.usedDataMax>0&&this.usedDataMin<0?1===this.maxNumIntervals?m.call(this,true):this.maxNumIntervals>=5?g.call(this):this.maxNumIntervals<2?y.call(this):x.call(this):g.call(this);if(this.tickMaxIndex<this.tickMinIndex){this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);b.call(this)}else _.call(this)}w.call(this);if(p&&this.maxNumIntervals>=1&&!C){D.call(this);I.call(this)}return k.call(this)}};function o(){var t=0===this.explicitPlotMax?1:r.getMagnitude(this.explicitPlotMax);var e=this.explicitPlotMax;var i;i=this.maxNumIntervals<2?e-t:e-2*t;i=Math.ceil(i/t)*t;var n=e-i;this.tickDataSpacing=Math.max(n/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(t/10,r.getNiceNumber(this.tickDataSpacing));this.plotMax=e;this.plotMin=i;this.plotRange=n;this.maxNumIntervals<1&&(this.tickBaseValue=this.plotMin)}function s(){var t=0===this.explicitPlotMin?1:r.getMagnitude(this.explicitPlotMin);var e=this.explicitPlotMin;var i;i=this.maxNumIntervals<2?e+t:e+2*t;i=Math.floor(i/t)*t;var n=i-e;this.tickDataSpacing=Math.max(n/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(t/10,r.getNiceNumber(this.tickDataSpacing));this.plotMax=i;this.plotMin=e;this.plotRange=n;this.maxNumIntervals<1&&(this.tickBaseValue=this.plotMax-this.tickDataSpacingNN)}function l(){null!==this.explicitPlotMax&&this.explicitPlotMax<this.usedDataMin?o.call(this):null!==this.explicitPlotMin&&this.explicitPlotMin>this.usedDataMax&&s.call(this)}function c(){this.tickBaseValue=this.usedDataMin;this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMin;this.plotRange=0;this.tickDataSpacingNN=0===this.usedDataMin?1:Math.abs(this.usedDataMin);this.tickDataSpacing=this.tickDataSpacingNN;this.tickMinIndex=0;this.tickMaxIndex=0}function u(){if(0===this.usedDataMax){if(this.maxNumIntervals<2){this.plotMin=0;this.plotMax=1}else{this.plotMin=-1;this.plotMax=1}this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacing=Math.max(this.plotRange/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(.1,r.getNiceNumber(this.tickDataSpacing));this.tickMinIndex=Math.ceil(this.plotMin/this.tickDataSpacingNN);this.tickMaxIndex=Math.floor(this.plotMax/this.tickDataSpacingNN)}else{var t=f(Math.abs(this.usedDataMax),this.maxNumIntervals);if(this.usedDataMax>0){this.plotMax=t.max;this.plotMin=t.min;this.tickBaseValue=t.tickBaseValue}else{this.plotMax=-t.min;this.plotMin=-t.max;this.tickBaseValue=-t.tickBaseValue}this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacing=Math.max(this.plotRange/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(t.magnitude/10,r.getNiceNumber(this.tickDataSpacing));this.tickMinIndex=Math.floor((this.plotMin-this.tickBaseValue)/this.tickDataSpacingNN);this.tickMaxIndex=Math.floor((this.plotMax-this.tickBaseValue)/this.tickDataSpacingNN)}}function d(){if(0===this.explicitPlotMax){this.plotMax=0;this.plotMin=-1;this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacingNN=Math.max(.1,r.getNiceNumber(this.plotRange/this.maxNumIntervals))}else o.call(this)}function p(){if(0===this.explicitPlotMin){this.plotMax=1;this.plotMin=0;this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacingNN=Math.max(.1,r.getNiceNumber(this.plotRange/this.maxNumIntervals))}else s.call(this)}function f(t,e){var i=r.getMagnitude(t);var n=t/i;var a=Math.floor(n);var o=Math.round(n);var s;var l;var c=0;if(e<2){s=a*i;l=(a+1)*i;e<1&&(c=s)}else{s=(o-1)*i;l=(o+1)*i}return{min:s,max:l,tickBaseValue:c,magnitude:i}}function h(){null!==this.explicitPlotMin&&null!==this.explicitPlotMax?c.call(this):null===this.explicitPlotMin&&null===this.explicitPlotMax?u.call(this):null===this.explicitPlotMin&&null!==this.explicitPlotMax?d.call(this):p.call(this)}function v(t,e,i){void 0===t&&(t=null!==this.explicitPlotMin);void 0===e&&(e=null!==this.explicitPlotMax);this.tickDataSpacingNN=i?r.getGoodNumber(this.tickDataSpacing):r.getNiceNumber(this.tickDataSpacing);S.apply(this,[t,e])}function g(){v.call(this);var t=this.tickMaxIndex-this.tickMinIndex;var e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;var i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;if(i&&this.maxNumIntervals>=5){while(this.tickDataSpacing<=this.absMax&&i){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);v.call(this);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit}if(!i)return}this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);(i||t<=2&&this.maxNumIntervals>=2*t)&&v.apply(this,[void 0,void 0,true]);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;while(this.tickDataSpacing<=this.absMax&&i){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);v.apply(this,[void 0,void 0,true]);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit}}function m(t){if(t){this.tickDataSpacingNN=r.getGoodNumber(this.absMax);this.tickBaseValue=-this.tickDataSpacingNN;this.plotMin=null===this.explicitPlotMin?-this.tickDataSpacingNN:this.explicitPlotMin;this.plotMax=null===this.explicitPlotMax?this.tickDataSpacingNN:this.explicitPlotMax;this.tickMinIndex=null===this.explicitPlotMin?0:1;this.tickMaxIndex=(null===this.explicitPlotMax,1);this.tickDataSpacingNN*=2}else{this.plotMax=this.usedDataMax;this.plotMin=this.usedDataMin;this.plotRange=this.plotMax-this.plotMin;this.tickMinIndex=0;this.tickMaxIndex=0;this.tickDataSpacingNN=r.getNiceNumber(this.absMax);this.tickDataSpacingNN===this.absMax&&(this.tickDataSpacingNN=r.getNiceNumber(1.1*this.absMax))}}function b(){var t;this.tickDataSpacingNN=r.getNiceNumber(this.tickDataSpacing);this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;this.plotRange=this.plotMax-this.plotMin;this.tickMinIndex=0;this.tickMaxIndex=0;if(this.usedDataMax<0||this.usedDataMin>0){t=r.getSmallNiceNumber(this.plotRange);this.tickBaseValue=Math.ceil(this.plotMin/t)*t}}function y(){var t=this.usedDataMax>=-this.usedDataMin;var e=t||null!==this.explicitPlotMin;var i=!t||null!==this.explicitPlotMax;v.apply(this,[e,i,true]);var n=(this.absMax+(1-this.spaceUseLimit)*this.absMin)/this.spaceUseLimit*1.0001;while(this.tickDataSpacing<=n&&this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);v.apply(this,[e,i,true])}var a=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=a/this.plotRange;this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit&&m.call(this)}function x(){g.call(this);var t=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=t/this.plotRange;if(this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit){this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);y.call(this)}}function _(){var t=r.getNiceNumber(this.tickDataSpacingNN);if(this.tickDataSpacingNN===t||0!==this.tickBaseValue)return;var e=this.tickDataSpacingNN;var i=this.tickMinIndex;var n=this.tickMaxIndex;var a=n-i;var o=this.plotMin;var s=this.plotMax;this.tickDataSpacingNN=t;S.apply(this,[null!==this.explicitPlotMin,null!==this.explicitPlotMax]);var l=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=l/this.plotRange;var c=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;var u=this.tickMaxIndex-this.tickMinIndex;if(!c&&(u===a||u>=10||u>=3&&1.5*u>=a))return;this.tickDataSpacingNN=e;this.tickMinIndex=i;this.tickMaxIndex=n;this.plotMin=o;this.plotMax=s;this.plotRange=this.plotMax-this.plotMin}function C(){if(this.niceNumberEnabled&&this.plotMax!==this.plotMin&&0!==this.plotSize){this.minTickValue=this.tickBaseValue+this.tickMinIndex*this.tickDataSpacingNN;this.maxTickValue=this.tickBaseValue+this.tickMaxIndex*this.tickDataSpacingNN}else{this.minTickValue=this.plotMin;this.maxTickValue=this.plotMax}}function w(){var t;var e;this.mainTickValues=[];this.secondaryTickValues=[];C.call(this);if(0===this.plotSize)return;if(!this.niceNumberEnabled){this.numIntervals=Math.floor(this.maxNumIntervals);this.tickDataSpacing=Math.max(this.usedDataRange/this.numIntervals,this.minTickDataSpacing);t=this.usedDataMin;for(e=0;e<=this.numIntervals;e++)this.mainTickValues.push(t+e*this.tickDataSpacing);t=this.usedDataMin+this.tickDataSpacing/2;for(e=0;e<this.numIntervals;e++)this.secondaryTickValues.push(t+e*this.tickDataSpacing);return}t=this.tickBaseValue;var i=this.tickMaxIndex-this.tickMinIndex;if(i<1)return;for(e=0;e<=i;e++)this.mainTickValues.push(t+(e+this.tickMinIndex)*this.tickDataSpacingNN);t=this.tickBaseValue+this.tickDataSpacingNN/2;for(e=0;e<i;e++)this.secondaryTickValues.push(t+(e+this.tickMinIndex)*this.tickDataSpacingNN)}function q(){var t;var e;var i;var n;var a=[.5];var r=this.mainTickValues[0];for(n=0;n<a.length;n++){t=r-this.tickDataSpacingNN*a[n];e=this.plotMax-t;i=this.plotSize*this.tickDataSpacingNN/e;if(i>3*this.fontHeight){this.plotMin=t;this.plotRange=e;this.mainTickValues.splice(0,0,t);return}}}function M(){var t;var e;var i;var n;var a=[.5];var r=this.mainTickValues[this.mainTickValues.length-1];for(n=0;n<a.length;n++){t=r+this.tickDataSpacingNN*a[n];e=t-this.plotMin;i=this.plotSize*this.tickDataSpacingNN/e;if(i>3*this.fontHeight){this.plotMax=t;this.plotRange=e;this.mainTickValues.push(t);return}}}function S(t,e){this.tickMinIndex=t?Math.ceil(this.usedDataMin/this.tickDataSpacingNN):Math.floor(this.usedDataMin/this.tickDataSpacingNN);this.tickMaxIndex=e?Math.floor(this.usedDataMax/this.tickDataSpacingNN):Math.ceil(this.usedDataMax/this.tickDataSpacingNN);this.plotMin=t?this.usedDataMin:this.tickMinIndex*this.tickDataSpacingNN;this.plotMax=e?this.usedDataMax:this.tickMaxIndex*this.tickDataSpacingNN;this.plotRange=this.plotMax-this.plotMin}function D(){var t=this.plotMin;var e=this.plotMax;var i=this.tickMinIndex;var n=this.tickMaxIndex;var a=this.tickDataSpacingNN;var o=this.tickMaxIndex-this.tickMinIndex;var s=null!==this.explicitPlotMin;var l=null!==this.explicitPlotMax;var c=true;var u=2*this.fontHeight;var d=o;var p;var f=this.mainTickValues?this.mainTickValues.length:0;var h=this.mainTickValues[0];var v=this.mainTickValues[f-1];null===this.explicitPlotMin&&h>this.dataMin&&d++;null===this.explicitPlotMax&&v<this.dataMax&&d++;if(d===o)return;var g=0;while(c&&g<10){this.tickDataSpacingNN=r.getSmallNiceNumber(.99*this.tickDataSpacingNN);S.apply(this,[s,l]);p=this.tickMaxIndex-this.tickMinIndex;p>d&&(c=false);g++}c=true;g=0;while(this.tickDataSpacingNN<a&&c&&g<10){this.tickDataSpacingNN=r.getGoodNumber(1.1*this.tickDataSpacingNN);S.apply(this,[s,l]);p=this.tickMaxIndex-this.tickMinIndex;p===d&&this.plotSize*this.tickDataSpacingNN/this.plotRange>u&&(c=false);g++}if(c){this.plotMin=t;this.plotMax=e;this.tickMinIndex=i;this.tickMaxIndex=n;this.tickDataSpacingNN=a}else w.call(this)}function I(){var t=this.mainTickValues?this.mainTickValues.length:0;var e=this.mainTickValues[0];var i=this.mainTickValues[t-1];if(null===this.explicitPlotMin&&e>this.dataMin&&null===this.explicitPlotMax&&i<this.dataMax)if(Math.abs(this.dataMin)<=Math.abs(this.dataMax)){q.call(this);M.call(this)}else{M.call(this);q.call(this)}else null===this.explicitPlotMin&&e>this.dataMin?q.call(this):null===this.explicitPlotMax&&i<this.dataMax&&M.call(this)}function k(){return{plotMin:this.plotMin,plotMax:this.plotMax,tickSpacing:this.tickDataSpacingNN,tickBaseValue:this.tickBaseValue,tickMinIndex:this.tickMinIndex,tickMaxIndex:this.tickMaxIndex,minTickValue:this.minTickValue,maxTickValue:this.maxTickValue,mainTickValues:this.mainTickValues,secondaryTickValues:this.secondaryTickValues}}e["a"]=r},sYuT:function(t,e,i){"use strict";var n='<lui-popover style="min-width: 100px;width: 150px;" align-to="alignTo" position="\'bottom\'" on-close-view="closeTypeFoldout(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}" class="pp-type-popover" tid="pp-type-popover">\n\t<ul class="lui-list">\n\t\t<li ng-repeat="item in items" class="lui-list__item" tid="{{item.tid}}" ng-class="{ \'lui-disabled\': item.disabled() }" qva-activate="itemClicked($event,item);" ng-disabled="item.disabled()">\n\t\t\t<span class="lui-list__text" q-translation="{{item.translation}}"></span>\n\t\t</li>\n\t</ul>\n</lui-popover>\n';var a=e["a"]={template:n,controller:["$scope",function(t){t.itemClicked=function(t,e){t.preventDefault();e.disabled()||e.select()}}],scope:{items:"=",alignTo:"=",closeTypeFoldout:"=",qvaOutsideIgnoreFor:"="}}},sqvK:function(t,e,i){"use strict";var n=i("czhI");var a=i.n(n);var r=i("mWu2");var o=i("S1lg");var s='<div class="rain progress" ng-class="{\'qv-fade-out\': fadeOut}">\n\t<div class="rain-image-container" ng-if="isLoadingCardImageFlag"></div>\n\n\t<div ng-if="!isLoadingCardImageFlag" class="rain-progress" ng-style="rainStyle" aria-label="{{objectSRloading}}">\n\t\t<div class="progress-div rotating" ng-class="ngClasses">\n\t</div>\n\n\t<div class="qv-loader-text" ng-if="messageObj" ng-class="ngClasses">\n\t\t<div ng-show="messageObj.task" q-translation="{{messageObj.task}}"></div>\n\t\t<div ng-show="messageObj.message" q-translation="{{messageObj.message}}"></div>\n\t</div>\n</div>\n';var l=i("6uJb");var c=i("Oyoy");var u=i("acVu");function d(t,e,i,n,a,r,o){try{var s=t[r](o);var l=s.value}catch(t){i(t);return}s.done?e(l):Promise.resolve(l).then(n,a)}function p(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function o(t){d(r,n,a,o,s,"next",t)}function s(t){d(r,n,a,o,s,"throw",t)}o(void 0)}))}}r["default"].directive("qvRain",[function(){return{replace:true,template:s,restrict:"E",scope:{show:"=",model:"=",resize:"=?",messageObj:"=?"},link:function t(e,i){var n;e.objectSRloading=l["default"].get("Accessibility.object.Loading");e.rainStyle={};e.isLoadingCardImageFlag=Object(u["b"])("LOADING_CARD_IMAGES");e.animation=null;function r(){var t=i[0].getBoundingClientRect();var n=Math.min(t.width,t.height);n*=.3;e.rainStyle.height="".concat(n,"px");e.rainStyle.width="".concat(n,"px");e.rainStyle.top=(t.height-n)/2;e.rainStyle.left=(t.width-n)/2}function s(t){return d.apply(this,arguments)}function d(){d=p(regeneratorRuntime.mark((function t(n){var r,s,l,c;return regeneratorRuntime.wrap((function t(u){while(1)switch(u.prev=u.next){case 0:r={container:i.find(".rain-image-container")[0],renderer:"svg",loop:true,autoplay:true};u.next=3;return Object(o["a"])();case 3:s=u.sent;u.next=6;return a.a.get(n);case 6:l=u.sent;c=l.data;r.animationData=c;e.animation=s.loadAnimation(r);e.animation.play();case 11:case"end":return u.stop()}}),t)})));return d.apply(this,arguments)}function f(){if(e.animation){e.animation.stop();e.animation.destroy();e.animation=null}}e.$watch("show",(function(t){if(void 0===t)return;t&&r()}));e.$watch("model",(function(t){if(e.isLoadingCardImageFlag){var i=t?t.genericType:"";t&&t.layout&&t.layout.qUndoExclude&&t.layout.qUndoExclude.generated&&(i=t.layout.qUndoExclude.generated.visualization);s(c["a"].getLoadingImageAnimationUrlFromChartType(i))}}));e.resize&&(n=e.resize(r));r();e.$on("$destroy",(function(){n&&n();e.isLoadingCardImageFlag&&f()}))}}}])},tkJJ:function(t,e,i){"use strict";i.r(e);i.d(e,"listShowFunctions",(function(){return oi}));var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("TmNk");var l=i.n(s);var c=i("mWu2");var u=i("uVcZ");var d=i("4nJ1");var p=i("6uJb");var f=i("395F");var h=i("gF9a");var v=i("sWge");var g=i("5ezW");var m=i("G3JA");var b=i("G1wx");var y=i("oxue");var x='<lui-popover style="min-width: 200px;width: 230px;" align-to="alignTo" position="position" collision="\'flipfit\'" on-close-view="closeAddPopover(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<object-add-typeahead>\n\t\t<lui-popover-header>\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" name="new-dimension" autocomplete="off" ng-model="search.term" tid="add-dimension-input" qva-focus="autoFocus"\n\t\t\t\t\t   object-add-typeahead-input on-escape="onEscape($event)" on-enter="onEnter($event)" maxlength="255"/>\n\t\t\t\t<button ng-if="allowExpressionEditor !== false" class="lui-button  lui-input-group__item  lui-input-group__button" qva-activate="close()"\n\t\t\t\t\t\tpp-expression-editor="search.term" pp-expression-editor-on-apply="addViaExpressionEditor({value:value})" expression-type="dimension"\n\t\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor" tid="fx-button">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression  edit-expression"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</lui-popover-header>\n\t\t<div class="object-add-popover-content" object-add-typeahead-menu>\n\t\t\t<div class="object-add-popover-list-header" ng-if="data.dimensions.length" q-translation="Common.Dimensions"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="dimension in data.dimensions" tid="dimension-item"\n\t\t\t\t\tobject-add-typeahead-item="dimension" on-select="addLibraryDimension(dimension)">\n\t\t\t\t\t<span ng-if="dimension.isDrillDown" class="lui-icon lui-icon--drill-down lui-list__aside" q-title-translation="Tooltip.dimensions.drilldown"></span>\n\t\t\t\t\t<span qve-highlight text="{{dimension.label}}" title="{{dimension.label}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="data.measures.length"  q-translation="Common.Measures"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="measure in data.measures" tid="measure-item"\n\t\t\t\t\tobject-add-typeahead-item="measure" on-select="addLibraryMeasure(measure)">\n\t\t\t\t\t<span qve-highlight text="{{measure.value}}" title="{{measure.value}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="data.fields.length" q-translation="Common.Fields"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in data.fields" tid="field-item"\n\t\t\t\t\tobject-add-typeahead-item="field" on-select="addFieldDimension(field)"\n\t\t\t\t\tng-class="{\'derived-field\': (field.isDerived && search.term === \'\')}">\n\t\t\t\t\t<i ng-if="isDirectDiscoveryField( field )" class="lui-icon  lui-icon--direct-discovery  lui-list__aside" q-title-translation="{{ getDirectDiscoveryTypeTranslationKey( field.qTags ) }}"></i>\n\t\t\t\t\t<span ng-if="field.isDateField" class="lui-icon lui-list__aside  lui-icon--calendar"></span>\n\t\t\t\t\t<span ng-if="field.isGeoField" class="lui-icon lui-list__aside  lui-icon--map"></span>\n\t\t\t\t\t<span qve-highlight text="{{getFieldDisplayName(field)}}" title="{{field.toolTip}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-nohits" ng-if="!data.dimensions.length && !data.fields.length" q-translation="Toolbox.Search.Nohits"></div>\n\t\t</div>\n\t</object-add-typeahead>\n</lui-popover>\n';var _=i("JUQR");var C=i("knjk");var w=i("Uzwy");var q=i("Fusc");var M=i("goAJ");var S=i("acVu");var D=i("dtUF");function I(t){I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return I(t)}var k=false;var L=null;function T(t,e,i){A(t,e,i,this)}T.prototype.open=O;T.prototype.close=R;T.prototype.isAddingData=P;var E=T;function A(t,e,i,n){t||N("Scope is required");e||N("luiPopover is required");i&&"object"===I(i)||N("A data container object is required");n.scope=t;n.luiPopover=e;n.popover=null;n.boundClose=R.bind(n);var a=100;var r={term:""};function o(t){if(""!==r.term){t.stopPropagation();r.term=""}n.boundClose()}function s(t){if(""!==r.term){t.stopPropagation();var e=q["a"].classify(r.term);c(e)?i.addExpressionMeasure({value:r.term}):i.addFieldDimension({value:r.term})}n.boundClose()}t.position||(t.position="right");function l(t){return""===r.term?t.label:C["a"].trimAutoCalendarName(t.value)}L=null;u(r.term);t.$watch((function(){return r.term}),(function(t,e){if(t===e)return;u(t)}));n.settings={template:x,input:{isDirectDiscoveryField:_["a"].isDirectDiscoveryField,getDirectDiscoveryTypeTranslationKey:_["a"].getTypeTranslationKey,search:r,onEscape:o,onEnter:s,close:R,data:{fields:[],dimensions:[],measures:[]},getFieldDisplayName:l,autoFocus:b["a"].treatAsDesktop(),addFieldDimension:function t(e){if(w["a"].isMeasure(e.classifications)){var a=d["a"].extend(true,{},e);M["a"].getAggregationForFieldItem(e).then((function(t){a.value=w["a"].getMeasureExpression(e.value,t);i.addExpressionMeasure(a).then((function(){n.boundClose()}))}))}else i.addFieldDimension(e).then((function(){n.boundClose()}))},addLibraryDimension:function t(e){i.addLibraryDimension(e).then((function(){n.boundClose()}))},addLibraryMeasure:function t(e){i.addLibraryMeasure(e).then((function(){n.boundClose()}))},addViaExpressionEditor:function t(e){var a=q["a"].classify(e.value);c(a)?i.addExpressionMeasure(e).then((function(){n.boundClose()})):i.addFieldDimension(e).then((function(){n.boundClose()}))}},dock:"bottom",closeOnResize:true,closeOnOutside:true,closeOnEscape:true};function c(t){var e,i,n,a,r;if((null===(e=t.result)||void 0===e||null===(i=e.function)||void 0===i||null===(n=i.content)||void 0===n?void 0:n.length)>0)return true;if(Object(S["b"])("REF_MASTER_MEASURE")&&L&&(null===(a=t.result)||void 0===a||null===(r=a.remainder)||void 0===r?void 0:r.isFieldlike)){var o=t.result.remainder.content;return L.measures.some((function(t){return t.label===o}))}return false}n.createListItems=u;function u(e){function i(){var t=V(L.fields,e);var i=V(L.dimensions,e);var r=V(L.measures,e);if(i.length+r.length>a){var o=Math.max(a-r.length,0);var s=Math.max(a-i.length,0);i=m["a"].limit(i,o);r=m["a"].limit(i,s);t=[]}else if(t.length+i.length+r.length>a){var l=Math.max(a-i.length-r.length,0);t=m["a"].limit(t,l)}n.settings.input.data.fields=t;n.settings.input.data.dimensions=i;n.settings.input.data.measures=r}L?i():v["a"].all({fields:y["a"].getSortedFields(t.args.app),dimensions:y["a"].getSortedDimensions(t.args.app),measures:y["a"].getSortedMeasures(t.args.app)}).then((function(t){var n=t.fields.map((function(t){var i=t.isDerived&&""===e?t.qName.substring(t.qName.lastIndexOf(".")+1,t.qName.length):t.qName;return{toolTip:t.qName,label:i,value:t.qName,trimmedValue:t.displayName,qTags:t.qTags,isDerived:t.isDerived,isDateField:t.isDateField,isGeoField:t.isGeoField,classifications:t.classifications,defaultAggregation:t.defaultAggregation}}));var a=t.dimensions.map((function(t){return{label:t.qData.title,value:t.qData.title,libraryId:t.qInfo.qId,isDrillDown:"H"===t.qData.grouping}}));var r=t.measures.map((function(t){return{value:t.qData.title,label:t.qData.title,libraryId:t.qInfo.qId}}));L={fields:n,dimensions:a,measures:r};i()}))}}function P(){return k}function O(t,e){if(this.popover){this.popover=null;return}this.settings.input.search.term="";this.settings.alignTo=t.target;var i=this;L=null;this.createListItems("");this.popover=this.luiPopover.show(this.settings);this.popover.closing.then((function(t){t&&!e(t.target)&&(i.popover=null);k=false}));k=true}function R(){if(this.popover){this.popover.close();this.popover=null;k=false}}function V(t,e){if(""===e)return t;return t.filter((function(t){if("undefined"===typeof t.value)return false;return g["a"].string(t.value.toLowerCase()).indexOf(g["a"].string(e.toLowerCase()))>-1}))}function N(t){throw new Error("ChangeAggregationPopover: ".concat(t))}var z={create:j};var F=z;function j(t,e,i){return new E(t,e,i)}var H=i("2Hli");var $=i("8H7g");var B='<div class="pp-component pp-list-component pp-list pp-nm-hcd" tcl="data" ng-class="::{ \'auto-chart\': isAutoChart }" pp-scrollable-auto-content>\n\t<div class="pp-nm-hcd__lists" qv-sortable-list="sortableItemLists" qva-context-menu="openGlobalContextMenu($event)">\n\n\t\t\x3c!-- Drop zone - Auto place --\x3e\n\t\t<pp-drop-zone ng-if="isAutoChart"\n\t\t\t\t\t  on-drag-begin="showAutoDropZone(info)"\n\t\t\t\t\t  on-drop="onDropAutoDropZone(info)"\n\t\t\t\t\t  css-class="pp-nm-hcd__auto-drop-zone"\n\t\t\t\t\t  translation="DropZone.Auto">\n\t\t</pp-drop-zone>\n\n\t\t\x3c!-- Add more button for auto-charts --\x3e\n\t\t<button class="lui-button pp-nm-hcd__add-more-button" ng-if="::isAutoChart" ng-class="{\'lui-active\': isAddingData()}" ng-click="openAddMore($event)" q-translation="Common.Add"></button>\n\n\t\t\x3c!-- Lists --\x3e\n\t\t<div class="pp-nm-hcd__list"\n\t\t\t ng-class="{\n\t\t\t\t \'disabled\': list.disabled || list.locked || !!(list.isReadOnly && list.isReadOnly()),\n\t\t\t\t \'empty\': !isAutoChart && !getUndraggedItems(list).length,\n\t\t\t\t \'alternative\': list.isAlternative }"\n\t\t\t ng-if="list.show()"\n\t\t\t ng-repeat="list in sortableItemLists.lists"\n\t\t\t tid="{{::list.tid}}">\n\n\t\t\t\x3c!-- List header --\x3e\n\t\t\t<div class="pp-nm-hcd__list-header">\n\t\t\t\t<span class="pp-nm-hcd__list-header-title">{{::list.title}}</span>\n\t\t\t</div>\n\n\t\t\t\x3c!-- List body --\x3e\n\t\t\t<div class="pp-nm-hcd__list-body">\n\n\t\t\t\t\x3c!-- Drop zone - Dimension / Measure --\x3e\n\t\t\t\t<pp-drop-zone ng-if="isAutoChart"\n\t\t\t\t\t\t\t  on-drag-begin="showTargetedDropZone(list.tid, info)"\n\t\t\t\t\t\t\t  on-drop="onDropTargetedDropZone(list.tid, info)"\n\t\t\t\t\t\t\t  css-class="pp-nm-hcd__targeted-drop-zone"\n\t\t\t\t\t\t\t  size-selector=".pp-nm-hcd__list-body"\n\t\t\t\t\t\t\t  translation="DropZone.DropItem">\n\t\t\t\t</pp-drop-zone>\n\n\t\t\t\t<ul class="pp-nm-hcd__list-items">\n\n\t\t\t\t\t\x3c!-- Dimensions / measures --\x3e\n\t\t\t\t\t<li class="pp-nm-hcd__list-item pp-nm-hcd__list-item__data"\n\t\t\t\t\t\tng-class="item.classList"\n\t\t\t\t\t\tng-repeat="item in list.items track by item.id"\n\t\t\t\t\t\tng-include="item.templateSrc">\n\t\t\t\t\t</li>\n\n\t\t\t\t\t\x3c!-- Empty element for auto-charts --\x3e\n\t\t\t\t\t<li class="pp-nm-hcd__list-item pp-nm-hcd__list-item-empty" ng-if="::isAutoChart" ng-show="showEmptyItem(list)">\n\t\t\t\t\t\t<div class="pp-nm-di">\n\t\t\t\t\t\t\t<div class="pp-nm-di__header">\n\t\t\t\t\t\t\t\t<div class="pp-nm-di__header-title" q-translation="Common.Empty"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\n\t\t\t\t\t\x3c!-- Next possible item - Description and add button --\x3e\n\t\t\t\t\t<li class="pp-nm-hcd__list-item" ng-if="::!isAutoChart && !list.isAlternative" ng-show="showNextPossibleItem(list)">\n\t\t\t\t\t\t<div class="pp-nm-di">\n\t\t\t\t\t\t\t<div class="pp-nm-di__description" ng-if="showNextPossibleItemDescription(list)">\n\t\t\t\t\t\t\t\t{{getNextPossibleItemDescription(list)}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class="lui-button pp-nm-di__add-button"\n\t\t\t\t\t\t\t\t\tng-class="{ \'lui-active\': list.adding }"\n\t\t\t\t\t\t\t\t\tng-click="list.addClicked($event)"\n\t\t\t\t\t\t\t\t\tqv-enter="list.addClicked($event)"\n\t\t\t\t\t\t\t\t\tqva-outside-ignore-for="{{::\'addButton-\' + $id}}"\n\t\t\t\t\t\t\t\t\ttid="add-hc-data">\n\t\t\t\t\t\t\t\t{{::list.getAddLabel()}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t\x3c!-- Add alternative button --\x3e\n\t\t\t<button class="lui-button pp-nm_hcd__add-alternative-button"\n\t\t\t\t\tng-class="{ \'lui-active\': list.adding }"\n\t\t\t\t\tng-if="list.isAlternative"\n\t\t\t\t\tng-click="list.addClicked($event)"\n\t\t\t\t\tqv-enter="list.addClicked($event)"\n\t\t\t\t\tqva-outside-ignore-for="{{::\'addButton-\' + $id}}"\n\t\t\t\t\ttid="add-hc-data"\n\t\t\t\t\tng-disabled="!!(list.isReadOnly && list.isReadOnly())">\n\t\t\t\t{{::list.getAddLabel()}}\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n';var W=i("zBv7");var G=i("OnHE");var U=i("USFI");var Y=i("pvUo");var J=i("jaF1");var K=i("kPub");var Z={isInvalidToMoveMeaToDim:it,isInvalidToMoveDimToAltMea:nt,isInvalidToMoveLibDimToMea:rt,isInvalidToMoveAltDimToMeaSect:at,isInvalid:ot,isMovingDimToMea:st,isMovingMeaToDim:lt};function Q(t,e){if(!t||!e)throw new Error("Missing required parameter")}function X(t){return 3===t.typeFlag||t.__sortableItem__&&3===t.__sortableItem__.typeFlag}function tt(t){return 12===t.typeFlag||t.__sortableItem__&&12===t.__sortableItem__.typeFlag}function et(t){return 5===t.typeFlag||t.__sortableItem__&&5===t.__sortableItem__.typeFlag}function it(t,e,i){if("measure"===t.type&&"measure"===e.type)return 1===i.typeFlag||3===i.typeFlag;return(1===e.typeFlag||3===e.typeFlag)&&"measure"===t.type}function nt(t,e){return"dimension"===t.type&&tt(e)}function at(t,e,i){if("dimension"===t.type&&"dimension"===e.type)return X(t)&&(et(i)||tt(i));return X(t)&&(et(e)||tt(e))}function rt(t,e,i){Q(t,e);if("dimension"===t.type&&"dimension"===e.type)return"dimension"===t.type&&!!t.data.qLibraryId&&(et(i)||tt(i));return"dimension"===t.type&&!!t.data.qLibraryId&&(et(e)||tt(e))}function ot(t){return t.isInvalid&&t.isInvalid()}function st(t,e){Q(t,e);return!(t.isInvalid&&t.isInvalid())&&"dimension"===t.type&&!t.data.qLibraryId&&5===e.typeFlag}function lt(t,e){Q(t,e);return!(t.isInvalid&&t.isInvalid())&&"measure"===t.type&&!t.data.qLibraryId&&1===e.typeFlag}var ct={isForbiddenMove:ut,isInvalid:Z.isInvalid,isMovingDimToMea:Z.isMovingDimToMea,isMovingMeaToDim:Z.isMovingMeaToDim};function ut(t,e,i){return Z.isInvalidToMoveDimToAltMea(t,e)||Z.isInvalidToMoveAltDimToMeaSect(t,e,i)||Z.isInvalidToMoveLibDimToMea(t,e,i)||Z.isInvalid(t)}var dt=i("VnWy");var pt=i("CXZG");var ft=i("MGTR");var ht=i("Fbef");var vt={measures:{description:function t(){var e="Visualizations.Descriptions.LengthBars";return p["default"].get(e)}},dimensions:{description:function t(e,i,n){var a;var r=e.qHyperCubeDef.qDimensions.length;a=n.isAutoChart&&i>r-1?"Visualizations.Descriptions.Color":r>1&&0===i?"stacked"===e.barGrouping.grouping?"Visualizations.Descriptions.Stack":"Visualizations.Descriptions.Group":"Visualizations.Descriptions.Bars";return p["default"].get(a)}}};var gt=vt;var mt=i("qD1B");var bt=i("26xU");var yt=i("zGse");var xt=i("fcQb");var _t=i("3ru6");var Ct=i("fkEm");var wt=i("5Hbw");var qt=i("6WTg");var Mt=i("YWN+");var St='<div class="qv-viz" ng-class="{link : linkInteractionOn}">\n\t<div class="kpi-data" qva-activate="onShowVerifyDialog()">\n\t\t<div ng-show="baseLayoutInfo.components[0].show" class="measure-wrapper" ng-class="textAlign" ng-style="measureTitleStyle">\n\t\t\t<div class="measure-title ellips-text" title="{{measureTitle}}">\n\t\t\t\t<span ng-bind="measureTitle"></span>\n\t\t\t\t<i class="info-icon  lui-icon  lui-icon--goto" ng-if="linkInteractionOn" title="{{sheetLinkTitle}}"></i>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="value-wrapper" ng-class="textAlign">\n\t\t\t<div class="ellips-text" ng-class="{ \'no-shrink\' : secondaryValues.length && baseLayoutInfo.components[1].components[1].components[0].show}">\n\t\t\t\t<qv-kpi-value value="mainValue.value" formatted-value="mainValue.formattedValue" value-style="mainValue.style" formatter="mainValue.formatter" css-class="mainValue.cssClass" show-glyph="mainValue.showGlyph"></qv-kpi-value>\n\t\t\t</div>\n\t\t\t<div ng-show="baseLayoutInfo.components[1].components[1].components[0].show" class="secondary-wrapper ellips-text" ng-repeat="secondaryValue in secondaryValues">\n\t\t\t\t<qv-kpi-value value="secondaryValue.value" formatted-value="secondaryValue.formattedValue" value-style="secondaryValue.style" title-style="secondaryValue.titleStyle" formatter="secondaryValue.formatter" css-class="secondaryValue.cssClass" show-glyph="secondaryValue.showGlyph" measure-title="secondaryValue.measureTitle"></qv-kpi-value>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\x3c!--\n\t<div ng-show="useViz" class="visualization">\n\t\t<qv-object class="cell-content" model="viz.model" options="viz.options"></qv-object>\n\t</div>\n\t--\x3e\n\t<div class="click-again-overlay" ng-class="{show : showVerifyDialog}" ng-style="verifyDialogStyle" qva-activate="linkToSheet()">\n\t\t<span ng-if="!sheetIsMissing" q-translation="properties.kpi.verifyToGoSheet"></span>\n\t\t<span class="sheetLinkTitle ellips-text" ng-bind="sheetLinkTitle"></span>\n\t</div>\n\n</div>\n';var Dt=i("UV1h");var It=i("WFGH");var kt=It["default"].getLogicFor("hard","default");function Lt(t){return H["a"].getValue(t,"qDef.conditionalColoring.useBaseColors",true)}var Tt={uses:"data",addTranslation:"Properties.AddData",items:{measures:{disabledRef:"",items:{measureAxisMin:{type:"items",ref:"qDef.measureAxis.min",defaultValue:0},measureAxisMax:{type:"items",ref:"qDef.measureAxis.max",defaultValue:100},conditionalColoringUseConditionalColoring:{type:"items",ref:"qDef.conditionalColoring.useConditionalColoring",defaultValue:false},conditionalColoringUseSingleColor:{type:"items",ref:"qDef.conditionalColoring.singleColor",defaultValue:3},conditionalColoringPaletteSingleColor:{type:"items",ref:"qDef.conditionalColoring.paletteSingleColor",defaultValue:kt.color.paletteColor.defaultValue},limits:{type:"items",ref:"qDef.conditionalColoring.segments.limits",defaultValue:[]},paletteColors:{type:"items",ref:"qDef.conditionalColoring.segments.paletteColors",defaultValue:[{index:6}]}}}}};var Et={type:"items",uses:"settings",component:"expandable-items",translation:"Common.Appearance",items:{presentation:{type:"items",grouped:false,translation:"properties.presentation",items:{showMeasureTitle:{ref:"showMeasureTitle",component:"checkbox",translation:"properties.kpi.showTitle",defaultValue:true},textAlign:{ref:"textAlign",type:"string",component:"item-selection-list",translation:"properties.Alignment",horizontal:true,items:[{component:"icon-item",icon:"align_left",labelPlacement:"bottom",value:"left",translation:"properties.dock.left"},{component:"icon-item",icon:"align_center",labelPlacement:"bottom",value:"center",translation:"Common.Center"},{component:"icon-item",icon:"align_right",labelPlacement:"bottom",value:"right",translation:"properties.dock.right"}],defaultValue:"center"},layoutBehavior:{type:"string",component:"dropdown",ref:"layoutBehavior",translation:"properties.kpi.layoutBehavior",defaultValue:"responsive",undefinedValue:"responsive",snapshot:{tid:"property-layoutBehavior"},options:[{value:"responsive",translation:"properties.responsive"},{value:"relative",translation:"properties.fluid"},{value:"fixed",translation:"properties.fixed"}],show:function t(){return Object(S["b"])("CHART_KPI_FONT_SIZE_LAYOUTS")}},fontSize:{ref:"fontSize",type:"string",component:"dropdown",translation:"MediaTool.Toolbar.FontSize",options:[{value:"S",translation:"Common.Small"},{value:"M",translation:"Common.Medium"},{value:"L",translation:"Common.Large"}],defaultValue:"M"},linkToSheet:{type:"items",items:{useLink:{ref:"useLink",type:"boolean",component:"switch",translation:"properties.kpi.linkToSheet",defaultValue:false,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}]},kpiLink:{ref:"sheetLink",type:"string",component:"sheet-dropdown",show:function t(e){return e.useLink}},openUrlInNewTab:{ref:"openUrlInNewTab",type:"boolean",component:"switch",translation:"properties.kpi.openUrlInNewTab",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],show:function t(e){return e.useLink}}}}}},color:{type:"items",grouped:false,translation:"properties.color",items:{conditionalColoring:{type:"array",component:"measures-tab",ref:"qHyperCubeDef.qMeasures",items:{useConditionalColoring:{ref:"qDef.conditionalColoring.useConditionalColoring",component:"switch",type:"boolean",options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],translation:"properties.kpi.conditionalColoring",defaultValue:false,change:function t(e){var i=H["a"].getValue(e,"qDef.conditionalColoring");var n=H["a"].getValue(e,"qDef.conditionalColoring.segments.paletteColors")||H["a"].getValue(e,"qDef.conditionalColoring.segments.colors");i&&i.useConditionalColoring&&1===n.length?e.qDef.conditionalColoring.segments.paletteColors=[{index:-1,color:Dt["a"].resolveColor(e.qDef.conditionalColoring.paletteSingleColor||e.qDef.conditionalColoring.singleColor)}]:e.qDef.conditionalColoring.paletteSingleColor={index:-1,color:Dt["a"].resolveColor(n[0].color)}}},useBaseColor:{ref:"qDef.conditionalColoring.useBaseColors",type:"boolean",defaultValue:true,translation:"properties.libraryColors",component:"switch",show:function t(e,i){var n=H["a"].getValue(i.properties,"color.useBaseColors");var a=H["a"].getValue(e,"qDef.conditionalColoring.useBaseColors");if("off"===n){H["a"].setValue(i.properties,"color.useBaseColors");H["a"].setValue(e,"qDef.conditionalColoring.useBaseColors",false)}else void 0===a&&H["a"].setValue(e,"qDef.conditionalColoring.useBaseColors",true);return true},options:[{value:false,translation:"properties.off"},{value:true,translation:"properties.on"}]},percentageWarning:{component:"text",translation:"properties.kpi.librarySegmentWarning",style:"hint",show:function t(e){var i=H["a"].getValue(e,"qDef.conditionalColoring.useBaseColors");var n=H["a"].getValue(e,"qDef.conditionalColoring.useConditionalColoring");return i&&n}},paletteSingleColor:{component:"color-picker",translation:"properties.color",ref:"qDef.conditionalColoring.paletteSingleColor",type:"object",dualOutput:true,defaultValue:kt.color.paletteColor.defaultValue,show:function t(e){if(!H["a"].getValue(e,"qDef.conditionalColoring.paletteSingleColor")){var i=Dt["a"].resolveColor(H["a"].getValue(e,"qDef.conditionalColoring.singleColor"));var n={index:-1,color:i};H["a"].setValue(e,"qDef.conditionalColoring.paletteSingleColor",n)}return!Lt(e)&&e.qDef.conditionalColoring&&!e.qDef.conditionalColoring.useConditionalColoring}},rangeLimits:{type:"items",items:{min:{ref:"qDef.measureAxis.min",translation:"properties.axis.min",type:"number"},max:{ref:"qDef.measureAxis.max",translation:"Common.Max",type:"number",defaultValue:100}},show:function t(){return false}},segmentInfo:{ref:"qDef.conditionalColoring.segments",type:"items",component:"color-scale-creator",conditionalColoringRef:{props:"qHyperCubeDef.qMeasures",layout:"qHyperCube.qMeasureInfo"},useGlyph:true,useAutoMinMax:true,show:function t(e){return!Lt(e)&&e.qDef.conditionalColoring.useConditionalColoring},items:{limits:{ref:"qDef.conditionalColoring.segments.limits",type:"array",items:{value:{ref:"value",type:"number",expression:"optional",invalid:function t(e){return Number.isNaN(+e.value)},defaultValue:1},gradient:{translation:"properties.gradient",ref:"gradient",type:"boolean",show:false}}},paletteColors:{type:"array",ref:"qDef.conditionalColoring.segments.paletteColors",defaultValue:[{index:6}],items:{color:{ref:"color",type:"string",defaultValue:""},index:{ref:"index",type:"integer"},icon:{ref:"icon",type:"string",defaultValue:""}}}}}}}}}}};var At={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{suppressZero:null,calcCond:{uses:"calcCond"}}}}};var Pt={type:"items",component:"accordion",items:{data:Tt,addons:At,settings:Et}};var Ot=i("hmfc");var Rt=i("ohbW");var Vt=new Rt["a"];var Nt=Dt["a"].initializeService("object.kpi");var zt=310;var Ft=10;var jt={NONE:0,ADJUSTTOTEXT:1};var Ht={NONE:0,SCALE:1,MAX:2};var $t={ROW:"row",COLUMN:"column"};function Bt(t,e,i){var n;var a=t.ratio?t.ratio:1;var r=e/i;n=t.direction===$t.ROW?a>r?$t.COLUMN:$t.ROW:a>r?$t.ROW:$t.COLUMN;return n}function Wt(t){if(!t.components||0===t.components.length)return t;var e;var i;var n=0;var a=t.boundingBox.height;var r=t.boundingBox.width;var o;var s;var l=t.direction;var c=Bt(t,a,r);var u;t.components.forEach((function(t){t.direction=t.direction?t.direction:c;e=t.size.min?t.size.min:t.size?t.size:0;if("function"===typeof t.isVisible&&!t.isVisible()||e*a<(t.size.treshold&&t.size.treshold.height?t.size.treshold.height:10)||r<(t.size.treshold&&t.size.treshold.width?t.size.treshold.width:10))t.show=false;else{n+=e;t.show=true}}));for(o=t.components.length-1;o>=0;o--){s=t.components[o];n<1?s.size.stretch&&(s.size.value=s.size.min+(1-n)):"number"===typeof s.size||(s.size.value=null)}t.components.forEach((function(t){i=t.size.value?t.size.value:t.size.min?t.size.min:t.size;u={};if(l===$t.ROW){u.height=a;u.width=r*i}else{u.width=r;u.height=a*i}t.boundingBox=u}));t.components.forEach((function(t){Wt(t)}));return t}function Gt(t){return{fontSize:Math.max(zt/t,Ft)}}function Ut(t,e,i,n,a){a=a||1;var r="10px ".concat(Nt.getStyle("label.value","fontFamily"));var o=Vt.getFontHeight(r)+1;var s=n?n*Vt.getTextWidth("M",r):Vt.getTextWidth(t,r)*a;var l=1.2*o;var c=Math.min(e/s,i/l);return{fontSize:Math.max(9*c,Ft)}}function Yt(t,e,i){if(!t.fontSizes)return{fontSize:"10px"};var n=t.getText();var a=t.fontSizes.min;var r=t.fontSizes.max;var o=t.fontSizes.maxNrChars;var s=Ut(n,e,i,o,t.fontSizes.scale||1);var l=Math.min((i-a.height)/(r.height-a.height),1);var c=a.fontSize+l*(r.fontSize-a.fontSize);var u=Math.max(Math.min(s.fontSize,c),a.fontSize);return{fontSize:u}}function Jt(t,e,i,n,a,r){var o=t.boundingBox.width;var s=t.boundingBox.height;t.components&&t.components.forEach((function(e){Jt(e,t,o,s,a,r)}));var l;if("function"===typeof t.getText){l=a===Ht.MAX?Ut(t.getText(),o,s):a===Ht.SCALE?Yt(t,o,s):Gt(t.fontSizes.maxNrChars);r===jt.ADJUSTTOTEXT&&(t.boundingBox={height:l.height,width:l.width});t.fontSizes||(t.fontSizes={});t.fontSizes.fontSize="".concat(10*l.fontSize,"%");t.fontSizes.scaledFontSize=l.fontSize}}var Kt={checkLayout:Wt,getDirection:Bt,sizeComponent:Jt,TextScaleMode:Ht,ElementScaleMode:jt,Direction:$t,FixedMobileHeight:150};var Zt=Kt;var Qt=i("/irJ");var Xt=i("z4LI");var te=i("gh04");var ee=i("4zDG");var ie=i("sCDE");var ne=i("i72x");var ae=i("oRmM");function re(t,e){var i=t.qHyperCube.qMeasureInfo[e];if(!i)return false;if(i.coloring&&i.coloring.baseColor&&i.coloring.baseColor.color)return i.coloring.baseColor;if(i.baseColor&&i.baseColor.color)return i.baseColor;return}function oe(t,e){if(void 0===e.useBaseColors)return!t.color||"measure"===t.color.useBaseColors;return e.useBaseColors}var se={getValueInfo:function t(e,i,n){var a=Math.abs(e);var r=n.qHyperCube.qMeasureInfo[i].conditionalColoring;var o;var s;var l="";var c;var u=n.qHyperCube.qMeasureInfo[i].coloring?n.qHyperCube.qMeasureInfo[i].coloring.gradient:null;var d=re(n,i);if(r.useConditionalColoring&&oe(n,r)&&u&&"absolute"===u.limitType){o=ne["a"].getAutoMinMax(u.limits,e);var p=u.limits.map((function(t){return(t-o.min)/(o.max-o.min)}));var f=u.colors.map(Dt["a"].resolveColor);var h=ae["a"].setupColors(f,u.breakTypes,p);var v=ae["a"].createColorScale(h.colors,false);v.setLimits(h.limits);v.setMaxMinValues(o.max,o.min);c=v.getColor(e).toHex()}else if(oe(n,r)&&d)c=Dt["a"].resolveColor(d);else if(r.useConditionalColoring){o=n.qHyperCube.qMeasureInfo[i].measureAxis;var g=o&&!Number.isNaN(+o.min)?o.min:e-a;var m=o&&!Number.isNaN(+o.max)?o.max:e+a;s=(e-g)/(m-g);var b=ne["a"].getSegmentIndex(r,e,g);l=ne["a"].getIcon(r.segments,b)||"";c=ne["a"].shouldBlend(r.segments,b)?ne["a"].blendValue(r.segments,s,g,m):ne["a"].resolveColorSegment(r.segments,b)}else c=ne["a"].resolveColor(r.paletteSingleColor||r.singleColor);return{color:c,icon:l,useCondColor:r.useConditionalColoring}}};var le=i("gKi2");var ce='<div class="ellips-text">\n  <div class="kpi-value" ng-style="valueStyle" tid="kpi-value">\n    <div class="ellips-text">\n      <span ng-bind="currentFormattedValue" title="{{currentFormattedValue}}"></span>\n    </div>\n    <div class="glyph-wrapper" ng-if="showGlyph">\n      <span ng-class="cssClass" class="lui-icon"></span>\n    </div>\n  </div>\n  <div class="kpi-title ellips-text" ng-style="titleStyle" ng-bind="measureTitle"></div>\n</div>';var ue=i("tnCi");c["default"].directive("qvKpiValue",[function(){return{replace:true,template:ce,restrict:"E",scope:{value:"=",formattedValue:"=",valueStyle:"=",formatter:"=",cssClass:"=",showGlyph:"=",measureTitle:"=",titleStyle:"="},link:function t(e){var i;function n(t,n,a,r){i&&i.destroy();i=new ue["a"](t,{currentValue:n},400).progress((function(){t.currentFormattedValue=r?r.formatValue(t.currentValue):t.currentValue;e.$digest()})).then((function(){t.currentFormattedValue="U"!==r.type?a:r.formatValue(t.currentValue)}))}function a(t,e){var i="0";var n;var a=t.match(/(?:-?\d+)([^\d](?=\d))/);var r=a?a[1]:"";var o;var s=0;if(r){o=new RegExp("(?:".concat(d["a"].escapeRegExp(r),")(\\d+)"));a=t.match(o);s=a?a[1].length:0}if(s){i+=r;for(n=0;n<s;n++)i+="0"}e&&(i+="A");return i}function r(){if(Number.isNaN(+e.formattedValue)||!e.formatter)e.currentFormattedValue=e.formattedValue;else if("U"===e.formatter.type){e.tweenFormatter||(e.tweenFormatter=e.formatter.clone());e.tweenFormatter.pattern=a(e.formattedValue,true);e.tweenFormatter.prepare();n(e,e.value,e.formattedValue,e.tweenFormatter)}else n(e,e.value,e.formattedValue,e.formatter)}e.$watchCollection("[formattedValue,formatter]",(function(){r()}))}}}]);function de(t){var e=this.$scope;var i=this;te["a"].get(t).then((function(t){e.sheet=t;Object(ie["a"])(e,"sheet",(function(t){var n=t&&t.labelExpression;var a=t&&t.qMeta&&t.qMeta.title;e.sheetLinkTitle=n||a||"";e.sheetIsMissing=false;i.updateStyles()}))})).catch((function(){e.sheetLinkTitle=p["default"].get("Bookmarks.SheetMissingDialogTitle");e.sheetIsMissing=true;i.updateStyles()}))}var pe=qt["a"].extend("kpi",{namespace:".kpi",init:function t(e,i,n,a){var r=this;var o;var s=c["default"].getService("$timeout");var l=function t(){c["default"].$apply(e,(function(){e.showVerifyDialog=false}))};this._super(e,i,n,a);this._styleService=Dt["a"].initializeService("object.kpi");var u=i.find(".qv-viz");this._$element=u;this.$scope.mainValueStyle={};this.$scope.measureTitleStyle={};this.$scope.viz={};this.$scope.secondaryValues=[];this.$scope.secondaryLayouts=[];this.$scope.showSecondaryValues=false;this.$scope.mainValue={formattedValue:"",value:null,style:null};e.showVerifyDialog=false;e.onShowVerifyDialog=function(){if(!e.linkInteractionOn)return;c["default"].$apply(e,(function(){e.showVerifyDialog=true;e.updateVerifyDialogFontSize()}));o=s(l,3e3)};e.linkToSheet=function(){if(!e.linkInteractionOn||e.sheetIsMissing||!e.showVerifyDialog)return;var t=Qt["a"].getUrlForSheet(e.layout.sheetLink,"analysis");e.layout.openUrlInNewTab||void 0===e.layout.openUrlInNewTab?window.open(t):Qt["a"].goToSheet(e.layout.sheetLink,Xt["a"].States.ANALYSIS);s.cancel(o);l()};e.updateVerifyDialogFontSize=function(){if(e.showVerifyDialog){var t=e.verifyDialogLayoutInfo.components[0];Zt.checkLayout(e.verifyDialogLayoutInfo);Zt.sizeComponent(t,e.verifyDialogLayoutInfo,e.verifyDialogLayoutInfo.boundingBox.width,e.verifyDialogLayoutInfo.boundingBox.height,Zt.TextScaleMode.SCALE,Zt.ElementScaleMode.NONE);e.verifyDialogStyle={fontSize:t.fontSizes.fontSize}}};this.$scope.baseLayoutInfo={direction:Zt.Direction.COLUMN,ratio:1e9,boundingBox:{width:u.width(),height:u.height()},components:[{size:{min:.5,treshold:{width:50,height:12}},getText:function t(){return e.measureTitle},fontSizes:{maxNrChars:15,min:{fontSize:10,height:12},max:{fontSize:40,height:80}},isVisible:function t(){return e.showMeasureTitle}},{size:{min:.8,stretch:true},ratio:1,components:[{size:{min:.5,stretch:true},getText:function t(){return r.$scope.mainValue.formattedValue+(r.$scope.mainValue.glyph?r.$scope.mainValue.glyph:"")},fontSizes:{maxNrChars:4,min:{fontSize:10,height:10},max:{fontSize:500,height:500}}},{size:.5,components:this.$scope.secondaryLayouts,isVisible:function t(){return r.$scope.secondaryLayouts.length>0}}]}]};this.$scope.secondaryLayoutInfo={size:{min:1,treshold:{width:50,height:30}},direction:Zt.Direction.COLUMN,components:[{size:{min:.6,stretch:true},fontSizes:{maxNrChars:8,min:{fontSize:10,height:20},max:{fontSize:500,height:500}}},{size:{min:.4},fontSizes:{maxNrChars:15,min:{fontSize:10,height:20},max:{fontSize:30,height:500}}}]};this.$scope.verifyDialogLayoutInfo={size:{min:1,width:20,height:20},boundingBox:{width:0,height:0},components:[{size:{min:.2,treshold:{width:100,height:100}},getText:function t(){return p["default"].get("properties.kpi.verifyToGoSheet")},fontSizes:{maxNrChars:16,min:{fontSize:10,height:20},max:{fontSize:13,height:50}}}]};e.$on("$destroy",(function(){o&&s.cancel(o)}))},isValid:function t(e){return!!e&&!!e.qHyperCube&&e.qHyperCube.qMeasureInfo.length&&!e.qHyperCube.qMeasureInfo.some((function(t){return!!t.qError}))},getBaseFonts:function t(){var e=7;var i=4;var n=3;var a=1.5;return{font:{baseFontSizeSmall:e,baseFontSizeMedium:i,baseFontSizeLarge:n},layout:{responsive:{S:e,M:i,L:n},relative:{S:e*a,M:i*a,L:n},fixed:{S:e*a,M:i*a,L:n}}}},updateData:function t(e){var i;if(this._destroyed)return v["a"].reject();if(!this.isValid(e))return v["a"].resolve();this._data=e;var n=3.75;var a=this.getBaseFonts();var r=e.qHyperCube.qDataPages[0].qMatrix[0];var o=e.qHyperCube.qMeasureInfo.length;var s=wt["a"].inClient();var l=o-1;var c=this.getFormatterForMeasures(e.qHyperCube.qMeasureInfo.length);var u=this.$scope.secondaryValues;var d;var p=this.$scope.secondaryLayouts;var f;var h;var g;var m;var b;var y=this.$scope.sheet&&this.$scope.sheet.qMetaDef&&this.$scope.sheet.qMetaDef.title?this.$scope.sheet.qMetaDef.title:null;var x=function t(){return g};var _=function t(){return b};var C;this.$scope.showMeasureTitle=e.showMeasureTitle;this.$scope.textAlign=e.textAlign;var w=null!==(i=e.layoutBehavior)&&void 0!==i?i:"responsive";var q=this.$scope.baseLayoutInfo.components[0];var M=this.$scope.baseLayoutInfo.components[1];if(Object(S["b"])("CHART_KPI_FONT_SIZE_LAYOUTS")&&"fixed"===w){q.fontSizes.maxNrChars=a.layout[w][e.fontSize]*n;M.components[0].fontSizes.maxNrChars=a.layout[w][e.fontSize]}else if(Object(S["b"])("CHART_KPI_FONT_SIZE_LAYOUTS")&&"relative"===w){q.fontSizes.maxNrChars=a.font.baseFontSizeMedium*n;M.components[0].fontSizes.maxNrChars=a.layout[w][e.fontSize]}else{q.fontSizes.maxNrChars=a.font.baseFontSizeMedium*n;M.components[0].fontSizes.maxNrChars=0}var D=7/3;M.components[0].fontSizes.scale="S"===e.fontSize?D:"L"===e.fontSize?1:Math.sqrt(D);this.$scope.useLink=e.useLink;s&&this.$scope.useLink&&e.sheetLink&&(!y||e.sheetLink!==y)&&de.call(this,e.sheetLink);this.$scope.mainValue.value=e.qHyperCube.qDataPages[0].qMatrix[0][0].qNum;this.$scope.mainValue.formattedValue=c[0]&&"U"===c[0].type&&!Number.isNaN(+e.qHyperCube.qDataPages[0].qMatrix[0][0].qNum)?c[0].formatValue(this.$scope.mainValue.value):e.qHyperCube.qDataPages[0].qMatrix[0][0].qText;this.$scope.mainValue.formatter=c[0];for(C=0;C<l;C++){h=r[C+1].qText;m=r[C+1].qNum;g=!c[C+1]||"U"!==c[C+1].type||Number.isNaN(+m)?h:c[C+1].formatValue(m);b=e.qHyperCube.qMeasureInfo[C+1].qFallbackTitle;if(!u[C]){f=this.createSecondaryValue(x,_);d={style:f.layoutInfo.components[0].fontSizes.value,titleStyle:f.layoutInfo.components[1].fontSizes.value};u.push(d);p.push(f.layoutInfo)}d=u[C];d.value=m;d.formattedValue=g;d.formatter=c[C+1];d.measureTitle=b;var I=p[C].components[0];var k=p[C].components[1];if(Object(S["b"])("CHART_KPI_FONT_SIZE_LAYOUTS")&&"fixed"===w){I.fontSizes.maxNrChars=2*a.layout[w][e.fontSize];k.fontSizes.maxNrChars=a.layout[w][e.fontSize]*n}else{I.fontSizes.maxNrChars=2*a.layout[w][e.fontSize];k.fontSizes.maxNrChars=a.font.baseFontSizeMedium*n}}if(u.length>l){p.splice(l,u.length-l);u.splice(l,u.length-l)}this.$scope.measureTitle=e.qHyperCube.qMeasureInfo[0].qFallbackTitle;this.$scope.showSecondaryValues=u.length>0;return v["a"].resolve()},updateStyles:function t(){if(!this._data)return v["a"].resolve();var e=this;var i=this._data;var n=wt["a"].inClient();var a;var r;this.$scope.linkInteractionOn=n&&this._navigation&&this.$scope.layout.useLink&&!!this.$scope.layout.sheetLink;this.$scope.verifyDialogLayoutInfo.boundingBox.width=this._$element.width();this.$scope.verifyDialogLayoutInfo.boundingBox.height=this._$element.height();this.$scope.baseLayoutInfo.boundingBox=this.getBoundingBox();Zt.checkLayout(this.$scope.baseLayoutInfo);this.$scope.baseLayoutInfo.components.forEach((function(t){var n=e.backendApi.isSnapshot&&e._data&&!e.options.freeResize;var a=n?e._data.snapshotData.isZoomed:e.options.isZoomed;Zt.sizeComponent(t,e.$scope.baseLayoutInfo,e.$scope.baseLayoutInfo.boundingBox.width,e.$scope.baseLayoutInfo.boundingBox.height,Object(S["b"])("CHART_KPI_FONT_SIZE_LAYOUTS")&&"fixed"===i.layoutBehavior?Zt.TextScaleMode.NONE:0===e.$scope.secondaryValues.length&&a?Zt.TextScaleMode.MAX:Zt.TextScaleMode.SCALE,0===e.$scope.secondaryValues.length&&a?Zt.ElementScaleMode.ADJUSTTOTEXT:Zt.ElementScaleMode.NONE)}));r=se.getValueInfo(this.$scope.mainValue.value,0,i);this.$scope.mainValue.cssClass=le["a"].getIconClass(r.icon);this.$scope.mainValue.showGlyph=r.useCondColor&&r.icon&&""!==r.icon;a=this.$scope.baseLayoutInfo.components[1].components[0];var o=a.fontSizes.scaledFontSize;this.$scope.mainValue.style={color:r.color,fontSize:a.fontSizes.fontSize,fontFamily:this._styleService.getStyle("label.value","fontFamily")};a=this.$scope.baseLayoutInfo.components[0];this.$scope.measureTitleStyle={color:this._styleService.getStyle("label.name","color"),fontSize:a.fontSizes.fontSize,fontFamily:this._styleService.getStyle("label.name","fontFamily")};for(var s=1;s<i.qHyperCube.qMeasureInfo.length;s++){a=this.$scope.baseLayoutInfo.components[1].components[1].components[s-1].components[0];r=se.getValueInfo(this.$scope.secondaryValues[s-1].value,s,i);this.$scope.secondaryValues[s-1].style={color:r.color,fontSize:"".concat(10*Math.min(o/2,a.fontSizes.scaledFontSize),"%")};a=this.$scope.baseLayoutInfo.components[1].components[1].components[s-1].components[1];this.$scope.secondaryValues[s-1].titleStyle={fontSize:"".concat(10*Math.min(o/2,a.fontSizes.scaledFontSize),"%")};this.$scope.secondaryValues[s-1].cssClass=le["a"].getIconClass(r.icon);this.$scope.secondaryValues[s-1].showGlyph=r.useCondColor&&r.icon&&""!==r.icon}this.$scope.updateVerifyDialogFontSize();var l=Object(v["a"])();var u=c["default"].getService("$timeout");u((function(){l.resolve()}),0,false);return l.promise},createSecondaryValue:function t(e,i){var n=a.a.extend({},this.$scope.secondaryLayoutInfo);n.components[0].getText=e;n.components[1].getText=i;return{layoutInfo:n,text:e()}},paint:function t(){return this.updateStyles()},resize:function t(e,i){return this.paint(e,i)},getFormatterForMeasures:function t(e){var i=this._data;var n;var a=new Ot["a"](this.backendApi.localeInfo,i.qHyperCube.qMeasureInfo);var r;var o=[];for(var s=0;s<e;s++){n=i.qHyperCube.qMeasureInfo[s];r=a.getMeasureFormatter(s);if(r&&"U"===r.type){r.pattern=r.createPatternFromRange(n.qMax,n.qMax,true);if(Math.floor(Math.log(Math.abs(n.qMax))/Math.log(10))%3===2){r.pattern=r.pattern.substr(0,r.pattern.length-2);r.pattern+="A"}r.prepare()}o.push(r)}return o},on:function t(){this.options.navigation&&(this._navigation=true);this._super();this.updateStyles()},off:function t(){this.options.navigation&&(this._navigation=false);this._super();this.updateStyles()},getBoundingBox:function t(){var e=this.backendApi.isSnapshot&&this._data&&!this.options.freeResize;if(e&&this._data.snapshotData.elementRatio)return{width:this._data.snapshotData.object.size.w,height:this._data.snapshotData.object.size.w*this._data.snapshotData.elementRatio};return{width:this._$element.width(),height:this._$element.height()}},setSnapshotData:function t(e){this._super();e.snapshotData.isZoomed=this.options.isZoomed;e.snapshotData.elementRatio=this._$element.height()/this._$element.width()},getPreferredSize:function t(){var e=Object(v["a"])();e.resolve({w:this._$element.width(),h:Zt.FixedMobileHeight});return e.promise}});var fe={type:"kpi",BackendApi:Mt["a"],template:St,View:pe,definition:Pt,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:500,qHeight:10}],qSuppressMissing:true},showTitles:false},data:{measures:{min:1,max:2,description:function t(e,i){var n=0===i?"Visualizations.Descriptions.KPI.FirstMeasure":"Visualizations.Descriptions.KPI.SecondMeasure";return p["default"].get(n)}}},support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:false},getDropFieldOptions:function t(e,i,n,a,r){e.AddFieldAsMeasure(n,i,r);a()},getDropDimensionOptions:function t(e,i,n,a){a()},importProperties:function t(e,i,n){var a=ee["default"].hypercube.importProperties.apply(ee["default"],[e,i,n]);var r=a.qProperty.qHyperCubeDef.qMeasures;var o;var s;var l;if(r)for(s=0,o=r.length;s<o;s++){l=r[s].qDef;l.conditionalColoring||(l.conditionalColoring={useConditionalColoring:false,singleColor:3,segments:{limits:[],colors:[{color:2}],paletteColors:[{index:6}]}})}return a},exportProperties:ee["default"].hypercube.exportProperties.bind(ee["default"])};var he={dimensions:{description:function t(e,i){var n;var a=e.qHyperCubeDef.qDimensions.length;n=a>1&&0===i?"area"===e.lineType&&true===e.stackedArea?"Visualizations.Descriptions.Stack":"Visualizations.Descriptions.Group":"area"===e.lineType?"Visualizations.Descriptions.Area":"Visualizations.Descriptions.Line";return p["default"].get(n)}},measures:{description:function t(){return p["default"].get("Visualizations.Descriptions.HeightLine")}}};var ve={dimensions:{description:function t(){return p["default"].get("Visualizations.Descriptions.Slice")}},measures:{description:function t(e,i){var n;n=0===i?"Visualizations.Descriptions.Angle":i>=e.qHyperCubeDef.qMeasures.length?"Visualizations.Descriptions.Color":"Visualizations.Descriptions.Radius";return p["default"].get(n)}}};var ge=i("Y2ww");var me=i("Pd1s");var be=i("1GDf");var ye=i("YK9/");var xe=i("KM4/");var _e=i("kaG6");var Ce={};De();var we={getDimensionDescription:Me,getMeasureDescription:Se};var qe=we;function Me(t,e,i,n){return Ie("Dimension",t,e,i,n)}function Se(t,e,i,n){return Ie("Measure",t,e,i,n)}function De(){Ce.barchart={getDimensionDescription:gt.dimensions.description,getMeasureDescription:gt.measures.description};Ce.boxplot={getDimensionDescription:mt["a"].dimensions.description,getMeasureDescription:mt["a"].measures.description};Ce.combochart={getDimensionDescription:bt["a"].dimensions.description,getMeasureDescription:bt["a"].measures.description};Ce.distributionplot={getDimensionDescription:yt["a"].dimensions.description,getMeasureDescription:yt["a"].measures.description};Ce.filterpane={getDimensionDescription:xt["default"].data.dimensions.description};Ce.gauge={getMeasureDescription:_t["default"].data.measures.description};Ce.histogram={getDimensionDescription:Ct["a"].dimensions.description};Ce.kpi={getMeasureDescription:fe.data.measures.description};Ce.linechart={getDimensionDescription:he.dimensions.description,getMeasureDescription:he.measures.description};Ce.piechart={getDimensionDescription:ve.dimensions.description,getMeasureDescription:ve.measures.description};Ce.pivotTable={getDimensionDescription:ge["default"].data.dimensions.description,getMeasureDescription:ge["default"].data.measures.description};Ce.scatterplot={getDimensionDescription:me["a"].dimensions.description,getMeasureDescription:me["a"].measures.description};Ce.table={getDimensionDescription:be["default"].data.dimensions.description,getMeasureDescription:be["default"].data.measures.description};Ce.textImage={getMeasureDescription:ye["default"].data.measures.description};Ce.treemap={getDimensionDescription:xe["a"].dimensions.description,getMeasureDescription:xe["a"].measures.description};Ce.waterfall={getMeasureDescription:_e["a"].measures.description}}function Ie(t,e,i,n,a){var r=Ce[e];var o="get".concat(t,"Description");var s=r&&r[o];if("function"!==typeof s)return;return s(i,n,a)}var ke={visualization:"",indexes:{dimensions:{},measures:{}}};var Le={updateIndexes:Ee,getDimensionIndex:Ae,getMeasureIndex:Pe};var Te=Le;function Ee(t){if(!t)return;var e=t.qHyperCubeDef;var i=t.qUndoExclude.generated;if(!e||!i)return;Oe();var n=i.qHyperCubeDef||i.boxplotDef&&i.boxplotDef.qHyperCubeDef;if(!n)return;ke.visualization=i.visualization;var a=Re(e);Ne(a,e,n);var r=Ve(e);ze(r,e,n)}function Ae(t,e){if(e!==ke.visualization)return t;return ke.indexes.dimensions[t]}function Pe(t,e){if(e!==ke.visualization)return t;return ke.indexes.measures[t]}function Oe(){ke.indexes.dimensions={};ke.indexes.measures={}}function Re(t){var e={};t.qDimensions.forEach((function(t){var i=Fe(t);e[i]||(e[i]=[]);e[i].push(t)}));return e}function Ve(t){var e={};t.qMeasures.forEach((function(t){var i=je(t);e[i]||(e[i]=[]);e[i].push(t)}));return e}function Ne(t,e,i){Object.keys(t).forEach((function(n){var a=t[n];a.forEach((function(t,n){var a=He(t,i);var r=e.qDimensions.indexOf(t);var o=i.qDimensions.indexOf(a)+n;var s=-1!==o;if(!s){var l=Ge(t,i);var c=e.qDimensions.length-1;o=l?c:r}ke.indexes.dimensions[r]=o}))}))}function ze(t,e,i){Object.keys(t).forEach((function(n){var a=t[n];a.forEach((function(t,n){var a=$e(t,i);var r=e.qMeasures.indexOf(t);var o=i.qMeasures.indexOf(a)+n;var s=-1!==o;if(!s){var l=Ue(t,i);var c=e.qMeasures.length-1;o=l?c:r}ke.indexes.measures[r]=o}))}))}function Fe(t){var e=t.qLibraryId?t.qLibraryId:t.qDef.qFieldDefs[0];return e}function je(t){var e=t.qLibraryId?t.qLibraryId:t.qDef.qDef;return e}function He(t,e){return e.qDimensions.filter((function(e){return Be(t,e)})).shift()}function $e(t,e){return e.qMeasures.filter((function(e){return We(t,e)})).shift()}function Be(t,e){if(t.qLibraryId)return t.qLibraryId===e.qLibraryId;return t.qDef.qFieldDefs[0]===e.qDef.qFieldDefs[0]}function We(t,e){if(t.qLibraryId)return t.qLibraryId===e.qLibraryId;return t.qDef.qDef===e.qDef.qDef}function Ge(t,e){return e.qDimensions.some((function(e){var i=e.qAttributeDimensions;if(!i.length)return false;var n=i[0];if(t.qLibraryId)return t.qLibraryId===n.qLibraryId;var a=w["a"].normalizeExpression(t.qDef.qFieldDefs[0]);var r=w["a"].normalizeExpression(n.qDef);return a===r}))}function Ue(t,e){return e.qDimensions.some((function(e){var i=e.qAttributeExpressions;if(!i.length)return false;var n=i[0];if(t.qLibraryId)return t.qLibraryId===n.qLibraryId;var a=w["a"].normalizeExpression(t.qDef.qDef);var r=w["a"].normalizeExpression(n.qExpression);return a===r}))}var Ye=i("zr60");var Je=i("bmRg");var Ke=i("U7Ny");var Ze=i("0m+j");var Qe='<div class="pp-drop-zone {{$ctrl.cssClass}}">\n\t<div class="pp-drop-zone__content">\n\t\t<i class="pp-drop-zone__icon lui-icon lui-icon--drop"></i>\n\t\t<span class="pp-drop-zone__text">{{$ctrl.text}}</span>\n\t</div>\n</div>';var Xe="hover";var ti=".drag-and-drop-canvas";var ei={DRAG_BEGIN:"/pp-drop-zone/drag-begin",DRAG_END:"/pp-drop-zone/drag-end"};c["default"].nativeComponent("ppDropZone",{template:Qe,replace:true,bindings:{onDragBegin:"&",onDrop:"&",cssClass:"@",sizeSelector:"@",translation:"@"},controller:["$scope","$element","$document",function(t,e,i){var n=this;var a;var r=e.children().first();n.$onInit=function(){n.text=p["default"].get(n.translation);ft["a"].subscribe(ei.DRAG_BEGIN,o);ft["a"].subscribe(ei.DRAG_END,c);c();a={accept:{libraryitem:function t(e){return"field"===e.item.type||"measure"===e.item.type||"dimension"===e.item.type},inline:function t(){return true}},start:function t(e){if(!s(e.info))return;h(e.info)&&v();l();var i={targetRect:function t(){return r[0].getBoundingClientRect()},drop:function t(e){n.onDrop({info:e})},enter:function t(){d()},leave:function t(){f()}};e.registerDropRect(i)},end:function t(){c();f()}};Ze["a"].registerDropTarget(a)};t.$on("$destroy",(function(){ft["a"].unsubscribe(ei.DRAG_BEGIN,o);ft["a"].unsubscribe(ei.DRAG_END,c);Ze["a"].unregisterDropTarget(a)}));function o(t){if(!s(t))return;l()}function s(t){return n.onDragBegin({info:t})}function l(){u();r.show()}function c(){r.hide()}function u(){if(!n.sizeSelector)return;var t=r.closest(n.sizeSelector);if(!t.length)return;var e=t.position();var i=e.top;var a=t.height();var o=t.width();r.css({top:i,height:a,width:o})}function d(){r.addClass(Xe)}function f(){r.removeClass(Xe)}function h(t){return"inline"===t.type}function v(){var t=i.find(ti);t.length&&t.hide()}}]});var ii=i("GG1N");var ni=i("+Yuz");var ai={Dimensions:1,AlternativeDimensions:3,Measures:5,AlternativeMeasures:12};var ri="CLIPBOARD_MEASURE_ITEM";var oi={dimensions:function t(e){var i=e.args.ext&&e.args.ext.data;var n=e.args.handler.dimensionDefinition;var a=void 0===n.show||("function"===typeof n.show?n.show():n.show);var r=void 0!==n.max&&("function"===typeof n.max?0===n.max():0===n.max);var o=!i||!i.dimensions||!i.dimensions.isDefined||i.dimensions.isDefined();return a&&(!i||!!i.dimensions)&&o&&!r},altDimensions:function t(e,i){var n=oi.dimensions(e);var a=e.args.ext&&e.args.ext.data;var r=!!a&&!!e.args.ext.data.dimensions;var o=!!e.definition.items.dimensions.disabledRef;return n&&o&&(i.items.length&&r||(!a||!!a.dimensions)&&e.args.handler.getDimensions().length>=e.args.handler.minDimensions())},measures:function t(e){var i=e.args.ext&&e.args.ext.data;var n=e.args.handler.measureDefinition;var a=void 0===n.show||("function"===typeof n.show?n.show():n.show);var r=void 0!==n.max&&("function"===typeof n.max?0===n.max():0===n.max);var o=!i||!i.measures||!i.measures.isDefined||i.measures.isDefined();return a&&(!i||!!i.measures)&&o&&!r},altMeasures:function t(e,i){var n=oi.measures(e);var a=e.args.ext&&e.args.ext.data;var r=!!a&&!!e.args.ext.data.measures;var o=!!e.definition.items.measures.disabledRef;return n&&o&&(i.items.length&&r||(!a||!!a.measures)&&e.args.handler.getMeasures().length>=e.args.handler.minMeasures())}};var si="pp-data-item.ng.html";var li={template:B,controller:["$scope","$element","$timeout","luiPopover","$document",function(t,e,i,n,r){var s=t.args.cache;var v="data_";var g;var m;var y;var x;var _={addFieldDimension:R,addLibraryDimension:V,addExpressionMeasure:z,addLibraryMeasure:N};var C=G["a"].create();var q=U["a"].create();var D=dt["a"].create(t,n);var I=F.create(t,n,_);t.isAutoChart="auto-chart"===t.data.visualization;t.allowSaveLibrary=Ye["a"].allowSaveLibrary;t.isAutoChart&&Te.updateIndexes(t.args.properties);t.expandClicked=function(t,e){if(t.target.classList.contains("pp-nm-di__draggable")||e.nonclickable)return;e.expanded=!e.expanded;s.put(v+e.id,e.expanded)};t.duplicateItem=function(e){if("dimension"===e.type){var i=d["a"].extend(true,{},e.data);delete i.qDef.cId;t.args.handler.addDimension(i,false).then((function(){X();t.$emit("saveProperties")}))}else{var n=d["a"].extend(true,{},e.data);delete n.qDef.cId;t.args.handler.addMeasure(n,false).then((function(){X();t.$emit("saveProperties")}))}};t.removeItem=function(e){var i=e.__sortableItem__.typeFlag===ai.AlternativeDimensions||e.__sortableItem__.typeFlag===ai.AlternativeMeasures;"dimension"===e.type?t.args.handler.removeDimension(e.index,i).then((function(){t.$emit("saveProperties")})):t.args.handler.removeMeasure(e.index,i).then((function(){t.$emit("saveProperties")}))};t.saveLibraryItem=function(e){var i=e.data.qDef;var n;var a=false;if("measure"===e.type){n=function i(n){Ye["a"].setNewProperties(t.args.properties,e,n.id,"qMeasures");t.$emit("saveProperties")};Ye["a"].saveMeasureAsLibrary(i,n)}else{n=function i(n){if(!a){Ye["a"].setNewProperties(t.args.properties,e,n.id,"qDimensions");t.$emit("saveProperties");a=true}};Ye["a"].saveDimensionAsLibrary(i,n)}};t.getAddLabel=function(){var e=t.args.ext&&t.args.ext.data;var i=t.definition.items;if(0===i.dimensions.disabledRef.length&&0===i.measures.disabledRef.length){if(e&&!e.measures)return p["default"].get("Visualization.Requirements.AddDimension");if(e&&!e.dimensions)return p["default"].get("Visualization.Requirements.AddMeasure")}return p["default"].get("properties.add")};t.hasMultipleAddOptions=function(){var e=t.args.ext&&t.args.ext.data;return e&&e.measures&&e.dimensions};var k=null;var L=null;var T=null;function E(t){if(k){k.destroy();k=null}t&&t.target.classList.contains("pp-toplist-add-button")&&o.a.preventGestures()}t.openGlobalContextMenu=function(e){var i=c["default"].getService("qvContextMenu").menu();var n=Je["a"].get(ri);if(Object(S["b"])("COPY_PASTE_MEASURE")){var a=t;if(null!==n){var r=t.args.properties.qInfo.qType;switch(r){case"gauge":case"kpi":case"text-image":case"waterfallchart":"measure"===n.type&&t.args.handler.canAddMeasure()&&i.addItem({translation:"Common.Paste",tid:"paste",select:function t(){ni["a"].pasteItem(X,a)}});break;case"histogram":if("dimension"===n.type&&t.args.handler.canAddDimension()){var o=n.layout.qTags.includes("$numeric");o&&i.addItem({translation:"Common.Paste",tid:"paste",select:function t(){ni["a"].pasteItem(X,a)}})}break;default:("dimension"===n.type&&t.args.handler.canAddDimension()||"measure"===n.type&&t.args.handler.canAddMeasure())&&i.addItem({translation:"Common.Paste",tid:"paste",select:function t(){ni["a"].pasteItem(X,a)}})}}}T=c["default"].getService("qvContextMenu").show(i,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};t.openContextMenu=function(e,i){e.stopPropagation();var n=t.args.properties.qInfo.qType;var a=c["default"].getService("qvContextMenu").menu();var r=t;Object(S["b"])("COPY_PASTE_MEASURE")&&"filterpane"!==n&&a.addItem({translation:"Common.Copy",tid:"copy",select:function t(){ni["a"].copyItem(i,r)}});Object(S["b"])("DUPLICATE")&&(i.isAlternative||("dimension"!==i.type||g.addDisabled())&&("measure"!==i.type||y.addDisabled())||a.addItem({translation:"Common.Duplicate",tid:"duplicate",select:function e(){t.duplicateItem(i)}}));a.addItem({translation:"Common.Delete",tid:"delete",select:function e(){t.removeItem(i)}});T=c["default"].getService("qvContextMenu").show(a,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};function A(){t.sortableItemLists.ctrl&&t.sortableItemLists.ctrl.on();t.sortableItemLists.reset();C.resetTitles();q.resetTitles();t.isAutoChart&&Te.updateIndexes(t.args.properties);P();O()}function P(){var e=t.definition.items.dimensions;var i=H["a"].getValue(t.data,e.ref,[]);i.forEach((function(i,n){var a=i.qDef.cId;var r=t.args.handler.getDimensionLayout(a);var o=C.getCachedDimensionTitle(r);C.getDimensionTitle(r,i,true,t.args.app).then((function(t){o=t}));var l={title:function t(){return o},isInvalid:function e(){var i=t.args.handler.getDimensionLayout(a);return i&&!!i.qError&&!W["a"].isCalcCondNotCalculatedErr(i.qError)},component:u["a"].getComponent("items"),definition:{type:"items",items:e.items},data:i,args:t.args,id:a,index:n,type:"dimension",expanded:s.get(v+a)||false,sortable:false!==e.allowMove,templateSrc:si,markerClass:"pp-dimension"};g.addSortableItem(l,ai.Dimensions)}));if(t.isAutoChart&&i.length>1){var n=t.args.properties.qUndoExclude.generated.visualization;var a=g.items;a.sort((function(t,e){var i=Te.getDimensionIndex(t.index,n);var a=Te.getDimensionIndex(e.index,n);return i<a?-1:1}))}var r=H["a"].getValue(t.data,e.disabledRef,[]);r.forEach((function(i,n){var a=i.qDef.cId;var r=q.getCachedDimensionTitle(i);q.getDimensionTitle(i,t.args.app,true).then((function(t){r=t}));var o={title:function t(){return r},component:u["a"].getComponent("items"),definition:{type:"items",items:e.items},data:i,args:t.args,id:a,index:n,type:"dimension",expanded:s.get(v+a)||false,templateSrc:si,markerClass:"pp-dimension",sortable:false!==e.allowMove,isAlternative:true};m.addSortableItem(o,ai.AlternativeDimensions);Object(ii["b"])(t.definition.items.dimensions,t.data,t.args)?m.items.forEach((function(t){t.expanded=false;t.nonclickable=true;s.put(v+t.id,false)})):m.items.forEach((function(t){t.nonclickable=false}))}))}function O(){var e=t.definition.items.measures;var i=H["a"].getValue(t.data,e.ref,[]);i.forEach((function(i,n){var a=i.qDef.cId;var r=t.args.handler.getMeasureLayout(a);var o=C.getCachedMeasureTitle(r);var c=D.isChangeable(i);C.getMeasureTitle(r,i,true,t.args.app).then((function(t){o=t}));var d={title:function t(){return o},isInvalid:function e(){var i=t.args.handler.getMeasureLayout(a);return i&&!!i.qError},component:u["a"].getComponent("items"),definition:{type:"items",items:e.items},data:i,args:t.args,id:a,index:n,type:"measure",expanded:s.get(v+a)||false,sortable:false!==e.allowMove,templateSrc:si,markerClass:"pp-measure"};l.a.measureBase.getLibraryId(i)||K["a"].extract(l.a.measureBase.getExpression(i)).then((function(t){d.isValidExtraction=t.isValid;d.extractedField=t.field}));if(c){d.canChangeMeasureAggregation=true;d.currentAggregation=D.getAggregation(l.a.measureBase.getExpression(i));d.remainder=D.getRemainder(l.a.measureBase.getExpression(i))}y.addSortableItem(d,ai.Measures)}));if(t.isAutoChart&&i.length>1){var n=t.args.properties.qUndoExclude.generated.visualization;var a=y.items;a.sort((function(t,e){var i=Te.getMeasureIndex(t.index,n);var a=Te.getMeasureIndex(e.index,n);return i<a?-1:1}))}var r=H["a"].getValue(t.data,e.disabledRef,[]);r.forEach((function(i,n){var a=i.qDef.cId;var r=q.getCachedMeasureTitle(i);q.getMeasureTitle(i,t.args.app,true).then((function(t){r=t}));var o={title:function t(){return r},component:u["a"].getComponent("items"),definition:{type:"items",items:e.items},data:i,args:t.args,id:a,index:n,type:"measure",expanded:s.get(v+a)||false,sortable:false!==e.allowMove,templateSrc:si,markerClass:"pp-measure",isAlternative:true};x.addSortableItem(o,ai.AlternativeMeasures)}))}t.openAddMore=function(t){I.open(t,(function(t){return t.classList.contains("lui-button")}))};t.isAddingData=function(){return I.isAddingData()};function R(e){return t.args.handler.addFieldDimension(e.value,e.trimmedValue).then((function(){t.$emit("saveProperties");et();it("dimensions")}))}function V(e){return t.args.handler.addLibraryDimension(e.libraryId).then((function(){t.$emit("saveProperties");et();it("dimensions")}))}function N(e){return t.args.handler.addLibraryMeasure(e.libraryId).then((function(){t.$emit("saveProperties");et();it("measures")}))}function z(e){return t.args.handler.addExpressionMeasure(e.value,e.trimmedValue).then((function(){t.$emit("saveProperties");et();it("measures")}))}function j(e){return t.args.handler.addAlternativeFieldDimension(e.value,e.trimmedValue).then((function(){t.$emit("saveProperties");et();it("alternative-dimensions")}))}function B(e){return t.args.handler.addAlternativeLibraryDimension(e.libraryId).then((function(){t.$emit("saveProperties");et();it("alternative-dimensions")}))}function Z(e){return t.args.handler.addAlternativeLibraryMeasure(e.libraryId).then((function(){t.$emit("saveProperties");et();it("alternative-measures")}))}function Q(e){return t.args.handler.addAlternativeExpressionMeasure(e.value,e.trimmedValue).then((function(){t.$emit("saveProperties");et();it("alternative-measures")}))}function X(){g.items.forEach((function(t){t.expanded=false;s.put(v+t.id,false)}));y.items.forEach((function(t){t.expanded=false;s.put(v+t.id,false)}));m.items.forEach((function(t){t.expanded=false;s.put(v+t.id,false)}));x.items.forEach((function(t){t.expanded=false;s.put(v+t.id,false)}))}function tt(e,i,a){E();X();if(t.adding){et();return}var r={input:{app:t.args.app,closeAddPopover:et},alignTo:i,closeOnEscape:true,dock:"bottom"};var o;var s;if("dimensions"===e){o=t.args.ext.addDimensionPopoverComponent||f["a"];r.input.addFieldDimension=R;r.input.addLibraryDimension=V}else if("measures"===e){o=h["a"];r.input.addLibraryMeasure=N;r.input.addExpressionMeasure=z}else if("alternative-dimensions"===e){o=t.args.ext.addDimensionPopoverComponent||f["a"];r.input.addFieldDimension=j;r.input.addLibraryDimension=B}else if("alternative-measures"===e){o=h["a"];r.input.addLibraryMeasure=Z;r.input.addExpressionMeasure=Q}r.template=o.template;r.controller=o.controller;L=n.show(r);L.closing.then((function(e){s=e;e&&!(e.target.classList.contains("lui-button")||e.target.classList.contains("pp-list-add-button"))&&(t.adding=false);a.adding=false}));L.closed.then((function(){L=null;s||(t.adding=false)}));t.adding=true;a.adding=true}function et(e){if(L){L.close();L=null}e&&e.target.classList.contains("pp-toplist-add-button");t.adding=false}function it(t){i((function(){var i=e.find(".pp-nm-hcd__lists");var n=e.find("[tid='".concat(t,"'] .pp-nm-hcd__list-items"));var a=n.children().last();a[0]&&(i[0].scrollTop=a[0].offsetTop-1)}),100)}function nt(t){return t.data&&t.data.qLibraryId&&t.data.qLibraryId.length>0}t.$on("pp-open-path",(function(t,e){var i=e.split(".");var n=i[0];var a=i[1];if("data"===n&&a){var r=g.get().some((function(t){return t.cId===a}));it(r?"dimensions":"measures")}}));t.sortableItemLists=$["a"].create({options:{direction:"vertical",listKey:"list",scrollSelector:t.isAutoChart?".property-content":".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",isOuterScroll:t.isAutoChart,suppressDragStyle:t.isAutoChart?["width"]:[],suppressEnd:t.isAutoChart?function(t){var e=a()(r[0].elementFromPoint(t.clientX,t.clientY));if(!e.length)return false;return e.hasClass("pp-drop-zone")||!!e.parents(".pp-drop-zone").length}:function(){return false},gesture:{name:"swipe",options:{radiusThreshold:b["a"].treatAsDesktop()?4:0,preventDefault:false}},zIndex:11,preventClickDefault:false},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function e(i){this._super.apply(this,arguments);i.isDragged=true;t.isDragging=true;ft["a"].publish("/pp-drop-zone/drag-begin",{type:"inline",item:i});X();var n=1;if("dimension"===i.type){nt(i)||ct.isInvalid(i)?y.setLocked(true):y.setLocked(y.listFull(n));t.isAutoChart&&g.setLocked(true)}else if("measure"===i.type){m.setLocked(true);nt(i)||!i.isValidExtraction?g.setLocked(true):g.setLocked(g.listFull(n));t.isAutoChart&&y.setLocked(true)}switch(i.__sortableItem__.typeFlag){case ai.AlternativeDimensions:g.setLocked(g.listFull());y.setLocked(true);break;case ai.AlternativeMeasures:y.setLocked(y.listFull());g.setLocked(true);break;default:break}},onEnd:function e(i){t.isDragging=false;i&&(i.isDragged=false);g.setLocked(false);y.setLocked(false);m.setLocked(false);t.$apply()},onCancel:function e(i){this._super.apply(this,arguments);t.isDragging=false;i&&(i.isDragged=false);ft["a"].publish("/pp-drop-zone/drag-end");this.lists.forEach((function(t){t.setLocked(false)}))},moveHcItem:function e(i,n,a,r,o,s,l){var c;var u;var d;var p;var f=t.data;var h=function e(){t.$emit("saveProperties")};t.args.handler.setProperties(f);t.sortableItemLists.ctrl.off();if(i!==n)switch(i.typeFlag){case ai.Dimensions:n.typeFlag===ai.Measures?t.args.handler.removeMeasure(a.index,false).then((function(){return t.args.handler.reinsertDimension(l,false,r)})).then(h):t.args.handler.removeDimension(a.index,true).then((function(){return t.args.handler.reinsertDimension(a.data,false,r)})).then(h);break;case ai.AlternativeDimensions:t.args.handler.removeDimension(a.index,false).then((function(){return t.args.handler.reinsertDimension(a.data,true,r)})).then(h);break;case ai.Measures:n.typeFlag===ai.Dimensions?t.args.handler.removeDimension(a.index,false).then((function(){return t.args.handler.reinsertMeasure(l,false,r)})).then(h):t.args.handler.removeMeasure(a.index,true).then((function(){return t.args.handler.reinsertMeasure(a.data,false,r)})).then(h);break;case ai.AlternativeMeasures:t.args.handler.removeMeasure(a.index,false).then((function(){return t.args.handler.reinsertMeasure(a.data,true,r)})).then(h);break;default:break}else{o.apply(this,s);if(a.index===i.items.indexOf(a)){t.sortableItemLists.ctrl.on();return}c=[];u=[];d=[];p=[];g.get().forEach((function(t){"placeholder"!==t.id&&c.push(t.data)}));y.get().forEach((function(t){"placeholder"!==t.id&&u.push(t.data)}));m.get().forEach((function(t){"placeholder"!==t.id&&d.push(t.data)}));x.get().forEach((function(t){"placeholder"!==t.id&&p.push(t.data)}));H["a"].setValue(f,t.definition.items.dimensions.ref,c);H["a"].setValue(f,t.definition.items.dimensions.disabledRef,d);H["a"].setValue(f,t.definition.items.measures.ref,u);H["a"].setValue(f,t.definition.items.measures.disabledRef,p);n.typeFlag===ai.Dimensions&&i.typeFlag===ai.Dimensions&&"function"===typeof t.args.handler.dimensionDefinition.move&&t.args.handler.dimensionDefinition.move.call(t.args.handler,a.data,t.args.handler.properties,t.args.handler);n.typeFlag===ai.Measures&&i.typeFlag===ai.Measures&&"function"===typeof t.args.handler.measureDefinition.move&&t.args.handler.measureDefinition.move.call(t.args.handler,a.data,t.args.handler.properties,t.args.handler);h()}},onMoveToList:function e(i,n){var a=this.getList(i);var r=!t.isAutoChart;var o=r?n.length-1:n.length;var s=1;if(void 0===a||void 0===n||n.disabled||n.listFull(s)&&n!==a){this.removePlaceholder();this.enable();return false}if(ct.isMovingDimToMea(i,n)){var l=this;Y["a"].convert(i,i.args.handler).then((function(t){l.moveHcItem(n,a,i,o,l._super,arguments,t)}))}else if(ct.isMovingMeaToDim(i,n)){var c=J["a"].convert(i,i.args.handler);this.moveHcItem(n,a,i,o,this._super,arguments,c)}else this.moveHcItem(n,a,i,o,this._super,arguments);return true},onMove:function t(e){if(-1===this.getIndexOfItem(e)){this.onCancel();return false}var i=this.getPlaceholder();var n=this.getList(i);var a=this.getList(e);var r=1;if(void 0===n||n!==a&&n.listFull(r)){this.removePlaceholder();this.enable();return false}if(ct.isMovingDimToMea(e,n)){var o=this;Y["a"].convert(e,e.args.handler).then((function(t){o.moveHcItem(n,a,e,n.items.indexOf(i),o._super,arguments,t)}))}else if(ct.isMovingMeaToDim(e,n)){var s=J["a"].convert(e,e.args.handler);this.moveHcItem(n,a,e,n.items.indexOf(i),this._super,arguments,s)}else this.moveHcItem(n,a,e,n.items.indexOf(i),this._super,arguments);return true}});g=t.sortableItemLists.createList(ai.Dimensions,{title:p["default"].get(t.definition.items.dimensions.translation),tid:"dimensions",getAddLabel:function e(){return t.getAddLabel()},show:function e(){return oi.dimensions(t)},listFull:function e(i){return t.args.handler.getDimensions().length>=t.args.handler.maxDimensions(i)},addClicked:function t(e){g.addDisabled()||tt("dimensions",e.target,this)},addDisabled:function e(){return g.listFull()||!t.definition.allowAdd},getMax:function e(){return t.args.handler.maxDimensions()},getItemDescription:function t(e){return ot("dimension",e)},descriptionCache:{},isReadOnly:function e(){return Object(ii["b"])(t.definition.items.dimensions,t.data,t.args)}});m=t.sortableItemLists.createList(ai.AlternativeDimensions,{title:p["default"].get(t.definition.items.dimensions.alternativeTranslation),tid:"alternative-dimensions",isAlternative:true,getAddLabel:function t(){return p["default"].get("properties.addalternative")},show:function e(){return oi.altDimensions(t,m)},listFull:function t(){return false},subSection:true,addClicked:function t(e){tt("alternative-dimensions",e.target,this)},addDisabled:function t(){return false},isReadOnly:function e(){return Object(ii["b"])(t.definition.items.dimensions,t.data,t.args)}});y=t.sortableItemLists.createList(ai.Measures,{title:p["default"].get("Common.Measures"),tid:"measures",getAddLabel:function e(){return t.getAddLabel()},show:function e(){return oi.measures(t)},listFull:function e(i){return t.args.handler.getMeasures().length>=t.args.handler.maxMeasures(i)},addClicked:function t(e){y.addDisabled()||tt("measures",e.target,this)},addDisabled:function e(){return y.listFull()||!t.definition.allowAdd},getMax:function e(){return t.args.handler.maxMeasures()},getItemDescription:function t(e){return ot("measure",e)},descriptionCache:{}});x=t.sortableItemLists.createList(ai.AlternativeMeasures,{title:p["default"].get("properties.alternative.measures"),tid:"alternative-measures",isAlternative:true,getAddLabel:function t(){return p["default"].get("properties.addalternative")},show:function e(){return oi.altMeasures(t,x)},listFull:function t(){return false},subSection:true,addClicked:function t(e){tt("alternative-measures",e.target,this)},addDisabled:function t(){return false}});var at=t.definition.items;at.dimensions.ref&&t.$watchCollection("data.".concat(at.dimensions.ref),A);at.dimensions.disabledRef&&t.$watchCollection("data.".concat(at.dimensions.disabledRef),A);at.measures.ref&&t.$watchCollection("data.".concat(at.measures.ref),A);at.measures.disabledRef&&t.$watchCollection("data.".concat(at.measures.disabledRef),A);t.isAutoChart&&pt["a"].addDrag(e,b["a"].treatAsDesktop()?".pp-nm-di__header.draggable":".pp-nm-di__draggable",{info:function t(e){return{type:"inline",item:e.item}},elem:"<div></div>"});t.isItemDraggable=function(e){if(!e.sortable)return false;var i="dimension"===e.type;var n=e.isValidExtraction;if(t.isAutoChart){if(nt(e))return false;return!!i||n}var a=y.listFull(0);var r=g.listFull(0);if(e.isAlternative){var o=t.definition.items;var s=i?o.dimensions.disabledRef:o.measures.disabledRef;var l=H["a"].getValue(t.data,s,[]).length;var c=l>1;if(c)return true;return i?!r:!a}var u=i?m.show():x.show();if(u)return true;var d=t.args.handler;var p=i?d.getDimensions().length:d.getMeasures().length;var f=p>1;if(f)return true;var h=i?a:r;if(h)return false;return!!i||n};t.showChangeAggregation=function(t){return"measure"===t.type&&t.canChangeMeasureAggregation&&!t.isDragged};t.getItemHeaderTitle=function(e){if(t.showChangeAggregation(e))return e.remainder;return e.canChangeMeasureAggregation&&e.isDragged&&t.isAutoChart?e.remainder:e.title()};t.openChangeAggregationPopover=function(e,i){if(!t.showChangeAggregation(i))return;var n={isOpenButton:function t(e){return e.classList.contains("pp-nm-di__header-aggregation")},onAggregationChanged:function t(e,i){ht["a"].gather({expression:e.extractedField,aggregation:i})}};D.openPopover(e,i.id,i,n)};t.isChangeAggregationPopoverOpen=function(t){return D.isPopoverOpen(t.id)};t.showItemDescription=function(e){if(!t.isAutoChart&&!H["a"].getValue(e,"args.handler.".concat(e.type,"Definition.description")))return false;var i=t.sortableItemLists.getList(e);if(i.isAlternative||e.isDragged)return false;var n=t.getUndraggedItems(i);var a=n.indexOf(e);if(0===a)return true;var r=i.getItemDescription(a);var o=i.getItemDescription(a-1);var s=r===o;if(!s&&t.isAutoChart&&t.isDragging)return true;return!s};t.showNextPossibleItem=function(e){var i=t.getUndraggedItems(e);var n=e.getMax()-i.length;return n>0};t.showNextPossibleItemDescription=function(e){var i=t.getUndraggedItems(e);var n=i.length;var a=t.getNextPossibleItemDescription(e);if(0===n)return!!a;var r=i[n-1];if(!t.isAutoChart&&!H["a"].getValue(r,"args.handler.".concat(r.type,"Definition.description")))return false;var o=t.getItemDescription(r);return a!==o};t.getNextPossibleItemDescription=function(e){var i=t.getUndraggedItems(e);var n=e.getItemDescription(i.length);return n};t.getItemDescription=function(e){var i=t.sortableItemLists.getList(e);var n=rt(e);if(t.isAutoChart&&t.isDragging)return i.descriptionCache[n];var a=i.getItemDescription(n);i.descriptionCache[n]=a;return a};t.showEmptyItem=function(e){var i=t.getUndraggedItems(e);return!i.length};t.getUndraggedItems=function(t){return t.get((function(t){return!t.isDragged}))};function rt(e){var i=t.sortableItemLists.getList(e);var n=t.getUndraggedItems(i);var a=n.indexOf(e);return a}function ot(e,i){var n="dimension"===e.toLowerCase();var a=t.args.properties;var r;var o={isAutoChart:t.isAutoChart};if(t.isAutoChart){var s=a.qUndoExclude.generated;if(!s)return;var l=s.visualization;var c=n?"getDimensionDescription":"getMeasureDescription";r=qe[c](l,s,i,o)}else{var u=n?"dimensionDefinition":"measureDefinition";var d=t.args.handler[u];d&&d.description&&(r=d.description(a,i,o))}return r}t.showAutoDropZone=function(t){return"libraryitem"===t.type};t.onDropAutoDropZone=function(t){var e=t.item;var i="field"===e.type;if(i){var n=w["a"].isMeasure(t.item.classifications);n?M["a"].getAggregationForFieldItem(e).then((function(t){var i=w["a"].getMeasureExpression(e.name,t);z({value:i})})):R({value:e.name})}else{var a="measure"===e.type?N:V;a({libraryId:e.id})}};t.showTargetedDropZone=function(t,e){return"dimensions"===t?st(e):lt(e)};t.onDropTargetedDropZone=function(e,i){var n=i.item;var a="libraryitem"===i.type;if(a){var r="field"===n.type;if(r)"dimensions"===e?R({value:n.name}):M["a"].getAggregationForFieldItem(n).then((function(t){var e=w["a"].getMeasureExpression(n.name,t);z({value:e})}));else{var o="measure"===n.type?N:V;o({libraryId:n.id})}}else t.sortableItemLists.onMoveToList(n,"dimensions"===e?g:y)};function st(t){var e=t.item;var i="libraryitem"===t.type;return i?"measure"!==e.type:"measure"===e.type&&!nt(e)&&e.isValidExtraction}function lt(t){var e=t.item;var i="libraryitem"===t.type;return i?"dimension"!==e.type:"dimension"===e.type&&!nt(e)&&!e.isInvalid()}t.$on("$destroy",(function(){E();et();D.closePopover();I.close();T&&T.close()}))}]};var ci=e["default"]=li},tnCi:function(t,e,i){"use strict";var n=i("8fQa");function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function s(t,e,i){e&&o(t.prototype,e);i&&o(t,i);return t}var l=null;var c=[];var u=true;var d=Math.PI;var p=Math.cos;var f=function t(){this._onSuccess=[];this._onProgress=[];this._isResolved=false};f.prototype={then:function t(e){this._onSuccess.push(e);this._isResolved&&e.call(null,[].slice.apply(arguments))},progress:function t(e){this._onProgress.push(e)},resolve:function t(){this._isResolved=true;var e;var i=this._onSuccess.length;for(e=0;e<i;e++)this._onSuccess[e].apply(null,[].slice.call(arguments))},notify:function t(){var e;var i=this._onProgress.length;for(e=0;e<i;e++)this._onProgress[e].apply(null,[].slice.call(arguments))},destroy:function t(){this._onSuccess=[];this._onProgress=[]}};var h=function(){function t(e,i,n,o){r(this,t);var s={};var l=true;this._target=e;this._enabled=true;for(var c in i){var u=Array.isArray(e[c])?e[c].slice():e[c];var d=Array.isArray(i[c])?i[c].slice():i[c];s[c]={from:u,to:d}}this._props=s;b.call(this);if("object"===a(n)){this._duration=n.duration||200;this._easing="function"===typeof n.easing?n.easing:t.easing[n.easing||"linear"];l=false!==n.autoStart}else{this._duration=n||200;this._easing="function"===typeof o?o:t.easing[o||"linear"]}this._dfd=new f;this._pos=0;this._isRunning=false;if(!l)return;if(y(this._props)){this._startTime=Date.now();g(this)}else this._step(true)}s(t,[{key:"from",value:function t(e){this._isRunning||m.call(this,e,"from");return this}},{key:"to",value:function t(e){this._isRunning||m.call(this,e,"to");return this}},{key:"start",value:function t(){if(!this._isRunning&&this._enabled&&u){b.call(this);y(this._props)?this._start():this._dfd.resolve()}return this}},{key:"willStart",value:function t(){if(!this._isRunning&&this._enabled&&u){b.call(this);if(y(this._props))return true}return false}},{key:"stop",value:function t(){if(this._isRunning){this._isRunning=false;c.splice(c.indexOf(this),1)}return this}},{key:"end",value:function t(){this._isRunning&&this._step(true);return this}},{key:"then",value:function t(){this._dfd.then.apply(this._dfd,[].slice.call(arguments));return this}},{key:"progress",value:function t(){this._dfd.progress.apply(this._dfd,[].slice.call(arguments));return this}},{key:"isRunning",value:function t(){return this._isRunning}},{key:"on",value:function t(){this._enabled=true}},{key:"off",value:function t(){this._enabled=false}},{key:"destroy",value:function t(){this.stop();this._dfd.destroy()}},{key:"_update",value:function t(){var e;for(e in this._props)this._target[e]=this._props[e].value}},{key:"_step",value:function t(e){var i=Date.now()-this._startTime;var n;if(i>=this._duration||e){this._pos=1;this._isRunning=false;n=c.indexOf(this);n>=0&&c.splice(n,1);x(this._props,this._pos,true);this._update();this._dfd.notify(i,i/this._duration,this._pos);this._dfd.resolve();return}this._pos=this._easing(i/this._duration);x(this._props,this._pos,false);this._update();this._dfd.notify(i,i/this._duration,this._pos)}},{key:"_start",value:function t(){this._startTime=Date.now();g(this);this._step()}}]);return t}();function v(){h.tick()&&(l=n["a"].request(v))}function g(t){c.push(t);t._isRunning=true;null===l&&(l=n["a"].request(v))}function m(t,e){for(var i in t){this._props[i]||(this._props[i]={});this._props[i][e]=Array.isArray(t[i])?t[i].slice():t[i]}}function b(){var t;var e;var i;var n;for(t in this._props){n=this._props[t];e="from"in n?n.from:this._target[t];i=n.to;n.from=e;Array.isArray(e)?function(){var t=e.map((function(t){return t.value}));var a=i.map((function(t){return t.value}));n.fresh=i.filter((function(e){return t.indexOf(e.value)<0}));n.rotten=e.filter((function(t){return a.indexOf(t.value)<0}));n.ripe=i.filter((function(e){return t.indexOf(e.value)>=0}));n.combined=n.rotten.concat(n.ripe).concat(n.fresh);n.isArray=true}():Number.isNaN(+e)||Number.isNaN(+n.to)||(n.change=n.to-e)}}function y(t){var e;for(e in t)if(t[e].isArray){if(t[e].fresh.length||t[e].rotten.length)return true}else if(t[e].change)return true;return false}function x(t,e,i){var n;var a;var r;var o;var s;var l;var c;for(a in t){r=t[a];o=r.to;s=r.from;if(r.isArray){l=r.fresh;c=r.rotten;r.value=i?r.to:r.combined;for(n=0;n<l.length;n++)l[n].opacity=e;for(n=0;n<c.length;n++)c[n].opacity=1-e;if(i){delete r.combined;delete r.fresh;delete r.rotten;delete r.ripe}}else r.value=!i&&"change"in r?s+r.change*e:o;i&&delete t[a].from}}h.off=function(){u=false};h.on=function(){u=true};h.tick=function(){var t;var e;var i=c.slice();var a=i.length;for(t=0;t<a;t++){e=i[t];e._step()}if(!c.length){n["a"].cancel(l);l=null;return false}return true};h.clear=function(){};h.easing={linear:function t(e){return e},easeInOut:function t(e){return.5*(1-p(e*d))}};h.tweens=c;e["a"]=h},tszv:function(t,e,i){"use strict";var n=i("qIEf");var a=i.n(n);var r=i("4nJ1");var o=i("rwJ+");var s=i("mWu2");var l=i("8T2z");var c=i.n(l);var u='<div class="qv-st-container">\n\t<form class="qv-st-form">\n\t\t<textarea class="qv-st-instance">{{data}}</textarea>\n\t</form>\n</div>';var d=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"];var p={1:"XS",2:"S",3:"M",4:"L",5:"XL"};var f={10:"1",13:"2",16:"3",22:"4",32:"5"};var h={1:1,2:2,3:3,4:4,5:5,6:5};var v={1:1,2:2,3:3,4:4,5:5};var g={palette:d,fontSizes:p,fontSizesPx:f,htmlSizeToMarkdownSize:h,markdownSizeToHtmlSize:v};var m=i("Z9ZH");var b=i.n(m);var y='<lui-popover ng-if="options.style === \'popover\'" style="height: 44px;" align-to="alignTo" position="\'top\'" collision="\'collision\'" width="options.width" class="lui-popover qv-texttool-toolbar"\n\t\t\t\t\t  on-close-view="closeToolbar(event)" ondragstart="return false">\n\t<div qv-media-tool-buttons class="qv-texttool-toolbar"></div>\n</lui-popover>\n\n<div ng-if="options.style === \'inline\'" qv-media-tool-buttons class="qv-texttool-toolbar"></div>\n';var x={};function _(){return window.getSelection()}x.createRange=function(t,e,i){var n=document.createRange();e=e||0;i="undefined"===typeof i?t.childNodes.length:i;n.setStart(t,e);n.setEnd(t,i);return n};x.createRangeForElement=function(t){var e=document.createRange();e.selectNode(t);return e};x.addRange=function(t,e){var i=_();e&&i.removeAllRanges();i.addRange(t)};x.getRange=function(t){var e=window.getSelection();t=t||0;if(e.rangeCount>t)return _().getRangeAt(t);return null};x.rangeEquals=function(t,e){if(null===t&&null===e)return true;if(null===t||null===e)return false;return 0===t.compareBoundaryPoints(window.Range.START_TO_START,e)&&0===t.compareBoundaryPoints(window.Range.END_TO_END,e)};var C=x;var w='<lui-popover style="width: 400px" on-close-view="closeFoldout(event)"\n\t\t\t\t\t  class="qv-link-foldout" tid="link-foldout">\n\t<div qva-outside-ignore-for="media-toolbar">\n\t\t<div class="link-header">\n\t\t\t<h1 class="link-header-text" ng-if="linkActive" q-translation="MediaTool.Toolbar.InsertUrlLink.Title"></h1>\n\t\t\t<h1 class="link-header-text" ng-if="!linkActive" q-translation="Common.Bookmarks"></h1>\n\t\t\t<div class="link-submenu" ng-if="inStorytelling()">\n\t\t\t\t<ul>\n\t\t\t\t\t<li class="lui-button" ng-if="!linkActive" qva-activate="toggleLink(true)" q-translation="Common.URL" data-tid="url-link" ></li>\n\t\t\t\t\t<li class="lui-button" ng-if="linkActive" qva-activate="toggleLink(false)" q-translation="Common.Bookmarks" data-tid="bookmark-link" ></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="link-content" ng-if="linkActive">\n\t\t\t<span class="link-label" q-translation="MediaTool.Toolbar.InsertUrlLink.Label"></span>\n\t\t\t<input class="link-input lui-input" maxlength="2000" ng-model="link.url" style="margin-bottom: 10px" qv-enter="onEnter($event)"/>\n\t\t\t<div class="link-remove-container" ng-if="showRemove">\n\t\t\t\t<button class="lui-button" qva-activate="removeLink($event)" q-title-translation="MediaTool.Toolbar.RemoveLink" tid="remove-link-btn">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--bin"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="bookmark-content" ng-if="!linkActive">\n\t\t\t<ul>\n\t\t\t\t<li ng-if="bookmarks.length < 1" class="bookmark-link-row">\n\t\t\t\t\t<span class="bookmark-link-row-content no-bookmarks" q-translation="Bookmarks.NoBookmarks"></span>\n\t\t\t\t</li>\n\t\t\t\t<li class="bookmark-link-row" ng-repeat="bookmark in bookmarks" ng-class="{ active: bookmark.active}">\n\t\t\t\t\t<span class="bookmark-link-row-content" qva-activate="insertBookmark($event, bookmark.qInfo.qId)" data-bookmark-id="{{bookmark.qInfo.qId}}">{{bookmark.qData.title}}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\x3c!--</div>--\x3e\n</lui-popover>\n';var q=i("z4LI");var M=i("FZ1g");var S={template:w,scope:{alignTo:"=",options:"="},controller:["$scope","$timeout","$element",function(t,e,i){t.link=t.options.link;t.link.url&&"#"!==t.link.url||(t.link.url="");t.link.url=decodeURIComponent(t.link.url);var n=t.link.url;t.alignTo=t.options.alignTo;t.linkActive=true;t.closeFoldout=function(e){var i=encodeURI(t.link.url);var a=t.link.$node;t.closed=true;if(i===n){t.options.onCancel(e);return}if(i&&i.length>0&&-1===i.indexOf("javascript:")){0!==i.search("[a-zA-Z0-9]+:")&&(i="http://".concat(i));t.options.onSave(e,i,a,{cmd:"createLink",formatter:"link"})}else t.options.onCancel(e)};t.onEnter=function(e){t.closeFoldout(e)};t.showRemove=!!n;t.removeLink=function(e){t.options.onRemove(e,t.link.$node)};t.inStorytelling=function(){return q["a"].state===q["a"].States.editstory};t.insertBookmark=function(e,i){t.options.onSave(e,i,t.link.$node,{cmd:"createLink",formatter:"bookmark"})};t.toggleLink=function(e){t.linkActive=e;e&&setTimeout((function(){a()(".link-input").focus()}))};t.exposedApi.closing=function(){t.closed||t.closeFoldout()};t.$on("$destroy",(function(){t.closed||t.closeFoldout()}));function r(){if(!t.link.url&&t.link.bookmark){t.toggleLink(false);o()}else t.toggleLink(true)}function o(){M["a"].getList().then((function(e){e.getLayout().then((function(e){t.bookmarks=e;s()}))}))}function s(){t.bookmarks.forEach((function(e){e.qInfo.qId===t.link.bookmark?e.active=true:e.active=false}))}r();t.$watch("linkActive",(function(){t.linkActive&&o()}));e((function(){i.find(".link-input").focus()}))}]};var D=S;var I=i("+Kna");var k='<lui-popover class="qv-toolbar-fontsize-foldout" ng-if="input.foldouts.fontSizes" qva-activate="openFontsizeFoldout" style="min-width: 40px; width: 44px;" qva-outside-ignore-for="media-toolbar">\n\t<lui-popover-body class="lui-nopad" collision="\'flipfit\'">\n\t\t<ul class="lui-list lui-list--inverse qv-media-tool-fontsize">\n\t\t\t<button class="lui-fade-button lui-fade-button--inverse lui-fade-button--large" style="border-bottom: 1px solid rgba(0, 0, 0, 0.3);" ng-repeat="size in input.fontSizes" qva-activate="input.setFontSize($event, size)" ng-class="{\'lui-active\':input.textTool.fontSize == size}">\n\t\t\t\t<span class="lui-list__text lui-list__action" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">{{input.shortFontSize(size)}}</span>\n\t\t\t</button>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n\n\n';var L=i("UV1h");var T='<div>\n\t<div ng-if="textTool.showUsage" class="usage"><span q-translation="MediaTool.YouHaveUsed"></span> <span>{{textTool.usage}}%</span></div>\n\n\t<div class="lui-buttongroup" ng-show="buttons.color">\n\t\t<div id="qv-toolbar-colorpicker" tid="colorpicker" q-title-translation="MediaTool.Toolbar.FontColor">\n\t\t\t<button qv-color-picker-button-new palette="themeService[paletteName]" style="width: 66px;" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" ng-click="onClick($event, \'inverse\')" x-variant="inverse" on-close="closecolorpickerfoldout" ng-model="color" ng-disabled="!haveSelection()" disable-none="true" extended="{{allowCustomColors}}"></button>\n\t\t</div>\n\t</div><div class="lui-buttongroup" ng-show="buttons.fontSize">\n\n\t\t<button id="qv-toolbar-fontsize" style="width: 66px" qva-activate="openFontsizeFoldout()" tid="fontSize" ng-disabled="!haveSelection()"\n\t\t\t\tng-class="{\'lui-active\':foldouts.fontSizes}" q-title-translation="MediaTool.Toolbar.FontSize" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse">\n\t\t\t<span class="lui_button__text">{{shortFontSize(textTool.fontSize)}}</span><span class="lui-button__caret  lui-caret"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttonGroup1">\n\t\t<button ng-class="{\'lui-active\':textTool.states.bold}" style="border-right: 1px solid rgba(0, 0, 0, 0.3);" ng-show="buttons.bold" tid="bold" ng-disabled="!haveSelection()"\n\t\t\t q-title-translation="MediaTool.Toolbar.Bold" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" qva-press="exec($event,\'bold\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--bold"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.italic}" style="border-right: 1px solid rgba(0, 0, 0, 0.3);"  ng-show="buttons.italic" tid="italic" ng-disabled="!haveSelection()"\n\t\t\t q-title-translation="MediaTool.Toolbar.Italic" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" qva-press="exec($event,\'italic\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--italic"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.underline}" ng-show="buttons.underline" tid="underline" ng-disabled="!haveSelection()"\n\t\t\t q-title-translation="MediaTool.Toolbar.Underline" class="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" qva-press="exec($event,\'underline\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--underline"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttonGroup2">\n\t\t<button ng-class="{\'lui-active\':textTool.states.justifyLeft}" ng-show="buttons.justifyLeft" tid="justifyLeft"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="Common.Text.AlignLeft" qva-activate="exec($event,\'justifyLeft\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--align-left"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.justifyCenter}" ng-show="buttons.justifyCenter" tid="justifyCenter"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="Common.Text.AlignCenter" qva-activate="exec($event,\'justifyCenter\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--align-center"></span>\n\t\t</button>\n\t\t<button ng-class="{\'lui-active\':textTool.states.justifyRight}" ng-show="buttons.justifyRight" tid="justifyRight"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="Common.Text.AlignRight" qva-activate="exec($event,\'justifyRight\')">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--align-right"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttons.link">\n\t\t<button id="qv-toolbar-link" qva-activate="openLinkFoldout($event)" style="width: 66px;" tid="link"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" ng-class="{\'lui-active\':foldouts.link}" q-title-translation="{{ textTool.states.link ? \'MediaTool.Toolbar.EditURLLink\' : \'MediaTool.Toolbar.CreateURLLink\' }}"\n\t\t\t\tng-disabled="linkDisabled()">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--link" ng-class="{\'lui-active\':textTool.states.link}"></span><span class="lui-button__caret  lui-caret"></span>\n\t\t</button>\n\t</div><div class="lui-buttongroup" ng-show="buttons.image">\n\t\t<button id="qv-toolbar-image" qva-activate="openMediaLibrary($event)" ng-class="{\'lui-active\':foldouts.mediaLibrary}" tid="image"\n\t\t\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse no-border-radius" q-title-translation="MediaTool.Toolbar.InsertImage">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--image"></span>\n\t\t</button>\n\t</div>\n</div>\n';s["default"].directive("qvMediaToolButtons",[function(){return{restrict:"A",replace:true,template:T}}]);function E(t){E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return E(t)}var A=g.palette;var P=g.fontSizes;var O={fontSizes:false,link:false,mediaLibrary:false,colorpicker:false};var R;var V={color:true,fontSize:true,bold:true,italic:true,underline:true,justifyLeft:true,justifyCenter:true,justifyRight:true,link:true,image:true};var N={template:y,scope:{textTool:"=",options:"=",alignTo:"="},controller:["$scope","$timeout","luiPopover",function(t,e,i){t.palette=A;t.fontSizes=Object.keys(P);t.foldouts=O;if("all"===t.options.buttons){t.buttons=V;t.buttonGroup1=true;t.buttonGroup2=true}else if("object"===E(t.options.buttons)){t.buttons=t.options.buttons;t.buttonGroup1=t.buttons.bold||t.buttons.italic||t.buttons.underline;t.buttonGroup2=t.buttons.justifyLeft||t.buttons.justifyCenter||t.buttons.justifyRight}t.exec=function(e,i){e.preventDefault();e.stopPropagation();b.a.preventGestures();0===i.indexOf("justify")?t.textTool.setJustify(i):t.haveSelection()&&t.textTool.setBIU(i)};t.setActiveFoldout=function(e){Object.keys(t.foldouts).forEach((function(i){i===e&&t.foldouts[i]?t.foldouts[i]=false:t.foldouts[i]=i===e}))};t.shortFontSize=function(t){return P[t]||t};t.openMediaLibrary=function(){t.textTool.saveRange();t.setActiveFoldout("mediaLibrary");I["a"].show({onCancel:function e(){t.setActiveFoldout();t.textTool.restoreRange();t.textTool.focus()},onConfirm:function i(n,a){t.setActiveFoldout();e((function(){if(a)t.textTool.insertImage(n,a);else{t.textTool.restoreRange();t.textTool.focus()}}),100)},selectedFile:null})};t.closeColorpickerFoldout=function(e){a()(e.target).closest("#qv-toolbar-colorpicker").length&&b.a.preventGestures();t.setActiveFoldout()};t.openFontsizeFoldout=function(){if(t.foldouts.fontSizes&&R){R.close();R=null;return}R=i.show({template:k,input:{foldouts:t.foldouts,fontSizes:t.fontSizes,textTool:t.textTool,shortFontSize:t.shortFontSize,setFontSize:t.setFontSize,closeFontsizeFoldout:t.closeFontsizeFoldout},alignTo:a()("#qv-toolbar-fontsize")[0],variant:"inverse",closeOnEscape:true,autoFocus:false});t.setActiveFoldout("fontSizes");R.closing.then((function(e){e&&a()(e.target).closest("#qv-toolbar-fontsize").length&&b.a.preventGestures();t.setActiveFoldout()}));R.closed.then((function(){R=null}))};var n=null;t.openLinkFoldout=function(){var r=t.textTool.currentRange;var o;var s={};if(r){o=a()(r.commonAncestorContainer).closest("a");if(o.length){s.url=o.attr("href");s.bookmark=o.attr("data-bookmark-id");s.$node=o}t.textTool.saveRange();n=i.show({template:D.template,controller:D.controller,alignTo:a()("#qv-toolbar-link")[0],input:{options:{toolbarScope:t,link:s,onSave:function i(n,a,r,o){var s;if(r){s=document.createRange();s.setStartBefore(r[0]);s.setEndAfter(r[0]);t.textTool.insertLink(a,s,o)}else e((function(){t.textTool.insertLink(a,null,o)}));t.closeLinkFoldout(n)},onCancel:function e(i){t.closeLinkFoldout(i)},onRemove:function e(i,n){if(n){var a=C.createRangeForElement(n[0]);t.textTool.removeLink(a)}t.closeLinkFoldout(i)}}}});t.setActiveFoldout("link")}};t.setFontSize=function(e,i){e.preventDefault();t.setActiveFoldout();t.textTool.setFontSize(i);if(R){R.close();R=null}};t.closeLinkFoldout=function(e){e&&a()(e.target).closest("#qv-toolbar-link").length&&b.a.preventGestures();t.setActiveFoldout();if(n){n.close();n=null}};t.linkDisabled=function(){var e=t.textTool.currentRange;var i=!!t.textTool.states.link;return!i&&(!e||e.collapsed)};t.haveSelection=function(){var e=t.textTool.currentRange;return!(!e||e.collapsed)};var r={index:-1,color:"#ffffff"};var o={};t.themeService=L["a"];t.paletteName="currentPalette";t.allowCustomColors=true;Object.defineProperty(t,"color",{get:function e(){var i=L["a"].currentPalette;if(!t.haveSelection()){r.index=i.indexOf("#ffffff");return r}o.index=i.indexOf(t.textTool.color);o.color=t.textTool.color;return o},set:function e(i){t.textTool.setColor(L["a"].resolveColor(i))}});t.$on("$destroy",(function(){t.setActiveFoldout();if(n){n.close();n=null}}));e((function(){t.textTool.refreshState()}))}]};var z=N;var F=function t(){this.queue=[]};F.prototype.push=function(t){this.queue.push(t)};F.prototype.execAll=function(t){this.queue.forEach(t)};F.prototype.remove=function(t){var e;var i;var n=false;for(e=this.queue.length-1;e>=0;e--){i=this.queue[e];if(i.cmd===t){n=true;this.queue.splice(e,1)}}return n};F.prototype.clear=function(){this.queue=[]};var j=F;var H=i("ESef");var $=i("k9vo");var B=i("G1wx");var W=i("NFdj");var G=i.n(W);var U=G.a.element("<div contenteditable style='position:absolute;top: -999999px;'>")[0];function Y(t,e){var i=document.activeElement;document.body.appendChild(U);U.innerHTML="Feature detection.";U.focus();C.addRange(C.createRange(U),true);document.execCommand(t,false,e);if(i!==document.body)try{document.activeElement=i}catch(t){}document.body.removeChild(U);return U.innerHTML}var J;false;J=Y("justifyCenter").indexOf(" align=")>-1;var K={usesAlign:J};var Z=i("jaci");var Q=i("zjn0");var X=i("gaHo");X["a"].register({name:"font-color",character:"#",toHTML:{callback:function t(e,i){var n=L["a"].resolveColor(JSON.parse(i));return'<font color="'.concat(n,'">').concat(e,"</font>")}},toMarkdown:{priority:2,regex:/^<font(?: size="([0-7]|undefined)")? color="(#[a-f0-9]{3,6})"(?: size="([0-7]|undefined)")?.*?>([\s\S]+)<\/font>$/,callback:function t(e,i,n,a){if(""===a)return"";var r=e||n;if(null!==r&&void 0!==r){r=g.htmlSizeToMarkdownSize[r];a="%[".concat(a,"](").concat(r,")")}var o=L["a"].currentPalette;var s=o.indexOf(i);if(-1===s){if(i)return"#[".concat(a,']({"index":').concat(s,',"color":"').concat(i,'"})');return a}return"#[".concat(a,']({"index":').concat(s,',"color":"').concat(i,'"})')},tags:[{name:"font",attr:["color"]}]}});var tt=c.a.Formatter.extend({title:"color",cmd:"foreColor",text:"color",onClick:function t(e){document.execCommand(e.cmd,false,e.param)}});X["a"].register({name:"font-size",character:"%",toHTML:{callback:function t(e,i){return"<font size='".concat(g.markdownSizeToHtmlSize[i],"'>").concat(e,"</font>")}},toMarkdown:{regex:/^<font size="([0-7])".*?>([\s\S]+)<\/font>$/,callback:function t(e,i){if(""===i)return"";e>7&&(e=g.fontSizesPx[e]);if(null!==e&&void 0!==e){e=g.htmlSizeToMarkdownSize[e];return"%[".concat(i,"](").concat(e,")")}return i},tags:[{name:"font",attr:["size"]}]}});var et=c.a.Formatter.extend({title:"fontsize",cmd:"fontSize",text:"fontsize"});var it=i("R2Yu");var nt=i("mJsV");var at=K.usesAlign;X["a"].register({name:"justify",character:"^",toHTML:{callback:function t(e,i){var n=Q["a"].supportDirAuto()?"auto":Q["a"].detectTextDirection(e.replace(/<\/?[^>]+(>|$)/g,""));e||(e="&nbsp;");return at?'<div dir="'.concat(n,'" align="').concat(it["a"].encodeForAttr2(i),'">').concat(e,"</div>"):'<div dir="'.concat(n,'" style="text-align: ').concat(it["a"].encodeForAttr2(i),';">').concat(e,"</div>")}},toMarkdown:{regex:/^<(?:div|p).*?(?:style="text(?:\\)?-)?align(?:="|: )(left|center|right|justified|inherit)(?:"|;).*?>([\s\S]+)<\/(?:div|p)>$/,callback:function t(e,i){return"^[".concat(i,"](").concat(e,")")},tags:[{name:"div",attr:["align","style"]},{name:"p",attr:["align"]}]}});var rt=c.a.Formatter.extend({title:"align left",cmd:"justifyLeft",text:"left",isActive:function t(e){var i=e.getParentParagraph();var n=window.getComputedStyle(i);if(/left/.test(n.textAlign))return true;if(n&&"ltr"===n.direction&&!/right/.test(n.textAlign)&&!/center/.test(n.textAlign))return true;return false},onClick:function t(){var e=nt["a"].getParagraph().el.style;var i=e.direction;if("ltr"===i||!i){i="ltr";e.direction="rtl"}document.execCommand("justifyLeft",false);"ltr"===i&&(e.direction="ltr")}});var ot=c.a.Formatter.extend({title:"align center",cmd:"justifyCenter",text:"center",onClick:function t(){document.execCommand("justifyCenter",false)}});var st=c.a.Formatter.extend({title:"align right",cmd:"justifyRight",text:"right",isActive:function t(e){var i=e.getParentParagraph();var n=window.getComputedStyle(i);if(/right/.test(n.textAlign))return true;if(n&&"rtl"===n.direction&&!/left/.test(n.textAlign)&&!/center/.test(n.textAlign))return true;return false},toMarkdown:function t(e){return X["a"].toMarkdown(e)},toHTML:function t(e){return X["a"].toHTML(e)},onClick:function t(){var e=nt["a"].getParagraph().el.style;var i=e.direction;"rtl"===i&&(e.direction="ltr");document.execCommand("justifyRight",false);"rtl"===i&&(e.direction="rtl")}});var lt={Left:rt,Right:st,Center:ot};X["a"].register({name:"bold",character:"**",toHTML:{priority:5,regex:/\*\*(?!\\)([\s\S]+?(?!\*\\))\*\*/g,callback:function t(e){return">b/<".concat(e,">b<")},reverse:true},toMarkdown:{priority:-5,regex:/^<(?:b|strong)>([\s\S]+)<\/(?:b|strong)>$/,callback:function t(e){if(""===e)return"";return"**".concat(e,"**")},tags:[{name:"b",attr:[]},{name:"strong",attr:[]}]}});var ct=c.a.Formatter.extend({title:"bold",cmd:"bold",text:"B",isActive:function t(e){if(e.rangeCollapsed)return e.hasStartAncestorTag(["b","strong"])||e.hasEndAncestorTag(["b","strong"]);return e.hasStartAncestorTag(["b","strong"])&&e.hasEndAncestorTag(["b","strong"])},toMarkdown:function t(e){return e},toHTML:function t(e){return e}});X["a"].register({name:"italic",character:"_",toHTML:{priority:5,regex:/_(?!\\)([\s\S]+?(?!_\\))_/g,callback:function t(e){return">i/<".concat(e,">i<")},reverse:true},toMarkdown:{priority:-5,regex:/^<(?:i|em)>([\s\S]+)<\/(?:i|em)>$/,callback:function t(e){if(""===e)return"";return"_".concat(e,"_")},tags:[{name:"i",attr:[]},{name:"em",attr:[]}]}});var ut=c.a.Formatter.extend({title:"italic",cmd:"italic",text:"I",isActive:function t(e){if(e.rangeCollapsed)return e.hasStartAncestorTag(["i","em"])||e.hasEndAncestorTag(["i","em"]);return e.hasStartAncestorTag(["i","em"])&&e.hasEndAncestorTag(["i","em"])},toMarkdown:function t(e){return e},toHTML:function t(e){return e}});X["a"].register({name:"underline",character:"~",toHTML:{priority:5,regex:/~(?!\\)([\s\S]+?(?!~\\))~/g,callback:function t(e){return">u/<".concat(e,">u<")},reverse:true},toMarkdown:{priority:-5,regex:/^<u>([\s\S]+)<\/u>$/,callback:function t(e){if(""===e)return"";return"~".concat(e,"~")},tags:[{name:"u",attr:[]}]}});var dt=c.a.Formatter.extend({title:"underline",cmd:"underline",text:"U",isActive:function t(e){if(e.rangeCollapsed)return e.hasStartAncestorTag("u")||e.hasEndAncestorTag("u");return e.hasStartAncestorTag("u")&&e.hasEndAncestorTag("u")},toMarkdown:function t(e){return e},toHTML:function t(e){return e}});function pt(t,e){var i=nt["a"].getRange().commonAncestorContainer;var n=a()(i).find("a[href=".concat(e,"]"));"#text"===i.nodeName&&(n="A"!==t.nodeName?a()(t).find("a[href=".concat(e,"]")):a()(t));0===n.length&&(n=a()(i).find("a:not([href])"));0===n.length&&(n=a()(i));return n}X["a"].register({name:"bookmark",character:"$",toHTML:{callback:function t(e,i){return'<a href="#" class="bookmark-link" data-bookmark-id="'.concat(it["a"].encodeForAttr2(i.replace(/\\/g,"")),'">').concat(e,"</a>")}},toMarkdown:{regex:/^<a (?=.*data\\-bookmark\\-id="([^"]+)").*?>([\s\S]+?)<\/a>$/,callback:function t(e,i){return"$[".concat(i,"](").concat(e,")")},tags:[{name:"a",attr:["data\\-bookmark\\-id"]}]}});var ft=c.a.Formatter.extend({title:"bookmark",cmd:"createLink",text:"Bookmark",isActive:function t(e){if(e.rangeCollapsed)return e.hasStartAncestorTag("a")||e.hasEndAncestorTag("a");return e.hasStartAncestorTag("a")&&e.hasEndAncestorTag("a")},onClick:function t(e){var i=e.url;a()(document).on("DOMNodeInserted.bookmark",(function(t){var e=pt(t.target,i);a.a.each(e,(function(t,e){a()(e).hasClass("bookmark-link")||setTimeout((function(){e.setAttribute("href","#");e.removeAttribute("_moz_dirty");e.className+="bookmark-link";e.setAttribute("data-bookmark-id",i)}))}));setTimeout((function(){a()(document).off("DOMNodeInserted.bookmark")}),250)}));document.execCommand("unlink",false,false);document.execCommand(this.cmd,false,i)}});X["a"].register({name:"link",character:"@",toHTML:{callback:function t(e,i){0===i.indexOf("javascript:")&&(i="");0!==i.search("[a-zA-Z0-9]+:")&&(i="http://".concat(i));i=i.replace(/\\(["'])/g,"%5C$1").replace(/'/g,"%27").replace(/"/g,"%22").replace(/\$/g,"%24");i=decodeURI(i).replace(/'/g,"%27");var n="<a href='".concat(i,"' target='\\_blank' title='").concat(i,"'>").concat(e,"</a>");return n}},toMarkdown:{regex:/^<a.*?href="(?!#)([^"]+)".*?>([\s\S]+?)<\/a>$/,callback:function t(e,i){return"@[".concat(i,"](").concat(e,")")},tags:[{name:"a",attr:["href"]}]}});var ht=c.a.Formatter.extend({title:"link",cmd:"createLink",text:"Link",isActive:function t(e){if(e.rangeCollapsed)return e.hasStartAncestorTag("a")||e.hasEndAncestorTag("a");return e.hasStartAncestorTag("a")&&e.hasEndAncestorTag("a")},onClick:function t(e){var i=e.url;document.execCommand(this.cmd,false,i)}});var vt=c.a.Formatter.extend({title:"unlink",cmd:"unlink",text:"Unlink",onClick:function t(e){var i=e.url;document.execCommand(this.cmd,false,i)}});var gt=i("6uJb");var mt=i("UbZW");var bt=i.n(mt);var yt=i("G3JA");var xt=i("ohbW");var _t="M8.52173913,6.7974547 L7.2173913,6.7974547 C6.63768116,8.94989566 6.34782609,10.0261161 6.34782609,10.0261161 C6.34782609,10.0261161 5.47826087,12.5566886 4.69565217,13.4292998 C3.91304348,14.301911 2.86956522,15 1.73913043,15 C0.608695652,15 0,14.4764333 0,13.6038221 C0,12.9057331 0.347826087,12.2949053 1.13043478,12.2949053 C1.82608696,12.2949053 2.08695652,12.6439498 2.08695652,13.0802554 C2.08695652,13.6038221 1.82608696,13.8656054 1.82608696,14.0401277 C1.82608696,14.2146499 1.91304348,14.301911 2,14.301911 C2.26086957,14.301911 2.52173913,13.7783443 2.7826087,12.9057331 C3.04347826,12.0331219 3.02736159,12.1999953 3.56521739,10.3751606 C3.92378792,9.15860415 4.27161401,7.93694847 4.60869565,6.71019358 C3.97231956,6.71019358 3.57818933,6.71019358 3.42630497,6.71019358 C3.19728707,6.62505435 3.39757261,5.92484349 3.73913043,5.92484349 L4.86956522,5.92484349 C5.13043478,4.87771005 6,2.69618204 6.86956522,1.91083196 C7.73913043,1.12548188 8.35843467,0.899791884 9.30434783,1.03822076 C10.250261,1.17664964 11.0434783,1.56178748 11.0434783,2.5216598 C11.0434783,3.13248765 10.6956522,3.65605437 10.0869565,3.65605437 C9.47826087,3.65605437 9.2173913,3.30700989 9.13043478,2.78344316 C9.13043478,2.43439868 9.30434783,1.91083196 9.13043478,1.82357084 C8.95652174,1.73630972 8.69565217,2.17261532 8.52173913,2.5216598 C8.4057971,2.75435612 8.02898551,3.88875069 7.39130435,5.92484349 L8.52173913,5.92484349 C8.85454756,5.92484349 8.82013881,6.71019358 8.52173913,6.7974547 Z M15.0434783,5.57579901 C15.7391304,5.57579901 16,5.92484349 16,6.53567134 C16,7.14649918 15.730061,7.6600281 15.0434783,7.75732702 C14.4347826,7.84358819 14.3156572,7.27944592 14.0869565,7.14649918 C13.9424037,7.06246867 13.826087,7.2337603 13.6521739,7.40828254 C13.3913043,7.75732702 13.1304348,8.28089374 13.0434783,8.36815486 C13.0434783,8.5426771 13.2173913,8.89172158 13.3913043,9.58981054 C13.6521739,10.3751606 13.6521739,10.5496829 13.826087,10.5496829 C14.0869565,10.5496829 14.2608696,10.2878995 14.4347826,9.85159391 C14.5217391,9.50254942 14.6086957,9.4152883 14.7826087,9.4152883 C14.8695652,9.4152883 14.9565217,9.50254942 14.9565217,9.76433278 C14.9565217,10.5496829 13.826087,12.7312109 12.4347826,12.7312109 C12,12.7312109 11.7391304,12.3821664 11.4782609,11.9458608 C11.3043478,11.5095552 11.1304348,10.8987273 10.9565217,10.2878995 C10.8695652,10.5496829 10.3478261,11.5095552 9.65217391,12.120383 C9.30434783,12.4694275 8.95652174,12.6439498 8.52173913,12.6439498 C7.82608696,12.6439498 7.56521739,12.2076442 7.56521739,11.5968163 C7.56521739,11.0732496 7.82608696,10.2006384 8.52173913,10.2006384 C8.86956522,10.2006384 9.04347826,10.2878995 9.13043478,10.5496829 C9.30434783,10.9569014 9.44927536,11.1605107 9.56521739,11.1605107 C9.91304348,11.1605107 10.2608696,10.636944 10.8695652,9.67707166 C10.6956522,8.9789827 10.5217391,8.36815486 10.4347826,7.93184926 C10.2608696,7.40828254 10.173913,7.14649918 9.91304348,7.14649918 C9.65217391,7.14649918 9.47826087,7.49554366 9.39130435,7.75732702 C9.2173913,8.1063715 9.2173913,8.45541598 8.95652174,8.45541598 C8.7826087,8.45541598 8.69565217,8.28089374 8.69565217,8.1063715 C8.69565217,7.32102142 9.73913043,5.40127677 11.2173913,5.40127677 C12,5.40127677 12.2314776,5.67252615 12.4347826,6.20012531 L12.8695652,7.58280478 C13.9130435,6.18662685 14.173913,5.57579901 15.0434783,5.57579901 Z";var Ct=document.createElement("canvas");function wt(t,e){var i=t.qHyperCube.qMeasureInfo;var n;for(n=0;n<i.length;++n)if(i[n].cId===e)return i[n];return null}function qt(t,e){var i=t.qHyperCube.qMeasureInfo;var n;var a;for(n=0;n<i.length;++n)if(i[n].cId===e){a=t.qHyperCube.qGrandTotalRow[n];if(!a||!a.qText||"NaN"===a.qNum&&"-"===a.qText)return"";return X["a"].escapeMarkdown(a.qText)}return""}function Mt(t){var e=30;var i=xt["a"].getDevicePixelToBackingStoreRatio();var n=150;var a=.35;var r="13px 'QlikView Sans', sans-serif";var o=Ct.getContext("2d");var s=xt["a"].measureTextObject({shape:{text:t,width:112,font:r}});var l=Math.ceil(Math.min(s.width+50,n));Ct.height=e*i;Ct.width=l*i;Ct.style.height="".concat(e,"px");Ct.style.width="".concat(l,"px");o.clearRect(0,0,Ct.width,Ct.height);o.save();o.scale(i,i);o.globalAlpha=a;o.translate(6,8);o.fill(new Path2D(_t));o.restore();o.globalAlpha=1;o.font="13px 'QlikView Sans', sans-serif";o.fillText(s.lines[0],32,e/2+5);o.restore();var c=Ct.toDataURL("image/png");var u=document.createElement("img");u.setAttribute("src",c);u.setAttribute("class","tokenized-measure");u.setAttribute("width","".concat(l,"px"));u.setAttribute("height","".concat(e,"px"));return u}X["a"].register({name:"measure",character:"=",toHTML:{callback:function t(e,i){var n;var a;if(nt["a"].isActive()){var r=nt["a"].getOptions();if(!r.useMeasures)return"";var o=r.propertyHandler.getMeasure(i);var s;var l=false;if(o){var c=wt(r.layout,i);if(!c||c.qError){l=true;s=gt["default"].get("Object.ErrorMessage.MissingMeasure")}else s=c.qFallbackTitle||""}else s=r.copiedMeasures[i];var u=JSON.stringify(o);a=Mt(s);a.setAttribute("data-measure-id",i);a.setAttribute("data-measure-name",bt.a.compressToBase64(s));a.setAttribute("data-measure",bt.a.compressToBase64(u));a.setAttribute("data-tid","ti-measure");l&&a.classList.add("invalid-measure")}else{n=nt["a"].getCurrentLayout();var d=qt(n,i);if(null===d)return"";d.length>H["a"].textImage&&(d="".concat(d.substr(0,H["a"].textImage-1),"…"));a=document.createElement("span");a.setAttribute("data-tid","ti-measure");a.appendChild(document.createTextNode(d))}return a.outerHTML}},toMarkdown:{callback:function t(){var e="";var i=this.getAttribute("data\\-measure\\-id");var n=nt["a"].getOptions();if(!wt(n.layout,i)&&!n.copiedMeasures[i]){var a=bt.a.decompressFromBase64(this.getAttribute("data\\-measure"));var o=JSON.parse(a);i=r["a"].generateId();o.qDef.cId=i;var s=n.properties;s.qHyperCubeDef.qMeasures.push(o);yt["a"].indexAdded(s.qHyperCubeDef.qInterColumnSortOrder,s.qHyperCubeDef.qDimensions.length+s.qHyperCubeDef.qMeasures.length-1);var l=bt.a.decompressFromBase64(this.getAttribute("data\\-measure\\-name"));n.copiedMeasures[i]=l}return"=[".concat(e,"](").concat(i,")")},tags:[{name:"img",attr:["data\\-measure\\-id"]}]}});var St=c.a.Formatter.extend({title:"measure",cmd:"",text:"measure",toMarkdown:function t(e){return e},toHTML:function t(e){return e}});function Dt(t,e,i){var n=i?"qStaticContentUrl":"qStaticContentUrlDef";for(var a=0;a<e.length;a++)if(e[a].id===t)return e[a].url[n].qUrl;return""}function It(t){return t.replace(/\\(["'])/g,"%5C$1").replace(/'/g,"%27").replace(/"/g,"%22").replace(/\$/g,"%24")}X["a"].register({name:"image",character:"!",toHTML:{callback:function t(e,i){if(nt["a"].useImageArray()){var n=i;var a;a=nt["a"].isActive()?nt["a"].getOptions().layout:nt["a"].getCurrentLayout();i=Dt(e,a.images,true);i||(i=X["a"].unescapeMarkdown(n))}i=$["a"].stripBasePath(i);i=It(i);i=$["a"].addBasePath(i);i=X["a"].escapeMarkdown(i);e||(e="image");e=It(e);return"<img src='".concat(i,"' data-image-id='").concat(e,"'>")}},toMarkdown:{priority:1,regex:/^<img.*?src="([^"]+)".*?>$/,callback:function t(e){var i=this.getAttribute("data\\-image\\-id")||"";i||(i="");e=X["a"].unescapeMarkdown(e);e=$["a"].stripBasePath(e);e=X["a"].escapeMarkdown(e);return"![".concat(i,"](").concat(e,")")},tags:[{name:"img",attr:["src"],dontMatchAttr:["data\\-measure\\-id"]}]}});var kt=c.a.Formatter.extend({title:"image",cmd:"insertImage",text:"image",onClick:function t(e){document.execCommand(e.cmd,false,e.param)}});var Lt=/color: rgb\\\((\d{1,3}), (\d{1,3}), (\d{1,3})/i;var Tt=/font\\-size: (\d+)px/i;var Et=/text\\-decoration: underline/i;var At=/font\\-weight: bold/i;X["a"].register({name:"paste",character:"`",toMarkdown:{regex:/^<(span|font|i|b|u) style="(.+?)">(.+?)<\/(?:span|font|i|b|u)>$/,callback:function t(e,i,n){var a;if(Lt.test(i)){i=i.replace(/rgb\\\(/g,"rgb(").replace(/\\\);/g,");");n=X["a"].getFormatter("#").toMarkdown.callback(null,r["a"].normalizeToHex(i),null,n)}a=Tt.exec(i);a&&(n=X["a"].getFormatter("%").toMarkdown.callback(a[1],n));a=Et.exec(i);a&&(n=X["a"].getFormatter("~").toMarkdown.callback(n));a=At.exec(i);a&&(n=X["a"].getFormatter("**").toMarkdown.callback(n));this.innerHTML=n;this.removeAttribute("style");return X["a"].toMarkdown(this.outerHTML.trim())},tags:[{name:"span",attr:["style"]},{name:"font",attr:["style"]},{name:"b",attr:["style"]},{name:"i",attr:["style"]},{name:"u",attr:["style"]}]}});X["a"].register({name:"word",character:"``",toMarkdown:{regex:/^.+$/i,callback:function t(){return" "},tags:[{name:"style",attr:[]},{name:"w:WordDocument",attr:[]}]}});delete c.a.Formatters.Bold;delete c.a.Formatters.Italic;delete c.a.Formatters.Link;delete c.a.Formatters.Unlink;c.a.Formatters.bold=new ct;c.a.Formatters.italic=new ut;c.a.Formatters.underline=new dt;c.a.Formatters.justifyLeft=new lt.Left;c.a.Formatters.justifyCenter=new lt.Center;c.a.Formatters.justifyRight=new lt.Right;c.a.Formatters.fontSize=new et;c.a.Formatters.foreColor=new tt;c.a.Formatters.bookmark=new ft;c.a.Formatters.link=new ht;c.a.Formatters.unlink=new vt;c.a.Formatters.measure=new St;c.a.Formatters.insertImage=new kt;function Pt(t){var e=[];for(var i=0;i<t.childNodes.length;i++)3===t.childNodes[i].nodeType?e.push(t.childNodes[i]):e.push.apply(e,Pt(t.childNodes[i]));return e}function Ot(){var t=this;var e=t.textContent.length-H["a"].textImage;if(e>0){var i=C.getRange();var n=i.commonAncestorContainer;if(3===n.nodeType){var a=Pt(document.activeElement);var r=a.indexOf(n);a=a.splice(0,r+1);a.reverse().forEach((function(t){if(e<=0)return;if(t.nodeValue.length>e){t.splitText(t.nodeValue.length-e);t.parentNode.removeChild(t.nextSibling);C.addRange(i,true)}else t.parentNode.removeChild(t);e-=t.nodeValue.length}))}}}c.a.Blocks.Paragraph=function(){return c.a.Block.extend({type:"paragraph",className:"st-block",icon_name:"paragraph",editorHTML:'<div class="st-required st-text-block" contenteditable="true" autocomplete="off" autocorrect="off"></div>',attributes:function t(){return r["a"].extend(c.a.SimpleBlock.fn.attributes.call(this),{})},title:function t(){return"Paragraph"},loadData:function t(e){this.getTextBlock().html(c.a.toHTML(e.text,this.type))},focus:function t(){var e=this.getTextBlock();e.focus()},_initTextBlocks:function t(){var e=this.getTextBlock();e.bind("input",Ot).bind("paste",this._handleContentPaste).bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter)},_initUIComponents:function t(){this.onFocus();this.onBlur()},_blockPrepare:function t(){this._initUI();this._initMessages();this.checkAndLoadData();this.$el.addClass("st-item-ready")},toData:function t(){c.a.log("toData for ".concat(this.blockID));var e=this.getTextBlock().html();this.setData({text:c.a.toMarkdown(e,this.type)})}})}();c.a.FloatingBlockControls=function(){return c.a.FloatingBlockControls.extend({className:"",bound:[],initialize:function t(){},attributes:function t(){}})}();c.a.BlockControls=function(){return c.a.FloatingBlockControls.extend({className:"",bound:[],html:"",initialize:function t(){},hide:function t(){},show:function t(){},handleControlButtonClick:function t(){}})}();c.a.FormatBar=function(){return c.a.FormatBar.extend({className:"",initialize:function t(){}})}();var Rt={bold:false,italic:false,underline:false,justifyLeft:false,justifyCenter:false,justifyRight:false,link:false,fontSize:false};var Vt={controller:["$scope","$element","$timeout","$sce","luiPopover",function(t,e,i,n,l){var u=n.getTrustedHtml(c.a.toHTML(t.options.markdown));t.data=JSON.stringify({data:[{type:"paragraph",data:{text:c.a.toMarkdown(u)}}]});t.states=Rt;t.cmdQueue=new j;var d;function p(){if(d){t.editor.formatBar.$el.remove();d=null}}function f(){p();if("inline"===t.options.toolbar.style)d=t.options.target.showComponent(z,{textTool:t,options:t.options.toolbar||{}});else{d=l.show({template:z.template,controller:z.controller,input:{textTool:t,options:t.options.toolbar||{}},alignTo:t.options.target||e[0],dock:"top",variant:"inverse",closeOnOutside:true,outsideIgnore:"media-toolbar",showArrow:false,autoFocus:false});d.closed.then((function(){d=null}))}}this.scope=function(){return t};this.closing=function(){var t=this.scope().options;d&&("inline"===t.toolbar.style?t.target.empty():d.close())};t.getParagraph=function(){return t.editor.blocks[0]};t.getEditorElement=function(){return t.getParagraph().getTextBlock()};t.destroy=function(){p();t.destroyComponent()};t.calculateUsage=function(){var e=t.getEditorElement()[0];t.usage=Math.min(100,(e.textContent.length/H["a"].textImage*100).toFixed(0));t.showUsage=t.usage>=90};function h(){function e(e){return t.getEditorElement()[0]===e}var i=o["a"].getAncestorsUntil(t.currentRange.startContainer,e);var n=o["a"].getAncestorsUntil(t.currentRange.endContainer,e);function a(t,e){if(Array.isArray(t))return t.some((function(t){return a(t,e)}));return e.some((function(e){return e.nodeName.toLowerCase()===t}))}function r(){var e=t.currentRange.startContainer;while(e.parentNode&&"DIV"!==e.tagName&&"P"!==e.tagName)e=e.parentNode;return e}return{rangeCollapsed:t.currentRange.collapsed,hasStartAncestorTag:function t(e){return a(e,i)},hasEndAncestorTag:function t(e){return a(e,n)},getParentParagraph:r}}t.refreshState=function(){if(!t.currentRange)return;s["default"].$apply(t,(function(){t.calculateUsage();var e=h();Object.keys(t.states).forEach((function(i){t.states[i]=c.a.Formatters[i].isActive(e)}));var i;if(t.currentRange){i=document.queryCommandValue("foreColor");"undefined"!==typeof i&&(i=r["a"].normalizeToHex(i))}t.color=i||"#545352";var n;var a;if(t.currentRange){a=o["a"].getParentElementWithAttribute(t.currentRange.endContainer,"font","size");if(a){n=a.getAttribute("size");n=g.htmlSizeToMarkdownSize[n];n=g.markdownSizeToHtmlSize[n]}"undefined"===n&&(n=null);a||n||"<br>"!==t.currentRange.endContainer.innerHTML&&!t.currentRange.endContainer.textContent||(t.fontSize=3)}n?t.fontSize=n:n||t.fontSize||(t.fontSize=3)}))};t.saveRange=function(){var e=C.getRange();t.currentRange=e?e.cloneRange():null};t.restoreRange=function(){if(!t.currentRange)return;var e=C.getRange();e?e&&(C.rangeEquals(e,t.currentRange)||C.addRange(t.currentRange,true)):C.addRange(t.currentRange,true)};t.saveScroll=function(){t.currentScrollTop=t.getEditorElement()[0].scrollTop};t.restoreScroll=function(){t.currentScrollTop&&(t.getEditorElement()[0].scrollTop=t.currentScrollTop)};t.setJustify=function(e){t.focus();t.restoreScroll();t.restoreRange();t.execCustom({cmd:e});t.saveRange();t.refreshState()};t.setBIU=function(e){t.focus();t.restoreScroll();t.restoreRange();t.states[e]=!t.states[e];if(t.currentRange.collapsed){var i=t.cmdQueue.remove(e);i||t.cmdQueue.push({cmd:e})}else t.execCustom({cmd:e});t.saveRange()};t.setFontSize=function(e){t.focus();t.restoreScroll();t.restoreRange();if(t.currentRange.collapsed){t.cmdQueue.remove("fontSize");t.cmdQueue.push({param:e,cmd:"fontSize"})}else t.execCustom({param:e,cmd:"fontSize"});t.saveRange();t.fontSize=e};t.setColor=function(e){t.focus();t.restoreScroll();t.restoreRange();if(t.currentRange.collapsed){t.cmdQueue.remove("foreColor");t.cmdQueue.push({param:e,cmd:"foreColor"})}else t.execCustom({param:e,cmd:"foreColor"});t.saveRange();t.color=e};t.insertImage=function(e,i){e=$["a"].addBasePath(e);i=$["a"].addBasePath(i);t.focus();t.restoreRange();t.execCustom({param:e,cmd:"insertImage"});t.options.insertedImages.push({url:e,urlDef:i});t.saveRange();t.focus()};t.insertLink=function(e,i,n){i?C.addRange(i,true):t.restoreRange();t.focus();t.execCustom({url:e,cmd:n.cmd,formatter:n.formatter});t.saveRange();t.refreshState()};t.removeLink=function(e){C.addRange(e,true);t.execCustom({cmd:"unlink",range:e});t.saveRange();t.refreshState();t.focus()};t.execCustom=function(t){var e=c.a.Formatters[t.formatter||t.cmd];if(void 0===e)return;"function"===typeof e.onClick?e.onClick(t):document.execCommand(t.cmd,false,t.param)};t.focus=function(){t.getEditorElement().focus()};function v(e){var n=!B["a"].treatAsDesktop();function r(e){t.saveRange();t.cmdQueue.clear();e&&t.refreshState()}a()("body").on("mouseup.texttool",(function(e){var s=a()(e.target);if(s.closest(".qv-texttool-toolbar, .qui-immidiateContextual, .qv-modal-container-centered, .lui-popover").length){if(!o["a"].isInput(document.activeElement)){t.focus();t.restoreRange()}}else n||document.activeElement===t.getEditorElement()[0]&&i((function(){r(true);t.$apply()}))}));n&&a()(document).on("selectionchange.texttool",(function(){if(document.activeElement===t.getEditorElement()[0]){var e=C.getRange();e&&!C.rangeEquals(e,t.currentRange)&&r(true)}}));e.on("qv-activate","img",(function(e){var i=C.createRangeForElement(e.target);t.focus();C.addRange(i,true);t.saveRange();t.refreshState()}));e.on("scroll",(function(){t.saveScroll()}));e.on("keydown input",(function(e){if(13!==e.which){t.cmdQueue.execAll((function(e){t.execCustom(e)}));t.cmdQueue.clear()}i((function(){t.$apply()}))}));n||e.on("keyup",(function(){i(r.bind(this,true),0)}));e.on("DOMNodeInserted.autoDirection",(function(t){var i=a()(t.target);if("x-auto-direction-for-paragraphs"in e[0].attributes&&i.is("div,p")&&i[0]!==e[0]){Q["a"].supportDirAuto()&&i.attr("dir","auto");if(!i.is("[align],[style]")){K.usesAlign?i.attr("align","inherit"):i.css("text-align","inherit");""===i[0].textContent&&i.css("direction",Z["a"].direction)}}}))}i((function(){t.editor=new c.a.Editor({el:e.find("textarea"),defaultType:"paragraph",onEditorRender:function n(){var a=e.find(".st-text-block");v(a);"function"===typeof t.options.onOpen&&t.options.onOpen(t);t.options.toolbar&&f(a);i((function(){t.refreshState()}))}})}));t.$on("$destroy",(function(){p();a()(e.find(".st-text-block")).off("DOMNodeInserted.autoDirection");a()("body").off(".texttool");a()(document).off(".texttool")}))}],template:u};var Nt=e["a"]=Vt},ujh9:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-color-scale-component" ng-if="visible" qva-apply-style="style" tcl="color-scale">\n</div>';var r=i("CpIe");var o="-moz-linear-gradient(left";var s="-webkit-linear-gradient(left";var l=" -o-linear-gradient(left";var c="-ms-linear-gradient(left";var u="linear-gradient(to right";function d(t,e,i){var n="";var a=")";if(i)if(e)for(var r=t.length-1;r>=0;r--)n+=", ".concat(t[r]," ").concat(100/(t.length-1)*(t.length-1-r),"%");else for(var d=t.length-1;d>=0;d--){n+=", ".concat(t[d]," ").concat(100/t.length*(t.length-1-d),"%");n+=", ".concat(t[d]," ").concat(100/t.length*(t.length-d),"%")}else if(e)for(var p=0;p<t.length;p++)n+=", ".concat(t[p]," ").concat(100/(t.length-1)*p,"%");else for(var f=0;f<t.length;f++){n+=", ".concat(t[f]," ").concat(100/t.length*f,"%");n+=", ".concat(t[f]," ").concat(100/t.length*(f+1),"%")}return"background:".concat(t[t.length/2],"; background:").concat(o).concat(n).concat(a,"; background:").concat(s).concat(n).concat(a,"; background:").concat(l).concat(n).concat(a,"; background:").concat(c).concat(n).concat(a,"; background:").concat(u).concat(n).concat(a,";width: 100%; height: 32px;border-radius:4px;")}var p={template:a,controller:["$scope",function(t){var e=function e(){return t.data};var i=function t(e){if("boolean"===typeof e.definition.reverse)return e.definition.reverse;if("function"===typeof e.definition.reverse)return e.definition.reverse.call(null,e.data,e.handler);return false};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineReadOnly(t,t.args.handler);n["a"].defineValue(t,t.definition,e);Object.defineProperty(t,"style",{get:function e(){return d(t.definition.colors,"gradient"===t.definition.type,i(t))}})}]};var f=e["default"]=p},wDFR:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("6uJb");var l=i("Nj0e");var c=i("33FQ");var u='<div class="object-error hard-error" tid="object.Error">\n\t<div class="object-error-content">\n\t\t<div class="object-error-title">\n\t\t\t<span>{{error.title}}</span>\n\t\t\t<i class="object-error-more lui-icon lui-icon--info lui-icon--large" ng-click="showMore($event)"></i>\n\t\t</div>\n\t\t<div ng-if="error.message" class="object-error-message">{{error.message}}</div>\n\t\t<button ng-if="showButton" class="lui-button object-error-remove" ng-click="remove($event)" q-translation="Common.Delete"></button>\n\t</div>\n</div>\n';var d=e["default"]={type:"invalid",template:u,definition:{type:"items",items:{}},support:{exportData:false},getContextMenu:function t(){},hasError:function t(){return false},showRequirements:function t(){return false},getCreatePropertyHandler:function t(e){return new l["a"]({app:e})},getDropFieldOptions:function t(){},getDropDimensionOptions:function t(){},getDropMeasureOptions:function t(){},controller:["$scope","luiPopover",function(t,e){var i=t.object.error;var n=s["default"].get(i.title);var r;r=Array.isArray(i.message)?s["default"].get(i.message[0],i.message.slice(1)):s["default"].get(i.message);t.error={title:n,message:r};t.showButton=t.options&&"function"===typeof t.options.removeIt;t.remove=function(e){t.options.removeIt();e.stopPropagation()};t.showMore=function(i){e.show({template:c["a"].template,controller:c["a"].controller,alignTo:a()(i.target)[0],input:{error:t.error,onClose:function t(){o.a.preventGestures()}}})}}]}},wdNe:function(t,e,i){"use strict";var n=i("b5IE");var a=document.createElement("canvas").getContext("2d");var r="…";var o="-";function s(t,e,i,n){var r;var o;var s=t?t.split(/\n+|\r+|\r\n/):[];var l=[];var c;var u;var d=t?t.split(/\s+/):[];var p=s[0];var f;var h;if("number"!==typeof e||e<=0)return[t];if("number"===typeof n&&s.length>=n)return s.slice(0,n);i&&(a.font=i);for(o=0;o<s.length;o++){h=s[o]||"";d=h.split(/\s+/);p=d[0];f="";for(r=1;r<d.length;r++){c="".concat(p," ").concat(d[r]);u=a.measureText(c).width;if(u>e&&("number"!==typeof n||n>l.length)){l.push(p);p=d[r]}else p=c;if("number"===typeof n&&l.length>=n){f=d.slice(r+1).join(" ");break}}"number"!==typeof n||l.length<n?l.push(p):l[Math.max(0,l.length-1)]="".concat(l[Math.max(0,l.length-1)]||""," ").concat(p," ").concat(f)}return l}function l(t,e,i,n,r){if(!t||!t.length)return[];i&&(a.font=i);var o=[];var s=t.slice();var l;var u;var d;var f;s.filter((function(t){return!!t}));if("number"!==typeof e||e<0)return t.slice();for(f=0;f<s.length;f++){d=s[f];u=null;if(!d)continue;if(d.length<=1||a.measureText(d).width<=e){o.push(d);continue}l=p(d,e,void 0,n-o.length);if(l.length<=1){o.push(l[0]);continue}u=l.pop();o=o.concat(l);s[f+1]?a.measureText("".concat(u," ").concat(s[f+1])).width>e&&o.length+s.length-f<=n?s.splice(f+1,0,u):s[f+1]="".concat(u," ").concat(s[f+1]):s.push(u)}o.forEach((function(t,e,i){i[e]=t?t.trim():t}));if(o.length>n){o=o.splice(0,n);o[o.length-1]=c(o[o.length-1],e,i,r).text}else{d=o[o.length-1];d&&d.length>1&&a.measureText(d).width>e&&(o[o.length-1]=c(d,e,i,r).text)}return o}function c(t,e,i,n){var o=t;var s;var l;var c;var u;var d=a.measureText("i").width;var p=Math.ceil(e/d);n=n||r;i&&(a.font=i);if(t&&e){if(a.measureText(o).width>e){for(s=Math.min(p,o.length);s>0;s--){l=o.substring(0,s-1);c=l.trim()+n;if(a.measureText(c).width<=e){u=o.substring(s-1);o=c;break}}if(!s){u=o;o=r}}}else u=void 0;return{text:o,rest:u}}function u(t){return"number"===typeof t&&Number.isFinite(t)}function d(t,e,i,n){var r;var s=t;var l="";var c;var p=[];if(u(i)&&i<=1)return[t];var f=Math.ceil(e/n);var h=Math.min(t.length,f);for(r=h;r>0;r--){s=t.substring(0,r);c=t.substring(r-1,r);" "===c?s=t.substring(0,r-1):s+=o;l=t.substring(r);if(a.measureText(s).width<=e)break}if(!r&&!s||a.measureText(s).width>e){s=t.substring(0,1);l=t.substring(1)}p.push(s);if(!l)return p;if(a.measureText(l).width>e){l=d(l,e,i-1,n);p=p.concat(l)}else p.push(l);return p.filter((function(t){return""!==t.trim()}))}function p(t,e,i,n){if(!t||!e)return[];i&&(a.font=i);return d(t,e,n,Math.max(1,a.measureText("i").width))}function f(t,e,i,n,a){var r;if(Number.isNaN(+e))return[t];r=n>1?s(t,e,i,n):[t];r=l(r,e,i,n,a);return r}var h={lineWrap:s,wordWrap:l,splitWord:p,wrap:f,truncate:c};var v=i("cQOM");var g=document.createElement("canvas").getContext("2d");function m(t){return 1.5*t.measureText("m").width}function b(t){g.font=this.font;var e=m(g);var i=(this.lineHeightMultiplicator||1)*e;var n="maxWidth"in this?this.maxWidth:this.width;var a="maxHeight"in this?this.maxHeight:this.height;var r=this.maxNumLines;var o=[];var s=0;var l=[];this.lineHeight=i;if(a<e)return[];var c=a?Math.max(1,Math.floor(a/i)):r||1;if(Array.isArray(r)){r.forEach((function(t){s+=Number.isNaN(+t)||t<=0?0:t}));r.forEach((function(t){o.push(Number.isNaN(+t)||t<=0?c-s:t)}))}else o=[Number.isNaN(+r)||r<=0?c:Math.min(c,r)];Array.isArray(t)?t.forEach((function(t,e){l.length<c&&(l=l.concat(h.wrap(t,n,this.font,o[e])))}),this):l=h.wrap(t,n,this.font,o[0],this.ellipsis);return l}var y=n["a"].extend("Text",{init:function t(){this._super();this.options={};this.x=0;this.y=0;this.lineHeightMultiplicator=1;this._dirtyMeasures=true;this._measures={numLines:0,width:0,height:0}},setText:function t(e){this.text=e;this.invalidateBounds();return this},tokenize:function t(){this.lines=b.apply(this,[this.text]);return this},measure:function t(){this.preRender();if(this._dirtyMeasures){var e=0;var i;var n=this.lines;g.font!==this.font&&(g.font=this.font);for(i=0;i<n.length;i++)e=Math.max(e,g.measureText(n[i]).width);this._measures.numLines=n.length;this._measures.width=e;this._measures.height=n.length*this.lineHeight;this._dirtyMeasures=false}return{numLines:this._measures.numLines,width:this._measures.width,height:this._measures.height}},getHorizontalAnchor:function t(){var e=this.x||0;var i;if(this.width>0){i=this.attr("align");if("center"===i)return e+this.width/2;if("right"===i)return e+this.width}return e},getVerticalAnchorFirstLine:function t(){var e=this.y||0;var i=this.attr("baseline");var n;if("middle"===i){n=this.attr("lineHeight");e-=(this.lines.length-1)*n/2;this.height>0&&(e+=this.height/2)}else if("bottom"===i){n=this.attr("lineHeight");e-=(this.lines.length-1)*n;this.height>0&&(e+=this.height)}return e},preRender:function t(){var e="";Array.isArray(this.text)?this.text.forEach((function(t){e+="".concat(t,"__")})):e=this.text;var i=this.attr("font");this.font=i;var n=e+i+this.maxWidth+this.width+this.height;if(n!==this._renderedID){this.tokenize();this.invalidateBounds();this._dirtyMeasures=true;this._renderedID=n}return this},getLocalBoundingRect:function t(){var e=this.measure();var i=this.x;var n=this.y;var a=this.attr("align")||"left";var r=this.attr("baseline")||"top";this.height?"middle"===r?n+=this.height/2-e.height/2:"bottom"===r&&(n+=this.height-e.height):"middle"===r?n-=e.height/2:"bottom"===r&&(n-=e.height);this.width?"center"===a?i+=this.width/2-e.width/2:"right"===a&&(i+=this.width-e.width):"center"===a?i-=e.width/2:"right"===a&&(i-=e.width);return{x:i,y:n,width:e.width,height:e.height}},containsPoint:function t(e,i){var n=this.getLocalBoundingRect();return e>n.x&&e<n.x+n.width&&i>n.y&&i<n.y+n.height},getLocalPoints:function t(){var e=this.getLocalBoundingRect();return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]},intersectsLocalRect:function t(e){if(!e)return false;var i=this.getLocalBoundingRect();return i.x<=e.x+e.width&&e.x<=i.x+i.width&&i.y<=e.y+e.height&&e.y<=i.y+i.height},intersectsLocalLine:function t(e){if(this.containsPoint(e.x1,e.y1)||this.containsPoint(e.x2,e.y2))return true;var i=this.getLocalBoundingRect();return e.intersectsLine(new v["a"](i.x,i.y,i.x+i.width,i.y))||e.intersectsLine(new v["a"](i.x+i.width,i.y,i.x+i.width,i.y+i.height))||e.intersectsLine(new v["a"](i.x+i.width,i.y+i.height,i.x,i.y+i.height))||e.intersectsLine(new v["a"](i.x,i.y+i.height,i.x,i.y))}});var x=e["a"]=y},"wjs+":function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("TmNk");var o=i.n(r);var s=i("uVcZ");var l=i("2Hli");var c=i("8H7g");var u=i("G1wx");var d=i("wxEd");var p={sortBasedOnSubSet:function t(e,i){var n=0;var a=i.map((function(t){return e.indexOf(t)})).filter((function(t){return t>-1}));return e.map((function(t,e){var r=a.indexOf(e);if(r>-1)return i[n++];return t}))}};var f=p;var h=i("zBv7");var v=i("kp36");var g={template:d["a"],controller:["$scope",function(t){var e=t.args.cache;var i="sortable_";var n=v["a"].create();var r;t.expandClicked=function(t,n){if(n.disabled||a()(t.target).hasClass("pp-move-item"))return;n.expanded=!n.expanded;e.put(i+n.id,n.expanded)};function d(){t.sortableItemLists.reset();n.resetTitles();var a=[];var c=[];var u=t.definition.items.dimensions;var d=l["a"].getValue(t.data,u.ref,[]);d.forEach((function(r,o){var l=r.qDef.cId;var d;var p=true;var f=t.args.handler.getDimensionLayout(l);var v;"function"===typeof u.included?p=u.included.call(null,o,t.data,t.args.handler):"boolean"===typeof u.included&&(p=u.included);"function"===typeof u.locked?d=u.locked.call(null,o,t.data,t.args.handler):"boolean"===typeof u.locked&&(d=u.locked);n.getDimensionTitle(f,r,true,t.args.app).then((function(t){v=t}));if(p){a.push({title:function t(){return v},isInvalid:function e(){var i=t.args.handler.getDimensionLayout(l);return i&&!!i.qError&&!h["a"].isCalcCondNotCalculatedErr(i.qError)},component:s["a"].getComponent("items"),definition:u,data:r,args:t.args,type:"dimension",id:r.qDef.cId,interColIx:o,expanded:true===u.expanded||e.get(i+l)||false,sortable:false!==u.allowMove&&!d,showPriority:false!==u.showPriority,templateSrc:"pp-sorting-item.ng.html"});c.push(c.length)}}));var p=t.definition.items.measures;var f=l["a"].getValue(t.data,p.ref,[]);var v=o.a.limitedSorting({measures:f,properties:t.data});f.forEach((function(r,o){var l=r.qDef.cId;var u;var f=true;var h=t.args.handler.getMeasureLayout(l);var g;"function"===typeof p.included?f=p.included.call(null,o,t.data,t.args.handler):"boolean"===typeof p.included&&(f=p.included);"function"===typeof p.locked?u=p.locked.call(null,o,t.data,t.args.handler):"boolean"===typeof p.locked&&(u=p.locked);n.getMeasureTitle(h,r,true,t.args.app).then((function(t){g=t}));if(f){a.push({title:function t(){return g},isInvalid:function e(){var i=t.args.handler.getMeasureLayout(l);return i&&!!i.qError},component:s["a"].getComponent("items"),definition:p,data:r,args:t.args,type:"measure",id:r.qDef.cId,interColIx:d.length+o,expanded:!v&&(true===p.expanded||e.get(i+l)||false),sortable:!v&&false!==p.allowMove&&!u,showPriority:false!==p.showPriority,templateSrc:"pp-sorting-item.ng.html",disabled:v});c.push(c.length)}}));var g=l["a"].getValue(t.data,t.definition.sortIndexRef,void 0);var m;var b;if(g&&c.length!==g.length){m=c.sort((function(t,e){return g.indexOf(t)>g.indexOf(e)}));b=m.map((function(t,e){return a[e]}))}else b=g?g.map((function(t){return a[t]})):a;b.forEach((function(t,e){t.priority=e+1}));b.forEach((function(t){r.addSortableItem(t)}))}t.sortableItemLists=c["a"].create({options:{direction:"vertical",listKey:"list",listSelector:".pp-expandable-list",itemKey:"item",itemSelector:".qv-pp-sortable",itemDragSelector:".qv-pp-sortable-handle",gesture:{name:"swipe",options:{radiusThreshold:u["a"].treatAsDesktop()?4:0,preventDefault:false}}},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function t(){this._super.apply(this,arguments);p()},onMove:function e(){var i=this._super.apply(this,arguments);if(i){var n=r.get().map((function(t){return t.interColIx}));var a=l["a"].getValue(t.data,t.definition.sortIndexRef);n.length!==a.length&&(n=f.sortBasedOnSubSet(a,n));l["a"].setValue(t.data,t.definition.sortIndexRef,n);t.$emit("saveProperties")}return i}});function p(){r.get().forEach((function(t){t.expanded=false;e.put(i+t.id,false)}))}r=t.sortableItemLists.createList(1,{tid:"sorting"});Object.keys(t.definition.items).forEach((function(e){var i=t.definition.items[e];t.$watchCollection("data.".concat(i.ref),(function(){d()}))}));t.$watchCollection("data.".concat(t.definition.sortIndexRef),(function(){d()}))}]};var m=e["default"]=g},wkj2:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function r(t,e,i){e&&a(t.prototype,e);i&&a(t,i);return t}var o=function(){function t(){n(this,t);this._elements=[[1,0,0],[0,1,0],[0,0,1]];this._stack=[]}r(t,[{key:"clone",value:function e(){var i=new t;return i.multiply(this._elements)}},{key:"set",value:function t(e){this._elements=e;return this}},{key:"save",value:function t(){this._stack.push(this.elements);return this}},{key:"restore",value:function t(){this._stack.length&&(this._elements=this._stack.pop());return this}},{key:"add",value:function t(e){var i;var n;for(i=0;i<this._elements.length;i++)for(n=0;n<this._elements[i].length;n++)this._elements[i][n]+=e;return this}},{key:"translate",value:function t(e,i){this.multiply([[1,0,e],[0,1,i],[0,0,1]]);return this}},{key:"rotate",value:function t(e){var i=Math.cos(-e);var n=Math.sin(-e);this.multiply([[i,n,0],[-n,i,0],[0,0,1]]);return this}},{key:"skew",value:function t(e,i){var n=Math.tan(e);var a=Math.tan(i);this.multiply([[1,n,0],[a,1,0],[0,0,1]]);return this}},{key:"multiply",value:function e(i){i instanceof t&&(i=i._elements);if(Array.isArray(i)){var n=[[0,0,0],[0,0,0],[0,0,0]];for(var a=0;a<this._elements.length;a++)for(var r=0;r<this._elements[a].length;r++)for(var o=0;o<3;o++)n[a][r]+=this._elements[a][o]*i[o][r];this._elements=n}else for(var s=0;s<this._elements.length;s++)for(var l=0;l<this._elements[s].length;l++)this._elements[s][l]*=i;return this}},{key:"scale",value:function t(e,i){(arguments.length<2||"undefined"===typeof i)&&(i=e);this.multiply([[e,0,0],[0,i,0],[0,0,1]]);return this}},{key:"determinant",value:function t(){var e=this._elements[0][0];var i=this._elements[0][1];var n=this._elements[0][2];var a=this._elements[1][0];var r=this._elements[1][1];var o=this._elements[1][2];var s=this._elements[2][0];var l=this._elements[2][1];var c=this._elements[2][2];var u=0;u=e*r*c+i*o*s+n*a*l-n*r*s-i*a*c-e*o*l;return u}},{key:"invert",value:function t(){var e=this.determinant();var i=this._elements[0][0];var n=this._elements[0][1];var a=this._elements[0][2];var r=this._elements[1][0];var o=this._elements[1][1];var s=this._elements[1][2];var l=this._elements[2][0];var c=this._elements[2][1];var u=this._elements[2][2];this._elements=[[o*u-s*c,a*c-n*u,n*s-a*o],[s*l-r*u,i*u-a*l,a*r-i*s],[r*c-o*l,l*n-i*c,i*o-n*r]];this.multiply(1/e);return this}},{key:"transpose",value:function t(){var e=Object.create(this._elements);this._elements=[[e[0][0],e[1][0],e[2][0]],[e[0][1],e[1][1],e[2][1]],[e[0][2],e[1][2],e[2][2]]];return this}},{key:"identity",value:function t(){this._elements=[[1,0,0],[0,1,0],[0,0,1]];return this}},{key:"transformPoint",value:function t(e){var i=[e.x,e.y,1];var n=this._elements;var a=[0,0,0];for(var r=0;r<this._elements.length;r++)for(var o=0;o<this._elements[r].length;o++)a[r]+=i[o]*n[r][o];return{x:a[0],y:a[1]}}},{key:"transformPoints",value:function t(e){var i=this._elements;var n=[];for(var a=0;a<e.length;a++){var r=[e[a].x,e[a].y,1];var o=[0,0,0];for(var s=0;s<this._elements.length;s++)for(var l=0;l<this._elements[s].length;l++)o[s]+=r[l]*i[s][l];n.push({x:o[0],y:o[1]})}return n}},{key:"toString",value:function t(){var e="";this._elements.forEach((function(t,i,n){e+=t.join("\t")+(i<n.length?"\n":"")}));return e}},{key:"isIdentity",value:function t(){var e=this._elements;return 1===e[0][0]&&0===e[0][1]&&0===e[0][2]&&0===e[1][0]&&1===e[1][1]&&0===e[1][2]&&0===e[2][0]&&0===e[2][1]&&1===e[2][2]}},{key:"identityIfClose",value:function t(e){var i=this._elements;Math.abs(i[0][0]-1)<e&&Math.abs(i[0][1])<e&&Math.abs(i[0][2])<e&&Math.abs(i[1][0])<e&&Math.abs(i[1][1]-1)<e&&Math.abs(i[1][2])<e&&Math.abs(i[2][0])<e&&Math.abs(i[2][1])<e&&Math.abs(i[2][2]-1)<e&&this.identity()}}]);return t}();Object.defineProperties(o.prototype,{elements:{get:function t(){var e=this._elements;return[[e[0][0],e[0][1],e[0][2]],[e[1][0],e[1][1],e[1][2]],[e[2][0],e[2][1],e[2][2]]]}}});e["a"]=o},wrfk:function(t,e,i){"use strict";i.r(e);var n=i("qIEf");var a=i.n(n);var r=i("Z9ZH");var o=i.n(r);var s=i("uVcZ");var l=i("2Hli");var c=i("395F");var u=i("wIyQ");var d='<div class="pp-component pp-list-component pp-toplist" tcl="dimensions">\n\t<button class="lui-button  lui-button--block  pp-toplist-add-button" ng-class="{\'lui-active\': adding }" qva-activate="addClicked($event)" qv-enter="addClicked($event)"\n\t\t\tng-disabled="addDisabled() || !definition.allowAdd" q-translation="{{definition.addTranslation}}" tid="add-dimension"></button>\n\n\t<ul class="pp-expandable-list pp-toplist-content pp-dimension-list" pp-sortable="sortableOptions">\n\t\t<li ng-repeat="item in items track by item.id" ng-class="{ \'locked\': item.locked || !definition.allowMove }">\n\t\t\t<div class="pp-expandable-list-header pp-dimension" qva-activate="itemClicked( $event, item )" qva-longtapdrag="enableTouchDrag()"\n\t\t\t\t ng-class="{ \'expanded\': item.expanded, \'disabled\': item.disabled, \'invalid\': isInvalid( $index ) }" pp-sortable-handle>\n\t\t\t\t<span class="toggle-expand  lui-icon  {{ item.expanded ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }}"></span>\n\t\t\t\t<span class="text" title="{{item.title()}}">{{item.title()}}</span>\n\t\t\t\t<span class="icon icon-trash pp-delete-property" ng-if="definition.allowRemove" q-title-translation="Common.Delete"></span>\n\t\t\t</div>\n\t\t\t<div class="pp-expandable-list-content" ng-if="item.expanded && !item.disabled">\n\t\t\t\t<div include-pp-component x-component="listItemComponent" x-definition="listItemDefinition" x-data="item.data" x-args="args"></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>\n';var p=i("OnHE");var f=i("9Bsw");var h={template:d,controller:["$scope","$element","$timeout","luiPopover",function(t,e,i,n){var r=t.args.cache;var d="dimensions_";var h=p["a"].create();var v=f["a"].create();t.listItemComponent=s["a"].getComponent("items");t.listItemDefinition={items:t.definition.items||{},grouped:t.definition.grouped};function g(){var e=t.definition;h.resetTitles();v.resetTitles();var i=l["a"].getValue(t.data,t.definition.ref,[]);var n=i.map((function(i,n){var a=i.qDef.cId;var o=t.args.handler.getDimensionLayout(a);var l=h.getCachedMeasureTitle(o);h.getDimensionTitle(o,i,true,t.args.app).then((function(t){l=t}));return{title:function t(){return l},component:s["a"].getComponent("items"),definition:e,data:i,id:a,index:n,expanded:r.get(d+a)||false,disabled:false}}));var a=l["a"].getValue(t.data,t.definition.disabledRef,[]);var o=a.map((function(n,a){var o=n.qDef.cId;var l;v.getDimensionTitle(n,t.args.app,true).then((function(t){l=t}));return{title:function t(){return l},component:s["a"].getComponent("items"),definition:e,data:n,id:o,index:i.length+a,expanded:r.get(d+o)||false,disabled:true}}));t.items=n.concat(o)}t.$watchCollection("data.".concat(t.definition.ref),(function(){g()}));t.$watchCollection("data.".concat(t.definition.disabledRef),(function(){g()}));t.isInvalid=function(e){var i=t.args.handler.getDimensionLayouts()[e];return i&&!!i.qError};t.itemClicked=function(e,i){if(a()(e.target).hasClass("pp-delete-property")){i.index=i.disabled?i.index-t.args.handler.hcProperties.qDimensions.length:i.index;t.args.handler.removeDimension(i.index,i.disabled).then((function(){t.$emit("saveProperties")}))}else{var n=r.get(d+i.data.qDef.cId)||false;if(!i.disabled){i.expanded=!n;r.put(d+i.data.qDef.cId,!n)}}};t.addDisabled=function(){return t.args.handler.getDimensions().length>=t.args.handler.maxDimensions()};var m=null;t.addClicked=function(e){var i;if(t.adding){b();return}if(!t.addDisabled()&&!t.adding){m=n.show({template:c["a"].template,controller:c["a"].controller,alignTo:e.currentTarget,input:{app:t.args.app,closeAddPopover:b,addFieldDimension:x,addLibraryDimension:_},dock:"bottom",closeOnEscape:true});t.adding=true}m.closing.then((function(e){e&&!a()(e.target).hasClass("pp-toplist-add-button")&&(t.adding=false);i=e}));m.closed.then((function(){i||(t.adding=false);m=null}))};function b(e){if(m){m.close();m=null}e&&a()(e.target).hasClass("pp-toplist-add-button")&&o.a.preventGestures();t.adding=false}function y(){i((function(){var t=e.find(".pp-toplist-content");var i=t.children().last();t[0].scrollTop=i[0].offsetTop-1}),100)}function x(e){t.args.handler.addFieldDimension(e.value,"").then((function(e){r.put(d+e.qDef.cId,true);t.$emit("saveProperties");b();y()}))}function _(e){t.args.handler.addLibraryDimension(e.libraryId).then((function(e){r.put(d+e.qDef.cId,true);t.$emit("saveProperties");b();y()}))}t.sortableOptions={disabled:!t.definition.allowMove,onMove:function e(i,n){t.args.handler.moveDimension(i,n).then((function(){t.$emit("saveProperties")}))}};u["a"].on("start",b);t.$on("$destroy",(function(){u["a"].off("start",b)}))}]};var v=e["default"]=h},wxEd:function(t,e,i){"use strict";e["a"]='<div class="pp-component pp-sorting-component" style="position:relative; height: 100%;" tcl="sorting" qv-sortable-list="sortableItemLists">\n\t<div ng-if="sortableItemLists.lists[0].isEmpty()" class="pp-data-empty-hint">\n\t\t<span q-translation="Common.NoData"></span>\n\t</div>\n\t<ul class="pp-expandable-list pp-data-list">\n\t\t<li ng-repeat="item in sortableItemLists.lists[0].items track by item.id" ng-include src="item.templateSrc" ng-class="item.classList"></li>\n\t</ul>\n</div>'},wzaI:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-button-component wms-setup-button">\n    <button class="lui-button" ng-click="openDialog();" ng-model="value" ng-disabled="disabled">{{label}}</button>\n</div>\n';var r=i("mWu2");var o='<div class="lui-modal-background"></div>\n<div class="lui-dialog wms-setup-dialog-wrapper" >\n    <div class="lui-dialog__header">\n        <span q-translation="geo.properties.wms.setup"></span>\n        <button\n            class="lui-fade-button wms-setup-toolbar-buttons"\n            ng-click="$event.preventDefault(); close()"\n            data-name="close">\n            <span class="lui-fade-button__icon lui-icon lui-icon--close" q-title-translation="Common.Close"></span>\n        </button>\t\n    </div>\n    <div class="lui-dialog__body">\n        <div>\n            <span class="wms-setup-title" q-translation="geo.properties.wms.step1"></span>\n            <div class="wms-setup-url">\n                <label class="lui-label wms-setup-subtitle" q-translation="geo.properties.wms.serverUrl"></label>\n                <input class="lui-input" value="{{url}}" ng-model="url" ng-change="reLoad()" ng-disabled="status.code == \'loading\'">\n            </div>\n            <div class="wms-setup-group">\n                <div class="wms-setup-group-item">\n                    <label class="lui-checkbox">\n                        <input class="lui-checkbox__input" ng-model="viaServer" ng-change="reLoad()" type="checkbox"/>\n                        <div class="lui-checkbox__check-wrap">\n                            <span class="lui-checkbox__check"></span>\n                            <span class="lui-checkbox__check-text" q-translation="geo.properties.wms.viaServer"></span>\n                        </div>\n                    </label>\n                </div>\n            </div>\n            <div class="wms-setup-group">\n                <div class="wms-setup-dropdown wms-setup-group-item">\n                    <label class="lui-label wms-setup-subtitle" q-translation="geo.properties.wms.version"></label>\n                    <select class="lui-select" ng-model="selectedVersion" ng-change="reLoad()" ng-disabled="status.code == \'loading\' || url.length == 0">\n                        <option ng-repeat="version in versions">{{version}}</option>\n                    </select>\n                </div>\n                <div class="wms-setup-group-item">\n                    <button class="lui-button wms-setup-load lui-button--success" ng-click="loadWms()" ng-disabled="status.code == \'loading\' || url.length == 0" q-translation="geo.properties.wms.loadWms"></button>\n                </div>\n            </div>\n            <div class="wms-setup-group-status">\n                <label class="lui-label wms-setup-status" q-translation="geo.properties.wms.status"></label>\n                <div class="wms-setup-group-status-msg">\n                    <span class="lui-icon  lui-icon--tick ok-icon" aria-hidden="true" ng-show="status.code == \'success\'"></span>\n                    <span class="lui-icon  lui-icon--info error-icon" aria-hidden="true" ng-show="status.code == \'error\'"></span>\n                    <div ng-model="status">{{status.message}}</div>\n                </div>\n            </div>\n        </div>\n        <div class="wms-setup-border"></div>\n        <div class="step-two-wrapper">\n            <span class="wms-setup-title" q-translation="geo.properties.wms.step2"></span>\n            <div class="wms-setup-loadingscreen" ng-show="!hasWmsLoaded">\n                <label q-translation="geo.properties.wms.status.step1" ng-show="status.code != \'loading\'"></label>\n                <div class="spinner" ng-show="status.code == \'loading\'">\n                    <qv-spinner show="status.code == \'loading\'"></qv-spinner>\n                </div>\n            </div>\n            <div ng-show="hasWmsLoaded">\n                <div class="wms-setup-group">\n                    <div class="wms-setup-group-item">\n                        <label class="lui-label wms-setup-subtitle" q-translation="geo.properties.wms.crs"></label>\n                        <select class="lui-select wms-setup-dropdown" ng-model="selectedCrs">\n                            <option ng-repeat="referenceSystem in referenceSystems">{{referenceSystem}}</option>\n                        </select>\n                    </div>\n                    <div class="wms-setup-group-item wms-setup-transparent">\n                        <label class="lui-checkbox">\n                            <input class="lui-checkbox__input" ng-model="transparent" type="checkbox"/>\n                            <div class="lui-checkbox__check-wrap">\n                                <span class="lui-checkbox__check"></span>\n                                <span class="lui-checkbox__check-text" q-translation="geo.properties.wms.transparent"></span>\n                            </div>\n                        </label>\n                    </div>\n                </div>\n                <div class="wms-setup-group">\n                    <div class="wms-setup-group-item">\n                        <label class="lui-label wms-setup-subtitle" q-translation="geo.properties.wms.format"></label>\n                        <select class="lui-select wms-setup-dropdown" ng-model="selectedFormat">\n                            <option ng-repeat="format in formats">{{format}}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="wms-setup-layers">\n                    <label class="lui-label wms-setup-subtitle" q-translation="properties.layers"></label>\n                    <label class="lui-checkbox wms-setup-layer" ng-repeat="layer in layers">\n                        <input class="lui-checkbox__input" type="checkbox" aria-label="Label" ng-model="layer.selected" checked />\n                        <div class="lui-checkbox__check-wrap">\n                            <span class="lui-checkbox__check"></span>\n                            <span class="lui-checkbox__check-text">{{layer.title}}</span>\n                        </div>\n                    </label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="lui-dialog__footer">\n        <button class="lui-button close-button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel" data-tid="close-btn"></button>\n\t\t<button class="lui-button close-button lui-button--success" ng-disabled="status.code == \'loading\' || url.length == 0" ng-click="$event.preventDefault(); save()" name="confirmButton" q-translation="Common.Save" data-tid="create-btn"></button>\n    </div>\n</div>';var s=i("z4LI");var l=i("6uJb");var c=i("4nJ1");var u={template:o,controller:["$scope",function(t){var e=c["a"].extend(true,{},t.props.wms);if(Object.keys(e).length>0){t.url=e.url;t.viaServer=e.viaServer;t.selectedCrs=e.selectedCrs;t.selectedFormat=e.selectedFormat;t.hasWmsLoaded=e.hasWmsLoaded;t.hasCapabilities=e.hasWmsLoaded;t.transparent=e.capabilities.transparent;t.referenceSystems=e.capabilities.crs;t.formats=e.capabilities.formats;t.layers=e.capabilities.layers}t.selectedVersion=Object.keys(e).length>0?e.version:"1.1.0";t.versions=["1.1.0","1.1.1","1.3.0"];t.status={message:l["default"].get("geo.properties.wms.status.idle"),code:"idle"};t.cancel=function(){t.destroyComponent()};t.close=function(){t.destroyComponent()};t.$on("$destroy",(function(){s["a"].StateChanged.unbind(t.cancel)}));t.loadWms=h.bind(t);t.save=v.bind(t);t.updateStatus=g.bind(t);t.reLoad=p.bind(t);t.formatTxt=f}]};function d(t){var e={props:t.properties,handler:t.handler,model:t.model,getCapabilities:t.getCapabilities};var i=r["default"].getService("luiDialog").show({template:u.template,controller:u.controller,input:e,dock:"top",closeOnOutside:false,showArrow:false});return i}function p(){this.updateStatus("idle");if(null==this.props.wms)return;this.selectedVersion!==this.props.wms.version||this.url!==this.props.wms.url||this.viaServer!==this.props.wms.viaServer?this.hasWmsLoaded=false:this.hasCapabilities&&(this.hasWmsLoaded=true)}function f(t){var e=/image\/|IMAGE\//;for(var i=0;i<t.length;i++){var n=t[i];t[i]=n.replace(e,"").toUpperCase()}return t}function h(){var t=this;this.hasWmsLoaded=false;this.updateStatus("loading");this.getCapabilities(this.url,this.selectedVersion,this.viaServer).then((function(e){t.layers=[];t.transparent=true;t.hasWmsLoaded=true;t.hasCapabilities=true;t.formats=t.formatTxt(e.formats);t.updateStatus("success");t.referenceSystems=e.srs;for(var i=0;i<e.layers.length;i++){var n=e.layers[i];t.layers.push({name:n.name,title:n.title,selected:false})}var a=RegExp("".concat(t.selectedFormat));a.test(JSON.stringify(t.formats))||(t.selectedFormat=t.formats[0]);t.layers[0].selected=true}),(function(){t.updateStatus("error");t.hasWmsLoaded=false}))}function v(){null==this.props.wms&&(this.props.wms={url:"",viaServer:false,version:"",hasWmsLoaded:false,selectedCrs:"",selectedFormat:"",capabilities:{crs:[],layers:[],formats:[],transparent:true}});var t=this.props.wms;t.url=this.url;t.viaServer=this.viaServer;t.version=this.selectedVersion;t.hasWmsLoaded=this.hasWmsLoaded;if(this.hasWmsLoaded){t.selectedCrs=this.selectedCrs;t.selectedFormat=this.selectedFormat;t.capabilities.crs=this.referenceSystems;t.capabilities.layers=this.layers;t.capabilities.formats=this.formats;t.capabilities.transparent=this.transparent}!this.props.title&&t&&t.url&&(this.props.title=t.url.replace(/^[^]*\/\/|\/.*$/g,""));for(var e in this.handler.properties.gaLayers){var i=this.handler.properties.gaLayers[e];if(i.cId===this.props.cId){this.handler.properties.gaLayers[e]=this.props;break}}this.handler.updateGlobalChangeListeners();this.model.setProperties(this.handler.properties);this.destroyComponent()}function g(t){this.status.code=t;switch(t){case"loading":this.status.message=l["default"].get("geo.properties.wms.status.loading");break;case"success":this.status.message=l["default"].get("geo.properties.wms.status.success");break;case"error":this.status.message=l["default"].get("geo.properties.wms.status.error");break;case"idle":this.status.message=l["default"].get("geo.properties.wms.status.idle");break;default:this.status.message=l["default"].get("geo.properties.wms.status.idle");this.status.code="idle";break}}var m={show:d,_reLoad:p,_loadWms:h,_save:v,_updateStatus:g,_formatTxt:f};var b={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineCustom(t,t.args.handler,"getCapabilities");Object.defineProperty(t,"disabled",{get:t.definition.disabled});t.openDialog=function(){var t={properties:this.args.properties,handler:this.args.handler,model:this.args.model,getCapabilities:this.getCapabilities};var e=m.show(t);e.closed.then((function(){e=null}))}}]};var y=e["default"]=b},xN6f:function(t,e,i){"use strict";var n=i("NFdj");var a=i.n(n);var r=i("mWu2");var o=document.createElement("textarea");o.style.position="absolute";o.style.left="-9999px";o.setAttribute("readonly","");var s=r["default"].getService("$window");function l(t){o.value=t;document.body.appendChild(o);o.select();o.setSelectionRange(0,o.value.length);document.execCommand("copy");document.body.removeChild(o)}var c=a.a.element(s.document.body);var u=a.a.element("<textarea/>");u.css({position:"fixed",opacity:"0"});var d=function t(e){u.val(e);c.append(u);u[0].select();try{var i=document.execCommand("copy");if(!i)throw i}catch(t){window.prompt("Copy to clipboard: Ctrl+C, Enter",e)}u.remove()};r["default"].directive("qvClickCopy",(function(){return{restrict:"A",link:function t(e,i,n){i.bind("click",(function(){d(n.qvClickCopy)}))}}}));e["a"]={copyToClipboard:l}},xxN6:function(t,e,i){"use strict";i.r(e);var n=i("4nJ1");var a=i("GG1N");var r=i("2Hli");var o=i("ESef");var s=i("3I2r");var l=i("CyFZ");var c=i("qIEf");var u=i.n(c);var d={blur:f,clickedOnDropdownButton:h};var p=d;function f(t){u()(t).blur()}function h(t){return t&&!u()(t.target).closest(".pp-sortbyelement-dd-button").length>0}var v='<div class="pp-component pp-string-component pp-sortbyelement-component" ng-if="visible" tcl="sort-by-element">\n\t\n\t<div class="value">\n\t\t<div class="lui-input-group">\n\n\t\t\t\x3c!-- Input for element --\x3e\n\t\t\t<input class="lui-input lui-input-group__item lui-input-group__input" \n\t\t\t\ttype="text"\n\t\t\t\ttitle="{{selectedElement.label}}"\n\t\t\t\tspellcheck="false"\n\t\t\t\tmaxlength="{{maxLength}}" \n\t\t\t\tng-if="isLinked" \n\t\t\t\tng-disabled="true"\n\t\t\t\tng-model="selectedElement.label" />\n\n\t\t\t\x3c!-- Input for expression --\x3e\n\t\t\t<input class="lui-input lui-input-group__item lui-input-group__input pp-sortbyelement-expression" \n\t\t\t\ttype="text"\n\t\t\t\tspellcheck="false"\n\t\t\t\tmaxlength="{{maxLength}}"\n\t\t\t\tng-if="!isLinked"\n\t\t\t\tng-readonly="isLocked()"\n\t\t\t\tng-class="{ \'lui-invalid\': !isExpressionValid, \'force-editor\': shouldForceEditInExpressionEditor() }" \n\t\t\t\tng-model="expression" \n\t\t\t\tqv-enter="onExpressionEnter($event)" \n\t\t\t\tqva-blur="onExpressionBlur()"\n\t\t\t\tng-keyup="onKeyUp($event)"\n\t\t\t\tqva-activate="onExpressionActivate($event)" />\n\n\t\t\t\x3c!-- Button for unlinking --\x3e\n\t\t\t<button class="lui-button lui-input-group__item lui-input-group__button" \n\t\t\t\tng-if="isLinked"\n\t\t\t\tq-title-translation="properties.boxplot.sorting.unlink"\n\t\t\t\tqva-activate="unlink()">\t\t\t\t\n\n\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--link"></span>\n\t\t\t</button>\n\n\t\t\t\x3c!-- Button for opening expression editor --\x3e\n\t\t\t<button class="lui-button lui-input-group__item lui-input-group__button" \n\t\t\t\tng-if="!isLinked" \n\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor"\n\t\t\t\tqva-activate="openExpressionDialog()">\n\n\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--expression edit-expression active"></span>\n\t\t\t</button>\n\n\t\t\t\x3c!-- Button for opening elements popover --\x3e\n\t\t\t<button class="lui-button lui-input-group__item lui-input-group__button pp-sortbyelement-dd-button" \n\t\t\t\tng-class="{\'lui-active\': isElementsPopoverOpen() }"\n\t\t\t\tq-title-translation="properties.boxplot.sorting.selectElement"\n\t\t\t\tqva-activate="openElementsPopover($event)">\n\n\t\t\t\t<span class="lui-caret"></span>\n\t\t\t</button>\n\n\t\t</div>\n\t</div>\n\n\t<div ng-if="shouldShowEditInExpressionEditorMessage()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n\t\n</div>';var g='<lui-popover class="add-popover-wrapper pp-sortbyelement-popover">\n\t<div class="lui-popover__body lui-popover__body lui-nopad">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item" \n\t\t\t\tng-repeat="element in elements" \n\t\t\t\tng-class="{ \'lui-active\': element === getSelectedElement() }"\n\t\t\t\tng-click="onElementChanged(element)">\n\n\t\t\t\t<span class="lui-list__text lui-list__action">{{element.label}}</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>';function m(t){m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return m(t)}var b={template:v,controller:["$scope","luiPopover",x]};var y=e["default"]=b;function x(t,e){R(t);var i;var c=null;var u=27;var d;var f={expressionRef:t.definition.expressionRef,elementRef:t.definition.elementRef,getElements:C()};a["a"].defineChange(t,t.args.handler);a["a"].defineVisible(t,t.args.handler);Object.defineProperty(t,"expression",{get:function e(){var i=r["a"].getValue(t.data,f.expressionRef,"");i&&"object"===m(i)&&(i=i.qValueExpression.qExpr);return i},set:function e(i){var n={qValueExpression:{qExpr:i}};r["a"].setValue(t.data,f.expressionRef,n)}});t.selectedElement=void 0;t.isLinked=true;t.isExpressionValid=true;Object.defineProperty(t,"MAX_LENGTH",{value:o["a"].name,writable:false,configurable:false});t.unlink=M;t.onExpressionBlur=S;t.onKeyUp=D;t.onExpressionActivate=I;t.onExpressionEnter=k;t.openElementsPopover=L;t.isElementsPopoverOpen=T;t.openExpressionDialog=A;t.shouldForceEditInExpressionEditor=P;t.shouldShowEditInExpressionEditorMessage=O;var h=new s["a"].ExpressionValidator(t.args.app);var v=function e(i){t.isExpressionValid=i.valid};h.Update.bind(v);var b=new s["a"].ExpressionValidator(t.args.app);var y=function e(i){t.isExpressionValid=i.valid;t.change()};b.Update.bind(y);t.$on("$destroy",(function(){h.Update.unbind(v);b.Update.unbind(y)}));t.$on("datachanged",x);_();function x(e,i){t.data=i;_()}function _(){var e=f.getElements();function a(){var e=n["a"].getValue(t.data,f.elementRef);if(!e){d=t.expression;t.isLinked=false;h.validate(t.expression);return}var i=w(e);i||N("No matching element found");q(i)}if("function"===typeof e.then)e.then((function(t){i=t;a()}));else{i=e;a()}}function C(){var e="function"===typeof t.definition.elements;if(e)return function e(){return t.definition.elements(t.args)};return function e(){return t.definition.elements}}function w(t){var e=i.filter((function(e){return e.id===t}));return e.length>0?e[0]:null}function q(e){t.selectedElement=e;t.expression=e.exp;d=e.exp;t.isLinked=true}function M(){t.isLinked=false;t.selectedElement=void 0;n["a"].setValue(t.data,f.elementRef,void 0);t.change()}function S(){if(!t.expression){t.expression=d;return}b.validate(t.expression);d=t.expression}function D(e){if(e.keyCode!==u)return;t.expression=d;p.blur(e.target)}function I(e){if(!P())return;p.blur(e.target);t.openExpressionDialog()}function k(t){p.blur(t.target)}function L(a){if(T()){E();return}var r={template:g,input:{elements:i,getSelectedElement:function e(){return t.selectedElement},onElementChanged:function e(i){q(i);n["a"].setValue(t.data,f.elementRef,i.id);t.change();E()}},alignTo:a.target,dock:"bottom",closeOnResize:true,closeOnOutside:true};c=e.show(r);c.closing.then((function(t){p.clickedOnDropdownButton(t)&&(c=null)}))}function T(){return!!c}function E(){if(!T())return;c.close();c=null}function A(){var e={expr:t.expression,title:t.expression?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"};l["a"].show(e).then((function(e){t.expression=e;t.change()}))}function P(){return t.expression.length>t.MAX_LENGTH}function O(){return!t.isLinked&&P()}function R(t){t.args||V("args");t.args.handler||V("args.handler");t.data||V("data");t.definition||V("definition");t.definition.expressionRef||V("definition.expressionRef");t.definition.elementRef||V("definition.elementRef");t.definition.elements||V("definition.elements")}function V(t){N("Required data missing: $scope.".concat(t))}function N(t){throw new Error("Component: SortByElement - ".concat(t))}}},yE3b:function(t,e,i){"use strict";i.r(e);var n=i("GG1N");var a='<div class="pp-component pp-align-matrix" ng-if="visible" tcl="align-matrix">\n\t<div class="label" ng-if="label" title="{{label}}">{{label}}</div>\n\t<div class="matrix">\n\t\t<div ng-repeat="position in positions" ng-class="{ \'disabled\': !isPosEnabled(position) }" >\n\t\t\t<input ng-disabled="!isPosEnabled(position)" id="{{name}}-{{$index}}" type="radio" name="{{name}}" value="{{position}}" ng-model="value" ng-change="update()" />\n\t\t\t<label  for="{{name}}-{{$index}}"></label>\n\t\t</div>\n\t</div>\n</div>';var r=i("2Hli");var o={template:a,controller:["$scope",function(t){var e=function e(){return t.data};n["a"].defineLabel(t,t.definition,e,t.args.handler);n["a"].defineVisible(t,t.args.handler);n["a"].defineChange(t,t.args.handler);n["a"].defineValue(t,t.definition,e);n["a"].defineCustom(t,t.definition,"currentSize");t.name="unique".concat(+new Date);t.positions=["topLeft","centerLeft","bottomLeft","topCenter","centerCenter","bottomCenter","topRight","centerRight","bottomRight"];var i={fitWidth:["centerLeft","centerCenter","centerRight"],fitHeight:["topCenter","centerCenter","bottomCenter"],alwaysFit:["centerLeft","centerCenter","centerRight","topCenter","bottomCenter"]};t.isPosEnabled=function(e){return!i[t.currentSize]||-1!==i[t.currentSize].indexOf(e)};t.update=function(){t.$emit("saveProperties")};t.$watch("currentSize",(function(e){if(i[e]&&-1===i[e].indexOf(t.value)){r["a"].setValue(t.data,t.definition.ref,"centerCenter");t.$emit("saveProperties")}}))}]};var s=e["default"]=o},zGse:function(t,e,i){"use strict";var n=i("6uJb");function a(t,e){2===e.qHyperCubeDef.qInterColumnSortOrder.length?e.qHyperCubeDef.qInterColumnSortOrder=[1,0]:3===e.qHyperCubeDef.qInterColumnSortOrder.length&&(e.qHyperCubeDef.qInterColumnSortOrder=[1,2,0])}function r(t,e){var i=e.getDimensions();i.length>1&&t.color&&(t.color.point.persistent=true)}var o={measures:{min:1,max:1,description:function t(e){var i="horizontal"===e.orientation?"properties.xAxis":"properties.yAxis";return n["default"].get(i)},add:function t(){},move:function t(){},remove:function t(){}},dimensions:{min:1,max:2,description:function t(e,i){var a;a=0===i?"Visualizations.Descriptions.Point":"horizontal"===e.orientation?"properties.yAxis":"properties.xAxis";return n["default"].get(a)},add:function t(e,i,n){a(e,i);r(i,n)},move:function t(e,i,n){a(e,i);r(i,n)},remove:function t(e,i,n){a(e,i);r(i,n)}}};e["a"]=o},zr60:function(t,e,i){"use strict";var n=i("4qR/");var a=i("uqsp");var r=i("3ex9");var o=i("obmW");var s=i("acVu");function l(t){var e=Object(s["b"])("PP_ADD_MASTER");var i=r["a"].permissionToCreate(t.type||"dimension");var n=t.data.qLibraryId||t.data.qListObjectDef&&t.data.qListObjectDef.qLibraryId||t.data.qDef&&t.data.qDef.base&&t.data.qDef.base.qLibraryId;return e&&i&&!n}function c(t,e,i){var a={fieldName:t.qFieldDefs[0]};if(i)if("string"===typeof i)a.title=i;else{var r=i.qStringExpression.qExpr;r="="!==r.charAt(0)?"=".concat(r):r;a.title=r;a.labelExpression=r}else if(t.qLabelExpression){a.title=t.qLabelExpression;a.labelExpression=t.qLabelExpression}else a.title=t.qFieldLabels&&t.qFieldLabels[0]?t.qFieldLabels[0]:a.fieldName;var o=new n["a"];o.add(a,e)}function u(t,e,i){var n={field:t.base&&t.base.qDef||t.qDef,formatting:{qNumFormat:t.qNumFormat||{},isCustomFormatted:t.isCustomFormatted,numFormatFromTemplate:t.numFormatFromTemplate}};if(t.qLabelExpression){n.title=i&&i.titleOverride?i.titleOverride:t.qLabelExpression;n.labelExpression=t.qLabelExpression}else n.title=t.qLabel||n.field;a["a"].addMeasure(n,null,e)}function d(t,e,i,n){var a=void 0!==e.sourceIndex?e.sourceIndex:e.index;var r=t.boxplotDef?t.boxplotDef.qHyperCubeDef:t.qHyperCubeDef;var l=!(r[n][a]&&r[n][a].qDef.cId===e.id);l&&(r=r.qLayoutExclude.qHyperCubeDef);var c=r[n][a];if(c.qDef.base){c.qDef.base.qLibraryId=i;c.qDef.base.qDef=""}else{c.qLibraryId=i;"qDimensions"===n?c.qDef.qFieldDefs=[]:c.qDef.qDef=""}"qDimensions"!==n&&Object(s["b"])("MASTER_MEASURE_FORMAT")&&o["a"].useMasterNumberFormat(c.qDef)}e["a"]={allowSaveLibrary:l,saveDimensionAsLibrary:c,saveMeasureAsLibrary:u,setNewProperties:d}}}]);