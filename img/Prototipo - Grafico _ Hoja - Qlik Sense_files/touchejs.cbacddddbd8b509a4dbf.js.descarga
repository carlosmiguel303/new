/*! For license information please see touchejs.cbacddddbd8b509a4dbf.js.LICENSE.txt */
/*!
 * sense-client@7.144.6
 * 
 * Copyright(C) 2021 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[11],{Z9ZH:function(t,e,i){var n,s;(function(i,r){void 0===i&&void 0!==window&&(i=window);true;!(n=[],s=function(){return i["Touche"]=r()}.apply(e,n),void 0!==s&&(t.exports=s))})(this,(function(){(function(t){"use strict";t.augment=function(t){var e=this.prototype,i=Object.create(e),n=t.call(i,this,e);"function"!==typeof n&&(n=function(){});i.constructor=n;n.prototype=i;return n}})(Function.prototype);(function(){"use strict";var t;t=window.Touche=function(e){if("undefined"===typeof e)throw new Error("No element sent into Touche()");if(!(this instanceof t))return new t(e);this.elem=e;this.gestureHandler=t.cache.get(e)};t.prototype.on=function(e,i){t.prototype[e].call(this,i);return this};t.prototype.off=function(e,i){this.gestureHandler.gestures.filter((function(t){return e&&"*"!==e&&i?t.type===e&&t.id===i:e&&"*"===e&&i?t.id===i:!e||t.type===e})).forEach((function(t){t.off(this.elem);this.gestureHandler.removeGesture(t)}),this);0===this.gestureHandler.gestures.length&&t.cache.remove(this.elem);return this};t._handlers=[];t._gestures={};t.gestures={add:function(e,i){t._gestures[e]=i;t.prototype[e]=function(n){var s,r=new t.Binder(n);s=new i(this.gestureHandler,e,r);this.gestureHandler.addGesture(s);s.on(this.elem);return this}},get:function(e){return t._gestures[e]},remove:function(e){if(t._gestures[e]){t.cache.data.forEach((function(t){t.context.gestures.filter((function(t){return t.type===e})).forEach((function(e){t.context.removeGesture(e)}))}));delete t.prototype[e];delete t._gestures[e]}}}})();(function(t,e,i){"use strict";var n=9,s=window.MSPointerEvent&&window.navigator.msPointerEnabled||window.PointerEvent&&window.navigator.pointerEnabled;t.utils={noop:function(){},getSortKey:function(){return 5*++n},isSVG:function(t){return 1===t.nodeType&&"http://www.w3.org/2000/svg"===t.namespaceURI},closest:function(t,e){var i=function(t,e){return t.toUpperCase()===e.toUpperCase()},n=t.parentNode;if(!n)return null;if(i(t.tagName,e))return t;if(i(n.tagName,e))return n;while(n&&n.parentNode){n=n.parentNode;if(i(n.tagName,e))return n}return null},transformPoint:function(e,i){var n,s,r;if(e&&t.utils.isSVG(e)){n=t.utils.closest(e,"svg");if(n){s=n.createSVGPoint();s.x=i.x;s.y=i.y;try{r=e.getScreenCTM().inverse();s=s.matrixTransform(r)}catch(t){}return new t.Point(s.x,s.y)}}return i},getRect:function(e){var i,n=window,s=n.document,r=s.body,o,a;if(t.utils.isSVG(e)){a=e.getBBox||e.getBoundingClientRect;i=a.call(e);return new t.Rect((i.x||i.left||0)+(n.scrollX||s.documentElement.scrollLeft),(i.y||i.top||0)+(n.scrollY||s.documentElement.scrollTop),i.width,i.height)}o=n!==e&&s!==e&&e.getBoundingClientRect?e:r;i=o.getBoundingClientRect();return new t.Rect(i.left+(n.scrollX||s.documentElement.scrollLeft),i.top+(n.scrollY||s.documentElement.scrollTop),i.width,i.height)},touch:"ontouchstart"in window||window.navigator.msMaxTouchPoints>0||window.navigator.maxTouchPoints>0,pointerEnabled:s,msPointer:s,getFlowType:function(t){switch(t){case"mousedown":case"mousemove":case"mouseup":return"mouse";case"touchstart":case"touchmove":case"touchend":case"touchcancel":return"touch";case"MSPointerDown":case"MSPointerMove":case"MSPointerUp":case"MSPointerCancel":return"MSPointer";case"pointerdown":case"pointermove":case"pointerup":case"pointercancel":return"pointer";default:throw"Not implemented!"}},getFlowTypes:function(t){switch(t){case"mousedown":return["mouse"];case"touchstart":return["touch"];case"MSPointerDown":return["MSPointer"];case"pointerdown":return["pointer"];default:return["mouse","touch","MSPointer","pointer"]}},getEvent:function(t,e){switch(t){case"update":switch(e){case"mouse":return"mousemove";case"touch":return"touchmove";case"MSPointer":return"MSPointerMove";case"pointer":return"pointermove"}break;case"end":switch(e){case"mouse":return"mouseup";case"touch":return"touchend";case"MSPointer":return"MSPointerUp";case"pointer":return"pointerup"}break;case"cancel":switch(e){case"touch":return"touchcancel";case"MSPointer":return"MSPointerCancel";case"pointer":return"pointercancel"}break;default:throw"Not implemented!"}},getEvents:function(){if(this.pointerEnabled)return{start:["MSPointerDown","pointerdown"],update:["MSPointerMove","pointermove"],end:["MSPointerUp","pointerup"],cancel:["MSPointerCancel","pointercancel"]};if(this.touch)return{start:["mousedown","touchstart"],update:["mousemove","touchmove"],end:["mouseup","touchend"],cancel:["touchcancel"]};return{start:["mousedown"],update:["mousemove"],end:["mouseup"],cancel:[]}},logger:function(t,e){if(!t.touches)return;e=t[e||"touches"];var i="",n=e.length;i+="touches: "+n;i+=e.map((function(t){return"x:"+t.pageX+", "+t.pageY})).join(" ");window.console.log(i)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isArray:function(t){return Array.isArray(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},getAngle:function(t,n){var s=t.x-n.x,r=t.y-n.y,o=e(r,s),a=180*o/i;a=a<0?360+a:a;return a},getDeltaAngle:function(t,n){var s=n.x-t.x,r=n.y-t.y,o=e(r,s),a=180*o/i;return a},getDirection:function(t){var e="invalid";t>=0&&t<45||t>=315&&t<=360?e="right":t>=45&&t<135?e="down":t>=135&&t<225?e="left":t>=225&&t<315&&(e="up");return e},getVelocity:function(t,e,i,n){var s=t.distanceTo(e),r=n-i;if(r<=0)return 0;return 26.67*s/r},isMouse:function(e){return t.utils.pointerEnabled&&(e.pointerType===e.MSPOINTER_TYPE_MOUSE||"mouse"===e.pointerType)||e.type.indexOf("mouse")>=0}}})(window.Touche,Math.atan2,Math.PI);(function(t){"use strict";t.cache={data:[],has:function(t){return this.data.filter((function(e){return e.elem===t}))},get:function(e){var i=this.has(e);return 0===i.length?this.data[this.data.push({elem:e,context:new t.GestureHandler(e)})-1].context:i[0].context},remove:function(t){var e=this.has(t),i;if(e.length){i=this.data.indexOf(e[0]);this.data.splice(i,1)}}}})(window.Touche);(function(t,e){t.FlowHandler=Object.augment((function(){this.activate=function(){t.utils.getEvents().start.forEach((function(t){this.on(this.element,t)}),this)};this.deactivate=function(){t.utils.getEvents().start.forEach((function(t){this.off(this.element,t)}),this);this.bindDoc(false);this.resetFlowTypes();t.cache.remove(this.element)};this.on=function(t,e){t.addEventListener(e,this,false)};this.off=function(t,e){t.removeEventListener(e,this,false)};this.bindDoc=function(i,n){var s=t.utils.getFlowTypes(n),r;s.forEach((function(n){r=[t.utils.getEvent("update",n),t.utils.getEvent("end",n),t.utils.getEvent("cancel",n)];r.forEach((function(t){t&&this[i?"on":"off"](e,t)}),this)}),this)};this.handleEvent=function(t){switch(t.type){case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":this.onStart(t);break;case"mousemove":case"touchmove":case"MSPointerMove":case"pointermove":this.onUpdate(t);break;case"mouseup":case"touchend":case"MSPointerUp":case"pointerup":this.onEnd(t);break;case"touchcancel":case"MSPointerCancel":case"pointercancel":this.onCancel(t);break}};this.onStart=function(){};this.start=function(){};this.onUpdate=function(){};this.update=function(){};this.onEnd=function(){};this.end=function(){};this.onCancel=function(){};this.cancel=function(){};function i(t){this.element=t}return i}))})(window.Touche,window.document);(function(t){"use strict";var e=[],i;function n(n){e.length=0;clearTimeout(i);n.forEach((function(i){e.push(new t.Point(i.x,i.y))}));i=setTimeout((function(){e.length=0}),1500)}t.GestureHandler=t.FlowHandler.augment((function(i,s){this.reset=function(t){this.gestures.forEach((function(t){t.reset()}));this.data[t]={};this.data[t].points=[];this.data[t].pointerIds=[];this.data[t].pagePoints=[];this.data[t].started=false;this.data[t].ended=false;this.data[t].relatedTarget=null};this.trigger=function(e,i,n){this.sortedGestures.map((function(t){return t.context})).forEach((function(s){s.paused&&t.utils.isFunction(s[e])&&!s.cancelled?s.addPausedCallback(e,i,n):t.utils.isFunction(s[e])&&!s.cancelled&&s[e](i,n)}),this)};this.play=function(t){t=t||false;this.sortedGestures.map((function(t){return t.context})).filter((function(t){return t.paused})).forEach((function(e){e.play(t)}))};this.pause=function(t,e){this.sortedGestures.map((function(t){return t.context})).filter((function(i){return t?e!==i&&t===i.type:e!==i})).forEach((function(t){t.pause()}))};this.addGesture=function(t){this.gestures.push(t);this.sortGestures();1===this.gestures.length&&this.activate()};this.removeGesture=function(t){this.gestures=this.gestures.filter((function(e){return e!==t}));this.sortGestures();0===this.gestures.length&&this.deactivate()};this.removeGestures=function(t){this.gestures.filter((function(e){return!t||e.type===t})).forEach((function(t){this.removeGesture(t)}),this)};this.cancelGesture=function(t){if(!t.cancelled){t.cancel();t.cancelled=true}};this.cancelGestures=function(t){this.gestures.filter((function(e){return e.type!==t})).forEach((function(t){this.cancelGesture(t)}),this);return this};this.cancelAllGestures=function(){this.gestures.forEach((function(t){this.cancelGesture(t)}),this);this.resetFlowTypes(true)};this.sortGestures=function(){this.sortedGestures=this.gestures.map((function(t){return{key:t.sortKey,context:t}})).sort((function(t,e){return t.key-e.key}))};this.isOtherFlowStarted=function(e){var i=t.utils.getFlowTypes(),n=i.length,s;for(s=0;s<n;++s)if(e!==i[s]&&this.data[i[s]].started&&!this.data[i[s]].ended)return true;return false};this.resetFlowTypes=function(e){e=e||false;var i=t.utils.getFlowTypes(),n=i.length,s;for(s=0;s<n;++s)(this.data[i[s]].started&&this.data[i[s]].ended||e)&&this.reset(i[s])};this.isEmulatedMouseEvents=function(i){if(i.isSimulated)return false;var n=t.utils.getFlowType(i.type),s,r=new t.Point(i.pageX,i.pageY);if("mouse"!==n)return false;if(0===e.length)return false;s=e[0];if(r.distanceTo(s)<25)return true;return false};this.onStart=function(e){t._superHandler.addHandler(this,e)};this.start=function(e){var i=t.utils.getFlowType(e.type);if(this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e))return;t.utils.isMouse(e)&&!this.data[i].ended?this.cancelAllGestures():this.resetFlowTypes();this.data[i].relatedTarget=e.target;this.setPoints(e);this.trigger("start",e,this.data[i]);this.data[i].started=true};this.update=function(e){var i=t.utils.getFlowType(e.type);if(this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e))return;this.setPoints(e);this.trigger("update",e,this.data[i])};this.end=function(e){var i=t.utils.getFlowType(e.type);if(this.data.touch.started&&!this.data.touch.ended&&"mouseup"===e.type){this.trigger("end",e,this.data.touch);this.data.touch.ended=true;return}if(this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e))return;this.trigger("end",e,this.data[i]);this.data[i].ended=true};this.cancel=function(e){var i=t.utils.getFlowType(e.type);this.trigger("cancel",e,this.data[i]);this.data[i].ended=true};this.handleEvent=function(e){var i=t.utils.getFlowType(e.type);if(this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e))return;s.handleEvent.call(this,e)};this.setPoints=function(e,i){i=i||"touches";var s,r,o,a,h,u=t.utils.getFlowType(e.type);switch(u){case"mouse":this.data[u].points.length=1;this.data[u].pagePoints.length=1;this.data[u].points[0]=t.utils.transformPoint(this.data[u].relatedTarget,new t.Point(e.pageX,e.pageY));this.data[u].pagePoints[0]=new t.Point(e.pageX,e.pageY);break;case"touch":o=e[i];r=o.length;for(s=0;s<r;++s){this.data[u].points.length=r;this.data[u].pagePoints.length=r;this.data[u].points[s]=t.utils.transformPoint(this.data[u].relatedTarget,new t.Point(o[s].pageX,o[s].pageY));this.data[u].pagePoints[s]=new t.Point(o[s].pageX,o[s].pageY)}n(this.data[u].pagePoints);break;case"MSPointer":case"pointer":a=e.pointerId;h=this.data[u].pointerIds.indexOf(a);h<0&&(h=this.data[u].pointerIds.push(a)-1);r=this.data[u].pointerIds.length;this.data[u].points.length=r;this.data[u].pagePoints.length=r;this.data[u].points[h]=t.utils.transformPoint(this.data[u].relatedTarget,new t.Point(e.pageX,e.pageY));this.data[u].pagePoints[h]=new t.Point(e.pageX,e.pageY);n(this.data[u].pagePoints);break;default:throw"Not implemented!"}};function r(e){this.element=e;this.gestures=[];this.sortedGestures=[];this.data={};t.utils.getFlowTypes().forEach((function(t){this.data[t]={};this.data[t].points=[];this.data[t].pointerIds=[];this.data[t].pagePoints=[];this.data[t].started=false;this.data[t].ended=false;this.data[t].relatedTarget=null}),this)}return r}))})(window.Touche);(function(t,e){t.SuperHandler=t.FlowHandler.augment((function(){this.addHandler=function(t){var e=this._handlers.indexOf(t);-1===e&&this._handlers.push(t)};this.onStart=function(t){this._handlers.forEach((function(e){e.start(t)}));this.bindDoc(true,t.type)};this.onUpdate=function(t){this._handlers.forEach((function(e){e.update(t)}))};this.onEnd=function(e){this.bindDoc(false,e.type);this._handlers.forEach((function(t){t.end(e)}));this._handlers.length=0;t.WebkitHack.resetPrevent()};this.onCancel=function(t){this.bindDoc(false,t.type);this._handlers.forEach((function(e){e.cancel(t)}));this._handlers.length=0};this.onDragStart=function(){this._handlers.forEach((function(t){t.cancelAllGestures()}))};function e(){this._handlers=[];t.FlowHandler.apply(this,arguments)}return e}));t._superHandler=new t.SuperHandler(e);t._superHandler.activate();document.addEventListener("dragstart",(function(e){t._superHandler.onDragStart(e)}),false);t.preventGestures=function(e){var i,n=t._superHandler._handlers,s,r=n.length;for(i=r-1;i>=0;--i){s=n[i];if(s===e)break;s.cancelAllGestures();n.splice(i,1)}};t.WebkitHack=function(){var e=false;var i={handleEvent:function(t){if(t.defaultPrevented)return;e&&t.preventDefault()}};t.WebkitHack.prevent=function(){if(!t.utils.touch)return;e=true};t.WebkitHack.resetPrevent=function(){if(!t.utils.touch)return;e=false};window.addEventListener("touchmove",i,{passive:false,capture:false})};t.WebkitHack()})(window.Touche,window.document);(function(t){"use strict";t.Gesture=Object.augment((function(){this.on=t.utils.noop;this.off=t.utils.noop;this.start=t.utils.noop;this.update=t.utils.noop;this.end=t.utils.noop;this.cancel=function(){this.cancelled=true};this.pause=function(){this.paused=true};this.addPausedCallback=function(t,e,i){this.pausedCallbacks.push({action:t,event:e,data:i})};this.play=function(t){t&&!this.cancelled?this.pausedCallbacks.forEach((function(t){this[t.action](t.event,t.data)}),this):this.gestureHandler.cancelGesture(this);this.paused=false;this.pausedCallbacks=[];this.reset()};this.setOptions=function(){Object.keys(this.defaults).forEach((function(t){this.options[t]=this.binder.options&&"undefined"!==typeof this.binder.options[t]?this.binder.options[t]:this.defaults[t]}),this)};this.hasMoreTouches=function(t){this.countTouches=t.length>this.countTouches?t.length:this.countTouches;return this.countTouches>0&&this.countTouches>this.options.touches};this.hasNotEqualTouches=function(t){this.hasMoreTouches(t);return this.countTouches!==this.options.touches};this.hasEqualTouches=function(t){this.countTouches=t.length;return this.countTouches===this.options.touches};this.isValidMouseButton=function(e,i){if(!t.utils.isMouse(e))return true;var n=e.button,s=e.which,r;r=s||void 0===n?s:1&n?1:2&n?3:4&n?2:0;return t.utils.isArray(i)?i.some((function(t){return r===t})):r===i};this.reset=function(){if(this.paused)return;this.started=false;this.cancelled=false;this.countTouches=0};function e(e,i,n){this.gestureHandler=e;this.type=i;this.binder=n;this.started=false;this.cancelled=false;this.pausedCallbacks=[];this.paused=false;this.countTouches=0;this.options={};this.setOptions();this.sortKey=this.options.precedence||t.utils.getSortKey();this.id=this.binder.id}return e}))})(window.Touche);(function(t){"use strict";t.Binder=Object.augment((function(){this.start=t.utils.noop;this.update=t.utils.noop;this.end=t.utils.noop;this.cancel=t.utils.noop;this.bind=function(t){Object.keys(t||{}).forEach((function(e){this[e]=t[e]}),this)};function e(t){this.bind(t)}return e}))})(window.Touche);(function(t,e){"use strict";t.Point=function(t,e){this.x=t;this.y=e};t.Point.prototype.distanceTo=function(t){var i=this.x-t.x,n=this.y-t.y,s=e(i*i+n*n);return s};t.Point.prototype.normalize=function(){var i=e(this.x*this.x+this.y*this.y),n=this.x/i,s=this.y/i;return new t.Point(n,s)}})(window.Touche,Math.sqrt);(function(t){"use strict";t.Rect=function(t,e,i,n){this.x=t;this.y=e;this.width=i;this.height=n};t.Rect.prototype.pointInside=function(t,e){e=e||0;var i=this.x-e,n=this.y-e,s=this.x+this.width+e,r=this.y+this.height+e;return t.x>=i&&t.x<=s&&t.y>=n&&t.y<=r}})(window.Touche);(function(){var t=0;var e=["ms","moz","webkit","o"];for(var i=0;i<e.length&&!window.requestAnimationFrame;++i){window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime();var n=Math.max(0,16-(i-t));var s=window.setTimeout((function(){e(i+n)}),n);t=i+n;return s});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})();(function(t){"use strict";var e=t.Gesture.augment((function(e){this.defaults={areaThreshold:5,timeThreshold:400,touches:1,precedence:4,preventDefault:true,which:1};this.on=function(e){this.count=0;t(e).on("tap",{options:{areaThreshold:this.options.areaThreshold,preventDefault:this.options.preventDefault,touches:this.options.touches,which:this.options.which},id:this.id,end:this.end})};this.off=function(e){t(e).off("tap",this.id)};this.end=function(e,i){if(!this.isValidMouseButton(e,this.options.which)){this.cancel();return}var n=this;++n.count;if(1===n.count){n.startTime=+new Date;n.gestureHandler.pause(null,this);n.timerId=setTimeout((function(){n.gestureHandler.play(true);n.count=0}),n.options.timeThreshold+5)}else if(2===n.count){window.clearTimeout(n.timerId);n.endTime=+new Date;if(n.startTime+n.options.timeThreshold>=n.endTime){n.gestureHandler.play();n.binder.end.call(n,e,i)}n.count=0}if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.cancel=function(){this.cancelled=true;window.clearTimeout(this.timerId)};function i(){e.apply(this,arguments)}return i}));t.gestures.add("doubletap",e)})(window.Touche);(function(t){"use strict";var e=t.Gesture.augment((function(e){this.defaults={radiusThreshold:12,timeThreshold:800,precedence:5,preventDefault:true,touches:1,interval:25,which:1};this.preventDefaultForMSPointer=function(e){if(!t.utils.pointerEnabled)return;var i=window.document,n=["MSHoldVisual","MSGestureHold","contextmenu"],s=function(t){t.preventDefault()};n.forEach((function(t){i[e?"addEventListener":"removeEventListener"](t,s,false)}))};this.pause=function(){this.paused=true;window.clearTimeout(this.timerId)};this.start=function(e,i){if(!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.pagePoints)){this.cancel();return}this.rect=t.utils.getRect(this.gestureHandler.element);this.count=0;this.intervalSteps=this.options.timeThreshold/this.options.interval;this.startTime=+new Date;this.startPoint=i.pagePoints[0];var n=this;window.clearTimeout(n.timerId);n.timerId=window.setInterval((function(){++n.count;i.percentage=n.count/n.intervalSteps*100;if(1===n.count){n.started=true;n.binder.start.call(n,e,i)}else n.binder.update.call(n,e,i);n.count>=n.intervalSteps&&window.clearTimeout(n.timerId)}),this.options.interval);if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent();this.preventDefaultForMSPointer(true)}};this.update=function(e,i){(this.hasMoreTouches(i.pagePoints)||this.startPoint.distanceTo(i.pagePoints[0])>this.options.radiusThreshold)&&this.cancel();if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.end=function(e,i){window.clearTimeout(this.timerId);if(this.hasNotEqualTouches(i.pagePoints)){this.cancel();return}if(this.startPoint.distanceTo(i.pagePoints[0])<=this.options.radiusThreshold&&this.startTime+this.options.timeThreshold<=+new Date){this.gestureHandler.cancelGestures(this.type);this.binder.end.call(this,e,i)}else this.cancel();if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent();this.preventDefaultForMSPointer(false)}};this.cancel=function(){window.clearTimeout(this.timerId);if(this.cancelled)return;this.cancelled=true;this.started&&this.binder.cancel.call(this);this.options.preventDefault&&this.preventDefaultForMSPointer(false)};function i(){e.apply(this,arguments)}return i}));t.gestures.add("longtap",e)})(window.Touche);(function(t,e){"use strict";var i=t.Gesture.augment((function(i){this.defaults={touches:2,pinchThreshold:12,preventDefault:true};this.start=function(e,i){this.rect=t.utils.getRect(this.gestureHandler.element);this.pinch={start:{},current:{}};if(this.hasMoreTouches(i.pagePoints)){this.cancel();return}this.pinch.start.point1=i.pagePoints[0];this.pinch.start.point2=i.pagePoints[1];if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.update=function(i,n){if(this.hasMoreTouches(n.pagePoints)){this.cancel();return}if(this.hasEqualTouches(n.pagePoints))if(this.pinch.start.point2){n.centerPoint||(n.centerPoint=new t.Point((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2));this.pinch.current.point1=n.pagePoints[0];this.pinch.current.point2=n.pagePoints[1];this.startDistance=this.pinch.start.point2.distanceTo(this.pinch.start.point1);this.lastDistance=this.currentDistance;this.currentDistance=this.pinch.current.point2.distanceTo(this.pinch.current.point1);this.pinchLength=e(this.startDistance-this.currentDistance);this.scale=this.currentDistance/this.startDistance;n.scale=this.scale;n.delta=this.currentDistance-this.lastDistance;n.centerPoint.x=(this.pinch.current.point1.x+this.pinch.current.point2.x)/2;n.centerPoint.y=(this.pinch.current.point1.y+this.pinch.current.point2.y)/2;if(!this.started&&this.pinchLength>=this.options.pinchThreshold){this.started=true;this.gestureHandler.cancelGestures(this.type);this.binder.start.call(this,i,n)}else this.started&&this.binder.update.call(this,i,n)}else this.pinch.start.point2=n.pagePoints[1];if(this.options.preventDefault){i.preventDefault();t.WebkitHack.prevent()}};this.end=function(e,i){this.started&&this.binder.end.call(this,e,i);if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.cancel=function(){if(this.cancelled)return;this.cancelled=true;this.started&&this.binder.cancel.call(this.bindingObj)};function n(){i.apply(this,arguments)}return n}));t.gestures.add("pinch",i)})(window.Touche,Math.abs);(function(t){"use strict";var e=t.Gesture.augment((function(e){this.defaults={touches:2,rotationThreshold:12,preventDefault:true};this.start=function(e,i){this.rect=t.utils.getRect(this.gestureHandler.element);this.rotate={start:{},current:{}};if(this.hasMoreTouches(i.pagePoints)){this.cancel();return}this.rotate.start.point1=i.pagePoints[0];this.rotate.start.point2=i.pagePoints[1];if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.update=function(e,i){if(this.hasMoreTouches(i.pagePoints)){this.cancel();return}if(this.hasEqualTouches(i.pagePoints))if(this.rotate.start.point2){this.rotate.current.point1=i.pagePoints[0];this.rotate.current.point2=i.pagePoints[1];this.startAngle=t.utils.getDeltaAngle(this.rotate.start.point2,this.rotate.start.point1);this.currentAngle=t.utils.getDeltaAngle(this.rotate.current.point2,this.rotate.current.point1);this.rotation=this.currentAngle-this.startAngle;i.rotation=this.rotation;if(!this.started&&Math.abs(this.rotation)>=this.options.rotationThreshold){this.started=true;this.gestureHandler.cancelGestures(this.type);this.binder.start.call(this,e,i)}else this.started&&this.binder.update.call(this,e,i)}else this.rotate.start.point2=i.pagePoints[1];if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.end=function(e,i){this.started&&this.binder.end.call(this,e,i);if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.cancel=function(){if(this.cancelled)return;this.cancelled=true;this.started&&this.bindingObj.cancel.call(this.bindingObj)};function i(){e.apply(this,arguments)}return i}));t.gestures.add("rotate",e)})(window.Touche);(function(t,e){"use strict";var i=t.Gesture.augment((function(i){this.rAFId=-1;this.defaults={radiusThreshold:12,precedence:25,preventDefault:true,touches:1,which:1,useMomentum:false,inertia:.89};this.setSwipe=function(i){this.swipe.lastTime=this.swipe.currentTime;this.swipe.lastPoint=this.swipe.currentPoint;this.swipe.currentPoint=i;this.swipe.currentTime=+new Date;this.swipe.deltaX=this.swipe.currentPoint.x-this.swipe.startPoint.x;this.swipe.deltaY=this.swipe.currentPoint.y-this.swipe.startPoint.y;this.swipe.curDeltaX=this.swipe.currentPoint.x-this.swipe.lastPoint.x;this.swipe.curDeltaY=this.swipe.currentPoint.y-this.swipe.lastPoint.y;this.swipe.velocity=t.utils.getVelocity(this.swipe.startPoint,this.swipe.currentPoint,this.swipe.startTime,this.swipe.currentTime);this.swipe.momentum=t.utils.getVelocity(this.swipe.lastPoint,this.swipe.currentPoint,this.swipe.lastTime,this.swipe.currentTime);this.swipe.angle=t.utils.getAngle(this.swipe.startPoint,this.swipe.currentPoint);this.swipe.direction=t.utils.getDirection(this.swipe.angle);this.swipe.elementDistance="left"===this.swipe.direction||"right"===this.swipe.direction?this.rect.width:this.rect.height;this.swipe.distance="left"===this.swipe.direction||"right"===this.swipe.direction?e(this.swipe.deltaX):e(this.swipe.deltaY);this.swipe.percentage=this.swipe.distance/this.swipe.elementDistance*100};this.start=function(e,i){if(-1!==this.rAFId){this.binder.end.call(this,e,i);window.cancelAnimationFrame(this.rAFId);this.rAFId=-1;t.preventGestures(this.gestureHandler);this.gestureHandler.cancelAllGestures(this)}this.rect=t.utils.getRect(this.gestureHandler.element);this.swipe={inEndMomentum:false};this.countTouches=0;if(!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.pagePoints)){this.cancel();return}this.swipe.startPoint=this.swipe.currentPoint=i.pagePoints[0];this.swipe.startTime=this.swipe.currentTime=+new Date;if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.update=function(e,i){this.swipe||this.start(e,i);if(!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.pagePoints)){this.cancel();return}if(this.hasEqualTouches(i.pagePoints)){this.setSwipe(i.pagePoints[0]);i.swipe=this.swipe;if(!this.started&&this.swipe.startPoint.distanceTo(this.swipe.currentPoint)>=this.options.radiusThreshold){this.gestureHandler.cancelGestures(this.type);this.started=true;this.binder.start.call(this,e,i)}else this.started&&this.binder.update.call(this,e,i);this.swipe.startTime=this.swipe.currentTime}if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.end=function(e,i){var n,s,r,o,a,h=this.options.inertia;if(this.started)if(this.options.useMomentum){this.swipe.inEndMomentum=true;n=new t.Point(this.swipe.curDeltaX,this.swipe.curDeltaY).normalize();s=this.swipe.momentum;r=this;o=new t.Point(i.pagePoints[0].x,i.pagePoints[0].y);h>=1&&(h=this.defaults.inertia);a=function(){s*=h;if(r.swipe.inEndMomentum&&s>1){o.x+=n.x*s;o.y+=n.y*s;i.pagePoints[0]=new t.Point(o.x,o.y);r.update(e,i);r.rAFId=window.requestAnimationFrame(a)}else{r.rAFId=-1;r.binder.end.call(r,e,i)}};this.rAFId=window.requestAnimationFrame(a)}else this.binder.end.call(this,e,i);if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.cancel=function(){if(-1!==this.rAFId){this.binder.end.call(this,event);window.cancelAnimationFrame(this.rAFId);this.rAFId=-1;t.preventGestures(this.gestureHandler);this.gestureHandler.cancelAllGestures(this)}if(this.cancelled)return;this.cancelled=true;this.started&&this.binder.cancel.call(this)};function n(){i.apply(this,arguments)}return n}));t.gestures.add("swipe",i)})(window.Touche,Math.abs);(function(t){"use strict";var e=t.Gesture.augment((function(e){this.defaults={areaThreshold:5,precedence:6,preventDefault:true,touches:1,which:1};this.start=function(e,i){this.started=true;this.rect=t.utils.getRect(this.gestureHandler.element);if(!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.pagePoints)){this.cancel();return}this.binder.start.call(this,e,i);if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.update=function(e,i){if(!this.started)return;if(this.hasMoreTouches(i.pagePoints)||!this.rect.pointInside(i.pagePoints[0],this.options.areaThreshold)){this.cancel();return}if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.end=function(e,i){if(!this.started)return;if(this.hasNotEqualTouches(i.pagePoints))return;if(this.rect.pointInside(i.pagePoints[0],this.options.areaThreshold)){this.gestureHandler.cancelGestures(this.type);this.binder.end.call(this,e,i)}if(this.options.preventDefault){e.preventDefault();t.WebkitHack.prevent()}};this.cancel=function(t,e){this.cancelled=true;this.binder.cancel.call(this,t,e)};function i(){e.apply(this,arguments)}return i}));t.gestures.add("tap",e)})(window.Touche);return window.Touche}))}}]);