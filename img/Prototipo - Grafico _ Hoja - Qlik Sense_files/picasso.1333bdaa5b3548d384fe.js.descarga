/*! For license information please see picasso.1333bdaa5b3548d384fe.js.LICENSE.txt */
/*!
 * sense-client@7.144.6
 * 
 * Copyright(C) 2021 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[1],{"8ZOk":function(t,e,n){!function(e,n){t.exports=n()}(this,(function(){"use strict";var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,n=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var i=function(i){var r=[],a=String(i).trim();return"M"!==a[0]&&"m"!==a[0]||a.replace(e,(function(e,i,a){var o,s=i.toLowerCase(),c=(o=a.match(n))?o.map(Number):[],u=i;if("m"===s&&2<c.length&&(r.push([u].concat(c.splice(0,2))),s="l",u="m"===u?"l":"L"),c.length<t[s])return"";for(r.push([u].concat(c.splice(0,t[s])));c.length>=t[s]&&c.length&&t[s];)r.push([u].concat(c.splice(0,t[s])));return""})),r};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){var n=t.x*Math.cos(e)-t.y*Math.sin(e),i=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=n,t.y=i}function c(t,e){t.x*=e,t.y*=e}var u=function(t){if(void 0!==t&&t.CanvasRenderingContext2D&&(!t.Path2D||(n=(e=t).document.createElement("canvas").getContext("2d"),o=new e.Path2D("M0 0 L1 1"),n.strokeStyle="red",n.lineWidth=1,n.stroke(o),255!==n.getImageData(0,0,1,1).data[0]))){var e,n,o,u=function(){function t(e){var n;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.segments=[],e&&e instanceof t?(n=this.segments).push.apply(n,a(e.segments)):e&&(this.segments=i(e))}var e,n,o;return e=t,(n=[{key:"addPath",value:function(e){var n;e&&e instanceof t&&(n=this.segments).push.apply(n,a(e.segments))}},{key:"moveTo",value:function(t,e){this.segments.push(["M",t,e])}},{key:"lineTo",value:function(t,e){this.segments.push(["L",t,e])}},{key:"arc",value:function(t,e,n,i,r,a){this.segments.push(["AC",t,e,n,i,r,!!a])}},{key:"arcTo",value:function(t,e,n,i,r){this.segments.push(["AT",t,e,n,i,r])}},{key:"ellipse",value:function(t,e,n,i,r,a,o,s){this.segments.push(["E",t,e,n,i,r,a,o,!!s])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(t,e,n,i,r,a){this.segments.push(["C",t,e,n,i,r,a])}},{key:"quadraticCurveTo",value:function(t,e,n,i){this.segments.push(["Q",t,e,n,i])}},{key:"rect",value:function(t,e,n,i){this.segments.push(["R",t,e,n,i])}}])&&r(e.prototype,n),o&&r(e,o),t}(),l=t.CanvasRenderingContext2D.prototype.fill,h=t.CanvasRenderingContext2D.prototype.stroke;t.CanvasRenderingContext2D.prototype.fill=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i="nonzero";0===e.length||1===e.length&&"string"==typeof e[0]?l.apply(this,e):(2===arguments.length&&(i=e[1]),f(this,e[0].segments),l.call(this,i))},t.CanvasRenderingContext2D.prototype.stroke=function(t){t&&f(this,t.segments),h.call(this)},t.Path2D=u}function f(t,e){var n,i,r,a,o,u,l,h,f,d,p,g,v,y,m,x,b,w,_,k,M,S,R,T,A,E,N,C,z,O={x:0,y:0},j={x:0,y:0};t.beginPath();for(var P=0;P<e.length;++P){var D=e[P];switch("S"!==(k=D[0])&&"s"!==k&&"C"!==k&&"c"!==k&&(R=S=null),"T"!==k&&"t"!==k&&"Q"!==k&&"q"!==k&&(A=T=null),k){case"m":case"M":"m"===k?(p+=D[1],v+=D[2]):(p=D[1],v=D[2]),"M"!==k&&O||(O={x:p,y:v}),t.moveTo(p,v);break;case"l":p+=D[1],v+=D[2],t.lineTo(p,v);break;case"L":p=D[1],v=D[2],t.lineTo(p,v);break;case"H":p=D[1],t.lineTo(p,v);break;case"h":p+=D[1],t.lineTo(p,v);break;case"V":v=D[1],t.lineTo(p,v);break;case"v":v+=D[1],t.lineTo(p,v);break;case"a":case"A":"a"===k?(p+=D[6],v+=D[7]):(p=D[6],v=D[7]),x=D[1],b=D[2],l=D[3]*Math.PI/180,r=!!D[4],a=!!D[5],o={x:p,y:v},s(u={x:(j.x-o.x)/2,y:(j.y-o.y)/2},-l),1<(h=u.x*u.x/(x*x)+u.y*u.y/(b*b))&&(x*=h=Math.sqrt(h),b*=h),f=x*x*b*b,d=x*x*u.y*u.y+b*b*u.x*u.x,c(M={x:x*u.y/b,y:-b*u.x/x},a!=r?Math.sqrt((f-d)/d)||0:-Math.sqrt((f-d)/d)||0),i=Math.atan2((u.y-M.y)/b,(u.x-M.x)/x),n=Math.atan2(-(u.y+M.y)/b,-(u.x+M.x)/x),s(M,l),N=M,C=(o.x+j.x)/2,z=(o.y+j.y)/2,N.x+=C,N.y+=z,t.save(),t.translate(M.x,M.y),t.rotate(l),t.scale(x,b),t.arc(0,0,1,i,n,!a),t.restore();break;case"C":S=D[3],R=D[4],p=D[5],v=D[6],t.bezierCurveTo(D[1],D[2],S,R,p,v);break;case"c":t.bezierCurveTo(D[1]+p,D[2]+v,D[3]+p,D[4]+v,D[5]+p,D[6]+v),S=D[3]+p,R=D[4]+v,p+=D[5],v+=D[6];break;case"S":null!==S&&null!==S||(S=p,R=v),t.bezierCurveTo(2*p-S,2*v-R,D[1],D[2],D[3],D[4]),S=D[1],R=D[2],p=D[3],v=D[4];break;case"s":null!==S&&null!==S||(S=p,R=v),t.bezierCurveTo(2*p-S,2*v-R,D[1]+p,D[2]+v,D[3]+p,D[4]+v),S=D[1]+p,R=D[2]+v,p+=D[3],v+=D[4];break;case"Q":T=D[1],A=D[2],p=D[3],v=D[4],t.quadraticCurveTo(T,A,p,v);break;case"q":T=D[1]+p,A=D[2]+v,p+=D[3],v+=D[4],t.quadraticCurveTo(T,A,p,v);break;case"T":null!==T&&null!==T||(T=p,A=v),T=2*p-T,A=2*v-A,p=D[1],v=D[2],t.quadraticCurveTo(T,A,p,v);break;case"t":null!==T&&null!==T||(T=p,A=v),T=2*p-T,A=2*v-A,p+=D[1],v+=D[2],t.quadraticCurveTo(T,A,p,v);break;case"z":case"Z":p=O.x,v=O.y,O=void 0,t.closePath();break;case"AC":p=D[1],v=D[2],m=D[3],i=D[4],n=D[5],E=D[6],t.arc(p,v,m,i,n,E);break;case"AT":g=D[1],y=D[2],p=D[3],v=D[4],m=D[5],t.arcTo(g,y,p,v,m);break;case"E":p=D[1],v=D[2],x=D[3],b=D[4],l=D[5],i=D[6],n=D[7],E=D[8],t.save(),t.translate(p,v),t.rotate(l),t.scale(x,b),t.arc(0,0,1,i,n,E),t.restore();break;case"R":p=D[1],v=D[2],w=D[3],_=D[4],O={x:p,y:v},t.rect(p,v,w,_)}j.x=p,j.y=v}}};"undefined"!=typeof window&&u(window);function l(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===v.call(t)}function h(t){if(t&&"[object Object]"===v.call(t)){var e,n=g.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&g.call(t.constructor.prototype,"isPrototypeOf");if(!t.constructor||n||i){for(e in t);return void 0===e||g.call(t,e)}}}function f(t,e){y&&"__proto__"===e.name?y(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue}function d(t,e){if("__proto__"===e){if(!g.call(t,e))return;if(m)return m(t,e).value}return t[e]}var p={path2dPolyfill:u,parsePath:i}.parsePath,g=Object.prototype.hasOwnProperty,v=Object.prototype.toString,y=Object.defineProperty,m=Object.getOwnPropertyDescriptor,x=function t(e,n){var i,r,a,o,s,c,u=e,p=1,g=arguments.length,v=!1;for("boolean"==typeof u&&(v=u,u=n||{},p=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});p<g;++p)if(null!=(i=arguments[p]))for(r in i)a=d(u,r),u!==(o=d(i,r))&&(v&&o&&(h(o)||(s=l(o)))?(c=s?(s=!1,a&&l(a)?a:[]):a&&h(a)?a:{},f(u,{name:r,newValue:t(v,c,o)})):void 0!==o&&f(u,{name:r,newValue:o}));return u},b={version:"0.34.0"};function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function M(t,e,n){return e&&k(t.prototype,e),n&&k(t,n),t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function z(t,e,n){return(z=C()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&N(r,n.prototype),r}).apply(null,arguments)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){var e=C();return function(){var n,i,r,a=E(t);if(e){var o=E(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i=this,!(r=n)||"object"!=typeof r&&"function"!=typeof r?O(i):r}}function P(t,e,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(t,e)||q(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t){return function(t){if(Array.isArray(t))return F(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||q(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){if(t){if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function L(t,e){var n=0<arguments.length&&void 0!==t?t:{},i=1<arguments.length&&void 0!==e?e:{},r=n.dock,a=void 0===r?"center":r,o=n.displayOrder,s=void 0===o?0:o,c=n.prioOrder,u=void 0===c?0:c,l=n.preferredSize,h=void 0===l?0:l,f=n.minimumLayoutMode,d=n.show,p=void 0===d||d;return a=a||"center",{computePreferredSize:function(t){var e=t.inner,n=t.outer;return"function"==typeof h?h({inner:e,outer:n,dock:this.dock()},i):h},dock:function(t){return void 0!==t?(a=t,this):"function"==typeof a?a(i):a},displayOrder:function(t){return void 0!==t?(s=t,this):"function"==typeof s?s(i):s},prioOrder:function(t){return void 0!==t?(u=t,this):"function"==typeof u?u(i):u},minimumLayoutMode:function(t){return void 0!==t?(f=t,this):"function"==typeof f?f(i):f},show:function(t){return void 0!==t?(p=t,this):"function"==typeof p?p(i):p}}}function B(t){t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height)}function W(t){var e={center:{minWidthRatio:.5,minHeightRatio:.5,minWidth:0,minHeight:0}};return x(!0,e,t),e.center.minWidthRatio=Math.min(Math.max(e.center.minWidthRatio,0),1),e.center.minHeightRatio=Math.min(Math.max(e.center.minHeightRatio,0),1),e.center.minWidth=Math.max(e.center.minWidth,0),e.center.minHeight=Math.max(e.center.minHeight,0),e}function H(t){return"number"==typeof t&&!isNaN(t)}function V(t){return"number"!=typeof t||isNaN(t)}function Y(t){for(var e=t.length,n=NaN,i=NaN,r=NaN,a=NaN,o=0;o<e;o++)n=isNaN(n)?t[o].x:Math.min(n,t[o].x),i=isNaN(i)?t[o].x:Math.max(i,t[o].x),r=isNaN(r)?t[o].y:Math.min(r,t[o].y),a=isNaN(a)?t[o].y:Math.max(a,t[o].y);return[n,r,i,a]}function U(t){return[{x:t.x1||0,y:t.y1||0},{x:t.x2||0,y:t.y2||0}]}function $(t){return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}]}function X(t){var e=D(Y(t),4),n=e[0],i=e[1];return{x:n,y:i,width:e[2]-n,height:e[3]-i}}function G(t){return{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y}}function K(t){var e=t||{},n=e.x,i=e.y,r=e.width,a=e.height,o=e.x1,s=e.x2,c=e.y1,u=e.y2,l=e.cy,h=e.r,f=e.vertices;return H(e.cx)&&H(l)&&H(h)?"circle":H(o)&&H(s)&&H(c)&&H(u)?"line":H(n)&&H(i)&&H(r)&&H(a)?"rect":H(n)&&H(i)?"point":Array.isArray(f)?f.every((function(t){return Array.isArray(t)}))?"geopolygon":"polygon":null}function Z(t,e){return{x:e.x-t,y:e.y-t,width:e.width+t,height:e.height+t}}function J(t,e,n,i,r){return{x:isNaN(t)?0:t,y:isNaN(t)?0:e,width:isNaN(t)?0:n,height:isNaN(t)?0:i,margin:isNaN(r)?0:r}}function Q(t,e,n){if(void 0===t.cachedSize){var i,r=t.config.dock(),a=t.comp.preferredSize({inner:e,outer:n,dock:r});isNaN(a)?a&&!isNaN(a.size)&&(a.width=a.size,a.height=a.size):a={width:a,height:a},i="top"===r||"bottom"===r?a.height:"right"===r||"left"===r?a.width:Math.max(a.width,a.height),t.cachedSize=Math.ceil(i),t.edgeBleed=a.edgeBleed||0}return t.cachedSize}function tt(t,e){switch(e.config.dock()){case"top":t.y+=e.cachedSize,t.height-=e.cachedSize;break;case"bottom":t.height-=e.cachedSize;break;case"left":t.x+=e.cachedSize,t.width-=e.cachedSize;break;case"right":t.width-=e.cachedSize}}function et(t,e){var n=e.edgeBleed;n&&(t.left=Math.max(t.left,n.left||0),t.right=Math.max(t.right,n.right||0),t.top=Math.max(t.top,n.top||0),t.bottom=Math.max(t.bottom,n.bottom||0))}function nt(t,e,n){e.x<n.left&&(e.width-=n.left-e.x,e.x=n.left);var i=t.width-(e.x+e.width);i<n.right&&(e.width-=n.right-i),e.y<n.top&&(e.height-=n.top-e.y,e.y=n.top);var r=t.height-(e.y+e.height);r<n.bottom&&(e.height-=n.bottom-r)}function it(t,e,n,i,r){var a,o,s,c,u,l=x({},e),h=x({},n);return tt(l,i),et(h,i),nt(t,l,h),a=t,o=l,s=r,c=Math.min(s.center.minWidth,a.width)||Math.max(a.width*s.center.minWidthRatio,1),u=Math.min(s.center.minHeight,a.height)||Math.max(a.height*s.center.minHeightRatio,1),o.width>=c&&o.height>=u?(tt(e,i),et(n,i),1):void 0}function rt(t){var e=t.layoutRect,n=t.visible,i=t.hidden,r=t.settings,a=J(e.x,e.y,e.width,e.height),o={left:0,right:0,top:0,bottom:0},s=n.slice();s.sort((function(t,e){return t.config.prioOrder()-e.config.prioOrder()}));for(var c=0;c<s.length;++c){var u=s[c];Q(u,a,e),it(e,a,o,u,r)||(i.push(s.splice(c,1)[0]),--c)}!function(t,e){if(0!==e.length)for(var n=0;n<t.length;++n){var i=t[n];i.referencedDocks.length&&i.referencedDocks.every((function(t){return e.some((function(e){return e.key===t}))}))&&e.push(t.splice(n,1)[0])}}(n,i);var l=n.filter((function(t){return-1!==s.indexOf(t)}));return n.length=0,n.push.apply(n,I(l)),nt(e,a,o),a}function at(t){return{x:t.margin.left+t.x*t.scaleRatio.x,y:t.margin.top+t.y*t.scaleRatio.y,width:t.width*t.scaleRatio.x,height:t.height*t.scaleRatio.y}}function ot(t){var e;return X((e=[]).concat.apply(e,I(t.map($))))}function st(t){var e=t.visible,n=t.layoutRect,i=t.reducedRect,r=t.containerRect,a=t.translation,o=J(i.x,i.y,i.width,i.height),s=J(i.x,i.y,i.width,i.height),c={},u=e.slice(),l=u.slice().sort((function(t,e){return t.config.displayOrder()-e.config.displayOrder()}));return e.sort((function(t,e){if(0<e.referencedDocks.length)return-1;if(0<t.referencedDocks.length)return 1;var n=t.config.displayOrder()-e.config.displayOrder();return 0==n?u.indexOf(t)-u.indexOf(e):n})).forEach((function(t){var e={},u={};switch(t.config.dock()){case"top":e.height=u.height=t.cachedSize,e.width=n.width,u.width=o.width,e.x=n.x,u.x=o.x,e.y=u.y=o.y-t.cachedSize,o.y-=t.cachedSize,o.height+=t.cachedSize;break;case"bottom":e.x=n.x,u.x=o.x,e.y=u.y=o.y+o.height,e.width=n.width,u.width=o.width,e.height=u.height=t.cachedSize,o.height+=t.cachedSize;break;case"left":e.x=u.x=s.x-t.cachedSize,e.y=n.y,u.y=s.y,e.width=u.width=t.cachedSize,e.height=n.height,u.height=s.height,s.x-=t.cachedSize,s.width+=t.cachedSize;break;case"right":e.x=u.x=s.x+s.width,e.y=n.y,u.y=s.y,e.width=u.width=t.cachedSize,e.height=n.height,u.height=s.height,s.width+=t.cachedSize;break;case"center":e.x=u.x=i.x,e.y=u.y=i.y,e.width=u.width=i.width,e.height=u.height=i.height;break;default:if(0<t.referencedDocks.length){var l=t.referencedDocks.map((function(t){return c[t]})).filter((function(t){return!!t}));0<l.length&&(e=ot(l.map((function(t){return t.outerRect}))),u=ot(l.map((function(t){return t.r}))))}}t.key&&(c[t.key]={r:u,outerRect:e}),function(t,e,n,i){var r={x:i.width/n.width,y:i.height/n.height},a={left:0,top:0};if(n.preserveAspectRatio){var o=r.x<r.y,s=Math.min(r.x,r.y);r.x=s,r.y=s;var c=o?"height":"width",u=(i[c]-n[c]*r.x)*n.align;a.left=o?0:u,a.top=o?u:0}t.scaleRatio=r,t.margin=a,e.scaleRatio=r,e.margin=a,n.scaleRatio=r,n.margin=a}(u,e,n,r),u.edgeBleed=t.edgeBleed,u.computed=at(u),e.edgeBleed=t.edgeBleed,e.computed=at(e),u.x+=a.x,u.y+=a.y,e.x+=a.x,e.y+=a.y,t.comp.resize(u,e),t.cachedSize=void 0,t.edgeBleed=void 0})),e.map((function(t){return l.indexOf(t)}))}function ct(t){if(!t.settings&&!t.settings)throw new Error("Invalid component settings");if(!t.resize||"function"!=typeof t.resize)throw new Error("Component is missing resize function");if(!t.dockConfig&&!t.preferredSize)throw new Error("Component is missing preferredSize function")}function ut(t){var e=W(t),n={};return n.layout=function(t,n){var i=1<arguments.length&&void 0!==n?n:[];if(!t||isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))throw new Error("Invalid rect");if(!i.length)return{visible:[],hidden:[]};var r,a,o,s,c=(a=e,s={x:0,y:0,width:0,height:0},(o={x:0,y:0,width:0,height:0}).width=(r=t).width||0,o.height=r.height||0,void 0!==a.size&&(o.width=isNaN(a.size.width)?o.width:a.size.width,o.height=isNaN(a.size.height)?o.height:a.size.height),void 0!==a.logicalSize?(s.width=isNaN(a.logicalSize.width)?o.width:a.logicalSize.width,s.height=isNaN(a.logicalSize.height)?o.height:a.logicalSize.height,s.align=isNaN(a.logicalSize.align)?.5:Math.min(Math.max(a.logicalSize.align,0),1),s.preserveAspectRatio=a.logicalSize.preserveAspectRatio):(s.width=o.width,s.height=o.height,s.preserveAspectRatio=!1),B(s),B(o),{logicalContainerRect:s,containerRect:o}),u=c.logicalContainerRect,l=c.containerRect,h=D(function(t,e,n){for(var i,r,a,o,s,c=[],u=[],l=0;l<t.length;++l){var h=t[l];ct(h);var f=void 0;f=h.instance?h.instance.dockConfig():L(h.settings.layout);var d=h.settings.key,p=f.dock(),g=/@/.test(p)?p.split(",").map((function(t){return t.replace(/^\s*@/,"")})):[];i=f,r=n,s=void 0,a=e.layoutModes||{},o=i.minimumLayoutMode(),(s=i.show())&&"object"===w(o)?s=a[o.width]&&a[o.height]&&r.width>=a[o.width].width&&r.height>=a[o.height].height:s&&void 0!==o&&(s=a[o]&&r.width>=a[o].width&&r.height>=a[o].height),s?c.push({comp:h,key:d,config:f,referencedDocks:g}):u.push({comp:h,key:d,config:f,referencedDocks:g})}return[c,u]}(i,e,u),2),f=h[0],d=h[1],p=st({visible:f,layoutRect:u,reducedRect:rt({layoutRect:u,visible:f,hidden:d,settings:e}),containerRect:l,translation:{x:t.x,y:t.y}});return d.forEach((function(t){t.comp.visible=!1;var e=J();t.comp.resize(e,e)})),{visible:f.map((function(t){return t.comp})),hidden:d.map((function(t){return t.comp})),order:p}},n.settings=function(t){e=W(t)},n}function lt(t){return!!t.changedTouches}var ht=Math.PI,ft=2*ht,dt=1e-6,pt=ft-dt;function gt(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vt(){return new gt}function yt(t){return function(){return t}}gt.prototype=vt.prototype={constructor:gt,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,c=i-e,u=a-t,l=o-e,h=u*u+l*l;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(dt<h)if(Math.abs(l*s-c*u)>dt&&r){var f=n-a,d=i-o,p=s*s+c*c,g=f*f+d*d,v=Math.sqrt(p),y=Math.sqrt(h),m=r*Math.tan((ht-Math.acos((p+h-g)/(2*v*y)))/2),x=m/y,b=m/v;Math.abs(x-1)>dt&&(this._+="L"+(t+x*u)+","+(e+x*l)),this._+="A"+r+","+r+",0,0,"+ +(u*d<l*f)+","+(this._x1=t+b*s)+","+(this._y1=e+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),c=t+o,u=e+s,l=1^a,h=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>dt||Math.abs(this._y1-u)>dt)&&(this._+="L"+c+","+u),n&&(h<0&&(h=h%ft+ft),pt<h?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):dt<h&&(this._+="A"+n+","+n+",0,"+ +(ht<=h)+","+l+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var mt=Math.abs,xt=Math.atan2,bt=Math.cos,wt=Math.max,_t=Math.min,kt=Math.sin,Mt=Math.sqrt,St=1e-12,Rt=Math.PI,Tt=Rt/2,At=2*Rt;function Et(t){return 1<=t?Tt:t<=-1?-Tt:Math.asin(t)}function Nt(t){return t.innerRadius}function Ct(t){return t.outerRadius}function zt(t){return t.startAngle}function Ot(t){return t.endAngle}function jt(t){return t&&t.padAngle}function Pt(t,e,n,i,r,a,o){var s=t-n,c=e-i,u=(o?a:-a)/Mt(s*s+c*c),l=u*c,h=-u*s,f=t+l,d=e+h,p=n+l,g=i+h,v=(f+p)/2,y=(d+g)/2,m=p-f,x=g-d,b=m*m+x*x,w=r-a,_=f*g-p*d,k=(x<0?-1:1)*Mt(wt(0,w*w*b-_*_)),M=(_*x-m*k)/b,S=(-_*m-x*k)/b,R=(_*x+m*k)/b,T=(-_*m+x*k)/b,A=M-v,E=S-y,N=R-v,C=T-y;return N*N+C*C<A*A+E*E&&(M=R,S=T),{cx:M,cy:S,x01:-l,y01:-h,x11:M*(r/w-1),y11:S*(r/w-1)}}function Dt(){var t=Nt,e=Ct,n=yt(0),i=null,r=zt,a=Ot,o=jt,s=null;function c(){var c,u,l,h=+t.apply(this,arguments),f=+e.apply(this,arguments),d=r.apply(this,arguments)-Tt,p=a.apply(this,arguments)-Tt,g=mt(p-d),v=d<p;if(s=s||(c=vt()),f<h&&(u=f,f=h,h=u),St<f)if(At-St<g)s.moveTo(f*bt(d),f*kt(d)),s.arc(0,0,f,d,p,!v),St<h&&(s.moveTo(h*bt(p),h*kt(p)),s.arc(0,0,h,p,d,v));else{var y,m,x=d,b=p,w=d,_=p,k=g,M=g,S=o.apply(this,arguments)/2,R=St<S&&(i?+i.apply(this,arguments):Mt(h*h+f*f)),T=_t(mt(f-h)/2,+n.apply(this,arguments)),A=T,E=T;if(St<R){var N=Et(R/h*kt(S)),C=Et(R/f*kt(S));(k-=2*N)>St?(w+=N*=v?1:-1,_-=N):(k=0,w=_=(d+p)/2),(M-=2*C)>St?(x+=C*=v?1:-1,b-=C):(M=0,x=b=(d+p)/2)}var z=f*bt(x),O=f*kt(x),j=h*bt(_),P=h*kt(_);if(St<T){var D,I=f*bt(b),q=f*kt(b),F=h*bt(w),L=h*kt(w);if(g<Rt&&(D=function(t,e,n,i,r,a,o,s){var c=n-t,u=i-e,l=o-r,h=s-a,f=h*c-l*u;if(!(f*f<St))return[t+(f=(l*(e-a)-h*(t-r))/f)*c,e+f*u]}(z,O,F,L,I,q,j,P))){var B=z-D[0],W=O-D[1],H=I-D[0],V=q-D[1],Y=1/kt((1<(l=(B*H+W*V)/(Mt(B*B+W*W)*Mt(H*H+V*V)))?0:l<-1?Rt:Math.acos(l))/2),U=Mt(D[0]*D[0]+D[1]*D[1]);A=_t(T,(h-U)/(Y-1)),E=_t(T,(f-U)/(1+Y))}}St<M?St<E?(y=Pt(F,L,z,O,f,E,v),m=Pt(I,q,j,P,f,E,v),s.moveTo(y.cx+y.x01,y.cy+y.y01),E<T?s.arc(y.cx,y.cy,E,xt(y.y01,y.x01),xt(m.y01,m.x01),!v):(s.arc(y.cx,y.cy,E,xt(y.y01,y.x01),xt(y.y11,y.x11),!v),s.arc(0,0,f,xt(y.cy+y.y11,y.cx+y.x11),xt(m.cy+m.y11,m.cx+m.x11),!v),s.arc(m.cx,m.cy,E,xt(m.y11,m.x11),xt(m.y01,m.x01),!v))):(s.moveTo(z,O),s.arc(0,0,f,x,b,!v)):s.moveTo(z,O),St<h&&St<k?St<A?(y=Pt(j,P,I,q,h,-A,v),m=Pt(z,O,F,L,h,-A,v),s.lineTo(y.cx+y.x01,y.cy+y.y01),A<T?s.arc(y.cx,y.cy,A,xt(y.y01,y.x01),xt(m.y01,m.x01),!v):(s.arc(y.cx,y.cy,A,xt(y.y01,y.x01),xt(y.y11,y.x11),!v),s.arc(0,0,h,xt(y.cy+y.y11,y.cx+y.x11),xt(m.cy+m.y11,m.cx+m.x11),v),s.arc(m.cx,m.cy,A,xt(m.y11,m.x11),xt(m.y01,m.x01),!v))):s.arc(0,0,h,_,w,v):s.lineTo(j,P)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Rt/2;return[bt(i)*n,kt(i)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:yt(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:yt(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:yt(+t),c):n},c.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:yt(+t),c):i},c.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:yt(+t),c):r},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:yt(+t),c):a},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:yt(+t),c):o},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function It(t){this._context=t}function qt(t){return new It(t)}function Ft(t){return t[0]}function Lt(t){return t[1]}function Bt(){var t=Ft,e=null,n=yt(0),i=Lt,r=yt(!0),a=null,o=qt,s=null;function c(c){var u,l,h,f,d,p=c.length,g=!1,v=new Array(p),y=new Array(p);for(null==a&&(s=o(d=vt())),u=0;u<=p;++u){if(!(u<p&&r(f=c[u],u,c))===g)if(g=!g)l=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;l<=h;--h)s.point(v[h],y[h]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+t(f,u,c),y[u]=+n(f,u,c),s.point(e?+e(f,u,c):v[u],i?+i(f,u,c):y[u]))}if(d)return s=null,d+""||null}function u(){return e=Ft,n=Lt,i=yt(!0),c=qt,u=s=null,t.x=function(n){return arguments.length?(e="function"==typeof n?n:yt(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:yt(+e),t):n},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:yt(!!e),t):i},t.curve=function(e){return arguments.length?(c=e,null!=s&&(u=c(s)),t):c},t.context=function(e){return arguments.length?(null==e?s=u=null:u=c(s=e),t):s},t.defined(r).curve(o).context(a);function t(t){var r,a,o,l=t.length,h=!1;for(null==s&&(u=c(o=vt())),r=0;r<=l;++r)!(r<l&&i(a=t[r],r,t))===h&&((h=!h)?u.lineStart():u.lineEnd()),h&&u.point(+e(a,r,t),+n(a,r,t));if(o)return u=null,o+""||null}var e,n,i,s,c,u}return c.x=function(n){return arguments.length?(t="function"==typeof n?n:yt(+n),e=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:yt(+e),c):t},c.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:yt(+t),c):e},c.y=function(t){return arguments.length?(n="function"==typeof t?t:yt(+t),i=null,c):n},c.y0=function(t){return arguments.length?(n="function"==typeof t?t:yt(+t),c):n},c.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:yt(+t),c):i},c.lineX0=c.lineY0=function(){return u().x(t).y(n)},c.lineY1=function(){return u().x(t).y(i)},c.lineX1=function(){return u().x(e).y(n)},c.defined=function(t){return arguments.length?(r="function"==typeof t?t:yt(!!t),c):r},c.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),c):o},c.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),c):a},c}function Wt(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function Ht(t){return t}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Vt=Array.prototype.slice;function Yt(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ut(t){this._context=t}function $t(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Xt(t,e){this._context=t,this._k=(1-e)/6}Ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$t(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:$t(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gt=function t(e){function n(t){return new Xt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Kt(t,e){this._context=t,this._alpha=e}Kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>St){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>St){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Zt=function t(e){function n(t){return e?new Kt(t,e):new Xt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Jt(t){return t<0?-1:1}function Qt(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Jt(a)+Jt(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function te(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ee(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function ne(t){this._context=t}function ie(t){this._context=new re(t)}function re(t){this._context=t}function ae(t){this._context=t}function oe(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(a[r[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;0<=e;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function se(t,e){this._context=t,this._t=e}function ce(t,e){if(1<(r=t.length))for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function ue(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n}function le(t,e){return t[e]}function he(t){for(var e,n=-1,i=0,r=t.length,a=-1/0;++n<r;)(e=+t[n][1])>a&&(a=e,i=n);return i}function fe(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}function de(t,e,n){var i,r=1<arguments.length&&void 0!==e?e:"unspecified",a=2<arguments.length?n:void 0,o={},s=t||{get:function(){},has:function(){return!1},default:function(){}};function c(t,e){if(!t||"string"!=typeof t)throw new TypeError("Invalid argument: key must be a non-empty string");return!(t in o)&&(o[t]=e,!0)}function u(t){return o[t]||s.get(t)}function l(t,e){if(void 0!==e)return c(t,e);var n=u(t);return a&&void 0===n&&a.warn("".concat(t," does not exist in ").concat(r," registry")),n||u(i)}return i=s.default(),l.add=c,l.get=u,l.has=function(t){return!!o[t]||s.has(t)},l.remove=function(t){var e=o[t];return delete o[t],e},l.getKeys=function(){return Object.keys(o)},l.getValues=function(){return Object.keys(o).map((function(t){return o[t]}))},l.default=function(t){return void 0!==t&&(i=t),i},l.register=c,l}function pe(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[1<i.length?i[0]+i.slice(2):i,+t.slice(n+1)]}ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ee(this,this._t0,te(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ee(this,te(this,n=Qt(this,t,e)),n);break;default:ee(this,this._t0,n=Qt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ie.prototype=Object.create(ne.prototype)).point=function(t,e){ne.prototype.point.call(this,e,t)},re.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=oe(t),r=oe(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var ge,ve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ye(t){if(!(e=ve.exec(t)))throw new Error("invalid format: "+t);var e;return new me({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function me(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function xe(t,e){var n=pe(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}ye.prototype=me.prototype,me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var be={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return xe(100*t,e)},r:xe,s:function(t,e){var n=pe(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(ge=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:o<a?i+new Array(a-o+1).join("0"):0<a?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+pe(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function we(t){return t}var _e=Array.prototype.map,ke=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Me(t){var e,n,i,r=void 0===t.grouping||void 0===t.thousands?we:(n=_e.call(t.grouping,Number),i=t.thousands+"",function(t,e){for(var r=t.length,a=[],o=0,s=n[0],c=0;0<r&&0<s&&(e<c+s+1&&(s=Math.max(1,e-c)),a.push(t.substring(r-=s,r+s)),!((c+=s+1)>e));)s=n[o=(o+1)%n.length];return a.reverse().join(i)}),a=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",c=void 0===t.numerals?we:(e=_e.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=ye(t)).fill,n=t.align,i=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,y=t.trim,m=t.type;"n"===m?(g=!0,m="g"):be[m]||(void 0===v&&(v=12),y=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===f?a:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?o:/[%p]/.test(m)?u:"",w=be[m],_=/[defgprs%]/.test(m);function k(t){var a,o,u,f=x,k=b;if("c"===m)k=w(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:w(Math.abs(t),v),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;0<r&&(r=0)}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),M&&0==+t&&"+"!==i&&(M=!1),f=(M?"("===i?i:l:"-"===i||"("===i?"":i)+f,k=("s"===m?ke[8+ge/3]:"")+k+(M&&"("===i?")":""),_)for(a=-1,o=t.length;++a<o;)if((u=t.charCodeAt(a))<48||57<u){k=(46===u?s+t.slice(a+1):t.slice(a))+k,t=t.slice(0,a);break}}g&&!d&&(t=r(t,1/0));var S=f.length+t.length+k.length,R=S<p?new Array(p-S+1).join(e):"";switch(g&&d&&(t=r(R+t,R.length?p-k.length:1/0),R=""),n){case"<":t=f+t+k+R;break;case"=":t=f+R+t+k;break;case"^":t=R.slice(0,S=R.length>>1)+f+t+k+R.slice(S);break;default:t=R+f+t+k}return c(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n,i=f(((t=ye(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor((n=e,((n=pe(Math.abs(n)))?n[1]:NaN)/3)))),a=Math.pow(10,-r),o=ke[8+r/3];return function(t){return i(a*t)+o}}}}var Se=new Date,Re=new Date;function Te(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&0<a))return s;for(;s.push(o=new Date(+n)),e(n,a),t(n),o<n&&n<i;);return s},r.filter=function(n){return Te((function(e){if(e<=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t<=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;0<=--i;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return Se.setTime(+e),Re.setTime(+i),t(Se),t(Re),Math.floor(n(Se,Re))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Ae=Te((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function Ee(t){return Te((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Ne=Ee(0),Ce=Ee(1),ze=(Ee(2),Ee(3),Ee(4)),Oe=(Ee(5),Ee(6),Te((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));Oe.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Te((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var je=Te((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}));function Pe(t){return Te((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var De=Pe(0),Ie=Pe(1),qe=(Pe(2),Pe(3),Pe(4)),Fe=(Pe(5),Pe(6),Te((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function Le(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Be(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function We(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function He(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,u=Ke(r),l=Ze(r),h=Ke(a),f=Ze(a),d=Ke(o),p=Ze(o),g=Ke(s),v=Ze(s),y=Ke(c),m=Ze(c),x={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:xn,e:xn,f:Mn,H:bn,I:wn,j:_n,L:kn,m:Sn,M:Rn,p:function(t){return r[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ti,s:ei,S:Tn,u:An,U:En,V:Nn,w:Cn,W:zn,x:null,X:null,y:On,Y:jn,Z:Pn,"%":Qn},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Dn,e:Dn,f:Bn,H:In,I:qn,j:Fn,L:Ln,m:Wn,M:Hn,p:function(t){return r[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ti,s:ei,S:Vn,u:Yn,U:Un,V:$n,w:Xn,W:Gn,x:null,X:null,y:Kn,Y:Zn,Z:Jn,"%":Qn},w={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.m=m[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=v[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return M(t,e,n,i)},d:un,e:un,f:gn,H:hn,I:hn,j:ln,L:pn,m:cn,M:fn,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=l[i[0].toLowerCase()],n+i[0].length):-1},q:sn,Q:yn,s:mn,S:dn,u:Qe,U:tn,V:en,w:Je,W:nn,x:function(t,e,i){return M(t,n,e,i)},X:function(t,e,n){return M(t,i,e,n)},y:an,Y:rn,Z:on,"%":vn};function _(t,e){return function(n){var i,r,a,o=[],s=-1,c=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(o.push(t.slice(c,s)),null!=(r=Ve[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(a=e[i])&&(i=a(n,r)),o.push(i),c=s+1);return o.push(t.slice(c,s)),o.join("")}}function k(t,e){return function(n){var i,r,a=We(1900,void 0,1);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(!e||"Z"in a||(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||53<a.V)return null;"w"in a||(a.w=1),"Z"in a?(i=4<(r=(i=Be(We(a.y,0,1))).getUTCDay())||0===r?Ie.ceil(i):Ie(i),i=je.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(i=4<(r=(i=Le(We(a.y,0,1))).getDay())||0===r?Ce.ceil(i):Ce(i),i=Ae.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?Be(We(a.y,0,1)).getUTCDay():Le(We(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Be(a)):Le(a)}}function M(t,e,n,i){for(var r,a,o=0,s=e.length,c=n.length;o<s;){if(c<=i)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=w[r in Ve?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return x.x=_(n,x),x.X=_(i,x),x.c=_(e,x),b.x=_(n,b),b.X=_(i,b),b.c=_(e,b),{format:function(t){var e=_(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}Fe.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Te((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Ve={"-":"",_:" ",0:"0"},Ye=/^\s*\d+/,Ue=/^%/,$e=/[\\^$*+?|[\]().{}]/g;function Xe(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function Ge(t){return t.replace($e,"\\$&")}function Ke(t){return new RegExp("^(?:"+t.map(Ge).join("|")+")","i")}function Ze(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Je(t,e,n){var i=Ye.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Qe(t,e,n){var i=Ye.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function tn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function en(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function nn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function rn(t,e,n){var i=Ye.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function an(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(68<+i[0]?1900:2e3),n+i[0].length):-1}function on(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function sn(t,e,n){var i=Ye.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function cn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function un(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ln(t,e,n){var i=Ye.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function hn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function fn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function dn(t,e,n){var i=Ye.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function pn(t,e,n){var i=Ye.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function gn(t,e,n){var i=Ye.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function vn(t,e,n){var i=Ue.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function yn(t,e,n){var i=Ye.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function mn(t,e,n){var i=Ye.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function xn(t,e){return Xe(t.getDate(),e,2)}function bn(t,e){return Xe(t.getHours(),e,2)}function wn(t,e){return Xe(t.getHours()%12||12,e,2)}function _n(t,e){return Xe(1+Ae.count(Oe(t),t),e,3)}function kn(t,e){return Xe(t.getMilliseconds(),e,3)}function Mn(t,e){return kn(t,e)+"000"}function Sn(t,e){return Xe(t.getMonth()+1,e,2)}function Rn(t,e){return Xe(t.getMinutes(),e,2)}function Tn(t,e){return Xe(t.getSeconds(),e,2)}function An(t){var e=t.getDay();return 0===e?7:e}function En(t,e){return Xe(Ne.count(Oe(t)-1,t),e,2)}function Nn(t,e){var n=t.getDay();return t=4<=n||0===n?ze(t):ze.ceil(t),Xe(ze.count(Oe(t),t)+(4===Oe(t).getDay()),e,2)}function Cn(t){return t.getDay()}function zn(t,e){return Xe(Ce.count(Oe(t)-1,t),e,2)}function On(t,e){return Xe(t.getFullYear()%100,e,2)}function jn(t,e){return Xe(t.getFullYear()%1e4,e,4)}function Pn(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+Xe(e/60|0,"0",2)+Xe(e%60,"0",2)}function Dn(t,e){return Xe(t.getUTCDate(),e,2)}function In(t,e){return Xe(t.getUTCHours(),e,2)}function qn(t,e){return Xe(t.getUTCHours()%12||12,e,2)}function Fn(t,e){return Xe(1+je.count(Fe(t),t),e,3)}function Ln(t,e){return Xe(t.getUTCMilliseconds(),e,3)}function Bn(t,e){return Ln(t,e)+"000"}function Wn(t,e){return Xe(t.getUTCMonth()+1,e,2)}function Hn(t,e){return Xe(t.getUTCMinutes(),e,2)}function Vn(t,e){return Xe(t.getUTCSeconds(),e,2)}function Yn(t){var e=t.getUTCDay();return 0===e?7:e}function Un(t,e){return Xe(De.count(Fe(t)-1,t),e,2)}function $n(t,e){var n=t.getUTCDay();return t=4<=n||0===n?qe(t):qe.ceil(t),Xe(qe.count(Fe(t),t)+(4===Fe(t).getUTCDay()),e,2)}function Xn(t){return t.getUTCDay()}function Gn(t,e){return Xe(Ie.count(Fe(t)-1,t),e,2)}function Kn(t,e){return Xe(t.getUTCFullYear()%100,e,2)}function Zn(t,e){return Xe(t.getUTCFullYear()%1e4,e,4)}function Jn(){return"+0000"}function Qn(){return"%"}function ti(t){return+t}function ei(t){return Math.floor(t/1e3)}var ni=de();ni("d3-number",(function(t,e,n){var i,r;function a(t){return r(t)}function o(){a.locale({decimal:n||".",thousands:e||",",grouping:[3],currency:["$",""]})}return a.locale=function(e){return i=Me(e),r=i.format(t),this},o(),a.format=function(t,r,a,s){return(a||s)&&(e=a,n=s,o()),i.format(t)(r)},a.pattern=function(e){return e&&(t=e,r=i.format(e)),t},a})),ni("d3-time",(function(t){var e=He({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),n=e.format(t);function i(t){return n(t)}return i.format=function(t,n){return e.format(t)(n)},i.locale=function(){return e=He.apply(void 0,arguments),n=e.format(t),this},i.parse=function(t,n){return e.parse(t)(n)},i.parsePattern=function(t){return e.parse(t)},i}));var ii={id:function(t){return"".concat(t.source,"/").concat(t.key||t.title)},key:function(t){return String(t.key||t.title)},tags:function(t){return t.tags},min:function(t){return t.min},max:function(t){return t.max},type:function(t){return t.type},title:function(t){return String(t.title)},values:function(t){return t.values},value:function(t){return t},label:function(t){return t},formatter:function(t){return function(t){if("function"==typeof t.formatter)return t.formatter();var e=t.formatter||{};return ni(e.type||"d3-number")(e.format||"")}(t)}};function ri(t,e){var n=1<arguments.length&&void 0!==e?e:{},i=n.id,r=void 0===i?ii.id:i,a=n.key,o=void 0===a?ii.key:a,s=n.min,c=void 0===s?ii.min:s,u=n.max,l=void 0===u?ii.max:u,h=n.type,f=void 0===h?ii.type:h,d=n.tags,p=void 0===d?ii.tags:d,g=n.title,v=void 0===g?ii.title:g,y=n.values,m=void 0===y?ii.values:y,x=n.value,b=void 0===x?ii.value:x,w=n.label,_=void 0===w?ii.label:w,k=n.formatter,M=void 0===k?ii.formatter:k;return{id:function(){return r(t)},key:function(){return o(t)},raw:function(){return t},tags:function(){return p(t)},type:function(){return f(t)},min:function(){return c(t)},max:function(){return l(t)},title:function(){return v(t)},items:function(){return m(t)},formatter:function(){return M(t)},value:b,label:_}}var ai={diverging:function(t,e){if(0<(s=t.length))for(var n,i,r,a,o,s,c=0,u=t[e[0]].length;c<u;++c)for(a=o=0,n=0;n<s;++n)0<=(r=(i=t[e[n]][c])[1]-i[0])?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):i[0]=a},none:ce,silhouette:function(t,e){if(0<(n=t.length)){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}ce(t,e)}},expand:function(t,e){if(0<(i=t.length)){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}ce(t,e)}},wiggle:function(t,e){if(0<(r=t.length)&&0<(i=(n=t[e[0]]).length)){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,c=0,u=0;s<r;++s){for(var l=t[e[s]],h=l[o][1]||0,f=(h-(l[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}c+=h,u+=f*h}n[o-1][1]+=n[o-1][0]=a,c&&(a-=u/c)}n[o-1][1]+=n[o-1][0]=a,ce(t,e)}}},oi={ascending:function(t){var e=t.map(fe);return ue(t).sort((function(t,n){return e[t]-e[n]}))},insideout:function(t){var e,n,i,r,a=t.length,o=t.map(fe),s=(r=(i=t).map(he),ue(i).sort((function(t,e){return r[t]-r[e]}))),c=0,u=0,l=[],h=[];for(e=0;e<a;++e)n=s[e],c<u?(c+=o[n],l.push(n)):(u+=o[n],h.push(n));return h.reverse().concat(l)},none:ue,reverse:function(t){return ue(t).reverse()}};function si(t,e,n){for(var i={},r=e.stackKey,a=e.value,o=e.startProp||"start",s=e.endProp||"end",c=e.offset||"none",u=e.order||"none",l=e.valueRef||"",h=0,f={},d=0;d<t.items.length;d++){var p=t.items[d],g=l?p[l]:null;if(g&&g.source){var v="".concat(g.source.key||"","/").concat(g.source.field);f[v]||(f[v]=g.source)}var y=r(p);i[y]=i[y]||{items:[]},i[y].items.push(p),h=Math.max(h,i[y].items.length)}var m,x,b,w,_=Array.apply(null,{length:h}).map(Number.call,Number),k=Object.keys(i).map((function(t){return i[t].items}));function M(t){var e,n,i=m.apply(this,arguments),r=t.length,a=i.length,o=new Array(a);for(e=0;e<a;++e){for(var s,c=i[e],u=o[e]=new Array(r),l=0;l<r;++l)u[l]=s=[0,+w(t[l],c,l,t)],s.data=t[l];u.key=c}for(e=0,n=x(o);e<a;++e)o[n[e]].index=e;return b(o,n),o}for(var S=(m=yt([]),x=ue,b=ce,w=le,M.keys=function(t){return arguments.length?(m="function"==typeof t?t:yt(Vt.call(t)),M):m},M.value=function(t){return arguments.length?(w="function"==typeof t?t:yt(+t),M):w},M.order=function(t){return arguments.length?(x=null==t?ue:"function"==typeof t?t:yt(Vt.call(t)),M):x},M.offset=function(t){return arguments.length?(b=null==t?ce:t,M):b},M.keys(_).value((function(t,e){return t[e]?a(t[e]):0})).order(oi[u]).offset(ai[c]))(k),R=[],T=0;T<S.length;T++)for(var A=S[T],E=0;E<A.length;E++){var N=A[E],C=A[E].data[A.key];C&&(C[o]={value:N[0]},C[s]={value:N[1]},R.push(N[0],N[1]))}var z=Object.keys(f).map((function(t){var e=n(f[t].key);return e?e.field(f[t].field):null})).filter((function(t){return!!t})),O=ri({title:z.map((function(t){return t.title()})).join(", "),min:Math.min.apply(Math,R),max:Math.max.apply(Math,R),type:"measure",formatter:z[0]?z[0].formatter:void 0});t.fields.push(O)}function ci(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={},i=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).logger;if(Array.isArray(t))n.items=t.map((function(t){return{value:t,label:String(t)}}));else if(t){if("collection"in t)n=T({},e.collection(t.collection));else{var r=e.dataset?e.dataset(t.source):null,a=t.value||function(t){return t},o=t.label||function(t){return t};if(t.groupBy||t.mapTo)i.warn('Deprecated "data" configuration',t),n.items=[];else if(t.hierarchy)n.root=r.hierarchy?r.hierarchy(t.hierarchy):null,n.fields=r.fields();else if(t.items)n.items=t.items.map((function(t){return{value:a(t),label:String(o(t))}}));else if(t.extract){var s=Array.isArray(t.extract)?t.extract:[t.extract];n.items=[];var c,u=[];(s.forEach((function(t){var i,a=t.source?e.dataset(t.source):r;a&&((i=n.items).push.apply(i,I(a.extract(t))),void 0!==t.field&&u.push(a.field(t.field)))})),u.length&&(n.fields=u),t.amend&&Array.isArray(t.amend))&&(c=n.items).push.apply(c,I(t.amend))}else if(void 0!==t.field&&r){var l=r.field(t.field);l&&(n.fields||(n.fields=[]),n.fields.push(l),"value"in t||(a=l.value||function(t){return t},o=l.label||function(t){return t},n.value=a),n.items=l.items().map((function(e){return{value:a(e),label:String(o(e)),source:{field:t.field}}})))}else t.fields&&t.fields.forEach((function(t){var i,a="object"===w(t)&&t.source?e.dataset(t.source):r;a&&(i="object"===w(t)&&void 0!==t.field?a.field(t.field):a.field(t))&&(n.fields||(n.fields=[]),n.fields.push(i))}));n.items&&t.map&&(n.items=n.items.map(t.map))}t&&t.stack&&si(n,t.stack,e.dataset)}return t&&!Array.isArray(t)&&"function"==typeof t.filter&&n.items&&(n.items=n.items.filter(t.filter)),t&&!Array.isArray(t)&&"function"==typeof t.sort&&n.items&&(n.items=n.items.sort(t.sort)),n}function ui(t,e,n){var i,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:ci;if(t.data){var a=r(t.data,e,n);if(a&&a.fields&&a.fields[0])return a.fields[0].formatter()}if(i=t.formatter?"".concat(t.formatter,"-").concat(t.type||"number"):t.type||"d3-number",n.formatter.has(i))return n.formatter.get(i)(t.format||"");throw new Error("Formatter of type '".concat(i,"' was not found"))}function li(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var hi,fi,di=(1===(hi=li).length&&(fi=hi,hi=function(t,e){return li(fi(t),e)}),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;hi(t[r],e)<0?n=1+r:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;0<hi(t[r],e)?i=r:n=1+r}return n}}).right;var pi=Math.sqrt(50),gi=Math.sqrt(10),vi=Math.sqrt(2);function yi(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return 0<=r?(pi<=a?10:gi<=a?5:vi<=a?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(pi<=a?10:gi<=a?5:vi<=a?2:1)}function mi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var xi="$";function bi(){}function wi(t,e){var n=new bi;if(t instanceof bi)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,a=t.length;if(null==e)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e(i=t[r],r,t),i)}else if(t)for(var o in t)n.set(o,t[o]);return n}bi.prototype=wi.prototype={constructor:bi,has:function(t){return xi+t in this},get:function(t){return this[xi+t]},set:function(t,e){return this[xi+t]=e,this},remove:function(t){var e=xi+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===xi&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===xi&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===xi&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===xi&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===xi&&++t;return t},empty:function(){for(var t in this)if(t[0]===xi)return!1;return!0},each:function(t){for(var e in this)e[0]===xi&&t(this[e],e.slice(1),this)}};var _i=Array.prototype,ki=_i.map,Mi=_i.slice,Si={name:"implicit"};function Ri(){var t=wi(),e=[],n=[],i=Si;function r(r){var a=r+"",o=t.get(a);if(!o){if(i!==Si)return i;t.set(a,o=e.push(r))}return n[(o-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=wi();for(var i,a,o=-1,s=n.length;++o<s;)t.has(a=(i=n[o])+"")||t.set(a,e.push(i));return r},r.range=function(t){return arguments.length?(n=Mi.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Ri(e,n).unknown(i)},mi.apply(r,arguments),r}function Ti(){var t,e,n=Ri().unknown(void 0),i=n.domain,r=n.range,a=[0,1],o=!1,s=0,c=0,u=.5;function l(){var n=i().length,l=a[1]<a[0],h=a[+l],f=a[1-l];t=(f-h)/Math.max(1,n-s+2*c),o&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*u,e=t*(1-s),o&&(h=Math.round(h),e=Math.round(e));var d=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a}(n).map((function(e){return h+t*e}));return r(l?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),l()):i()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,l()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,c=+t),l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),l()):s},n.paddingOuter=function(t){return arguments.length?(c=+t,l()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.copy=function(){return Ti(i(),a).round(o).paddingInner(s).paddingOuter(c).align(u)},mi.apply(l(),arguments)}function Ai(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ei(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ni(){}var Ci="\\s*([+-]?\\d+)\\s*",zi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ji=/^#([0-9a-f]{3,8})$/,Pi=new RegExp("^rgb\\("+[Ci,Ci,Ci]+"\\)$"),Di=new RegExp("^rgb\\("+[Oi,Oi,Oi]+"\\)$"),Ii=new RegExp("^rgba\\("+[Ci,Ci,Ci,zi]+"\\)$"),qi=new RegExp("^rgba\\("+[Oi,Oi,Oi,zi]+"\\)$"),Fi=new RegExp("^hsl\\("+[zi,Oi,Oi]+"\\)$"),Li=new RegExp("^hsla\\("+[zi,Oi,Oi,zi]+"\\)$"),Bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wi(){return this.rgb().formatHex()}function Hi(){return this.rgb().formatRgb()}function Vi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ji.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Yi(e):3===n?new Xi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new Xi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new Xi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Pi.exec(t))?new Xi(e[1],e[2],e[3],1):(e=Di.exec(t))?new Xi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ii.exec(t))?Ui(e[1],e[2],e[3],e[4]):(e=qi.exec(t))?Ui(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Fi.exec(t))?Ji(e[1],e[2]/100,e[3]/100,1):(e=Li.exec(t))?Ji(e[1],e[2]/100,e[3]/100,e[4]):Bi.hasOwnProperty(t)?Yi(Bi[t]):"transparent"===t?new Xi(NaN,NaN,NaN,0):null}function Yi(t){return new Xi(t>>16&255,t>>8&255,255&t,1)}function Ui(t,e,n,i){return i<=0&&(t=e=n=NaN),new Xi(t,e,n,i)}function $i(t,e,n,i){return 1===arguments.length?((r=t)instanceof Ni||(r=Vi(r)),r?new Xi((r=r.rgb()).r,r.g,r.b,r.opacity):new Xi):new Xi(t,e,n,null==i?1:i);var r}function Xi(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Gi(){return"#"+Zi(this.r)+Zi(this.g)+Zi(this.b)}function Ki(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Zi(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ji(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new tr(t,e,n,i)}function Qi(t){if(t instanceof tr)return new tr(t.h,t.s,t.l,t.opacity);if(t instanceof Ni||(t=Vi(t)),!t)return new tr;if(t instanceof tr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,c=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=c<.5?a+r:2-a-r,o*=60):s=0<c&&c<1?0:o,new tr(o,s,c,t.opacity)}function tr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function er(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function nr(t){return function(){return t}}function ir(t){return 1==(t=+t)?rr:function(e,n){return n-e?(i=e,r=n,a=t,i=Math.pow(i,a),r=Math.pow(r,a)-i,a=1/a,function(t){return Math.pow(i+t*r,a)}):nr(isNaN(e)?n:e);var i,r,a}}function rr(t,e){var n,i,r=e-t;return r?(n=t,i=r,function(t){return n+t*i}):nr(isNaN(t)?e:t)}Ai(Ni,Vi,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Wi,formatHex:Wi,formatHsl:function(){return Qi(this).formatHsl()},formatRgb:Hi,toString:Hi}),Ai(Xi,$i,Ei(Ni,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Xi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Xi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gi,formatHex:Gi,formatRgb:Ki,toString:Ki})),Ai(tr,(function(t,e,n,i){return 1===arguments.length?Qi(t):new tr(t,e,n,null==i?1:i)}),Ei(Ni,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new tr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Xi(er(240<=t?t-240:120+t,r,i),er(t,r,i),er(t<120?240+t:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ar=function t(e){var n=ir(e);function i(t,e){var i=n((t=$i(t)).r,(e=$i(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),o=rr(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function or(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function sr(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=hr(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var cr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ur=new RegExp(cr.source,"g");function lr(t,e){var n,i,r,a,o,s=cr.lastIndex=ur.lastIndex=0,c=-1,u=[],l=[];for(t+="",e+="";(n=cr.exec(t))&&(i=ur.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),u[c]?u[c]+=r:u[++c]=r),(n=n[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,l.push({i:c,x:or(n,i)})),s=ur.lastIndex;return s<e.length&&(r=e.slice(s),u[c]?u[c]+=r:u[++c]=r),u.length<2?l[0]?(o=l[0].x,function(t){return o(t)+""}):(a=e,function(){return a}):(e=l.length,function(t){for(var n,i=0;i<e;++i)u[(n=l[i]).i]=n.x(t);return u.join("")})}function hr(t,e){var n,i,r=typeof e;return null==e||"boolean"==r?nr(e):("number"==r?or:"string"==r?(n=Vi(e))?(e=n,ar):lr:e instanceof Vi?ar:e instanceof Date?function(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=hr(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?sr:or:function(t,e){e=e||[];var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(n=0;n<i;++n)r[n]=t[n]*(1-a)+e[n]*a;return r}}))(t,e)}function fr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function dr(t){return+t}var pr=[0,1];function gr(t){return t}function vr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function yr(t){var e,n=t[0],i=t[t.length-1];return i<n&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function mr(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return a=r<i?(i=vr(r,i),n(o,a)):(i=vr(i,r),n(a,o)),function(t){return a(i(t))}}function xr(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=vr(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=di(t,e,1,i)-1;return a[n](r[n](e))}}function br(t,e){return h=l=pr,f=hr,d=gr,i.invert=function(t){return d(a((u=u||s(h,l.map(r),or))(t)))},i.domain=function(t){return arguments.length?(l=ki.call(t,dr),d===gr||(d=yr(l)),n()):l.slice()},i.range=function(t){return arguments.length?(h=Mi.call(t),n()):h.slice()},i.rangeRound=function(t){return h=Mi.call(t),f=fr,n()},i.clamp=function(t){return arguments.length?(d=t?yr(l):gr,i):d!==gr},i.interpolate=function(t){return arguments.length?(f=t,n()):f},i.unknown=function(t){return arguments.length?(o=t,i):o},function(t,e){return r=t,a=e,n()}(t,e);function n(){return s=2<Math.min(l.length,h.length)?xr:mr,c=u=null,i}function i(t){return isNaN(t=+t)?o:(c=c||s(l.map(r),h,f))(r(d(t)))}var r,a,o,s,c,u,l,h,f,d}function wr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[1<i.length?i[0]+i.slice(2):i,+t.slice(n+1)]}function _r(t){return(t=wr(Math.abs(t)))?t[1]:NaN}var kr,Mr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sr(t){if(!(e=Mr.exec(t)))throw new Error("invalid format: "+t);var e;return new Rr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Rr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Tr(t,e){var n=wr(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Sr.prototype=Rr.prototype,Rr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ar={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Tr(100*t,e)},r:Tr,s:function(t,e){var n=wr(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(kr=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:o<a?i+new Array(a-o+1).join("0"):0<a?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+wr(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Er(t){return t}var Nr,Cr,zr,Or=Array.prototype.map,jr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pr(t){var e,n,i,r=void 0===t.grouping||void 0===t.thousands?Er:(n=Or.call(t.grouping,Number),i=t.thousands+"",function(t,e){for(var r=t.length,a=[],o=0,s=n[0],c=0;0<r&&0<s&&(e<c+s+1&&(s=Math.max(1,e-c)),a.push(t.substring(r-=s,r+s)),!((c+=s+1)>e));)s=n[o=(o+1)%n.length];return a.reverse().join(i)}),a=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",c=void 0===t.numerals?Er:(e=Or.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Sr(t)).fill,n=t.align,i=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,y=t.trim,m=t.type;"n"===m?(g=!0,m="g"):Ar[m]||(void 0===v&&(v=12),y=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===f?a:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?o:/[%p]/.test(m)?u:"",w=Ar[m],_=/[defgprs%]/.test(m);function k(t){var a,o,u,f=x,k=b;if("c"===m)k=w(t)+k,t="";else{var M=(t=+t)<0;if(t=isNaN(t)?h:w(Math.abs(t),v),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;0<r&&(r=0)}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),M&&0==+t&&(M=!1),f=(M?"("===i?i:l:"-"===i||"("===i?"":i)+f,k=("s"===m?jr[8+kr/3]:"")+k+(M&&"("===i?")":""),_)for(a=-1,o=t.length;++a<o;)if((u=t.charCodeAt(a))<48||57<u){k=(46===u?s+t.slice(a+1):t.slice(a))+k,t=t.slice(0,a);break}}g&&!d&&(t=r(t,1/0));var S=f.length+t.length+k.length,R=S<p?new Array(p-S+1).join(e):"";switch(g&&d&&(t=r(R+t,R.length?p-k.length:1/0),R=""),n){case"<":t=f+t+k+R;break;case"=":t=f+R+t+k;break;case"^":t=R.slice(0,S=R.length>>1)+f+t+k+R.slice(S);break;default:t=R+f+t+k}return c(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=Sr(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(_r(e)/3))),r=Math.pow(10,-i),a=jr[8+i/3];return function(t){return n(r*t)+a}}}}function Dr(t,e,n,i){var r,a,o,s,c,u,l,h,f,d,p,g,v=(a=t,o=e,s=n,c=Math.abs(o-a)/Math.max(0,s),u=Math.pow(10,Math.floor(Math.log(c)/Math.LN10)),pi<=(l=c/u)?u*=10:gi<=l?u*=5:vi<=l&&(u*=2),o<a?-u:u);switch((i=Sr(null==i?",f":i)).type){case"s":var y=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN((p=v,g=y,r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_r(g)/3)))-_r(Math.abs(p)))))||(i.precision=r),zr(i,y);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN((f=v,d=Math.max(Math.abs(t),Math.abs(e)),f=Math.abs(f),d=Math.abs(d)-f,r=Math.max(0,_r(d)-_r(f))+1))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN((h=v,r=Math.max(0,-_r(Math.abs(h)))))||(i.precision=r-2*("%"===i.type))}return Cr(i)}function Ir(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&0<n)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=yi(t,e,n))||!isFinite(o))return[];if(0<o)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(r=Math.ceil(t-e+1));++s<r;)a[s]=(t-s)/o;return i&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Dr(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),a=0,o=r.length-1,s=r[a],c=r[o];return c<s&&(i=s,s=c,c=i,i=a,a=o,o=i),0<(i=yi(s,c,n))?i=yi(s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i,n):i<0&&(i=yi(s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i,n)),0<i?(r[a]=Math.floor(s/i)*i,r[o]=Math.ceil(c/i)*i,e(r)):i<0&&(r[a]=Math.ceil(s*i)/i,r[o]=Math.floor(c*i)/i,e(r)),t},t}function qr(){var t=br(gr,gr);return t.copy=function(){return e=t,qr().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},mi.apply(t,arguments),Ir(t)}function Fr(t){return void 0===t?function(t){return t}:function(e){return t(e)}}function Lr(t){return Math.max(0,Math.min(1,t))}function Br(t){return"object"===w(t)}function Wr(t,e,n){for(var i=Math.abs(e-n)/(t+1),r=[],a=1;a<=t;a++){var o=a*i;r.push(e<n?e+o:e-o)}return r}function Hr(t,e,n){if(1===t.length)return t;for(var i=t.concat([]),r=0;r<t.length;r++){var a=t[r],o=t[r+1];0===r&&a!==n.start()?(i.push.apply(i,I(Wr(e,a,o))),a-=o-a,o=t[r]):r===t.length-1&&o!==n.end()&&(o=a+(a-t[r-1])),i.push.apply(i,I(Wr(e,a,o)))}return i.filter((function(t){return t>=n.min()&&t<=n.max()}))}function Vr(t){var e=t.distance,n=t.scale,i=t.minorCount,r=void 0===i?0:i,a=t.unitDivider,o=void 0===a?100:a,s=t.formatter,c=void 0===s?void 0:s,u=V(o)||V(e)?2:Math.max(e/o,2),l=Math.min(1e3,Math.round(u)),h=n.ticks(l);h.length<=1&&(h=n.ticks(l+1));var f=0<r?Hr(h,r,n):h;f.sort((function(t,e){return t-e}));var d=f.map(Fr(c));return f.map((function(t,e){var i=n(t);return{position:i,start:i,end:i,label:d[e],value:t,isMinor:-1===h.indexOf(t)}}))}function Yr(t){var e=t.distance,n=t.scale,i=t.minorCount,r=void 0===i?0:i,a=t.unitDivider,o=void 0===a?100:a,s=t.formatter,c=void 0===s?void 0:s,u=V(o)||V(e)?2:Math.max(e/o,2),l=Math.min(1e3,Math.round(u)),h=10<l?10:l;n.nice(h);var f=n.ticks(l),d=0<r?Hr(f,r,n):f;d.sort((function(t,e){return t-e}));var p=d.map(Fr(c));return d.map((function(t,e){var i=n(t);return{position:i,start:i,end:i,label:p[e],value:t,isMinor:-1===f.indexOf(t)}}))}function Ur(t){var e,n,i,r,a,o,s,c,u,l,h,f=t.settings,d=t.scale,p=t.distance,g=t.formatter,v=void 0===g?function(t){return t}:g,y=f.minorTicks&&!V(f.minorTicks.count)?Math.min(100,f.minorTicks.count):0;if(Array.isArray(f.ticks.values)){var m=f.ticks.values.filter((function(t){return"object"===w(t)?!V(t.value):!V(t)}));s={values:m,scale:d.copy(),formatter:v},c=s.values,u=s.scale,l=s.formatter,h=void 0===l?function(t){return t}:l,e=c.sort((function(t,e){return(Br(t)?t.value:t)-(Br(e)?e.value:e)})).filter((function(t,e,n){var i=Br(t)?t.value:t;return i<=u.max()&&i>=u.min()&&n.indexOf(t)===e})).map((function(t){var e=Br(t),n=e?t.value:t,i=u(n);return{position:i,value:n,label:e&&void 0!==t.label?t.label:h(n),isMinor:!!e&&!!t.isMinor,start:e&&!isNaN(t.start)?Lr(u(t.start)):i,end:e&&!isNaN(t.end)?Lr(u(t.end)):i}}))}else if(V(f.ticks.count))e=(f.ticks.tight?Yr:Vr)({distance:p,minorCount:y,unitDivider:f.ticks.distance,scale:d,formatter:v}),f.ticks.forceBounds&&function(t,e,n){var i=t.map((function(t){return t.position})),r=e.range();-1===i.indexOf(r[0])?t.splice(0,0,{position:r[0],start:r[0],end:r[0],label:n(e.start()),isMinor:!1,value:e.start()}):t[0]&&t[0].isMinor&&(t[0].isMinor=!1);var a=t[t.length-1];-1===i.indexOf(r[1])?t.push({position:r[1],start:r[1],end:r[1],label:n(e.end()),isMinor:!1,value:e.end()}):a&&a.isMinor&&(a.isMinor=!1)}(e,d,v);else{var x=Math.min(1e3,f.ticks.count);n={count:x,minorCount:y,scale:d.copy(),formatter:v},i=n.count,r=n.minorCount,a=n.scale,o=n.formatter,e=a.ticks((i-1)*r+i).map((function(t,e){var n=a(t);return{position:n,start:n,end:n,label:o(t),isMinor:e%(r+1)!=0,value:t}}))}return e}function $r(t,e,n){var i=0<arguments.length&&void 0!==t?t:{},r=1<arguments.length&&void 0!==e?e:{},a=2<arguments.length&&void 0!==n?n:{},o={};return Object.keys(r).forEach((function(t){var e=w(i[t]);o[t]="function"===e?i[t](a):"undefined"===e?r[t]:i[t]})),o}Nr=Pr({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Cr=Nr.format,zr=Nr.formatPrefix;var Xr={min:NaN,max:NaN,expand:NaN,include:[],invert:!1},Gr={tight:!1,forceBounds:!1,values:void 0,count:NaN,distance:100},Kr={count:NaN};function Zr(t,e){t.instance||(t.instance=e.copy(),t.instance.domain([e.start(),e.end()]),t.instance.clamp(!0),t.instance.range(t.invert?[1,0]:[0,1]))}function Jr(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=qr(),a={instance:null,invert:!1},o={data:n,resources:i},s=$r(e,Xr,o);function c(t){return V(t)?NaN:r(t)}s.ticks=$r(e.ticks,Gr,o),s.minorTicks=$r(e.minorTicks,Kr,o),c.data=function(){return n},c.invert=function(t){return r.invert(t)},c.rangeRound=function(t){return r.rangeRound(t),c},c.clamp=function(t){var e=!(0<arguments.length&&void 0!==t)||t;return r.clamp(e),c},c.cachedTicks=function(){return t},c.clearTicksCache=function(){return t=void 0,this},c.ticks=function(e){return t=null!==e&&"object"===w(e)?(e.settings=e.settings||{},e.settings=x(!0,{},s,e.settings),e.scale=c,Ur(e)):r.ticks(e)},c.nice=function(t){return r.nice(t),c},c.tickFormat=function(t,e){return r.tickFormat(t,e)},c.interpolate=function(t){return r.interpolate(t),c},c.domain=function(t){return arguments.length?(r.domain(t),a.instance&&a.instance.domain([c.start(),c.end()]),c):r.domain()},c.range=function(t){return arguments.length?(r.range(t),c):r.range()},c.start=function(){return c.domain()[0]},c.end=function(){return c.domain()[this.domain().length-1]},c.min=function(){return Math.min(this.start(),this.end())},c.max=function(){return Math.max(this.start(),this.end())},c.classify=function(t){for(var e=(c.start()-c.end())/t,n=[c.end()],i=[],r=e/2,a=0;a<t;a++){var o=n[n.length-1]||0,s=o+e,u=c(o+r);n.push.apply(n,[s,s]),i.push.apply(i,[u,u])}return n.pop(),c.domain(n),c.range(i),c},c.copy=function(){var t=Jr(e,n,i);return t.domain(c.domain()),t.range(c.range()),t.clamp(r.clamp()),t},c.norm=function(t){return Zr(a,c),a.instance(t)},c.normInvert=function(t){return Zr(a,c),a.instance.invert(t)};var u=function(t,e){var n=+t.min,i=+t.max,r=0,a=1;if(e&&e[0]){var o=e.map((function(t){return t.min()})).filter((function(t){return!isNaN(t)})),s=e.map((function(t){return t.max()})).filter((function(t){return!isNaN(t)}));if(r=o.length?Math.min.apply(Math,I(o)):Number.NaN,a=s.length?Math.max.apply(Math,I(s)):Number.NaN,isNaN(r)||isNaN(a))r=-1,a=1;else if(r===a&&0===r)r=-1,a=1;else if(r===a&&r)r-=Math.abs(.1*r),a+=Math.abs(.1*a);else if(!isNaN(t.expand)){var c=a-r;r-=c*t.expand,a+=c*t.expand}if(Array.isArray(t.include)){var u=t.include.filter((function(t){return!isNaN(t)}));r=Math.min.apply(Math,I(u).concat([r])),a=Math.max.apply(Math,I(u).concat([a]))}}return{mini:isNaN(n)?r:n,maxi:isNaN(i)?a:i}}(s,n?n.fields:[]),l=u.mini,h=u.maxi;return c.domain([l,h]),c.range(s.invert?[1,0]:[0,1]),a.invert=s.invert,c}var Qr={padding:0,paddingInner:NaN,paddingOuter:NaN,align:.5,invert:!1,maxPxStep:NaN,range:[0,1]};function ta(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={data:e,resources:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}},i=$r(t,Qr,n),r=e.items||[],a={},o=[],s=[];function c(t,n){t.data=function(){return e},t.datum=function(t){return r[a[t]]},t.start=function(){return t.domain()[0]},t.end=function(){return t.domain()[t.domain().length-1]},t.labels=function(){return s},t.ticks=function(e){var i,r,a,o,s,c,u=0<arguments.length&&void 0!==e?e:{};return u.scale=t,i=u,n.trackBy,r=i.scale,a=r.domain(),o=r.data().items,s=r.labels?r.labels():a,c=r.bandwidth(),a.map((function(t,e){var n=r(t);return{position:n+c/2,label:"".concat(s[e]),data:o?o[e]:void 0,start:n,end:n+c}}))}}var u=Ti();c(u,t),u.pxScale=function(e){var n=i.maxPxStep;if(isNaN(n))return u;var r=u.domain().length,a=Math.max(1,r-u.paddingInner()+2*u.paddingOuter());if(e<=a*n)return u;var o=u.copy();o.type=u.type,c(o,t);var s=a*n/e,l=(1-s)*u.align();return o.range(i.invert?[s+l,l]:[l,s+l]),o};for(var l="function"==typeof t.value?t.value:function(t){return t.datum.value},h="function"==typeof t.label?t.label:function(t){return t.datum.label},f=0;f<r.length;f++){var d=x({datum:r[f]},n),p=l(d,f);-1===o.indexOf(p)&&(o.push(p),s.push(h(d,f)),a[p]=f)}return u.domain(o),u.range(i.invert?i.range.slice().reverse():i.range),u.padding(isNaN(i.padding)?0:i.padding),isNaN(i.paddingInner)||u.paddingInner(i.paddingInner),isNaN(i.paddingOuter)||u.paddingOuter(i.paddingOuter),u.align(isNaN(i.align)?.5:i.align),u}var ea={depth:0};function na(t,e,n){return t.ancestors().map((function(t){return e(x({datum:t.data},n))})).reverse().slice(1).toString()}var ia=function(t){return t.min()},ra=function(t){return t.max()};function aa(t,e){var n=t&&!isNaN(t.min),i=t&&!isNaN(t.max),r=n?+t.min:0,a=i?+t.max:1;if(e&&e.length){if(!n){var o=e.map(ia).filter(H);r=o.length?Math.min.apply(Math,I(o)):r}if(!i){var s=e.map(ra).filter(H);a=s.length?Math.max.apply(Math,I(s)):a}}return[r,a]}var oa={domain:[],range:[],invert:!1,min:NaN,max:NaN};function sa(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=Jr(t,e,n).clamp(!0).interpolate(ar),r=$r(t,oa,{data:e,resources:n}),a=Array.isArray(r.domain)&&r.domain.length,o=Array.isArray(r.range)&&r.range.length,s=i;x(!0,s,i);var c=D(aa(r,e?e.fields:[]),2),u=c[0],l=c[1],h=a?r.domain.length:-1,f=n.theme?n.theme.palette("sequential",0<h?h:2):[],d=o?r.range:f;return s.range(r.invert?d.slice().reverse():d.slice()),s.domain(a?r.domain:function(t,e,n){var i=t.length;if(2===i)return[e,n];var r=[],a=(n-e)/(i-1);r.push(e);for(var o=1;o<i-1;o++)r.push(e+a*o);return r.push(n),r}(s.range(),u,l)),s}var ca={domain:[],range:[],invert:!1,min:NaN,max:NaN,nice:!1};function ua(t,e,n,i){n=t[0],i=t&&2<=t.length?t[t.length-1]:i;var r=sa().domain([n,i]).range(e);return[n].concat(I(function(t){for(var e=[],n=0;n<t.length-1;n++)e.push((t[n]+t[n+1])/2);return e}(t)),[i]).map((function(t){return r(t)}))}var la={domain:[],range:[]};var ha={domain:[],range:[],unknown:void 0},fa={domain:[],range:[],override:!1};var da=de();function pa(t){return t.root?"h-band":t.fields&&t.fields[0]&&-1===t.fields.map((function(t){return"dimension"===t.type()?"band":"linear"})).indexOf("linear")?"band":"linear"}function ga(t,e,n){var i=t.data;t.source&&(n.logger.warn("Deprecated: Scale data source configuration"),i={extract:[]},(Array.isArray(t.source)?t.source:[t.source]).forEach((function(t){i.extract.push({field:t})})));var r,a=ci(i,e,n),o=t.type||pa(a);return"color"===o&&(o=a.fields&&a.fields[0]&&"dimension"===a.fields[0].type()?"categorical-color":"sequential-color"),n.scale.has(o)&&((r=(r=n.scale.get(o))(t,a,{theme:n.theme,logger:n.logger})).type=o),r}da("linear",Jr),da("band",ta),da("h-band",(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r={data:n,resources:i},a=$r(e,Qr,r);a.ticks=$r(e.ticks,ea,r),a.value="function"==typeof e.value?e.value:function(t){return t.datum.value},a.label="function"==typeof e.label?e.label:function(t){return t.datum.value};function o(t){var e=String(t),n=h[e];return s(n?a.invert?n.rightEdge:n.leftEdge:e)}var s=ta(a),c=function(t,e,n){var i=e.ticks.depth,r=e.value,a=e.label,o=[],s=[],c={},u=[],l=0;if(!t)return{values:o,labels:s,items:c,ticks:u};t.eachAfter((function(t){if(0<t.depth){var e=na(t,r,n),h=t.leaves()||[t],f=r(x({datum:t.data},n)),d=a(x({datum:t.data},n)),p=Array.isArray(t.children),g={key:e,count:h.length,value:f,label:d,leftEdge:na(h[0],r,n),rightEdge:na(h[Math.max(h.length-1,0)],r,n),node:t};p?(o.push("SPACER_".concat(l,"_SPACER")),l++):(o.push(e),s.push(d)),(i<=0&&!p||t.depth===i)&&u.push(g),c[e]=g}}));var h=t.height-1;return 0<h&&o.splice(-h),{values:o,labels:s,items:c,ticks:u}}(n.root,a,r),u=c.values,l=c.labels,h=c.items,f=c.ticks;x(!0,o,s),o.bandwidth=function(t){var e=h[String(t)],n=s.bandwidth();if(!e||e.isLeaf)return n;var i=o(e.leftEdge),r=o(e.rightEdge);return Math.abs(i-r)+n},o.step=function(t){var e=h[String(t)],n=e?e.count:1,i=s.step();return i*n},o.data=function(){return n},o.datum=function(t){var e=h[String(t)];return e?e.node.data:null},o.copy=function(){return t(e,n,i)},o.labels=function(){return l},o.ticks=function(){return f.map((function(t){var e=o(t.key),n=o.bandwidth(t.key);return{position:e+n/2,label:t.label,data:t.node.data,start:e,end:e+n}}))};var d=s.pxScale;return o.pxScale=function(t){return s=d(t),o},o.domain(u),o})),da("sequential-color",sa),da("threshold-color",(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=function t(){var e,n=[.5],i=[0,1],r=1;function a(t){return t<=t?i[di(n,t,0,r)]:e}return a.domain=function(t){return arguments.length?(n=Mi.call(t),r=Math.min(n.length,i.length-1),a):n.slice()},a.range=function(t){return arguments.length?(i=Mi.call(t),r=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(t){var e=i.indexOf(t);return[n[e-1],n[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(i).unknown(e)},mi.apply(a,arguments)}(),r=$r(t,ca,{data:e,resources:n}),a=Array.isArray(r.domain)&&r.domain.length,o=Array.isArray(r.range)&&r.range.length;function s(t){return V(t)?NaN:i(t)}Object.keys(i).forEach((function(t){return s[t]=i[t]}));var c=D(aa(r,e.fields),2),u=c[0],l=c[1],h=a?r.domain.length:-1,f=n.theme?n.theme.palette("sequential",0<h?h:2):[],d=o?r.range:f,p=[];return p=a?r.domain:r.nice?function(t,e,n){var i=2===t.length?10:Math.max(1,t.length),r=qr().domain([e,n]).nice(i).ticks(i);if(!t||!t.length)return r;for(var a=Math.max(0,t.length-1);r.length>a;)r[0]-e<=n-r[r.length-1]?r.shift():r.pop();return r}(d,u,l):[u+(l-u)/2],d.length>p.length+1?p=function(t,e,n){var i=t.length;if(2===i)return[e+(n-e)/2];for(var r=[],a=(n-e)/i,o=1;o<i;o++)r.push(e+a*o);return r}(d,u,l):d.length<p.length+1&&(d=ua(p,d,u,l)),s.data=function(){return e},s.range(r.invert?d.slice().reverse():d),s.domain(p),s})),da("categorical-color",(function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=function(t,e,n){for(var i=0<arguments.length&&void 0!==t?t:{},r=1<arguments.length&&void 0!==e?e:{},a=2<arguments.length&&void 0!==n?n:{},o=Ri(),s={data:r,resources:a},c=$r(i,la,s),u="function"==typeof i.value?i.value:function(t){return t.datum.value},l="function"==typeof i.label?i.label:function(t){return t.datum.label},h=r.items||[],f={},d=[],p=[],g=0;g<h.length;g++){var v=x({datum:h[g]},s),y=u(v,g);-1===d.indexOf(y)&&(d.push(y),p.push(l(v,g)),f[y]=g)}return o.data=function(){return r},o.labels=function(){return p},o.label=function(t){return p[d.indexOf(t)]},o.datum=function(t){return h[f[t]]},o.range(c.range),Array.isArray(c.domain)&&c.domain.length?o.domain(c.domain):o.domain(d),o}(e,n,i),a=i.theme,o=$r(e,ha,{data:n,resources:i});if(o.explicit=$r(e.explicit,fa,{data:n,resources:i}),t=Array.isArray(o.range)&&0!==o.range.length?o.range.slice():a?a.palette("categorical",r.domain().length).slice():[],o.unknown)r.unknown(o.unknown);else if(a&&a.palette("unknown")){var s=a.palette("unknown");r.unknown(s[0])}if(Array.isArray(o.explicit.domain)&&o.explicit.domain.length){for(var c=r.domain().slice(),u=o.explicit.domain,l=Array.isArray(o.explicit.range)?o.explicit.range:[],h=Math.floor(c.length/t.length),f=1;f<h+1;f*=2)t=t.concat(t);if(o.explicit.override)for(var d=0;d<u.length;d++){var p=c.indexOf(u[d]);-1<p&&(t[p]=l[d])}else u.map((function(t,e){return[c.indexOf(t),t,l[e]]})).sort((function(t,e){return t[0]-e[0]})).forEach((function(e){var n=c.indexOf(e[1]);-1!==n&&t.splice(n,0,e[2])}));t.length=c.length}return r.range(t),r}));var va={};function ya(){ya.init.call(this)}va.isObject=function(t){return"object"==typeof t&&null!==t},va.isNumber=function(t){return"number"==typeof t},va.isUndefined=function(t){return void 0===t},va.isFunction=function(t){return"function"==typeof t};var ma=ya;(ya.EventEmitter=ya).prototype._events=void 0,ya.prototype._maxListeners=void 0,ya.defaultMaxListeners=10,ya.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},ya.prototype.setMaxListeners=function(t){if(!va.isNumber(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},ya.prototype.emit=function(t){var e,n,i,r,a,o;if(this._events||(this._events={}),"error"===t&&!this._events.error)throw(e=arguments[1])instanceof Error?e:Error('Uncaught, unspecified "error" event.');if(n=this._events[t],va.isUndefined(n))return!1;if(va.isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];n.apply(this,r)}else if(va.isObject(n)){for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];for(i=(o=n.slice()).length,a=0;a<i;a++)o[a].apply(this,r)}return!0},ya.prototype.on=ya.prototype.addListener=function(t,e){var n;if(!va.isFunction(e))throw TypeError("listener must be a function");this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,va.isFunction(e.listener)?e.listener:e),this._events[t]?va.isObject(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,!va.isObject(this._events[t])||this._events[t].warned||(n=va.isUndefined(this._maxListeners)?ya.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,va.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),va.isFunction(console.trace)&&console.trace());return this},ya.prototype.once=function(t,e){if(!va.isFunction(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},ya.prototype.removeListener=function(t,e){var n,i,r,a;if(!va.isFunction(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(n=this._events[t]).length,i=-1,n===e||va.isFunction(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(va.isObject(n)){for(a=r;0<a--;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},ya.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],va.isFunction(n))this.removeListener(t,n);else if(Array.isArray(n))for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},ya.prototype.listeners=function(t){return this._events&&this._events[t]?va.isFunction(this._events[t])?[this._events[t]]:this._events[t].slice():[]},ya.listenerCount=function(t,e){return t._events&&t._events[e]?va.isFunction(t._events[e])?1:t._events[e].length:0};var xa={mixin:function(t){return Object.keys(ma.prototype).forEach((function(e){t[e]=ma.prototype[e]})),ma.init(t),t}};function ba(){var t=0,e=0,n=0,i=0;n=n||t;var r={move:function(t){this.moveTo(n+t)},moveTo:function(a){var o=Math.max(t,Math.min(e-i,a));n!==o&&(n=o,r.emit("update"))},update:function(a){var o=!1,s=a.min;t=void 0===s?t:s;var c=a.max;e=void 0===c?e:c,void 0!==a.viewSize&&a.viewSize!==i&&(i=a.viewSize,o=!0);var u=Math.max(t,Math.min(e-i,n));n!==u&&(n=u,o=!0),o&&r.emit("update")},getState:function(){return{min:t,max:e,start:n,viewSize:i}}};return xa.mixin(r),r}function wa(t,e){return t<=e}function _a(t,e){return t<e}function ka(t,e,n){for(var i=0;i<t.length&&e>t[i];)++i;return t[i]===e&&n&&++i,i}function Ma(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=[];function r(){}return r.configure=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=n.includeMax,r=void 0===i||i,a=n.includeMin;t=r?wa:_a,e=void 0===a||a?wa:_a},r.add=function(t){var e=t.min,n=t.max,r=ka(i,e),a=ka(i,n,!0),o=[r,a-r];r%2==0&&o.push(e),a%2==0&&o.push(n);var s=i.join(",");return i.splice.apply(i,o),s!==i.join(",")},r.remove=function(t){var e=t.min,n=t.max,r=ka(i,e),a=ka(i,n,!0),o=[r,a-r];r%2==1&&o.push(e),a%2==1&&o.push(n);var s=i.join(",");return i.splice.apply(i,o),s!==i.join(",")},r.set=function(t){var e=i.join(",");return i=[],Array.isArray(t)?t.forEach(r.add):r.add(t),e!==i.join(",")},r.clear=function(){var t=0<i.length;return i=[],t},r.containsValue=function(n){return function(t,e,n,i){for(var r=t.length,a=1;a<r;a+=2)if(n(t[a-1],e)&&i(e,t[a]))return!0;return!1}(i,n,e,t)},r.containsRange=function(t){var e=t.min,n=t.max,r=ka(i,e,!0),a=ka(i,n);return r===a&&a%2==1},r.toggle=function(t){return r.containsRange(t)?r.remove(t):r.add(t)},r.ranges=function(){for(var t=[],e=1;e<i.length;e+=2)t.push({min:i[e-1],max:i[e]});return t},r.configure(n),r}function Sa(){var t=[];function e(){}return e.add=function(e){return-1===t.indexOf(e)&&(t.push(e),!0)},e.remove=function(e){var n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)},e.contains=function(e){return-1!==t.indexOf(e)},e.values=function(){return t.slice()},e.clear=function(){return t=[]},e.toString=function(){return t.join(";")},e}var Ra={key:void 0,includeMin:!0,includeMax:!0};function Ta(t){for(var e,n,i=t.items,r=t.collection,a=t.vc,o={},s=[],c=0,u=i.length;c<u;c++){r[e=i[c].key]||(r[e]=a()),n=i[c].values||[i[c].value];for(var l=0;l<n.length;l++)r[e].add(n[l])&&(o[e]=o[e]||[],o[e].push(n[l]))}for(var h=Object.keys(o),f=0,d=h.length;f<d;f++)e=h[f],s.push({id:e,values:o[e]});return s}function Aa(t){for(var e,n,i=t.items,r=t.collection,a={},o=[],s=0,c=i.length;s<c;s++)if(r[e=i[s].key]){n=i[s].values||[i[s].value];for(var u=0;u<n.length;u++)r[e].remove(n[u])&&(a[e]=a[e]||[],a[e].push(n[u]))}for(var l=Object.keys(a),h=0,f=l.length;h<f;h++)e=l[h],o.push({id:e,values:a[e]});return o}function Ea(t){for(var e,n,i={},r=0,a=t.length;r<a;r++){e=t[r].key,n=t[r].values||[t[r].value],i[e]||(i[e]=[]);for(var o=0;o<n.length;o++)-1===i[e].indexOf(n[o])&&i[e].push(n[o])}return i}function Na(t){var e=t.key,n=t.collection,i=t.obj,r=t.fn,a=t.value;n[e]||(n[e]=r()),i[e]=i[e]||[],i[e].push(a),n[e].add(a)}function Ca(t,e){for(var n,i,r=[],a=Object.keys(t),o=function(t){return-1===e[n].indexOf(t)},s=0,c=a.length;s<c;s++)n=a[s],e[n]?(i=t[n].filter(o)).length&&r.push({id:n,values:i}):r.push({id:n,values:t[n]});return r}function za(t,e,n){var i=function(t,e){if(!Object.keys(e).length)return t;for(var n=t.length,i=Array(n),r=0;r<n;r++)i[r]=t[r].key in e?x({},t[r],{key:e[t[r].key]}):t[r];return i}(e,n);return t&&t.length?t.reduce((function(t,e){return e(t)}),i):i}function Oa(t){return t.replace(/(-[a-z])/g,(function(t){return t.toUpperCase().replace("-","")}))}function ja(t,e,n){var i=n.ranges,r=n.interceptors,a=n.rc,o=n.aliases,s=n.rangeConfig,c=za(r["".concat(e,"Ranges")],t,o),u=!1;return c.forEach((function(t){var n=t.key;if(i[n]||(i[n]=a(s.sources[n]||s.default)),"set"===e)u=i[n][e](t.ranges||t.range)||u;else for(var r=t.ranges||[t.range],o=0;o<r.length;o++)u=i[n][e](r[o])||u})),u}function Pa(t){function e(){var t={values:{},ranges:{}};return Object.keys(u).forEach((function(e){t.values[e]=u[e].values()})),Object.keys(c).forEach((function(e){t.ranges[e]=c[e].ranges()})),t}var n=0<arguments.length&&void 0!==t?t:{},i=n.vc,r=void 0===i?Sa:i,a=n.rc,o=void 0===a?Ma:a,s=!1,c={},u={},l={},h={sources:{},default:x({},Ra)},f={addValues:[],removeValues:[],toggleValues:[],setValues:[],addRanges:[],setRanges:[],removeRanges:[],toggleRanges:[]},d={ls:[],clear:function(){this.ls.forEach((function(t){return t.clear()}))},start:function(){this.ls.forEach((function(t){return t.start()}))},end:function(){this.ls.forEach((function(t){return t.end()}))},update:function(){var t=e();this.ls.forEach((function(e){return e._state(t)}))},updateValues:function(){var t=e();this.ls.forEach((function(e){return e._state({values:t.values})}))},updateRanges:function(){var t=e();this.ls.forEach((function(e){return e._state({ranges:t.ranges})}))}},p={configure:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(t.ranges)&&t.ranges.length&&(h={sources:{},default:x({},Ra)},t.ranges.forEach((function(t){var e={};Object.keys(Ra).filter((function(t){return"key"!==t})).forEach((function(n){e[n]=void 0!==t[n]?t[n]:Ra[n]})),void 0!==t.key?h.sources[t.key]=e:h.default=e})),Object.keys(c).forEach((function(t){return c[t].configure(h.sources[t]||h.default)})),p.emit("update",[],[]))},link:function(t){if(p===t)throw new Error("Can't link to self");d.ls.push(t),t._state(e())},_state:function(t){if(!t)return e();if(t.values){var n=[];Object.keys(t.values).forEach((function(e){u[e]&&t.values[e].join(";")===u[e].toString()||n.push({key:e,values:t.values[e]})})),Object.keys(u).forEach((function(e){t.values[e]||n.push({key:e,values:[]})})),n.length&&p.setValues(n)}if(t.ranges){var i=[];Object.keys(t.ranges).forEach((function(e){c[e]&&t.ranges[e].join(";")===c[e].toString()||i.push({key:e,ranges:t.ranges[e]})})),Object.keys(c).forEach((function(e){t.ranges[e]||i.push({key:e,ranges:[]})})),i.length&&p.setRanges(i)}},start:function(){if(!s){s=!0;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];p.emit.apply(p,["start"].concat(e)),d.start()}},end:function(){if(s){s=!1,c={},u={};for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];p.emit.apply(p,["end"].concat(e)),d.end()}},isActive:function(){return s},clear:function(){var t=p.brushes().filter((function(t){return"value"===t.type&&t.brush.values().length})).map((function(t){return{id:t.id,values:t.brush.values()}})),e=0<Object.keys(c).length||t.length;c={},u={},e&&(p.emit("update",[],t),d.clear())},brushes:function(){var t=[];return(t=t.concat(Object.keys(c).map((function(t){return{type:"range",id:t,brush:c[t]}})))).concat(Object.keys(u).map((function(t){return{type:"value",id:t,brush:u[t]}})))},addValue:function(t,e){p.addValues([{key:t,value:e}])},addValues:function(t){var e=za(f.addValues,t,l),n=Ta({vc:r,collection:u,items:e});p.emit("add-values",e),n.length&&(s||(s=!0,p.emit("start")),p.emit("update",n,[]),d.updateValues())}};return p.setValues=function(t){var e=za(f.setValues,t,l),n=function(t){for(var e,n,i=t.items,r=t.vCollection,a=t.vc,o={},s=Ea(i),c={},u=Object.keys(r),l=0,h=u.length;l<h;l++)c[n=u[l]]=r[n].values().slice(),delete r[n];for(var f=function(t){r[n]&&r[n].contains(t)||Na({key:n,value:t,collection:r,obj:o,fn:a})},d=Object.keys(s),p=0,g=d.length;p<g;p++)s[n=d[p]].forEach(f);return e=Ca(c,o),[Ca(o,c),e]}({items:e,vCollection:u,vc:r});p.emit("set-values",e),(0<n[0].length||0<n[1].length)&&(s||(s=!0,p.emit("start")),p.emit("update",n[0],n[1]),d.updateValues())},p.removeValue=function(t,e){p.removeValues([{key:t,value:e}])},p.removeValues=function(t){var e=za(f.removeValues,t,l),n=Aa({collection:u,items:e});p.emit("remove-values",e),n.length&&(p.emit("update",[],n),d.updateValues())},p.addAndRemoveValues=function(t,e){var n=za(f.addValues,t,l),i=za(f.removeValues,e,l),a=Ta({vc:r,collection:u,items:n}),o=Aa({collection:u,items:i});p.emit("add-values",n),p.emit("remove-values",i),(a.length||o.length)&&(s||(s=!0,p.emit("start")),p.emit("update",a,o),d.updateValues())},p.toggleValue=function(t,e){p.toggleValues([{key:t,value:e}])},p.toggleValues=function(t){var e=za(f.toggleValues,t,l),n=function(t){for(var e,n,i,r=t.items,a=t.values,o=t.vc,s={},c={},u=[],l=[],h=Ea(r),f=Object.keys(h),d=0,p=f.length;d<p;d++)for(var g=0,v=(i=h[e=f[d]]).length;g<v;g++)n=i[g],a[e]&&a[e].contains(n)?a[e]&&a[e].contains(n)&&(c[e]=c[e]||[],c[e].push(n),a[e].remove(n)):Na({key:e,value:n,collection:a,obj:s,fn:o});for(var y=Object.keys(s),m=0,x=y.length;m<x;m++)e=y[m],u.push({id:e,values:s[e]});for(var b=Object.keys(c),w=0,_=b.length;w<_;w++)e=b[w],l.push({id:e,values:c[e]});return[u,l]}({items:e,values:u,vc:r});p.emit("toggle-values",e),(0<n[0].length||0<n[1].length)&&(s||(s=!0,p.emit("start")),p.emit("update",n[0],n[1]),d.updateValues())},p.containsValue=function(t,e){var n=l[t]||t;return!!u[n]&&u[n].contains(e)},p.addRange=function(t,e){p.addRanges([{key:t,range:e}])},p.addRanges=function(t){ja(t,"add",{ranges:c,rc:o,interceptors:f,aliases:l,rangeConfig:h})&&(s||(s=!0,p.emit("start")),p.emit("update",[],[]),d.updateRanges())},p.removeRange=function(t,e){p.removeRanges([{key:t,range:e}])},p.removeRanges=function(t){ja(t,"remove",{ranges:c,rc:o,interceptors:f,aliases:l,rangeConfig:h})&&(s||(s=!0,p.emit("start")),p.emit("update",[],[]),d.updateRanges())},p.setRange=function(t,e){p.setRanges([{key:t,range:e}])},p.setRanges=function(t){ja(t,"set",{ranges:c,rc:o,interceptors:f,aliases:l,rangeConfig:h})&&(s||(s=!0,p.emit("start")),p.emit("update",[],[]),d.updateRanges())},p.toggleRange=function(t,e){p.toggleRanges([{key:t,range:e}])},p.toggleRanges=function(t){ja(t,"toggle",{ranges:c,rc:o,interceptors:f,aliases:l,rangeConfig:h})&&(s||(s=!0,p.emit("start")),p.emit("update",[],[]),d.updateRanges())},p.containsRangeValue=function(t,e){var n=l[t]||t;return!!c[n]&&c[n].containsValue(e)},p.containsRange=function(t,e){var n=l[t]||t;return!!c[n]&&c[n].containsRange(e)},p.containsMappedData=function(t,e,n){for(var i,r,a,o,s=[],h=Object.keys(t),f=0,d=h.length;f<d;f++){if("value"===(i=h[f]))r=t,s[f]={key:"",i:f,bool:!1};else{if("source"===i)continue;r=t[i],s[f]={key:i,i:f,bool:!1}}void 0!==(a=r.source&&r.source.field)&&(void 0!==r.source.key&&(a="".concat(r.source.key,"/").concat(a)),a in l&&(a=l[a]),o=r.value,c[a]?s[f].bool=Array.isArray(o)?c[a].containsRange({min:o[0],max:o[1]}):c[a].containsValue(o):u[a]&&u[a].contains(o)&&(s[f].bool=!0))}return e?(s=s.filter((function(t){return-1!==e.indexOf(t.key)})),"and"===n?!!s.length&&!s.some((function(t){return!1===t.bool})):"xor"===n?!!s.length&&s.some((function(t){return t.bool}))&&s.some((function(t){return!1===t.bool})):s.some((function(t){return t.bool}))):s.some((function(t){return t.bool}))},p.intercept=function(t,e){var n=Oa(t);f[n]&&f[n].push(e)},p.removeInterceptor=function(t,e){var n=Oa(t);if(f[n]){var i=f[n].indexOf(e);-1!==i&&f[n].splice(i,1)}},p.removeAllInterceptors=function(t){var e=[];if(t){var n=Oa(t);f[n]&&f[n].length&&e.push({name:t,handlers:f[n]})}else Object.keys(f).forEach((function(t){f[t].length&&e.push({name:t.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())})),handlers:f[t]})}));e.forEach((function(t){t.handlers.slice().forEach((function(e){return p.removeInterceptor(t.name,e)}))}))},p.addKeyAlias=function(t,e){l[t]=e},p.removeKeyAlias=function(t){delete l[t]},xa.mixin(p),p}de();function Da(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ia=2*Math.PI,qa=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Ia);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*Ia)},r.period=function(n){return t(e,n)},r}(1,.3);function Fa(t,e){return t.data?t.data.value:"text"===t.type?t.text:e}var La={fontFamily:"Arial",fontSize:"13px",color:"#595959",backgroundColor:"#ffffff",stroke:"#000000",strokeWidth:0,$fill:"#333333"},Ba=/^\$/;function Wa(t){var e=w(t);return"object"!==e&&"function"!==e&&"undefined"!==e}function Ha(t,e,n){var i=t[e];i&&i.scale&&i.scale.pxScale?i.scale=i.scale.pxScale(n):i&&i.pxScale&&(t[e]=i.pxScale(n))}function Va(t,e){return t.pxScale?t.pxScale(e):t}var Ya={normalizeSettings:function(t,e,n){var i=x({},t),r=x({},e);return Object.keys(i).forEach((function(t){r[t]={};var a=i[t],o=w(a);if("function"==typeof a)r[t].fn=a;else if(Wa(a)){var s=e[t];"string"==typeof s&&Ba.test(s)&&(s=La[s]);var c=w(s);r[t]="undefined"===c||c===o?a:s}else a&&"object"===w(a)&&("function"==typeof a.fn&&(r[t].fn=a.fn),void 0!==a.scale&&(r[t].scale=n.scale(a.scale)),"string"==typeof a.ref&&(r[t].ref=a.ref))})),Object.keys(e).forEach((function(t){if(!(t in i)){var n=e[t];"string"===w(n)&&Ba.test(n)?r[t]=La[n]:r[t]=n}})),r},resolveForItem:function(t,e,n){for(var i={},r=Object.keys(e),a=r.length,o=t.datum,s=t.datum,c=0;c<a;c++){var u=r[c],l=e[u],h="object"===w(s)&&void 0!==l,f=h&&"string"==typeof l.ref,d=h&&u in s,p=f?s[l.ref]:d?s[u]:o;Wa(l)?i[u]=l:h&&l.fn?(l.scale&&(t.scale=l.scale),i[u]=l.fn.call(null,t,n)):h&&l.scale&&p?(i[u]=l.scale(p.value),l.scale.bandwidth&&(i[u]+=l.scale.bandwidth()/2)):f&&p?i[u]=p.value:l.fn?i[u]=l.fn.call(null,t,n):i[u]=l}return i},updateScaleSize:Ha};function Ua(t,e){var n=1<arguments.length&&void 0!==e?e:Ya,i={};return{resolve:function(e){var r=e.data,a=e.settings,o=e.defaults,s=void 0===o?{}:o,c=e.scaled,u=i.norm=n.normalizeSettings(a,s,t.chart),l={scale:t.chart.scale,formatter:t.chart.formatter};c&&Object.keys(c).forEach((function(t){u[t]&&n.updateScaleSize(u,t,c[t])}));var h=[];if(!r||!Array.isArray(r.items)){var f={data:r,resources:l},d=n.resolveForItem(f,i.norm,-1);return{settings:i.norm,item:d}}for(var p,g=0,v=r.items.length;g<v;g++){p={datum:r.items[g],data:r,resources:l};var y=n.resolveForItem(p,i.norm,g);y.data=r.items[g],h.push(y)}return{settings:i.norm,items:h}}}}function $a(t,e){var n=e.context,i=e.data,r=e.style,a=e.filter,o=e.mode,s=t.chart.brush(n),c=i,u=r.active||{},l=r.inactive||{},h=[];Object.keys(u).forEach((function(t){h.push(t)})),Object.keys(l).forEach((function(t){-1===h.indexOf(t)&&h.push(t)}));function f(){var e=function t(e){return(0<arguments.length&&void 0!==e?e:[]).reduce((function(e,n){return Array.isArray(n.children)?e.push.apply(e,I(t(n.children))):e.push(n),e}),[])}(t.nodes);return"function"==typeof a&&(e=e.filter(a)),e}function d(){for(var t,e=f(),n=e.length,i=!1,r=function(n){if(!(t=e[n].data))return"continue";e[n].__style||(e[n].__style={},h.forEach((function(t){e[n].__style[t]=e[n][t]})));var r=s.containsMappedData(t,c,o),a=y.indexOf(e[n]),f=!1;if(r&&-1===a?(y.push(e[n]),f=!0):r||-1===a||(y.splice(a,1),f=!0),f||m){var d=x({},e[n],e[n].__style);h.forEach((function(t){e[n][t]=r&&t in u?"function"==typeof u[t]?u[t].call(null,d):u[t]:!r&&t in l?"function"==typeof l[t]?l[t].call(null,d):l[t]:e[n].__style[t]})),i=!0}},a=0;a<n;a++)r(a);return m=!1,i}function p(e){for(var n=(0<arguments.length&&void 0!==e?e:{suppressRender:!1}).suppressRender,i=f(),r=i.length,a=function(t){if(!i[t].data)return"continue";i[t].__style=i[t].__style||{},h.forEach((function(e){i[t].__style[e]=i[t][e],e in l&&(i[t][e]="function"==typeof l[e]?l[e].call(null,i[t]):l[e])}))},o=0;o<r;o++)a(o);m=!0,y.length=0,n||t.renderer.render(t.nodes)}function g(e){for(var n=(0<arguments.length&&void 0!==e?e:{suppressRender:!1}).suppressRender,i=f(),r=i.length,a=function(t){i[t].__style&&(Object.keys(i[t].__style).forEach((function(e){i[t][e]=i[t].__style[e]})),i[t].__style=void 0)},o=0;o<r;o++)a(o);y.length=0,n||t.renderer.render(t.nodes)}function v(){d()&&t.renderer.render(t.nodes)}var y=[],m=!1;return s.on("start",p),s.on("end",g),s.on("update",v),{isActive:function(){return s.isActive()},update:function(){y.length=0,m=!0,d()},cleanUp:function(){s.removeListener("start",p),s.removeListener("end",g),s.removeListener("update",v)}}}function Xa(t){for(var e=t.nodes,n=t.action,i=t.chart,r=t.trigger,a=[],o=0;o<e.length;o++){var s=e[o].data;null!==s&&a.push(s)}!function(t){var e=t.dataPoints,n=t.action,i=t.chart,r=t.trigger;if(r){var a=r.data||[""],o={items:[],actionFn:"toggleRanges"},s={items:[],actionFn:"toggleValues"};-1!==["add","remove","set","toggle"].indexOf(n)&&(o.actionFn="".concat(n,"Ranges"),s.actionFn="".concat(n,"Values"));for(var c=function(t){var n=e[t];if(!n)return"continue";a.forEach((function(t){var e=n&&!t?n:n[t];if(e){var i={key:e.source.field};void 0!==e.source.key&&(i.key="".concat(e.source.key,"/").concat(e.source.field)),Array.isArray(e.value)?(i.range={min:e.value[0],max:e.value[1]},o.items.push(i)):(i.value=e.value,s.items.push(i))}}))},u=0;u<e.length;u++)c(u);r.contexts.forEach((function(t){o.items.length?i.brush(t)[o.actionFn](o.items):i.brush(t)[s.actionFn](s.items)}))}}({dataPoints:a,action:n,chart:i,trigger:r})}function Ga(t){var e=t.collisions,n=t.t,i=t.config,r=t.action,a=[],o=!1;return 0<e.length&&(a=e,o=!0,"stop"===n.propagation&&(a=[e[e.length-1]])),Xa({nodes:a.map((function(t){return t.node})),action:r,chart:i.chart,data:i.data,trigger:n}),o}function Ka(t,e,n){var i,r,a,o,s=n.element().getBoundingClientRect(),c=lt(t)?(o=s,1!==(a=t).changedTouches.length?null:{x:a.changedTouches[0].clientX-o.left,y:a.changedTouches[0].clientY-o.top}):(r=s,{x:(i=t).clientX-r.left,y:i.clientY-r.top});return null===c||c.x<0||c.y<0||c.x>s.width||c.y>s.height?[]:(0<e.touchRadius&&lt(t)?c={cx:c.x,cy:c.y,r:e.touchRadius}:0<e.mouseRadius&&!lt(t)&&(c={cx:c.x,cy:c.y,r:e.mouseRadius}),n.itemsAt(c))}function Za(t,e,n){return t?"function"==typeof t?t(e):t:n}var Ja={fill:"fill",stroke:"stroke",opacity:"opacity",strokeWidth:"stroke-width",strokeLinejoin:"stroke-linejoin",fontFamily:"font-family",fontSize:"font-size",baseline:"dominant-baseline",dominantBaseline:"dominant-baseline",anchor:"text-anchor",textAnchor:"text-anchor",maxWidth:"maxWidth",transform:"transform",strokeDasharray:"stroke-dasharray",id:"id"};function Qa(t,e){for(var n=!(1<arguments.length&&void 0!==e)||e,i="",r=0;r<t.length;r++){var a=t[r];i+=0===r?"M".concat(a.x," ").concat(a.y):"L".concat(a.x," ").concat(a.y),i+=" "}return n&&(i+="Z"),i}function to(t,e,n,i){var r=n/2,a=t-i/2,o=e-i/2,s=t-r,c=e-r;return[{x:a,y:o},{x:a,y:c},{x:a+i,y:c},{x:a+i,y:o},{x:s+n,y:o},{x:s+n,y:o+i},{x:a+i,y:o+i},{x:a+i,y:c+n},{x:a,y:c+n},{x:a,y:o+i},{x:s,y:o+i},{x:s,y:o}]}function eo(t){return-t/180*Math.PI}function no(t){return e=eo(t),n=(.5*(Math.floor(e/Math.PI*2)+2)+.25)*Math.PI,i=Math.cos(Math.abs(n-e))*Math.sqrt(2),r=i*Math.cos(e),a=i*Math.sin(e),{x1:r<0?1:0,y1:a<0?1:0,x2:0<=r?r:1+r,y2:0<=a?a:1+a};var e,n,i,r,a}function io(t,e){return{x:t.x+e.x,y:t.y+e.y}}function ro(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ao(t,e){return{x:t.x*e,y:t.y*e}}function oo(t,e){return t.x-e.x}function so(t,e){return t.y-e.y}function co(t,e){return Math.pow(oo(t,e),2)+Math.pow(so(t,e),2)}function uo(t,e){return Math.sqrt(co(t,e))}function lo(t,e){return t.x*e.x+t.y*e.y}function ho(t,e,n){var i=2<arguments.length&&void 0!==n?n:{x:0,y:0},r=Math.cos(e),a=Math.sin(e),o=ro(t,i);return io({x:r*o.x-a*o.y,y:a*o.x+r*o.y},i)}var fo={up:0,down:180,left:90,right:-90};var po=de();po.add("circle",(function(t){return{type:"circle",fill:"black",cx:t.x,cy:t.y,r:t.size/2}})),po.add("diamond",(function(t){var e=t.size,n=t.x-e/2,i=t.y-e/2;return{type:"path",fill:"black",d:Qa([{x:n,y:i+e/2},{x:n+e/2,y:i},{x:n+e,y:i+e/2},{x:n+e/2,y:i+e},{x:n,y:i+e/2}])}})),po.add("saltire",(function(t){var e=eo(45),n=t.size/2,i=isNaN(t.width)?n/2:t.width,r=Math.min(i,n),a=t.size,o=Math.sin(Math.asin(-e))*(r/2);a+=2*(n/Math.sin(-e)-n),a-=2*o;var s={x:t.x,y:t.y};return{type:"path",fill:"black",d:Qa(to(t.x,t.y,a,r).map((function(t){return ho(t,e,s)})))}})),po.add("square",(function(t){var e=t.size;return{type:"rect",fill:"black",x:t.x-e/2,y:t.y-e/2,width:e,height:e}})),po.add("triangle",(function(t){var e=t.size,n={x:t.x,y:t.y},i=fo[t.direction]||0,r=e/2,a=t.x-r,o=t.y-r,s=[{x:a,y:o+e},{x:a+r,y:o},{x:a+e,y:o+e},{x:a,y:o+e}],c=eo(i);return{type:"path",fill:"black",d:Qa(s=s.map((function(t){return ho(t,c,n)})))}})),po.add("line",(function(t){var e,n,i,r,a,o="vertical"===t.direction,s=t.size/2,c=t.x,u=t.y;return{type:"line",stroke:"black",strokeWidth:1,x1:c-(o?0:s),y1:u-(o?s:0),x2:c+(o?0:s),y2:u+(o?s:0),collider:(n=(e=t).x,i=e.y,r=e.size,{type:"rect",x:n-(a=r/2),y:i-a,width:r,height:r})}})),po.add("star",(function(t){for(var e=t.size,n=[],i=e/2,r=t.points||5,a=Math.min(t.innerRadius||e/2,e)/2,o=isNaN(t.startAngle)?90:t.startAngle,s=360/r,c=1;c<=r;c++){var u=s*c+o,l=eo(u),h=eo(u+s/2),f=Math.sin(l),d=Math.cos(l),p=Math.sin(h),g=Math.cos(h);n.push({x:t.x+d*i,y:t.y+f*i}),n.push({x:t.x+g*a,y:t.y+p*a})}return{type:"path",fill:"black",d:Qa(n)}})),po.add("n-polygon",(function(t){for(var e=[],n=t.size/2,i=Math.max(isNaN(t.sides)?6:t.sides,3),r=360/i,a=isNaN(t.startAngle)?0:t.startAngle,o=1;o<=i;o++){var s=eo(r*o+a),c=Math.sin(s),u=Math.cos(s);e.push({x:t.x+u*n,y:t.y+c*n})}return{type:"path",fill:"black",d:Qa(e)}})),po.add("cross",(function(t){var e=t.x,n=t.y,i=t.size/2,r=isNaN(t.width)?i/2:t.width,a=Math.min(r,i);return{type:"path",fill:"black",d:Qa(to(e,n,t.size,a))}})),po.add("bar",(function(t){var e={x:t.x,y:t.y},n="vertical"===t.direction,i=t.size/2,r=i/2/2,a=[{x:e.x-i,y:e.y+r},{x:e.x-i,y:e.y-r},{x:e.x+i,y:e.y-r},{x:e.x+i,y:e.y+r}];if(n){var o=eo(90);a=a.map((function(t){return ho(t,o,e)}))}var s=X(a);return s.type="rect",s.fill="black",s}));var go=function(t){var e=0<arguments.length&&void 0!==t?t:po;return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.get(t.type);if(n){var i=n(t);return function(t,e){var n=1<arguments.length&&void 0!==e?e:{};Object.keys(n).forEach((function(e){void 0!==Ja[e]&&"transform"!==e&&(t[e]=n[e])}))}(i,t),void 0!==t.data&&(i.data=t.data),i}return n}},vo=function(t){return["on","preferredSize","created","beforeMount","mounted","resize","beforeUpdate","updated","beforeRender","render","beforeUnmount","beforeDestroy","destroyed","defaultSettings","data","settings","formatter","scale","chart","dockConfig","mediator","style","resolver","registries","_DO_NOT_USE_getInfo","symbol","isVisible"].some((function(e){return e===t}))};function yo(t,e,n){var i=e.require,r=void 0===i?[]:i,a=e.mediator||{},o=n.settings,s=n.formatter,c=n.scale,u=n.data,l=n.renderer,h=n.chart,f=n.dockConfig,d=n.mediator,p=n.instance,g=n.rect,v=n.style,y=n.registries,m=n.resolver,x=n.update,b=n._DO_NOT_USE_getInfo,w=n.symbol,_=n.isVisible;t.emit=function(){},_&&(t.isVisible=_),Object.defineProperty(t,"settings",{get:o}),Object.defineProperty(t,"data",{get:u}),Object.defineProperty(t,"formatter",{get:s}),Object.defineProperty(t,"scale",{get:c}),Object.defineProperty(t,"mediator",{get:d}),Object.defineProperty(t,"style",{get:v}),Object.defineProperty(t,"registries",{get:y}),g&&Object.defineProperty(t,"rect",{get:g}),b&&(t._DO_NOT_USE_getInfo=b),Object.keys(e).forEach((function(n){vo(n)||("function"==typeof e[n]?t[n]=e[n].bind(t):t[n]=e[n])})),r.forEach((function(e){"renderer"===e?Object.defineProperty(t,"renderer",{get:l}):"chart"===e?Object.defineProperty(t,"chart",{get:h}):"dockConfig"===e?Object.defineProperty(t,"dockConfig",{get:f}):"instance"===e?Object.defineProperty(t,"instance",{get:p}):"update"===e&&x?Object.defineProperty(t,"update",{get:x}):"resolver"===e?Object.defineProperty(t,"resolver",{get:m}):"symbol"===e&&Object.defineProperty(t,"symbol",{get:w})})),Object.keys(a).forEach((function(e){t.mediator.on(e,a[e].bind(t))}))}function mo(t,e,n){function i(e){return t[e]?(n.warn("Deprecation Warning the ".concat(e," property should be moved into layout: {} property")),t[e]):t.layout?t.layout[e]:void 0}var r={};return r.displayOrder=i("displayOrder"),r.dock=i("dock"),r.prioOrder=i("prioOrder"),r.minimumLayoutMode=i("minimumLayoutMode"),t.layout=t.layout||{},t.layout.displayOrder=void 0!==r.displayOrder?r.displayOrder:t.layout.displayOrder,t.layout.prioOrder=void 0!==r.prioOrder?r.prioOrder:t.layout.prioOrder,t.layout.dock=r.dock||t.layout.dock,t.layout.minimumLayoutMode=r.minimumLayoutMode||t.layout.minimumLayoutMode,r.show=t.show,r.preferredSize=e,r}function xo(t,e,n){Object.keys(n.on||{}).forEach((function(i){t.eventListeners=t.eventListeners||[];var r=n.on[i].bind(t);t.eventListeners.push({event:i,listener:r}),e.on(i,r)})),t.emit=function(t){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.emit.apply(e,[t].concat(i))}}function bo(t,e){var n,i,r,a,o,s=1<arguments.length&&void 0!==e?e:{},c=t.defaultSettings,u=void 0===c?{}:c,l=t._DO_NOT_USE_getInfo,h=void 0===l?function(){return{}}:l,f=s.chart,d=s.container,p=s.mediator,g=s.registries,v=s.theme,y=s.renderer,m=xa.mixin({}),b=s.settings||{},_=x(!0,{},u,b),k=[],M=Ua({chart:f}),S=!1,R={nodes:[],chart:f,config:_.brush||{},renderer:null},T={tap:[],over:[]},A=[],E={},N=x({},b);function C(e,n,i){var r=1<arguments.length&&void 0!==n?n:function(){},a=2<arguments.length&&void 0!==i&&i;return function(){for(var n,i,o,s=void 0!==t[e],c=void 0!==b[e],u=arguments.length,l=new Array(u),h=0;h<u;h++)l[h]=arguments[h];s&&("function"==typeof t[e]?n=(i=t[e]).call.apply(i,[E].concat(l)):a&&(n=t[e]));c&&("function"==typeof b[e]?n=(o=b[e]).call.apply(o,[N].concat(l)):a&&(n=b[e]));return s||c||(n=r.call.apply(r,[E].concat(l))),n}}function z(){_.brush&&(_.brush.consume||[]).forEach((function(t){t.context&&t.style&&A.push($a(R,t))}))}function O(){_.brush&&(_.brush.trigger||[]).forEach((function(t){"over"===t.on?T.over.push(t):T.tap.push(t)}))}var j=C("preferredSize",(function(){return 0}),!0),P=C("resize",(function(t){return t.inner})),D=C("created"),q=C("beforeMount"),F=C("mounted"),B=C("beforeUnmount"),W=C("beforeUpdate"),H=C("updated"),V=C("beforeRender"),Y=C("beforeDestroy"),U=C("destroyed"),$=t.render;Object.defineProperty(R,"data",{get:function(){return k}});var X=_.renderer||t.renderer,G=X?y||g.renderer(X)():y||g.renderer()();R.renderer=G;function K(t){t.key=_.key,t.element=G.element()}function Z(){}var J={resources:f.logger?{logger:f.logger()}:{}},Q=L(mo(_,j,f.logger()),J);Z.dockConfig=function(){return Q},Z.set=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.settings&&(b=t.settings,_=x(!0,{},u,t.settings),Q=L(mo(_,j,f.logger()),J)),_.scale&&(n=f.scale(_.scale)),k=_.data?ci(_.data,{dataset:f.dataset,collection:f.dataCollection},{logger:f.logger()},f.dataCollection):n?n.data():[],"string"==typeof _.formatter||"object"===w(_.formatter)?i=f.formatter(_.formatter):n&&n.data().fields&&(i=n.data().fields[0].formatter()),o=v.style(_.style||{})},Z.resize=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=P({inner:t,outer:e});a=n?G.size(n):G.size(t),N.rect=x(!0,{computedPhysical:a.computedPhysical,computedOuter:e.computed||e,computedInner:t.computed||t},t),a=x(!0,{computedOuter:e.computed||e,computedInner:t.computed||t},a)},Z.getRect=function(){return N.rect};function tt(){var t=G.renderArgs?G.renderArgs.slice(0):[];return t.push({data:k}),t}var et,nt;Z.beforeMount=q,Z.beforeRender=function(){V({size:a})},Z.render=function(){var t=R.nodes=$.call.apply($,[E].concat(I(tt())));G.render(t),et=t},Z.hide=function(){Z.unmount(),G.size({x:0,y:0,width:0,height:0}),G.clear()},Z.beforeUpdate=function(){W({settings:_,data:k})},Z.update=function(){nt&&nt.stop();var t,e,n,i,r,a,o,s,c,u,l,h,f,d,p=R.nodes=$.call.apply($,[E].concat(I(tt())));A.forEach((function(t){return t.cleanUp()})),A.length=0,T.tap=[],T.over=[],_.brush&&(z(),O()),A.forEach((function(t){t.isActive()&&t.update()})),et&&_.animations&&_.animations.enabled?(t={old:et,current:p},e={renderer:G},n=_.animations,r=t.old,a=t.current,o=e.renderer,s=[],c={nodes:[],ips:[]},u={nodes:[],ips:[]},l={nodes:[],ips:[]},h=[],f=n.trackBy||Fa,(nt=d={start:function(){var t={};r.forEach((function(e,n){var i=f(e,n);t[i]=e})),a.forEach((function(e,n){var i=f(e,n);t[i]?(l.ips.push(sr(t[i],e)),l.nodes.push(e),s.push(t[i]),t[i]=!1):(c.nodes.push(e),c.ips.push(sr({r:.001,opacity:0},e)))})),Object.keys(t).forEach((function(e){t[e]&&(u.nodes.push(t[e]),u.ips.push(sr(t[e],x({},t[e],{r:1e-4,opacity:0}))))})),u.ips.length&&h.push({easing:Da,duration:200,tweens:u.ips,nodes:[].concat(s)}),l.ips.length&&h.push({easing:Da,duration:400,tweens:l.ips,nodes:[]}),c.ips.length&&h.push({easing:qa,duration:1200,tweens:c.ips,nodes:I(l.nodes)}),h.length&&(h[0].started=Date.now(),"undefined"!=typeof window&&(i=window.requestAnimationFrame(d.tick)))},tick:function(){var t=h[0];t||d.stop(),t.started||(t.started=Date.now());var e=(Date.now()-t.started)/t.duration,n=[],r=t.tweens.map((function(n){return n(t.easing(Math.min(1,e)))}));n.push.apply(n,I(r)),n.push.apply(n,I(t.nodes)),o.render(n),1<=e&&(h.shift(),h.length||d.stop()),i=i&&window.requestAnimationFrame(d.tick)},stop:function(){i&&(window.cancelAnimationFrame(i),i=!1)}}).start()):G.render(p),et=p,G.setKey&&"string"==typeof b.key&&G.setKey(b.key)},Z.updated=H,Z.destroy=function(){Z.unmount(),Y(r),G.destroy(),U(),r=null};function it(t){R.nodes=t,A.forEach((function(t){t.isActive()&&t.update()})),G.render(t)}return yo(E,t,{settings:function(){return _},data:function(){return k},scale:function(){return n},formatter:function(){return i},renderer:function(){return G},chart:function(){return f},dockConfig:function(){return Q},mediator:function(){return p},instance:function(){return N},rect:function(){return N.rect},style:function(){return o},update:function(){return it},registries:function(){return g},resolver:function(){return M},symbol:function(){return go(g.symbol)}}),yo(N,b,{settings:function(){return _},data:function(){return k},scale:function(){return n},formatter:function(){return i},renderer:function(){return G},chart:function(){return f},dockConfig:function(){return Q},mediator:function(){return p},style:function(){return o},_DO_NOT_USE_getInfo:h.bind(E),isVisible:function(){return S}}),Z.getBrushedShapes=function(t,e,n){var i=[];if(_.brush&&_.brush.consume){var r=f.brush(t),a=G.findShapes("*");_.brush.consume.filter((function(e){return e.context===t})).forEach((function(t){for(var o=0;o<a.length;o++){var s=a[o];s.data&&r.containsMappedData(s.data,n||t.data,e)&&(K(s),i.push(s),a.splice(o,1),o--)}}))}return i},Z.findShapes=function(t){for(var e=G.findShapes(t),n=0,i=e.length;n<i;n++)K(e[n]);return e},Z.shapesAt=function(t){for(var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=G.itemsAt(t),r=0,a=(e=n&&"stop"===n.propagation&&0<i.length?[i.pop().node]:i.map((function(t){return t.node}))).length;r<a;r++)K(e[r]);return e},Z.brushFromShapes=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.contexts=Array.isArray(e.contexts)?e.contexts:[],Xa({nodes:t,action:e.action||"toggle",trigger:e,chart:f,data:R.data})},Z.mount=function(){r=G.element&&G.element()?r:G.appendTo(d),G.setKey&&"string"==typeof b.key&&G.setKey(b.key),_.brush&&(z(),O()),xo(N,m,b),xo(E,m,t),S=!0},Z.mounted=function(){return F(r)},Z.unmount=function(){[N,E].forEach((function(t){var e,n;n=m,(e=t).eventListeners&&(e.eventListeners.forEach((function(t){var e=t.event,i=t.listener;n.removeListener(e,i)})),e.eventListeners.length=0),e.emit=function(){}})),T.tap=[],T.over=[],A.forEach((function(t){t.cleanUp()})),A.length=0,B(),S=!1},Z.onBrushTap=function(t){T.tap.forEach((function(e){var n,i,r,a;i=(n={e:t,t:e,config:R}).e,r=n.t,a=n.config,Ga({collisions:Ka(i,r,a.renderer),t:r,config:a,action:Za(r.action,i,"toggle")})&&"stop"===e.globalPropagation&&f.toggleBrushing(!0)}))},Z.onBrushOver=function(t){T.over.forEach((function(e){var n,i,r,a;i=(n={e:t,t:e,config:R}).e,r=n.t,a=n.config,Ga({collisions:Ka(i,r,a.renderer),t:r,config:a,action:Za(r.action,i,"set")})&&"stop"===e.globalPropagation&&f.toggleBrushing(!0)}))},Z.def=E,Z.ctx=N,Z.renderer=function(){return G},Z.set({settings:b}),D(),Z}var wo=1e-12;function _o(t,e,n){var i,r,a=ro(n,t),o=ro(e,t);return io((r=lo(a,i=o)/lo(i,i)||1,{x:i.x*r,y:i.y*r}),t)}function ko(t,e,n){return uo(t,n)+uo(e,n)-uo(t,e)<wo}function Mo(t){return t.x1===t.x2&&t.y1===t.y2}function So(t){return t.width<=0||t.height<=0}function Ro(t){return t.r<=0}function To(t){return t.edges.length<=2}function Ao(t,e){for(var n=0,i=e.edges.length;n<i;n++)if(!0===Po(t,G(e.edges[n])))return!0;return!1}function Eo(t,e){for(var n=e.numPolygons,i=e.polygons,r=0;r<n;r++)if(!0===Vo(t,i[r]))return!0;return!1}function No(t,e){return!Ro(t)&&co({x:t.cx,y:t.cy},e)<=Math.pow(t.r,2)}function Co(t,e){if(So(e)||Ro(t))return!1;var n=e.width/2,i=e.height/2,r=e.x+n,a=e.y+i,o=t.r,s=t.cx,c=t.cy,u=Math.abs(s-r),l=Math.abs(c-a);return!(n+o<u||i+o<l)&&(u<=n||l<=i||Math.pow(u-n,2)+Math.pow(l-i,2)<=Math.pow(o,2))}function zo(t,e){if(Ro(t)||Mo(e))return!1;var n=D(U(e),2),i=n[0],r=n[1];if(No(t,i)||No(t,r))return!0;var a={x:t.cx,y:t.cy},o=_o(i,r,a);return co(o,a)<=Math.pow(t.r,2)&&ko(i,r,o)}function Oo(t,e){if(To(e)||Ro(t))return!1;if(jo(e,{x:t.cx,y:t.cy}))return!0;for(var n=e.edges.length,i=0;i<n;i++)if(zo(t,G(e.edges[i])))return!0;return!1}function jo(t,e){if(To(t)||!Fo(t.boundingRect(),e))return!1;var n,i,r,a,o,s=e.x,c=e.y,u=t.vertices;for(n=!1,a=-1,r=(i=u.length)-1;++a<i;r=a){if(u[a].x===s&&u[a].y===c)return!0;if(u[a].y===u[r].y&&u[a].y===c&&(s-u[a].x)*(s-u[r].x)<=0)return!0;if(u[a].y<c&&c<=u[r].y||u[r].y<c&&c<=u[a].y){if(s===(o=(u[r].x-u[a].x)*(c-u[a].y)/(u[r].y-u[a].y)+u[a].x))return!0;s<o&&(n=!n)}}return n}function Po(t,e){if(To(t))return!1;for(var n=0,i=t.edges.length;n<i;n++)if(Bo(e,G(t.edges[n])))return!0;var r=D(U(e),2),a=r[0],o=r[1];return jo(t,a)||jo(t,o)}function Do(t,e){if(To(t))return!1;for(var n=0,i=t.edges.length;n<i;n++)if(Lo(e,G(t.edges[n])))return!0;var r=D($(e),4),a=r[0],o=r[1],s=r[2],c=r[3];return jo(t,a)||jo(t,o)||jo(t,s)||jo(t,c)}function Io(t,e){return!So(t)&&!So(e)&&t.x<=e.x+e.width&&e.x<=t.x+t.width&&t.y<=e.y+e.height&&e.y<=t.y+t.height}function qo(t,e){return!So(t)&&!So(e)&&[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}].every((function(e){return Fo(t,e)}))}function Fo(t,e){return!So(t)&&e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function Lo(t,e){if(Mo(e)||So(t))return!1;var n=D(U(e),2),i=n[0],r=n[1];if(Fo(t,i)||Fo(t,r))return!0;for(var a=$(t),o=a.length,s=0;s<o;s++)if(Bo(G([a[s],a[3!==s?s+1:0]]),e))return!0;return!1}function Bo(t,e){var n,i,r=D(U(t),2),a=r[0],o=r[1],s=D(U(e),2),c=s[0],u=s[1],l=oo(o,a),h=so(o,a),f=oo(u,c),d=so(u,c),p=oo(a,c),g=so(a,c),v=d*l-f*h,y=f*g-d*p,m=l*g-h*p;if(0===l&&0===h)return!1;if(0===f&&0===d)return!1;if(0===v){if(0!=y||0!=m)return!1;if(0===l){if(0===h)return a.x===o.x&&a.y===o.y;n=so(c,a)/h,i=so(u,a)/h}else n=(c.x-a.x)/l,i=(u.x-a.x)/l;return!(n<0&&i<0||1<n&&1<i)}var x=y/v;return v=m/v,0<=x&&x<=1&&0<=v&&v<=1}function Wo(t,e){if(Mo(t))return!1;var n=D(U(t),2);return ko(n[0],n[1],e)}function Ho(t,e){var n=t.boundingRect(),i=e.boundingRect();return!!Io(n,i)&&(qo(n,i)?Ao(t,e):Ao(e,t))}function Vo(t,e){var n=t.boundingRect(),i=e.boundingRect();return!!Io(n,i)&&(qo(i,n)?function(t,e){for(var n=t.numPolygons,i=t.polygons,r=0;r<n;r++)if(!0===Ho(e,i[r]))return!0;return!1}:function(t,e){for(var n=0,i=e.edges.length;n<i;n++)if(!0===$o(t,G(e.edges[n])))return!0;return!1})(t,e)}function Yo(t,e){if(Ro(t))return!1;if(Uo(e,{x:t.cx,y:t.cy}))return!0;for(var n=e.numPolygons,i=e.polygons,r=0;r<n;r++)for(var a=i[r],o=a.edges.length,s=0;s<o;s++)if(zo(t,G(a.edges[s])))return!0;return!1}function Uo(t,e){if(!Fo(t.boundingRect(),e))return!1;var n,i,r,a,o,s,c=e.x,u=e.y,l=t.numPolygons,h=!1;for(i=0;i<l;i++)for(o=-1,a=(r=(n=t.vertices[i]).length)-1;++o<r;a=o){if(n[o].x===c&&n[o].y===u)return!0;if(n[o].y===n[a].y&&n[o].y===u&&(c-n[o].x)*(c-n[a].x)<=0)return!0;if(n[o].y<u&&u<=n[a].y||n[a].y<u&&u<=n[o].y){if(c===(s=(n[a].x-n[o].x)*(u-n[o].y)/(n[a].y-n[o].y)+n[o].x))return!0;c<s&&(h=!h)}}return h}function $o(t,e){var n=D(U(e),2),i=n[0],r=n[1];if(Uo(t,i)||Uo(t,r))return!0;for(var a=t.numPolygons,o=t.polygons,s=0;s<a;s++)for(var c=o[s],u=0,l=c.edges.length;u<l;u++)if(Bo(e,G(c.edges[u])))return!0;return!1}function Xo(t,e){var n=D($(e),4),i=n[0],r=n[1],a=n[2],o=n[3];if(Uo(t,i)||Uo(t,r)||Uo(t,a)||Uo(t,o))return!0;for(var s=t.numPolygons,c=t.polygons,u=0;u<s;u++)for(var l=c[u],h=0,f=l.edges.length;h<f;h++)if(Lo(e,G(l.edges[h])))return!0;return!1}var Go=/^\$/,Ko="@extend";function Zo(t){throw new Error('Cyclical reference for "'.concat(t,'"'))}function Jo(t,e){return function t(e,n,i){if("string"==typeof e){var r=n[e];return-1!==i.indexOf(e)&&Zo(e),Go.test(r)?(i.push(e),t(r,n,i)):r}var a=e,o=x(!0,{},n,e),s={};if(e[Ko]){var c=e[Ko];-1!==i.indexOf(c)&&Zo(c);var u=i.slice();u.push(c),a=x(!0,{},t(o[c],n,u),e)}return Object.keys(a).forEach((function(e){var n=i.slice();if(e!==Ko&&!Go.test(e)){s[e]=a[e];var r=s[e];Go.test(r)&&r in o?(-1!==i.indexOf(r)&&Zo(r),n.push(r),"object"===w(r=o[r])||Go.test(r)&&r in o?s[e]=t(r,o,n):s[e]=r):"object"===w(r)&&(s[e]=t(r,o,n))}})),s}(t,e,[])}function Qo(t,e){function n(t){t.forEach((function(t){var e=Array.isArray(t.colors[0])?t.colors:[t.colors];r[t.key]={colors:e,sizes:e.map((function(t){return t?t.length:0}))}}))}var i=0<arguments.length&&void 0!==t?t:{},r={},a=i,o={palette:function(t,e){return function(t,e){var n=r[t];if(!n)return[];for(var i=n.sizes,a=0;a<i.length;a++)if(e<=i[a])return n.colors[a];return n.colors[i.length-1]}(t,e)},setPalettes:n,style:function(t){return Jo(t,a)},setStyle:function(t){a=x({},i,t)}};return n(1<arguments.length&&void 0!==e?e:[]),o}function ts(t,e,n){var i=e.left-n.left,r=e.top-n.top,a=K(t),o=x(!0,{},t);switch(a){case"circle":o.cx+=i,o.cy+=r;break;case"polygon":for(var s=0,c=o.vertices.length;s<c;s++){var u=o.vertices[s];u.x+=i,u.y+=r}break;case"geopolygon":for(var l=0;l<o.vertices.length;l++)for(var h=o.vertices[l],f=0,d=h.length;f<d;f++){var p=h[f];p.x+=i,p.y+=r}break;case"line":o.x1+=i,o.y1+=r,o.x2+=i,o.y2+=r;break;case"point":case"rect":o.x+=i,o.y+=r}return o}var es=function(t,e,n){var i=e.instance.renderer().element();if(!isNaN(n)&&i&&t&&t.children){var r=t.children[Math.max(0,n)];if(i!==r){var a=e.instance.def.additionalElements&&e.instance.def.additionalElements().filter(Boolean);t.insertBefore&&void 0!==r?(t.insertBefore(i,r),a&&a.forEach((function(e){t.insertBefore(e,i)}))):(a&&a.forEach((function(e){t.appendChild(e,i)})),t.appendChild(i))}}};function ns(t,e,n){var i=[],r=0,a=n?e.slice().sort((function(t,i){return n[e.indexOf(t)]-n[e.indexOf(i)]})):e;a.forEach((function(t){i.push(r),r++;var e=t.instance.def.additionalElements&&t.instance.def.additionalElements();e&&(r+=e.length)})),a.forEach((function(e,n){return es(t,e,i[n])}))}function is(t,e){function n(t,e){return h.component.has(t.type)?{instance:bo(h.component(t.type),{settings:t,chart:g,mediator:v,registries:h,theme:d,container:e}),settings:x(!0,{},t),key:t.key,hasKey:void 0!==t.key}:(f.warn("Unknown component: ".concat(t.type)),!1)}var i,r=t.element,a=t.data,o=void 0===a?[]:a,s=t.settings,c=void 0===s?{}:s,u=t.on,l=void 0===u?{}:u,h=e.registries,f=e.logger,d=Qo(e.style,e.palettes),p=[],g=x({},t),v=(i={},xa.mixin(i),i),y=[],m=[],b=null,_=null,k=null,M=[],S=function(){},R=function(){},A={},E=!1;function N(e,n){var i=1<arguments.length&&void 0!==n?n:function(){};return function(){for(var n,r,a="function"==typeof t[e],o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];n=a?(r=t[e]).call.apply(r,[g].concat(s)):i.call.apply(i,[g].concat(s));return n}}function C(t){for(var e=0;e<y.length;e++)if(y[e].instance===t)return y[e];return null}function z(t){for(var e=0;e<y.length;e++){var n=y[e];if(n.hasKey&&n.key===t)return e}return-1}function O(t){var e=t.map((function(t){var e=t.instance.dockConfig();return{instance:t.instance,resize:t.instance.resize,preferredSize:e.computePreferredSize.bind(e),settings:t.settings,layoutComponents:function(){}}})),n=ut(c.dockLayout?(f.warn('Deprecation Warning: "dockLayout" property should be renamed to "strategy"'),c.dockLayout):c.strategy),i=function(t){if("function"!=typeof t.getBoundingClientRect)return{x:0,y:0,width:0,height:0};var e=t.getBoundingClientRect();return{x:0,y:0,width:e.width,height:e.height}}(r),a=n.layout(i,e),o=a.visible,s=a.hidden,u=a.order;return{visible:o.map((function(t){return C(t.instance)})),hidden:s.map((function(t){return C(t.instance)})),order:u}}function j(t,e,n){var i,r,a,o,s,c,u=(2<arguments.length&&void 0!==n?n:{}).partialData,l=e.formatters,p=void 0===l?{}:l,g=e.scales,v=void 0===g?{}:g,y=e.scroll,m=void 0===y?{}:y;i=t,r={logger:f,types:h.data},a=r.types,o=r.logger,s={},c=[],Array.isArray(i)?c.push.apply(c,I(i)):(o.warn('Deprecated: "data-source" configuration"'),c.push(i)),c.forEach((function(t,e){var n=a(t.type);if(n){var i=t.key;void 0===t.key&&(o.warn("Missing key for dataset. Using index '".concat(e,"' as key.")),i=e);var r=n({key:i,data:t.data,config:t.config});s[i]=r}})),S=function(t){return t?s[t]:s[Object.keys(s)[0]]},u||Object.keys(A).forEach((function(t){return A[t].clear()})),e.palettes&&d.setPalettes(e.palettes),e.style&&d.setStyle(e.style),R=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:ci,a={};return(t||[]).forEach((function(t){if(!t.key)throw new Error('Data collection is missing "key" property');if("object"===w(t.data)&&"collection"in t.data)throw new Error("Data config for collections may not reference other collections");a[t.key]=function(){return r(t.data,e,n)}})),function(t){var e,n;if("string"==typeof t?e=t:"object"===w(t)&&(e=t.key,n=t),!(e in a))throw new Error("Unknown data collection: ".concat(e));"function"==typeof a[e]&&(a[e]=a[e]());var i=a[e];if(n&&n.fields&&n.fields.filter){var r=i.fields.filter(n.fields.filter);i.fields.length!==r.length&&(i=x(i,{fields:r}))}return i}}(e.collections,{dataset:S},{logger:f});var M={theme:d,logger:f};b=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:ga,a={};return{get:function(i){var o;return"string"==typeof i&&t[i]?o=i:"object"===w(i)&&"scale"in i&&t[i.scale]&&(o=i.scale),o?(a[o]=a[o]||r(t[o],e,n),a[o]):r(i,e,n)},all:function(){return Object.keys(t).forEach(this.get),a}}}(v,{dataset:S,collection:R},T(T({},M),{},{scale:h.scale})),_=function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:ui,a={};return{get:function(i){var o;return"string"==typeof i&&t[i]?o=i:"object"===w(i)&&"formatter"in i&&t[i.formatter]?o=i.formatter:"object"===w(i)&&"type"in i&&t[i.type]&&(o=i.type),o?(a[o]=a[o]||r(t[o],e,n),a[o]):r(i||{},e,n)},all:function(){return Object.keys(t).forEach(this.get),a}}}(p,{dataset:S,collection:R},T(T({},M),{},{formatter:h.formatter})),k=function(t,e){var n,i,r,a,o,s,c={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(c[u]=(n=t[u],i=e?e[u]:null,s=void 0,r=n.min||0,a=n.max||0,o=n.viewSize||0,(s=i||ba()).update({min:r,max:a,viewSize:o}),s));return c}(m,k)}var P=N("created"),D=N("beforeMount"),q=N("mounted"),F=N("beforeUpdate"),L=N("updated"),B=N("beforeRender"),W=N("beforeDestroy"),H=N("destroyed");function V(t){var e=0<arguments.length&&void 0!==t?t:[],n={},i=e.filter((function(t){return!!t.key})).map((function(t){return t.key}));M.forEach((function(t){t.key&&-1!==i.indexOf(t.key)?n[t.key]=t:t.destroy()})),M=e.map((function(t){var e=t.key&&n[t.key]?n[t.key]:h.interaction(t.type)(g,v,r);return e.set(t),e}))}function Y(t){var e=r.getBoundingClientRect(),n="clientX"in t?t.clientX:t.x,i="clientY"in t?t.clientY:t.y,a={x:n-e.left,y:i-e.top},o=[];return m.forEach((function(t){var e=t.instance.getRect();Fo(e.computedPhysical?e.computedPhysical:{x:e.margin.left+e.x*e.scaleRatio.x,y:e.margin.top+e.y*e.scaleRatio.y,width:e.width*e.scaleRatio.x,height:e.height*e.scaleRatio.y},a)&&o.push(t)})),o}function U(){if(!p.length&&r){Object.keys(l).forEach((function(t){var e=l[t].bind(g);r.addEventListener(t,e),p.push({key:t,listener:e})}));var t,e={},n=function(t){t.touches?(e.x=t.touches[0].clientX,e.y=t.touches[0].clientY,e.multiTouch=1<t.touches.length):(e.x=t.clientX,e.y=t.clientY,e.multiTouch=!1),e.time=Date.now(),e.comps=Y(e)},i=function(t){var n=e.comps||Y(t);if(!n.every((function(t){return t.instance.def.disableTriggers}))&&("touchend"===t.type&&t.preventDefault(),r=e,a=lt(i=t),o=a?i.changedTouches[0]:i,s=Date.now()-r.time,c=isNaN(r.x)?0:Math.abs(o.clientX-r.x),u=isNaN(r.y)?0:Math.abs(o.clientY-r.y),(0===i.button||a)&&!r.multiTouch&&c<=12&&u<=12&&s<=300))for(var i,r,a,o,s,c,u,l=n.length-1;0<=l;l--)if(n[l].instance.onBrushTap(t),E){E=!1;break}},a=[];a.push({key:"mousedown",listener:n}),a.push({key:"mouseup",listener:i}),("ontouchstart"in(t=r)&&"ontouchend"in t||1<navigator.maxTouchPoints)&&(a.push({key:"touchstart",listener:n}),a.push({key:"touchend",listener:i})),a.push({key:"mousemove",listener:function(t){for(var e=Y(t),n=e.length-1;0<=n;n--)if(e[n].instance.onBrushOver(t),E){E=!1;break}}}),a.forEach((function(t){r.addEventListener(t.key,t.listener),p.push(t)}))}}function $(){p.forEach((function(t){var e=t.key,n=t.listener;return r.removeEventListener(e,n)})),p.length=0}return g.update=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.partialData,a=e.excludeFromUpdate,s=void 0===a?[]:a;e.data&&(o=e.data),e.settings&&(c=e.settings,V(e.settings.interactions)),F(),j(o,c,{partialData:i});for(var u=c.formatters,l=c.scales,h=c.components,f=void 0===h?[]:h,d=function(t){var e=y[t];f.some((function(t){return e.hasKey&&e.key===t.key}))||(y.splice(t,1),e.instance.destroy())},p=y.length-1;0<=p;p--)d(p);(y=f.map((function(t){var e=z(t.key);return-1<s.indexOf(t.key)?y[e]:-1===e?n(t,r):(y[e].updateWith={formatters:u,scales:l,data:o,settings:t},y[e])})).filter((function(t){return!!t}))).forEach((function(t){t.updateWith&&t.instance.set(t.updateWith)})),y.forEach((function(t){t.updateWith&&t.instance.beforeUpdate()}));var g,v=[],x=[];if(i)y.forEach((function(t){t.updateWith&&t.visible&&v.push(t)})),g=v;else{var b=O(y),w=b.visible,_=b.hidden;t=b.order,(g=m=w).forEach((function(t){t.updateWith&&t.visible?v.push(t):x.push(t)})),_.forEach((function(t){t.instance.hide(),t.visible=!1,delete t.updateWith}))}x.forEach((function(t){return t.instance.beforeMount()})),x.forEach((function(t){return t.instance.mount()})),g.forEach((function(t){return t.instance.beforeRender()})),g.forEach((function(t){t.updateWith&&t.visible?t.instance.update():t.instance.render()})),i||ns(r,m,t),x.forEach((function(t){return t.instance.mounted()})),v.forEach((function(t){return t.instance.updated()})),m.forEach((function(t){delete t.updateWith,t.visible=!0})),L()},g.destroy=function(){W(),y.forEach((function(t){return t.instance.destroy()})),y=[],$(),V(),delete g.update,delete g.destroy,H()},g.getAffectedShapes=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"and",n=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0,r=[];return y.filter((function(t){return null==i||t.key===i})).forEach((function(i){r.push.apply(r,I(i.instance.getBrushedShapes(t,e,n)))})),r},g.findShapes=function(t){var e=[];return m.forEach((function(n){e.push.apply(e,I(n.instance.findShapes(t)))})),e},g.componentsFromPoint=function(t){return Y(t).map((function(t){return t.instance.ctx}))},g.shapesAt=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=[],i=r.getBoundingClientRect(),a=m;if(Array.isArray(e.components)&&0<e.components.length){var o=e.components.map((function(t){return t.key}));a=m.filter((function(t){return-1!==o.indexOf(t.key)})).map((function(t){return{instance:t.instance,opts:e.components[o.indexOf(t.key)]}}))}for(var s=a.length-1;0<=s;s--){var c=a[s],u=ts(t,i,c.instance.renderer().element().getBoundingClientRect()),l=c.instance.shapesAt(u,c.opts),h=0<l.length&&"stop"===e.propagation;if(n.push.apply(n,I(l)),0<n.length&&h)return n}return n},g.brushFromShapes=function(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{components:[]},n=function(n){var i=e.components[n].key;m.filter((function(t){return i===t.key})).forEach((function(i){var r=t.filter((function(t){return t.key===i.key}));i.instance.brushFromShapes(r,e.components[n])}))},i=0;i<e.components.length;i++)n(i)},g.scroll=function(t){var e,n;return(n=k)[e=0<arguments.length&&void 0!==t?t:"default"]||(n[e]=ba()),n[e]},g.dataset=function(t){return S(t)},g.dataCollection=function(t){return R(t)},g.scales=function(){return b.all()},g.formatters=function(){return _.all()},g.brush=function(t){var e=0<arguments.length&&void 0!==t?t:"default";return A[e]||(A[e]=Pa()),A[e]},g.scale=function(t){return b.get(t)},g.formatter=function(t){return _.get(t)},g.toggleBrushing=function(t){E=void 0!==t?t:!E},g.component=function(t){var e=z(t);if(-1!==e)return y[e].instance.ctx},g.logger=function(){return f},g.theme=function(){return d},Object.defineProperty(g,"interactions",{get:function(){return{instances:M,on:function(){U(),M.forEach((function(t){return t.on()}))},off:function(){$(),M.forEach((function(t){return t.off()}))}}}}),P(),r&&(D(),r.innerHTML="",function(){var t=c.components,e=void 0===t?[]:t;B(),j(o,c),y=e.map((function(t){return n(t,r)})).filter((function(t){return!!t}));var i=O(y),a=i.visible,s=i.hidden,u=i.order;m=a,s.forEach((function(t){t.instance.hide(),t.visible=!1})),a.forEach((function(t){return t.instance.beforeMount()})),a.forEach((function(t){return t.instance.mount()})),a.forEach((function(t){return t.instance.beforeRender()})),a.forEach((function(t){return t.instance.render()})),a.forEach((function(t){return t.instance.mounted()})),a.forEach((function(t){t.visible=!0})),ns(r,m,u)}(),U(),V(c.interactions),q(r),g.element=r),g}var rs=function(t){var e=de(t);return e.prio=function(t){return t?e.default(t[0]):[e.default()]},e.types=function(){return e.getKeys()},e},as=de();var os=function(t){return t.filter((function(t){return"number"==typeof t&&!isNaN(t)}))},ss=function(t){return t.reduce((function(t,e){return t+e}),0)},cs={first:function(t){return t[0]},last:function(t){return t[t.length-1]},min:function(t){var e=os(t);return e.length?Math.min.apply(null,e):NaN},max:function(t){var e=os(t);return e.length?Math.max.apply(null,e):NaN},sum:function(t){var e=os(t);return e.length?e.reduce((function(t,e){return t+e}),0):NaN},avg:function(t){var e=os(t),n=e.length;return n?ss(e)/n:NaN}};function us(t,e,n,i){var r={},a=i.field||(void 0!==t.field?e.field(t.field):null);return Object.keys(n).forEach((function(o){var s=n[o],c=r[o]={};-1!==["number","string","boolean"].indexOf(w(s))?(c.type="primitive",c.value=s):"function"==typeof s?(c.type="function",c.value=s,c.label=s,c.field=a):"object"===w(s)&&(s.fields?c.fields=s.fields.map((function(n){return us(t,e,{main:n},i).main})):void 0!==s.field?(c.type="field",c.field=e.field(s.field),c.value=c.field.value,c.label=c.field.label):a&&(c.value=a.value,c.label=a.label,c.field=a),"function"==typeof s.filter&&(c.filter=s.filter),void 0!==s.value&&(c.value=s.value),void 0!==s.label&&(c.label=s.label),"function"==typeof s.reduce?c.reduce=s.reduce:s.reduce?c.reduce=cs[s.reduce]:c.field&&c.field.reduce&&(c.reduce="string"==typeof c.field.reduce?cs[c.field.reduce]:c.field.reduce),"function"==typeof s.reduceLabel?c.reduceLabel=s.reduceLabel:s.reduceLabel?c.reduceLabel=cs[s.reduceLabel]:c.field&&c.field.reduceLabel&&(c.reduceLabel="string"==typeof c.field.reduceLabel?cs[c.field.reduceLabel]:c.field.reduceLabel))})),r}function ls(t,e){var n=us(t,e,{main:{value:t.value,label:t.label,reduce:t.reduce,filter:t.filter}},{}).main;return{props:us(t,e,t.props||{},n),main:n}}function hs(t,e,n,i){for(var r,a=Array(t.length),o=Array(t.length),s=0;s<t.length;s++)r=i?t[s][i]:t[s],a[s]=r.value,o[s]=r.label;var c=e.reduce,u=e.reduceLabel,l=c?c(a):a,h={value:l,label:u?u(o,l):(n||String)(l)};return i&&t[0][i].source?h.source=t[0][i].source:!i&&t[0].source&&(h.source=t[0].source),h}function fs(t,e){var n=e.main,i=e.propsArr,r=e.props,a=[],o=n.field.formatter(),s={};return i.forEach((function(t){s[t]=r[t].field?r[t].field.formatter():function(t){return t}})),a.push.apply(a,I(t.map((function(t){var e=hs(t.items,n,o);return i.forEach((function(n){e[n]=hs(t.items,r[n],s[n],n)})),e})))),a}function ds(t){var e=t.cfg,n=t.itemData,i=t.obj,r=t.target,a=t.tracker,o="function"===t.trackType?e.trackBy(n):n[e.trackBy],s=a[o];s||(s=a[o]={items:[],id:o},r.push(s)),s.items.push(i)}function ps(t,e,n){var i=n.key,r={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return r.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(r.value),t.field&&(r.source={key:i,field:t.field.key()}),r}var gs=function(t){return t.filter((function(t){return"number"==typeof t&&!isNaN(t)}))};function vs(t){var e=t.key,n=t.data,i=t.cache,r=t.config;if(n){var a=n;"string"==typeof a&&(a=function(t){var e=t.data,n=t.config,i=e.split("\n"),r=i[0],a=i[1],o=",";if(n&&n.parse&&n.parse.delimiter)o=n.parse.delimiter;else if(r)for(var s=[/,/,/\t/,/;/],c=0;c<s.length;c++){var u=s[c];if(r&&a){if(u.test(r)&&u.test(a)&&r.split(u).length===a.split(u).length){o=u;break}}else u.test(r)&&(o=u)}return i.map((function(t){return t.split(o)}))}({data:n,config:r})),Array.isArray(a)&&function(t){var e,n=t.source,i=t.data,r=t.cache,a=t.config,o=i,s=a&&a.parse;Array.isArray(i[0])?s&&!1===s.headers?e=i[0].map((function(t,e){return e})):(e=i[0],o=i.slice(1)):e=Object.keys(i[0]);var c,u=!!s&&"function"==typeof s.row&&s.row,l=e;l=s&&"function"==typeof s.fields?s.fields(l.slice()):e.map((function(t){return{key:t,title:t}})),Array.isArray(i[0])?c=l.map((function(){return[]})):(c={},l.forEach((function(t){c[t.key]=[]})));for(var h=0;h<o.length;h++){var f=u?u(o[h],h,l):o[h];if(f)if(Array.isArray(f))for(var d=0;d<l.length;d++)c[d].push(f[d]);else for(var p=0;p<l.length;p++)c[l[p].key].push(f[l[p].key])}for(var g=Array.isArray(c)?function(t){return c[t]}:function(t){return c[l[t].key]},v=0;v<l.length;v++){var y=g(v),m=gs(y),b=0<m.length,w=b?"measure":"dimension",_=b?Math.min.apply(Math,I(m)):NaN,k=b?Math.max.apply(Math,I(m)):NaN;r.fields.push(ri(x({source:n,key:v,title:l[v].title,values:y,min:_,max:k,type:w},l[v]),{value:l[v].value,label:l[v].label}))}}({data:a,cache:i,source:e,config:r})}}function ys(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=t.data,i=t.config,r={fields:[]},a={key:function(){return e},raw:function(){return n},field:function(t){return function(t,e){var n=e.cache;if("number"==typeof t)return n.fields[t];for(var i=0;i<n.fields.length;i++)if(n.fields[i].key()===t)return n.fields[i];for(var r=0;r<n.fields.length;r++)if(n.fields[r].title()===t)return n.fields[r];return null}(t,{cache:r,matrix:n})},fields:function(){return r.fields.slice()},extract:function(t){return e=t,n=a,i=Array.isArray(e)?e:[e],r=[],i.forEach((function(t){void 0!==t.field&&function(){var e=n.field(t.field),i=n.key();if(!e)throw Error("Field '".concat(t.field,"' not found"));for(var a=ls(t,n),o=a.props,s=a.main,c=Object.keys(o),u=!!t.trackBy,l=w(t.trackBy),h={},f=[],d=e.items(),p=[],g=function(e){var n=d[e];if(s.filter&&!s.filter(n))return"continue";var r=ps(s,n,{key:i});c.forEach((function(t){var a=o[t],s=a.field?a.field.items()[e]:n;r[t]=ps(a,s,{key:i})})),u&&ds({cfg:t,itemData:n,obj:r,target:f,tracker:h,trackType:l}),p.push(r)},v=0;v<d.length;v++)g(v);u?r.push.apply(r,I(fs(f,{main:s,propsArr:c,props:o}))):r.push.apply(r,p)}()})),r;var e,n,i,r},hierarchy:function(){return null}};return vs({key:e,data:n,config:i,cache:r}),a}ys.util={normalizeConfig:ls,collect:fs,track:ds};var ms=de();ms.default("matrix"),ms("matrix",ys),ms("default",ys);var xs=de();function bs(t,e,n){return Math.max(t,Math.min(e,n))}function ws(t){var e,n=t.item,i=t.value,r=t.boxCenter,a=t.rendWidth,o=t.rendHeight,s="x",c="y",u=a,l=o,h=i<.5?90:-90;return t.flipXY&&(s="y",c="x",u=o,l=a,h=i<.5?180:0),(0,t.symbol)(x({},n.oob,(S(e={},s,r*u),S(e,c,Math.max(n.oob.size/2,Math.min(i*l,l-n.oob.size/2))),S(e,"startAngle",h),e)))}function _s(t){var e,n=t.item,i=t.boxWidth,r=t.boxPadding,a=t.rendWidth,o=t.rendHeight,s="x",c="y",u="width",l="height",h=a,f=o;t.flipXY&&(s="y",c="x",u="height",l="width",h=o,f=a);var d,p,g,v,y,m,b,w,_,k,M,R,T,A,E=(d={start:n.start,end:n.end,minPx:n.box.minHeightPx,maxPx:f},p=d.start,g=d.end,v=d.minPx,y=void 0===v?.1:v,m=d.maxPx,b=void 0===m?1:m,w=Math.max(p,g),_=Math.min(p,g),k=bs(-.1,1.2,w),M=bs(-.1,1.2,_),R=k*b-M*b,{actualDiff:T=Math.max(y,R),startModifier:A=(T-R)/2,actualLow:M*b-A}),N=E.actualDiff,C=E.actualLow;return x({},n.box,(S(e={type:"rect"},s,(r+n.major)*h),S(e,c,C),S(e,l,N),S(e,u,i*h),S(e,"data",n.data||{}),S(e,"collider",{type:null}),e))}function ks(t){var e,n=t.item,i=t.from,r=t.to,a=t.boxCenter,o=t.rendWidth,s=t.rendHeight,c="x1",u="y1",l="x2",h="y2",f=o,d=s;return t.flipXY&&(c="y1",u="x1",l="y2",h="x2",f=s,d=o),x({},n.line,(S(e={type:"line"},h,Math.floor(i*d)),S(e,c,a*f),S(e,u,Math.floor(r*d)),S(e,l,a*f),S(e,"data",n.data||{}),S(e,"collider",{type:null}),e))}function Ms(t){var e,n=t.item,i=t.key,r=t.position,a=t.width,o=t.boxCenter,s=t.rendWidth,c=t.rendHeight,u="x1",l="y1",h="x2",f="y2",d=s,p=c;t.flipXY&&(u="y1",l="x1",h="y2",f="x2",d=c,p=s);var g=a/2;return x({type:"line"},n[i],(S(e={},l,Math.floor(r*p)),S(e,u,(o-g)*d),S(e,f,Math.floor(r*p)),S(e,h,(o+g)*d),S(e,"r",g*d),S(e,"cx",o*d),S(e,"cy",r*p),S(e,"width",a*d),S(e,"data",n.data||{}),S(e,"collider",{type:null}),e))}function Ss(t){var e=t.width,n=t.height,i=t.flipXY,r=t.resolved,a=t.keys,o=t.symbol,s=[],c=r.major.items;if(!c.length)return s;var u,l,h,f,d,p,g,v,y,m=e,b=n,w=i?n:e,_=r.major.settings,k=["start","end","min","max","med"].filter((function(t){return void 0!==r.minor.settings[t]})),M=k.length,S=a.filter((function(t){return"oob"!==t})),R=a?a.length:0,T=S?S.length:0;var A,E,N,C,z,O,j,P,D={box:function(){h.box&&H(h.start)&&H(h.end)&&u.push(_s({item:h,boxWidth:f,boxPadding:d,rendWidth:m,rendHeight:b,flipXY:i}))},line:function(){H(h.min)&&H(h.start)&&u.push(ks({item:h,from:h.min,to:h.start,boxCenter:p,rendWidth:m,rendHeight:b,flipXY:i})),H(h.max)&&H(h.end)&&u.push(ks({item:h,from:h.max,to:h.end,boxCenter:p,rendWidth:m,rendHeight:b,flipXY:i}))},median:function(){h.median&&H(h.med)&&u.push(Ms({item:h,key:"median",position:h.med,width:f,boxCenter:p,rendWidth:m,rendHeight:b,flipXY:i}))},whisker:function(){if(h.whisker){var t=f*h.whisker.width;H(h.min)&&u.push(Ms({item:h,key:"whisker",position:h.min,width:t,boxCenter:p,rendWidth:m,rendHeight:b,flipXY:i})),H(h.max)&&u.push(Ms({item:h,key:"whisker",position:h.max,width:t,boxCenter:p,rendWidth:m,rendHeight:b,flipXY:i}))}}};function I(){for(var t,e=-Number.MAX_VALUE,n=Number.MAX_VALUE,i=0;i<M;i++)H(t=h[k[i]])&&(e<t&&(e=t),t<n&&(n=t));g=e<0&&e!==-Number.MAX_VALUE,v=1<n&&n!==Number.MAX_VALUE,y=g||v}for(var q=0,F=c.length;q<F;q++){u=[],l=null;var L=c[q],B=L.data,W=null,V=null;void 0!==_.binStart?(W=L.binStart,V=L.binEnd,l=_.binStart.scale):W=(l=_.major.scale)?L.major:0;var Y=0;l?l.bandwidth?W-=(Y=l.bandwidth())/2:Y=V-W:Y=1,h=x({},{major:W,majorEnd:V},r.minor.items[q]);for(var U=0;U<R;U++)h[a[U]]=r[a[U]].items[q];if(A=Y,E=w,P=void 0,N=h.box,C=N.width,z=N.maxWidthPx,O=N.minWidthPx,j=0<=A?1:-1,P=Math.min(j*A*C,isNaN(z)?E:z/E),f=(P=isNaN(O)?P:Math.max(O/E,P))*j,p=(d=(Y-f)/2)+h.major+f/2,I(),y)h.oob&&(g?u.push(ws({item:h,value:0,boxCenter:p,rendWidth:m,rendHeight:b,flipXY:i,symbol:o})):v&&u.push(ws({item:h,value:1,boxCenter:p,rendWidth:m,rendHeight:b,flipXY:i,symbol:o})));else for(var $=0;$<T;$++)h[S[$]]&&!1===h[S[$]].show||D[S[$]]();var X={type:"container",data:B,collider:{type:"bounds"},children:u};s.push(X)}return s}xs("native",(function(t,e,n){var i,r,a={chart:t,mediator:e,element:n},o=[],s=!0;function c(){"function"==typeof i.enable&&(i.enable=i.enable.bind(a)()),i.enable&&Object.keys(i.events).forEach((function(t){var e=i.events[t].bind(a);n.addEventListener(t,e),o.push({key:t,listener:e})}))}function u(){o.forEach((function(t){var e=t.key,i=t.listener;n.removeEventListener(e,i)})),o=[]}return{get key(){return r},set:function(t){var e;r=(e=t).key,(i=e).events=i.events||[],void 0===i.enable&&(i.enable=!0),u(),s&&c()},off:function(){s=!1,u()},on:function(){s=!0,0===o.length&&c()},destroy:function(){u(),i=a=null}}}));var Rs={oob:{show:!0,type:"n-polygon",fill:"#999",stroke:"#000",strokeWidth:0,size:10,sides:3,startAngle:-90},box:{show:!0,fill:"#fff",stroke:"#000",strokeWidth:1,strokeLinejoin:"miter",width:1,maxWidthPx:void 0,minWidthPx:1,minHeightPx:1},line:{show:!0,stroke:"#000",strokeWidth:1},median:{show:!0,stroke:"#000",strokeWidth:1},whisker:{show:!0,stroke:"#000",strokeWidth:1,fill:"",type:"line",width:1}},Ts=Object.keys(Rs),As={require:["chart","resolver","symbol"],defaultSettings:{settings:{},data:{},style:{box:"$shape",line:"$shape-guide",whisker:"$shape-guide",median:"$shape-guide--inverted"}},created:function(){this.state={}},render:function(t){var e=this,n=t.data,i=this.rect,r=i.width,a=i.height,o="horizontal"===this.settings.settings.orientation,s=this.style,c=this.resolver,u=this.symbol,l=Ts.filter((function(t){return!e.settings.settings[t]||!1!==e.settings.settings[t].show})),h={};l.forEach((function(t){return h[t]=Rs[t]}));var f=function(t){var e,n=t.keys,i=t.data,r=t.defaultSettings,a=t.style,o=t.settings,s=t.width,c=t.height,u=t.resolver,l=x(!0,{},r||{},a||{}),h={major:"horizontal"===o.orientation?c:s,minor:"horizontal"===o.orientation?s:c},f=o.major;e="object"===w(f)&&"object"===w(f.ref)&&void 0!==f.ref.start&&void 0!==f.ref.end?u.resolve({data:i,defaults:{start:0,end:1},scaled:h,settings:x(!0,{},{binStart:{scale:o.major.scale,ref:o.major.ref.start},binEnd:{scale:o.major.scale,ref:o.major.ref.end}})}):"object"===w(f)&&void 0!==f.binStart&&void 0!==f.binEnd?u.resolve({data:i,defaults:{start:0,end:1},scaled:h,settings:x(!0,{},{binStart:{scale:o.major.scale,ref:"binStart"},binEnd:{scale:o.major.scale,ref:"binEnd"}},o.major)}):u.resolve({data:i,scaled:h,defaults:{major:.5},settings:{major:o.major}});var d=o.minor||{},p={};["start","end","min","max","med"].forEach((function(t){(d[t]||i.items&&i.items.length&&i.items[0][t])&&(p[t]={scale:d.scale,ref:t})}));for(var g,v={major:e,minor:u.resolve({data:i,defaults:{start:0,end:1},scaled:h,settings:x(!0,{},p,d)})},y=0,m=n.length;y<m;y++)o[g]&&!1===o[g].show||(v[g=n[y]]=u.resolve({data:i,defaults:l[g],settings:o[g],scaled:h}));return v}({keys:l,data:n,defaultSettings:h,style:s,settings:this.settings.settings,width:r,height:a,resolver:c}),d=f.settings;return Ss({items:f.items,settings:d,width:r,height:a,flipXY:o,resolved:f,keys:l,symbol:u})}};var Es={shape:"saltire",width:2,size:.5,fill:"#333",stroke:"#333",strokeWidth:0},Ns=/px$/,Cs={shape:"circle",label:"",fill:"#333",stroke:"#ccc",strokeWidth:0,strokeLinejoin:"miter",opacity:1,x:.5,y:.5,size:1,strokeDasharray:"",show:!0},zs={maxPx:1e4,minPx:1,maxRelExtent:.1,minRelExtent:.01,maxRelDiscrete:1,minRelDiscrete:.1};function Os(t,e){return t&&"function"==typeof t.bandwidth?{isBandwidth:!0,value:Math.max(1,t.bandwidth()*e)}:{isBandwidth:!1,value:Math.max(1,e)}}function js(t,e,n,i){var r=e.width,a=e.height;return t.filter((function(t){return!1!==t.show&&!isNaN(t.x+t.y)})).map((function(t){var e=t,o=Ns.test(t.size)?parseInt(t.size,10):n.min+e.size*(n.max-n.min);V(o)&&(e=Es,o=n.min+e.size*(n.max-n.min));var s,c,u,l=D((s=e,c=Cs.shape,u={},"object"===w(s.shape)&&"string"==typeof s.shape.type?(c=s.shape.type,u=s.shape):"string"==typeof s.shape&&(c=s.shape),[c="rect"===c?"square":c,u]),2),h=l[0],f=T(T({},l[1]),{},{type:h,label:t.label,x:t.x*r,y:t.y*a,fill:e.fill,size:Math.min(n.maxGlobal,Math.max(n.minGlobal,o)),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray,opacity:e.opacity});e===t.errorShape&&(f.width=e.width);var d=i(f);return d.data=t.data,d}))}var Ps={require:["chart","resolver","symbol"],defaultSettings:{settings:{},data:{},animations:{enabled:!1,trackBy:function(t){return t.data.value}},style:{item:"$shape"}},render:function(t){var e,n,i,r,a,o,s,c,u,l=t.data,h=this.resolver.resolve({data:l,defaults:x({},Cs,this.style.item),settings:this.settings.settings,scaled:{x:this.rect.width,y:this.rect.height}}),f=this.rect,d=f.width,p=f.height,g=x({},zs,this.settings.settings.sizeLimits),v=h.items,y=(e=h.settings.x,n=h.settings.y,i=d,r=p,a=g,o=Os(e?e.scale:void 0,i),s=Os(n?n.scale:void 0,r),c=Math.min(o.value*a[o.isBandwidth?"maxRelDiscrete":"maxRelExtent"],s.value*a[s.isBandwidth?"maxRelDiscrete":"maxRelExtent"]),u=Math.min(o.value*a[o.isBandwidth?"minRelDiscrete":"minRelExtent"],s.value*a[s.isBandwidth?"minRelDiscrete":"minRelExtent"]),{min:Math.max(1,Math.floor(u)),max:Math.max(1,Math.floor(c)),maxGlobal:a.maxPx,minGlobal:a.minPx});return js(v,this.rect,y,this.settings.shapeFn||this.symbol)}};Math.PI;var Ds={label:"",arc:1,show:!0,fill:"#333",stroke:"#ccc",strokeWidth:1,strokeLinejoin:"round",opacity:1,innerRadius:0,outerRadius:.8,cornerRadius:0,offset:0};function Is(t,e,n,i){var r=e.x,a=e.y,o=e.width,s=e.height,c=Dt(),u={x:r+o/2,y:a+s/2},l=Math.min(o,s)/2,h=Math.min(o,s)/2,f=h/100;return t.map((function(t,e){var r=n[e];r.type="path";var a=h*r.outerRadius,o=l*r.innerRadius;c.innerRadius(o),c.outerRadius(a),c.cornerRadius(f*r.cornerRadius),r.d=c(t);var s,d,p,g,v,y,m,x,b,w=c.centroid(t),_=r.offset?(s=w,d=r.offset,p=a,g=o,v=D(s,2),y=v[0],m=v[1],x=Math.sqrt(y*y+m*m),{x:(y/=x)*d*(b=p-g),y:(m/=x)*d*b}):{x:0,y:0};return r.transform="translate(".concat(_.x,", ").concat(_.y,") translate(").concat(u.x,", ").concat(u.y,")"),r.desc={share:t.value/i,slice:{start:t.startAngle,end:t.endAngle,innerRadius:o,outerRadius:a,offset:{x:u.x+_.x,y:u.y+_.y}}},r}))}var qs={require:["chart","resolver"],defaultSettings:{settings:{startAngle:0,endAngle:2*Math.PI,padAngle:0,slice:{}},style:{slice:"$shape"},data:{}},render:function(t){for(var e,n,i=t.data,r=[],a=[],o=this.settings.settings,s=this.resolver.resolve({data:i,defaults:x({},Ds,this.style.slice),settings:o.slice}).items,c=0,u=0,l=s.length;u<l;u++){var h=(e=o,n=s[u],e.slice&&"arc"in e.slice?n.arc:n.data.value);0<h&&s[u].outerRadius>=s[u].innerRadius&&(r.push(h),a.push(s[u]),c+=h)}var f,d,p,g,v,y,m=(f=Ht,d=Wt,p=null,g=yt(0),v=yt(At),y=yt(0),b.value=function(t){return arguments.length?(f="function"==typeof t?t:yt(+t),b):f},b.sortValues=function(t){return arguments.length?(d=t,p=null,b):d},b.sort=function(t){return arguments.length?(p=t,d=null,b):p},b.startAngle=function(t){return arguments.length?(g="function"==typeof t?t:yt(+t),b):g},b.endAngle=function(t){return arguments.length?(v="function"==typeof t?t:yt(+t),b):v},b.padAngle=function(t){return arguments.length?(y="function"==typeof t?t:yt(+t),b):y},b.sortValues(null));function b(t){var e,n,i,r,a,o=t.length,s=0,c=new Array(o),u=new Array(o),l=+g.apply(this,arguments),h=Math.min(At,Math.max(-At,v.apply(this,arguments)-l)),m=Math.min(Math.abs(h)/o,y.apply(this,arguments)),x=m*(h<0?-1:1);for(e=0;e<o;++e)0<(a=u[c[e]=e]=+f(t[e],e,t))&&(s+=a);for(null!=d?c.sort((function(t,e){return d(u[t],u[e])})):null!=p&&c.sort((function(e,n){return p(t[e],t[n])})),e=0,i=s?(h-o*x)/s:0;e<o;++e,l=r)n=c[e],r=l+(0<(a=u[n])?a*i:0)+x,u[n]={data:t[n],index:e,value:a,startAngle:l,endAngle:r,padAngle:m};return u}return m.startAngle(o.startAngle),m.endAngle(o.endAngle),m.padAngle(o.padAngle),Is(m(r),x({},this.rect,{x:0,y:0}),a,c)}};var Fs,Ls=(void 0===Fs&&(Fs={line:{append:["x1","x2","y1","y2"],round:[],condition:function(t){return t.x1===t.x2||t.y1===t.y2},conditionAppend:function(t){return t.strokeWidth%2!=0}},rect:{append:["x","y"],round:["width","height"],condition:function(){return!0},conditionAppend:function(t){return t.strokeWidth%2!=0}}}),Object.keys(Fs).forEach((function(t){var e=Fs[t];e.items=[],e.append.forEach((function(t){e.items.push({key:t,type:"append"})})),e.round.forEach((function(t){e.items.push({key:t,type:"round"})}))})),Bs.multiple=function(t){return t.forEach((function(t){return Bs(t)}))},Bs);function Bs(t){if(Fs[t.type]&&Fs[t.type].condition(t)){var e=Fs[t.type],n=void 0===e.conditionAppend||e.conditionAppend(t);e.items.forEach((function(e){var i=Math.round(t[e.key]),r=t[e.key]-i;t[e.key]=i,n&&"append"===e.type&&(0<r?t[e.key]+=.5:t[e.key]-=.5)}))}}var Ws=function(){function t(){_(this,t),this.reset(),this.push.apply(this,arguments)}return M(t,[{key:"transposeCoordinate",value:function(t,e,n){if("number"==typeof e&&isFinite(e)){var i=t.substring(0,1);if("x"===i||"cx"===t)return e*this.width;if("width"===t)return e*this.width;if("r"===t)return e*(n?this.height:this.width);if("y"===i||"cy"===t)return e*this.height;if("height"===t)return e*this.height}return e}},{key:"push",value:function(){var t;return(t=this.storage).push.apply(t,arguments),this}},{key:"processItem",value:function(e){var n={},i=void 0!==e.flipXY?e.flipXY:this.flipXY,r=void 0!==e.crisp?e.crisp:this.crisp;if(e.fn&&"function"==typeof e.fn){var a=i?this.height:this.width,o=i?this.width:this.height;e=e.fn({width:a,height:o,flipXY:i});for(var s=Object.keys(e),c=0,u=s.length;c<u;c++){var l=s[c];n[t.evaluateKey(l,i)]=e[l]}}else for(var h=Object.keys(e),f=0,d=h.length;f<d;f++){var p=h[f],g=t.evaluateKey(p,i),v=this.transposeCoordinate(g,e[p],i);n[g]=v}return r&&Ls(n),n}},{key:"output",value:function(){for(var t=[],e=0,n=this.storage.length;e<n;e++){var i=this.processItem(this.storage[e]);t.push(i)}return t}},{key:"reset",value:function(){this.storage=[],this.flipXY=!1,this.crisp=!1,this.width=0,this.height=0}}],[{key:"evaluateKey",value:function(t,e){if(e){var n=t.substring(0,1),i=t.substring(1);if("x"===n)return"y".concat(i);if("y"===n)return"x".concat(i);if("cx"===t)return"cy";if("cy"===t)return"cx";if("width"===t)return"height";if("height"===t)return"width"}return t}}]),t}();function Hs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Ws,e)}function Vs(t,e){return t&&e?t.cachedTicks&&t.cachedTicks()||t.ticks({distance:e}):[]}var Ys={created:function(){},require:["chart","renderer","resolver"],defaultSettings:{layout:{displayOrder:0},style:{ticks:"$guide-line",minorTicks:"$guide-line--minor"}},beforeRender:function(){this.blueprint=Hs(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this;if(this.x=this.settings.x?this.chart.scale(this.settings.x):null,this.y=this.settings.y?this.chart.scale(this.settings.y):null,Ha(this,"x",this.rect.width),Ha(this,"y",this.rect.height),!this.x&&!this.y)return[];this.settings.ticks=x({show:!0},this.style.ticks,this.settings.ticks||{}),this.settings.minorTicks=x({show:!1},this.style.minorTicks,this.settings.minorTicks||{}),this.lines={x:[],y:[]},this.lines.x=Vs(this.x,this.rect.width),this.lines.y=Vs(this.y,this.rect.height),this.lines.y=this.lines.y.map((function(t){return x(t,{flipXY:!0})}));function e(e){var n=e.dir,i=e.isMinor,r=t.lines[n].filter((function(t){return!!t.isMinor===i})),a=i?t.settings.minorTicks:t.settings.ticks;t.resolver.resolve({settings:a,data:{items:r,dir:n}}).items.forEach((function(e){var n=e.data;e.show&&t.blueprint.push({type:"line",x1:n.position,y1:0,x2:n.position,y2:1,stroke:e.stroke||"black",strokeWidth:void 0!==e.strokeWidth?e.strokeWidth:1,strokeDasharray:void 0!==e.strokeDasharray?e.strokeDasharray:void 0,flipXY:n.flipXY||!1})}))}return e({dir:"x",isMinor:!1}),e({dir:"x",isMinor:!0}),e({dir:"y",isMinor:!1}),e({dir:"y",isMinor:!0}),this.blueprint.output()}};function Us(t){for(var e=t.blueprint,n=t.oob,i=t.settings,r=t.items,a=Object.keys(n),o=i.style.oob||{},s=function(t){var i=a[t],s=n[i];if(0<s.length){var c=i.charAt(1),u="y"===i.charAt(0),l=o.padding.x+o.width,h=o.padding.y+o.width,f="bottom";f=u?"1"===c?"bottom":"top":"1"===c?"right":"left";var d=e.processItem({fn:function(t){var e=t.width,n=t.height,i=c*e+("1"===c?-l:l),r=u?h:n-h;return"arc"===o.type?{type:"path",d:function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:"bottom";if(n*=.8,"left"===r||"right"===r){var a="right"===r;return"\n      M ".concat(t," ").concat(e-n,"\n      A ").concat(1.25*n," ").concat(1.25*n,", 0, 1, ").concat(a?0:1,", ").concat(t," ").concat(e+n,"\n      L ").concat(a?t+n:t-n," ").concat(e," Z\n    ")}var o="bottom"===r;return"\n    M ".concat(t-n," ").concat(e,"\n    A ").concat(1.25*n," ").concat(1.25*n,", 0, 1, ").concat(o?1:0,", ").concat(t+n," ").concat(e,"\n    L ").concat(t," ").concat(o?e+n:e-n," Z\n  ")}(u?r:i,u?i:r,o.width,f),x:i,y:r,stroke:o.stroke,fill:o.fill,strokeWidth:o.strokeWidth||0}:{type:"circle",cx:i,cy:r,r:o.width,stroke:o.stroke,fill:o.fill,strokeWidth:o.strokeWidth||0,opacity:o.opacity,data:s}},flipXY:u}),p=d.cx||d.x,g=d.cy||d.y,v={type:"text",text:s.length||"",x:p-.4*o.width,y:g+.4*o.width,fontFamily:o.text.fontFamily,fontSize:"".concat(1.3*o.width,"px"),stroke:o.text.stroke,fill:o.text.fill,strokeWidth:o.text.strokeWidth||0,opacity:o.text.opacity},y={type:"path",d:function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:"bottom";if(n*=.75,"left"===r||"right"===r){var a="right"===r;return"\n      M ".concat(t+=a?1.5*n:-1.5*n," ").concat(e-n,"\n      L ").concat(t," ").concat(e+n,"\n      L ").concat(a?t+n:t-n," ").concat(e," Z\n    ")}var o="bottom"===r;return e+=o?1.5*n:-1.5*n,"\n    M ".concat(t-n," ").concat(e,"\n    L ").concat(t+n," ").concat(e,"\n    L ").concat(t," ").concat(o?e+n:e-n," Z\n  ")}(p,g,o.width,f),x:p,y:g,stroke:o.triangle.stroke,fill:o.triangle.fill,strokeWidth:o.triangle.strokeWidth||0,opacity:o.triangle.opacity};r.push(d,v,y)}},c=0,u=a.length;c<u;c++)s(c)}function $s(t){if(void 0===t)return 0;if("number"==typeof t&&isFinite(t))return t;if("string"==typeof t)switch(t){case"center":case"middle":return.5;case"bottom":case"right":return 1;case"top":case"left":default:return 0}return 0}function Xs(t){var e={value:t.value};return t.label&&(e.label=t.label.text),e}function Gs(t){return void 0!==t.value}var Ks={require:["chart","renderer"],defaultSettings:{layout:{displayOrder:0},style:{oob:{show:!0,width:10,fill:"#1A1A1A",stroke:"transparent",strokeWidth:0,opacity:1,text:{fontFamily:"Arial",stroke:"transparent",fill:"#fff",strokeWidth:0,opacity:1},triangle:{fill:"#4D4D4D",stroke:"transparent",strokeWidth:0,opacity:1},padding:{x:28,y:5}},line:{stroke:"#000"},label:{strokeWidth:0}}},preferredSize:function(){return 30},beforeRender:function(){this.blueprint=Hs(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this,e=this.settings;if(this.lines={x:[],y:[]},this.lines.x=e.lines&&e.lines.x||[],this.lines.y=e.lines&&e.lines.y||[],0===this.lines.x.length&&0===this.lines.y.length)return[];var n={x0:[],x1:[],y0:[],y1:[]};this.lines.x=this.lines.x.filter(Gs).map((function(e){if("function"==typeof e.value&&(e.value=e.value()),e.scale){var n=t.chart.scale(e.scale);return x(e,{scale:n,position:n(e.value)})}return x(e,{position:e.value})})),this.lines.y=this.lines.y.filter(Gs).map((function(e){if("function"==typeof e.value&&(e.value=e.value()),e.scale){var n=t.chart.scale(e.scale);return x(e,{scale:n,position:n(e.value),flipXY:!0})}return x(e,{position:e.value,flipXY:!0})})),this.lines.x=this.lines.x.filter((function(t){return!(t.position<0||1<t.position)||(n["x".concat(1<t.position?1:0)].push(Xs(t)),!1)})),this.lines.y=this.lines.y.filter((function(t){return!(t.position<0||1<t.position)||(n["y".concat(1<t.position?1:0)].push(Xs(t)),!1)}));var i=[];return[].concat(I(this.lines.x),I(this.lines.y)).forEach((function(n){!0!==n.show&&void 0!==n.show||function(t){var e,n=t.chart,i=t.blueprint,r=t.renderer,a=t.p,o=t.settings,s=t.items,c=!0,u=!1,l=!1,h=!1,f=x(!0,{},o.style.line,a.line||{});if(e=i.processItem({type:"line",x1:a.position,y1:0,x2:a.position,y2:1,stroke:f.stroke||"black",strokeWidth:f.strokeWidth||1,strokeDasharray:f.strokeDasharray,flipXY:a.flipXY||!1}),a.label){var d,p=x(!0,{fill:"#000",fontFamily:"Arial",fontSize:"12px",opacity:1,maxWidth:1,maxWidthPx:9999,padding:5,background:{fill:"#fff",stroke:"transparent",strokeWidth:0,opacity:.5}},o.style.label||{},{fill:f.stroke},a.label),g={width:0,height:0},v="";if("string"==typeof a.formatter)d=n.formatter(a.formatter);else if("object"===w(a.formatter))d=n.formatter(a.formatter);else if(void 0!==a.scale&&a.scale.data){var y=a.scale.data()&&a.scale.data().fields;d=y&&y[0]?y[0].formatter():null}!1!==a.label.showValue&&(d?v=" (".concat(d(a.value),")"):a.scale&&(v=" (".concat(a.value,")"))),v&&(g=r.measureText({text:v,fontFamily:p.fontFamily,fontSize:p.fontSize}));var m=r.measureText({text:p.text||"",fontFamily:p.fontFamily,fontSize:p.fontSize}),b=m.width+g.width,_=Math.max(m.height,g.height),k=p.padding,M=$s(a.flipXY?p.vAlign:p.align),S=$s(a.flipXY?p.align:p.vAlign),R=Math.min(1+b+2*k,p.maxWidth*i.width,p.maxWidthPx),T=_+2*k,A=a.flipXY?T:R,E=a.flipXY?R:T;if((u=i.processItem({fn:function(t){var e=t.width,n=t.height,r=a.position*e-(a.flipXY?T:R)*(1-M);return{type:"rect",x:r=a.flipXY?r:Math.max(r,0),y:Math.max(Math.abs(S*n-E*S),0),width:a.flipXY?A:Math.min(A,i.width-r),height:E,stroke:p.background.stroke,strokeWidth:p.background.strokeWidth,fill:p.background.fill,opacity:p.background.opacity}},flipXY:a.flipXY||!1})).x<-1||u.x+u.width>i.width+1||u.y<-1||u.y+u.height>i.height+1)u=void 0;else{l={type:"text",text:p.text||"",fill:p.fill,opacity:p.opacity,fontFamily:p.fontFamily,fontSize:p.fontSize,x:u.x+k,y:u.y+u.height/2+_/3,maxWidth:u.width-2*k-g.width,anchor:"start"},v&&(h={type:"text",text:v||"",fill:p.fill,opacity:p.opacity,fontFamily:p.fontFamily,fontSize:p.fontSize,x:l.x+3+(u.width-(g.width+2*k)),y:l.y});for(var N=0,C=s.length;N<C;N++){var z=s[N];"rect"===z.type?Io(u,z)&&(c=!1):"line"===z.type&&a.flipXY===z.flipXY&&Lo(u,z)&&(c=!1)}}}s.push(e),c&&u&&l&&(s.push(u,l),h&&s.push(h))}({chart:t.chart,blueprint:t.blueprint,renderer:t.renderer,p:n,settings:e,items:i})})),e.style.oob.show&&Us({blueprint:this.blueprint,oob:n,settings:e,items:i}),i}};function Zs(t){var e={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===t.align||"bottom"===t.align?(e.x1=t.innerRect.x-t.outerRect.x,e.x2=t.innerRect.width+t.innerRect.x,e.y1=e.y2="top"===t.align?t.innerRect.height-t.padding:t.padding):(e.x1=e.x2="left"===t.align?t.innerRect.width-t.padding:t.padding,e.y1=t.innerRect.y-t.outerRect.y,e.y2=t.innerRect.height+t.innerRect.y),function(t,e){x(t,e.style);var n=t.strokeWidth/2;"top"===e.align?(t.y1-=n,t.y2-=n):"bottom"===e.align?(t.y1+=n,t.y2+=n):"left"===e.align?(t.x1-=n,t.x2-=n):"right"===e.align&&(t.x1+=n,t.x2+=n)}(e,t),e}function Js(t,e,n){var i,r,a,o,s,c,u,l,h,f,d,p,g;n.layered||!n.stepSize?(g=e).collider={type:"polygon",vertices:[{x:g.boundingRect.x,y:g.boundingRect.y},{x:g.boundingRect.x+g.boundingRect.width,y:g.boundingRect.y},{x:g.boundingRect.x+g.boundingRect.width,y:g.boundingRect.y+g.boundingRect.height},{x:g.boundingRect.x,y:g.boundingRect.y+g.boundingRect.height}]}:n.tilted?(i=e,a=(r=n).angle*(Math.PI/180),o=Math.max(r.stepSize/2,i.boundingRect.height/2),s="start"===i.anchor,c="end"===i.anchor&&a<0,u="start"===i.anchor&&0<=a,l=i.boundingRect.y+(u||c?i.boundingRect.height:0),h=[{x:i.x-o,y:l},{x:i.x+o,y:l}].map((function(t){return ho(t,a,{x:i.x,y:i.y})})),f={x:s?i.boundingRect.x+i.boundingRect.width+10:i.boundingRect.x-10,y:i.boundingRect.y+i.boundingRect.height},d={x:s?i.boundingRect.x+i.boundingRect.width+10:i.boundingRect.x-10,y:i.boundingRect.y},p=0<=a?[f,d]:[d,f],h.push.apply(h,p),i.collider={type:"polygon",vertices:h}):function(t,e,n){if("bottom"===n.align||"top"===n.align){var i=t.position*n.innerRect.width+(n.innerRect.x-n.outerRect.x-n.stepSize/2);e.collider={type:"rect",x:i,y:0,width:i<0?n.stepSize+i:n.stepSize,height:n.innerRect.height}}else{var r=t.position*n.innerRect.height+(n.innerRect.y-n.outerRect.y-n.stepSize/2);e.collider={type:"rect",x:0,y:r,width:n.innerRect.width,height:r<0?n.stepSize+r:n.stepSize}}var a=e.collider;a.x=Math.max(a.x,0),a.y=Math.max(a.y,0);var o=a.x+a.width-(n.outerRect.x+n.outerRect.width);a.width=0<o?a.width-o:a.width;var s=a.y+a.height-(n.outerRect.y+n.outerRect.height);a.height=0<s?a.height-s:a.height}(t,e,n)}function Qs(t,e){var n=isNaN(t.style.align)?.5:Math.min(Math.max(t.style.align,0),1),i=0;if(t.tilted)i=t.stepSize*n;else{var r=e?t.textRect.height:t.textRect.width;i=Math.max(0,t.stepSize-r)*n}return i}function tc(t,e){var n,i,r,a,o,s,c,u={type:"text",text:"string"==typeof(n=t.label)||"number"==typeof n?n:"-",x:0,y:0,maxWidth:e.maxWidth,maxHeight:e.maxHeight};return"top"===e.align||"bottom"===e.align?(u.x=t.start*e.innerRect.width+(e.innerRect.x-e.outerRect.x)+Qs(e,!1),u.y="top"===e.align?e.innerRect.height:0,u.anchor=e.stepSize?"start":"middle",u.x+=isNaN(e.style.offset)?0:+e.style.offset):(u.y=t.start*e.innerRect.height+(e.innerRect.y-e.outerRect.y)+Qs(e,!0),u.x="left"===e.align?e.innerRect.width:0,u.anchor="left"===e.align?"end":"start",u.baseline=e.stepSize?"text-before-edge":"central",u.y+=isNaN(e.style.offset)?0:+e.style.offset),i=u,r=e,["fill","fontSize","fontFamily"].forEach((function(t){i[t]=r.style[t]})),function(t,e){if(!e.tilted&&!e.stepSize)if("top"===e.align||"bottom"===e.align){var n=e.outerRect.width,i=Math.min(e.maxWidth/2,e.textRect.width/2),r=t.x-i,a=t.x+i;r<0?(t.anchor="start",t.x=e.innerRect.x-e.outerRect.x):n<a&&(t.anchor="end",t.x=e.innerRect.width+e.innerRect.x)}else{var o=e.outerRect.height,s=e.maxHeight/2,c=t.y-s,u=t.y+s;c<0?(t.y=e.innerRect.y-e.outerRect.y,t.baseline="text-before-edge"):o<u&&(t.y=e.innerRect.height+(e.innerRect.y-e.outerRect.y),t.baseline="text-after-edge")}}(u,e),a=u,"top"===(o=e).align?a.y-=o.padding:"bottom"===o.align?a.y+=o.padding+o.maxHeight:"left"===o.align?a.x-=o.padding:"right"===o.align&&(a.x+=o.padding),function(t,e){if(e.tilted){var n=-e.angle,i=n*(Math.PI/180);"bottom"===e.align?(t.x-=e.maxHeight*Math.sin(i)/2,t.y-=e.maxHeight,t.y+=e.maxHeight*Math.cos(i)/2):t.x-=e.maxHeight*Math.sin(i)/3,t.transform="rotate(".concat(n,", ").concat(t.x,", ").concat(t.y,")"),t.anchor="bottom"===e.align==e.angle<0?"start":"end";var r=Math.cos(i)*e.maxWidth;if("bottom"===e.align==e.angle<0){var a=e.outerRect.width-e.paddingEnd;a<t.x+r&&(t.maxWidth=(a-t.x-10)/Math.cos(i))}else{var o=e.paddingEnd;t.x-r<o&&(t.maxWidth=(t.x-o-10)/Math.cos(i))}}}(u,e),c=e,(s=u).boundingRect=c.textBounds(s),Js(t,u,e),u}function ec(t,e){var n,i,r,a,o,s={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===e.align||"bottom"===e.align?(s.x1=s.x2=t.position*e.innerRect.width+(e.innerRect.x-e.outerRect.x),s.y1="top"===e.align?e.innerRect.height:0,s.y2="top"===e.align?s.y1-e.tickSize:s.y1+e.tickSize):(s.y1=s.y2=t.position*e.innerRect.height+(e.innerRect.y-e.outerRect.y),s.x1="left"===e.align?e.innerRect.width:0,s.x2="left"===e.align?s.x1-e.tickSize:s.x1+e.tickSize),x(s,e.style),n=s,"top"===(i=e).align?(n.y1-=i.padding,n.y2-=i.padding):"bottom"===i.align?(n.y1+=i.padding,n.y2+=i.padding):"left"===i.align?(n.x1-=i.padding,n.x2-=i.padding):"right"===i.align&&(n.x1+=i.padding,n.x2+=i.padding),a=e,o=(r=s).strokeWidth/2,r.x1===a.innerRect.width?(r.x1-=o,r.x2-=o):0===r.x1?(r.x1+=o,r.x2+=o):r.y1===a.innerRect.height?(r.y1-=o,r.y2-=o):0===r.y1&&(r.y1+=o,r.y2+=o),s}function nc(t){return!t.isMinor&&0<=t.position&&t.position<=1}function ic(t){var e,n,i,r,a,o=t.rect,s=t.state,c=t.majorTicks,u=t.measure;return t.horizontal?function(t){for(var e=t.majorTicks,n=t.measureText,i=t.rect,r="layered"===t.state.labels.activeMode?2:1,a=i.width,o=e.map((function(t){return t.label})).map((function(t){return"".concat(t.slice(0,1)).concat(1<t.length?"…":"")})).map(n).map((function(t){return t.width})),s=0;s<e.length;++s){var c=e[s];if(r*a*Math.abs(c.start-c.end)<o[s])return!0}return!1}({majorTicks:c,measureText:u,rect:o,state:s}):(n=(e={majorTicks:c,measureText:u,rect:o,state:s}).majorTicks,i=e.measureText,r=e.rect.height,a=i("M").height,!(n.length<2)&&r*Math.abs(n[0].position-n[1].position)<a)}function rc(t){var e=t.value,n=t.maxValue,i=t.minValue,r=t.range,a=t.modifier;return isNaN(r)||isNaN(a)||(e=r*a),n<e&&(e=n),e<i&&(e=i),e}function ac(t){var e=t.isDiscrete,n=t.rect,i=t.formatter,r=t.measureText,a=t.scale,o=t.settings,s=t.state,c=0,u={left:0,top:0,right:0,bottom:0},l=o.labels,h=l.maxLengthPx,f=l.minLengthPx;if(o.labels.show){var d,p,g=o.align,v="top"===g||"bottom"===g,y=v?n.width:n.height,m=a.ticks({settings:o,distance:y,formatter:i}).filter(nc),x=function(t){var e=r({text:t,fontSize:o.labels.fontSize,fontFamily:o.labels.fontFamily});return e.width=rc({value:e.width,maxValue:h,minValue:f}),e};if(e&&v&&"auto"===o.labels.mode&&(function(t){var e=t.majorTicks,n=t.measure,i=t.rect,r=t.state,a=t.settings,o=a.labels.maxGlyphCount,s="layered"===r.labels.activeMode?2:1,c=a.labels.tiltThreshold?a.labels.tiltThreshold:.7,u=n("…").width,l=i.width;if(isNaN(o))for(var h=0;h<e.length;h++){var f=e[h],d=f.label,p=n(d).width*(1<d.length?c:1);if(s*l*Math.abs(f.start-f.end)<p+u)return 1}else if(s*l*e.reduce((function(t,e){return Math.min(Math.abs(e.start-e.end),t)}),1/0)<n("M").width*c*o+u)return 1}({majorTicks:m,measure:x,rect:n,state:s,settings:o})?s.labels.activeMode="tilted":s.labels.activeMode="horizontal"),!o.labels.filterOverlapping&&"tilted"!==s.labels.activeMode&&ic({rect:n,state:s,majorTicks:m,measure:x,horizontal:v}))return{size:Math.max(n.width,n.height),isToLarge:!0};if("tilted"===s.labels.activeMode){var b=Math.abs(o.labels.tiltAngle)*(Math.PI/180);d=function(t){return rc({value:t.width,maxValue:h,minValue:f})*Math.sin(b)+t.height*Math.cos(b)}}else d=v?function(t){return t.height}:function(t){return rc({value:t.width,maxValue:h,minValue:f})};if(v&&"tilted"!==s.labels.activeMode)p=["M"];else if(isNaN(o.labels.maxGlyphCount))p=m.map((function(t){return t.label}));else{for(var w="",_=0;_<o.labels.maxGlyphCount;_++)w+="M";p=[w]}var k=p.map(x),M=k.map(d),S=Math.max.apply(Math,I(M).concat([0]));if(c+=S,c+=o.labels.margin,"layered"===s.labels.activeMode&&(c*=2),"tilted"===s.labels.activeMode){var R="bottom"===o.align==0<=o.labels.tiltAngle,T=Math.abs(o.labels.tiltAngle)*(Math.PI/180),A=(S-r("M").height*Math.cos(T))/Math.sin(T),E=Math.min(o.labels.maxEdgeBleed,Math.max.apply(Math,I(k.map((function(t){return Math.min(A,t.width)*Math.cos(T)+t.height})).map((function(t,e){var i=m[e]?m[e].position:0;return R?t-i*n.width:t-(1-i)*n.width}))).concat([0])))+o.paddingEnd;if(u[R?"left":"right"]=E,!o.labels.filterOverlapping&&function(t){var e=t.majorTicks,n=t.measureText,i=t.rect,r=t.bleedSize,a=t.angle;if(!(e.length<2)){if(0===a)return 1;var o=Math.abs(a),s=(i.width-r)*Math.abs(e[0].position-e[1].position),c=n("M").height,u=1/s;return Math.sin(o*(Math.PI/180))/u<c}}({majorTicks:m,measureText:r,rect:n,bleedSize:E,angle:o.labels.tiltAngle}))return{size:Math.max(n.width,n.height),isToLarge:!0}}}return{size:c,edgeBleed:u}}var oc=2,sc=function(t,e,n){return t.width*Math.abs(e.position-n.position)},cc=function(t){var e=t.innerRect,n=t.outerRect,i=t.tick,r=t.nextWidth,a=e.x-n.x,o=e.width*i.position+a,s=2*Math.min(r,o),c=0===i.position?e.width/2-oc:0;return Math.max(r,s,c)},uc=function(t){var e=t.innerRect,n=t.outerRect,i=t.tick,r=t.prevWidth,a=e.x-n.x,o=n.width-e.width-a,s=e.width-e.width*i.position+o,c=2*Math.min(r,s),u=1===i.position?e.width/2-oc:0;return Math.max(r,c,u)};function lc(t){var e=0;return e+=t.paddingStart,e+=t.line.show?t.line.strokeWidth:0,e+(t.ticks.show?t.ticks.margin:0)}function hc(t){var e=0;return e+=t.ticks.show?t.ticks.tickSize:0,e+(lc(t)+t.labels.margin)}function fc(t,e){return t.map((function(t){return ec(t,e)}))}function dc(t,e){return e?Math.abs(e.end-e.start):t.bandwidth()}function pc(t){var e=t.textMetrics,n=t.settings,i=t.innerRect,r=t.scale,a=t.tilted,o=t.layered,s=t.tick,c=e.height,u=dc(r,s),l={width:0,height:c};if("left"===n.align||"right"===n.align)l.width=i.width-hc(n)-n.paddingEnd;else if(o)l.width=u*i.width*2;else if(a){var h=Math.abs(n.labels.tiltAngle)*(Math.PI/180);l.width=(i.height-hc(n)-n.paddingEnd-c*Math.cos(h))/Math.sin(h)}else l.width=u*i.width;return l.width=rc({value:l.width,maxValue:n.labels.maxLengthPx,minValue:n.labels.minLengthPx}),l}function gc(t){var e,n,i,r,a,o,s,c,u,l,h,f,d=t.textMetrics,p=t.settings,g=t.innerRect,v=t.outerRect,y=t.tilted,m=t.layered,x=t.tick,b=t.index,w=t.major,_=d.height,k={width:0,height:_};if("left"===p.align||"right"===p.align)k.width=g.width-hc(p)-p.paddingEnd;else if(y){var M=Math.abs(p.labels.tiltAngle)*(Math.PI/180);k.width=(g.height-hc(p)-p.paddingEnd-_*Math.cos(M))/Math.sin(M)}else k.width=(n=(e={layered:m,major:w,innerRect:g,outerRect:v,tick:x,index:b}).layered,i=e.major,r=e.innerRect,a=e.outerRect,o=e.tick,s=e.index,u=i[s-(c=n?2:1)],l=i[s+c],h=u?sc(r,o,u)/2-oc:1/0,f=l?sc(r,o,l)/2-oc:1/0,i.length<2?r.width:u?l?2*Math.min(h,f):uc({innerRect:r,outerRect:a,tick:o,prevWidth:h}):cc({innerRect:r,outerRect:a,tick:o,nextWidth:f}));return k.width=rc({value:k.width,maxValue:p.labels.maxLengthPx,minValue:p.labels.minLengthPx}),k}function vc(t){var e;function n(){return e=gc,n}function i(){return e=pc,i}function r(t){var n,i,r,a,o,s,c,u,l,h,f=t.settings,d=t.scale,p=t.innerRect,g=t.outerRect,v=t.measureText,y=t.ticks,m=t.state,x=t.textBounds,b=[],w=y.filter((function(t){return!t.isMinor})),_=y.filter((function(t){return t.isMinor})),k={innerRect:p,align:f.align,outerRect:g},M="tilted"===m.labels.activeMode,S="layered"===m.labels.activeMode;if(f.line.show&&(k.style=f.line,k.padding=f.paddingStart,b.push(Zs(k))),f.ticks.show&&(k.style=f.ticks,k.tickSize=f.ticks.tickSize,k.padding=lc(f),n=fc(w,k)),f.labels.show){var R=hc(f);k.style=f.labels,k.padding=R,k.tilted=M,k.layered=S,k.angle=f.labels.tiltAngle,k.paddingEnd=f.paddingEnd,k.textBounds=x;var T=function(t,n){var i,r;k.textRect=(i={tick:t,measureText:v,style:k.style},r=i.style,(0,i.measureText)({text:i.tick.label,fontSize:r.fontSize,fontFamily:r.fontFamily}));var a,o,s,c,u,l=e({textMetrics:k.textRect,settings:f,innerRect:p,outerRect:g,scale:d,tilted:M,layered:S,tick:t,major:w,index:n});k.maxWidth=l.width,k.maxHeight=l.height,k.stepSize=(o=(a={innerRect:p,scale:d,ticks:y,settings:f,tick:t}).innerRect,s=a.scale,c=a.settings,u=a.tick,("top"===c.align||"bottom"===c.align?o.width:o.height)*dc(s,u))},A=[];A=!S||"top"!==f.align&&"bottom"!==f.align?(i=k,r=T,w.map((function(t,e){r(t,e);var n=tc(t,i);return n.data=t.data,n}))):(a=w,s=f,c=T,u=(o=k).padding,l=hc(s),a.map((function(t,e){c(t,e);var n=l+o.maxHeight+s.labels.margin;o.layer=e%2,o.padding=e%2==0?u:n;var i=tc(t,o);return i.data=t.data,i}))),f.labels.filterOverlapping&&function(t,e,n){var i=function(e,n){return Io(Z(1,t[e].boundingRect),Z(1,t[n].boundingRect))};if(n&&n.tilted){var r=Math.abs(n.angle);i=function(e,n){var i=1/Math.abs(t[e].x-t[n].x),a=Math.sin(r*(Math.PI/180))/i;return t[e].boundingRect.height>a}}for(var a=0;a<=t.length-1;a++)for(var o=a+1;o<=Math.min(a+5,a+(t.length-1));o++)t[a]&&t[o]&&i(a,o)&&(o===t.length-1?(t.splice(a,1),e&&e.splice(a,1)):(t.splice(o,1),e&&e.splice(o,1)),o--,a--)}(A,n,k),b.push.apply(b,I(A))}return f.minorTicks&&f.minorTicks.show&&0<_.length&&(k.style=f.minorTicks,k.tickSize=f.minorTicks.tickSize,k.padding=(h=f).line.strokeWidth+h.minorTicks.margin,b.push.apply(b,I(fc(_,k)))),n&&b.push.apply(b,I(n)),b}return i.build=n.build=r,(t?i:n)()}var yc={labels:{show:!0,tiltAngle:40,tiltThreshold:.7,maxEdgeBleed:1/0,margin:4,maxLengthPx:150,minLengthPx:0,mode:"auto",maxGlyphCount:NaN,align:.5,offset:0,filterOverlapping:!1},ticks:{show:!1,margin:0,tickSize:4},line:{show:!1},paddingStart:0,paddingEnd:10,align:"auto"},mc={labels:{show:!0,margin:4,maxLengthPx:150,minLengthPx:0,align:.5,offset:0,filterOverlapping:!0},ticks:{show:!0,margin:0,tickSize:8},minorTicks:{show:!1,tickSize:3,margin:0},line:{show:!0},paddingStart:0,paddingEnd:10,align:"auto"};var xc={require:["chart","renderer","dockConfig"],defaultSettings:{layout:{displayOrder:0,prioOrder:0},settings:{},style:{labels:"$label",ticks:"$guide-line",minorTicks:"$guide-line--minor",line:"$guide-line"}},created:function(){this.state={isDiscrete:!!this.scale.bandwidth,isHorizontal:!1,labels:{activeMode:"horizontal"},ticks:[],innerRect:{width:0,height:0,x:0,y:0},outerRect:{width:0,height:0,x:0,y:0},defaultDock:void 0,concreteNodeBuilder:void 0,settings:void 0},this.state.isDiscrete?this.state.defaultDock="bottom":this.state.defaultDock="left",this.setState(this.settings)},setState:function(){var t,e,n,i;this.state.isDiscrete=!!this.scale.bandwidth,this.state.settings=function(t){var e,n,i,r,a=t.state,o=t.style,s=t.settings,c=x(!0,{},a.isDiscrete?yc:mc,o),u=x(!0,{},c,s.settings),l=s.layout.dock||a.defaultDock;u.dock=l,u.align=(e=s.settings.align,n=l,r=["left","right"],-1!==(i=["top","bottom"]).indexOf(e)&&-1===r.indexOf(n)||-1!==r.indexOf(e)&&-1===i.indexOf(n)?e:n),u.labels.tiltAngle=Math.max(-90,Math.min(u.labels.tiltAngle,90));var h=u.paddingStart,f=u.paddingEnd;return u.paddingStart="function"==typeof h?h.call(null):h,u.paddingEnd="function"==typeof f?f.call(null):f,u}(this),this.state.concreteNodeBuilder=vc(this.state.isDiscrete),this.dockConfig.dock(this.state.settings.dock),this.state.isHorizontal="top"===this.state.settings.align||"bottom"===this.state.settings.align,this.state.labels.activeMode=(t=this.state,e=this.state.settings,n=this.state.isDiscrete,i=e.labels.mode,n&&t.isHorizontal?"auto"===i?t.labels.activeMode:-1!==["layered","tilted"].indexOf(e.labels.mode)&&-1!==["top","bottom"].indexOf(e.dock)?i:"horizontal":"horizontal")},preferredSize:function(t){var e=this.formatter,n=this.state,i=this.scale,r=this.state.isHorizontal?t.inner.width:t.inner.height;return this.state.pxScale=Va(i,r),function(t){var e=t.isDiscrete,n=t.rect,i=t.formatter,r=t.measureText,a=t.scale,o=t.settings,s=0,c=ac({isDiscrete:e,rect:n,formatter:i,measureText:r,scale:a,settings:o,state:t.state}),u=c.size,l=c.edgeBleed;if(s+=u,c.isToLarge)return{size:s};if(o.ticks.show&&(s+=o.ticks.margin,s+=o.ticks.tickSize),o.minorTicks&&o.minorTicks.show){var h=o.minorTicks.margin+o.minorTicks.tickSize;s<h&&(s=h)}return o.line.show&&(s+=o.line.strokeWidth),s+=o.paddingStart,{size:s+=o.paddingEnd,edgeBleed:l}}({isDiscrete:this.state.isDiscrete,rect:t.inner,formatter:e,measureText:this.renderer.measureText,scale:this.state.pxScale,settings:this.state.settings,state:n})},beforeUpdate:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).settings;this.setState(e)},resize:function(t){var e,n,i,r=t.inner,a=t.outer,o=x({},r,(e={align:this.state.settings.align,inner:r},n=e.align,i=e.inner,"left"===n?{x:i.width+i.x}:"right"===n||"bottom"===n?i:{y:i.y+i.height})),s=a||o;return x(this.state.innerRect,o),x(this.state.outerRect,s),a},beforeRender:function(){var t=this.scale,e=this.formatter,n=this.state.isHorizontal?this.state.innerRect.width:this.state.innerRect.height;this.state.pxScale=Va(t,n),this.state.ticks=this.state.pxScale.ticks({distance:n,formatter:e}).filter((function(t){return 0<=t.position&&t.position<=1}))},render:function(){var t=this.state,e=[];return e.push.apply(e,I(this.state.concreteNodeBuilder.build({settings:this.state.settings,scale:this.state.pxScale,innerRect:this.state.innerRect,outerRect:this.state.outerRect,measureText:this.renderer.measureText,textBounds:this.renderer.textBounds,ticks:this.state.ticks,state:t}))),Ls.multiple(e),e}};function bc(t,e,n){var i="";"function"==typeof t?i=t():"string"==typeof t?i=t:n&&(i=(n.data().fields||[]).map((function(t){return t.title()})).join(e));return i}var wc={require:["renderer","chart"],defaultSettings:{layout:{dock:"bottom",displayOrder:0,prioOrder:0},settings:{paddingStart:5,paddingEnd:5,paddingLeft:0,paddingRight:0,anchor:"center",join:", ",maxLengthPx:NaN},style:{text:"$title"}},created:function(){this.definitionSettings=this.settings.settings;var t=this.settings.text,e=this.definitionSettings.join;this.title=bc(t,e,this.scale)},preferredSize:function(){return this.renderer.measureText({text:this.title,fontSize:this.style.text.fontSize,fontFamily:this.style.text.fontFamily}).height+this.definitionSettings.paddingStart+this.definitionSettings.paddingEnd},render:function(){var t=this.title,e=this.definitionSettings,n=this.rect,i=[];return i.push(function(t){var e,n,i,r=t.title,a=t.definitionSettings,o=t.dock,s=t.rect,c=t.measureText,u=t.style,l={type:"text",text:r,x:0,y:0,dx:0,dy:0,anchor:(e=o,n=a.anchor,i="middle","left"===e?"top"===n?i="end":"bottom"===n&&(i="start"):"right"===e?"top"===n?i="start":"bottom"===n&&(i="end"):"left"===n?i="start":"right"===n&&(i="end"),i),baseline:"alphabetical"};x(l,u.text);var h=c(l);if("top"===o||"bottom"===o){var f=s.width/2;"left"===a.anchor?f=a.paddingLeft||0:"right"===a.anchor&&(f=s.width-(a.paddingRight||0)),l.x=f,l.y="top"===o?s.height-a.paddingStart:a.paddingStart+h.height,l.dy="top"===o?-h.height/6:-h.height/3,l.maxWidth=.8*s.width}else{var d=s.height/2;"top"===a.anchor?d=a.paddingStart:"bottom"===a.anchor&&(d=s.height-a.paddingStart),l.y=d,l.x="left"===o?s.width-a.paddingStart:a.paddingStart,l.dx="left"===o?-h.height/3:h.height/3;var p="left"===o?270:90;l.transform="rotate(".concat(p,", ").concat(l.x+l.dx,", ").concat(l.y+l.dy,")"),l.maxWidth=.8*s.height}return isNaN(a.maxLengthPx)||(l.maxWidth=Math.min(l.maxWidth,a.maxLengthPx)),l}({title:t,dock:this.settings.layout.dock,definitionSettings:e,rect:n,measureText:this.renderer.measureText,style:this.style})),i},beforeUpdate:function(t){t.settings&&(x(this.settings,t.settings),this.definitionSettings=t.settings.settings);var e=this.settings.text,n=this.definitionSettings.join;this.title=bc(e,n,this.scale)}};function _c(t,e){var n,i=t.settings.layout.dock,r=t.settings.settings.invert,a="top"===i||"bottom"===i,o=a?"width":"height",s=t.rect[o],c=t.chart.scroll(t.settings.scroll),u=e[a?"x":"y"];r&&(u=s-u);var l=c.getState();n={startOffset:u,startScroll:l.start,swipe:!1};var h=u/s*(l.max-l.min)+l.min;h<l.start?n.startScroll=h:h>l.start+l.viewSize&&(n.startScroll=h-l.viewSize);return{update:function(t){var e=t[a?"x":"y"];if(r&&(e=s-e),!n.swipe){if(Math.abs(n.startOffset-e)<=1)return;n.swipe=!0}var i=c.getState(),o=(e-n.startOffset)/s*(i.max-i.min),u=n.startScroll+o;c.moveTo(u)},end:function(t){var e=t[a?"x":"y"];r&&(e=s-e);var i=c.getState();if(n.swipe){var o=(e-n.startOffset)/s*(i.max-i.min),u=n.startScroll+o;c.moveTo(u)}else{var l=e/s*(i.max-i.min)+i.min-i.viewSize/2;c.moveTo(l)}}}}function kc(t,e){var n=e.element().getBoundingClientRect();return{x:t.center.x-n.left,y:t.center.y-n.top}}var Mc={require:["chart","renderer"],on:{panStart:function(t){var e=kc(t,this.renderer),n={x:e.x-t.deltaX,y:e.y-t.deltaY};this.currentMove=_c(this,n),this.currentMove.update(e)},panMove:function(t){if(this.currentMove){var e=kc(t,this.renderer);this.currentMove.update(e)}},panEnd:function(t){if(this.currentMove){var e=kc(t,this.renderer);this.currentMove.end(e),this.currentMove=null}},panCancel:function(){this.currentMove=null},tap:function(t){var e=kc(t,this.renderer);_c(this,e).end(e)}},defaultSettings:{settings:{backgroundColor:"#eee",thumbColor:"#ccc",width:16}},preferredSize:function(t){var e=this.chart.scroll(this.settings.scroll).getState();return e.viewSize>=e.max-e.min?Math.max(t.width,t.height):this.settings.settings.width},render:function(t){var e,n=this.settings.layout.dock,i=this.settings.settings.invert,r="top"===n||"bottom"===n,a=r?"width":"height",o=this.rect[a],s=this.chart.scroll(this.settings.scroll).getState(),c=o*(s.start-s.min)/(s.max-s.min),u=o*s.viewSize/(s.max-s.min);return i&&(c=o-c-u),t("div",{style:{position:"relative",width:"100%",height:"100%",background:this.settings.settings.backgroundColor,pointerEvents:"auto"}},[].concat(t("div",{class:"scroller",style:(S(e={position:"absolute"},r?"left":"top","".concat(c,"px")),S(e,r?"top":"left","25%"),S(e,r?"height":"width","50%"),S(e,a,"".concat(Math.max(1,u),"px")),S(e,"background",this.settings.settings.thumbColor),e)})))},renderer:"dom"};var Sc=5,Rc=0;function Tc(t){var e=t.h,n=t.isVertical,i=t.value,r=t.pos,a=t.align,o=t.borderHit,s=t.state,c=t.idx,u="end"!==a,l=u?{left:"0",top:"0"}:{right:"0",bottom:"0"},h=0,f="100%",d="100%";return s.targetRect&&"start"===s.settings.bubbles.align?(f="".concat(s.targetRect.x+s.targetRect.width,"px"),d="".concat(s.targetRect.y+s.targetRect.height,"px")):s.targetRect&&"end"===s.settings.bubbles.align&&(h=n?s.targetRect.x:s.targetRect.y,f="".concat(s.rect.width-h,"px"),d="".concat(s.rect.height-h,"px")),u||(r-=o),e("div",{onmouseover:function(t){t.srcElement.children[0].style.backgroundColor="#000",t.srcElement.children[0].style[n?"height":"width"]="2px"},onmouseout:function(t){t.srcElement.children[0].style.backgroundColor=s.style.line.stroke,t.srcElement.children[0].style[n?"height":"width"]="1px"},"data-value":i,"data-key":[s.key,"edge",c].join("-"),style:{cursor:n?"ns-resize":"ew-resize",position:"absolute",left:"".concat(n?h:r,"px"),top:"".concat(n?r:h,"px"),height:n?"".concat(o,"px"):d,width:n?f:"".concat(o,"px"),pointerEvents:"auto"}},[e("div",{style:x({backgroundColor:s.style.line.stroke,position:"absolute",height:n?"".concat(1,"px"):"100%",width:n?"100%":"".concat(1,"px"),pointerEvents:"none"},l)})])}function Ac(t){var e,n,i=t.h,r=t.isVertical,a=t.label,o=t.otherValue,s=t.rangeIdx,c=t.idx,u=t.pos,l=t.align,h=t.state,f=t.value,d="end"!==l,p="outside"===h.settings.bubbles.placement,g="none";r?(n=d?"left":"right",p&&(g=d?"translate(-100%,  0px)":"translate(100%,  0px)")):(n=d?"top":"bottom",p&&(g=d?"translate(0px, -100%)":"translate(0px,  100%)"));var v=h.edit&&h.edit.rangeIdx===s&&h.edit.bubbleIdx===c,y={position:"relative",borderRadius:"".concat(h.style.bubble.borderRadius,"px"),border:"".concat(h.style.bubble.strokeWidth,"px solid ").concat(h.style.bubble.stroke),backgroundColor:h.style.bubble.fill,color:h.style.bubble.color,fontFamily:h.style.bubble.fontFamily,fontSize:h.style.bubble.fontSize,padding:"4px 8px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px",minWidth:"50px",minHeight:"1em",pointerEvents:"auto",transform:r?"translate(0,-50%)":"translate(-50%,0)",cursor:r?"ns-resize":"ew-resize"},m=h.style.bubble.stroke,x=v?i("input",{type:"text",value:f,style:T(T({},y),{},{textAlign:"start",textOverflow:"",fontSize:"13px"}),onkeyup:function(t){if("Enter"===t.key){t.preventDefault(),t.stopPropagation();var e=parseFloat(t.target.value);isNaN(e)?(m="rgba(230, 78, 78, 0.6)",t.target.style.border="".concat(h.style.bubble.strokeWidth,"px solid ").concat(m)):h.onEditConfirmed(s,e,o)}else"Escape"===t.key&&(t.preventDefault(),t.stopPropagation(),h.onEditCanceled())}}):i("div",{"data-key":[h.key,"bubble",s].join("-"),"data-other-value":o,"data-idx":s,"data-bidx":c,style:y},[a]);return i("div",{style:(S(e={position:"absolute"},n,"0"),S(e,r?"top":"left","".concat(u,"px")),S(e,"transform",g),e)},[x])}function Ec(t){var e=t.borderHit,n=t.els,i=t.isVertical,r=t.state,a=t.vStart,o=t.vEnd,s=t.idx,c=0;r.targetRect&&(c=i?r.targetRect.y:r.targetRect.x);var u,l,h,f,d,p,g,v,y=!!r.scale,m=y?r.scale.norm(a)*r.size:a,b=y?r.scale.norm(o)*r.size:o,w=Math.abs(m-b),_=Math.min(m,b)+c,k=_+w;if(r.targetRect){var M=r.targetFillRect||r.targetRect,S=i?M.height:M.width,R=y?r.scale.norm(a)*S:a,T=y?r.scale.norm(o)*S:o,A=Math.abs(R-T),E=Math.min(R,T),N={h:r.h,isVertical:i,top:E,height:A,color:r.style.target.fill,opacity:r.style.target.opacity};r.style.target.opacity<.8&&(N.on={onmouseover:function(t){t.srcElement.style.opacity=r.style.target.opacity+.1},onmouseout:function(t){t.srcElement.style.opacity=r.style.target.opacity}}),n.push(r.h("div",{style:{position:"absolute",left:"".concat(M.x,"px"),top:"".concat(M.y,"px"),height:"".concat(M.height,"px"),width:"".concat(M.width,"px")}},[(l=(u=N).h,h=u.isVertical,f=u.top,d=u.height,p=u.color,g=u.on,v=u.opacity,l("div",x({style:{backgroundColor:p,opacity:v,position:"absolute",left:h?0:"".concat(f,"px"),top:h?"".concat(f,"px"):0,height:h?"".concat(d,"px"):"100%",width:h?"100%":"".concat(d,"px"),pointerEvents:"auto"}},g),[]))]))}var C=m<b?a:o,z=m<b?o:a,O=D(y?r.scale.domain():[Math.min(a,o),Math.max(a,o)],2),j=O[0],P=O[1],I=j<=C+1e-5&&C-1e-5<=P,q=z-1e-5<=P&&j<=z+1e-5;I&&n.push(Tc({h:r.h,isVertical:i,borderHit:e,value:C,pos:_,align:"start",state:r,idx:s})),q&&n.push(Tc({h:r.h,isVertical:i,borderHit:e,value:z,pos:k,align:"end",state:r,idx:s}));var F=r.settings.bubbles;if(F&&F.show){var L={fontSize:F.fontSize,fontFamily:F.fontFamily,color:F.fill},B=[a,o];I&&n.push(Ac({h:r.h,isVertical:i,align:F.align,style:L,rangeIdx:s,idx:0,otherValue:z,value:C,label:"".concat(r.format(C,B)),pos:_,state:r})),q&&n.push(Ac({h:r.h,isVertical:i,align:F.align,style:L,rangeIdx:s,idx:1,otherValue:C,value:z,label:"".concat(r.format(z,B)),pos:k,state:r}))}}function Nc(t){var e=t.active.limitHigh-t.active.end,n=t.active.limitLow-t.active.start,i=t.current-t.start;return i<0?Math.max(i,n):Math.min(i,e)}function Cc(t){var e=[],n=t.direction===Rc;if(Array.isArray(t.ranges)&&t.ranges.forEach((function(i,r){t.active&&r===t.active.idx||Ec({borderHit:Sc,els:e,isVertical:n,state:t,vStart:Math.min(i.min,i.max),vEnd:Math.max(i.min,i.max),idx:r})})),t.active){var i=t.start,r=t.current;if(-1!==t.active.idx)if("foo"===t.active.mode)i=Math.min(t.active.start,t.active.end),r=Math.max(t.active.start,t.active.end);else if("modify"===t.active.mode)i=Math.min(t.start,t.current),r=Math.max(t.start,t.current);else{var a=Nc(t);i=t.active.start+a,r=t.active.end+a}Ec({borderHit:Sc,els:e,isVertical:n,state:t,vStart:i,vEnd:r,idx:t.active.idx})}return e}function zc(t){return{min:t.scale.min(),max:t.scale.max()}}function Oc(t){return{min:0,max:t.direction?t.rect.width:t.rect.height}}function jc(t,e,n){var i,r,a=t.ranges,o=-1;for(i=0;i<a.length;i++){if(a[i].min<=e&&e<=a[i].max){o=i,n.min=i?a[i-1].max:n.min,n.max=i+1<a.length?a[i+1].min:n.max;break}if(e<a[i].min){n.max=a[i].min,n.min=i?a[i-1].max:n.min;break}}-1===o&&a.length&&i>=a.length&&(n.min=a[a.length-1].max),-1!==o&&(r={idx:o,start:a[o].min,end:a[o].max,limitLow:n.min,limitHigh:n.max,mode:"foo"}),t.active=r}function Pc(t){t.renderer.render(Cc(t))}function Dc(t,e){if(!e||!e.isActive())return[];var n=t.scale.data(),i=(n&&n.fields||[]).map((function(t){return t.id()})),r=e.brushes().filter((function(t){return"range"===t.type&&-1!==i.indexOf(t.id)}))[0];return r?r.brush.ranges():[]}function Ic(t,e){for(var n,i=1/0,r=e.domain(),a=e.bandwidth()/2,o=0;o<r.length;++o){var s=Math.abs(t-a-e(r[o]));s<i&&(i=s,n=r[o])}return n}function qc(t,e){return Math.min.apply(Math,I(t))<=Math.max.apply(Math,I(e))&&Math.max.apply(Math,I(t))>=Math.min.apply(Math,I(e))}function Fc(t){return X(t.reduce((function(t,e){return t.push.apply(t,I($(e.bounds))),t}),[]))}var Lc={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{rangeStart:function(t){this.start(t)},rangeMove:function(t){this.move(t)},rangeEnd:function(t){this.end(t)},rangeClear:function(t){this.clear(t)},bubbleStart:function(t){this.bubbleStart(t)}},created:function(){this.state={key:this.settings.key||"brush-range"}},beforeRender:function(t){this.state.rect=t.size.computedInner},renderRanges:function(){this.state.started||(this.state.ranges=Dc(this.state,this.state.brushInstance),this.state.active=null,Pc(this.state))},render:function(t){var e=this,n=this.settings.settings;this.state.direction="vertical"===n.direction?Rc:1;var i=this.renderer.element().getBoundingClientRect(),r=this.state.rect[this.state.direction===Rc?"height":"width"],a=Va(this.chart.scale(n.scale),r),o=function(t){var e={targetRect:null,targetFillRect:null,scale:null,size:null},n=t.settings.settings,i=n.target&&(n.target.components||(n.target.component?[n.target.component]:[])).map((function(e){return t.chart.component(e)})).filter((function(t){return!!t&&!!t.rect})),r=n.target&&n.target.selector?t.chart.findShapes(n.target.selector):[],a=n.target&&n.target.fillSelector?t.chart.findShapes(n.target.fillSelector):[];if(0<r.length){var o=Fc(r);if(e.size=o[t.state.direction===Rc?"height":"width"],e.scale=Va(t.chart.scale(n.scale),e.size),e.targetRect=o,0<a.length){var s=Fc(a);e.targetFillRect=s}}else if(i&&0<i.length){var c=i.slice(1).reduce((function(t,e){return{x0:Math.min(t.x0,e.rect.computedInner.x),y0:Math.min(t.y0,e.rect.computedInner.y),x1:Math.max(t.x1,e.rect.computedInner.x+e.rect.computedInner.width),y1:Math.max(t.y1,e.rect.computedInner.y+e.rect.computedInner.height)}}),{x0:i[0].rect.computedInner.x,y0:i[0].rect.computedInner.y,x1:i[0].rect.computedInner.x+i[0].rect.computedInner.width,y1:i[0].rect.computedInner.y+i[0].rect.computedInner.height});e.targetRect={x:c.x0-t.state.rect.x,y:c.y0-t.state.rect.y,width:c.x1-c.x0,height:c.y1-c.y0}}return e}(this);if(a=o.scale?o.scale:a,this.state.targetRect=o.targetRect,this.state.targetFillRect=o.targetFillRect,this.state.size=null===o.size?r:o.size,this.state.settings=n,this.state.style=this.style,this.state.offset=i,this.state.brush="object"===w(n.brush)?n.brush.context:n.brush,this.state.brushInstance=this.chart.brush(this.state.brush),this.state.renderer=this.renderer,this.state.multi=!!n.multiple,this.state.h=t,this.state.onEditConfirmed=function(t,n,i){e.state.edit=null,function(t,e,n,i){var r=t.ranges.map((function(t){return{min:t.min,max:t.max}})),a=t.scale.min(),o=t.scale.max();r[e]={min:Math.max(a,Math.min(n,i)),max:Math.min(o,Math.max(n,i))},t.ranges[e]=T({},r[e]);var s=t.scale.data();s&&s.fields&&s.fields.forEach((function(e){t.fauxBrushInstance||t.brushInstance.setRange(e.id(),r)}))}(e.state,t,n,i),e.emit("bubbleEnd"),Pc(e.state)},this.state.onEditCanceled=function(){e.state.edit=null,Pc(e.state)},this.state.cssCoord={offset:this.state.direction===Rc?"top":"left",coord:this.state.direction===Rc?"y":"x",pos:this.state.direction===Rc?"deltaY":"deltaX"},this.state.format="function"==typeof n.bubbles.label&&function(t,i){return n.bubbles.label.call(void 0,{datum:t,data:i,scale:a,resources:{scale:e.chart.scale,formatter:e.chart.formatter}})},{}.hasOwnProperty.call(a,"norm")){this.state.editable=!0,this.state.observeBrush="object"===w(n.brush)&&n.brush.observe,this.state.fauxBrushInstance=null,this.state.findValues=null,this.state.scale=a;var s=this.state.scale.data();!this.state.format&&s&&s.fields&&s.fields[0]&&(this.state.format=s.fields[0].formatter())}else this.state.editable=!1,this.state.scale=Jr(),this.state.scale.data=a.data,this.state.format||(this.state.format=function(t,e){return qc(a.range(),e)?(n=t,r=(i=a).ticks(),-1!==(o=i.domain().indexOf(Ic(n,i)))?r[o].label:"-"):"-";var n,i,r,o}),this.state.fauxBrushInstance=Pa(),this.state.findValues=function(t){return e=t,i=(n=a).domain(),r=n.range(),o=[],e.forEach((function(t){if(qc(r,[t.min,t.max])){var e=i.indexOf(Ic(t.min,n)),a=i.indexOf(Ic(t.max,n));o.push.apply(o,i.slice(Math.min(e,a),Math.max(e,a)+1))}})),o;var e,n,i,r,o};return this.state.ranges=Dc(this.state,this.state.brushInstance),this.state.observeBrush||this.state.sourcedFromThisComponent?[Cc(this.state)]:[]},mounted:function(){this.state.observeBrush&&this.state.brushInstance&&this.state.brushInstance.on("update",this.renderRanges)},beforeDestroy:function(){this.state.observeBrush&&this.state.brushInstance&&this.state.brushInstance.removeListener("update",this.renderRanges)},start:function(t){!function(t){var e=t.state,n=t.e,i=t.renderer,r=t.ranges,a=t.targetSize;if(!e.started){e.edit=null;var o=n.center.x-n.deltaX,s=n.center.y-n.deltaY,c=document.elementFromPoint(o,s);i.element().contains(c)||(c=null);var u={started:!0};e.offset=x({},i.element().getBoundingClientRect());var l=o-e.offset.left,h=s-e.offset.top;e.offset.left+=e.targetRect?e.targetRect.x:0,e.offset.top+=e.targetRect?e.targetRect.y:0,e.ranges=r(e,e.fauxBrushInstance||e.brushInstance);var f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],d=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset];u.current=e.scale.normInvert(d/e.size),u.start=e.scale.normInvert(f/e.size);var p,g,v=e.ranges,y=zc(e),m=-1;if(c&&c.hasAttribute("data-idx"))m=parseInt(c.getAttribute("data-idx"),10),y.min=0<m?v[m-1].max:y.min,y.max=m+1<v.length?v[m+1].min:y.max;else{for(p=0;p<v.length;p++){if(v[p].min<=u.start&&u.start<=v[p].max){m=p,y.min=p?v[p-1].max:y.min,y.max=p+1<v.length?v[p+1].min:y.max;break}if(u.start<v[p].min){y.max=v[p].min,y.min=p?v[p-1].max:y.min;break}}-1===m&&v.length&&p>=v.length&&(y.min=v[v.length-1].max)}if(-1!==m||e.multi||(u.ranges=[],y.min=e.scale.min(),y.max=e.scale.max()),-1!==m)if(g={idx:m,start:v[m].min,end:v[m].max,limitLow:y.min,limitHigh:y.max,mode:"move"},c&&c.hasAttribute("data-other-value"))u.start=parseFloat(c.getAttribute("data-other-value")),g.mode="modify";else{var b=e.scale.norm(g.start)*e.size,w=e.scale.norm(g.end)*e.size;Math.abs(f-b)<=a?(u.start=g.end,g.mode="modify"):Math.abs(f-w)<=a&&(u.start=g.start,g.mode="modify")}else g={idx:-1,start:u.start,end:u.current,limitLow:y.min,limitHigh:y.max,mode:"current"};"modify"!==(u.active=g).mode&&e.targetRect&&!Fo(e.targetRect,{x:l,y:h})||Object.keys(u).forEach((function(t){return e[t]=u[t]}))}}({e:t,state:this.state,renderer:this.renderer,ranges:Dc,targetSize:Sc})},end:function(){this.state.started&&(function(t,e){t.started=!1,t.ranges=e(t,t.fauxBrushInstance||t.brushInstance);var n=zc(t);jc(t,t.current,n)}(this.state,Dc),Pc(this.state),this.state.sourcedFromThisComponent=!0,this.state.active=null)},move:function(t){var e,n,i;this.state.started&&(e=this.state,n=(t.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset])/e.size,i=e.scale.normInvert(n),e.current=Math.max(Math.min(i,e.active.limitHigh),e.active.limitLow),function(t){var e=t.ranges.map((function(t){return{min:t.min,max:t.max}}));if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=Nc(t);e[t.active.idx].min+=n,e[t.active.idx].max+=n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});var i=t.scale.data();i&&i.fields&&i.fields.forEach((function(n){if(t.fauxBrushInstance){var i=Dc(t,t.fauxBrushInstance),r=t.findValues(i),a=t.findValues(e),o=a.filter((function(t){return-1===r.indexOf(t)})),s=r.filter((function(t){return-1===a.indexOf(t)})),c=o.map((function(t){return{key:n.id(),value:t}})),u=s.map((function(t){return{key:n.id(),value:t}}));t.brushInstance.addAndRemoveValues(c,u),t.fauxBrushInstance.setRange(n.id(),e)}else t.brushInstance.setRange(n.id(),e)}))}(this.state),Pc(this.state))},clear:function(){this.state.fauxBrushInstance&&this.state.fauxBrushInstance.clear(),this.state.renderer.render([]),this.state.started=!1,this.state.active=null,this.state.sourcedFromThisComponent=!1},bubbleStart:function(t){if(this.state.editable){var e=t.srcEvent||t,n=e.target,i={rangeIdx:parseInt(n.getAttribute("data-idx"),10),bubbleIdx:parseInt(n.getAttribute("data-bidx"),10)};if(!isNaN(i.rangeIdx)&&JSON.stringify(i)!==JSON.stringify(this.state.edit)){this.state.edit=i,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();var r=n.parentNode;Pc(this.state);var a=r.querySelector("input");a.focus(),a.select()}}}};function Bc(t){t.renderer.render(Cc(t))}function Wc(t){return t.rc.ranges()}function Hc(t){var e=t.ranges.map((function(t){return{min:t.min,max:t.max}}));if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=Nc(t);e[t.active.idx].min=t.active.start+n,e[t.active.idx].max=t.active.end+n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});t.rc.set(e);var i,r,a=[];e.forEach((function(e){var n,i,r;a.push.apply(a,I((i=e,r={x:(n=t).direction?i.min+n.rect.x:n.rect.x,y:n.direction?n.rect.y:i.min+n.rect.y,width:n.direction?i.max-i.min:n.rect.width+n.rect.x,height:n.direction?n.rect.height+n.rect.y:i.max-i.min},n.chart.shapesAt(r,n.settings.brush))))})),r=a,(i=t).chart.brushFromShapes(r,i.settings.brush)}var Vc={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{areaStart:function(t){this.start(t)},areaMove:function(t){this.move(t)},areaEnd:function(t){this.end(t)},areaClear:function(t){this.clear(t)}},created:function(){this.state={key:this.settings.key||"brush-area-dir"}},render:function(t){var e=this;this.state.rect=this.rect;var n=this.settings.settings,i="vertical"===n.direction?Rc:1,r=this.state.rect[i===Rc?"height":"width"],a=this.renderer.element().getBoundingClientRect(),o=(n.target?n.target.components||[n.target.component]:[]).map((function(t){return e.chart.component(t)})).filter((function(t){return!!t&&!!t.rect})),s=o[0]?o.slice(1).reduce((function(t,e){return{x0:Math.min(t.x0,e.rect.x),y0:Math.min(t.y0,e.rect.y),x1:Math.max(t.x1,e.rect.x+e.rect.width),y1:Math.max(t.y1,e.rect.y+e.rect.height)}}),{x0:o[0].rect.x,y0:o[0].rect.y,x1:o[0].rect.x+o[0].rect.width,y1:o[0].rect.y+o[0].rect.height}):null;return this.state.targetRect=s?{x:s.x0-this.rect.x,y:s.y0-this.rect.y,width:s.x1-s.x0,height:s.y1-s.y0}:null,this.state.style=this.style,this.state.chart=this.chart,this.state.direction=i,this.state.settings=n,this.state.offset=a,this.state.rc=Ma(),this.state.renderer=this.renderer,this.state.multi=!!n.multiple,this.state.h=t,this.state.size=r,this.state.cssCoord={offset:this.state.direction===Rc?"top":"left",coord:this.state.direction===Rc?"y":"x",pos:this.state.direction===Rc?"deltaY":"deltaX",area:this.state.direction===Rc?"height":"width"},this.state.format=function(t,e){return function(t,e,n){var i=Math.min.apply(Math,I(n)),r=Math.max.apply(Math,I(n)),a={x:t.direction?i+t.rect.x:t.rect.x,y:t.direction?t.rect.y:i+t.rect.y,width:t.direction?r-i:t.rect.width+t.rect.x,height:t.direction?t.rect.height+t.rect.y:r-i},o=t.chart.shapesAt(a,t.settings.brush);if(0===o.length)return"-";var s=o.reduce((function(n,r){var a=n.bounds,o=r.bounds;return e===i?a[t.cssCoord.coord]<=o[t.cssCoord.coord]?n:r:a[t.cssCoord.coord]+a[t.cssCoord.area]>=o[t.cssCoord.coord]+o[t.cssCoord.area]?n:r})),c=t.settings.brush.components.reduce((function(t,e){return t.key===s.key?t:e}));return"function"==typeof t.settings.bubbles.label?t.settings.bubbles.label(s.data):Array.isArray(c.data)&&c.data.length?s.data[c.data[0]].label:s.data&&s.data.label?s.data.label:"-"}(this,t,e)},[]},start:function(t){!function(t){var e=t.state,n=t.e,i=t.renderer,r=t.ranges,a=t.targetSize;if(!e.started){var o=n.center.x-n.deltaX,s=n.center.y-n.deltaY,c=document.elementFromPoint(o,s);i.element().contains(c)||(c=null);var u={started:!0};e.offset=i.element().getBoundingClientRect(),e.ranges=r(e);var l=o-e.offset.left,h=s-e.offset.top,f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],d=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset],p=d,g=f;u.start=f,u.current=d;var v,y,m=e.ranges,x=Oc(e),b=-1;if(c&&c.hasAttribute("data-idx"))b=parseInt(c.getAttribute("data-idx"),10),x.min=0<b?m[b-1].max:x.min,x.max=b+1<m.length?m[b+1].min:x.max;else{for(v=0;v<m.length;v++){if(m[v].min<=g&&g<=m[v].max){b=v,x.min=v?m[v-1].max:x.min,x.max=v+1<m.length?m[v+1].min:x.max;break}if(g<m[v].min){x.max=m[v].min,x.min=v?m[v-1].max:x.min;break}}-1===b&&m.length&&v>=m.length&&(x.min=m[m.length-1].max)}if(-1!==b||e.multi||(u.ranges=[],x.min=0,x.max=e.direction?e.rect.width:e.rect.height),-1!==b)if(y={idx:b,start:m[b].min,end:m[b].max,limitLow:x.min,limitHigh:x.max,mode:"move"},c&&c.hasAttribute("data-other-value"))u.start=parseFloat(c.getAttribute("data-other-value")),y.mode="modify";else{var w=y.start,_=y.end;Math.abs(f-w)<=a?(u.start=y.end,y.mode="modify"):Math.abs(f-_)<=a&&(u.start=y.start,y.mode="modify")}else y={idx:-1,start:g,end:p,limitLow:x.min,limitHigh:x.max,mode:"current"};"modify"!==(u.active=y).mode&&e.targetRect&&!Fo(e.targetRect,{x:l,y:h})||Object.keys(u).forEach((function(t){return e[t]=u[t]}))}}({e:t,state:this.state,renderer:this.renderer,ranges:Wc,targetSize:Sc})},end:function(){this.state.started&&(function(t,e){t.started=!1,t.ranges=e(t);var n=Oc(t);jc(t,t.current,n)}(this.state,Wc),Bc(this.state))},move:function(t){var e,n;this.state.started&&(e=this.state,n=t.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset],e.current=Math.max(Math.min(n,e.active.limitHigh),e.active.limitLow),Hc(this.state),Bc(this.state))},clear:function(){this.state.rc&&this.state.rc.clear(),this.state.renderer.render([])}};function Yc(t){var e="vertical"===t.direction,n=t.rect[e?"height":"width"],i=t.rect[e?"width":"height"];return function(t){var e=t.brush;if(!e||!e.isActive())return[];var n=t.scale.data(),i=(n&&n.fields||[]).map((function(t){return t.id()})),r=e.brushes().filter((function(t){return"range"===t.type&&-1!==i.indexOf(t.id)}))[0];return r?r.brush.ranges():[]}(t).map((function(r){var a=t.scale(r.min)*n,o=t.scale(r.max)*n,s=Math.min(a,o),c=Math.abs(a-o);return{type:"rect",fill:t.fill,opacity:t.opacity,x:e?0:s,width:e?i:c,y:e?s:0,height:e?c:i}}))}function Uc(t,e,n,i){function r(){var e;(e=t).renderer.render(Yc(e))}function a(){var e;(e=t).renderer.render(Yc(e))}function o(){var e;(e=t).renderer.render(Yc(e))}(t.brush=e)&&(e.on("start",r),e.on("update",a),e.on("end",o),t.start=r,t.update=a,t.end=o,t.brush=e,t.scale=n,t.renderer=i)}function $c(t){t.brush&&(t.brush.removeListener("start",t.start),t.brush.removeListener("update",t.update),t.brush.removeListener("end",t.end)),t.start=void 0,t.update=void 0,t.end=void 0,t.brush=void 0,t.scale=void 0,t.renderer=void 0}var Xc={require:["chart","settings","renderer"],defaultSettings:{settings:{}},preferredSize:function(){return 50},created:function(){this.state={}},render:function(){var t=this.settings.settings,e=this.chart.brush(t.brush),n=t.direction||"horizontal",i="horizontal"===n?this.rect.width:this.rect.height,r=Va(this.chart.scale(t.scale),i);return $c(this.state),Uc(this.state,e,r,this.renderer),this.state.rect=this.rect,this.state.fill=t.fill||"#ccc",this.state.opacity=void 0!==t.opacity?t.opacity:1,this.state.direction=n,Yc(this.state)},beforeDestroy:function(){$c(this.state)}};function Gc(t,e){var n=e.center.x,i=e.center.y;return{x:n-t.left,y:i-t.top}}function Kc(t,e,n){return co(t,e.points[0])<Math.pow(n.settings.snapIndicator.threshold,2)}function Zc(t,e){null==t.path.d?t.path.d="M".concat(e.x," ").concat(e.y," "):t.path.d+="L".concat(e.x," ").concat(e.y," "),t.points.push(e)}function Jc(t){var e=t.state,n=t.start,i=void 0===n?null:n,r=t.end,a=void 0===r?null:r;null!==i&&(e.snapIndicator.x1=i.x,e.snapIndicator.y1=i.y),null!==a&&(e.snapIndicator.x2=a.x,e.snapIndicator.y2=a.y)}function Qc(t,e){t.snapIndicator.visible=e}function tu(){return{points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}}}var eu={require:["chart","renderer","settings"],defaultSettings:{layout:{displayOrder:0},settings:{brush:{components:[]},snapIndicator:{threshold:75,strokeDasharray:"5, 5",stroke:"black",strokeWidth:2,opacity:.5},lasso:{fill:"transparent",stroke:"black",strokeWidth:2,opacity:.7,strokeDasharray:"20, 10"},startPoint:{r:10,fill:"green",stroke:"black",strokeWidth:1,opacity:1}}},on:{lassoStart:function(t){this.start(t)},lassoEnd:function(t){this.end(t)},lassoMove:function(t){this.move(t)},lassoCancel:function(){this.cancel()}},created:function(){this.state=tu()},start:function(t){var e,n,i,r,a,o;this.state.active=!0,this.state.path={visible:!0,type:"path",d:null,fill:(e=this.settings.settings.lasso).fill,stroke:e.stroke,strokeWidth:e.strokeWidth,opacity:e.opacity,strokeDasharray:e.strokeDasharray,collider:{type:null}},this.state.snapIndicator={visible:!1,type:"line",x1:0,y1:0,x2:0,y2:0,strokeDasharray:(n=this.settings.settings.snapIndicator).strokeDasharray,stroke:n.stroke,strokeWidth:n.strokeWidth,opacity:n.opacity,collider:{type:null}},this.state.startPoint={visible:!0,type:"circle",cx:0,cy:0,r:(i=this.settings.settings.startPoint).r,fill:i.fill,opacity:i.opacity,stroke:i.stroke,strokeWidth:i.strokeWidth,collider:{type:null}},this.state.rendererBounds=this.renderer.element().getBoundingClientRect(),this.state.componentDelta=(r=this.chart,a=this.state.rendererBounds,o=r.element.getBoundingClientRect(),{x:a.left-o.left,y:a.top-o.top}),this.state.brushConfig=this.settings.settings.brush.components.map((function(t){return{key:t.key,contexts:t.contexts||["lassoBrush"],data:t.data||[""],action:t.action||"add"}}));var s,c,u=Gc(this.state.rendererBounds,t);Zc(this.state,u),Jc({state:this.state,start:u}),s=this.state,c=u,s.startPoint.cx=c.x,s.startPoint.cy=c.y},move:function(t){if(this.state.active){var e,n,i,r=Gc(this.state.rendererBounds,t);Kc(r,this.state,this.settings)?Qc(this.state,!0):Qc(this.state,!1),Zc(this.state,r),Jc({state:this.state,end:r}),e=this.state,n=this.renderer,i=[e.startPoint,e.path,e.snapIndicator].filter((function(t){return t.visible})),n.render(i),function(t,e){if(t.active){var n=t.points[t.points.length-2],i=t.points[t.points.length-1];t.lineBrushShape.x1=n.x+t.componentDelta.x,t.lineBrushShape.y1=n.y+t.componentDelta.y,t.lineBrushShape.x2=i.x+t.componentDelta.x,t.lineBrushShape.y2=i.y+t.componentDelta.y;var r=e.shapesAt(t.lineBrushShape,{components:t.brushConfig});e.brushFromShapes(r,{components:t.brushConfig})}}(this.state,this.chart)}},end:function(t){this.state.active&&(Qc(this.state,!1),Kc(Gc(this.state.rendererBounds,t),this.state,this.settings)&&function(t,e){if(t.active){var n=t.componentDelta.x,i=t.componentDelta.y,r=t.points.map((function(t){return{x:t.x+n,y:t.y+i}})),a=e.shapesAt({vertices:r},{components:t.brushConfig});e.brushFromShapes(a,{components:t.brushConfig})}}(this.state,this.chart),this.state=tu(),this.renderer.render([]))},cancel:function(){var t,e;this.state.active&&(t=this.state,e=this.chart,t.brushConfig.forEach((function(t){t.contexts.forEach((function(t){e.brush(t).end()}))})),this.state=tu(),this.renderer.render([]))},render:function(){}};function nu(t,e,n,i,r){for(var a,o=0,s=e.length-1;o<s;){var c=Math.floor((o+s)/2);(a=r(e[c]))[n]+a[i]<t[n]?o=c+1:s=c}return o}function iu(t){function e(t){return t.textBounds}function n(t){return t.node.localBounds}var i=t.orientation,r=t.targetNodes,a=t.labels,o=t.container,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:nu,c=[],u="v"===i?"x":"y",l="v"===i?"width":"height";return function(t,i){var h=a[i],f=h.textBounds,d=h.node;if(f[u]<o[u]||f[u]+f[l]>o[u]+o[l])return!1;for(var p=s(f,c,u,l,e);p<c.length;p++)if(Io(f,c[p].textBounds))return!1;for(var g=s(f,r,u,l,n),v=f[u]+f[l],y=g;y<r.length;y++){var m=r[y].node;if(v<m.localBounds[u])break;if(Io(f,m.localBounds)&&d!==m)return!1}return c.push(a[i]),!0}}var ru=4;function au(t,e){return{node:t,data:t.data,scale:e.scale,formatter:e.formatter,dataset:e.dataset}}function ou(t){var e=w(t);return("string"===e||"number"===e)&&""!==t}function su(t){return T({type:"rect",rx:2,ry:2,fill:t.backgroundColor},t.backgroundBounds)}function cu(t,e,n){return n?t.width>=e.height:t.width>=e.width}function uu(t,e,n){return n?t.height>=e.width:t.height>=e.height}function lu(t,e,n,i){return t+.5*e+(i-.5)*(e-n)-.5*n}function hu(t,e,n){var i,r,a,o={type:"text",text:e,maxWidth:n.rotate?t.height:t.width,x:0,y:t.y,dx:0,dy:0,fill:n.fill,anchor:n.rotate?"end":"start",baseline:"central",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily},s=n.textMetrics;if(!n.overflow&&(!cu(i=t,r=s,(a=n).rotate)||!uu(i,r,a.rotate)))return!1;var c=.5*s.height;return n.rotate?(o.x=lu(t.x,t.width,s.height,n.align)+c,o.y=lu(t.y,t.height,s.width,n.justify),o.transform="rotate(-90, ".concat(o.x+o.dx,", ").concat(o.y+o.dy,")")):(o.x=lu(t.x,t.width,s.width,n.align),o.y=lu(t.y,t.height,s.height,n.justify)+c),o}function fu(t){var e,n,i,r,a,o,s=t.bar,c=t.view,u=t.direction,l=t.position,h=t.padding,f=void 0===h?ru:h,d={};if(x(d,s),l&&"inside"!==l)if("up"===u||"down"===u){var p=Math.max(0,Math.min(s.y,c.height)),g=Math.max(0,Math.min(s.y+s.height,c.height));"outside"===l&&"up"===u||"opposite"===l&&"down"===u?(d.y=0,d.height=p):("outside"===l&&"down"===u||"opposite"===l&&"up"===u)&&(d.y=g,d.height=c.height-g)}else{var v=Math.max(0,Math.min(s.x,c.width)),y=Math.max(0,Math.min(s.x+s.width,c.width));"outside"===l&&"left"===u||"opposite"===l&&"right"===u?(d.x=0,d.width=v):("outside"===l&&"right"===u||"opposite"===l&&"left"===u)&&(d.x=y,d.width=c.width-y)}return e=d,n=c,i=Math.max(0,Math.min(e.y,n.height)),r=Math.max(0,Math.min(e.y+e.height,n.height)),a=Math.max(0,Math.min(e.x,n.width)),o=Math.max(0,Math.min(e.x+e.width,n.width)),e.x=a,e.width=o-a,e.y=i,e.height=r-i,function(t,e){var n=1<arguments.length&&void 0!==e?e:{},i=n.top,r=void 0===i?ru:i,a=n.bottom,o=void 0===a?ru:a,s=n.left,c=void 0===s?ru:s,u=n.right,l=void 0===u?ru:u;t.x+=c,t.width-=c+l,t.y+=r,t.height-=r+o}(d,f),d}function du(t){var e,n,i,r,a,o,s,c,u,l,h,f,d=t.direction,p=t.fitsHorizontally,g=t.measured,v=t.node,y=t.orientation,m=t.placementSettings,x=t.rect,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:fu,w=[],_="h"===y?"width":"height";for(a=0;a<m.length;a++)if(i=m[a],r=b({bar:v.localBounds,view:x,direction:d,position:i.position,padding:i.padding}),w.push(r),e=!a||r[_]>e[_]?r:e,o=y,s=r,c=g,u=p,l=i.overflow,f=h=void 0,f="v"===o?(h=u||l||cu(s,c,!0),uu(s,c,!u)):(h=cu(s,c),l||uu(s,c,!1)),h&&f){n=r;break}return n||(n=e,a=w.indexOf(n)),{bounds:n,placement:i=m[a]}}function pu(t,e,n,i,r){var a=4<arguments.length&&void 0!==r?r:{},o=a.top,s=void 0===o?ru:o,c=a.bottom,u=void 0===c?ru:c,l=a.left,h=void 0===l?ru:l,f=a.right,d=void 0===f?ru:f,p=t.x+t.dx,g=t.y+t.dy,v=n?Math.min(e.width,i.height):Math.min(e.height,i.width),y=n?Math.min(e.height,i.height):Math.min(e.width,i.width),m=.5*e.height;return{x:(n?p-m:p)-h-1e-9,y:(n?g:g-m)-s-1e-9,width:y+(h+d)-1e-9,height:v+(s+u)-1e-9}}function gu(t){for(var e,n,i,r,a,o,s,c,u,l,h,f,d,p=t.chart,g=t.targetNodes,v=t.rect,y=t.fitsHorizontally,m=t.collectiveOrientation,x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:du,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:hu,_=3<arguments.length&&void 0!==arguments[3]?arguments[3]:iu,k=[],M={container:v,targetNodes:g,labels:[],orientation:m},S=0,R=g.length;S<R;S++){o=null,f=au(i=(n=g[S]).node,p),d="left"===(u=n.direction)||"right"===u?"h":"v";for(var A=0;A<n.texts.length;A++)if(ou(r=n.texts[A])){var E=x({direction:u,fitsHorizontally:y,lblStngs:l=n.labelSettings[A],measured:c=n.measurements[A],node:i,orientation:d,placements:l.placements,placementSettings:n.placementSettings[A],rect:v});if(o=E.bounds,h=E.placement,o&&h){a=h.justify;var N="function"==typeof l.linkData?l.linkData(f,S):void 0,C="function"==typeof h.overflow?h.overflow(f,S):h.overflow;"up"===u&&(a=1-a),"opposite"===h.position&&(a=1-a),"left"===u&&(a=1-a);var z=!("h"===m||y);if(e=b(o,r,{justify:"h"==d?h.align:a,align:"h"==d?a:h.align,fontSize:l.fontSize,fontFamily:l.fontFamily,textMetrics:c,rotate:z,overflow:!!C})){var O=pu(e,c,z,o,h.padding);s="function"==typeof h.fill?h.fill(T(T({},f),{},{textBounds:O}),S):h.fill,e.fill=s,void 0!==N&&(e.data=N),"object"===w(h.background)&&(e.backgroundColor="function"==typeof h.background.fill?h.background.fill(T(T({},f),{},{textBounds:O}),S):h.background.fill,void 0!==e.backgroundColor&&(e.backgroundBounds=pu(e,c,z,o,h.background.padding))),k.push(e),M.labels.push({node:i,textBounds:O})}}}}var j=k.filter(_(M)),P=j.filter((function(t){return void 0!==t.backgroundBounds})).map(su);return[].concat(I(P),I(j))}var vu=4;function yu(t){var e=2*Math.PI;return(t%e+e)%e}function mu(t,e){t.x+=e,t.width-=2*e,t.y+=e,t.height-=2*e}function xu(t,e,n){var i=e.x,r=e.y;if(t*t<i*i+r*r)return null;var a=Math.sin(n),o=Math.cos(n),s=i*o-r*a,c=t*t-s*s;if(c<0)return null;var u=Math.sqrt(c);return{x:s*o+a*u,y:-s*a+o*u}}function bu(t){var e,n,i=t.radius,r=t.size,a=t.angle,o=r.width,s=r.height,c={x:o/2,y:s/2};switch(Math.floor(a/(Math.PI/2))){case 0:if(!(e=xu(i,c,a)))return null;e.y*=-1,n={x:-o,y:0};break;case 1:if(!(e=xu(i,c,Math.PI-a)))return null;n={x:-o,y:-s};break;case 2:if(!(e=xu(i,c,a-Math.PI)))return null;e.x*=-1,n={x:0,y:-s};break;case 3:if(!(e=xu(i,c,2*Math.PI-a)))return null;e.x*=-1,e.y*=-1,n={x:0,y:0};break;default:throw new Error("invalid angle")}return{x:e.x+n.x,y:e.y+n.y,width:o,height:s}}function wu(t){var e=t.slice,n=t.measured,i=t.padding,r=e.start,a=e.end,o=e.innerRadius,s=e.outerRadius,c=s-o-2*i,u=a-r;if(u<Math.PI){var l=(n.height/2+i)/Math.tan(u/2);o<l&&(c=s-l-2*i)}if(c<0||c<n.minReqWidth)return null;var h=yu((r+a)/2),f=s-i,d={x:Math.sin(h)*f,y:-Math.cos(h)*f,width:c,height:n.height};return h<Math.PI?(d.angle=h-Math.PI/2,d.anchor="end"):(d.angle=h+Math.PI/2,d.anchor="start"),d}function _u(t){var e=t.context,n=t.node,i=t.bounds,r=n.desc.slice,a=yu((r.start+r.end)/2);switch(Math.floor(a/(Math.PI/2))){case 0:e.q1maxY=i.y-2,void 0===e.q2minY&&(e.q2minY=i.y+i.height+2);break;case 1:e.q2minY=i.y+i.height+2;break;case 2:e.q3minY=i.y+i.height+2;break;case 3:e.q4maxY=i.y-2,void 0===e.q3minY&&(e.q3minY=i.y+i.height+2)}}function ku(t){var e=t.slice,n=t.measured,i=t.padding,r=t.view,a=t.context,o=e.start,s=e.end,c=e.outerRadius,u=e.offset,l=yu((o+s)/2);if(function(t,e,n){switch(e){case 0:return t.q1maxY<0;case 1:return t.q2minY>n.height;case 2:return t.q3minY>n.height;case 3:return t.q4maxY<0;default:return 1}}(a,Math.floor(l/(Math.PI/2)),r))return null;var h=c+i+n.height/2,f=Math.sin(l)*h,d=-Math.cos(l)*h,p=n.width;if(l<Math.PI){var g=Math.abs(r.x+r.width-(f+u.x));g<p&&(p=g)}else{var v=Math.abs(r.x-(f+u.x));v<p&&(p=v)}if(p<n.minReqWidth)return null;var y={x:f,y:d,width:p,height:n.height};return l<Math.PI?y.anchor="start":y.anchor="end",y}function Mu(t,e,n){var i={type:"text",text:e,maxWidth:t.width,x:t.x,y:t.y+("top"===t.baseline?t.height/2:0),fill:n.fill,anchor:t.anchor||"start",baseline:"middle",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily};if(!isNaN(t.angle)){var r=t.angle*(360/(2*Math.PI));i.transform="rotate(".concat(r,", ").concat(i.x,", ").concat(i.y,")")}return i}function Su(t){var e,n,i,r,a,o,s,c,u,l,h,f,d,p,g,v,y,m,x,b,w,_,k=t.slice,M=t.direction,S=t.position,R=t.padding,T=t.measured,A=t.view,E=t.context,N=t.store,C=k.start,z=k.end,O=k.innerRadius,j=k.offset;switch(S){case"into":e="rotate"===M?wu({slice:k,measured:T,padding:R}):(p=(d={slice:k,measured:T,padding:R}).slice,g=d.padding,v=d.measured,y=p.start,m=p.end,x=p.innerRadius,b=p.outerRadius,w=yu((y+m)/2),(_=bu({radius:b,size:{width:v.width+2*g,height:v.height+2*g},angle:w}))?(_.baseline="top",Lo(_,{x1:0,y1:0,x2:Math.sin(y)*b,y2:-Math.cos(y)*b})||Lo(_,{x1:0,y1:0,x2:Math.sin(m)*b,y2:-Math.cos(m)*b})||Co({cx:0,cy:0,r:x},_)?null:(mu(_,g),_)):null);break;case"inside":n={start:C,end:z,innerRadius:0,outerRadius:O},e="rotate"===M?wu({slice:n,measured:T,padding:R}):(r=(i={slice:n,measured:T,padding:R,store:N}).slice,a=i.padding,o=i.measured,s=i.store,c=r.start,u=r.end,l=r.outerRadius,h=yu((c+u)/2),(f=bu({radius:l,size:{width:o.width+2*a,height:o.height+2*a},angle:h}))?(f.baseline="top",mu(f,a),s.insideLabelBounds.some((function(t){return Io(t,f)}))?null:(s.insideLabelBounds.push({x:f.x-vu,y:f.y,width:f.width+2*vu,height:f.height}),f)):null);break;case"outside":e="rotate"===M?function(t){var e=t.slice,n=t.measured,i=t.padding,r=t.view,a=e.start,o=e.end,s=e.outerRadius,c=e.offset,u=s+i,l=o-a;if(l<Math.PI&&u<(n.height/2+i)/Math.tan(l/2))return null;var h=yu((a+o)/2),f=Math.sin(h)*u,d=-Math.cos(h)*u,p=n.width,g=h%Math.PI;if(g>Math.PI/2&&(g=Math.PI-g),.001<Math.cos(g)){var v=d<0?r.y:r.y+r.height,y=Math.abs(v-c.y)/Math.cos(g)-Math.tan(g)*(n.height/2)-2*i-s;y<p&&(p=y)}if(.001<Math.sin(g)){var m=f<0?r.x:r.x+r.width,x=Math.abs(m-c.x)/Math.sin(g)-n.height/2/Math.tan(g)-2*i-s;x<p&&(p=x)}if(p<=0||p<n.minReqWidth)return null;var b={x:f,y:d,width:p,height:n.height};return h<Math.PI?(b.angle=h-Math.PI/2,b.anchor="start"):(b.angle=h+Math.PI/2,b.anchor="end"),b}({slice:k,measured:T,padding:R,view:A}):ku({slice:k,measured:T,padding:R,view:A,context:E});break;default:throw new Error("not implemented")}return e&&(e.x+=j.x,e.y+=j.y,"outside"===S&&"rotate"!==M&&function(t,e,n){var i=n.start,r=n.end,a=n.offset,o=n.outerRadius,s=yu((i+r)/2);switch(Math.floor(s/(Math.PI/2))){case 0:if(void 0!==e.q1maxY){var c=Math.min(t.y,e.q1maxY-t.height),u=t.y-c;if(t.y=c,1<u){var l=o+2;t.line={type:"line",x1:t.x-2,y1:t.y+2,x2:a.x+Math.sin(s)*l,y2:a.y-Math.cos(s)*l,strokeWidth:1}}}break;case 1:if(void 0!==e.q2minY){var h=Math.max(t.y,e.q2minY),f=h-t.y;if(t.y=h,1<f){var d=o+2;t.line={type:"line",x1:t.x-2,y1:t.y-2,x2:a.x+Math.sin(s)*d,y2:a.y-Math.cos(s)*d,strokeWidth:1}}}break;case 2:if(void 0!==e.q3minY){var p=Math.max(t.y,e.q3minY),g=p-t.y;if(t.y=p,1<g){var v=o+2;t.line={type:"line",x1:t.x+2,y1:t.y-2,x2:a.x+Math.sin(s)*v,y2:a.y-Math.cos(s)*v,strokeWidth:1}}}break;case 3:if(void 0!==e.q4maxY){var y=Math.min(t.y,e.q4maxY-t.height),m=t.y-y;if(t.y=y,1<m){var x=o+2;t.line={type:"line",x1:t.x+2,y1:t.y+2,x2:a.x+Math.sin(s)*x,y2:a.y-Math.cos(s)*x,strokeWidth:1}}}}}(e,E,k)),e}function Ru(t){for(var e=t.context,n=t.direction,i=t.measured,r=t.node,a=t.placementSettings,o=t.rect,s=t.store,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Su,u=0;u<a.length;u++){var l=a[u],h=c({context:e,slice:r.desc.slice,view:o,direction:n,position:l.position,measured:i,padding:l.padding,store:s});if(h)return{bounds:h,placement:l}}return{bounds:null,placement:null}}function Tu(t){for(var e=[],n=[],i=[],r=[],a=0;a<t.length;++a){var o=t[a].desc.slice,s=yu((o.start+o.end)/2);switch(Math.floor(s/(Math.PI/2))){case 0:e.push(t[a]);break;case 1:n.push(t[a]);break;case 2:i.push(t[a]);break;case 3:r.push(t[a])}}function c(t,e){return yu((t.desc.slice.start+t.desc.slice.end)/2)-yu((e.desc.slice.start+e.desc.slice.end)/2)}function u(t,e){return c(e,t)}return e.sort(u),n.sort(c),i.sort(u),r.sort(c),e.concat(n,r,i)}var Au=/\n+|\r+|\r\n/,Eu=/\s/,Nu=/[a-zA-Z\u00C0-\u00F6\u00F8-\u00FF\u00AD]/,Cu=0,zu=1,Ou=2;function ju(t){return"string"==typeof t?-1!==t.search(Au):-1!==String(t).search(Au)}function Pu(t){return-1!==t.search(Eu)}function Du(t){return-1!==t.search(Nu)}function Iu(t,e,n){return Math.max(e,Math.min(n,t))}function qu(t){var e,n=0<arguments.length&&void 0!==t?t:{},i=n.string,r=n.separator,a=void 0===r?"":r,o=n.reverse,s=void 0!==o&&o,c=n.measureText,u=void 0===c?function(t){return{width:t.length,height:1}}:c,l=n.mandatoryBreakIdentifiers,h=void 0===l?[ju]:l,f=n.noBreakAllowedIdentifiers,d=void 0===f?[]:f,p=n.suppressIdentifier,g=void 0===p?[Pu,ju,function(t){return""===t}]:p,v=n.hyphenationIdentifiers,y=void 0===v?[Du]:v,m=String(i).split(a);""===(e=m)[0]&&e.shift(),""===e[e.length-1]&&e.pop();var x=m.length,b=s?function(t){return 0<=t}:function(t){return t<x},w=s?x:-1;function _(t){var e,n,i,r,a=Iu(t,0,x-1),o=m[a],s=u(o),c=(e=o,n=a,i=m,r=d,h.some((function(t){return t(e,n,i)}))?zu:r.some((function(t){return t(e,n,i)}))?Cu:Ou);return{index:a,value:o,breakOpportunity:c,suppress:g.some((function(t){return t(o,a,m)})),hyphenation:y.some((function(t){return t(o,a,m)})),width:s.width,height:s.height,done:!1}}return{next:function(t){return isNaN(t)?s?w--:w++:w=Iu(t,0,x-1),b(w)?_(w):{done:!0}},peek:_,length:x}}var Fu="‐",Lu="…",Bu=24,Wu=4,Hu=1e-12,Vu=16,Yu=1.2,Uu=/^\s*\d+(\.\d+)?px\s*$/i;function $u(t){return"string"===w(t)&&Uu.test(t)}function Xu(t){var e=t["font-size"]||t.fontSize;return $u(e)?parseFloat(e)*Math.max(isNaN(t.lineHeight)?Yu:t.lineHeight,0):Vu*Yu}function Gu(t,e){return{lines:[],line:"",width:0,maxLines:function(t){var e=t.maxHeight,n=Math.max(t.maxLines,1)||1/0;if(isNaN(e))return n;var i=Xu(t);return Math.max(1,Math.min(Math.floor(e/i),n))}(t),maxWidth:t.maxWidth,hyphens:{enabled:"auto"===t.hyphens,char:Fu,metrics:e(Fu)}}}function Ku(t){t.lines.push(t.line),t.line="",t.width=0}function Zu(t,e){t.line+=e.value,t.width+=e.width}function Ju(t,e,n){if(e.width>t.maxWidth)return e;for(var i=e.index,r=1;r<5;r++){var a=n.peek(e.index-1);if(!e.hyphenation||!a.hyphenation||0===e.index)return e;if(t.width+t.hyphens.metrics.width<=t.maxWidth)return t.line+=t.hyphens.char,e;if(1===t.line.length)return e;e=n.next(i-r),t.line=t.line.slice(0,-1),t.width-=e.width}return e}function Qu(t,e,n){for(var i=qu({string:e.value,measureText:n});t.lines.length<t.maxLines;){var r=i.next();if(r.done)break;t.width+r.width>t.maxWidth&&r.breakOpportunity===Ou&&0<t.line.length&&(r=t.hyphens.enabled?Ju(t,r,i):r,Ku(t)),Zu(t,r)}}function tl(t,e){for(var n=qu({string:t.text,separator:"",measureText:e,noBreakAllowedIdentifiers:[function(t,e){return 0===e}]}),i=Gu(t,e),r=!0;i.lines.length<i.maxLines;){var a=n.next();if(a.done){Ku(i),r=!1;break}a.breakOpportunity===zu?Ku(i):i.width+a.width>i.maxWidth&&a.breakOpportunity===Ou?a.suppress?i.width+=a.width:(a=i.hyphens.enabled?Ju(i,a,n):a,Ku(i),Zu(i,a)):Zu(i,a)}return{lines:i.lines,reduced:r}}function el(t,e){for(var n=qu({string:t.text,separator:/(\s|-|\u2010)/,measureText:e}),i=Gu(t,e),r=!0;i.lines.length<i.maxLines;){var a=n.next();if(a.done){Ku(i),r=!1;break}a.breakOpportunity===zu?Ku(i):i.width+a.width>i.maxWidth&&a.breakOpportunity===Ou?a.suppress?Ku(i):a.width>i.maxWidth?Qu(i,a,e):(Ku(i),Zu(i,a)):Zu(i,a)}return{lines:i.lines,reduced:r}}function nl(t){return{"break-all":tl,"break-word":el}[t.wordBreak]}function il(t){return function(e){var n,i,r,a=e.node;if("text"===(r=a).type&&!r._lineBreak){var o=nl(a);if(!o)return;var s=t(a);if(s.width>a.maxWidth||ju(a.text)){var c=(Xu(a)-s.height)/2,u=o(a,(n=a,i=t,function(t){return i({text:t,fontSize:n.fontSize,fontFamily:n.fontFamily})}));e.node=function(t,e,n,i){var r={type:"container",children:[]};void 0!==e.id&&(r.id=e.id);var a=0;return t.lines.forEach((function(o,s){var c=x({},e);c.text=o,c._lineBreak=!0,a+=n,t.reduced&&s===t.lines.length-1?c.text+=Lu:delete c.maxWidth,c.dy=isNaN(c.dy)?a:c.dy+a,a+=i,a+=n,r.children.push(c)})),r}(u,a,c,s.height)}}}}function rl(t,e){var n=t.text,i=t["font-size"],r=t["font-family"],a=t.maxWidth;if(n="string"==typeof n?n:"".concat(n),void 0===a)return n;var o=e({text:n,fontSize:i,fontFamily:r}).width;if(o<=a)return n;for(var s=0,c=n.length-1;s<=c;){var u=Math.floor((s+c)/2);(o=e({text:n.substr(0,u)+Lu,fontSize:i,fontFamily:r}).width)<=a?s=u+1:c=u-1}return n.substr(0,c)+Lu}function al(t){var e=t.baseline||t["dominant-baseline"],n=0,i=parseInt(t.fontSize||t["font-size"],10)||0;switch(e){case"hanging":n=.75*i;break;case"text-before-edge":n=.85*i;break;case"middle":n=.25*i;break;case"central":n=.35*i;break;case"mathemetical":n=i/2;break;case"text-after-edge":case"ideographic":n=.2*-i;break;default:n=0}return n}var ol,sl={},cl={},ul={fontSize:void 0,fontFamily:void 0};function ll(t,e,n){var i,r,a=t+e+n;return"number"!=typeof cl[a]&&(ol=ol||document.createElement("canvas").getContext("2d"),i=e,r=n,ul.fontSize===i&&ul.fontFamily===r||(ol.font=i+" "+r,ul.fontSize=i,ul.fontFamily=r),cl[a]=ol.measureText(t).width),cl[a]}function hl(t){return"number"!=typeof sl[t]&&(sl[t]=function(t){if($u(t)){var e=parseFloat(t);return e+Wu*Math.ceil((e+Hu)/Bu)}return Vu}(t)),sl[t]}function fl(t){var e=t.text,n=t.fontSize;return{width:ll(e,n,t.fontFamily),height:hl(n)}}function dl(t,e){var n=1<arguments.length&&void 0!==e?e:fl,i=t["font-size"]||t.fontSize,r=t["font-family"]||t.fontFamily,a=n({text:t.text,fontFamily:r,fontSize:i}),o=Math.min(t.maxWidth||a.width,a.width),s=t.x||0,c=t.y||0,u=t.dx||0,l={x:0,y:c+((t.dy||0)+al(t))-.75*a.height,width:o,height:a.height},h=t["text-anchor"]||t.anchor;return l.x="middle"===h?s+u-o/2:"end"===h?s+u-o:s+u,l}function pl(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:fl,n=nl(t),i=t["font-size"]||t.fontSize,r=t["font-family"]||t.fontFamily,a=e({text:t.text,fontFamily:r,fontSize:i});if(n&&(a.width>t.maxWidth||ju(t.text))){for(var o=n(t,(function(t){return e({text:t,fontFamily:r,fontSize:i})})),s=x({},t),c=0,u="",l=0,h=o.lines.length;l<h;l++){var f=o.lines[l];f+=l===h-1&&o.reduced?Lu:"";var d=e({text:f,fontSize:i,fontFamily:r}).width;c<=d&&(c=d,u=f)}s.text=u;var p=dl(s,e);return p.height=Xu(t)*o.lines.length,p}return dl(t,e)}var gl=1.2;function vl(t,e,n){var i={type:"text",text:e,maxWidth:t.width,x:0,y:t.y,dx:0,dy:0,fill:n.fill,anchor:"start",baseline:"alphabetical",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily},r=n.textMetrics;if(t.width<n.fontSize)return!1;var a=Math.max(0,t.width-r.width);return i.x=t.x+n.align*a,i.y=t.y+r.height/gl,i}function yl(t){return{type:"circle",bounds:{cx:t.cx,cy:t.cy,r:t.r}}}function ml(t){return t.desc&&t.desc.slice?function(t){var e=t.start,n=t.end,i=t.innerRadius,r=t.outerRadius,a=t.offset;if(1e-12<Math.abs(e+2*Math.PI-n))return{type:null,bounds:null};var o=0!==i?i:r;return yl({cx:a.x,cy:a.y,r:o})}(t.desc.slice):"circle"===t.type?yl(t.attrs):"rect"===t.type?{type:"rect",bounds:t.bounds}:{type:null,bounds:null}}var xl={bar:function(t){var e=t.settings,n=t.chart,i=t.nodes,r=t.rect,a=t.renderer,o=t.style,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:gu,c=x({fontSize:12,fontFamily:"Arial",align:.5,justify:0,fill:"#333"},o.label);c.fontSize=parseInt(c.fontSize,10);var u=e.labels.map((function(t){return x({},c,e,t)})),l=e.labels.map((function(t){return t.placements.map((function(n){return x({},c,e,t,n)}))})),h=function(t){for(var e,n,i,r,a,o,s,c=t.nodes,u=t.rect,l=t.chart,h=t.labelSettings,f=t.placementSettings,d=t.settings,p=t.renderer,g={},v=[],y=!0,m=!1,x=0;x<c.length;x++)if(Io(r=(n=c[x]).localBounds,u)){var b=au(n,l);e={node:n,texts:[],measurements:[],labelSettings:[],placementSettings:[]};for(var w=0;w<h.length;w++)ou(i="function"==typeof(o=h[w]).label?o.label(b,x):void 0)&&(s="function"==typeof d.direction?d.direction(b,x):d.direction||"up",m=m||"left"===s||"right"===s,g.fontFamily=o.fontFamily,g.fontSize="".concat(o.fontSize,"px"),g.text=i,a=p.measureText(g),e.measurements.push(a),e.texts.push(i),e.labelSettings.push(o),e.placementSettings.push(f[w]),e.direction=s,y=y&&a.width<=r.width-2*ru);v.push(e)}return{targetNodes:v,fitsHorizontally:y,hasHorizontalDirection:m}}({nodes:i,chart:n,renderer:a,settings:e,rect:r,labelSettings:u,placementSettings:l}),f=h.fitsHorizontally,d=h.hasHorizontalDirection,p=h.targetNodes,g=d?"y":"x",v=d?"height":"width";return p.sort((function(t,e){return t.node.localBounds[g]+t.node.localBounds[v]-(e.node.localBounds[g]+e.node.localBounds[v])})),s({chart:n,targetNodes:p,stngs:e,rect:r,fitsHorizontally:f,collectiveOrientation:d?"h":"v"})},slice:function(t){var e=t.settings,n=t.chart,i=t.nodes,r=t.rect,a=t.renderer,o=t.style,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ru,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Mu,u=x({fontSize:12,fontFamily:"Arial",fill:"#333",padding:4,position:"into"},o.label);u.fontSize=parseInt(u.fontSize,10);for(var l,h,f,d,p,g,v,y,m,b,w,_=e.labels.map((function(t){return x({},u,e,t)})),k=e.labels.map((function(t){return t.placements.map((function(n){return x({},u,e,t,n)}))})),M=[],S={insideLabelBounds:[]},R={},T=0,A=(i=Tu(i)).length;T<A;T++)for(var E=i[T],N=(w=n,{node:b=E,data:b.data,scale:w.scale,formatter:w.formatter,dataset:w.dataset}),C=0;C<_.length;C++){var z=_[C],O="function"==typeof z.label?z.label(N,T):"";if(O){var j="function"==typeof z.direction?z.direction(N,T):z.direction||"horizontal",P="function"==typeof z.linkData?z.linkData(N,T):void 0,D=(d=O,g=a,m=void 0,v=(p=z).fontFamily,y="".concat(p.fontSize,"px"),(m=g.measureText({text:d,fontFamily:v,fontSize:y})).minReqWidth=Math.min(m.width,g.measureText({text:"".concat(d[0],"…"),fontFamily:v,fontSize:y}).width),m),I=s({context:R,direction:j,lblStngs:z,measured:D,node:E,placementSettings:k[C],rect:r,store:S}),q=I.bounds,F=I.placement;if(q&&F){if("outside"===F.position&&"rotate"!==j){_u({context:R,node:E,bounds:q});var L={x:(f=q).x,y:f.y-f.height/2,width:f.width,height:f.height};if(!((l=L).x>=(h=r).x&&l.x+l.width<=h.x+h.width&&l.y>=h.y&&l.y+l.height<=h.y+h.height))continue}var B="function"==typeof F.fill?F.fill(N,T):F.fill,W=c(q,O,{fill:B,fontSize:z.fontSize,fontFamily:z.fontFamily,textMetrics:D});W&&(void 0!==P&&(W.data=P),M.push(W),q.line&&(q.line.stroke=B,M.push(q.line)))}}}return M},rows:function(t){var e=t.settings,n=t.chart,i=t.nodes,r=t.renderer,a=t.style,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:vl,s=x({fontSize:12,fontFamily:"Arial",fill:"#333",padding:4,align:.5,justify:.5},a.label);s.fontSize=parseInt(s.fontSize,10);for(var c,u,l=x({},s,e),h=e.labels.map((function(t){return x({},l,t)})),f={},d=[],p=0,g=i.length;p<g;p++){var v=i[p],y=(u=n,{node:c=v,data:c.data,scale:u.scale,formatter:u.formatter,dataset:u.dataset}),m=ml(v),b=m.type,w=m.bounds;if(w){var _=0,k=[],M=[],S="circle"===b?2*w.r*.9:w.height;_+=l.padding;var R=void 0;for(R=0;R<h.length;R++){var T=h[R],A="function"==typeof T.label?T.label(y,p):"";f.fontFamily=T.fontFamily,f.fontSize="".concat(T.fontSize,"px"),f.text=A;var E=r.measureText(f);if(S<(_+=E.height+T.padding))break;M.push(A),k.push(E)}var N=R,C=Math.max(0,S-_),z=void 0;for(z="circle"===b?w.cy-.9*w.r:w.y,z+=l.justify*C+l.padding,R=0;R<N;R++){var O=h[R],j=void 0;if("circle"===b){var P=Math.max(Math.abs(z-w.cy),Math.abs(z+k[R].height-w.cy)),D=Math.sqrt(w.r*w.r-P*P);j={x:w.cx-D+l.padding,y:z,width:2*D-2*l.padding,height:k[R].height}}else j={x:w.x+l.padding,y:z,width:w.width-2*l.padding,height:k[R].height};z+=k[R].height+l.padding;var I="function"==typeof O.fill?O.fill(y,p):O.fill,q="function"==typeof O.linkData?O.linkData(y,p):void 0,F=o(j,M[R],{fill:I,align:O.align,fontSize:O.fontSize,fontFamily:O.fontFamily,textMetrics:k[R]});if(F){if(F.text&&F.text!==Lu){var L=rl(F,r.measureText);if(Lu===L)continue;F.ellipsed=L}void 0!==q&&(F.data=q),d.push(F)}}}}return d}};var bl={require:["chart","renderer","settings"],defaultSettings:{settings:{},style:{label:"$label"}},render:function(){var t=this,e=this.settings.settings,n=[];return(e.sources||[]).forEach((function(e){e.strategy&&xl[e.strategy.type]&&e.component&&n.push.apply(n,I(function(t,e){var n=t.chart,i=t.source,r=t.rect,a=t.renderer,o=t.style;if(!n.component(i.component))return[];var s=n.findShapes(i.selector).filter((function(t){return t.key===i.component}));return e({chart:n,settings:i.strategy.settings,nodes:s,rect:{x:0,y:0,width:r.width,height:r.height},renderer:a,style:o})}({chart:t.chart,rect:t.rect,renderer:t.renderer,source:e,style:t.style},xl[e.strategy.type])))})),n}};var wl={layout:{size:1,direction:"ltr",scrollOffset:0},item:{show:!0,justify:.5,align:.5,label:{fontSize:"12px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:136,lineHeight:1.2},shape:{type:"square",size:12}},title:{show:!0,text:void 0,anchor:"start",fontSize:"16px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:156,lineHeight:1.25},navigation:{button:{class:void 0,content:void 0,tabIndex:void 0},disabled:!1}};function _l(t){var e,n,i,r,a,o=t.x,s=void 0===o?0:o,c=t.y,u=t.item,l=t.globalMetrics,h=t.createSymbol,f=t.direction,d=void 0===f?"ltr":f,p=u.label.displayObject,g=u.label.bounds,v=u.symbol.meta,y="rtl"===d,m={x:y?s+l.maxLabelBounds.width:s+l.maxSymbolSize+l.spacing,y:c,width:l.maxLabelBounds.width,height:Math.max(l.maxSymbolSize,l.maxLabelBounds.height)},b=(e={x:y?s+l.maxLabelBounds.width+l.spacing:s,y:c,width:l.maxSymbolSize,height:m.height},n=v.size,i={align:void 0===v.align?.5:v.align,justify:void 0===v.justify?.5:v.justify},r=Math.max(0,e.width-n),a=Math.max(0,e.height-n),{x:e.x+n/2+i.align*r,y:e.y+n/2+i.justify*a}),w=h(x({},v,b));return delete w.collider,p.anchor=y?"end":"start",function(t,e,n){var i=n.textMetrics;if(!(t.height<i.height)){var r=Math.max(0,t.width-i.width);e.baseline="text-before-edge";var a=Math.max(0,t.height-i.height);e.x=t.x+n.align*r,e.y=t.y+n.justify*a+.175*parseInt(e.fontSize,10)}}(m,p,{textMetrics:g,fontSize:parseInt(p.fontSize,10),align:0,justify:.5}),{item:{type:"container",data:u.label.displayObject.data,children:[w,p],collider:{type:"rect",x:s,y:c,width:l.maxItemBounds.width,height:l.maxItemBounds.height}},metrics:m}}function kl(t,e){var n=t.items.length,i=Math.ceil(n/e),r="horizontal"===t.layout.orientation?"width":"height",a="width"==r?"horizontal":"vertical";return t.globalMetrics.maxItemBounds[r]*i+(i-1)*t.layout.margin[a]}function Ml(t,e){var n,i,r,a,o=e.onScroll,s=void 0===o?function(){}:o,c=null,u=0,l={itemize:function(e){n=function(t,e){for(var n,i,r=t.resolved,a=t.dock,o=[],s=r.items.items,c=r.symbols.items,u=r.labels.items,l=0,h=0,f=0,d=0;d<s.length;d++)if(!1!==s[d].show){var p=void 0!==u[d].text?u[d].text:u[d].data.label||"";n=x({},u[d],{type:"text",fontSize:"".concat(parseInt(u[d].fontSize,10),"px"),text:p,title:p}),i={symbol:{meta:c[d]},label:{displayObject:n,bounds:e.textBounds(n)}},o.push(i),l=Math.max(c[d].size,l),h=Math.max(i.label.bounds.width,h),f=Math.max(i.label.bounds.height,f)}return{items:o,globalMetrics:{spacing:8,maxSymbolSize:l,maxItemBounds:{height:Math.max(l,f),width:l+8+h},maxLabelBounds:{width:h,height:f}},layout:{margin:{vertical:void 0!==r.layout.item.vertical?r.layout.item.vertical:4,horizontal:void 0!==r.layout.item.horizontal?r.layout.item.horizontal:4},mode:r.layout.item.mode,size:r.layout.item.size,orientation:"top"===a||"bottom"===a?"horizontal":"vertical",direction:r.layout.item.direction,scrollOffset:r.layout.item.scrollOffset}}}(e,t.renderer),c=isNaN(n.layout.scrollOffset)?c:n.layout.scrollOffset},getItemsToRender:function(e){r=e.viewRect,u=l.getContentOverflow(r);var o=l.extent();c=Math.max(0,Math.min(c,u)),a=x({},r);var s="horizontal"===l.orientation()?"x":"y";return a[s]-=c,a["x"==s?"width":"height"]=o,function(t,e,n){for(var i=t.viewRect,r=n.itemized,a=n.create,o=void 0===a?_l:a,s=n.parallels,c=n.createSymbol,u=r.layout.direction,l=r.globalMetrics,h=r.items,f="horizontal"===r.layout.orientation,d=0,p=[],g=l.maxItemBounds.height,v=l.maxItemBounds.width,y=r.layout.margin.vertical+g,m=r.layout.margin.horizontal+v,x=e.x,b=e.y,w=i.x-e.x,_=0;_<h.length;_++){var k=o({y:b,x:"rtl"===u?i.x+w+i.width-v-(x-e.x):x,item:h[_],globalMetrics:l,direction:u,createSymbol:c});if((f&&x>=i.x-v||!f&&b>=i.y-g)&&p.push(k.item),s<=++d?(d=0,f?(x+=m,b=e.y):(b+=y,x=e.x)):f?b+=y:x+=m,!f&&b>i.y+i.height)break;if(f&&x>i.x+i.width)break}return p}(e,a,{itemized:n,parallels:i,createSymbol:t.symbol})},parallelize:function(t,e){return i=function(t,e,n){var i=n.items.length,r="horizontal"===n.layout.orientation?"width":"height",a="width"==r?"horizontal":"vertical",o=n.globalMetrics.maxItemBounds[r]*i+(i-1)*n.layout.margin[a],s=Math.ceil(o/t);if(null!=e){var c="horizontal"===n.layout.orientation?"height":"width",u="width"==c?"horizontal":"vertical",l=n.layout.margin[u]||4,h=Math.floor((e+l)/(l+n.globalMetrics.maxItemBounds[c]));s=Math.min(s,h)}var f=isNaN(n.layout.size)?1:n.layout.size;return Math.max(1,Math.min(s,f))}(t,e,n)},hasContentOverflow:function(){var t="horizontal"===n.layout.orientation?"width":"height";return kl(n,i)>r[t]},getContentOverflow:function(t){var e=0<arguments.length&&void 0!==t?t:r,a="horizontal"===n.layout.orientation?"width":"height";return Math.max(0,kl(n,i)-e[a])},getNextSize:function(){var t="horizontal"===n.layout.orientation?"width":"height",e="width"==t?"horizontal":"vertical";return n.globalMetrics.maxItemBounds[t]+n.layout.margin[e]},getPrevSize:function(){var t="horizontal"===n.layout.orientation?"width":"height",e="width"==t?"horizontal":"vertical";return n.globalMetrics.maxItemBounds[t]+n.layout.margin[e]},hasNext:function(){return"horizontal"===l.orientation()?r.x+r.width<a.x+a.width:r.y+r.height<a.y+a.height},hasPrev:function(){return"horizontal"===l.orientation()?a.x<r.x:a.y<r.y},next:function(){l.scroll(-l.getNextSize())},prev:function(){l.scroll(l.getPrevSize())},scroll:function(t){var e=Math.max(0,Math.min(u,c-t));e!==c&&(c=e,s())},offset:function(){return c},orientation:function(){return n.layout.orientation},direction:function(){return n.layout.direction},extent:function(){return kl(n,i)},spread:function(){return e=i,r="horizontal"===(t=n).layout.orientation?"height":"width",a="width"==r?"horizontal":"vertical",t.globalMetrics.maxItemBounds[r]*e+(e-1)*t.layout.margin[a];var t,e,r,a}};return l}function Sl(t){return Object.keys(t).filter((function(e){return t[e]})).join(" ")}var Rl={up:"▲",right:"▶",down:"▼",left:"◀"};function Tl(t,e){var n=e.size,i=e.isActive,r=e.direction,a=e.nav,o={},s="",c=e.attrs;a&&a.button&&("function"==typeof a.button.class?o=a.button.class({direction:r}):a.button.class&&(o=a.button.class),"function"==typeof a.button.content&&(s=a.button.content(t,{direction:r})),void 0!==a.button.tabIndex&&(c.tabindex=a.button.tabIndex));var u={width:"".concat(n,"px"),minWidth:"".concat(n,"px"),height:"".concat(n,"px")};return Object.keys(o).length||(u.border="0",u.background="none"),(!i||a&&a.disabled)&&(c.disabled="disabled"),t("button",x({class:Sl(o),style:u},c),[s||t("span",{style:{pointerEvents:"none"}},[Rl[r]])])}function Al(t){var e,n={itemize:function(t){var n,i;i=(n=t).dock,e={layout:{orientation:"top"===i||"bottom"===i?"vertical":"horizontal"},navigation:n.navigation}},render:function(i){return function(t,e,n,i){var r=e.rect,a=e.itemRenderer;if(t&&t.renderArgs){t.size(r);var o=t.renderArgs[0],s="vertical"===n.layout.orientation,c="rtl"===a.direction(),u=a.hasNext(),l=a.hasPrev();if(l||u){var h=s?["right","left"]:["down","up"];c&&s&&h.reverse();var f=[o("div",{style:{position:"relative",display:"flex","flex-direction":s?"column":"row","justify-content":"center",height:"100%",pointerEvents:"auto"},dir:c&&!s?"rtl":"ltr"},[Tl(o,{size:32,isActive:u,direction:h[0],attrs:{"data-action":"next","data-component-key":i.settings.key},nav:n.navigation}),Tl(o,{size:32,isActive:l,direction:h[1],attrs:{"data-action":"prev","data-component-key":i.settings.key},nav:n.navigation})])];t.render(f)}else t.render([])}}(n.renderer,i,e,t)},extent:function(){return 32},spread:function(){return 64}};return n}function El(t){var e,n={itemize:function(n){e=function(t,e){var n=t.resolved;if(!1===n.title.item.show)return null;var i=x({},n.title.item,{type:"text"});if("rtl"===n.layout.item.direction&&(i.anchor&&"start"!==i.anchor?"end"===i.anchor&&(i.anchor="start"):i.anchor="end"),void 0===n.title.settings.text){var r=e.scale.data().fields;i.text=r&&r[0]?r[0].title():""}return{displayObject:i,bounds:e.renderer.textBounds(i)}}(n,t)},render:function(t){!function(t,e,n){var i=t.rect;if(e){var r=[];if(e.size(i),n){var a={start:0,end:i.width,middle:i.width/2};r.push(x({},n.displayObject,{x:a[n.displayObject.anchor]||0,y:0,baseline:"text-before-edge",title:n.displayObject.text}))}e.render(r)}}(t,n.renderer,e)},spread:function(){return e?e.bounds.height:0},extent:function(){return e?e.bounds.width:0}};return n}function Nl(t,e,n,i){var r,a,o,s=i.itemRenderer,c=i.navigationRenderer,u=i.titleRenderer,l=i.isPreliminary,h=void 0!==l&&l,f=0,d={x:e.spacing,y:e.spacing,width:t.width-2*e.spacing,height:t.height-2*e.spacing};if(r={x:d.x,y:d.y,width:d.width,height:u.spread()},"horizontal"===n){r={x:d.x,y:d.y,width:u.extent(),height:u.spread()};var p=d.width-r.width-(r.width?e.spacing:0),g=d.height;s.parallelize(p,h?void 0:g);var v=s.extent()>p?c.extent():0,y=s.spread(),m=v?c.spread():0;o={x:(a={x:r.x+r.width+(r.width?e.spacing:0),y:d.y+Math.max(0,(m-y)/2),width:d.width-v-r.width-(v?e.spacing:0)-(r.width?e.spacing:0),height:g}).x+a.width+(v?e.spacing:0),y:d.y,width:v,height:d.height},r.y=a.y,"rtl"===s.direction()&&(o.x=d.x,a.x=o.x+o.width+(o.width?e.spacing:0),r.x=a.x+a.width+(r.width?e.spacing:0)),f=Math.max(r.height,m,s.spread())}else{var b=d.height-r.height-(r.height?e.spacing:0),w=d.width;s.parallelize(b,h?void 0:w);var _=s.extent()>b?c.extent():0;o={x:d.x,y:d.y+d.height-_,width:d.width,height:_},a={x:d.x,y:r.y+r.height+(r.height?e.spacing:0),width:d.width,height:d.height-r.height-(r.height?e.spacing:0)-o.height-(o.height?e.spacing:0)},f=Math.max(u.extent(),_?c.spread():0,s.spread())}return a=x({},t,{x:t.x+a.x,y:t.y+a.y,width:a.width,height:a.height}),o.x+=t.x,o.y+=t.y,r.x+=t.x,r.y+=t.y,{title:x({},t,r),content:x({},t,a),navigation:x({},t,o),orientation:n,preferredSize:f}}function Cl(t){t.state.resolved=function(t){var e=t.scale.domain(),n={items:[]},i=t.settings.layout.dock;if("threshold-color"===t.scale.type){var r=t.scale.data().fields[0],a=function(t){return String(t)};t.settings.formatter?a=t.chart.formatter(t.settings.formatter):r&&(a=r.formatter());for(var o=0;o<e.length-1;o++){var s={value:e[o],label:"".concat(a(e[o])," - < ").concat(a(e[o+1]))};r&&(s.source={field:r.id()}),n.items.push(s)}"vertical"==("top"===i||"bottom"===i?"horizontal":"vertical")&&n.items.reverse()}else{var c=t.scale.labels?t.scale.labels():null;n.items=e.map((function(e,n){var i=t.scale.datum?x({},t.scale.datum(e)):{value:e};return i.value=e,t.scale.label?i.label=t.scale.label(e):c&&(i.label=c[n]),i}))}var u=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:x(!0,{},wl.title,t.style.title),settings:t.settings.settings.title}),l=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:wl.layout,settings:t.settings.settings.layout}),h=t.resolver.resolve({data:n,defaults:x(!0,{},wl.item.label,t.style.item.label),settings:(t.settings.settings.item||{}).label}),f=x(!0,{},(t.settings.settings.item||{}).shape);void 0===f.fill&&t.settings.scale&&(f.fill={scale:t.settings.scale});var d=t.resolver.resolve({data:n,defaults:x(!0,{},wl.item.shape,t.style.item.shape),settings:f}),p=t.resolver.resolve({data:n,defaults:x(!0,{},{show:wl.item.show}),settings:{show:(t.settings.settings.item||{}).show}});function g(t,n){var i=t.data.value,r=e[n+1];t.data.value=[i,r]}return"threshold-color"===t.scale.type&&("vertical"==("top"===i||"bottom"===i?"horizontal":"vertical")?(p.items.reverse().forEach(g),p.items.reverse()):p.items.forEach(g)),{title:u,labels:h,symbols:d,items:p,layout:l}}(t),t.titleRenderer.itemize({resolved:t.state.resolved,dock:t.settings.layout.dock||"center"}),t.itemRenderer.itemize({resolved:t.state.resolved,dock:t.settings.layout.dock||"center"}),t.navigationRenderer.itemize({resolved:t.state.resolved,dock:t.settings.layout.dock||"center",navigation:t.settings.settings.navigation}),t.state.display={spacing:8}}function zl(t){var e=t.rect,n=t.settings,i=t.state,r=t.itemRenderer,a=t.navigationRenderer,o=t.titleRenderer,s=n.layout.dock,c="top"===s||"bottom"===s?"horizontal":"vertical",u=Nl(e,i.display,c,{itemRenderer:r,navigationRenderer:a,titleRenderer:o});t.renderer.size(u.content);var l=r.getItemsToRender({viewRect:x({},u.content,{x:0,y:0})});return a.render({rect:u.navigation,itemRenderer:r}),o.render({rect:u.title}),t.state.views={layout:u},l}var Ol={require:["chart","settings","renderer","update","resolver","registries","symbol"],defaultSettings:{settings:{},style:{item:{label:"$label",shape:"$shape"},title:"$title"}},mounted:function(t){t&&t.parentNode&&(this.navigationRenderer.renderer.appendTo(t.parentNode),this.titleRenderer.renderer.appendTo(t.parentNode),t.parentNode.insertBefore(this.navigationRenderer.renderer.element(),t),t.parentNode.insertBefore(this.titleRenderer.renderer.element(),t)),this.navigationRenderer.render({rect:this.state.views.layout.navigation,itemRenderer:this.itemRenderer}),this.titleRenderer.render({rect:this.state.views.layout.title})},beforeUnmount:function(){this.navigationRenderer.renderer.clear(),this.titleRenderer.renderer.clear()},on:{panstart:function(){this.state.interaction.started||this.itemRenderer.getContentOverflow()&&(this.state.interaction.started=!0,this.state.interaction.delta=0)},panmove:function(t){if(this.state.interaction.started){var e="horizontal"===this.itemRenderer.orientation()?("rtl"===this.itemRenderer.direction()?-1:1)*t.deltaX:t.deltaY;this.itemRenderer.scroll(e-this.state.interaction.delta),this.state.interaction.delta=e}},panend:function(){this.state.interaction.started=!1},scroll:function(t){this.itemRenderer.scroll(-t)},next:function(){this.itemRenderer.next()},prev:function(){this.itemRenderer.prev()}},created:function(){var t=this;this.state={interaction:{}},this.onScroll=function(){var e=zl(t);t.update(e)},this.itemRenderer=Ml(this,{onScroll:this.onScroll}),this.navigationRenderer=Al(this),this.titleRenderer=El(this),this.navigationRenderer.renderer=this.registries.renderer("dom")(),this.titleRenderer.renderer=this.registries.renderer(this.settings.renderer)(),Cl(this)},preferredSize:function(t){return n=t,i=0,r=(e=this).settings.layout.dock||"center",a="top"===r||"bottom"===r?"horizontal":"vertical",o=e.state.display,s=Nl(n.inner,o,a,{itemRenderer:e.itemRenderer,navigationRenderer:e.navigationRenderer,titleRenderer:e.titleRenderer,isPreliminary:!0}),i+=o.spacing,i+=s.preferredSize,i+o.spacing;var e,n,i,r,a,o,s},beforeUpdate:function(){Cl(this)},render:function(){return zl(this)},beforeDestroy:function(){this.navigationRenderer.renderer.destroy(),this.titleRenderer.renderer.destroy()},additionalElements:function(){return[this.titleRenderer.renderer.element(),this.navigationRenderer.renderer.element()]},_DO_NOT_USE_getInfo:function(){return{offset:this.itemRenderer.offset()}}};function jl(t,e){var n=0,i=t.state.isVertical?"justify":"align",r=t.state.isVertical?"y":"x",a=t.state.isVertical?"height":"width",o=t.state.isVertical?"requiredHeight":"requiredWidth";n=t.state.rect[a]-t.state.legend.length()-t.state.title[o](),n*=Math.min(1,Math.max(t.stgns[i],0)),e[r]+=n}function Pl(t,e,n){var i=n[t];return"object"===w(i)?-1!==i.valid.indexOf(e)?e:i.default:n.default}function Dl(t,e){var n={x:0,y:0,width:0,height:0},i=t.stgns.padding;return n.x=i.left,n.y=i.top,n.width=e.width-i.left-i.right,n.height=e.height-i.top-i.bottom,n}function Il(t){var e,n,i,r,a,o,s="top"!==t.settings.layout.dock&&"bottom"!==t.settings.layout.dock,c=t.stgns.title,u=t.chart.scale(t.stgns.fill),l=t.chart.scale(t.stgns.major),h=(e=t,i=(n=l).domain(),r=i,!(a=e.stgns.tick.label)&&e.formatter?a=e.formatter:!a&&n.data().fields&&(a=n.data().fields[0].formatter()),"function"==typeof a&&(r=i.map(a).map(String)),i.map((function(t,i){var a=r[i];return{value:t,label:a,pos:n.norm(parseFloat(t,10)),textMetrics:e.renderer.measureText({text:a,fontSize:e.stgns.tick.fontSize,fontFamily:e.stgns.tick.fontFamily})}}))),f=Pl((o=t.settings).layout.dock,o.settings.tick.anchor,{left:{valid:["left","right"],default:"left"},right:{valid:["left","right"],default:"right"},top:{valid:["top","bottom"],default:"top"},bottom:{valid:["top","bottom"],default:"bottom"},default:"right"});if(void 0===c.text){var d=l.data().fields;c.text=d&&d[0]?d[0].title():""}var p,g=t.renderer.measureText({text:c.text,fontSize:c.fontSize,fontFamily:c.fontFamily}),v=t.renderer.textBounds({text:c.text,fontSize:c.fontSize,fontFamily:c.fontFamily,maxLines:c.maxLines,maxWidth:c.maxLengthPx,wordBreak:c.wordBreak,hyphens:c.hyphens,lineHeight:c.lineHeight}),y={isVertical:s,nodes:[],title:{anchor:Pl((p=t.settings).layout.dock,p.settings.title.anchor,{left:{valid:["top"],default:"top"},right:{valid:["top"],default:"top"},top:{valid:["left","right"],default:"left"},bottom:{valid:["left","right"],default:"left"},default:"top"}),textMetrics:g,textBounds:v,requiredWidth:function(){if(!c.show)return 0;var t=v.width,e=c.maxLengthPx;return s||(t+=c.padding,e+=c.padding),Math.min(t,e,y.rect.width)},requiredHeight:function(){if(!c.show)return 0;var t=v.height;return s&&(t+=c.padding),Math.min(t,y.rect.height)}},ticks:{values:h,anchor:f,length:Math.min(Math.max.apply(Math,I(h.map((function(t){return t.textMetrics.width})))),t.stgns.tick.maxLengthPx),requiredHeight:function(){return"top"===f?Math.max.apply(Math,I(y.ticks.values.map((function(t){return t.textMetrics.height}))))+t.stgns.tick.padding:0},height:Math.max.apply(Math,I(h.map((function(t){return t.textMetrics.height}))))},legend:{fillScale:u,majorScale:l,length:function(){var e=s?"height":"width",n=s?"requiredHeight":"requiredWidth",i=Math.min(y.rect[e],y.rect[e]*t.stgns.length)-y.title[n]();return Math.max(0,Math.min(i,t.stgns.maxLengthPx))}}};return y}var ql={require:["chart","settings","renderer"],defaultSettings:{layout:{displayOrder:0,dock:"right"},settings:{size:15,length:.5,maxLengthPx:250,align:.5,justify:0,padding:{left:5,right:5,top:5,bottom:5},tick:{label:null,fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,anchor:null,padding:5},title:{show:!0,text:void 0,fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,padding:5,maxLines:2,wordBreak:"none",lineHeight:1.2,hyphens:"auto",anchor:null}}},preferredSize:function(t){var e=this.state;e.rect=Dl(this,t.inner);var n=this.stgns.size,i=e.isVertical?this.stgns.padding.left+this.stgns.padding.right:this.stgns.padding.top+this.stgns.padding.bottom;n+=i;var r=Math.max(t.inner.width,t.inner.height);if("left"===e.ticks.anchor||"right"===e.ticks.anchor){if(e.ticks.values.reduce((function(t,e){return t+e.textMetrics.height}),0)>this.state.legend.length())return r;n+=e.ticks.length}else{if(e.ticks.length>this.state.legend.length())return r;n+=Math.max.apply(Math,I(e.ticks.values.map((function(t){return t.textMetrics.height}))))}return n+=this.stgns.tick.padding,this.stgns.title.show&&(n="left"===e.title.anchor||"right"===e.title.anchor?Math.max(e.title.textBounds.height+i,n):Math.max(n,e.title.requiredWidth()+i)),this.state.preferredSize=n},created:function(){this.stgns=this.settings.settings,this.state=Il(this)},beforeUpdate:function(t){this.stgns=t.settings.settings,this.state=Il(this)},beforeRender:function(t){if(this.state.nodes=[],this.state.rect=Dl(this,t.size),this.stgns.title.show){var e=function(t){var e=t.state,n=t.stgns,i="left"===e.ticks.anchor,r="top"===e.ticks.anchor,a=e.rect.x,o=e.rect.y,s="start";"left"===e.title.anchor?(a+=e.title.requiredWidth()-n.title.padding,o+=e.title.textMetrics.height,o+=r?e.rect.height-e.title.textBounds.height:0,s="end"):"right"===e.title.anchor?(a+=e.legend.length(),a+=n.title.padding,o+=e.title.textMetrics.height,o+=r?e.rect.height-e.title.textBounds.height:0):"top"===e.title.anchor&&(a+=i?e.rect.width:0,o+=e.title.textMetrics.height,s=i?"end":"start");var c={tag:"legend-title",type:"text",x:a,y:Math.min(o,e.rect.y+e.rect.height),text:n.title.text,fill:n.title.fill,fontSize:n.title.fontSize,fontFamily:n.title.fontFamily,maxWidth:n.title.maxLengthPx,maxLines:n.title.maxLines,wordBreak:n.title.wordBreak,hyphens:n.title.hyphens,lineHeight:n.title.lineHeight,anchor:s,title:n.title.text};return jl(t,c),c}(this);this.state.nodes.push(e)}var n,i,r,a,o,s,c,u,l,h,f=function(t,e){var n=t.state,i=t.stgns,r=n.rect,a=r.x,o=r.y,s=n.isVertical?i.size:n.legend.length(),c=n.isVertical?n.legend.length():i.size;"left"===n.ticks.anchor?a+=n.rect.width-i.size:"top"===n.ticks.anchor&&(o+=n.rect.height-i.size),"top"===n.title.anchor?o+=n.title.requiredHeight():"left"===n.title.anchor&&(a+=n.title.requiredWidth());var u={type:"rect",x:a,y:o,width:s,height:c,fill:{type:"gradient",stops:e,degree:n.isVertical?90:180}};return jl(t,u),u}(this,(i=(n=this).state.legend.fillScale,r=n.state.legend.majorScale,i.domain().map((function(t){return{type:"stop",color:i(t),offset:Math.min(1,Math.max(0,r.norm(t)))}})).sort((function(t,e){return t.offset-e.offset})))),d={id:"legend-seq-target",type:"container",children:[f,(o=f,s=(a=this).state,c=a.stgns,u="start",l={type:"rect",x:o.x,y:o.y,width:s.isVertical?0:o.width,height:s.isVertical?o.height:0,fill:"transparent"},h=s.ticks.values.map((function(t){var e=0,n=0,i=0,r="alphabetical";return s.isVertical?(n=o.y+o.height*t.pos,r=0===t.pos?"text-before-edge":"text-after-edge"):e=o.x+o.width*t.pos,"right"===s.ticks.anchor?(e=o.x+c.size+c.tick.padding,l.x=o.x+o.width):"left"===s.ticks.anchor?(e=o.x-c.tick.padding,u="end"):"top"===s.ticks.anchor?(n=o.y-c.tick.padding,i-=.25*t.textMetrics.height,u=0===t.pos?"start":"end"):"bottom"===s.ticks.anchor&&(n=o.y+o.height+c.tick.padding,i=.8*t.textMetrics.height,u=0===t.pos?"start":"end",l.y=o.y+o.height),{type:"text",x:e,y:n,dx:0,dy:i,text:t.label,fontSize:c.tick.fontSize,fontFamily:c.tick.fontFamily,fill:c.tick.fill,maxWidth:s.isVertical?c.tick.maxLengthPx:Math.min(c.tick.maxLengthPx,s.legend.length()/2),anchor:u,textBoundsFn:a.renderer.textBounds,title:t.label,baseline:r}})),{type:"container",id:"legend-seq-ticks",children:[].concat(I(h),[l])})]};this.state.nodes.push(d)},render:function(){return this.state.nodes}};var Fl={step:function(t){return new se(t,.5)},stepAfter:function(t){return new se(t,1)},stepBefore:function(t){return new se(t,0)},linear:qt,basis:function(t){return new Ut(t)},cardinal:Gt.tension(0),catmullRom:Zt,monotonex:function(t){return new ne(t)},monotoney:function(t){return new ie(t)},natural:function(t){return new ae(t)}},Ll={coordinates:{minor:.5,major:.5,layerId:0},connect:!1,orientation:"horizontal",layers:{curve:"linear",show:!0,sort:void 0,line:{stroke:"#ccc",strokeWidth:1,strokeLinejoin:"miter",strokeDasharray:void 0,opacity:1,show:!0,showMinor0:!0},area:{fill:"#ccc",opacity:.8,show:!0}}};function Bl(t,e,n){var i=e.generator,r=e.item,a=e.data,o=2<arguments.length&&void 0!==n?n:"",s={type:"path",d:i(t),opacity:r.opacity,stroke:r.stroke,strokeWidth:r.strokeWidth,strokeLinejoin:r.strokeLinejoin,fill:o||r.fill,data:a};return r.strokeDasharray&&(s.strokeDasharray=r.strokeDasharray),s}function Wl(t){var e=function(t){for(var e=t.data,n=t.stngs,i=t.rect,r=t.resolver,a=t.style,o=t.domain,s=i.width,c=i.height,u=r.resolve({data:e,defaults:Ll.coordinates,settings:n.coordinates||{},scaled:{major:"vertical"===n.orientation?c:s,minor:"vertical"===n.orientation?s:c}}),l=!n.connect&&2<o.length&&("function"==typeof n.coordinates.layerId||"object"===w(n.coordinates.layerId)),h={},f=0,d=0;d<u.items.length;d++){var p=u.items[d],g=p.layerId;if(l){var v=h[g]?h[g].items[h[g].items.length-1]:null,y=v?o.indexOf(v.data.major?v.data.major.value:v.data.value):null;v&&o.indexOf(p.data.major?p.data.major.value:p.data.value)-1!==y&&h[g].items.push({dummy:!0})}h[g]=h[g]||{order:f++,id:g,items:[],dataItems:[],consumableData:{}},h[g].dataItems.push(p.data),h[g].items.push(p)}var m=Object.keys(h).map((function(t){return h[t].consumableData=T({points:h[t].dataItems},h[t].dataItems[0]),h[t]})),b={items:m.map((function(t){return t.consumableData}))},_=n.layers||{};return{coordinates:u,metaLayers:m,layers:r.resolve({data:b,defaults:{curve:Ll.layers.curve,show:Ll.layers.show},settings:{curve:_.curve,show:_.show}}),lines:r.resolve({data:b,defaults:x({},Ll.layers.line,a.line),settings:_.line}),areas:r.resolve({data:b,defaults:x({},Ll.layers.area,a.area),settings:_.area})}}(t),n=e.metaLayers,i=e.coordinates,r=e.layers,a=e.lines,o=e.areas,s=[];return n.forEach((function(e,n){var c=r.items[n];if(!1!==c.show){c.datum=c.data,c.data=[],c.id=e.id;for(var u,l,h=[],f=[],d=0;d<e.items.length;d++){if(l=(u=e.items[d]).data,!u.dummy){if(isNaN(u.major))continue;t.missingMinor0&&(u.minor0=i.settings.minor.scale?i.settings.minor.scale(l.minor0?l.minor0.value:0):0),isNaN(u.minor)||h.push(u.minor),c.data.push(u.data)}f.push(u)}var p=h.sort((function(t,e){return t-e}))[Math.floor((h.length-1)/2)];s.push({layerObj:c,lineObj:a.items[n],areaObj:o.items[n],median:p,points:f,consumableData:e.consumableData})}})),s}var Hl={require:["chart","resolver"],defaultSettings:{style:{area:"$shape",line:"$shape-outline"}},created:function(){},render:function(t){var e=t.data,n=this.rect,i=n.width,r=n.height;this.stngs=this.settings.settings||{};var a,o,s,c,u,l,h,f,d=!this.stngs.coordinates||void 0===this.stngs.coordinates.minor0,p=Wl({data:e,stngs:this.stngs,rect:this.rect,resolver:this.resolver,style:this.style,missingMinor0:d,domain:this.stngs.coordinates&&this.stngs.coordinates.major&&this.stngs.coordinates.major.scale?this.chart.scale(this.stngs.coordinates.major.scale).domain():[]});if(this.stngs.layers&&this.stngs.layers.sort){var g=p.map((function(t){return{id:t.layerObj.id,data:t.layerObj.data}})).sort(this.stngs.layers.sort).map((function(t){return t.id}));p.sort((function(t,e){return g.indexOf(t.layerObj.id)-g.indexOf(e.layerObj.id)}))}else p.sort((function(t,e){return t.median-e.median}));return a=p,o={width:i,height:r,missingMinor0:d,stngs:this.stngs},s=o.width,c=o.height,u=o.missingMinor0,l=o.stngs,h=[],f=l.layers||{},a.forEach((function(t){var e,n,i=t.lineObj,r=t.layerObj,a=t.areaObj,o=t.points,d=Bt(),p=l.coordinates?l.coordinates.defined:null,g={size:c,p:"y"},v={size:s,p:"x"};if("vertical"===l.orientation){var y=x(!0,{},v);v=x(!0,{},g),g=x(!0,{},y)}d[v.p]((function(t){return t.major*v.size}))["".concat(g.p,"1")]((function(t){return t.minor*g.size}))["".concat(g.p,"0")]((function(t){return t.minor0*g.size})).curve(Fl["monotone"===r.curve?"monotone".concat(v.p):r.curve]),p?d.defined((function(t){return!t.dummy&&"number"==typeof t.minor&&!isNaN(t.minor)&&t.defined})):d.defined((function(t){return!t.dummy&&"number"==typeof t.minor&&!isNaN(t.minor)}));var m=l.connect?o.filter(d.defined()):o;e=d["line".concat(g.p.toUpperCase(),"1")](),n=d["line".concat(g.p.toUpperCase(),"0")](),f.area&&!1!==a.show&&h.push(Bl(m,{data:t.consumableData,item:a,generator:d})),i&&!1!==i.show&&(h.push(Bl(m,{data:t.consumableData,item:i,generator:e},"none")),!u&&f.area&&!1!==a.show&&!1!==i.showMinor0&&h.push(Bl(m,{data:t.consumableData,item:i,generator:n},"none")))})),h}};function Vl(t,e,n){var i,r,a=!(2<arguments.length&&void 0!==n)||n;r="object"===w(e.center)?(i=e.center.x,e.center.y):(i=e.clientX,e.clientY);var o=i-t.state.boundingRect.left,s=r-t.state.boundingRect.top;return{x:a?Math.max(0,Math.min(o,t.rect.width)):o,y:a?Math.max(0,Math.min(s,t.rect.height)):s}}function Yl(t,e){return{x:e.x+t.rect.x,y:e.y+t.rect.y}}function Ul(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y);return{x:n,y:i,width:Math.max(t.x,e.x)-n,height:Math.max(t.y,e.y)-i}}function $l(){return{start:{x:0,y:0},end:{x:0,y:0},active:!1}}var Xl={require:["chart","renderer"],defaultSettings:{layout:{displayOrder:99},settings:{brush:{components:[]}},style:{area:"$selection-area-target"}},on:{areaStart:function(t){this.start(t)},areaMove:function(t){this.move(t)},areaEnd:function(t){this.end(t)},areaCancel:function(){this.cancel()}},created:function(){this.state=$l()},preferredSize:function(){return 0},render:function(){},start:function(t){this.state.boundingRect=this.renderer.element().getBoundingClientRect();var e=Vl(this,t,!1);Fo({x:0,y:0,width:this.rect.width,height:this.rect.height},e)&&(this.state.brushConfig=this.settings.settings.brush.components.map((function(t){return{key:t.key,contexts:t.contexts,data:t.data,action:t.action||"set"}})),this.state.start=Vl(this,t),this.state.active=!0)},move:function(t){var e;this.state.active&&(this.state.end=Vl(this,t),function(t){if(t.state.active){var e=Yl(t,t.state.start),n=Yl(t,t.state.end),i=t.chart.shapesAt(Ul(e,n),{components:t.state.brushConfig});t.chart.brushFromShapes(i,{components:t.state.brushConfig})}}(this),(e=this).renderer.render([x({type:"rect"},Ul(e.state.start,e.state.end),e.style.area)]))},end:function(){this.state.active&&(this.state=$l(),this.renderer.render([]))},cancel:function(){var t,e;this.state.active&&(t=this.state,e=this.chart,t.brushConfig.forEach((function(t){Array.isArray(t.contexts)&&t.contexts.forEach((function(t){e.brush(t).end()}))})),this.state=$l(),this.renderer.render([]))}};function Gl(t,e,n){var i,r,a,o,s,c=n.renderer,u=n.style,l=n.props,h=n.h,f=(r=e,{tooltip:"function"==typeof(i=l).tooltipClass?i.tooltipClass({dock:r.dock}):i.tooltipClass,content:"function"==typeof i.contentClass?i.contentClass({dock:r.dock}):i.contentClass,arrow:"function"==typeof i.arrowClass?i.arrowClass({dock:r.dock}):i.arrowClass}),d=(a=h,o=t,s=u,l.content({h:a,style:s,data:o})),p=h("div",{dir:l.direction,class:Sl(x({"pic-tooltip":!0},f.tooltip)),style:x({position:"relative",display:"inline-block"},e.computedTooltipStyle)},h("div",{style:u.content,class:Sl(x({"pic-tooltip-content":!0},f.content))},d),h("div",{class:Sl(x({"pic-tooltip-arrow":!0},f.arrow)),style:x({},u.arrow,u["arrow-".concat(e.dock)],e.computedArrowStyle)}));return c.render(p),c.element().children[0]}function Kl(t){var e,n=t.defaultDuration,i=t.defaultDelay,r=null,a=null,o=!1,s=(e={pending:[],debounced:[],active:[],cancelled:[],rejected:[],fulfilled:[]},c.set=function(t){e[t].forEach((function(e){return e(t)}))},c.on=function(t,n){Array.isArray(t)?t.forEach((function(t){return e[t].push(n)})):e[t].push(n)},c.destroy=function(){Object.keys(e).forEach((function(t){e[t].length=0}))},c);function c(){}function u(){}function l(){a=r=null,o=!1,s.set("fulfilled")}return u.invoke=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:i;r&&(clearTimeout(r),s.set("debounced")),s.set("pending"),r=setTimeout((function(){t(),o=!0,r=null,s.set("active")}),c),0<e&&(a&&clearTimeout(a),a=setTimeout(l,e+Math.max(c,0)))},u.clear=function(){o?s.set("cancelled"):r&&(clearTimeout(r),s.set("rejected")),a&&clearTimeout(a),a=r=null,o=!1},u.on=function(t,e){s.on(t,e)},u.destroy=function(){u.clear(),s.destroy()},u}function Zl(t){var e=0<arguments.length&&void 0!==t?t:0;return{left:"translate(-100%,-50%) translateX(".concat(-e,"px)"),right:"translate(".concat(e,"px, -50%)"),top:"translate(-50%, -100%) translateY(".concat(-e,"px)"),bottom:"translate(-50%, ".concat(e,"px)")}}function Jl(t,e,n){var i=2<arguments.length&&void 0!==n?n:0;return{left:{x:-t-i,y:-e/2},right:{x:i,y:-e/2},top:{x:-t/2,y:-e-i},bottom:{x:-t/2,y:i}}}function Ql(t){return{left:{left:"100%",top:"calc(50% - ".concat(t,"px)"),borderWidth:"".concat(t,"px")},right:{left:"".concat(2*-t,"px"),top:"calc(50% - ".concat(t,"px)"),borderWidth:"".concat(t,"px")},top:{left:"calc(50% - ".concat(t,"px)"),top:"100%",borderWidth:"".concat(t,"px")},bottom:{left:"calc(50% - ".concat(t,"px)"),top:"".concat(2*-t,"px"),borderWidth:"".concat(t,"px")}}}function th(t){var e=t.options,n=t.pointer,i=t.width,r=t.height,a=t.dockOrder,o=t.x,s=t.y,c=n.targetBounds,u=Zl(e.offset),l=u[e.dock];if(l)return{computedTooltipStyle:{left:"".concat(o,"px"),top:"".concat(s,"px"),transform:l},computedArrowStyle:Ql(e.offset)[e.dock],dock:e.dock};for(var h,f,d,p,g,v,y,m,x,b,w,_={width:"target"===e.area?c.width:window.innerWidth,height:"target"===e.area?c.height:window.innerHeight},k=Jl(i,r,e.offset),M=[],S="target"===e.area?o:c.left+o,R="target"===e.area?s:c.top+s,T=0;T<a.length;T+=1){var A=a[T],E=(h={area:_,vx:S,vy:R,width:i,height:r,offset:k[A]},w=b=x=m=void 0,f=h.area,d=h.vx,p=h.vy,g=h.width,v=h.height,y=h.offset,m=d+y.x,x=p+y.y,b=m<0?-m:0,w=x<0?-x:0,{x:b+=m+g>f.width?-(m+g-f.width):0,y:w+=x+v>f.height?-(x+v-f.height):0}),N={left:"".concat(o,"px"),top:"".concat(s,"px"),transform:u[A]},C=Ql(e.offset)[A];0!==E.x&&(N.width="".concat(i-20-Math.abs(E.x),"px"),"top"!==A&&"bottom"!==A||(N.left="".concat(o+E.x,"px"),C.left="calc(50% ".concat(0<E.x?"-":"+"," ").concat(Math.abs(E.x),"px)")));var z={computedTooltipStyle:N,computedArrowStyle:C,dock:A,rect:{width:i,height:r}};if(0===E.x&&0===E.y)return z;z.offset=E,M.push(z)}return M.sort((function(t,e){return Math.abs(t.offset.x)-Math.abs(e.offset.x)})),M[0]}function eh(t,e,n){var i=t.key?n.component(t.key):n.componentsFromPoint({x:e.clientX,y:e.clientY})[0];if(!i)return{x:0,y:0,width:0,height:0,scaleRatio:{x:1,y:1}};var r=i.rect;return x({scaleRatio:r.scaleRatio},r.computedInner)}var nh,ih={bounds:function(t){var e=t.resources,n=t.nodes,i=t.pointer,r=t.width,a=t.height,o=t.options,s=i.targetBounds,c=e.getNodeBoundsRelativeToTarget(n[0]),u=c.x,l=c.y,h=c.width,f=c.height,d={left:{x:u,y:l+f/2},right:{x:u+h,y:l+f/2},top:{x:u+h/2,y:l},bottom:{x:u+h/2,y:l+f}},p=Zl(o.offset),g=p[o.dock];if(g)return{computedTooltipStyle:{left:"".concat(d[o.dock].x,"px"),top:"".concat(d[o.dock].y,"px"),transform:g},computedArrowStyle:Ql(o.offset)[o.dock],dock:o.dock};for(var v,y,m,x,b,w,_,k,M,S={width:"target"===o.area?s.width:window.innerWidth,height:"target"===o.area?s.height:window.innerHeight},R=Jl(r,a,o.offset),T=["top","left","right","bottom"],A=0;A<T.length;A+=1){var E=T[A],N="target"===o.area?d[E].x:s.left+d[E].x,C="target"===o.area?d[E].y:s.top+d[E].y;if(v=S,y=N,m=C,x=r,b=a,w=R[E],M=k=_=void 0,_=y+w.x,k=m+w.y,M=b,!(_<0||k<0||_+x>v.width||k+M>v.height))return{computedTooltipStyle:{left:"".concat(d[E].x,"px"),top:"".concat(d[E].y,"px"),transform:p[E]},computedArrowStyle:Ql(o.offset)[E],dock:E}}return{computedTooltipStyle:{left:"".concat(d.top.x,"px"),top:"".concat(d.top.y,"px"),transform:p.top},computedArrowStyle:Ql(o.offset).top,dock:"top"}},pointer:function(t){var e=t.options,n=t.pointer,i=t.width,r=t.height;return th({x:n.x,y:n.y,pointer:n,width:i,height:r,options:e,dockOrder:["top","left","right","bottom"]})},slice:function(t){var e=t.options,n=t.pointer,i=t.width,r=t.height,a=t.nodes,o=t.resources,s=a[0],c=n.dx,u=n.dy,l=o.getComponentBoundsFromNode(s),h=c+l.x+l.width/2,f=u+l.y+l.height/2,d=s.desc.slice,p=d.start,g=d.end,v=d.outerRadius,y=(p+g)/2-Math.PI/2,m=2*Math.PI,x=(y%m+m)%m,b=["top","left","right","bottom"];return"auto"===e.dock&&(b=x<=Math.PI/4||x>=7*Math.PI/4?["right","top","bottom","left"]:x<=3*Math.PI/4?["bottom","left","right","top"]:x<=5*Math.PI/4?["left","top","bottom","right"]:["top","left","right","bottom"]),th({x:h+v*l.scaleRatio.x*Math.cos(x),y:f+v*l.scaleRatio.y*Math.sin(x),pointer:n,width:i,height:r,options:e,dockOrder:b})}};function rh(t,e){var n=t.width,i=t.height,r=e.chart,a=e.state,o=e.props,s={resources:{formatter:r.formatter,scale:r.scale,component:r.component,getComponentBoundsFromNode:function(t){return eh(t,a.pointer,r)},getNodeBoundsRelativeToTarget:function(t){return e=t,n=a.pointer,i=eh(e,n,r),o=e.bounds,{x:i.x+n.dx+o.x,y:i.y+n.dy+o.y,width:o.width,height:o.height};var e,n,i,o}},nodes:a.activeNodes,pointer:a.pointer,width:n,height:i},c=w(o.placement);if("object"===c&&"function"==typeof o.placement.fn)return o.placement.fn(s);var u={type:"pointer",offset:8,dock:"auto",area:"viewport"};"function"===c&&(u=x(u,o.placement(s))),"object"===c&&ih[o.placement.type]?u=x(u,o.placement):"string"===c&&ih[o.placement]&&(u=x(u,{type:o.placement})),s.options=u;var l=ih[u.type](s),h=s.resources.getComponentBoundsFromNode(s.nodes[0]),f=h.x,d=h.y,p=h.width,g=h.height;return p+=f+=s.pointer.dx,g+=d+=s.pointer.dy,l.computedTooltipStyle.left="".concat(Math.min(Math.max(0,f,parseFloat(l.computedTooltipStyle.left)),p),"px"),l.computedTooltipStyle.top="".concat(Math.min(Math.max(0,d,parseFloat(l.computedTooltipStyle.top)),g),"px"),l}function ah(){nh=null}var oh={require:["chart","renderer"],defaultSettings:{settings:{duration:8e3,delay:500,filter:function(t){return t.filter((function(t){return t.data&&void 0!==t.data.value}))},extract:function(t){return t.node.data.value},content:function(t){var e=t.h;return t.data.map((function(t){return e("div",{},t)}))},isEqual:function(t,e){return t.length&&t.length===e.length&&t.every((function(t,n){return e[n]&&JSON.stringify(t.data)===JSON.stringify(e[n].data)}))},placement:{type:"pointer",dock:"auto",offset:8,area:"viewport"},tooltipClass:{},contentClass:{},arrowClass:{},direction:"ltr",appendTo:void 0,beforeShow:void 0,afterShow:void 0,beforeHide:void 0,onHide:void 0,afterHide:void 0},style:{tooltip:{},content:{backgroundColor:"$gray-25",color:"$font-color--inverted",fontFamily:"$font-family",fontSize:"$font-size",lineHeight:"$line-height",borderRadius:"4px",padding:"8px",opacity:.9},arrow:{position:"absolute",width:"0px",height:"0px",borderStyle:"solid",color:"$gray-25",opacity:.9},"arrow-bottom":{borderTopColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent"},"arrow-top":{borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent"},"arrow-right":{borderTopColor:"transparent",borderLeftColor:"transparent",borderBottomColor:"transparent"},"arrow-left":{borderTopColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent"}}},renderer:"dom",on:{hide:function(){this.hide()},show:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};this.show(t,n)},prevent:function(t){this.prevent(t)}},hide:function(){this.dispatcher.clear(),this.state.activeNodes=[],this.state.pointer={}},show:function(t,e){var n,i=this,r=1<arguments.length&&void 0!==e?e:{},a=r.nodes,o=r.duration,s=r.delay;this.state.prevent||(this.state.pointer=function(t,e){var n=e.chart,i=e.state,r=0,a=0;t.center?(r+=t.center.x,a+=t.center.y):(r+=t.clientX,a+=t.clientY);var o=n.element.getBoundingClientRect(),s=i.targetElement.getBoundingClientRect(),c=r,u=a,l=o.left-s.left,h=o.top-s.top,f=r-o.left,d=a-o.top;return{x:r-=s.left,y:a-=s.top,dx:l,dy:h,cx:f,cy:d,clientX:c,clientY:u,targetBounds:s,chartBounds:o}}(t,this),n=Array.isArray(a)?this.props.filter(a):this.props.filter(this.chart.shapesAt({x:this.state.pointer.cx,y:this.state.pointer.cy})),this.props.isEqual(this.state.activeNodes,n)||(this.dispatcher.clear(),this.state.activeNodes=n,this.state.activeNodes.length&&this.dispatcher.invoke((function(){return i.invokeRenderer(i.state.activeNodes)}),o,s)))},prevent:function(t){this.state.prevent=!!t},init:function(t){var e=this;this.state={activeNodes:[],pointer:{},targetElement:null,prevent:!1},this.props=t.settings,this.dispatcher=Kl({defaultDuration:this.props.duration,defaultDelay:this.props.delay});var n=this.dispatcher.clear;this.dispatcher.on("pending",(function(){var t;t=n,nh&&nh!==t&&nh(),nh=n,"function"==typeof e.props.beforeShow&&e.props.beforeShow.call(void 0,{resources:{formatter:e.chart.formatter,scale:e.chart.scale}})})),this.dispatcher.on(["cancelled","fulfilled"],(function(){var t={resources:{formatter:e.chart.formatter,scale:e.chart.scale}};"function"==typeof e.props.beforeHide&&e.props.beforeHide.call(void 0,x({element:e.state.tooltipElm},t)),"function"==typeof e.props.onHide?e.props.onHide.call(void 0,x({element:e.state.tooltipElm},t)):e.renderer.clear([]),"function"==typeof e.props.afterHide&&e.props.afterHide.call(void 0,t),nh===n&&(nh=null),e.state.tooltipElm=void 0})),this.dispatcher.on("active",(function(){"function"==typeof e.props.afterShow&&e.props.afterShow.call(void 0,{element:e.state.tooltipElm,resources:{formatter:e.chart.formatter,scale:e.chart.scale}})}))},created:function(){this.init(this.settings)},beforeUpdate:function(t){var e=t.settings;this.dispatcher&&(this.dispatcher.destroy(),ah()),this.init(e)},render:function(t){return this.h=t,[]},beforeDestroy:function(){this.dispatcher.destroy(),ah()},appendTo:function(){if(this.props.appendTo){this.state.targetElement="function"==typeof this.props.appendTo?this.props.appendTo({resources:{formatter:this.chart.formatter,scale:this.chart.scale}}):this.props.appendTo;var t=this.state.targetElement.getBoundingClientRect(),e=t.width,n=t.height;this.renderer.destroy(),this.renderer.size({width:e,height:n}),this.renderer.appendTo(this.state.targetElement)}else this.state.targetElement=this.renderer.element()},mounted:function(){this.appendTo()},updated:function(){this.appendTo()},invokeRenderer:function(t){var e,n,i,r,a,o,s,c,u=(e=t,i=(n=this).chart,r=n.scale,a=n.props,o=n.h,s={resources:{dataset:i.dataset,scale:i.scale,formatter:i.formatter},scale:r,h:o},c=[],e.forEach((function(t){if("function"==typeof a.extract){var e=x({node:t},s);c.push(a.extract(e))}})),c),l=rh(Gl(u,{style:{left:"0px",top:"0px",visibility:"hidden"}},this).getBoundingClientRect(),this);this.state.tooltipElm=Gl(u,l,this)}};var sh={require:["renderer","chart"],defaultSettings:{settings:{target:"",selector:"*",fill:"rgba(0, 255, 0, 0.1)",stroke:"lime",opacity:1,useOuterRect:!1}},on:{update:function(){this.draw()}},draw:function(){var t=this,e=this.chart.findShapes(this.props.selector).filter((function(e){return e.key===t.props.target})).filter((function(t){return t.collider})).map((function(t){return t.collider}));e.forEach((function(e){e.fill=t.props.fill,e.stroke=t.props.stroke,e.opacity=t.props.opacity,e.collider={type:null}})),this.renderer.render(e)},created:function(){this.props=this.settings.settings},resize:function(t){var e=t.outer,n=t.inner;return this.props.useOuterRect?e:n},render:function(){},mounted:function(){this.draw()},updated:function(){this.props=this.settings.settings,this.draw()}},ch=2*Math.PI;function uh(t,e){return{x:.5*(t.x+e.x),y:.5*(t.y+e.y)}}function lh(t,e,n,i,r){var a=1-t;return Math.pow(a,3)*e+3*Math.pow(a,2)*t*n+3*a*Math.pow(t,2)*i+Math.pow(t,3)*r}function hh(t,e,n,i,r,a){var o,s,c,u,l=4<arguments.length&&void 0!==r?r:[],h=5<arguments.length&&void 0!==a?a:8;if(h<1||(o=t,s=e,c=n,u=i,Math.abs(o.x+c.x-(s.x+s.x))+Math.abs(o.y+c.y-(s.y+s.y))+Math.abs(s.x+u.x-(c.x+c.x))+Math.abs(s.y+u.y-(c.y+c.y))<=10))return l[l.length-1]!==t&&l.push(t),l.push(i),l;var f=uh(t,e),d=uh(e,n),p=uh(n,i),g={x:lh(.5,t.x,e.x,n.x,i.x),y:lh(.5,t.y,e.y,n.y,i.y)},v=uh(f,d),y=uh(d,p);return hh(t,f,v,g,l,h-1),hh(g,y,p,i,l,h-1),l}function fh(t,e,n){var i,r,a,o=(r=e,a=n,{cp1:{x:(i=t).x+2/3*(r.x-i.x),y:i.y+2/3*(r.y-i.y)},cp2:{x:a.x+2/3*(r.x-a.x),y:a.y+2/3*(r.y-a.y)}});return hh(t,o.cp1,o.cp2,n)}var dh=1e-12;function ph(t,e,n){var i,r,a,o,s=[],c=!!t[4],u=!!t[5],l=t[3],h=t[6],f=t[7],d=t[1],p=t[2];if("a"===t[0]&&(h+=e,f+=n),e===f&&n===f)return s;if(!d||!p)return s.push({x:h,y:f}),s;var g=function(t,e,n,i,r,a,o,s,c){var u,l,h,f,d,p,g=eo(n%360),v=Math.cos(g),y=Math.sin(g),m=(s-a)/2,x=(c-o)/2,b=v*m+y*x,w=v*x-y*m;t=Math.abs(t),e=Math.abs(e),1<(p=Math.pow(b,2)/Math.pow(t,2)+Math.pow(w,2)/Math.pow(e,2))&&(t*=p=Math.sqrt(p),e*=p);var _=t*e,k=t*w,M=e*b,S=Math.pow(k,2)+Math.pow(M,2),R=Math.pow(_,2)-S,T=Math.sqrt(Math.max(R/S,0));i===r&&(T=-T);var A=T*(k/e),E=T*(-M/t);f=v*A-y*E+(s+a)/2,d=y*A+v*E+(c+o)/2;var N=(b-A)/t,C=(w-E)/e,z=(-b-A)/t,O=(-w-E)/e;return u=Math.atan2(C,N),u+=u<0?ch:0,l=Math.atan2(O,z),h=(l+=l<0?ch:0)-u,!r&&u<l?h-=ch:r&&l<u&&(h+=ch),{startAngle:u,sweepAngle:h%=ch,cx:f,cy:d,rx:t,ry:e}}(d,p,l,c,u,h,f,e,n);i=g.cx,r=g.cy,d=g.rx,p=g.ry,a=g.sweepAngle,o=g.startAngle;for(var v=Math.abs(a*Math.sqrt((Math.pow(d,2)+Math.pow(p,2))/2)),y=Math.ceil(v/10),m=a/y,x=1;x<=y;x++){var b=(o+m*x)%ch,w=Math.cos(b),_=Math.sin(b);s.push({x:i+w*d+-_*w,y:r+_*p+w*_})}return s}function gh(t){for(var e=p(t),n=[],i=[],r=0,a=0,o=null,s=null,c=null,u=null,l=0;l<e.length;++l){var h=e[l],f=h[0];switch("S"!==f&&"s"!==f&&"C"!==f&&"c"!==f&&(s=o=null),"T"!==f&&"t"!==f&&"Q"!==f&&"q"!==f&&(u=c=null),f){case"m":i.length&&n.push(i.splice(0));case"l":r+=h[1],a+=h[2],i.push({x:r,y:a});break;case"M":i.length&&n.push(i.splice(0));case"L":r=h[1],a=h[2],i.push({x:r,y:a});break;case"H":r=h[1],i.push({x:r,y:a});break;case"h":r+=h[1],i.push({x:r,y:a});break;case"V":a=h[1],i.push({x:r,y:a});break;case"v":a+=h[1],i.push({x:r,y:a});break;case"a":i.push.apply(i,I(ph(h,r,a))),r+=h[6],a+=h[7];break;case"A":i.push.apply(i,I(ph(h,r,a))),r=h[6],a=h[7];break;case"c":i.push.apply(i,I(hh({x:r,y:a},{x:h[1]+r,y:h[2]+a},{x:h[3]+r,y:h[4]+a},{x:h[5]+r,y:h[6]+a}))),o=h[3]+r,s=h[4]+a,r+=h[5],a+=h[6];break;case"C":i.push.apply(i,I(hh({x:r,y:a},{x:h[1],y:h[2]},{x:h[3],y:h[4]},{x:h[5],y:h[6]}))),o=h[3],s=h[4],r=h[5],a=h[6];break;case"s":null!==o&&null!==o||(o=r,s=a),i.push.apply(i,I(hh({x:r,y:a},{x:2*r-o,y:2*a-s},{x:h[1]+r,y:h[2]+a},{x:h[3]+r,y:h[4]+a}))),o=h[1]+r,s=h[2]+a,r+=h[3],a+=h[4];break;case"S":null!==o&&null!==o||(o=r,s=a),i.push.apply(i,I(hh({x:r,y:a},{x:2*r-o,y:2*a-s},{x:h[1],y:h[2]},{x:h[3],y:h[4]}))),o=h[1],s=h[2],r=h[3],a=h[4];break;case"Q":i.push.apply(i,I(fh({x:r,y:a},{x:h[1],y:h[2]},{x:h[3],y:h[4]}))),c=h[1],u=h[2],r=h[3],a=h[4];break;case"q":i.push.apply(i,I(fh({x:r,y:a},{x:h[1]+r,y:h[2]+a},{x:h[3]+r,y:h[4]+a}))),c=h[1]+r,u=h[2]+a,r+=h[3],a+=h[4];break;case"T":null!==c&&null!==c||(c=r,u=a),c=2*r-c,u=2*a-u,i.push.apply(i,I(fh({x:r,y:a},{x:c,y:u},{x:h[1],y:h[2]}))),r=h[1],a=h[2];break;case"t":null!==c&&null!==c||(c=r,u=a),c=2*r-c,u=2*a-u,i.push.apply(i,I(fh({x:r,y:a},{x:c,y:u},{x:h[1]+r,y:h[2]+a}))),r+=h[1],a+=h[2];break;case"z":case"Z":i.length&&i.push({x:i[0].x,y:i[0].y})}}return function(t){for(var e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];Math.abs(n.x-i.x)<dh&&Math.abs(n.y-i.y)<dh&&(t.splice(e,1),e--)}}(i),n.push(i.splice(0)),n}var vh={require:["renderer","chart"],defaultSettings:{settings:{target:"",fill:"transparent",stroke:"lime",opacity:1,radius:2,useOuterRect:!1}},on:{update:function(){this.draw()}},draw:function(){var t=this,e=this.chart.findShapes("path").filter((function(e){return e.key===t.props.target})),n=[];e.forEach((function(e){gh(e.attrs.d).forEach((function(e){e.forEach((function(e){n.push({type:"circle",cx:e.x,cy:e.y,r:t.props.radius,fill:t.props.fill,stroke:t.props.stroke,opacity:t.props.opacity,collider:{type:null}})}))}))})),this.renderer.render(n)},created:function(){this.props=this.settings.settings},resize:function(t){var e=t.outer,n=t.inner;return this.props.useOuterRect?e:n},render:function(){},mounted:function(){this.draw()},updated:function(){this.props=this.settings.settings,this.draw()}};var yh=[function(t){t.component("box",As),t.component("box-marker",As)},function(t){t.component("point",Ps),t.component("point-marker",Ps)},function(t){t.component("pie",qs)},function(t){t.component("grid-line",Ys)},function(t){t.component("ref-line",Ks)},function(t){t.component("axis",xc)},function(t){t.component("text",wc)},function(t){t.component("scrollbar",Mc)},function(t){t.component("brush-range",Lc),t.component("brush-area-dir",Vc)},function(t){t.component("range",Xc)},function(t){t.component("brush-lasso",eu)},function(t){t.component("labels",bl)},function(t){t.component("legend-cat",Ol)},function(t){t.component("legend-seq",ql)},function(t){t.component("line",Hl)},function(t){t.component("brush-area",Xl)},function(t){t.component("tooltip",oh)},function(t){t.component("debug-collider",sh)},function(t){t.component("debug-path-to-points",vh)}],mh=function(){function t(e){_(this,t),this._parent=null,this._children=[],this._ancestors=null,this.type=e,this.data=null}return M(t,[{key:"detach",value:function(){return this._parent&&this._parent.removeChild(this),this}},{key:"equals",value:function(t){var e=this.children,n=t.children;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].equals(n[i]))return!1;return!0}},{key:"toJSON",value:function(){return{type:this.type,children:this.children.map((function(t){return t.toJSON()}))}}},{key:"parent",get:function(){return this._parent}},{key:"isBranch",get:function(){return this._children&&this._children.length}},{key:"children",get:function(){return this._children}},{key:"ancestors",get:function(){var t;this._ancestors||(this._ancestors=[],this.parent&&(t=this._ancestors).push.apply(t,[this.parent].concat(I(this.parent.ancestors))));return this._ancestors}},{key:"descendants",get:function(){var t,e,n=[],i=this.children.length;for(t=0;t<i;t++)e=this.children[t],n.push(e),e.children.length&&n.push.apply(n,I(e.descendants));return n}}]),t}(),xh=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.x,i=void 0===n?0:n,r=e.y,a=void 0===r?0:r,o=e.width,s=void 0===o?0:o,c=e.height,u=void 0===c?0:c,l=e.minWidth,h=void 0===l?0:l,f=e.minHeight,d=void 0===f?0:f;_(this,t),this.set({x:i,y:a,width:s,height:u,minWidth:h,minHeight:d})}return M(t,[{key:"set",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.x,i=void 0===n?0:n,r=e.y,a=void 0===r?0:r,o=e.width,s=void 0===o?0:o,c=e.height,u=void 0===c?0:c,l=e.minWidth,h=void 0===l?0:l,f=e.minHeight,d=void 0===f?0:f;this.type="rect",0<=s?(this.x=i,this.width=Math.max(s,h)):(this.x=i+Math.min(s,-h),this.width=-Math.min(s,-h)),0<=u?(this.y=a,this.height=Math.max(u,d)):(this.y=a+Math.min(u,-d),this.height=-Math.min(u,-d))}},{key:"containsPoint",value:function(t){return Fo(this,t)}},{key:"intersectsLine",value:function(t){return Lo(this,G(t))}},{key:"intersectsRect",value:function(t){return Io(this,X(t))}},{key:"intersectsCircle",value:function(t){return Co(t,this)}},{key:"intersectsPolygon",value:function(t){return Do(t,this)}},{key:"intersectsGeoPolygon",value:function(t){return Xo(t,this)}},{key:"points",value:function(){return[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}]}}]),t}();var bh=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.cx,i=void 0===n?0:n,r=e.cy,a=void 0===r?0:r,o=e.r,s=void 0===o?0:o,c=e.minRadius,u=void 0===c?0:c;_(this,t),this.set({cx:i,cy:a,r:s,minRadius:u})}return M(t,[{key:"set",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.cx,i=void 0===n?0:n,r=e.cy,a=void 0===r?0:r,o=e.r,s=void 0===o?0:o,c=e.minRadius,u=void 0===c?0:c;this.type="circle",this.cx=i,this.cy=a,this.r=Math.max(s,u),this.vector={x:this.cx,y:this.cy}}},{key:"containsPoint",value:function(t){return No(this,t)}},{key:"intersectsLine",value:function(t){return zo(this,G(t))}},{key:"intersectsRect",value:function(t){return Co(this,X(t))}},{key:"intersectsCircle",value:function(t){return function(t,e){if(Ro(t)||Ro(e))return!1;var n=t.cx-e.cx,i=t.cy-e.cy;return Math.pow(n,2)+Math.pow(i,2)<=Math.pow(t.r+e.r,2)}(this,t)}},{key:"intersectsPolygon",value:function(t){return Oo(this,t)}},{key:"intersectsGeoPolygon",value:function(t){return Yo(this,t)}},{key:"points",value:function(){return[{x:this.cx,y:this.cy}]}}]),t}();var wh=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.x1,i=void 0===n?0:n,r=e.y1,a=void 0===r?0:r,o=e.x2,s=void 0===o?0:o,c=e.y2,u=void 0===c?0:c,l=e.tolerance,h=void 0===l?0:l;_(this,t),this.set({x1:i,y1:a,x2:s,y2:u,tolerance:h})}return M(t,[{key:"set",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.x1,i=void 0===n?0:n,r=e.y1,a=void 0===r?0:r,o=e.x2,s=void 0===o?0:o,c=e.y2,u=void 0===c?0:c,l=e.tolerance,h=void 0===l?0:l;this.type="line",this.x1=i,this.y1=a,this.x2=s,this.y2=u,this.tolerance=Math.max(0,Math.round(h)),this.vectors=this.points(),this.zeroSize=i===s&&a===u}},{key:"containsPoint",value:function(t){return 0<this.tolerance?zo({cx:t.x,cy:t.y,r:this.tolerance},this):Wo(this,t)}},{key:"intersectsLine",value:function(t){return Bo(this,G(t))}},{key:"intersectsRect",value:function(t){return Lo(X(t),this)}},{key:"intersectsCircle",value:function(t){return zo(t,this)}},{key:"intersectsPolygon",value:function(t){return Po(t,this)}},{key:"intersectsGeoPolygon",value:function(t){return $o(t,this)}},{key:"points",value:function(){return[{x:this.x1,y:this.y1},{x:this.x2,y:this.y2}]}}]),t}();var _h=function(){function t(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).vertices,n=void 0===e?[]:e;_(this,t),this.set({vertices:n})}return M(t,[{key:"set",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).vertices,n=void 0===e?[]:e;if(this.type="polygon",this.vertices=n.slice(),this.edges=[],function(t){for(var e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];n.x===i.x&&n.y===i.y&&(t.splice(e,1),e--)}}(this.vertices),!(this.vertices.length<=2)){var i,r,a;i=this.vertices,r=i[0],a=i[i.length-1],r.x===a.x&&r.y===a.y||i.push(r),this.xMin=NaN,this.yMin=NaN,this.xMax=NaN,this.yMax=NaN;for(var o=0;o<this.vertices.length;o++)o<this.vertices.length-1&&this.edges.push([this.vertices[o],this.vertices[o+1]]),this.xMin=isNaN(this.xMin)?this.vertices[o].x:Math.min(this.xMin,this.vertices[o].x),this.xMax=isNaN(this.xMax)?this.vertices[o].x:Math.max(this.xMax,this.vertices[o].x),this.yMin=isNaN(this.yMin)?this.vertices[o].y:Math.min(this.yMin,this.vertices[o].y),this.yMax=isNaN(this.yMax)?this.vertices[o].y:Math.max(this.yMax,this.vertices[o].y);this._bounds=null,this._boundingRect=null}}},{key:"containsPoint",value:function(t){return jo(this,t)}},{key:"intersectsCircle",value:function(t){return Oo(t,this)}},{key:"intersectsLine",value:function(t){return Po(this,G(t))}},{key:"intersectsRect",value:function(t){return Do(this,X(t))}},{key:"intersectsPolygon",value:function(t){return Ho(this,t)}},{key:"intersectsGeoPolygon",value:function(t){return Vo(t,this)}},{key:"points",value:function(){return this.vertices}},{key:"bounds",value:function(){return this._bounds||(this._bounds=[{x:this.xMin,y:this.yMin},{x:this.xMax,y:this.yMin},{x:this.xMax,y:this.yMax},{x:this.xMin,y:this.yMax}]),this._bounds}},{key:"boundingRect",value:function(){return this._boundingRect||(this._boundingRect={x:this.xMin,y:this.yMin,width:this.xMax-this.xMin,height:this.yMax-this.yMin}),this._boundingRect}}]),t}();function kh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(_h,e)}function Mh(t){for(var e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];n.x===i.x&&n.y===i.y&&(t.splice(e,1),e--)}}var Sh=function(){function t(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).vertices,n=void 0===e?[[]]:e;_(this,t),this.set({vertices:n})}return M(t,[{key:"set",value:function(t){var e,n,i,r=(0<arguments.length&&void 0!==t?t:{}).vertices,a=void 0===r?[]:r;this.type="geopolygon",this.vertices=a.slice(),this.numPolygons=this.vertices.length,this.polygons=[],this.xMin=NaN,this.yMin=NaN,this.xMax=NaN,this.yMax=NaN;for(var o=0;o<this.numPolygons;o++)Mh(this.vertices[o]),2<this.vertices[o].length&&(e=this.vertices[o],0,n=e[0],i=e[e.length-1],n.x===i.x&&n.y===i.y||e.push(n)),this.polygons[o]=kh({vertices:this.vertices[o]}),this.xMin=isNaN(this.xMin)?this.polygons[o].xMin:Math.min(this.xMin,this.polygons[o].xMin),this.xMax=isNaN(this.xMax)?this.polygons[o].xMax:Math.max(this.xMax,this.polygons[o].xMax),this.yMin=isNaN(this.yMin)?this.polygons[o].yMin:Math.min(this.yMin,this.polygons[o].yMin),this.yMax=isNaN(this.yMax)?this.polygons[o].yMax:Math.max(this.yMax,this.polygons[o].yMax);this._bounds=null,this._boundingRect=null}},{key:"containsPoint",value:function(t){return Uo(this,t)}},{key:"intersectsCircle",value:function(t){return Yo(t,this)}},{key:"intersectsLine",value:function(t){return $o(this,G(t))}},{key:"intersectsRect",value:function(t){return Xo(this,X(t))}},{key:"intersectsPolygon",value:function(t){return Vo(this,t)}},{key:"intersectsGeoPolygon",value:function(t){return n=t,i=(e=this).boundingRect(),r=n.boundingRect(),!!Io(i,r)&&(qo(r,i)?Eo(n,e):Eo(e,n));var e,n,i,r}},{key:"points",value:function(){return this.vertices}},{key:"bounds",value:function(){return this._bounds||(this._bounds=[{x:this.xMin,y:this.yMin},{x:this.xMax,y:this.yMin},{x:this.xMax,y:this.yMax},{x:this.xMin,y:this.yMax}]),this._bounds}},{key:"boundingRect",value:function(){return this._boundingRect||(this._boundingRect={x:this.xMin,y:this.yMin,width:this.xMax-this.xMin,height:this.yMax-this.yMin}),this._boundingRect}}]),t}();function Rh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Sh,e)}var Th=function(){function t(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).points,n=void 0===e?[]:e;_(this,t),this.set({points:n})}return M(t,[{key:"set",value:function(t){var e,n,i=(0<arguments.length&&void 0!==t?t:{}).points,r=void 0===i?[]:i;if(this.type="polyline",this.segments=[],this._points=r.slice(),1<this._points.length)for(var a=0,o=this._points.length-1;a<o;a++)e=this._points[a],n=this._points[a+1],e.x===n.x&&e.y===n.y||this.segments.push({x1:this._points[a].x,y1:this._points[a].y,x2:this._points[a+1].x,y2:this._points[a+1].y})}},{key:"containsPoint",value:function(t){return this.segments.some((function(e){return Wo(e,t)}))}},{key:"intersectsCircle",value:function(t){return this.segments.some((function(e){return zo(t,e)}))}},{key:"intersectsLine",value:function(t){var e=G(t);return this.segments.some((function(t){return Bo(t,e)}))}},{key:"intersectsRect",value:function(t){var e=X(t);return this.segments.some((function(t){return Lo(e,t)}))}},{key:"intersectsPolygon",value:function(t){return this.segments.some((function(e){return Po(t,e)}))}},{key:"intersectsGeoPolygon",value:function(t){return this.segments.some((function(e){return $o(t,e)}))}},{key:"points",value:function(){return this._points}}]),t}();var Ah=de();function Eh(t,e){return Ah.get(t)(e)}Ah.add("rect",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(xh,e)})),Ah.add("circle",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(bh,e)})),Ah.add("line",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(wh,e)})),Ah.add("polygon",kh),Ah.add("geopolygon",Rh),Ah.add("polyline",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Th,e)}));var Nh=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];_(this,t),this.set(e)}return M(t,[{key:"set",value:function(t){var e=this,n=0<arguments.length&&void 0!==t?t:[];this.geometries=[],n.forEach((function(t){var n=Eh(t.type,t);n&&e.geometries.push(n)}))}},{key:"containsPoint",value:function(t){return this.geometries.some((function(e){return e.containsPoint(t)}))}},{key:"intersectsLine",value:function(t){return this.geometries.some((function(e){return e.intersectsLine(t)}))}},{key:"intersectsRect",value:function(t){return this.geometries.some((function(e){return e.intersectsRect(t)}))}},{key:"intersectsCircle",value:function(t){return this.geometries.some((function(e){return e.intersectsCircle(t)}))}},{key:"intersectsPolygon",value:function(t){return this.geometries.some((function(e){return e.intersectsPolygon(t)}))}},{key:"intersectsGeoPolygon",value:function(t){return this.geometries.some((function(e){return e.intersectsGeoPolygon(t)}))}}]),t}();var Ch=function(){function t(){_(this,t),this._elements=[[1,0,0],[0,1,0],[0,0,1]],this._stack=[]}return M(t,[{key:"clone",value:function(){return(new t).multiply(this)}},{key:"set",value:function(t){return this._elements=t,this}},{key:"save",value:function(){return this._stack.push(this.elements),this}},{key:"restore",value:function(){return this._stack.length&&(this._elements=this._stack.pop()),this}},{key:"add",value:function(t){var e,n;for(e=0;e<this._elements.length;e++)for(n=0;n<this._elements[e].length;n++)this._elements[e][n]+=t;return this}},{key:"translate",value:function(t,e){return this.multiply([[1,0,t],[0,1,e],[0,0,1]]),this}},{key:"rotate",value:function(t){var e=Math.cos(-t),n=Math.sin(-t);return this.multiply([[e,n,0],[-n,e,0],[0,0,1]]),this}},{key:"multiply",value:function(e){var n,i,r,a;if(e instanceof t&&(e=e._elements),Array.isArray(e)){for(r=[[0,0,0],[0,0,0],[0,0,0]],n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)for(a=0;a<3;a++)r[n][i]+=this._elements[n][a]*e[a][i];this._elements=r}else for(n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)this._elements[n][i]*=e;return this}},{key:"scale",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:t;return this.multiply([[t,0,0],[0,n,0],[0,0,1]]),this}},{key:"transform",value:function(t,e,n,i,r,a){return this.multiply([[t,n,r],[e,i,a],[0,0,1]]),this}},{key:"determinant",value:function(){var t=this._elements[0][0],e=this._elements[0][1],n=this._elements[0][2],i=this._elements[1][0],r=this._elements[1][1],a=this._elements[1][2],o=this._elements[2][0],s=this._elements[2][1],c=this._elements[2][2];return t*r*c+e*a*o+n*i*s-n*r*o-e*i*c-t*a*s}},{key:"invert",value:function(){var t=this.determinant(),e=this._elements[0][0],n=this._elements[0][1],i=this._elements[0][2],r=this._elements[1][0],a=this._elements[1][1],o=this._elements[1][2],s=this._elements[2][0],c=this._elements[2][1],u=this._elements[2][2];return this._elements=[[a*u-o*c,i*c-n*u,n*o-i*a],[o*s-r*u,e*u-i*s,i*r-e*o],[r*c-a*s,s*n-e*c,e*a-n*r]],this.multiply(1/t),this}},{key:"transpose",value:function(){var t=Object.create(this._elements);return this._elements=[[t[0][0],t[1][0],t[2][0]],[t[0][1],t[1][1],t[2][1]],[t[0][2],t[1][2],t[2][2]]],this}},{key:"identity",value:function(){return this._elements=[[1,0,0],[0,1,0],[0,0,1]],this}},{key:"toString",value:function(){return"".concat(this._elements.map((function(t){return t.join("\t")})).join("\n"))}},{key:"isIdentity",value:function(){var t=this._elements;return 1===t[0][0]&&0===t[0][1]&&0===t[0][2]&&0===t[1][0]&&1===t[1][1]&&0===t[1][2]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]}},{key:"transformPoint",value:function(t){var e,n,i=[t.x,t.y,1],r=this._elements,a=[0,0,0];for(e=0;e<this._elements.length;e++)for(n=0;n<this._elements[e].length;n++)a[e]+=i[n]*r[e][n];return{x:a[0],y:a[1]}}},{key:"transformPoints",value:function(t){var e,n,i,r,a,o=this._elements,s=[];for(r=0;r<t.length;r++){for(e=[t[r].x,t[r].y,1],a=[0,0,0],n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)a[n]+=e[i]*o[n][i];s.push({x:a[0],y:a[1]})}return s}},{key:"elements",get:function(){var t=this._elements;return[[t[0][0],t[0][1],t[0][2]],[t[1][0],t[1][1],t[1][2]],[t[2][0],t[2][1],t[2][2]]]}}]),t}(),zh=/(translate|scale|rotate|matrix)\(([0-9,.eE+-\s]+)(?:,|\s?)+\)/g;function Oh(t,e){var n=e.args[0]*(Math.PI/180);if(2<e.args.length){var i=e.args[1],r=e.args[2];t.translate(i,r),t.rotate(n),t.translate(-i,-r)}else 1===e.args.length&&t.rotate(n)}function jh(t,e){for(var n,i,r,a,o,s,c,u,l,h,f,d=function(t){for(var e,n=[];null!==(e=zh.exec(t));){var i=e[2].trim(),r=-1===i.indexOf(",")?i.split(" "):i.split(",");n.push({cmd:e[1],args:r.filter((function(t){return 0<t.trim().length})).map((function(t){return Number(t)}))})}return n}(t),p=0,g=d.length;p<g;p++)"rotate"===(n=d[p]).cmd?Oh(e,n):"scale"===n.cmd?(u=e,0,h=(l=n).args[0],f=isNaN(l.args[1])?l.args[0]:l.args[1],u.scale(h,f)):"matrix"===n.cmd?(s=e,6<=(c=n).args.length&&s.transform.apply(s,I(c.args))):"translate"===n.cmd&&(i=e,0,a=(r=n).args[0],o=isNaN(r.args[1])?0:r.args[1],i.translate(a,o))}var Ph={type:/^\w[\w-]+/,attr:/^\[\w(?:[\w\._-]+)?(?:[!]?=['\"][\w\s*#_-]*['\"])?\]/,universal:/^(\*)/,tag:/^\.(\w+)/},Dh={type:function(t,e){return e.filter((function(e){var n=e.type;return!!n&&n.toLowerCase()===t.toLowerCase()}))},attr:function(t,e,n,i){return i.filter((function(i){var r=i.attrs[t];if(!e)return void 0!==r;if(void 0===r)return!1;switch(e){case"=":return n===String(r);case"!=":return n!==String(r);default:return!1}}))},universal:function(t){return t},tag:function(t,e){return e.filter((function(e){var n=e.tag;return!!n&&-1!==n.trim().split(/\s+/).indexOf(t.replace(".",""))}))}};var Ih={find:function(t,e){var n,i,r,a,o,s,c,u=[],l=[];if(e.isBranch){var h;c=[],t.split(/\s*,\s*/).forEach((function(t){t=t.trim(),r=[];for(var e=function(e){(o=t.match(Ph[e]))&&(s=!0,t=t.slice(o[0].length),a={type:e,value:o[0]},"attr"===e&&(o=o[0].match(/\[(\w[\w\._-]+)?(?:([!]?=)['\"]([\w\s#_-]*)['\"])?\]/),a.attribute=o[1],a.operator=o[2],a.attributeValue=o[3]),r.push(a))};t&&(s=!1,(o=t.match(/^\s*([>+~]|\s)\s*/))&&(s=!0,r.push({type:" ",value:o[0]}),t=t.slice(o[0].length)),Object.keys(Ph).forEach(e),r&&r.length&&c.indexOf(r)<0&&c.push(r),s););})),n=c,i=e.descendants;for(var f=function(t){h=n[t];var e=[],r=i.slice(),a=!1;h.reverse().forEach((function(t){if(" "===t.type)return e.push(r),r=i.slice(),void(a=!1);r=function(t,e){if(!e||!e.length||!t||"function"!=typeof Dh[t.type])return[];switch(t.type){case"type":return Dh[t.type](t.value,e);case"attr":return Dh[t.type](t.attribute,t.operator,t.attributeValue,e);case"universal":return Dh[t.type](e);case"tag":return Dh[t.type](t.value,e);default:return[]}}(t,r),a=!0})),a&&e.push(r);var o=e[0].filter((function(t){for(var n,i=t.parent,r=1;r<e.length;r++){for(n=e[r].indexOf(i);i&&n<0;)i=i.parent,n=e[r].indexOf(i);if(n<0)return!1}return!0}));l.push(o)},d=0,p=n.length;d<p;d++)f(d);for(var g=0,v=l.length;g<v;g++)for(var y=0,m=l[g].length;y<m;y++)u.indexOf(l[g][y])<0&&u.push(l[g][y])}return u||[]}};function qh(t,e,n){var i=t.type,r=t.points();n&&(r=r.every((function(t){return Array.isArray(t)}))?r.map((function(t){return n.transformPoints(t)})):n.transformPoints(r)),function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].x/=e,t[n].y/=e}(r,e);var a,o,s=null;if("rect"===i||"bounds"===i)(s=X(r)).type=i;else if("circle"===i)a=r,o=t.r,(s={cx:a[0].x,cy:a[0].y,r:o}).type=i;else if("line"===i)(s=G(r)).type=i;else if("polygon"===i||"polyline"===i)s={type:"path",d:Qa(r,"polygon"===i)};else if("geopolygon"===i){for(var c="",u=0;u<r.length;u++)c+=Qa(r[u],!0);s={type:"path",d:c}}return s}var Fh=function(){function t(e){var n=this;_(this,t),this._bounds=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=e.boundingRect?e.boundingRect(t):{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width,height:n.height}},this._attrs=e.attrs,this._type=e.type,this._data=e.data,this._dpi=e.stage?e.stage.dpi:1,this._collider=function(){return function(t,e){if(t.collider){var n=t.modelViewMatrix;return"collection"===t.colliderType?{type:"container",children:t.collider.geometries.map((function(t){return qh(t,e,n)}))}:qh(t.collider,e,n)}return null}(e,n._dpi)},this._desc=e.desc,this._tag=e.tag,this._children=function(){return e.children.map((function(e){return new t(e)}))},this._parent=function(){return e.parent?new t(e.parent):null},this._cache={elementBoundingRect:null},this._getElementBoundingRect=function(){return!n._cache.elementBoundingRect&&n.element&&(n._cache.elementBoundingRect=n.element.getBoundingClientRect()),n._cache.elementBoundingRect||{left:0,top:0}}}return M(t,[{key:"boundsRelativeTo",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e,i=w(t),r=n?this.bounds:this.localBounds,a=this._getElementBoundingRect(),o=a.left,s=a.top;if("object"===i&&null!==t&&"function"==typeof t.getBoundingClientRect){var c=t.getBoundingClientRect(),u=c.left,l=void 0===u?0:u,h=c.top;o-=l,s-=void 0===h?0:h}return r.x+=o,r.y+=s,r}},{key:"children",get:function(){return this._children()}},{key:"parent",get:function(){return this._parent()}},{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}},{key:"attrs",get:function(){return this._attrs}},{key:"element",set:function(t){this._cache.elementBoundingRect=null,this._element=t},get:function(){return this._element}},{key:"key",set:function(t){this._key=t},get:function(){return this._key}},{key:"bounds",get:function(){var t=this._bounds();return t.x/=this._dpi,t.y/=this._dpi,t.width/=this._dpi,t.height/=this._dpi,t}},{key:"localBounds",get:function(){return this._bounds(!1)}},{key:"collider",get:function(){return this._collider()}},{key:"desc",get:function(){return this._desc}},{key:"tag",get:function(){return this._tag}}]),t}();function Lh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Fh,e)}var Bh=function(){function t(e){_(this,t),this._node=Lh(e),this._parent=null,this._input=null}return M(t,[{key:"node",get:function(){return this._node}},{key:"parent",set:function(t){this._parent=t},get:function(){return this._parent}},{key:"input",set:function(t){this._input=t},get:function(){return this._input}}]),t}();function Wh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Bh,e)}function Hh(t,e){var n=t.parent;if(n&&"stage"!==n.type){e.parent=Wh(n);var i=n.parent;i&&"stage"!==i.type&&Hh(i,e.parent)}}function Vh(t,e,n){if(null===t.colliderType)return null;var i=function(t,e){var n={};if(t.modelViewMatrix)if(Array.isArray(e))n=t.inverseModelViewMatrix.transformPoints(e);else if(isNaN(e.r))Array.isArray(e.vertices)?n.vertices=t.inverseModelViewMatrix.transformPoints(e.vertices):n=t.inverseModelViewMatrix.transformPoint(e);else{var i={x:e.cx,y:e.cy},r=t.inverseModelViewMatrix.transformPoint(i);n.cx=r.x,n.cy=r.y,n.r=e.r}else n=e;return Array.isArray(n.vertices)&&(n=(n.vertices.every((function(t){return Array.isArray(t)}))?Rh:kh)(n)),n}(t,n);return("frontChild"===t.colliderType?function(t,e,n){for(var i=t.descendants.length-1;0<=i;i--){var r=t.descendants[i];if(null!==r.collider&&r.collider[e](n)){var a=Wh(r);return Hh(r,a),a}}return null}:function(t,e,n){if(t.collider[e](n)){var i=Wh(t);return Hh(t,i),i}return null})(t,e,i)}function Yh(t,e){var n=1<arguments.length&&void 0!==e?e:1,i={};switch(K(t)){case"circle":return i.cx=t.cx*n,i.cy=t.cy*n,i.r=t.r,["intersectsCircle",i];case"rect":return["intersectsRect",i=$(t).map((function(t){return ao(t,n)}))];case"line":return["intersectsLine",i=U(t).map((function(t){return ao(t,n)}))];case"point":return["containsPoint",i=ao(t,n)];case"polygon":return i.vertices=t.vertices.map((function(t){return ao(t,n)})),["intersectsPolygon",i];case"geopolygon":return i.vertices=t.vertices.map((function(t){return t.map((function(t){return ao(t,n)}))})),["intersectsGeoPolygon",i];default:return[]}}function Uh(t,e){var n=D(Yh(e,t.dpi),2),i=n[0],r=n[1],a=[];return i&&(function t(e,n,i,r){for(var a=e.length,o=0;o<a;o++){var s=e[o],c=Vh(s,n,r);c&&i.push(c),!s.children||c||s.collider||t(s.children,n,i,r)}}([t],i,a,r),function(t,e){for(var n=0,i=e.length;n<i;n++)e[n].input=t}(e,a)),a}function $h(t,e){var n=D(Yh(e,t.dpi),2);return function t(e,n,i){for(var r=e.length,a=0;a<r;a++){var o=e[a];if(null!==Vh(o,n,i))return!0;if(o.children&&!o.collider)return t(o.children,n,i)}return!1}([t],n[0],n[1])}var Xh=function(){A(e,mh);var t=j(e);function e(n){var i;return _(this,e),(i=t.call(this,n))._stage=null,i._collider={type:null,definition:null,fn:null},i._attrs={},i._node=null,i}return M(e,[{key:"set",value:function(t){var e,n,i=0<arguments.length&&void 0!==t?t:{},r=(this.node=i).data,a=i.desc,o=i.tag,s=i.strokeReference,c=i.fillReference;e=this.attrs,n=i,Object.keys(Ja).forEach((function(t){var i=n[t];void 0!==i&&(e[Ja[t]]=i)})),void 0!==r&&(this.data=r),"object"===w(a)&&(this.desc=x(!0,{},a)),"string"==typeof o&&(this.tag=o),"string"==typeof s&&(this.strokeReference=s),"string"==typeof c&&(this.fillReference=c)}},{key:"findShapes",value:function(t){return Ih.find(t,this).map((function(t){return Lh(t)}))}},{key:"getItemsFrom",value:function(t){return Uh(this,t)}},{key:"containsPoint",value:function(t){return $h(this,t)}},{key:"intersectsLine",value:function(t){return $h(this,t)}},{key:"intersectsRect",value:function(t){return $h(this,t)}},{key:"intersectsCircle",value:function(t){return $h(this,t)}},{key:"intersectsPolygon",value:function(t){return $h(this,t)}},{key:"intersectsGeoPolygon",value:function(t){return $h(this,t)}},{key:"resolveLocalTransform",value:function(t){var e=0<arguments.length&&void 0!==t?t:new Ch;void 0!==this.attrs.transform&&jh(this.attrs.transform,e),this.modelViewMatrix=e.clone()}},{key:"resolveGlobalTransform",value:function(t){var e=0<arguments.length&&void 0!==t?t:new Ch,n=this.ancestors;if(0<n.length)for(var i=n.length-1;0<=i;i--)n[i].resolveLocalTransform(e),e=n[i].modelViewMatrix;this.resolveLocalTransform(e)}},{key:"attr",value:function(t){return this.attrs[t]}},{key:"equals",value:function(t){var n=this.attrs,i=Object.keys(n),r=t.attrs,a=Object.keys(r);if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++){var s=i[o];if(!Object.hasOwnProperty.call(r,s))return!1;if(n[s]!==r[s])return!1}return P(E(e.prototype),"equals",this).call(this,t)}},{key:"toJSON",value:function(){var t=P(E(e.prototype),"toJSON",this).call(this);return t.attrs=this.attrs,t}},{key:"attrs",get:function(){return this._attrs}},{key:"stage",get:function(){return this._parent&&!this._stage?this._stage=this._parent.stage:this._parent||this._stage===this||(this._stage=null),this._stage}},{key:"modelViewMatrix",set:function(t){this._mvm=t,this._imvm=null},get:function(){return this._mvm}},{key:"inverseModelViewMatrix",get:function(){return this._imvm=this._imvm?this._imvm:this._mvm.clone().invert(),this._imvm}},{key:"node",set:function(t){this._node=t},get:function(){return this._node}},{key:"collider",set:function(t){var e=Array.isArray(t)?"collection":t&&t.type;return"string"!=typeof e?(this._collider.type=null,this._collider.definition=null,void(this._collider.fn=null)):(null!==this._collider&&this._collider.type===e&&null!==this._collider.fn?this._collider.fn.set(t):this._collider.type=e,void(this._collider.definition=t))},get:function(){if(null!==this._collider.fn)return this._collider.fn;switch(this._collider.type){case"collection":this._collider.fn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Nh,e)}(this._collider.definition);break;case"frontChild":return!0;case"bounds":this._collider.fn=Eh("rect",this.boundingRect());break;case"line":case"rect":case"circle":case"polygon":case"geopolygon":case"polyline":this._collider.fn=Eh(this._collider.type,this._collider.definition);break;default:return null}return this._collider.fn}},{key:"colliderType",get:function(){return this._collider.type}}]),e}(),Gh=function(){A(e,mh);var t=j(e);function e(){return _(this,e),t.apply(this,arguments)}return M(e,[{key:"addChild",value:function(t){if(!(t&&t instanceof mh))throw new TypeError("Expecting a Node as argument, but got ".concat(t));if(t===this)throw new Error("Can not add itself as child!");if(t._children&&t._children.length&&0<=this.ancestors.indexOf(t))throw new Error("Can not add an ancestor as child!");return t._parent&&t._parent!==this&&t._parent.removeChild(t),this._children.push(t),t._parent=this,t._ancestors=null,this}},{key:"addChildren",value:function(t){var e,n=t?t.length:0;for(e=0;e<n;e++)this.addChild(t[e]);return this}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return 0<=e&&(this._children.splice(e,1),t._parent=null,t._ancestors=null),this}},{key:"removeChildren",value:function(t){var e,n;if(!this._children)return this;if(t)for(n=t.length,e=0;e<n;e++)this.removeChild(t[e]);else for(;this._children.length;)this.removeChild(this._children[0]);return this}}]),e}(),Kh=Gh.prototype,Zh=function(){A(e,Xh);var t=j(e);function e(){var n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_(this,e);var r=i.type,a=void 0===r?"container":r;return(n=t.call(this,a)).set(i),n}return M(e,[{key:"set",value:function(t){var n=0<arguments.length&&void 0!==t?t:{};P(E(e.prototype),"set",this).call(this,n);var i=n.collider,r=x({type:null},i);this.collider=r,this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"appendChildRect",value:function(t,e){if(void 0!==t.bounds){var n=this.__boundingRect[e]||{},i=D(t.bounds(e),3),r=i[0],a=i[2],o=r.x,s=r.y,c=a.x,u=a.y,l=isNaN(n.width)?c:Math.max(c,n.width+n.x),h=isNaN(n.height)?u:Math.max(u,n.height+n.y);n.x=isNaN(n.x)?o:Math.min(o,n.x),n.y=isNaN(n.y)?s:Math.min(s,n.y),n.width=l-n.x,n.height=h-n.y,this.__boundingRect[e]=n}}},{key:"boundingRect",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__boundingRect[e])return this.__boundingRect[e];for(var n=this.children.length,i=0;i<n;i++)this.appendChildRect(this.children[i],e);return this.__boundingRect[e]=x({x:0,y:0,width:0,height:0},this.__boundingRect[e]),this.__boundingRect[e]}},{key:"bounds",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__bounds[e])return this.__bounds[e];var n=this.boundingRect(e);return this.__bounds[e]=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],this.__bounds[e]}},{key:"addChild",value:function(t){var e=Kh.addChild.call(this,t);if(this._collider&&"bounds"===this._collider.type){this.appendChildRect(t,!0);var n=x({type:"bounds",x:0,y:0,width:0,height:0},this.__boundingRect.true);this.collider=n}return e}},{key:"addChildren",value:function(t){var e=Kh.addChildren.call(this,t),n=t.length;if(this._collider&&"bounds"===this._collider.type&&0<n){for(var i=0;i<n;i++)this.appendChildRect(t[i],!0);var r=x({type:"bounds",x:0,y:0,width:0,height:0},this.__boundingRect.true);this.collider=r}return e}},{key:"removeChild",value:function(t){t._stage=null;var e,n=t.descendants,i=n?n.length:0;for(e=0;e<i;e++)n[e]._stage=null;if(Kh.removeChild.call(this,t),this._collider&&"bounds"===this._collider.type){this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null};var r=x(this.boundingRect(!0),{type:"bounds"});this.collider=r}return this}},{key:"removeChildren",value:function(t){if(Kh.removeChildren.call(this,t),this._collider&&"bounds"===this._collider.type){this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null};var e=x(this.boundingRect(!0),{type:"bounds"});this.collider=e}return this}}]),e}();function Jh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Zh,e)}var Qh=function(){A(e,Zh);var t=j(e);function e(n){var i;return _(this,e),(i=t.call(this,"stage"))._stage=O(i),i._dpiRatio=n||1,i}return M(e,[{key:"dpi",get:function(){return this._dpiRatio}}]),e}();var tf=Gh.prototype,ef=["x1","x2","y1","y2","id","offset","style"],nf=function(){A(e,Xh);var t=j(e);function e(){var n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_(this,e);var r=i.type,a=void 0===r?"container":r;return(n=t.call(this,a)).set(i),n._boundingRect={},n}return M(e,[{key:"set",value:function(t){var n=0<arguments.length&&void 0!==t?t:{};P(E(e.prototype),"set",this).call(this,n);for(var i=this.attrs,r="",a=0,o=ef.length;a!==o;a++)void 0!==n[r=ef[a]]&&(i[r]=n[r])}},{key:"addChild",value:function(t){return tf.addChild.call(this,t)}},{key:"addChildren",value:function(t){return tf.addChildren.call(this,t)}},{key:"removeChild",value:function(t){t._stage=null;var e,n=t.descendants,i=n?n.length:0;for(e=0;e<i;e++)n[e]._stage=null;return tf.removeChild.call(this,t),this}},{key:"removeChildren",value:function(t){return tf.removeChildren.call(this,t),this}}]),e}();function rf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(nf,e)}var af=Gh.prototype,of=["patternUnits","x","y","width","height","id"],sf=function(){A(e,Xh);var t=j(e);function e(){var n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_(this,e);var r=i.type,a=void 0===r?"container":r;return(n=t.call(this,a)).set(i),n._boundingRect={},n}return M(e,[{key:"set",value:function(t){var n=0<arguments.length&&void 0!==t?t:{};P(E(e.prototype),"set",this).call(this,n);for(var i=this.attrs,r="",a=0,o=of.length;a!==o;a++)void 0!==n[r=of[a]]&&(i[r]=n[r])}},{key:"addChild",value:function(t){return af.addChild.call(this,t)}},{key:"addChildren",value:function(t){return af.addChildren.call(this,t)}},{key:"removeChild",value:function(t){t._stage=null;var e,n=t.descendants,i=n?n.length:0;for(e=0;e<i;e++)n[e]._stage=null;return af.removeChild.call(this,t),this}},{key:"removeChildren",value:function(t){return af.removeChildren.call(this,t),this}}]),e}();var cf=function(){A(e,Xh);var t=j(e);function e(){var n;return _(this,e),(n=t.call(this,"rect")).set.apply(n,arguments),n}return M(e,[{key:"set",value:function(t){var n=0<arguments.length&&void 0!==t?t:{},i=n.x,r=void 0===i?0:i,a=n.y,o=void 0===a?0:a,s=n.width,c=void 0===s?0:s,u=n.height,l=void 0===u?0:u,h=n.rx,f=void 0===h?0:h,d=n.ry,p=void 0===d?0:d,g=n.collider,v=x({type:"rect",x:r,y:o,width:c,height:l},g);P(E(e.prototype),"set",this).call(this,n),0<=c?(this.attrs.x=r,this.attrs.width=c):(this.attrs.x=r+c,this.attrs.width=-c),0<=l?(this.attrs.y=o,this.attrs.height=l):(this.attrs.y=o+l,this.attrs.height=-l),0<f&&(this.attrs.rx=f),0<p&&(this.attrs.ry=p),this.collider=v,this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__boundingRect[e])return this.__boundingRect[e];var n=$(this.attrs),i=D(Y(e&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(n):n),4),r=i[0],a=i[1],o=i[2],s=i[3];return this.__boundingRect[e]={x:r,y:a,width:o-r,height:s-a},this.__boundingRect[e]}},{key:"bounds",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__bounds[e])return this.__bounds[e];var n=this.boundingRect(e);return this.__bounds[e]=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],this.__bounds[e]}}]),e}();var uf=function(){A(e,Xh);var t=j(e);function e(){var n;return _(this,e),(n=t.call(this,"circle")).set.apply(n,arguments),n}return M(e,[{key:"set",value:function(t){var n=0<arguments.length&&void 0!==t?t:{},i=n.cx,r=void 0===i?0:i,a=n.cy,o=void 0===a?0:a,s=n.r,c=void 0===s?0:s,u=n.collider,l=x({type:"circle",cx:r,cy:o,r:c},u);P(E(e.prototype),"set",this).call(this,n),this.attrs.cx=r,this.attrs.cy=o,this.attrs.r=c,this.collider=l,this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__boundingRect[e])return this.__boundingRect[e];var n=this.bounds(e);return this.__boundingRect[e]={x:n[0].x,y:n[0].y,width:n[2].x-n[0].x,height:n[2].y-n[0].y},this.__boundingRect[e]}},{key:"bounds",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__bounds[e])return this.__bounds[e];var n=this.attrs,i=n.cx,r=n.cy,a=n.r,o=n.r,s=i-a,c=r-o,u=2*a,l=2*o,h=[{x:s,y:c},{x:s+u,y:c},{x:s+u,y:c+l},{x:s,y:c+l}];if(e&&this.modelViewMatrix){var f=D(Y(h=this.modelViewMatrix.transformPoints(h)),4),d=f[0],p=f[1];u=f[2]-d,l=f[3]-p,this.__bounds[e]=[{x:d,y:p},{x:d+u,y:p},{x:d+u,y:p+l},{x:d,y:p+l}]}else this.__bounds[e]=h;return this.__bounds[e]}}]),e}();var lf=function(){A(e,Xh);var t=j(e);function e(){var n;return _(this,e),(n=t.call(this,"line")).set.apply(n,arguments),n}return M(e,[{key:"set",value:function(t){var n=0<arguments.length&&void 0!==t?t:{},i=n.x1,r=void 0===i?0:i,a=n.y1,o=void 0===a?0:a,s=n.x2,c=void 0===s?0:s,u=n.y2,l=void 0===u?0:u,h=n.collider;P(E(e.prototype),"set",this).call(this,n);var f={type:"line",x1:this.attrs.x1=r,y1:this.attrs.y1=o,x2:this.attrs.x2=c,y2:this.attrs.y2=l};this.collider=x(f,h),this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__boundingRect[e])return this.__boundingRect[e];var n=U(this.attrs);e&&this.modelViewMatrix&&(n=this.modelViewMatrix.transformPoints(n));var i=D(Y(n),4),r=i[0],a=i[1],o=i[2],s=i[3],c=r!==o||a!==s;return this.__boundingRect[e]={x:r,y:a,width:c?Math.max(1,o-r):0,height:c?Math.max(1,s-a):0},this.__boundingRect[e]}},{key:"bounds",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__bounds[e])return this.__bounds[e];var n=this.boundingRect(e);return this.__bounds[e]=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],this.__bounds[e]}}]),e}();var hf=Math.PI/2;function ff(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return n<0?n+2*Math.PI:n}function df(t,e,n){return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}}function pf(t){if(t.length<2)return!1;var e=t[0],n=t[t.length-1];return Math.abs(e.x-n.x)<1e-12&&Math.abs(e.y-n.y)<1e-12}var gf=function(){A(e,Xh);var t=j(e);function e(){var n;return _(this,e),(n=t.call(this,"path")).set.apply(n,arguments),n}return M(e,[{key:"set",value:function(t){var n=this,i=0<arguments.length&&void 0!==t?t:{};if(P(E(e.prototype),"set",this).call(this,i),this.segments=[],this.points=[],this.attrs.d=i.d,this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null},Array.isArray(i.collider)||"object"===w(i.collider)&&void 0!==i.collider.type)this.collider=i.collider;else if(i.d){if(this.segments=gh(i.d),1<this.segments.length&&this.segments.every((function(t){return pf(t)})))return void(this.collider=x({type:"geopolygon",vertices:this.segments},i.collider));this.segments.forEach((function(t){if(!(t.length<=1))if(pf(t))n.collider=x({type:"polygon",vertices:t},i.collider);else if("object"===w(i.collider)&&i.collider.visual){var e=n.attrs["stroke-width"]/2;n.collider=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:{},r=[],a=[];if("h"===i.forceOrientation){var o=t[0].x<t[1].x?-1:1,s=t[t.length-1].x>t[t.length-2].x?1:-1;t.unshift({x:t[0].x+o,y:t[0].y}),t.push({x:t[t.length-1].x+s,y:t[t.length-1].y})}else if("v"===i.forceOrientation){var c=t[0].y<t[1].y?-1:1,u=t[t.length-1].y>t[t.length-2].y?1:-1;t.unshift({x:t[0].x,y:t[0].y+c}),t.push({x:t[t.length-1].x,y:t[t.length-1].y+u})}for(var l=t.length-1,h=1;h<l;h++){var f=t[h-1],d=t[h],p=t[h+1],g=ff(d,f),v=ff(d,p),y=(g+v)/2,m=y+Math.PI,x=Math.max(y,m),b=Math.min(y,m),w=v<g;if(1===h){var _=ff(f,d);r.push(df(f,_-hf,e)),a.unshift(df(f,_+hf,e))}var k=w?x:b,M=w?b:x;if(r.push(df(d,k,e)),a.unshift(df(d,M,e)),h===l-1){var S=ff(p,d);r.push(df(p,S+hf,e)),a.unshift(df(p,S-hf,e))}}return{type:"polygon",vertices:[].concat(r,a)}}(t,e,i.collider)}else n.collider=x({type:"polyline",points:t},i.collider)}))}}},{key:"boundingRect",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__boundingRect[e])return this.__boundingRect[e];this.points.length||(this.segments=this.segments.length?this.segments:gh(this.attrs.d),this.points=function(t){for(var e,n=[],i=t.length,r=0;r<i;r++){e=t[r];for(var a=0;a<e.length;a++)n.push(e[a])}return n}(this.segments));var n=D(Y(e&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(this.points):this.points),4),i=n[0],r=n[1],a=n[2],o=n[3];return this.__boundingRect[e]={x:i||0,y:r||0,width:a-i||0,height:o-r||0},this.__boundingRect[e]}},{key:"bounds",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__bounds[e])return this.__bounds[e];var n=this.boundingRect(e);return this.__bounds[e]=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],this.__bounds[e]}}]),e}();var vf=function(){A(e,Xh);var t=j(e);function e(){var n;return _(this,e),(n=t.call(this,"text")).set.apply(n,arguments),n}return M(e,[{key:"set",value:function(t){var n,i,r,a,o=0<arguments.length&&void 0!==t?t:{},s=o.x,c=void 0===s?0:s,u=o.y,l=void 0===u?0:u,h=o.dx,f=void 0===h?0:h,d=o.dy,p=void 0===d?0:d,g=o.textBoundsFn,v=o.text,y=o.title,m=o.collider,b=o.boundingRect,_=o.ellipsed;P(E(e.prototype),"set",this).call(this,o),this.attrs.x=c,this.attrs.y=l,this.attrs.dx=f,this.attrs.dy=p,this.attrs.text=v,void 0!==y&&(this.attrs.title=String(y)),"object"===w(b)?this._textBoundsFn=function(){return b}:"function"==typeof g&&(this._textBoundsFn=g),"string"==typeof _&&(this.ellipsed=_),this.collider=x({type:(i=(n=this).data,r=n._boundingRect,a=n._textBoundsFn,null!=i&&(r||a)?"bounds":null)},m),this.__boundingRect={true:null,false:null},this.__bounds={true:null,false:null}}},{key:"boundingRect",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__boundingRect[e])return this.__boundingRect[e];if("function"!=typeof this._textBoundsFn)return{x:0,y:0,width:0,height:0};var n=$(this._textBoundsFn(this.attrs)),i=D(Y(e&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(n):n),4),r=i[0],a=i[1],o=i[2],s=i[3];return this.__boundingRect[e]={x:r,y:a,width:o-r,height:s-a},this.__boundingRect[e]}},{key:"bounds",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(null!==this.__bounds[e])return this.__bounds[e];var n=this.boundingRect(e);return this.__bounds[e]=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],this.__bounds[e]}}]),e}();var yf=de();function mf(t,e){return yf.get(t)(e)}yf.add("rect",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(cf,e)})),yf.add("circle",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(uf,e)})),yf.add("text",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(vf,e)})),yf.add("line",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(lf,e)})),yf.add("path",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(gf,e)})),yf.add("stage",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(Qh,e)})),yf.add("container",Jh),yf.add("defs",Jh),yf.add("linearGradient",rf),yf.add("radialGradient",rf),yf.add("stop",rf),yf.add("pattern",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return z(sf,e)}));var xf=function(t){var e=0<arguments.length&&void 0!==t?t:[],n=[{}];function i(){return n[n.length-1]}return i.save=function(t){for(var r=0<arguments.length&&void 0!==t?t:{},a=i(),o={},s="",c=0;c<e.length;c++)void 0!==a[s=e[c]]&&(o[s]=a[s]);return x(o,r),n.push(o),i()},i.restore=function(){n.splice(n.length-1,1)},i}(["stroke","fill","strokeWidth","opacity","fontFamily","fontSize","baseline"]);function bf(t,e){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)e[n](t)}function wf(t){var e=t.items,n=t.stage,i=t.dpi,r=t.on,a=void 0===r?{}:r;return function t(e,n,i,r){for(var a,o,s,c={siblings:e,node:null,index:0},u=0,l=e.length;u<l;u++)if(o=u,s=e,(a=c).node=s[o],a.index=o,bf(c,r.create),!("function"==typeof c.node.disabled?c.node.disabled():c.node.disabled)){c.node=xf.save(c.node);var h=mf(c.node.type,c.node);h&&(c.node.transform&&(i.save(),jh(c.node.transform,i)),i.isIdentity()||(h.modelViewMatrix=i.clone()),n.addChild(h),c.node.children&&t(c.node.children,h,i,r),c.node.transform&&i.restore()),xf.restore()}}(e,n=n||mf("stage",i),new Ch,a),n}function _f(t,e,n){var i=n.orientation,r=n.degree,a=n.stops,o=void 0===a?[]:a,s=null;if("radial"===i){var c=e.boundingRect();s=t.createRadialGradient(c.x+c.width/2,c.y+c.height/2,1e-5,c.x+c.width/2,c.y+c.height/2,Math.max(c.width,c.height)/2)}else{var u=no(r);["x1","x2","y1","y2"].forEach((function(t){t in n&&(u[t]=n[t])}));var l=e.boundingRect();s=t.createLinearGradient(l.x+u.x1*l.width,l.y+u.y1*l.height,l.x+u.x2*l.width,l.y+u.y2*l.height)}for(var h=0,f=o.length;h<f;h++){var d=o[h];s.addColorStop(d.offset,d.color)}return s}function kf(t,e,n){return e.width=t.width,e.height=t.height,n.save(),n.fillStyle=t.fill,t.shapes.forEach((function(t){switch(t.type){case"rect":n.rect(t.x,t.y,t.width,t.height)}})),n.fill(),n.restore(),n.createPattern(e,"repeat")}function Mf(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.x,i=e.y,r=e.width,a=e.height,o=e.scaleRatio,s=e.margin,c=e.edgeBleed,u={x:0,y:0,width:0,height:0,scaleRatio:{x:1,y:1},margin:{left:0,top:0},edgeBleed:{left:0,right:0,top:0,bottom:0,bool:!1}};return u.x=isNaN(n)?u.x:n,u.y=isNaN(i)?u.y:i,u.width=isNaN(r)?u.width:r,u.height=isNaN(a)?u.height:a,void 0!==o&&(u.scaleRatio.x=isNaN(o.x)?u.scaleRatio.x:o.x,u.scaleRatio.y=isNaN(o.y)?u.scaleRatio.y:o.y),void 0!==s&&(u.margin.left=isNaN(s.left)?0:s.left,u.margin.top=isNaN(s.top)?0:s.top),"object"===w(c)&&["left","right","top","bottom"].forEach((function(t){!isNaN(c[t])&&0<c[t]&&(u.edgeBleed[t]=c[t],u.edgeBleed.bool=!0)})),u.computedPhysical={x:Math.round(u.margin.left+(u.x-u.edgeBleed.left)*u.scaleRatio.x),y:Math.round(u.margin.top+(u.y-u.edgeBleed.top)*u.scaleRatio.y),width:Math.round((u.width+u.edgeBleed.left+u.edgeBleed.right)*u.scaleRatio.x),height:Math.round((u.height+u.edgeBleed.top+u.edgeBleed.bottom)*u.scaleRatio.y)},u}function Sf(){var t={element:function(){},root:function(){},appendTo:function(){},render:function(){return!1},itemsAt:function(){return[]},findShapes:function(){return[]},clear:function(){},destory:function(){},size:function(){},measureText:fl,textBounds:pl,setKey:function(e){t.element().setAttribute("data-key",e)}};return t}function Rf(t){return function(e){var n=e.node;"text"!==n.type||null==n.data||n.textBoundsFn||(n.textBoundsFn=t.textBounds)}}var Tf=de();function Af(t){return Array.isArray(t)?t:"string"==typeof t?-1!==t.indexOf(",")?t.split(","):t.split(" "):[]}function Ef(t,e,n,i){for(var r=3<arguments.length&&void 0!==i?i:{},a=Object.keys(r),o=0,s=n.length;o<s;o++){var c=n[o],u=c[0],l=c[1],h=c[2];if(u in e.attrs&&!(l in r)&&t[l]!==e.attrs[u]){var f=h?h(e.attrs[u]):e.attrs[u];"function"==typeof t[l]?t[l](f):t[l]=f}}for(var d=0,p=a.length;d<p;d++){var g=a[d];t[g]=r[g]}}function Nf(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:wf,r=!1,a=Mf(),o=[["fill","fillStyle"],["stroke","strokeStyle"],["opacity","globalAlpha"],["globalAlpha","globalAlpha"],["stroke-width","lineWidth"],["stroke-linejoin","lineJoin"],["stroke-dasharray","setLineDash",Af]],s=Sf();return s.element=function(){return t},s.root=function(){return t},s.appendTo=function(e){return t||((t=e.ownerDocument.createElement("canvas")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none"),e.appendChild(t),t},s.render=function(c){if(!t)return!1;var u,l,h,f;n||(u=t.ownerDocument,l=u.createElement("canvas"),h=l.getContext("2d"),f={},n={create:function(t){var e=t.key;return e?(f[e]=f[e]||kf(t,l,h),f[e]):kf(t,l,h)},clear:function(){f={}}});var d,p=t.getContext("2d"),g=(d=p,("undefined"!=typeof window&&window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)),v=a.scaleRatio.x,y=a.scaleRatio.y;r&&(t.style.left="".concat(a.computedPhysical.x,"px"),t.style.top="".concat(a.computedPhysical.y,"px"),t.style.width="".concat(a.computedPhysical.width,"px"),t.style.height="".concat(a.computedPhysical.height,"px"),t.width=Math.round(a.computedPhysical.width*g),t.height=Math.round(a.computedPhysical.height*g));var m={type:"container",children:c,transform:a.edgeBleed.bool?"translate(".concat(a.edgeBleed.left*g*v,", ").concat(a.edgeBleed.top*g*y,")"):""};1==g&&1===v&&1===y||(m.transform+="scale(".concat(g*v,", ").concat(g*y,")"));var x=i({items:[m],dpi:g,on:{create:[il(s.measureText),Rf(s)]}}),b=!e||!x.equals(e);n.clear();var _=r||b;return _&&(s.clear(),function t(e,n,i,r){for(var a=0,o=e.length;a<o;a++){var s=e[a],c={};n.save(),s.attrs&&(s.attrs.fill||s.attrs.stroke)&&(s.attrs.fill&&"object"===w(s.attrs.fill)&&"gradient"===s.attrs.fill.type?c.fillStyle=_f(n,s,s.attrs.fill):s.attrs.fill&&"object"===w(s.attrs.fill)&&"pattern"===s.attrs.fill.type&&(c.fillStyle=r.patterns.create(s.attrs.fill)),s.attrs.stroke&&"object"===w(s.attrs.stroke)&&"gradient"===s.attrs.stroke.type?c.strokeStyle=_f(n,s,s.attrs.stroke):s.attrs.stroke&&"object"===w(s.attrs.stroke)&&"pattern"===s.attrs.stroke.type&&(c.strokeStyle=r.patterns.create(s.attrs.stroke))),Ef(n,s,i,c),s.modelViewMatrix&&(u=s.modelViewMatrix.elements,n.setTransform(u[0][0],u[1][0],u[0][1],u[1][1],u[0][2],u[1][2])),Tf.has(s.type)&&Tf.get(s.type)(s.attrs,{g:n,doFill:"fill"in s.attrs&&"none"!==s.attrs.fill,doStroke:"stroke"in s.attrs&&0!==s.attrs["stroke-width"],ellipsed:s.ellipsed}),s.children&&t(s.children,n,i,r),n.restore()}var u}(x.children,p,o,{patterns:n})),r=!1,e=x,_},s.itemsAt=function(t){return e?e.getItemsFrom(t):[]},s.findShapes=function(t){return e?e.findShapes(t):[]},s.clear=function(){return t&&(t.width=t.width),e=null,s},s.size=function(t){if(t){var e=Mf(t);JSON.stringify(a)!==JSON.stringify(e)&&(r=!0,a=e)}return a},s.destroy=function(){t&&(t.parentElement&&t.parentElement.removeChild(t),t=null),e=null},s}function Cf(t,e){Tf.add(t,e)}function zf(t,e){return Math.max(0,Math.min(t,e))}var Of=new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͽΆΈ-ϵϷ-҂Ҋ-։ः-हऻऽ-ीॉ-ौॎ-ॐक़-ॡ।-ॿং-হঽ-ীে-ৌৎ-ৡ০-ৱ৴-৺ਃ-ਹਾ-ੀਖ਼-੯ੲ-ੴઃ-હઽ-ીૉ-ૌૐ-ૡ૦-૯ଂ-ହଽ-ାୀେ-ୌୗ-ୡ୦-୷ஃ-ிு-ௌௐ-௲ఁ-ఽు-ౄౘ-ౡ౦-౯౿-ಹಽ-ೋೕ-ೡ೦-ീെ-ൌൎ-ൡ൦-ෆා-ෑෘ-ะา-ำเ-ๆ๏-ະາ-ຳຽ-ໆ໐-༗༚-༴༶༸༾-ཬཿ྅ྈ-ྌ྾-࿅࿇-ာေးျ-ြဿ-ၗၚ-ၝၡ-ၰၵ-ႁႃ-ႄႇ-ႌႎ-ႜ႞-ፚ፠-ᎏᎠ-Ᏼᐁ-ᙿᚁ-ᚚᚠ-ᜑᜠ-ᜱ᜵-ᝑᝠ-ᝰក-ាើ-ៅះ-ៈ។-៚ៜ០-៩᠐-ᢨᢪ-ᤜᤣ-ᤦᤩ-ᤱᤳ-ᤸ᥆-᧚ᨀ-ᨖᨙ-ᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪭ᬄ-ᬳᬵᬻᬽ-ᭁᭃ-᭪᭴-᭼ᮂ-ᮡᮦ-ᮧ᮪-ᯥᯧᯪ-ᯬᯮ᯲-ᰫᰴ-ᰵ᰻-᱿᳓᳡ᳩ-ᳬᳮ-ᶿḀ-ᾼιῂ-ῌῐ-Ίῠ-Ῥῲ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎ-⅏Ⅰ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-ⳤⳫ-ⳮⴀ-⵰ⶀ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ㆺㇰ-㈜㈠-㉏㉠-㉻㉿-㊰㋀-㋋㋐-㍶㍻-㏝㏠-㏾㐀-䶵一-ꒌꓐ-ꘌꘐ-ꙮꚀ-ꛯ꛲-꛷Ꜣ-ꞇ꞉-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠤꠧ꠰-꠷ꡀ-ꡳꢀ-ꣃ꣎-꣙ꣲ-ꤥ꤮-ꥆꥒ-ꥼꦃ-ꦲꦴ-ꦵꦺ-ꦻꦽ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂ-ꯤꯦ-ꯧꯩ-꯬꯰-ﬗＡ-Ｚａ-ｚｦ-ￜ]"),jf=new RegExp("[־׀׃׆א-״߀-ߪߴ-ߵߺ-ࠕࠚࠤࠨ࠰-ࡘ࡞‏יִײַ-ﬨשׁ-ﭏ]"),Pf=new RegExp("[؈؋؍؛-ي٭-ٯٱ-ەۥ-ۦۮ-ۯۺ-܍ܐܒ-ܯݍ-ޥޱﭐ-ﴽﵐ-﷼ﹰ-ﻼ]");function Df(t){var e,n,i,r,a=t?t.length:0;for(e=0;e<a;e++){if(n=t[e],r=n,Of.test(r))return"ltr";if(i=n,jf.test(i)||Pf.test(i))return"rtl"}return"ltr"}var If={start:"end",end:"start",center:"center",middle:"middle"};function qf(t,e){return"rtl"===e?If[t]:t}function Ff(t,e){function n(t){return t.id}function i(t,e){var n;return n="object"===w(t)?"id"in t?t.id:e:t,{content:t,id:"".concat(n,"__").concat(t.type||"")}}var r,a,o,s=[],c=[],u=[],l=[];t.isTree||(t=t.map(i)),e=e.map(i),a=t.map(n),o=e.map(n);for(var h=0,f=e.length;h<f;h++)-1===a.indexOf(e[h].id)?s.push(e[h]):u.push(e[h]);for(var d=0,p=t.length;d<p;d++)-1===o.indexOf(t[d].id)?c.push(t[d]):l.push(t[d]);for(var g=0,v=s.length;g<v;g++)s[g].content.children&&(s[g].diff=Ff([],s[g].content.children),s[g].children=s[g].diff.updatedNew.concat(s[g].diff.added),s[g].children.isTree=!0);for(var y=0,m=u.length;y<m;y++)u[y].diff=Ff(l[y].children||[],u[y].content.children||[]),u[y].object=l[y].object,u[y].children=u[y].diff.items;return r=u.concat(s),s.isTree=!0,c.isTree=!0,u.isTree=!0,l.isTree=!0,r.isTree=!0,{added:s,updatedNew:u,updatedOld:l,removed:c,items:r}}function Lf(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i].object=n(t[i].content.type,e)}function Bf(t,e){for(var n=0,i=t.length;n<i;n++)null!==t[n].object&&void 0!==t[n].object&&(e(t[n].object),t[n].object=null)}function Wf(t,e,n,i,r,a){var o=Ff(t,e);return Lf(o.added,n,i),Bf(o.removed,a),function t(e,n,i,r){for(var a,o=0,s=e.length;o<s;o++)null!==(a=e[o]).object&&void 0!==a.object&&(i(a.object,a.content),a.diff&&(Lf(a.diff.added,a.object,n),Bf(a.diff.removed,r),t(a.diff.items,n,i,r)))}(o.items,i,r,a),o.items}Cf("rect",(function(t,e){var n,i,r,a,o,s,c,u=e.g,l=e.doFill,h=e.doStroke;u.beginPath(),0<t.rx||0<t.ry?(n=u,i=t.x,r=t.y,a=t.width,o=t.height,s=t.rx,c=t.ry,s=zf(a/2,0<s?s:c),c=zf(o/2,0<c?c:s),n.moveTo(i,r+c),n.lineTo(i,r+o-c),n.quadraticCurveTo(i,r+o,i+s,r+o),n.lineTo(i+a-s,r+o),n.quadraticCurveTo(i+a,r+o,i+a,r+o-c),n.lineTo(i+a,r+c),n.quadraticCurveTo(i+a,r,i+a-s,r),n.lineTo(i+s,r),n.quadraticCurveTo(i,r,i,r+c)):u.rect(t.x,t.y,t.width,t.height),l&&u.fill(),h&&u.stroke()})),Cf("circle",(function(t,e){var n=e.g,i=e.doFill,r=e.doStroke;n.beginPath(),n.moveTo(t.cx+t.r,t.cy),n.arc(t.cx,t.cy,t.r,0,2*Math.PI,!1),i&&n.fill(),r&&n.stroke()})),Cf("line",(function(t,e){var n=e.g,i=e.doStroke;n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),i&&n.stroke()})),Cf("path",(function(t,e){var n=e.g,i=e.doStroke,r=e.doFill,a=new Path2D(t.d);r&&n.fill(a),i&&n.stroke(a)})),Cf("text",(function(t,e){var n=e.g,i=e.ellipsed||rl(t,fl);n.font="".concat(t["font-size"]," ").concat(t["font-family"]);var r=Df(t.text);n.canvas.dir!==r&&(n.canvas.dir=r);var a=qf("middle"===t["text-anchor"]?"center":t["text-anchor"],n.canvas.dir);a&&n.textAlign!==a&&(n.textAlign=a);var o=al(t);n.fillText(i,t.x+t.dx,t.y+t.dy+o)}));var Hf="http://www.w3.org/2000/svg",Vf=function(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid type: ".concat(t));var n=e.ownerDocument.createElementNS(Hf,"container"===t?"g":t);return e.appendChild(n),n},Yf=function(t){t.parentNode&&t.parentNode.removeChild(t)},Uf=function(t,e){for(var n in e.attrs)if("stroke"===n&&e.strokeReference)t.setAttribute("stroke",e.strokeReference);else if("fill"===n&&e.fillReference)t.setAttribute("fill",e.fillReference);else if("text"===n){t.setAttribute("style","white-space: pre"),t.textContent=e.ellipsed||rl(e.attrs,fl);var i=Df(e.attrs.text);"rtl"===i&&(t.setAttribute("direction","rtl"),t.setAttribute("dir","rtl"),t.setAttribute("text-anchor",qf(t.getAttribute("text-anchor"),i)))}else if("text"!==e.type||"dy"!==n&&"dominant-baseline"!==n)if("text"===e.type&&"title"===n&&e.attrs.title){var r=t.ownerDocument.createElementNS(Hf,"title");r.textContent=e.attrs.title,t.appendChild(r)}else t.setAttribute(n,e.attrs[n]);else{var a=+t.getAttribute(n)||0,o=0;o="dominant-baseline"===n?al(e.attrs):e.attrs[n],t.setAttribute("dy",o+a)}if("string"==typeof e.data||"number"==typeof e.data||"boolean"==typeof e.data)t.setAttribute("data",e.data);else if("object"===w(e.data)&&null!==e.data)for(var s in e.data)"string"!=typeof e.data[s]&&"number"!=typeof e.data[s]&&"boolean"!=typeof e.data[s]||t.setAttribute("data-".concat(s),e.data[s])},$f=function(){function t(e,n,i,r){_(this,t),this.create=e,this.nodeCreator=n,this.nodeMaintainer=i,this.nodeDestroyer=r}return M(t,[{key:"render",value:function(t,e){return this.create([],t,e,this.nodeCreator,this.nodeMaintainer,this.nodeDestroyer)}}]),t}();function Xf(){return new $f(Wf,Vf,Uf,Yf)}function Gf(t){var e,n,i=0;if(0===(t=JSON.stringify(t)).length)return i;for(e=0,n=t.length;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i&=i;return i}function Kf(){var t,e,n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Hf,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:wf,a=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Xf)(),o=!1,s=Mf(),c=Sf(),u={type:"defs",children:[]},l=function(t,e){var n=1<arguments.length&&void 0!==e?e:Gf,i={},r=Date.now();return{onCreate:function(e){var a={};e.node&&"object"===w(e.node.fill)&&"pattern"===e.node.fill.type&&e.node.fill.shapes&&(a.fill=e.node.fill),e.node&&"object"===w(e.node.stroke)&&"pattern"===e.node.stroke.type&&e.node.stroke.shapes&&(a.stroke=e.node.stroke),Object.keys(a).forEach((function(o){var s="",c=a[o],u=n(c),l="picasso-pattern-".concat(r,"-").concat(u);if("undefined"!=typeof window&&(s=window.location.href.split("#")[0]),!i[u]){var h={patternUnits:"userSpaceOnUse",x:0,y:0,width:c.width,height:c.height,type:"pattern",id:l,children:[],fill:c.fill};c.shapes.forEach((function(t){h.children.push(t)})),t.push(h),i[u]=!0}e.node["".concat(o,"Reference")]="url('".concat(s,"#").concat(l,"')")}))},clear:function(){i={}}}}(u.children),h=function(t,e){var n=1<arguments.length&&void 0!==e?e:Gf,i={},r=Date.now(),a={getOrCreateGradient:function(e,a,o){var s=0<arguments.length&&void 0!==e?e:{},c=1<arguments.length&&void 0!==a?a:"fill",u=2<arguments.length&&void 0!==o?o:"",l=n(s[c]),h="picasso-gradient-".concat(r,"-").concat(l);if(!i[l]){var f=s[c],d=f.orientation,p=f.degree,g=f.stops,v=void 0===g?[]:g,y={};void 0===p&&(p=90),"radial"===d?y.type="radialGradient":(y=no(p),["x1","x2","y1","y2"].forEach((function(t){t in s[c]&&(y[t]=s[c][t])})),y.type="linearGradient"),y.id=h,y.children=v.map((function(t){var e=t.offset,n=t.color,i=t.opacity;return{type:"stop",offset:"".concat(100*e,"%"),style:"stop-color:".concat(n,";stop-opacity:").concat(void 0!==i?i:1)}})),t.push(y),i[l]=h}return"url('".concat(u,"#").concat(h,"')")},onCreate:function(t){var e="";"undefined"!=typeof window&&(e=window.location.href.split("#")[0]);var n=t.node;n.fill&&"object"===w(n.fill)&&"gradient"===n.fill.type&&(n.fillReference=a.getOrCreateGradient(n,"fill",e)),n.stroke&&"object"===w(n.stroke)&&"gradient"===n.stroke.type&&(n.strokeReference=a.getOrCreateGradient(n,"stroke",e))},clear:function(){i={}}};return a}(u.children);return c.element=function(){return t},c.root=function(){return e},c.appendTo=function(n){return t||((t=n.ownerDocument.createElementNS(i,"svg")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none",t.setAttribute("xmlns",i),(e=n.ownerDocument.createElementNS(i,"g")).style.pointerEvents="auto",t.appendChild(e)),n.appendChild(t),t},c.render=function(i){if(!t)return!1;var f=s.scaleRatio.x,d=s.scaleRatio.y;o&&(t.style.left="".concat(s.computedPhysical.x,"px"),t.style.top="".concat(s.computedPhysical.y,"px"),t.setAttribute("width",s.computedPhysical.width),t.setAttribute("height",s.computedPhysical.height)),h.clear(),l.clear(),u.children.length=0;var p={type:"container",children:Array.isArray(i)?[].concat(I(i),[u]):i,transform:s.edgeBleed.bool?"translate(".concat(s.edgeBleed.left*f,", ").concat(s.edgeBleed.top*d,")"):""};1===f&&1===d||(p.transform+="scale(".concat(f,", ").concat(d,")"));var g=r({items:[p],on:{create:[function(t){t.node.fillReference=void 0,t.node.strokeReference=void 0},h.onCreate,l.onCreate,il(c.measureText),Rf(c)]}}),v=!n||!g.equals(n),y=o||v;return y&&(c.clear(),a.render(g.children,e)),o=!1,n=g,y},c.itemsAt=function(t){return n?n.getItemsFrom(t):[]},c.findShapes=function(t){return n?n.findShapes(t):[]},c.clear=function(){if(!e)return c;n=null;var i=e.cloneNode(!1);return t.replaceChild(i,e),e=i,c},c.destroy=function(){t&&t.parentNode&&t.parentNode.removeChild(t),e=t=null},c.size=function(t){if(t){var e=Mf(t);JSON.stringify(s)!==JSON.stringify(e)&&(o=!0,s=e)}return s},c}var Zf,Jf,Qf,td,ed,nd={},id=[],rd=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ad(t,e){for(var n in e)t[n]=e[n];return t}function od(t){var e=t.parentNode;e&&e.removeChild(t)}function sd(t,e,n){var i,r=arguments,a={};for(i in e)"key"!==i&&"ref"!==i&&(a[i]=e[i]);if(3<arguments.length)for(n=[n],i=3;i<arguments.length;i++)n.push(r[i]);if(null!=n&&(a.children=n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return cd(t,a,e&&e.key,e&&e.ref,null)}function cd(t,e,n,i,r){var a={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r};return null==r&&(a.__v=a),Zf.vnode&&Zf.vnode(a),a}function ud(t){return t.children}function ld(t,e){this.props=t,this.context=e}function hd(t,e){if(null==e)return t.__?hd(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?hd(t):null}function fd(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return fd(t)}}function dd(t){(!t.__d&&(t.__d=!0)&&Jf.push(t)&&!pd.__r++||td!==Zf.debounceRendering)&&((td=Zf.debounceRendering)||Qf)(pd)}function pd(){for(var t;pd.__r=Jf.length;)t=Jf.sort((function(t,e){return t.__v.__b-e.__v.__b})),Jf=[],t.some((function(t){var e,n,i,r,a,o,s;t.__d&&(o=(a=(e=t).__v).__e,(s=e.__P)&&(n=[],r=bd(s,a,(i=ad({},a)).__v=i,e.__n,void 0!==s.ownerSVGElement,null,n,null==o?hd(a):o),wd(n,a),r!=o&&fd(a)))}))}function gd(t,e,n,i,r,a,o,s,c,u){var l,h,f,d,p,g,v,y=i&&i.__k||id,m=y.length;for(c==nd&&(c=null!=o?o[0]:m?hd(i,0):null),n.__k=[],l=0;l<e.length;l++)if(null!=(d=n.__k[l]=null==(d=e[l])||"boolean"==typeof d?null:"string"==typeof d||"number"==typeof d?cd(null,d,null,null,d):Array.isArray(d)?cd(ud,{children:d},null,null,null):null!=d.__e||null!=d.__c?cd(d.type,d.props,d.key,null,d.__v):d)){if(d.__=n,d.__b=n.__b+1,null===(f=y[l])||f&&d.key==f.key&&d.type===f.type)y[l]=void 0;else for(h=0;h<m;h++){if((f=y[h])&&d.key==f.key&&d.type===f.type){y[h]=void 0;break}f=null}p=bd(t,d,f=f||nd,r,a,o,s,c,u),(h=d.ref)&&f.ref!=h&&(v=v||[],f.ref&&v.push(f.ref,null,d),v.push(h,d.__c||p,d)),null!=p?(null==g&&(g=p),c=vd(t,d,f,y,o,p,c),"option"==n.type?t.value="":"function"==typeof n.type&&(n.__d=c)):c&&f.__e==c&&c.parentNode!=t&&(c=hd(f))}if(n.__e=g,null!=o&&"function"!=typeof n.type)for(l=o.length;l--;)null!=o[l]&&od(o[l]);for(l=m;l--;)null!=y[l]&&kd(y[l],y[l]);if(v)for(l=0;l<v.length;l++)_d(v[l],v[++l],v[++l])}function vd(t,e,n,i,r,a,o){var s,c,u;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(r==n||a!=o||null==a.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(a),s=null;else{for(c=o,u=0;(c=c.nextSibling)&&u<i.length;u+=2)if(c==a)break t;t.insertBefore(a,o),s=o}return void 0!==s?s:a.nextSibling}function yd(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===rd.test(e)?n+"px":null==n?"":n}function md(t,e,n,i,r){var a,o,s,c,u;if(r?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(a=t.style,"string"==typeof n)a.cssText=n;else{if("string"==typeof i&&(a.cssText="",i=null),i)for(c in i)n&&c in n||yd(a,c,"");if(n)for(u in n)i&&n[u]===i[u]||yd(a,u,n[u])}else"o"===e[0]&&"n"===e[1]?(o=e!==(e=e.replace(/Capture$/,"")),e=((s=e.toLowerCase())in t?s:e).slice(2),n?(i||t.addEventListener(e,xd,o),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,xd,o)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!r&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function xd(t){this.l[t.type](Zf.event?Zf.event(t):t)}function bd(t,e,n,i,r,a,o,s,c){var u,l,h,f,d,p,g,v,y,m,x,b=e.type;if(void 0!==e.constructor)return null;(u=Zf.__b)&&u(e);try{t:if("function"==typeof b){if(v=e.props,y=(u=b.contextType)&&i[u.__c],m=u?y?y.props.value:u.__:i,n.__c?g=(l=e.__c=n.__c).__=l.__E:("prototype"in b&&b.prototype.render?e.__c=l=new b(v,m):(e.__c=l=new ld(v,m),l.constructor=b,l.render=Md),y&&y.sub(l),l.props=v,l.state||(l.state={}),l.context=m,l.__n=i,h=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=b.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=ad({},l.__s)),ad(l.__s,b.getDerivedStateFromProps(v,l.__s))),f=l.props,d=l.state,h)null==b.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==b.getDerivedStateFromProps&&v!==f&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(v,m),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(v,l.__s,m)||e.__v===n.__v){l.props=v,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),(l.__v=e).__e=n.__e,e.__k=n.__k,l.__h.length&&o.push(l),function t(e,n,i){var r,a;for(r=0;r<e.__k.length;r++)(a=e.__k[r])&&(a.__=e,a.__e&&("function"==typeof a.type&&1<a.__k.length&&t(a,n,i),n=vd(i,a,a,e.__k,null,a.__e,n),"function"==typeof e.type&&(e.__d=n)))}(e,s,t);break t}null!=l.componentWillUpdate&&l.componentWillUpdate(v,l.__s,m),null!=l.componentDidUpdate&&l.__h.push((function(){l.componentDidUpdate(f,d,p)}))}l.context=m,l.props=v,l.state=l.__s,(u=Zf.__r)&&u(e),l.__d=!1,l.__v=e,l.__P=t,u=l.render(l.props,l.state,l.context),l.state=l.__s,null!=l.getChildContext&&(i=ad(ad({},i),l.getChildContext())),h||null==l.getSnapshotBeforeUpdate||(p=l.getSnapshotBeforeUpdate(f,d)),x=null!=u&&u.type==ud&&null==u.key?u.props.children:u,gd(t,Array.isArray(x)?x:[x],e,n,i,r,a,o,s,c),l.base=e.__e,l.__h.length&&o.push(l),g&&(l.__E=l.__=null),l.__e=!1}else null==a&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(t,e,n,i,r,a,o,s){var c,u,l,h,f,d=n.props,p=e.props;if(r="svg"===e.type||r,null!=a)for(c=0;c<a.length;c++)if(null!=(u=a[c])&&((null===e.type?3===u.nodeType:u.localName===e.type)||t==u)){t=u,a[c]=null;break}if(null==t){if(null===e.type)return document.createTextNode(p);t=r?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,p.is&&{is:p.is}),a=null,s=!1}if(null===e.type)d!==p&&t.data!=p&&(t.data=p);else{if(null!=a&&(a=id.slice.call(t.childNodes)),l=(d=n.props||nd).dangerouslySetInnerHTML,h=p.dangerouslySetInnerHTML,!s){if(null!=a)for(d={},f=0;f<t.attributes.length;f++)d[t.attributes[f].name]=t.attributes[f].value;(h||l)&&(h&&l&&h.__html==l.__html||(t.innerHTML=h&&h.__html||""))}(function(t,e,n,i,r){var a;for(a in n)"children"===a||"key"===a||a in e||md(t,a,null,n[a],i);for(a in e)r&&"function"!=typeof e[a]||"children"===a||"key"===a||"value"===a||"checked"===a||n[a]===e[a]||md(t,a,e[a],n[a],i)})(t,p,d,r,s),h?e.__k=[]:(c=e.props.children,gd(t,Array.isArray(c)?c:[c],e,n,i,"foreignObject"!==e.type&&r,a,o,nd,s)),s||("value"in p&&void 0!==(c=p.value)&&c!==t.value&&md(t,"value",c,d.value,!1),"checked"in p&&void 0!==(c=p.checked)&&c!==t.checked&&md(t,"checked",c,d.checked,!1))}return t}(n.__e,e,n,i,r,a,o,c);(u=Zf.diffed)&&u(e)}catch(t){e.__v=null,Zf.__e(t,e,n)}return e.__e}function wd(t,e){Zf.__c&&Zf.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){Zf.__e(t,e.__v)}}))}function _d(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){Zf.__e(t,n)}}function kd(t,e,n){var i,r,a;if(Zf.unmount&&Zf.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||_d(i,null,e)),n||"function"==typeof t.type||(n=null!=(r=t.__e)),t.__e=t.__d=void 0,null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){Zf.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&kd(i[a],e,n);null!=r&&od(r)}function Md(t,e,n){return this.constructor(t,n)}function Sd(){var t,e,n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).createElement,i=void 0===n?document.createElement.bind(document):n,r=Mf(),a=Sf();return a.element=function(){return t},a.root=function(){return t},a.appendTo=function(e){return t||((t=i("div")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none"),e.appendChild(t),t},a.render=function(n){return!!t&&(t.style.left="".concat(r.computedPhysical.x,"px"),t.style.top="".concat(r.computedPhysical.y,"px"),t.style.width="".concat(r.computedPhysical.width,"px"),t.style.height="".concat(r.computedPhysical.height,"px"),i=Array.isArray(n)?sd("div",null,n):n,a=i,o=t,s=e,Zf.__&&Zf.__(a,o),u=(c=s===ed)?null:s&&s.__k||o.__k,a=sd(ud,null,[a]),l=[],bd(o,(!c&&s||o).__k=a,u||nd,nd,void 0!==o.ownerSVGElement,s&&!c?[s]:!u&&o.childNodes.length?id.slice.call(o.childNodes):null,l,s||nd,c),e=void wd(l,a),!0);var i,a,o,s,c,u,l},a.renderArgs=[sd],a.clear=function(){if(t){for(var n=t.firstChild;n;)t.removeChild(n),n=t.firstChild;e=null}return a},a.destroy=function(){t&&t.parentElement&&t.parentElement.removeChild(t),e=t=null},a.size=function(t){return t&&(r=Mf(t)),r},a}Zf={__e:function(t,e){for(var n,i;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(i=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(i=!0,n.componentDidCatch(t)),i)return dd(n.__E=n)}catch(e){t=e}throw t}},ld.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=ad({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&ad(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),dd(this))},ld.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),dd(this))},ld.prototype.render=ud,Jf=[],Qf="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ed=nd;var Rd=[function(t){t.renderer("svg",Kf)},function(t){t.renderer("canvas",Nf)},function(t){t.renderer("dom",Sd)}],Td={OFF:pd.__r=0,ERROR:1,WARN:2,INFO:3,DEBUG:4},Ad=function(t){function e(t){if(t&&!(c<t)){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(u[t]||u[Td.DEBUG]).apply(void 0,n)}}var n,i=0<arguments.length&&void 0!==t?t:{},r=i.level,a=void 0===r?Td.OFF:r,o=i.pipe,s=void 0===o?console:o,c=a,u=(S(n={},Td.OFF,(function(){})),S(n,Td.ERROR,(function(){return s.error.apply(s,arguments)})),S(n,Td.WARN,(function(){return s.warn.apply(s,arguments)})),S(n,Td.INFO,(function(){return s.info.apply(s,arguments)})),S(n,Td.DEBUG,(function(){return s.log.apply(s,arguments)})),n);return{log:e,error:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[Td.ERROR].concat(n))},warn:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[Td.WARN].concat(n))},info:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[Td.INFO].concat(n))},debug:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[Td.DEBUG].concat(n))},level:function(t){return"number"==typeof t&&(c=t),c},LOG_LEVEL:Td}};var Ed=function t(e,n){var i=0<arguments.length&&void 0!==e?e:{},r=1<arguments.length&&void 0!==n?n:{},a=Ad(i.logger),o={component:de(r.component,"component",a),data:de(r.data,"data",a),formatter:de(r.formatter,"formatter",a),interaction:de(r.interaction,"interaction",a),renderer:rs(r.renderer),scale:de(r.scale,"scale",a),symbol:de(r.symbol,"symbol",a),logger:a};function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t({palettes:i.palettes.concat(e.palettes||[]),style:x({},i.style,e.style),logger:e.logger||i.logger,renderer:e.renderer||i.renderer},o)}return i.renderer&&i.renderer.prio&&o.renderer.default(i.renderer.prio[0]),s.use=function(t){return function(t,e,n){t(2<arguments.length?n:void 0,1<arguments.length&&void 0!==e?e:{})}(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o)},s.chart=function(t){return is(t,{registries:o,logger:a,style:i.style,palettes:i.palettes})},s.config=function(){return i},Object.keys(o).forEach((function(t){s[t]=o[t]})),s.version=b.version,s}({renderer:{prio:["svg","canvas"]},logger:{level:0},style:{"$font-family":"'Source Sans Pro', Arial, sans-serif","$font-size":"12px","$line-height":"16px","$font-size--l":"16px","$gray-100":"#ffffff","$gray-98":"#f9f9f9","$gray-95":"#f2f2f2","$gray-90":"#e6e6e6","$gray-35":"#595959","$gray-30":"#4d4d4d","$gray-25":"#404040","$gray-20":"#333333","$border-95":"rgba(255, 255, 255, 0.05)","$border-90":"rgba(255, 255, 255, 0.1)","$border-80":"rgba(255, 255, 255, 0.2)","$border-20":"rgba(0, 0, 0, 0.2)","$border-10":"rgba(0, 0, 0, 0.1)","$border-5":"rgba(0, 0, 0, 0.05)","$primary-blue":"#3F8AB3","$primary-green":"#6CB33F","$primary-red":"#DC423F","$primary-orange":"#EF960F","$spacing--s":4,$spacing:8,"$spacing--l":12,"$font-color":"$gray-35","$font-color--inverted":"$gray-90","$guide-color":"$gray-90","$guide-color--inverted":"$gray-35",$border:"$border-80","$border--inverted":"$border-10",$shape:{fill:"$primary-blue",strokeWidth:1,stroke:"$border"},"$shape-outline":{stroke:"$primary-blue",strokeWidth:2},"$shape-guide":{stroke:"$guide-color",strokeWidth:1},"$shape-guide--inverted":{"@extend":"$shape-guide",stroke:"$guide-color--inverted"},$label:{fontSize:"$font-size",fontFamily:"$font-family",fill:"$font-color"},"$label--inverted":{$extend:"$label",fill:"$font-color--inverted"},"$label-overlay":{fontSize:"$font-size--l",fontFamily:"$font-family",fill:"$gray-100",color:"$font-color",stroke:"$guide-color--inverted",strokeWidth:1,borderRadius:4},$title:{"@extend":"$label",fontSize:"$font-size--l"},"$guide-line":{strokeWidth:1,stroke:"$guide-color"},"$guide-line--minor":{strokeWidth:1,stroke:"$gray-95"},"$padding--s":{left:"$spacing--s",right:"$spacing--s",top:"$spacing--s",bottom:"$spacing--s"},$padding:{left:"$spacing",right:"$spacing",top:"$spacing",bottom:"$spacing"},"$selection-area-target":{fill:"$primary-green",strokeWidth:0,opacity:.2}},palettes:[{key:"categorical",colors:[["#a54343","#d76c6c","#ec983d","#ecc43d","#f9ec86","#cbe989","#70ba6e","#578b60","#79d69f","#26a0a7","#138185","#65d3da"]]},{key:"diverging",colors:[["#3d52a1","#3a89c9","#77b7e5","#b4ddf7","#e6f5fe","#ffe3aa","#f9bd7e","#ed875e","#d24d3e","#ae1c3e"]]},{key:"sequential",colors:[["rgb(180,221,212)","rgb(34, 83, 90)"]]}]},{component:as,data:ms,formatter:ni,interaction:xs,renderer:rs(),scale:da,symbol:po});return yh.forEach(Ed.use),Rd.forEach(Ed.use),[].forEach(Ed.use),Ed}))},AdBH:function(t,e,n){!function(e,n){t.exports=n()}(this,(function(){"use strict";var t={click:"Tap",Click:"Tap",tap:"Tap",pan:"Pan",swipe:"Swipe",rotate:"Rotate",press:"Press",pinch:"Pinch"};function e(e){return t[e]||e}function n(t){return function(n,i,r){var a,o,s,c,u=[],l=!0;function h(){"function"==typeof a.enable&&(a.enable=a.enable.bind(o)()),a.enable&&(a.gestures.forEach((function(n){n.options=n.options||{},void 0===n.options.enable&&(n.options.enable=!0),"function"==typeof n.options.enable&&(n.options.enable=n.options.enable.bind(o));var i=e(n.type);t&&t[i]&&(n.options.event=n.options.event||n.type.toLowerCase(),(s=s||new t.Manager(r)).add(new t[i](n.options)),Object.keys(n.events).forEach((function(t){n.events[t]=n.events[t].bind(o),s.on(t,n.events[t])})),u.push(n))})),a.gestures.forEach((function(n){var i=e(n.type);t&&t[i]&&(n.recognizeWith&&s.get(n.options.event).recognizeWith(n.recognizeWith.split(" ").filter((function(t){return""!==t}))),n.requireFailure&&s.get(n.options.event).requireFailure(n.requireFailure.split(" ").filter((function(t){return""!==t}))))})))}function f(){u.forEach((function(t){Object.keys(t.events).forEach((function(e){s.off(e,t.events[e])})),s.remove(t.options.event)})),u=[]}return{get key(){return c},set:function(t){var e;c=(e=t).key,o={chart:n,mediator:i,settings:a=e},a.gestures=a.gestures||[],void 0===a.enable&&(a.enable=!0),f(),l&&h()},off:function(){l=!1,f()},on:function(){l=!0,0===u.length&&h()},destroy:function(){f(),s&&s.destroy(),a=o=s=null}}}}return function(t){if(!("function"==typeof t.interaction))return function(e){e.interaction("hammer",n(t))};t.interaction("hammer",n(Hammer))}}))},QFtD:function(t,e,n){var i;(function(r,a,o,s){"use strict";var c=["","webkit","Moz","MS","ms","o"];var u=a.createElement("div");var l="function";var h=Math.round;var f=Math.abs;var d=Date.now;function p(t,e,n){return setTimeout(_(t,n),e)}function g(t,e,n){if(Array.isArray(t)){v(t,n[e],n);return true}return false}function v(t,e,n){var i;if(!t)return;if(t.forEach)t.forEach(e,n);else if(t.length!==s){i=0;while(i<t.length){e.call(n,t[i],i,t);i++}}else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function y(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace");var n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var a=r.console&&(r.console.warn||r.console.log);a&&a.call(r.console,i,n);return t.apply(this,arguments)}}var m;m="function"!==typeof Object.assign?function t(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");var n=Object(e);for(var i=1;i<arguments.length;i++){var r=arguments[i];if(r!==s&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])}return n}:Object.assign;var x=y((function t(e,n,i){var r=Object.keys(n);var a=0;while(a<r.length){(!i||i&&e[r[a]]===s)&&(e[r[a]]=n[r[a]]);a++}return e}),"extend","Use `assign`.");var b=y((function t(e,n){return x(e,n,true)}),"merge","Use `assign`.");function w(t,e,n){var i=e.prototype,r;r=t.prototype=Object.create(i);r.constructor=t;r._super=i;n&&m(r,n)}function _(t,e){return function n(){return t.apply(e,arguments)}}function k(t,e){if(typeof t==l)return t.apply(e&&e[0]||s,e);return t}function M(t,e){return t===s?e:t}function S(t,e,n){v(E(e),(function(e){t.addEventListener(e,n,false)}))}function R(t,e,n){v(E(e),(function(e){t.removeEventListener(e,n,false)}))}function T(t,e){while(t){if(t==e)return true;t=t.parentNode}return false}function A(t,e){return t.indexOf(e)>-1}function E(t){return t.trim().split(/\s+/g)}function N(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);var i=0;while(i<t.length){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function C(t){return Array.prototype.slice.call(t,0)}function z(t,e,n){var i=[];var r=[];var a=0;while(a<t.length){var o=e?t[a][e]:t[a];N(r,o)<0&&i.push(t[a]);r[a]=o;a++}n&&(i=e?i.sort((function t(n,i){return n[e]>i[e]})):i.sort());return i}function O(t,e){var n,i;var r=e[0].toUpperCase()+e.slice(1);var a=0;while(a<c.length){n=c[a];i=n?n+r:e;if(i in t)return i;a++}return s}var j=1;function P(){return j++}function D(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var I=/mobile|tablet|ip(ad|hone|od)|android/i;var q="ontouchstart"in r;var F=O(r,"PointerEvent")!==s;var L=q&&I.test(navigator.userAgent);var B="touch";var W="pen";var H="mouse";var V="kinect";var Y=25;var U=1;var $=2;var X=4;var G=8;var K=1;var Z=2;var J=4;var Q=8;var tt=16;var et=Z|J;var nt=Q|tt;var it=et|nt;var rt=["x","y"];var at=["clientX","clientY"];function ot(t,e){var n=this;this.manager=t;this.callback=e;this.element=t.element;this.target=t.options.inputTarget;this.domHandler=function(e){k(t.options.enable,[t])&&n.handler(e)};this.init()}ot.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler);this.evTarget&&S(this.target,this.evTarget,this.domHandler);this.evWin&&S(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler);this.evTarget&&R(this.target,this.evTarget,this.domHandler);this.evWin&&R(D(this.element),this.evWin,this.domHandler)}};function st(t){var e;var n=t.options.inputClass;e=n||(F?At:L?Dt:q?Lt:kt);return new e(t,ct)}function ct(t,e,n){var i=n.pointers.length;var r=n.changedPointers.length;var a=e&U&&i-r===0;var o=e&(X|G)&&i-r===0;n.isFirst=!!a;n.isFinal=!!o;a&&(t.session={});n.eventType=e;ut(t,n);t.emit("hammer.input",n);t.recognize(n);t.session.prevInput=n}function ut(t,e){var n=t.session;var i=e.pointers;var r=i.length;n.firstInput||(n.firstInput=ft(e));r>1&&!n.firstMultiple?n.firstMultiple=ft(e):1===r&&(n.firstMultiple=false);var a=n.firstInput;var o=n.firstMultiple;var s=o?o.center:a.center;var c=e.center=dt(i);e.timeStamp=d();e.deltaTime=e.timeStamp-a.timeStamp;e.angle=yt(s,c);e.distance=vt(s,c);lt(n,e);e.offsetDirection=gt(e.deltaX,e.deltaY);var u=pt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x;e.overallVelocityY=u.y;e.overallVelocity=f(u.x)>f(u.y)?u.x:u.y;e.scale=o?xt(o.pointers,i):1;e.rotation=o?mt(o.pointers,i):0;e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length;ht(n,e);var l=t.element;T(e.srcEvent.target,l)&&(l=e.srcEvent.target);e.target=l}function lt(t,e){var n=e.center;var i=t.offsetDelta||{};var r=t.prevDelta||{};var a=t.prevInput||{};if(e.eventType===U||a.eventType===X){r=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0};i=t.offsetDelta={x:n.x,y:n.y}}e.deltaX=r.x+(n.x-i.x);e.deltaY=r.y+(n.y-i.y)}function ht(t,e){var n=t.lastInterval||e,i=e.timeStamp-n.timeStamp,r,a,o,c;if(e.eventType!=G&&(i>Y||n.velocity===s)){var u=e.deltaX-n.deltaX;var l=e.deltaY-n.deltaY;var h=pt(i,u,l);a=h.x;o=h.y;r=f(h.x)>f(h.y)?h.x:h.y;c=gt(u,l);t.lastInterval=e}else{r=n.velocity;a=n.velocityX;o=n.velocityY;c=n.direction}e.velocity=r;e.velocityX=a;e.velocityY=o;e.direction=c}function ft(t){var e=[];var n=0;while(n<t.pointers.length){e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)};n++}return{timeStamp:d(),pointers:e,center:dt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function dt(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};var n=0,i=0,r=0;while(r<e){n+=t[r].clientX;i+=t[r].clientY;r++}return{x:h(n/e),y:h(i/e)}}function pt(t,e,n){return{x:e/t||0,y:n/t||0}}function gt(t,e){if(t===e)return K;if(f(t)>=f(e))return t<0?Z:J;return e<0?Q:tt}function vt(t,e,n){n||(n=rt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function yt(t,e,n){n||(n=rt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function mt(t,e){return yt(e[1],e[0],at)+yt(t[1],t[0],at)}function xt(t,e){return vt(e[0],e[1],at)/vt(t[0],t[1],at)}var bt={mousedown:U,mousemove:$,mouseup:X};var wt="mousedown";var _t="mousemove mouseup";function kt(){this.evEl=wt;this.evWin=_t;this.pressed=false;ot.apply(this,arguments)}w(kt,ot,{handler:function t(e){var n=bt[e.type];n&U&&0===e.button&&(this.pressed=true);n&$&&1!==e.which&&(n=X);if(!this.pressed)return;n&X&&(this.pressed=false);this.callback(this.manager,n,{pointers:[e],changedPointers:[e],pointerType:H,srcEvent:e})}});var Mt={pointerdown:U,pointermove:$,pointerup:X,pointercancel:G,pointerout:G};var St={2:B,3:W,4:H,5:V};var Rt="pointerdown";var Tt="pointermove pointerup pointercancel";if(r.MSPointerEvent&&!r.PointerEvent){Rt="MSPointerDown";Tt="MSPointerMove MSPointerUp MSPointerCancel"}function At(){this.evEl=Rt;this.evWin=Tt;ot.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}w(At,ot,{handler:function t(e){var n=this.store;var i=false;var r=e.type.toLowerCase().replace("ms","");var a=Mt[r];var o=St[e.pointerType]||e.pointerType;var s=o==B;var c=N(n,e.pointerId,"pointerId");if(a&U&&(0===e.button||s)){if(c<0){n.push(e);c=n.length-1}}else a&(X|G)&&(i=true);if(c<0)return;n[c]=e;this.callback(this.manager,a,{pointers:n,changedPointers:[e],pointerType:o,srcEvent:e});i&&n.splice(c,1)}});var Et={touchstart:U,touchmove:$,touchend:X,touchcancel:G};var Nt="touchstart";var Ct="touchstart touchmove touchend touchcancel";function zt(){this.evTarget=Nt;this.evWin=Ct;this.started=false;ot.apply(this,arguments)}w(zt,ot,{handler:function t(e){var n=Et[e.type];n===U&&(this.started=true);if(!this.started)return;var i=Ot.call(this,e,n);n&(X|G)&&i[0].length-i[1].length===0&&(this.started=false);this.callback(this.manager,n,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:e})}});function Ot(t,e){var n=C(t.touches);var i=C(t.changedTouches);e&(X|G)&&(n=z(n.concat(i),"identifier",true));return[n,i]}var jt={touchstart:U,touchmove:$,touchend:X,touchcancel:G};var Pt="touchstart touchmove touchend touchcancel";function Dt(){this.evTarget=Pt;this.targetIds={};ot.apply(this,arguments)}w(Dt,ot,{handler:function t(e){var n=jt[e.type];var i=It.call(this,e,n);if(!i)return;this.callback(this.manager,n,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:e})}});function It(t,e){var n=C(t.touches);var i=this.targetIds;if(e&(U|$)&&1===n.length){i[n[0].identifier]=true;return[n,n]}var r,a,o=C(t.changedTouches),s=[],c=this.target;a=n.filter((function(t){return T(t.target,c)}));if(e===U){r=0;while(r<a.length){i[a[r].identifier]=true;r++}}r=0;while(r<o.length){i[o[r].identifier]&&s.push(o[r]);e&(X|G)&&delete i[o[r].identifier];r++}if(!s.length)return;return[z(a.concat(s),"identifier",true),s]}var qt=2500;var Ft=25;function Lt(){ot.apply(this,arguments);var t=_(this.handler,this);this.touch=new Dt(this.manager,t);this.mouse=new kt(this.manager,t);this.primaryTouch=null;this.lastTouches=[]}w(Lt,ot,{handler:function t(e,n,i){var r=i.pointerType==B,a=i.pointerType==H;if(a&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)return;if(r)Bt.call(this,n,i);else if(a&&Ht.call(this,i))return;this.callback(e,n,i)},destroy:function t(){this.touch.destroy();this.mouse.destroy()}});function Bt(t,e){if(t&U){this.primaryTouch=e.changedPointers[0].identifier;Wt.call(this,e)}else t&(X|G)&&Wt.call(this,e)}function Wt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;var r=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(r,qt)}}function Ht(t){var e=t.srcEvent.clientX,n=t.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i];var a=Math.abs(e-r.x),o=Math.abs(n-r.y);if(a<=Ft&&o<=Ft)return true}return false}var Vt=O(u.style,"touchAction");var Yt=Vt!==s;var Ut="compute";var $t="auto";var Xt="manipulation";var Gt="none";var Kt="pan-x";var Zt="pan-y";var Jt=ee();function Qt(t,e){this.manager=t;this.set(e)}Qt.prototype={set:function(t){t==Ut&&(t=this.compute());Yt&&this.manager.element.style&&Jt[t]&&(this.manager.element.style[Vt]=t);this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];v(this.manager.recognizers,(function(e){k(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}));return te(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent;var n=t.offsetDirection;if(this.manager.session.prevented){e.preventDefault();return}var i=this.actions;var r=A(i,Gt)&&!Jt[Gt];var a=A(i,Zt)&&!Jt[Zt];var o=A(i,Kt)&&!Jt[Kt];if(r){var s=1===t.pointers.length;var c=t.distance<2;var u=t.deltaTime<250;if(s&&c&&u)return}if(o&&a)return;if(r||a&&n&et||o&&n&nt)return this.preventSrc(e)},preventSrc:function(t){this.manager.session.prevented=true;t.preventDefault()}};function te(t){if(A(t,Gt))return Gt;var e=A(t,Kt);var n=A(t,Zt);if(e&&n)return Gt;if(e||n)return e?Kt:Zt;if(A(t,Xt))return Xt;return $t}function ee(){if(!Yt)return false;var t={};var e=r.CSS&&r.CSS.supports;["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||r.CSS.supports("touch-action",n)}));return t}var ne=1;var ie=2;var re=4;var ae=8;var oe=ae;var se=16;var ce=32;function ue(t){this.options=m({},this.defaults,t||{});this.id=P();this.manager=null;this.options.enable=M(this.options.enable,true);this.state=ne;this.simultaneous={};this.requireFail=[]}ue.prototype={defaults:{},set:function(t){m(this.options,t);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;t=fe(t,this);if(!e[t.id]){e[t.id]=t;t.recognizeWith(this)}return this},dropRecognizeWith:function(t){if(g(t,"dropRecognizeWith",this))return this;t=fe(t,this);delete this.simultaneous[t.id];return this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;t=fe(t,this);if(-1===N(e,t)){e.push(t);t.requireFailure(this)}return this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=fe(t,this);var e=N(this.requireFail,t);e>-1&&this.requireFail.splice(e,1);return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this;var n=this.state;function i(n){e.manager.emit(n,t)}n<ae&&i(e.options.event+le(n));i(e.options.event);t.additionalEvent&&i(t.additionalEvent);n>=ae&&i(e.options.event+le(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=ce},canEmit:function(){var t=0;while(t<this.requireFail.length){if(!(this.requireFail[t].state&(ce|ne)))return false;t++}return true},recognize:function(t){var e=m({},t);if(!k(this.options.enable,[this,e])){this.reset();this.state=ce;return}this.state&(oe|se|ce)&&(this.state=ne);this.state=this.process(e);this.state&(ie|re|ae|se)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}};function le(t){if(t&se)return"cancel";if(t&ae)return"end";if(t&re)return"move";if(t&ie)return"start";return""}function he(t){if(t==tt)return"down";if(t==Q)return"up";if(t==Z)return"left";if(t==J)return"right";return""}function fe(t,e){var n=e.manager;if(n)return n.get(t);return t}function de(){ue.apply(this,arguments)}w(de,ue,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state;var n=t.eventType;var i=e&(ie|re);var r=this.attrTest(t);if(i&&(n&G||!r))return e|se;if(i||r){if(n&X)return e|ae;if(!(e&ie))return ie;return e|re}return ce}});function pe(){de.apply(this,arguments);this.pX=null;this.pY=null}w(pe,de,{defaults:{event:"pan",threshold:10,pointers:1,direction:it},getTouchAction:function(){var t=this.options.direction;var e=[];t&et&&e.push(Zt);t&nt&&e.push(Kt);return e},directionTest:function(t){var e=this.options;var n=true;var i=t.distance;var r=t.direction;var a=t.deltaX;var o=t.deltaY;if(!(r&e.direction))if(e.direction&et){r=0===a?K:a<0?Z:J;n=a!=this.pX;i=Math.abs(t.deltaX)}else{r=0===o?K:o<0?Q:tt;n=o!=this.pY;i=Math.abs(t.deltaY)}t.direction=r;return n&&i>e.threshold&&r&e.direction},attrTest:function(t){return de.prototype.attrTest.call(this,t)&&(this.state&ie||!(this.state&ie)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX;this.pY=t.deltaY;var e=he(t.direction);e&&(t.additionalEvent=this.options.event+e);this._super.emit.call(this,t)}});function ge(){de.apply(this,arguments)}w(ge,de,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ie)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}});function ve(){ue.apply(this,arguments);this._timer=null;this._input=null}w(ve,ue,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[$t]},process:function(t){var e=this.options;var n=t.pointers.length===e.pointers;var i=t.distance<e.threshold;var r=t.deltaTime>e.time;this._input=t;if(!i||!n||t.eventType&(X|G)&&!r)this.reset();else if(t.eventType&U){this.reset();this._timer=p((function(){this.state=oe;this.tryEmit()}),e.time,this)}else if(t.eventType&X)return oe;return ce},reset:function(){clearTimeout(this._timer)},emit:function(t){if(this.state!==oe)return;if(t&&t.eventType&X)this.manager.emit(this.options.event+"up",t);else{this._input.timeStamp=d();this.manager.emit(this.options.event,this._input)}}});function ye(){de.apply(this,arguments)}w(ye,de,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ie)}});function me(){de.apply(this,arguments)}w(me,de,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:et|nt,pointers:1},getTouchAction:function(){return pe.prototype.getTouchAction.call(this)},attrTest:function(t){var e=this.options.direction;var n;e&(et|nt)?n=t.overallVelocity:e&et?n=t.overallVelocityX:e&nt&&(n=t.overallVelocityY);return this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(n)>this.options.velocity&&t.eventType&X},emit:function(t){var e=he(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t);this.manager.emit(this.options.event,t)}});function xe(){ue.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}w(xe,ue,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xt]},process:function(t){var e=this.options;var n=t.pointers.length===e.pointers;var i=t.distance<e.threshold;var r=t.deltaTime<e.time;this.reset();if(t.eventType&U&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=X)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval;var o=!this.pCenter||vt(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp;this.pCenter=t.center;o&&a?this.count+=1:this.count=1;this._input=t;var s=this.count%e.taps;if(0===s){if(this.hasRequireFailures()){this._timer=p((function(){this.state=oe;this.tryEmit()}),e.interval,this);return ie}return oe}}return ce},failTimeout:function(){this._timer=p((function(){this.state=ce}),this.options.interval,this);return ce},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==oe){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function be(t,e){e=e||{};e.recognizers=M(e.recognizers,be.defaults.preset);return new ke(t,e)}be.VERSION="2.0.7";be.defaults={domEvents:false,touchAction:Ut,enable:true,inputTarget:null,inputClass:null,preset:[[ye,{enable:false}],[ge,{enable:false},["rotate"]],[me,{direction:et}],[pe,{direction:et},["swipe"]],[xe],[xe,{event:"doubletap",taps:2},["tap"]],[ve]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var we=1;var _e=2;function ke(t,e){this.options=m({},be.defaults,e||{});this.options.inputTarget=this.options.inputTarget||t;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=t;this.input=st(this);this.touchAction=new Qt(this,this.options.touchAction);Me(this,true);v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]);t[3]&&e.requireFailure(t[3])}),this)}ke.prototype={set:function(t){m(this.options,t);t.touchAction&&this.touchAction.update();if(t.inputTarget){this.input.destroy();this.input.target=t.inputTarget;this.input.init()}return this},stop:function(t){this.session.stopped=t?_e:we},recognize:function(t){var e=this.session;if(e.stopped)return;this.touchAction.preventDefaults(t);var n;var i=this.recognizers;var r=e.curRecognizer;(!r||r&&r.state&oe)&&(r=e.curRecognizer=null);var a=0;while(a<i.length){n=i[a];e.stopped===_e||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t);!r&&n.state&(ie|re|ae)&&(r=e.curRecognizer=n);a++}},get:function(t){if(t instanceof ue)return t;var e=this.recognizers;for(var n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);e&&this.remove(e);this.recognizers.push(t);t.manager=this;this.touchAction.update();return t},remove:function(t){if(g(t,"remove",this))return this;t=this.get(t);if(t){var e=this.recognizers;var n=N(e,t);if(-1!==n){e.splice(n,1);this.touchAction.update()}}return this},on:function(t,e){if(t===s)return;if(e===s)return;var n=this.handlers;v(E(t),(function(t){n[t]=n[t]||[];n[t].push(e)}));return this},off:function(t,e){if(t===s)return;var n=this.handlers;v(E(t),(function(t){e?n[t]&&n[t].splice(N(n[t],e),1):delete n[t]}));return this},emit:function(t,e){this.options.domEvents&&Se(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(!n||!n.length)return;e.type=t;e.preventDefault=function(){e.srcEvent.preventDefault()};var i=0;while(i<n.length){n[i](e);i++}},destroy:function(){this.element&&Me(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function Me(t,e){var n=t.element;if(!n.style)return;var i;v(t.options.cssProps,(function(r,a){i=O(n.style,a);if(e){t.oldCssProps[i]=n.style[i];n.style[i]=r}else n.style[i]=t.oldCssProps[i]||""}));e||(t.oldCssProps={})}function Se(t,e){var n=a.createEvent("Event");n.initEvent(t,true,true);n.gesture=e;e.target.dispatchEvent(n)}m(be,{INPUT_START:U,INPUT_MOVE:$,INPUT_END:X,INPUT_CANCEL:G,STATE_POSSIBLE:ne,STATE_BEGAN:ie,STATE_CHANGED:re,STATE_ENDED:ae,STATE_RECOGNIZED:oe,STATE_CANCELLED:se,STATE_FAILED:ce,DIRECTION_NONE:K,DIRECTION_LEFT:Z,DIRECTION_RIGHT:J,DIRECTION_UP:Q,DIRECTION_DOWN:tt,DIRECTION_HORIZONTAL:et,DIRECTION_VERTICAL:nt,DIRECTION_ALL:it,Manager:ke,Input:ot,TouchAction:Qt,TouchInput:Dt,MouseInput:kt,PointerEventInput:At,TouchMouseInput:Lt,SingleTouchInput:zt,Recognizer:ue,AttrRecognizer:de,Tap:xe,Pan:pe,Swipe:me,Pinch:ge,Rotate:ye,Press:ve,on:S,off:R,each:v,merge:b,extend:x,assign:m,inherit:w,bindFn:_,prefixed:O});var Re="undefined"!==typeof r?r:"undefined"!==typeof self?self:{};Re.Hammer=be;true;!(i=function(){return be}.call(e,n,e,t),i!==s&&(t.exports=i))})(window,document,"Hammer")},ztUU:function(t,e,n){!function(e,n){t.exports=n()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e,n){return(c=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&s(r,n.prototype),r}).apply(null,arguments)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===m.call(t)}function p(t){if(t&&"[object Object]"===m.call(t)){var e,n=y.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&y.call(t.constructor.prototype,"isPrototypeOf");if(!t.constructor||n||i){for(e in t);return void 0===e||y.call(t,e)}}}function g(t,e){x&&"__proto__"===e.name?x(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue}function v(t,e){if("__proto__"===e){if(!y.call(t,e))return;if(b)return b(t,e).value}return t[e]}var y=Object.prototype.hasOwnProperty,m=Object.prototype.toString,x=Object.defineProperty,b=Object.getOwnPropertyDescriptor,w=function t(e,n){var i,r,a,o,s,c,u=e,l=1,h=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=n||{},l=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});l<h;++l)if(null!=(i=arguments[l]))for(r in i)a=v(u,r),u!==(o=v(i,r))&&(f&&o&&(p(o)||(s=d(o)))?(c=s?(s=!1,a&&d(a)?a:[]):a&&p(a)?a:{},g(u,{name:r,newValue:t(f,c,o)})):void 0!==o&&g(u,{name:r,newValue:o}));return u};function _(t,e,n){if(!t)return-1;var i=n.cache,r=t.origin?t.origin():null;r&&(t=r);var a=i.fields.indexOf(t),o=-1,s=-1;if(-1===a)for(var c=0;c<i.wrappedFields.length;c++)if(s=i.wrappedFields[c].attrDims.map((function(t){return t.instance})).indexOf(t),o=i.wrappedFields[c].attrExps.map((function(t){return t.instance})).indexOf(t),-1!==s||-1!==o){a=c;break}return(a-=e.qArea.qLeft)<0||a>=e.qArea.qWidth?-1:0<=s?function(t){return t[a].qAttrDims.qValues[s]}:0<=o?function(t){return t[a].qAttrExps.qValues[o]}:function(t){return t[a]}}function k(t,e,n){var i=n.key,r={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return r.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(r.value),t.field&&(r.source={key:i,field:t.field.key()}),r}function M(t){var e=t.cache,n=t.f,i=t.mainCell,r=t.p,a=(t.prop,t.page),o=t.rowIdx,s=t.row,c=t.sourceKey,u=t.target,l=t.targetProp,h=i;if(r.field&&r.field!==n){var f=_(r.field,a,{cache:e});if(-1===f)return;h=w({qRow:o},f(s))}u[l]=k(r,h,{key:c})}function S(e,n,i,r){for(var a=Array.isArray(e)?e:[e],o=[],s=0;s<a.length;s++)if(void 0!==a[s].field){for(var c=n.raw(),u=n.key(),h="object"===t(a[s].field)?a[s].field:n.field(a[s].field),f=r.normalizeConfig(a[s],n),d=f.props,p=f.main,g=Object.keys(d),v=!!a[s].trackBy,y=t(a[s].trackBy),m={},x=[],b=[],S=0;S<c.qDataPages.length;S++){var R=_(h,c.qDataPages[S],{cache:i});if(-1!==R)for(var T=0;T<c.qDataPages[S].qMatrix.length;T++){var A=c.qDataPages[S].qArea.qTop+T,E=w({qRow:A},R(c.qDataPages[S].qMatrix[T])),N=k(p,E,{key:u});if(!(p.filter&&!p.filter(E))){for(var C=0;C<g.length;C++){var z=d[g[C]],O=z.fields||[z];z.fields&&(N[g[C]]=[]);for(var j=0;j<O.length;j++)M({cache:i,f:h,mainCell:E,p:O[j],prop:g[C],props:d,page:c.qDataPages[S],rowIdx:A,row:c.qDataPages[S].qMatrix[T],sourceKey:u,target:z.fields?N[g[C]]:N,targetProp:z.fields?j:g[C]});if(z.fields){var P=N[g[C]].map((function(t){return t.value})),D=N[g[C]].map((function(t){return t.label}));N[g[C]]={value:"function"==typeof z.value?z.value(P):void 0!==z.value?z.value:P,label:"function"==typeof z.label?z.label(D):void 0!==z.label?String(z.label):String(N[g[C]].value)}}}v&&r.track({cfg:a[s],itemData:E,obj:N,target:x,tracker:m,trackType:y}),b.push(N)}}}v?o.push.apply(o,l(r.collect(x,{main:p,propsArr:g,props:d}))):o.push.apply(o,b)}return o}function R(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;0<=--i;)e+=n[i].value;else e=1;t.value=e}function T(t,e){var n,i,r,a,o,s=new C(t),c=+t.value&&(s.value=t.value),u=[s];for(null==e&&(e=A);n=u.pop();)if(c&&(n.value=+n.data.value),(r=e(n.data))&&(o=r.length))for(n.children=new Array(o),a=o-1;0<=a;--a)u.push(i=n.children[a]=new C(r[a])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(N)}function A(t){return t.children}function E(t){t.data=t.data.data}function N(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function C(t){this.data=t,this.depth=this.height=0,this.parent=null}function z(t){if("function"!=typeof t)throw new Error;return t}C.prototype=T.prototype={constructor:C,count:function(){return this.eachAfter(R)},each:function(t){var e,n,i,r,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i])}while(o.length);return this},eachAfter:function(t){for(var e,n,i,r=this,a=[r],o=[];r=a.pop();)if(o.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)a.push(e[n]);for(;r=o.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;0<=n;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;0<=--r;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return T(this).eachBefore(E)}};var O="$",j={depth:-1},P={};function D(t){return t.id}function I(t){return t.parentId}function q(t,e){"/"===t.charAt(0)&&(t=t.substring(1));for(var n,i=t.split("/"),r=e,a=0;a<i.length;a++){if("*"===i[a]&&Array.isArray(r)){var o=[];n=i.slice(a+1).join("/");for(var s=0;s<r.length;s++){var c=q(n,r[s]);Array.isArray(c)?o.push.apply(o,l(c)):o.push(c)}return o}if(!i[a]&&Array.isArray(r)){var u=new Array(r.length);n=i.slice(a+1).join("/");for(var h=0;h<r.length;h++)u[h]=q(n,r[h]);return u}i[a]in r&&(r=r[i[a]])}return r}function F(t,e,n){if(t===e)return function(t){return t};if(e<t){var i=Math.max(0,Math.min(100,t-e)),r=l(Array(i)).map(String.prototype.valueOf,"parent").join(".");return Function("node","return node.".concat(r,";"))}if(t<e){var a=Math.max(0,Math.min(100,e-t));return function(t){return function t(e,n,i){var r=[];if(!e||!e.length)return r;if(n<=0){var a=0<=i?[e[i]]:e;r.push.apply(r,l(a))}else for(var o=0;o<e.length;o++)e[o].children&&e[o].children.length&&r.push.apply(r,l(t(e[o].children,n-1,i)));return r}(t.children,a-1,n)}}return!1}var L=/^qDimensionInfo(?:\/(\d+))?/,B=/^\/?qMeasureInfo\/(\d+)/,W=/\/qAttrExprInfo\/(\d+)/,H=/\/qAttrDimInfo\/(\d+)/;function V(t){return(t.qColumnOrder&&t.qColumnOrder.length?t.qColumnOrder:t.qDimensionInfo.map((function(t,e){return e}))).filter((function(e){return e<t.qDimensionInfo.length}))}function Y(t,e){var n=e.cube;if(!t)return-1;var i=t.origin&&t.origin()?t.origin().key():t.key(),r=!1,a=-1,o=-1,s=-1,c=-1,u=-1,l=i,h=n.qEffectiveInterColumnSortOrder,f=V(n);return L.test(l)&&(r=!0,a=+L.exec(l)[1],l=i.replace(L,"")),B.test(l)&&("K"===n.qMode?c=+B.exec(l)[1]:u=h&&-1!==h.indexOf(-1)?(c=+B.exec(l)[1],0):+B.exec(l)[1],l=l.replace(B,"")),l&&(H.exec(l)?s=+H.exec(l)[1]:W.exec(l)&&(o=+W.exec(l)[1])),{fieldDepth:(r?"S"===n.qMode?f[a]:h?h.indexOf(a):a:h&&-1!==h.indexOf(-1)?h.indexOf(-1):n.qDimensionInfo.length-("K"===n.qMode?0:1))+1,pseudoMeasureIndex:c,measureIdx:u,attrDimIdx:s,attrIdx:o}}function U(t,e){var n,i,r=F(t.fieldDepth,e.fieldDepth,e.pseudoMeasureIndex);return n=0<=e.measureIdx?function(t){return t.data.qValues[e.measureIdx]}:function(t){return t.data},0<=e.attrDimIdx?i=function(t){return t.qAttrDims.qValues[e.attrDimIdx]}:0<=e.attrIdx&&(i=function(t){return t.qAttrExps.qValues[e.attrIdx]}),{nodeFn:r,attrFn:i,valueFn:n}}function $(t,e,n){var i=n.key,r={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return r.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(r.value),t.field&&(r.source={key:i,field:t.field.key()}),r}function X(t){for(var e=t.propsArr,n=t.props,i=t.item,r=t.itemData,a=t.ret,o=t.sourceKey,s=0;s<e.length;s++){var c=n[e[s]],u=c.fields||[c],l=void 0,h=void 0;c.fields&&(l=[],h=[]);for(var f=function(t){var n=u[t],f=void 0,d=void 0,p=void 0,g=void 0,v=void 0,y=void 0;if(y="primitive"===n.type?(p=n.value,String(n.value)):("function"==typeof n.value&&(f=function(t){return n.value(t,i)}),"function"==typeof n.label&&(d=function(t){return n.label(t,i)}),n.accessor?(g=n.accessor(i),Array.isArray(g)?(v=g.map(n.valueAccessor),n.attrAccessor&&(v=v.map(n.attrAccessor)),f&&(p=v.map(f),f=null),d&&(y=v.map(d),d=null),p=n.reduce?n.reduce(p):p,n.reduceLabel?n.reduceLabel(y,p):String(p)):p=n.attrAccessor?n.attrAccessor(n.valueAccessor(g)):n.valueAccessor(g)):p=r),c.fields){var m=f?f(p):p;l.push(m),h.push(d&&null!=y?d(y):null!=y?y:String(m))}else{var x=f?f(p):p;a[e[s]]={value:x,label:d?d(y):null!=y?y:String(x)},n.field&&(a[e[s]].source={field:n.field.key(),key:o})}},d=0;d<u.length;d++)f(d);l&&(a[e[s]]={value:"function"==typeof c.value?c.value(l,i):l,label:"function"==typeof c.label?c.label(h,i):h})}}var G=function(t,e,n){var i="K"===t.qMode?"/qStackedDataPages/*/qData":"/qTreeDataPages/*",r="K"===t.qMode?"qSubNodes":"qNodes",a=q(i,t);return a&&a[0]?(e.tree=T(a[0],n.children||function(t){return t[r]}),e.tree):null};function K(t){for(var e,n,i,r=t.raw().qDataPages.length?t.raw().qDataPages[0].qMatrix:[],a=(n=(e=t).raw().qColumnOrder,i=e.fields(),n&&n.length===i.length?n:i.map((function(t,e){return e}))),s=t.fields(),c=t.fields().filter((function(t){return"dimension"===t.type()})).map((function(t){return a.indexOf(s.indexOf(t))})),u=t.fields().filter((function(t){return"measure"===t.type()})).map((function(t){return a.indexOf(s.indexOf(t))})),l={__root:{__id:"__root",qValues:[]}},h=0;h<r.length;h++){for(var f=r[h],d="__root",p=!1,g=0;g<c.length;g++){var v=f[c[g]],y="".concat(d,"__").concat(v.qText);l[y]||(l[y]=o({__id:y,__parent:d,qValues:[]},v),p=!0),d=y}if(p)for(var m=0;m<u.length;m++){var x=f[u[m]];l[d].qValues.push(x)}}var b,w,_=Object.keys(l).map((function(t){return l[t]}));function k(t){var e,n,i,r,a,o,s,c=t.length,u=new Array(c),l={};for(n=0;n<c;++n)e=t[n],a=u[n]=new C(e),null!=(o=b(e,n,t))&&(o+="")&&(l[s=O+(a.id=o)]=s in l?P:a);for(n=0;n<c;++n)if(a=u[n],null!=(o=w(t[n],n,t))&&(o+="")){if(!(r=l[O+o]))throw new Error("missing: "+o);if(r===P)throw new Error("ambiguous: "+o);r.children?r.children.push(a):r.children=[a],a.parent=r}else{if(i)throw new Error("multiple roots");i=a}if(!i)throw new Error("no root");if(i.parent=j,i.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(N),i.parent=null,0<c)throw new Error("cycle");return i}return b=D,w=I,k.id=function(t){return arguments.length?(b=z(t),k):b},k.parentId=function(t){return arguments.length?(w=z(t),k):w},k.id((function(t){return t.__id})).parentId((function(t){return t.__parent}))(_)}var Z=function(t){for(var e=t.propsArr,n=t.props,i=t.cube,r=t.cache,a=t.itemDepthObject,o=t.f,s=0;s<e.length;s++)for(var c=n[e[s]],u=c.fields?c.fields:[c],l=0;l<u.length;l++){var h=u[l];if(h.field!==o){var f=U(a,Y(h.field,{cube:i,cache:r}));h.accessor=f.nodeFn,h.valueAccessor=f.valueFn,h.attrAccessor=f.attrFn}}};function J(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0,r=e.raw(),a=e.key(),s="S"===r.qMode?K(e):G(r,n,t);if(!s)return null;for(var c=s.height,u=[],l=0;l<=c;l++){var h=null;if(0<l)if("S"===r.qMode){var f=V(r)[l-1];h=n.fields[f]}else{var d=r.qEffectiveInterColumnSortOrder[l-1];l>r.qEffectiveInterColumnSortOrder.length&&(d=r.qDimensionInfo.length),h=n.fields[d]}var p=i.normalizeConfig(o(o({},t),{},{field:h?h.key():void 0}),e),g=p.props,v=p.main,y=Object.keys(g);u[l]={propsArr:y,props:g,main:v};var m=h?Y(h,{cube:r,cache:n}):{fieldDepth:0};Z({propsArr:y,props:g,cube:r,cache:n,itemDepthObject:m,f:h})}for(var x=s.copy().descendants(),b=s.descendants(),w=0;w<b.length;w++){var _=u[b[w].depth].propsArr,k=u[b[w].depth].props,M=u[b[w].depth].main,S=x[w],R=S.data,T=$(M,R,{key:a});X({propsArr:_,props:k,item:S,itemData:R,ret:T,sourceKey:a,isTree:!0}),b[w].data=T}return s}function Q(e,n,i,r){for(var a=Array.isArray(e)?e:[e],o=[],s=0;s<a.length;s++)if(void 0!==a[s].field){var c=n.raw(),u=n.key();if(!G(c,i,e))continue;var h="object"===t(a[s].field)?a[s].field:n.field(a[s].field),f=r.normalizeConfig(a[s],n),d=f.props,p=f.main,g=Object.keys(d),v=Y(h,{cube:c,cache:i}),y=U({fieldDepth:0},v),m=y.nodeFn,x=y.attrFn,b=y.valueFn;Z({propsArr:g,props:d,cube:c,cache:i,itemDepthObject:v,f:h});for(var w=!!a[s].trackBy,_=t(a[s].trackBy),k={},M=[],S=m(i.tree),R=[],T=0;T<S.length;T++){var A=S[T],E=x?x(b(A)):b(A);if(!(p.filter&&!p.filter(E))){var N=$(p,E,{key:u});X({propsArr:g,props:d,item:A,itemData:E,ret:N,sourceKey:u}),w&&r.track({cfg:a[s],itemData:E,obj:N,target:M,tracker:k,trackType:_}),R.push(N)}}w?o.push.apply(o,l(r.collect(M,{main:p,propsArr:g,props:d}))):o.push.apply(o,R)}return o}var tt,et=(function(t){t.exports=function(t,e){if(!t||isNaN(+e))return e;var n,i,r,a,o,s,c,u,l,h,f=t.length,d=t.search(/[0-9\-\+#]/),p=0<d?t.substring(0,d):"",g=t.split("").reverse().join(""),v=g.search(/[0-9\-\+#]/),y=f-v,m=t.substring(y,y+1),x=y+("."===m||","===m?1:0),b=0<v?t.substring(x,f):"";if(t=t.substring(d,x),e="-"===t.charAt(0)?-e:+e,n=e<0?e=-e:0,i=t.match(/[^\d\-\+#]/g),r=i&&i[i.length-1]||".",a=i&&i[1]&&i[0]||",",t=t.split(r),e=+(e=e.toFixed(t[1]&&t[1].length))+"",s=t[1]&&t[1].lastIndexOf("0"),(!(u=e.split("."))[1]||u[1]&&u[1].length<=s)&&(e=(+e).toFixed(s+1)),l=t[0].split(a),t[0]=l.join(""),-1<(o=t[0]&&t[0].indexOf("0")))for(;u[0].length<t[0].length-o;)u[0]="0"+u[0];else 0==+u[0]&&(u[0]="");if((e=e.split("."))[0]=u[0],c=l[1]&&l[l.length-1].length){for(h=e[0],g="",y=h.length%c,f=h.length,x=0;x<f;x++)g+=h.charAt(x),!((x-y+1)%c)&&x<f-c&&(g+=a);e[0]=g}return e[1]=t[1]&&e[1]?r+e[1]:"","0"!==(i=e.join(""))&&""!==i||(n=!1),p+(n?"-":"")+i+b}}(tt={exports:{}},tt.exports),tt.exports);function nt(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}var it={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"μ","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},rt=/%$/,at=/^\(r(0[2-9]|[12]\d|3[0-6])\)/i,ot=/^\(oct\)/i,st=/^\(dec\)/i,ct=/^\(hex\)/i,ut=/^\(bin\)/i,lt=/^\(rom\)/i,ht=/^(\(rom\)|\(bin\)|\(hex\)|\(dec\)|\(oct\)|\(r(0[2-9]|[12]\d|3[0-6])\))/i,ft=/#|0/g;function dt(t,e,n,i){return t=t.toString(e),n[1]===n[1].toUpperCase()&&(t=t.toUpperCase()),10<t.length-t.indexOf(".")&&(t=t.slice(0,t.indexOf(".")+11)),t.replace(".",i||".")}function pt(t,e,n){var i;return at.test(e)?t=dt(t,Number(/\d{2}/.exec(e)[0]),e,n):ot.test(e)?t=dt(t,8,e,n):st.test(e)?t=dt(t,10,e,n):ct.test(e)?t=dt(t,16,e,n):ut.test(e)?t=dt(t,2,e,n):lt.test(e)&&(i="",t<0&&(i="-",t=-t),t=0===(t=Math.floor(t))?"0":t<=5e5?i+(t=function(t,e){for(var n,i="",r=Number(String(t).slice(-3)),a=(t-r)/1e3,o=[0,1,4,5,9,10,40,50,90,100,400,500,900].reverse(),s=["0","I","IV","V","IX","X","XL","L","XC","C","CD","D","CM"].reverse();0<r;)for(n=0;n<o.length;n++)if(o[n]<=r){i+=s[n],r-=o[n];break}for(n=0;n<a;n++)i="M".concat(i);return e[1]!==e[1].toUpperCase()&&(i=i.toLowerCase()),i}(t,e)):e+i+t.toExponential(0)),t}function gt(t,e,n){var i=nt(t);return n?i:new RegExp(i||"",e)}function vt(t,e,n){var i,r,a,o,s,c,u,l,h,f,d,p=t.pattern;0<=p.indexOf("A")&&(p=p.replace("A",""),t.abbreviate=!0),f=e,d=(d=n)&&nt(d),f=f&&nt(f),h=new RegExp("(?:[#0]+".concat(f,")?[#0]+(?:").concat(d,"[#0]+)?")),o=(a=(a=p.match(h))?a[0]:"")?p.substr(0,p.indexOf(a)):p,s=a?p.substring(p.indexOf(a)+a.length):"",a=a||(p?"#":"##########"),e&&e===n&&(r=(i=a.split(n)).pop(),a=i.join("")+n+r,e=""),c=e,e=/,/.test(n)?"¤":",",c&&(a=a.replace(gt(c,"g"),e)),u=n,n=".",u&&(a=a.replace(gt(u,"g"),n)),l=(l=a.match(/#/g))?l.length:0;var g,v=p.split(u);v[1]&&(g=v[1].match(ft)),t.prefix=o||"",t.postfix=s||"",t.pattern=p,t.maxPrecision=g?g.length:2,t.percentage=rt.test(p),t.numericPattern=a||"",t.numericRegex=new RegExp("".concat(gt(e,null,!0),"|").concat(gt(n,null,!0)),"g"),t.groupTemp=c,t.decTemp=u,t.t=e,t.d=n,t.temp=l}var yt=function(){function t(n,i,r,a,o){e(this,t),this.localeInfo=n,this.pattern=i,this.thousandDelimiter=r||",",this.decimalDelimiter=a||".",this.type=o||"numeric",this.patternSeparator=";",this.abbreviations=function(t,e){if(!t||!t.qNumericalAbbreviation)return it;var n={};return t.qNumericalAbbreviation.split(e).forEach((function(t){var e=t.split(":");2===e.length&&(n[e[0]]=e[1])})),n}(n,this.patternSeparator),this.prepare()}return i(t,[{key:"clone",value:function(){var e=new t(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type);return e.subtype=this.subtype,e}},{key:"format",value:function(t,e,n,i){return this.prepare(e,n,i),this.formatValue(t)}},{key:"prepare",value:function(t,e,n){var i;void 0===t&&(t=this.pattern),void 0===e&&(e=this.thousandDelimiter),void 0===n&&(n=this.decimalDelimiter),t?(this._prepared={positive:{d:n,t:e,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""},negative:{d:n,t:e,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""},zero:{d:n,t:e,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""}},i=this._prepared,t=t.split(this.patternSeparator),i.positive.pattern=t[0],i.negative.pattern=t[1],i.zero.pattern=t[2],ht.test(t[0])&&(i.positive.isFunctional=!0),t[1]?ht.test(t[1])&&(i.negative.isFunctional=!0):i.negative=!1,t[2]?ht.test(t[2])&&(i.zero.isFunctional=!0):i.zero=!1,i.positive.isFunctional||vt(i.positive,e,n),i.negative&&!i.negative.isFunctional&&vt(i.negative,e,n),i.zero&&!i.zero.isFunctional&&vt(i.zero,e,n)):this._prepared={pattern:!1}}},{key:"formatValue",value:function(t){var e,n,i,r,a,o,s,c,u,l=this._prepared,h="",f="",d=t;if(isNaN(t))return"".concat(d);if(t=+t,!1===l.pattern)return t.toString();if(0===t&&l.zero)return(l=l.zero).pattern;if(t<0&&l.negative?(l=l.negative,t=-t):l=l.positive,a=l.d,o=l.t,l.isFunctional)t=pt(t,l.pattern,a);else{if(l.percentage&&(t*=100),l.abbreviate){var p,g,v=Object.keys(this.abbreviations).map((function(t){return parseInt(t,10)})).sort((function(t,e){return t-e})),y=v[0];for(s=0,n=Number(Number(t).toExponential().split("e")[1]);y<=n&&s<v.length;)y=v[++s];0<s&&(p=v[s-1]),p&&0<n&&0<p?g=p:(n<0&&p<0||!p)&&(y<0&&y-n<=l.maxPrecision?g=y:p<=n&&!(0<y&&-n<=l.maxPrecision)&&(g=p)),g&&(h=this.abbreviations[g],t/=Math.pow(10,g))}if(i=Math.abs(t),e=l.temp,u=(c=l.numericPattern).split(a)[1],"I"===this.type&&(t=Math.round(t)),r=t,u||"#"!==c.slice(-1)[0])if(1e15<=i||0<i&&i<=1e-14)t=i?i.toExponential(15).replace(/\.?0+(?=e)/,""):"0";else{var m=Number(t.toFixed(Math.min(20,u?u.length:0)).split(".")[0]),x=c.split(a)[0];if(t=et(x+=a,m)||"0",u){var b=Math.max(0,Math.min(14,u.length)),w=u.replace(/#+$/,"").length,_=("I"===this.type?0:i%1).toFixed(b).slice(2).replace(/0+$/,"");for(s=_.length;s<w;s++)_+="0";_&&(t+=a+_)}else 0===m&&(r=0)}else if(i>=Math.pow(10,e)||i<1||i<1e-4)0===t?t="0":i<1e-4||1e20<=i?(t=(t=r.toExponential(Math.max(1,Math.min(14,e))-1)).replace(/\.?0+(?=e)/,""),f=""):0<=(t=t.toPrecision(Math.max(1,Math.min(14,e)))).indexOf(".")&&(t=(t=t.replace(t.indexOf("e")<0?/0+$/:/\.?0+(?=e)/,"")).replace(".",a));else{for(c+=a,e=Math.max(0,Math.min(20,e-Math.ceil(Math.log(i)/Math.log(10)))),s=0;s<e;s++)c+="#";t=et(c,t)}t=t.replace(l.numericRegex,(function(t){return t===o?l.groupTemp:t===a?l.decTemp:""})),r<0&&!/^-/.test(t)&&(t="-".concat(t))}return l.prefix+t+f+h+l.postfix}}],[{key:"getStaticFormatter",value:function(){return{prepare:function(){},formatValue:function(t){return"".concat(t)}}}}]),t}();function mt(t,e){var n,i,r=1<arguments.length&&void 0!==e?e:{},a=r.size,o=void 0===a?5e3:a,s=r.multipleArguments,c=void 0!==s&&s,u=r.toKey,l=void 0===u?function(t){return t}:u,h=Object.create(null),f=Object.create(null),d=0,p=0;return(n=c?function(){return i=l.apply(void 0,arguments),n.has(i)?n.get(i):n.set(i,t.apply(void 0,arguments))}:function(e){return i=l(e),n.has(i)?n.get(i):n.set(i,t(e))}).set=function(t,e){return o<=d&&(delete h[f[p]],delete f[p],d--,p++),h[t]=e,f[d]=t,d++,e},n.get=function(t){return h[t]},n.has=function(t){return t in h},n.clear=function(){h=Object.create(null),f=Object.create(null),p=d=0},n.size=function(){return d},n}function xt(t,e,n,i,r){var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c(yt,e)}(r,t,e,n,i),o=mt(a.formatValue.bind(a),{toKey:function(t){return isNaN(t)?t:+t}});function s(t){return o(t)}return s.format=function(t,e,n,i){return o.clear(),a.format(e,t,n,i)},s.pattern=function(t){return t&&(o.clear(),a.pattern=t,a.prepare()),a.pattern},s}var bt={AUTO:"U",INTEGER:"I",NUMBER:"R",FIXED_TO:"F",MONEY:"M",DATE:"D",TIME:"T",DATE_TIME:"TS",INTERVAL:"IV"},wt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],_t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],kt=["January","February","March","April","May","June","July","August","September","October","November","December"],Mt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function St(t,e){for(var n=t.length;n<e;n++)t="0".concat(t);return t}function Rt(t){var e=t.toString().split(".");return e[1]?e=Number("0.".concat(e[1])):0}function Tt(t,e){var n,i,r,a,o,s,c=(r=24*Rt(i=t),a=60*Rt(r),o=60*Rt(a),s=1e3*Rt(o),{d:Math.floor(i),h:Math.floor(r),m:Math.floor(a),s:Math.floor(o),f:Math.round(s)}),u=c.d,l=c.h,h=c.m,f=c.s,d=c.f,p=0;/w+|t+/gi.test(e)&&(n=new Date(Date.UTC(1899,11,30+Math.floor(t),0,0,Math.round(86400*(t-Math.floor(t))))),isNaN(n.getTime())&&(n=null)),/D+/gi.test(e)||(l+=24*u),/h+/gi.test(e)||(h+=60*l),/m+/gi.test(e)||(f+=60*h),/w+/gi.test(e)&&(p=n?n.getDay()-1:0)<0&&(p=6);var g="";return n&&(g=12<=n.getUTCHours()?"pm":"am"),{year:0,month:0,day:p,date:u,h:l,m:h,s:f,f:d,t:g}}var At=function(){function t(n,i,a){e(this,t);var o,s=n||{};s.qCalendarStrings||(s.qCalendarStrings={qLongDayNames:wt,qDayNames:_t,qLongMonthNames:kt,qMonthNames:Mt}),this.localeInfo=s,this.locale_days=s.qCalendarStrings.qLongDayNames.slice(),this.locale_days_abbr=s.qCalendarStrings.qDayNames.slice(),this.locale_months=s.qCalendarStrings.qLongMonthNames.slice(),this.locale_months_abbr=s.qCalendarStrings.qMonthNames.slice(),i||(i=(r(o={},bt.TIME,s.qTimeFmt||"hh:mm:ss"),r(o,bt.DATE,s.qDateFmt||"YYYY-MM-DD"),r(o,bt.DATE_TIME,s.qTimestampFmt||"YYYY-MM-DD hh:mm:ss"),o)[a]);this.pattern=i}return i(t,[{key:"clone",value:function(){var e=new t(this.localeInfo,this.pattern);return e.subtype=this.subtype,e}},{key:"format",value:function(t,e){e=(e=e||(this.pattern?this.pattern:"YYYY-MM-DD hh:mm:ss")).replace(/\[.+]|\[|]/g,"");var n,i,r,a,o,s=/t+/gi.test(e);n=t instanceof Date?(r=s,a=(i=t).getUTCHours(),o=i.getUTCDay()-1,r&&(a=(a%=12)||12),o<0&&(o=6),{year:i.getUTCFullYear(),month:i.getUTCMonth(),day:o,date:i.getUTCDate(),h:a,m:i.getUTCMinutes(),s:i.getUTCSeconds(),f:i.getUTCMilliseconds(),t:12<=i.getUTCHours()?"pm":"am"}):(t<0&&(t=-t,e="-".concat(e)),Tt(t,e));var c,u,l=(c=this,u=n,{"Y+|y+":{Y:"".concat(Number("".concat(u.year).slice(-2))),YY:St("".concat(u.year).slice(-2),2),YYY:St("".concat(u.year).slice(-3),3),def:function(t){return St("".concat(u.year),t.length)}},"M+":{M:u.month+1,MM:St("".concat(u.month+1),2),MMM:c.locale_months_abbr[u.month],def:c.locale_months[u.month]},"W+|w+":{W:u.day,WW:St("".concat(u.day),2),WWW:c.locale_days_abbr[u.day],def:c.locale_days[u.day]},"D+|d+":{D:u.date,def:function(t){return St("".concat(u.date),t.length)}},"h+|H+":{h:u.h,def:function(t){return St("".concat(u.h),t.length)}},"m+":{m:u.m,def:function(t){return St("".concat(u.m),t.length)}},"s+|S+":{s:u.s,def:function(t){return St("".concat(u.s),t.length)}},"f+|F+":{def:function(t){var e="".concat(u.f),n=t.length-e.length;if(0<n)for(var i=0;i<n;i++)e+="0";else n<0&&(e=e.slice(0,t.length));return e}},"t{1,2}|T{1,2}":{def:function(t){var e=u.t;return t[0].toUpperCase()===t[0]&&(e=e.toUpperCase()),e.slice(0,t.length)}}}),h=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&h.push(f);var d=new RegExp(h.join("|"),"g");return e.replace(d,(function(t){var e,n,i;for(n in l)if(Object.prototype.hasOwnProperty.call(l,n)&&(e=new RegExp(n)).test(t))break;if(!e)return"";for(var r in l[n])if(r===t||r.toLowerCase()===t){void 0===(i=l[n][r])&&(i=l[n][r.toLowerCase()]);break}return void 0===i&&(i=l[n].def),"function"==typeof i&&(i=i(t)),i}))}}]),t}();function Et(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c(At,e)}var Nt=864e5;function Ct(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"TS",i=Et(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e,n),r=mt(i.format.bind(i),{toKey:function(e){return"object"===t(e)&&"function"==typeof e.getTime?e.getTime():e}});function a(t){return n!==bt.INTERVAL?(e=t,new Date(Date.UTC(1899,11,30+Math.floor(e),0,0,0,Math.round(Nt*(e-Math.floor(e)))))):t;var e}function o(t){return t=a(t),r(t)}return o.format=function(t,e){return r.clear(),e=a(e),i.format(e,t)},o.locale=function(a){return i=Et(a,e,n),r=mt(i.format.bind(i),{toKey:function(e){return"object"===t(e)?e.getTime():e}}),this},o.qtype=function(t){return void 0!==t&&(n=t,r.clear()),n},o}function zt(t){var e,n=0<arguments.length&&void 0!==t?t:{},i=n.meta,r=n.id,a=n.key,o=n.localeInfo,s=n.fieldExtractor,c=n.value,u=n.type,l=n.sourceField,h=c||("dimension"===u?function(t){return t.qElemNo}:function(t){return t.qValue}),f="dimension"===u?"first":"avg",d=function(t,e){if(t&&t.qNumFormat&&-1!==["D","T","TS","IV"].indexOf(t.qNumFormat.qType))return Ct(t.qNumFormat.qFmt,t.qNumFormat.qType,e);var n="#",i=e&&void 0!==e.qThousandSep?e.qThousandSep:",",r=e&&void 0!==e.qDecimalSep?e.qDecimalSep:".",a="U",o=t&&!!t.qIsAutoFormat;return!(o=!t||!t.qNumFormat||(n=t.qNumFormat.qFmt||n,i=t.qNumFormat.qThou||i,r=t.qNumFormat.qDec||r,a=t.qNumFormat.qType||a,o&&-1===["M"].indexOf(t.qNumFormat.qType)))&&"U"!==a||(n="#".concat(r,"##A"),a="U"),xt(n,i,r,a,e)}(i,o),p={id:function(){return r},key:function(){return a},raw:function(){return i},title:function(){return i.qFallbackTitle||i.label},type:function(){return u},origin:function(){return l},items:function(){return e=e||s(p)},min:function(){return i.qMin},max:function(){return i.qMax},value:h,label:function(t){return t.qText||""},reduce:f,reduceLabel:"dimension"===u?"first":function(t,e){return d(e)},formatter:function(){return d},tags:function(){return i.qTags}};return p}function Ot(t,e,n,i,r){return(e[t]||[]).map((function(e,a){var o="".concat(i?"".concat(i,"/"):"").concat(t,"/").concat(a),s={instance:zt(w({id:"".concat(n?"".concat(n,"/"):"").concat(o),key:o,meta:e},r))};return s.attrDims=Ot("qAttrDimInfo",e,n,o,w({},r,{value:function(t){return t.qElemNo},type:"dimension"})),s.attrExps=Ot("qAttrExprInfo",e,n,o,w({},r,{value:function(t){return t.qNum},type:"measure"})),s.measures=Ot("qMeasureInfo",e,n,o,w({},r,{value:function(t){return t.qValue},type:"measure"})),s}))}function jt(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=i.key,a=i.data,s=i.config,c=void 0===s?{}:s,u={fields:[],wrappedFields:[],allFields:[],virtualFields:[]},h=a;if(!h)throw new Error('Missing "data" input');if(!h.qDimensionInfo)throw new Error('The "data" input is not recognized as a hypercube');var f=jt.util,d={cache:u,cube:h,localeInfo:c.localeInfo,fieldExtractor:null,pages:null,hierarchy:function(){return null},virtualFields:c.virtualFields},p={key:function(){return r},raw:function(){return h},field:function(t){return function(t,e){var n=e.cache;if("number"==typeof t)return n.fields[t];var i=n.allFields;if("function"==typeof t){for(var r=0;r<i.length;r++)if(t(i[r]))return i[r];return!1}if("string"==typeof t){for(var a=0;a<i.length;a++)if(i[a].key()===t||i[a].title()===t)return i[a]}else if(t&&-1!==i.indexOf(t))return t;throw Error("Field not found: ".concat(t))}(t,d)},fields:function(){return u.fields.slice()},extract:function(t){return d.extractor(t,p,u,f)},hierarchy:function(t){return d.hierarchy(t,p,u,f)},_cache:function(){return u}};"K"===h.qMode||"T"===h.qMode||!h.qMode&&h.qNodesOnDim?(d.extractor=Q,d.hierarchy=J,d.pages="K"===h.qMode?h.qStackedDataPages:h.qTreeDataPages):"S"===h.qMode?(d.extractor=S,d.pages=h.qDataPages,d.hierarchy=J):d.extractor=function(){return[]},d.fieldExtractor=function(t){return d.extractor({field:t},p,u,f)};var g="S"===h.qMode?function(t){return t.qElemNumber}:void 0,v="S"===h.qMode?function(t){return t.qNum}:void 0;(t=u.wrappedFields).push.apply(t,l(Ot("qDimensionInfo",h,r,"",w({},d,{value:g,type:"dimension"})))),(e=u.wrappedFields).push.apply(e,l(Ot("qMeasureInfo",h,r,"",w({},d,{value:v,type:"measure"})))),u.fields=u.wrappedFields.map((function(t){return t.instance}));return function t(e){e.forEach((function(e){u.allFields.push(e.instance),t(e.measures),t(e.attrDims),t(e.attrExps)}))}(u.wrappedFields),(c.virtualFields||[]).forEach((function(t){var e=p.field(t.from),n=zt(o({meta:e.raw(),id:"".concat(r,"/").concat(t.key),sourceField:e,fieldExtractor:function(t){return d.extractor({field:t},p,u,f)},key:t.key,type:e.type(),localeInfo:d.localeInfo,value:e.value},t.override||{}));u.virtualFields.push(n)})),(n=u.allFields).push.apply(n,l(u.virtualFields)),p}var Pt=[["qHyperCube","qHyperCubeDef"],["qTreeData","qTreeDataDef"],["qDimensionInfo","qDimensions"],["qMeasureInfo","qMeasures"],["qAttrDimInfo","qAttributeDimensions"],["qAttrExprInfo","qAttributeExpressions"]],Dt=/\/qDimensionInfo(?:\/(\d+))?/,It=/\/qMeasureInfo\/(\d+)/,qt=/\/qAttrDimInfo\/(\d+)(?:\/(\d+))?/,Ft=/\/qAttrExprInfo\/(\d+)/,Lt=/\/?qHyperCube/,Bt=/\/?qTreeData/,Wt=function(t){return"".concat(t.substr(0,t.indexOf("/qHyperCubeDef")+14))},Ht=function(t){return"".concat(t.substr(0,t.indexOf("/qTreeDataDef")+13))};function Vt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,i=e.byCells,r=e.primarySource,a=[],o={},s=t.isActive(),c=!1;return t.brushes().forEach((function(t){var e=function(t,e){var n=t,i=-1,r=-1,a="",o=function(t){return t};Lt.test(t)?(a="".concat(n.substr(0,n.indexOf("qHyperCube")+10)),o=Wt):Bt.test(t)&&(a="".concat(n.substr(0,n.indexOf("qTreeData")+9)),o=Ht);var s=!0;if(Dt.test(t)&&(i=+Dt.exec(t)[1]),It.test(t)&&(r=+It.exec(t)[1]),qt.test(t)){r=-1,i=0;var c=+qt.exec(n)[2];isNaN(c)||(i=c,n=n.replace(/\/\d+$/,"")),s=!1}if(Ft.test(t)){var l=r;if(e){r=0;var h=q(a,e);r+=(h.qMeasureInfo||[]).length,-1<i?(r=h.qDimensionInfo.slice(0,i).reduce((function(t,e){return t+e.qAttrExprInfo.length}),r),i=-1):(r=h.qDimensionInfo.reduce((function(t,e){return t+e.qAttrExprInfo.length}),r),r=h.qMeasureInfo.slice(0,l).reduce((function(t,e){return t+e.qAttrExprInfo.length}),r)),r+=+Ft.exec(n)[1]}else-1<i?(i=-1,r=+Ft.exec(n)[1]):r+=+Ft.exec(n)[1]+1}return Pt.forEach((function(t){var e=u(t,2),i=e[0],r=e[1];n=n.replace(i,r)})),s&&(n=o(n)),n&&"/"!==n[0]&&(n="/".concat(n)),{measureIdx:r,dimensionIdx:i,path:n}}(t.id,n);if("range"===t.type&&-1<e.measureIdx&&-1<e.dimensionIdx){var s=t.brush.ranges();s.length&&(c=!0,o.multiRangeSelectTreeDataValues||(o.multiRangeSelectTreeDataValues={path:e.path,ranges:[]}),s.forEach((function(t){return o.multiRangeSelectTreeDataValues.ranges.push({qMeasureIx:e.measureIdx,qDimensionIx:e.dimensionIdx,qRange:{qMin:t.min,qMax:t.max,qMinInclEq:!0,qMaxInclEq:!0}})})))}else{if("range"===t.type&&-1<e.measureIdx){var l=t.brush.ranges();l.length&&(c=!0,o.rangeSelectHyperCubeValues||(o.rangeSelectHyperCubeValues={path:e.path,ranges:[]}),l.forEach((function(t){return o.rangeSelectHyperCubeValues.ranges.push({qMeasureIx:e.measureIdx,qRange:{qMin:t.min,qMax:t.max,qMinInclEq:!0,qMaxInclEq:!0}})})))}if("range"===t.type&&-1<e.dimensionIdx){var h=t.brush.ranges();h.length&&(c=!0,o.selectHyperCubeContinuousRange||(o.selectHyperCubeContinuousRange={path:e.path,ranges:[]}),h.forEach((function(t){return o.selectHyperCubeContinuousRange.ranges.push({qDimIx:e.dimensionIdx,qRange:{qMin:t.min,qMax:t.max,qMinInclEq:!0,qMaxInclEq:!1}})})))}if("value"===t.type&&-1<e.dimensionIdx)if(i)if(n&&n.qHyperCube&&("P"===n.qHyperCube.qMode||"T"===n.qHyperCube.qMode||"K"===n.qHyperCube.qMode)){var f=n.qHyperCube,d=f.qNoOfLeftDims,p=f.qEffectiveInterColumnSortOrder.indexOf(e.dimensionIdx);if(o.selectPivotCells||(o.selectPivotCells={path:e.path,cells:[]}),t.id===r||!r){var g=t.brush.values().map((function(t){return+t})).filter((function(t){return!isNaN(t)}));(0===d||d<=p)&&-1<d?g.forEach((function(t){o.selectPivotCells.cells.push({qType:"T",qCol:t,qRow:p-d})})):g.forEach((function(t){o.selectPivotCells.cells.push({qType:"L",qCol:e.dimensionIdx,qRow:t})})),c=!!o.selectPivotCells.cells.length}}else o.selectHyperCubeCells||(o.selectHyperCubeCells={path:e.path,cols:[]}),o.selectHyperCubeCells.cols.push(e.dimensionIdx),t.id!==r&&(r||o.selectHyperCubeCells.values)||(o.selectHyperCubeCells.values=t.brush.values().map((function(t){return+t})).filter((function(t){return!isNaN(t)})),c=!!o.selectHyperCubeCells.values.length);else{var v=t.brush.values().map((function(t){return+t})).filter((function(t){return!isNaN(t)}));c=!!v.length,a.push({params:[e.path,e.dimensionIdx,v,!1],method:"selectHyperCubeValues"})}}})),!c&&s?[{method:"resetMadeSelections",params:[]}]:(o.rangeSelectHyperCubeValues&&a.push({method:"rangeSelectHyperCubeValues",params:[o.rangeSelectHyperCubeValues.path,o.rangeSelectHyperCubeValues.ranges,[],!0]}),o.selectHyperCubeContinuousRange&&a.push({method:"selectHyperCubeContinuousRange",params:[o.selectHyperCubeContinuousRange.path,o.selectHyperCubeContinuousRange.ranges]}),o.selectHyperCubeCells&&a.push({method:"selectHyperCubeCells",params:[o.selectHyperCubeCells.path,o.selectHyperCubeCells.values,o.selectHyperCubeCells.cols]}),o.selectPivotCells&&a.push({method:"selectPivotCells",params:[o.selectPivotCells.path,o.selectPivotCells.cells]}),o.multiRangeSelectTreeDataValues&&a.push({method:"multiRangeSelectTreeDataValues",params:[o.multiRangeSelectTreeDataValues.path,o.multiRangeSelectTreeDataValues.ranges]}),a)}function Yt(t){jt.util=t.data("matrix").util,t.data("q",jt),t.formatter("q-number",xt),t.formatter("q-time",Ct)}return Yt.qBrushHelper=Vt,Yt.selections=Vt,Yt}))}}]);