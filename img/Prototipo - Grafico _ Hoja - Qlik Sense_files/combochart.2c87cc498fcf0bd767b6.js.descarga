/*! For license information please see combochart.2c87cc498fcf0bd767b6.js.LICENSE.txt */
/*!
 * sense-client@7.144.6
 * 
 * Copyright(C) 2021 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[58,31,34],{"+Lr6":function(t,e,i){"use strict";i.r(e);var a=i("qIEf");var n=i.n(a);var s=i("4nJ1");var r=i("mWu2");var o=i("sWge");var l=i("BGgI");var c=i("bPi8");var h=i("7xSA");var u=i("HBwF");var d=25569;var f=86400;var p=1440;var v={dateToQlikTimestamp:function t(e){return e.getTime()/1e3/86400-e.getTimezoneOffset()/60/24+d},getUnixDate:function t(e){return new Date(1899,11,30+e)},calculateTicks:function t(e,i,a,n,s,r){var o=this.getUnixDate(i);var l=o.getFullYear();var c=o.getMonth();var h=o.getDate();var u=a-i;var d=n-a;var v=e/d;var m=v/1440;var g=v/f;var x=366*v;var _=3*v*30;var y=s.second/g;var b=s.minute/m;var M=s.date/_;var w=s.year/x;var S;var D=0;var A;var k=0;var C=null;var q=null;var L=null;var P=null;var I=null;var T=null;var O={plotMin:a,plotMax:n,tickMin:0,tickMax:0,mainTickValues:[],mainDates:[],secondaryTickValues:[],secondaryDates:[]};if(y<1){C=1;k=1/f}else if(y<2){C=2;k=1/f*2}else if(y<5){C=5;k=1/f*5}else if(y<10){C=10;k=1/f*10}else if(y<30){C=30;k=1/f*30}else if(b<1){q=1;k=1/p}else if(b<2){q=2;k=1/p*2}else if(b<5){q=5;k=1/p*5}else if(b<10){q=10;k=1/p*10}else if(b<30){q=30;k=1/p*30}else if(b<60){L=1;k=1/24}else if(b<120){L=2;k=2/24}else if(b<360){L=6;k=.25}else if(b<720){L=12;k=.5}else if(M<1/90){P=1;k=1}else if(M<2/90){P=2;k=2}else if(M<7/90){P=7;k=7}else if(M<31/90){I=1;k=31}else if(M<1){I=3;k=90}else if(w<1){T=1;k=366}else if(w<2){T=2;k=732}else if(w<5){T=5;k=1826.25}else{T=10;k=3652.5}A=Math.floor((u+i%1)/k);while(D<n){S=T?new Date(l+A*T,0,1):I?new Date(l,c+A*I,1):P?new Date(l,c,h+A*P):L?new Date(l,c,h,0+A*L):q?new Date(l,c,h,0,0+A*q):new Date(l,c,h,0,0,0+A*C);D=this.dateToQlikTimestamp(S);O.secondaryDates.push(S);O.secondaryTickValues.push(D);var N=Math.floor(D);if(!r&&!T&&!I&&!P&&O.mainTickValues[O.mainTickValues.length-1]!==N){O.mainDates.push(this.getUnixDate(N));O.mainTickValues.push(N)}A++}O.tickSpacing=k;O.tickMinValue=O.secondaryTickValues[0];O.tickMaxValue=O.secondaryTickValues[O.secondaryTickValues.length-1];return O}};var m=v;function g(t){g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return g(t)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function y(t,e,i){e&&_(t.prototype,e);i&&_(t,i);return t}function b(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&M(t,e)}function M(t,e){M=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return M(t,e)}function w(t){var e=A();return function i(){var a=k(t),n;if(e){var s=k(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return S(this,n)}}function S(t,e){if(e&&("object"===g(e)||"function"===typeof e))return e;return D(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function k(t){k=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return k(t)}var C=function(t){b(i,t);var e=w(i);function i(){var t;x(this,i);t=e.call(this);t.mainDates=[];t.secondaryDates=[];return t}y(i,[{key:"calculateTicks",value:function t(e,i){var a=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;var n=m.calculateTicks(this._calculationSize,a,this._explicitPlotMin,this._explicitPlotMax,e,i);this._mergeResult(n);if(0===this.secondaryValues.length&&!Number.isNaN(+this.plotMin)){this.secondaryValues=[this.plotMin];this.secondaryDates=[m.getUnixDate(this.plotMin)]}0===this._tickSpacing&&(this._tickSpacing=1);if(this._showExplicitMinMax){var s=this.secondaryValues[0];var r=this.secondaryDates[0];this.secondaryValues[0]=n.plotMin;this.secondaryDates[0]=m.getUnixDate(n.plotMin);if(s-n.plotMin>=n.tickSpacing/2){this.secondaryValues.splice(1,0,s);this.secondaryDates.splice(1,0,r)}var o=n.mainTickValues[n.mainTickValues.length-1];if(n.plotMax-o<=n.tickSpacing/2){this.secondaryValues[n.mainTickValues.length-1]=n.plotMax;this.secondaryDates[n.secondaryDates.length-1]=m.getUnixDate(n.plotMax)}else{this.secondaryValues.push(n.plotMax);this.secondaryDates.push(m.getUnixDate(n.plotMax))}}}},{key:"_mergeResult",value:function t(e){this._tickSpacing=e.tickSpacing;this.plotMin=e.plotMin;this.plotMax=e.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=e.tickMinValue;this.tickMax=e.tickMaxValue;this.mainValues=e.mainTickValues;this.mainDates=e.mainDates;this.secondaryValues=e.secondaryTickValues;this.secondaryDates=e.secondaryDates}},{key:"getValues",value:function t(){return{mainValues:this.mainValues,mainDates:this.mainDates,secondaryValues:this.secondaryValues,secondaryDates:this.secondaryDates}}}]);return i}(u["a"]);var q=C;var L=i("hpzB");var P=1;var I=30;var T=150;var O=5;var N=80;var E=60;var R={YEAR:1,DATE:2,MINUTE:3,SECOND:4};function V(){var t=this._scale.getValues();var e=t.secondaryValues;var i=t.secondaryDates;var a=[];var n;for(n=0;n<e.length;n++)a.push({position:0,value:e[n],opacity:1,label:e[n]});var s=this._getLabels(a,true);s.labelsBetweenTicks=true;s.align=this.yMirrorMode?"right":"left";s.dates=i;this._levels.splice(1);this._levels.unshift(s)}function z(t,e,i,a){var n=i.length*a;var s=0;var r=t._formatter;var o=t._renderer;var l=t._style.label.font;var c=0;for(var h=0;h<i.length;h++){if(e[h]<I)s++;else if(e[h]<T&&r){c=o.getTextWidth(r.formatValue(i[h]),l);c>e[h]-2*t._labelPadding&&s++}if(s>n)return false}return true}function F(t,e){var i;var a=function a(){var n=t[i];var s=z(e,n.widths,n.labels,.1);if(s)return"break";var r=1.1;var o=n.widths.map((function(t){return t*r}));var l=z(e,o,n.labels,.1);if(l){++i;return"break"}};for(i=0;i<t.length;++i){var n=a();if("break"===n)break}e.indicators=i>0&&i<t.length?t[i-1]:null;if(e.indicators){var s=L["a"].getAvgTickWidth(e.indicators.positions)||e._plotSize;var r=L["a"].getAvgTickWidth(t[i].positions)||e._plotSize;s<O||r<N?e.indicators=null:e._snapTicksAvgWidth=s}return t.slice(i,i+2)}function j(t,e){var i=t.map((function(t){var i=t.qTicks;var a=[];var n=[];var s=[];var r=[];var o=[];var l=[];var c;var h;var u=true;i.forEach((function(t){c=t.qStart;a.push(c);r.push(e.isLabelSelected(t.qStart,t.qEnd)?1:e._globalAlpha);o.push(t.qText);l.push(t.qualifiedText);h=e.getPositionOfValue(c);n.push(Math.abs(h-e.getPositionOfValue(t.qEnd)));h=L["a"].roundToHalf(h);s.push(h);t.qStart!==t.qEnd-1&&(u=false)}));if(i.length>0){c=i[i.length-1].qEnd;a.push(c);h=e.getPositionOfValue(c);h=L["a"].roundToHalf(h);s.push(h)}return{align:e.yMirrorMode?"right":"left",labelsBetweenTicks:true,values:a,widths:n,positions:s,opacities:r,labels:o,qualifiedLabels:l[0]?l:null,labelMode:P,labelSpace:e._wantedLabelSpacePerLevel,dayLevel:u,rangeLabels:true,explicitLabels:true}}));i=F(i,e);return i}function H(t){var e;var i;var a=[];var n;var s;var r;for(e=0;e<t.length;e++){s=t[e].qTicks;for(i=0;i<t.length;i++){r=t[i].qTicks;if(e===i||!s[0]||!r[0]||"string"===typeof s[0].qualifiedText||"string"===typeof r[0].qualifiedText)continue;if(s.length===r.length){n=s.every((function(t,e){return t.qStart===r[e].qStart&&t.qEnd===r[e].qEnd}));if(n)if(t[e].qTags.includes("$qualified")){r.forEach((function(t,e){t.qualifiedText=s[e].qText}));a.push(e)}else{s.forEach((function(t,e){t.qualifiedText=r[e].qText}));a.push(i)}}}}a.sort((function(t,e){return e-t}));a.forEach((function(e){t.splice(e,1)}))}function B(){for(var t=0;t<this._levels.length;++t){var e=this._levels[t];for(var i=0;i<e.values.length;++i){var a=e.values[i];var n=this.getPositionOfValue(a);e.positions[i]=L["a"].roundToHalf(n);if(i<e.values.length-1){var s=this.isLabelSelected(a,e.values[i+1]);e.opacities[i]=s?1:this._globalAlpha}}}}function $(){if(!this._formatter.localeInfo)return;this._levelFormattingPatterns=[];this._labelGranularity===R.YEAR?this._levelFormattingPatterns.push("YYYY"):this._labelGranularity===R.DATE?this._levelFormattingPatterns.push(this._formatter.localeInfo.qDateFmt):this._labelGranularity===R.MINUTE?this._levelFormattingPatterns.push(this._timeformatPatterns.minuteLevel):this._labelGranularity===R.SECOND&&this._levelFormattingPatterns.push(this._timeformatPatterns.secondLevel);this._levelFormattingPatterns.push(this._formatter.localeInfo.qDateFmt)}function W(t,e){var i=e/t;var a=3*i*30;var n=i/2;var s=i/24/60/2;s>this._approxLabelWidths.second?this._labelGranularity=R.SECOND:n>this._approxLabelWidths.minute?this._labelGranularity=R.MINUTE:a>this._approxLabelWidths.date?this._labelGranularity=R.DATE:this._labelGranularity=R.YEAR}var U=h["a"].extend("TimeAxis",{init:function t(){this._super.apply(this,[].slice.call(arguments));this._approxLabelWidths={year:E,date:E,minute:E,second:E};this._levelFormattingPatterns=["YYYY","YYYY-mm-yy"];this._labelGranularity=R.YEAR;this._timeformatPatterns={minuteLevel:"hh:mm",secondLevel:"hh:mm:ss"}},_initScales:function t(){this._scale=new q},_generateExplicitLabels:function t(){var e=this;var i=false;if(this._explicitLabels.length){this._levels=j(this._explicitLabels,this);if(this._levels.length){this._calculationSize/(this._scaleDetails.explicitPlotMax-this._scaleDetails.explicitPlotMin)/2>this._approxLabelWidths.minute&&V.call(this);i=true;if(this._levels.length>1){this._levels[1].qualifiedLabels&&(this._levels[1].labels=this._levels[1].qualifiedLabels);this._levels[1].outOfSyncWithLevelBelow=!this._levels[1].dayLevel&&!this._levels[1].values.every((function(t){return t<e._scale._dataMin||t>e._scale._dataMax||e._levels[0].values.indexOf(t)>-1}))}this.ticks=L["a"].getTicks(this._levels[0].values,this._padding,this._plotSize);this.minorTicks=[];if(this._levels.length>1){this.minorTicks=this.ticks.filter((function(t){return-1===this._levels[1].values.indexOf(t.value)}),this);this.ticks=this.ticks.filter((function(t){return-1!==this._levels[1].values.indexOf(t.value)}),this)}}}return i},calculatePreliminaryLabelSpace:function t(){var e=this._super.apply(this,arguments);e.relevantLabelSize*=2;return e},calculateLabelSpace:function t(){var e=this._super.apply(this,arguments);e.relevantLabelSize*=2;return e},_initLevels:function t(){if(this.useExplicitLabels){B.call(this);this._levels[0].formatPattern=this._levelFormattingPatterns[0]}else{this._levels=[this._getLabels(this.minorTicks,true)];this._levels[0].labelsBetweenTicks=true;this._levels[0].align=this.yMirrorMode?"right":"left";this._levels[0].dates=this._minorTickDates;this._levels[0].formatPattern=this._levelFormattingPatterns[0];if(this.ticks.length){this._levels.push(this._getLabels(this.ticks,true));this._levels[1].labelsBetweenTicks=true;this._levels[1].align=this.yMirrorMode?"right":"left";this._levels[1].dates=this._tickDates;this._levels[1].formatPattern=this._levelFormattingPatterns[1]}}},_calculateScale:function t(e){if(0===e)return;var i=this._scaleDetails;var a=Number.isNaN(+i.realDataMin)?i.dataMin:i.realDataMin;var n=Number.isNaN(+i.realDataMax)?i.dataMax:i.realDataMax;var s=Number.isNaN(+i.explicitPlotMin)||null===i.explicitPlotMin?a:i.explicitPlotMin;var r=Number.isNaN(+i.explicitPlotMax)||null===i.explicitPlotMax?n:i.explicitPlotMax;var o;o=this.isRadial()?96:Math.max(E,this._getApproximateLabelWidth(s,r,this._levelFormattingPatterns[0])+this._labelPadding);var l=this.isVertical()?4*this._fontHeight:o;var c=Math.max(2,e/l/i.tickMultiplier+1);l=e/(c-1);i.usedDataMin=a;i.usedDataMax=n;i.minTickSpacingInPixel=l;i.plotSize=this._plotSize;i.calculationSize="undefined"!==typeof e?e:this._calculationSize;i.fontHeight=this._fontHeight;i.showExplicitMinMax=false;Object.keys(i).forEach((function(t){this._scale["_".concat(t)]=i[t]}),this);this._scale.calculateTicks(this._approxLabelWidths,"T"===this._formatter.type)},_generateTickObjects:function t(e,i){this.useExplicitLabels=this._generateExplicitLabels();if(!this.useExplicitLabels){var a=e.getValues();this.ticks=L["a"].getTicks(a.mainValues,this._padding,i);this.minorTicks=L["a"].getTicks(a.secondaryValues,this._padding,i);this._tickDates=a.mainDates;this._minorTickDates=a.secondaryDates}},_updateTickFormatting:function t(e,i){var a;var n;var s;var r;for(a=0;a<e.length;a++)if(!e[a].explicitLabels){s=e[a].dates&&e[a].values.length!==e[a].dates.length;r=i._dateFormatter&&e[a].dates&&e[a].dates.length&&!s;for(n=0;n<e[a].values.length;n++)e[a].labels[n]=r?i._dateFormatter.format(e[a].dates[n],e[a].formatPattern):i.formatValue(e[a].values[n])}},formatValue:function t(e){if(this._discrete||!this._formatter)return"".concat(e);var i="YYYY"===this._levels[0].formatPattern?void 0:this._levels[0].formatPattern;return this._formatter.formatValue(e,i)},setLabels:function t(e){this._explicitLabels=s["a"].extend(true,[],e).reverse();H(this._explicitLabels)},updateFormatter:function t(){this._super();if(!this._formatter.localeInfo)return;var e=/t+/gi.test(this._formatter.localeInfo.qTimestampFmt);this._timeformatPatterns.minuteLevel=e?"h:mm tt":"hh:mm";this._timeformatPatterns.secondLevel=e?"h:mm:ss tt":"hh:mm:ss";var i=41000.2343433;this._approxLabelWidths={year:Math.max(E,this._renderer.getTextWidth(this._formatter.formatValue(i,"YYYY"),this._style.label.font)+this._labelPadding+20),date:Math.max(E,this._renderer.getTextWidth(this._formatter.formatValue(i,this._formatter.localeInfo.qDateFmt),this._style.label.font)+this._labelPadding+20),minute:Math.max(E,this._renderer.getTextWidth(this._formatter.formatValue(i,this._timeformatPatterns.minuteLevel),this._style.label.font)+this._labelPadding+20),second:Math.max(E,this._renderer.getTextWidth(this._formatter.formatValue(i,this._timeformatPatterns.secondLevel),this._style.label.font)+this._labelPadding+20)}},_updateScaleAndTicks:function t(){if(this._scaleDetails.calculationSize){W.call(this,this._scaleDetails.explicitPlotMax-this._scaleDetails.explicitPlotMin,this._scaleDetails.calculationSize);$.call(this)}this._super()}});var G=U;var Z=i("nHjU");var Y=i("Z9ZH");var X=i.n(Y);var K=i("MoEg");var J=i("GF7R");var Q=i("UV1h");var tt=".scrollarea";function et(t){var e=this;var i=this.isVertical();var a={size:i?"height":"width",pos:i?"y":"x",coord:i?"pageY":"pageX"};var n=new K["a"](0,0,0,0);var s=e._$renderAreaWrap.offset();n.x=s.left;n.y=s.top;n.width=e._$renderAreaWrap.width();n.height=e._$renderAreaWrap.height();this.fire("scrollStart");var r=e.scrollRect[a.size]*n[a.size];var o=t.points[0][a.pos]-n[a.pos];this.yMirrorMode&&!i&&(o=n.width-o);var l=o-r/2;e.scrollRect[a.pos]=Math.max(0,Math.min(n[a.size]*(1-e.scrollRect[a.size]),l))/n[a.size];e.setOffset(e.scrollRect[a.pos]*e.fullState.max)}function it(t){var e=this;var i=this.isVertical();var a={size:i?"height":"width",pos:i?"y":"x",coord:i?"pageY":"pageX"};var n=this.yMirrorMode&&!i;var s=e._$renderAreaWrap.offset();this._containerRect=new K["a"](0,0,0,0);this._containerRect.x=s.left;this._containerRect.y=s.top;this._containerRect.width=e._$renderAreaWrap.width();this._containerRect.height=e._$renderAreaWrap.height();e.scrollRect[a.size]=e.viewState.range/e.fullState.max;this._rp=t.points[0][a.pos]-this._containerRect[a.pos]-e.scrollRect[a.pos]*this._containerRect[a.size];n&&(this._rp=e.scrollRect[a.size]*this._containerRect[a.size]-this._rp);e.startScrollPos=e.scrollRect[a.pos];e.startScrollSize=e.scrollRect[a.size];if(this._rp<0){e.scrollRect[a.pos]=Math.max(0,e.scrollRect[a.pos]-this._rp/this._containerRect[a.size]);this._rp=0}else if(this._rp/this._containerRect[a.size]>e.scrollRect[a.size]){e.scrollRect[a.pos]=Math.min(1,this._rp/this._containerRect[a.size])-e.scrollRect[a.size];this._rp=e.scrollRect[a.size]*this._containerRect[a.size]}this.fire("scrollStart")}function at(t){var e=this;var i=this.options;var a=this.isVertical();var n="function"===typeof i.onScroll?i.onScroll:function(){};var s={size:a?"height":"width",pos:a?"y":"x",coord:a?"pageY":"pageX"};var r=t.points[0][s.pos]-this._containerRect[s.pos];var o=this.yMirrorMode&&!a;var l=1e-5;if(this.allowResize){var c=(r-this._rp)/this._containerRect[s.size]-e.startScrollPos;var h=e.startScrollPos;var u=h+e.startScrollSize;if(/start/.test(t.relatedTarget.className)){t.relatedTarget.classList.add("active");h=Math.max(0,Math.min(u-l,h+c))}else if(/end/.test(t.relatedTarget.className)){t.relatedTarget.classList.add("active");u=Math.min(1,Math.max(h+l,u+c))}else{h=Math.min(1-e.startScrollSize,Math.max(0,h+c));u=Math.min(1,Math.max(0+e.startScrollSize,u+c))}e.setViewRange((u-h)*e.fullState.max);o?e.setOffset((1-u)*e.fullState.max):e.setOffset(h*e.fullState.max);e.fire("offsetChanged")}else{o&&(r=this.rect.width-r);e.scrollRect[s.pos]=Math.max(0,Math.min(this._containerRect[s.size]*(1-e.scrollRect[s.size]),r-this._rp))/this._containerRect[s.size];e.setOffset(e.scrollRect[s.pos]*e.fullState.max)}n()}function nt(){if(!this.miniChart)return;var t=this;X()(this.miniChart.container).tap({id:tt,end:function e(i,a){et.call(t,a)}});X()(this.miniChart.container).swipe({id:tt,options:{radiusThreshold:1},start:function e(i,a){it.call(t,a)},update:function e(i,a){at.call(t,a)},end:function t(e,i){i.relatedTarget.classList.remove("active")}})}function st(){if(!this.miniChart)return;n()(this.miniChart.container).off(tt);X()(this.miniChart.container).off("*",tt)}function rt(){this.miniChart&&(this._internalUseMiniChart?this.miniChart.showComponent():this.miniChart.hideComponent())}function ot(t,e){var i=this.viewState.min;var a=this._relativeOffset?this._explicitOffset*(this.fullState.max-this.viewState.range):this._explicitOffset||0;this.viewState.min=Math.max(0,Math.min(a||0,(this.fullState.max||0)-(this.viewState.range||0)));if(this.viewState.min!==i){this.invalidateDisplay(t);e&&this.fire("offsetChanged")}}function lt(t,e,i){var a=Array.isArray(t)?t:[t];a.forEach((function(t){i.forEach((function(e){t.style[e]=""}));t.className=e}))}var ct=Z["a"].extend("ScrollArea",{init:function t(){this._super.apply(this,Array.prototype.slice.call(arguments));this._useMiniChart=true;this._internalUseMiniChart=true;this._miniChartThreshold=.5;this._miniChartMinimunNumberOfBars=3;this.scrollRect=new K["a"](0,0,0,0);this.fullState={min:0,max:20};this.viewState={min:0,range:10};this.allowResize=false;this._$renderAreaWrap.addClass("qv-chart-component-scroll-area");this.before=document.createElement("div");this.bar=document.createElement("div");this.after=document.createElement("div");this.before.style.position="absolute";this.bar.style.position="absolute";this.after.style.position="absolute";this.before.style.backgroundColor="rgba(0,0,0,0.1)";this.after.style.backgroundColor="rgba(0,0,0,0.1)";this.bar.style.marginTop="-1px";n()(this.before).attr("tid","component.scrollArea.before");n()(this.bar).attr("tid","component.scrollArea.bar");n()(this.after).attr("tid","component.scrollArea.after");n()(this.bar).append('<div class="q-resize-handle q-resize-handle-start">');n()(this.bar).append('<div class="q-resize-handle q-resize-handle-end">');this.container.appendChild(this.before);this.container.appendChild(this.after);this.container.appendChild(this.bar);this._styleService=Q["a"].initializeService("object.".concat(this.options.parentType));this.before.style.backgroundColor=this._styleService.getStyle("","color");this.after.style.backgroundColor=this._styleService.getStyle("","color");this.before.style.opacity=.1;this.after.style.opacity=.1},on:function t(){var e=this;this._super();X()(this.container).tap({id:tt,end:function t(i,a){et.call(e,a)}});X()(this.container).swipe({id:tt,options:{radiusThreshold:1},start:function t(i,a){it.call(e,a)},update:function t(i,a){at.call(e,a)},end:function t(e,i){i.relatedTarget.classList.remove("active")}});nt.call(this);this._on&&this.allowResize&&this.container.classList.add("q-allow-resize")},off:function t(){this._super();n()(this.container).off(tt);X()(this.container).off("*",tt);st.call(this);this.container.classList.remove("q-allow-resize")},setAllowResize:function t(e){this.allowResize=e;this.container.classList[e&&this._on?"add":"remove"]("q-allow-resize")},calculateRelevantSize:function t(){var e=X.a.utils.touch?32:16;var i;if(this.miniChart&&this._useMiniChart){this.miniChart.calculateRelevantSize();i=this.miniChart.relevantSize;this._internalUseMiniChart=true;rt.apply(this)}this.relevantSize=this._internalUseMiniChart?i||16:e},insertAdjacentTo:function t(){this._super.apply(this,[].slice.apply(arguments));this.miniChart&&this.miniChart.setRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height)},setRect:function t(){this._super.apply(this,[].slice.apply(arguments));this.miniChart&&this.miniChart.setRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height)},setDock:function t(e){this._super(e);this.miniChart&&this.miniChart.setDock(e)},getOffset:function t(){return this.viewState.min},setRelativeOffset:function t(e){this._explicitOffset=e;this._relativeOffset=true;ot.call(this,"ScrollArea.setOffset",true)},setOffset:function t(e){this._explicitOffset=e;this._relativeOffset=false;ot.call(this,"ScrollArea.setOffset")},setMiniChart:function t(e){this.miniChart&&st.call(this);this.miniChart=e;this.miniChart.setDock(this.options.dock);rt.apply(this);this._on&&nt.call(this);this.invalidateDisplay("ScrollArea.setMiniChart")},setUseMiniChart:function t(e){this._useMiniChart=e;this._internalUseMiniChart=e;rt.apply(this);this.invalidateDisplay("ScrollArea.setUseMiniChart")},getUseMiniChart:function t(){return this._useMiniChart},setViewRange:function t(e){this.viewState.range=e;ot.call(this,"ScrollArea.setViewRange",true);this.invalidateDisplay("ScrollArea.setViewRange")},getViewRange:function t(){return this.viewState.range},setSpaces:function t(e){this._spaces=e},setDataRange:function t(e){this.dataRange=e;this.invalidateDisplay("ScrollArea.setDataRange")},getDataRange:function t(){return this.dataRange},setFullRange:function t(e){this.fullState.max=e;ot.apply(this,["ScrollArea.setFullRange",true]);this.invalidateDisplay("ScrollArea.setFullRange")},getFullRange:function t(){return this.fullState.max},isVisible:function t(e){return this._super(e)&&(this.viewState.range<this.fullState.max||this.allowResize)},setOuterRect:function t(e,i,a,n){this._super(e,i,a,n);this.miniChart&&this.miniChart.setOuterRect(e,i,a,n)},setLayoutToContainerRatios:function t(e,i){this._super(e,i);this.miniChart&&this.miniChart.setLayoutToContainerRatios(e,i)},setContainerRect:function t(e,i,a,n){this._super(e,i,a,n);this.miniChart&&this.miniChart.setContainerRect(e,i,a,n)},updateSize:function t(){this._super();var e=this._styleService.getStyle("","color");if(this.miniChart&&this._internalUseMiniChart&&this.miniChart.isVisible()){this.before.style.display="block";this.bar.style.border="1px solid ".concat(J["a"].toRGBA(e,.4));this.bar.style.backgroundColor="transparent";this.after.style.display="block";if(this.isVertical())lt.apply(this,[[this.before,this.bar,this.after],"qv-chart-scrollable-mini-chart-vertical",["width","left"]]);else{lt.apply(this,[[this.before,this.after],"qv-chart-scrollable-mini-chart-horizontal",["height","top"]]);lt.apply(this,[this.bar,"qv-chart-scrollable-mini-chart-bar-horizontal",["height","top"]])}}else{this.before.style.display="none";this.bar.style.backgroundColor=J["a"].toRGBA(e,.2);this.bar.style.boxShadow="none";this.bar.style.border="none";this.after.style.display="none";this.isVertical()?lt.apply(this,[this.bar,"qv-chart-scrollable-vertical",["width","left"]]):lt.apply(this,[this.bar,"qv-chart-scrollable-horizontal",["height","top"]])}},paint:function t(e,i){var a;this.before.style.backgroundColor=this._styleService.getStyle("","color");this.after.style.backgroundColor=this._styleService.getStyle("","color");this.before.style.opacity=.1;this.after.style.opacity=.1;this.container.style.display="block";this._super(e,i);this.scrollRect[this.isVertical()?"height":"width"]=this.viewState.range/this.fullState.max;this.scrollRect[this.isVertical()?"y":"x"]=this.viewState.min/this.fullState.max;this.yMirrorMode&&!this.isVertical()&&(this.scrollRect.x=1-this.scrollRect.width-this.scrollRect.x);a=this.scrollRect[this.isVertical()?"height":"width"]*this.rect[this.isVertical()?"height":"width"];a=a<1?1:a;a=100*a/this.rect[this.isVertical()?"height":"width"];if(this.isVertical()){n()(this.before).css({height:"".concat(100*this.scrollRect.y,"%"),top:"0%"});n()(this.bar).css({top:"".concat(100*this.scrollRect.y,"%"),height:"".concat(a,"%")});n()(this.after).css({top:"".concat(100*this.scrollRect.y+a,"%"),height:"".concat(100-(100*this.scrollRect.y+a),"%")})}else{n()(this.before).css({width:"".concat(100*this.scrollRect.x,"%"),left:"0%"});n()(this.bar).css({left:"".concat(100*this.scrollRect.x,"%"),width:"".concat(a,"%")});n()(this.after).css({left:"".concat(100*this.scrollRect.x+a,"%"),width:"".concat(100-(100*this.scrollRect.x+a),"%")})}},clear:function t(){this.container.style.display="none"}});Object.defineProperty(ct.prototype,"className",{value:"ScrollArea"});var ht=ct;var ut=i("QLJv");var dt=i("/D2Q");var ft=i("xnZp");var pt=i("iTPj");var vt={getFocusRange:function t(e,i,a,n){var s={};var r;var o;var l=i<1?0:i-1;var c=e.length-a-1;if(n<2)s[e[0][1].qElemNumber]={lower:null,upper:null};else for(o=0;o<e.length;o++)s[e[o][1]]||(s[e[o][1].qElemNumber]={lower:null,upper:null});for(o=i-1;o>=0;o--){r=s[e[o][1].qElemNumber];r&&!r.lower&&(r.lower=o)}for(o=e.length-a;o<e.length;o++){r=s[e[o][1].qElemNumber];r&&!r.upper&&(r.upper=o)}Object.keys(s).forEach((function(t){s[t].lower<l&&(l=s[t].lower);s[t].upper>c&&(c=s[t].upper)}));return{lower:l,upper:c}},getFullContinuousRange:function t(e){var i=e.qHyperCube.qDimensionInfo[0].qMin;var a=e.qHyperCube.qDimensionInfo[0].qMax;if(a<i||"NaN"===a){i="NaN";a="NaN"}else if(i===a){i-=.5;a+=.5}return{min:i,max:a}},addContinuousDataToLayout:function t(e,i){e=s["a"].extend({},e);e.qHyperCube=s["a"].extend({},e.qHyperCube,{qMode:"S"});e.qHyperCube.qDataPages=i.qDataPages;e.qHyperCube.qAxisData=i.qAxisData;return e}};var mt=i("ZYaI");var gt=i("i7ks");var xt=i("RM7h");var _t=i("d4GZ");var yt=i("+GbC");var bt=i("FJpR");var Mt=i("3J65");var wt=i("XJsW");var St=3;var Dt=wt["a"].extend("PanScrollController",{init:function t(e,i,a){yt["a"].mixin(this);this.notification("PanStart");this.notification("PanUpdate");this.notification("PanWheel");this.notification("PanEnd");this._$dataAreaContainer=e;this._$fullContainer=i;var s=this;this._options=n.a.extend(true,{preventDefault:true},a);function r(t,e){s._panning=true;s._panX=e.points[0].x;s._panY=e.points[0].y;s.PanStart.emit()}function o(t){s._panning=true;s._panX=t.pageX;s._panY=t.pageY;s.PanStart.emit()}function l(t,e){if(!s._panning){s._panning=true;s._panX=e.points[0].x;s._panY=e.points[0].y}var i=e.swipe&&e.swipe.currentPoint?e.swipe.currentPoint:new bt["a"](t.pageX,t.pageY);var a=new bt["a"](i.x-s._panX,i.y-s._panY);s._panX=i.x;s._panY=i.y;s.PanUpdate.emit(a)}function c(){s._panning=false;s.PanEnd.emit()}function h(t){var e=gt["a"].getMouseWheelData(t.originalEvent);if(!e.delta)return;var i=e.delta>0?St:-St;s.PanWheel.emit(i)}this._eventHandlers={preventDefault:true,swipe:{start:r,update:l,end:c},swipetwo:{start:r,update:l,end:c},mousewheel:gt["a"].throttle(h,20),wheelswipe:{start:o,update:l,end:c},exclusive:function t(){return false},active:function t(){return true}}},on:function t(){if(this._isOn)return;Mt["a"].addInteraction(this._eventHandlers,this._$dataAreaContainer,2,["swipe","swipetwo","mousewheel","wheelswipe"]);this._isOn=true},off:function t(){if(!this._isOn)return;Mt["a"].removeInteraction(this._eventHandlers);this._isOn=false}});var At=Dt;var kt=i("GULB");var Ct=i("I+mr");var qt=i("TLJm");var Lt={NONE:0,ONE_DIM:1,TWO_DIM:2};var Pt=1e-6;function It(t){var e=this.components.scrollArea.getOffset()-t/(this.components.dimensionAxis._discreteSpacing||28);e=e<0?0:e;this.components.scrollArea.setOffset(e)}function Tt(){if(this._disableZoom)return;var t=this._panZoomController._viewportProjection;var e=this._activeDimAxis.getDataMin();var i=this._activeDimAxis.getDataMax();var a=i-e;var n=this._activeDimAxis.getPlotSize();t.setSize({x:n,y:1});t.setBoundingBox(new K["a"](e,0,i-e,1));this._panZoomController.setOffset(this._panZoomController._$element.offset());var s=this.components.scrollArea.getOffset();var r=this.components.scrollArea.getViewRange();this.yMirrorMode&&(s=a-r-s);var o=t.getTransformMatrix();o.identity();o.scale(n/r,1);o.translate(-s,0);t.setTransformMatrix(o);Rt(this.selections)}function Ot(t,e){var i=this.components.scrollArea.getOffset();var a=this.components.scrollArea.getViewRange();var n=Math.abs(t-i)>Pt||Math.abs(e-a)>Pt;if(n){this.components.scrollArea.setViewRange(e);this.components.scrollArea.setOffset(t);this.components.scrollArea.fire("offsetChanged")}}function Nt(){if(this._disableZoom)return;var t=this._panZoomController._viewportProjection;var e=this._activeDimAxis.getPlotSize();var i=this._activeDimAxis.getDataMin();var a=this._activeDimAxis.getDataMax();var n=a-i;var s=t.invTransform({x:0,y:0}).x;var r=t.invTransform({x:e,y:0}).x;var o=Math.min(r-s,n);var l=Math.min(Math.max(s,0),n-o);this.yMirrorMode&&(l=n-o-l);Ot.call(this,l,o)}function Et(){var t=this._activeDimAxis.getDataMin();var e=this._activeDimAxis.getDataMax();Ot.call(this,0,e-t)}function Rt(t,e){var i=t&&t.getActiveType();i&&"range.discrete"===i.getActiveMode()&&i.cancel(true);e&&e.clearSelection()}function Vt(t,e,i,a){var n=this;var s=[];var r=[];Object.keys(this.components).forEach((function(t){n.components[t]instanceof c["a"]||n.components[t].isDimension?s.push(n.components[t]):n.components[t]instanceof h["a"]&&!n.components[t].isStacked&&r.push(n.components[t])}));var o=["top","bottom"].includes(this._activeDimAxis.dock)?"x":"y";var l="x"===o?"y":"x";this.selections.types.range.setComponent(o,s);this.tooltips.setComponent(o,s);this.selections.types.range.setComponent(l,r);if(i&&(t>1||e>1)){this.selections.types.range.setComponent(l,[]);"byMeasure"===a?this.selections.types.colorLegend.removeComponent("colorLegend",this.components.colorLegend):this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend)}else this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend)}function zt(){if(!this._isPagingTransitionEnabled)return;this.components.measureAxis.setDataRangeTransition(false);this.components.measureAxis.stopListen("endTransition",Ft,this);this.components.measureAxis.stopListen("startTransition",jt,this);clearTimeout(this._pagingTransitionTimer);delete this.components.measureAxis.setDataRange;this._isPagingTransitionEnabled=false}function Ft(){this.components.refLineLabels&&this.layout();for(var t in this.components)this.components[t].invalidateDisplay("ScrollableChart.onAxisTransitionEnded")}function jt(){this._visibleRefLines=this.components.refLineLabels.isVisible()}function Ht(){if(this._isPagingTransitionEnabled||this.isDimensionContinuous)return;this._isPagingTransitionEnabled=true;var t=this;var e=this.components.measureAxis;var i=e.setDataRange;e.listen("endTransition",Ft,this);e.listen("startTransition",jt,this);this._pagingTransitionTimer=null;this.components.measureAxis.setDataRange=function(a,n){clearTimeout(t._pagingTransitionTimer);t._pagingTransitionTimer=setTimeout((function(){var s;e.setDataRangeTransition(true);i.apply(e,[a,n]);t.layout();for(s in t.components)t.components[s].invalidateDisplay()}),500)}}function Bt(){var t=this.components.scrollArea;var e=this.yMirrorMode;var i=this._scrollableHint;var a=[];this._scrollAffordance||(this._scrollAffordance={canIncrease:false,canDecrease:false,yMirrorMode:e});var n=t.getOffset();var s=t.getViewRange();var r=t.fullState.max;var o=n>Pt;var l=n+s<r-Pt;if(o===this._scrollAffordance.canDecrease&&l===this._scrollAffordance.canIncrease&&e===this._scrollAffordance.yMirrorMode)return;this._scrollAffordance.canIncrease=l;this._scrollAffordance.canDecrease=o;this._scrollAffordance.yMirrorMode=e;o&&a.push(t.isVertical()?"up":this.yMirrorMode?"right":"left");l&&a.push(t.isVertical()?"down":this.yMirrorMode?"left":"right");this.yMirrorMode&&a.reverse();i.attr("class",(function(t,e){return e.replace(/\bqv-chart-scrollable-\S+/g,"")}));i.addClass("qv-chart-scrollable-".concat(a.join("-")))}function $t(){var t=this;this._debounceUpdateHandle={};this._debouncedUpdate=gt["a"].debounce((function(){var e=this._activeDimAxis.getPlotMin();var i=this._activeDimAxis.getPlotMax();t.updateFocusedContinuousData(e,i).then((function(){t.partialUpdate(t._data)}))}),400,this._debounceUpdateHandle);this._changeWatchers.push(pt["a"].bindSetter((function(){if(t.isDimensionContinuous){var e=t._activeDimAxis.getDataMin()+t.components.scrollArea.getOffset();var i=e+t.components.scrollArea.getViewRange();t._activeDimAxis.setPlotMin(e);t._activeDimAxis.setPlotMax(i);t._activeDimAxis.invalidateDisplay();t.components.dataArea.invalidateDisplay();t.components.grid.invalidateDisplay();t._debouncedUpdate()}}),this.components.scrollArea,"offset"))}function Wt(t,e,i,a){var n;var s;for(var r=0;r<i.length;r++)for(var o=0;o<a.length;o++)if(i[r].qName===a[o].qName){n=a[o].qTicks.filter((function(e){return e.qEnd+1<t}));s=a[o].qTicks.filter((function(t){return t.qStart+1>e}));i[r].qTicks=n.concat(i[r].qTicks,s);break}}function Ut(t,e){return t&&e.length>1?Ct["a"].getDimensionSize(e[1]):mt["a"].maxNumberOfLines}var Gt=l["a"].extend("ScrollableChart",{init:function t(e,i,a,s,r){var o=this;var l=this;var u=n.a.extend(true,{providers:{colorMap:{clazz:ft["a"],multiDimScheme:"last"}},components:{refLines:{sortKey:5,show:true,dock:"center",showFlag:Z["a"].prototype.ShowFlags.SPARK},dataArea:{sortKey:10,show:true,dock:"center",showFlag:Z["a"].prototype.ShowFlags.SPARK},miniChart:{show:true,clazz:ut["a"],components:{dimensionAxis:{show:false,clazz:c["a"]},measureAxis:{show:false},dataArea:{isMini:true,show:true},continuousAxis:{show:false,clazz:h["a"],dock:"bottom"}}},xAxis:{clazz:c["a"],reductionOrder:10,shrinkToFitThreshold:.85,showFlag:{whenVertical:{vertical:Z["a"].prototype.ShowFlags.XSMALL,horizontal:Z["a"].prototype.ShowFlags.SMALL},whenHorizontal:{vertical:Z["a"].prototype.ShowFlags.SMALL,horizontal:Z["a"].prototype.ShowFlags.XSMALL}},titleShowFlag:{whenVertical:{vertical:Z["a"].prototype.ShowFlags.XSMALL,horizontal:Z["a"].prototype.ShowFlags.MEDIUM},whenHorizontal:{vertical:Z["a"].prototype.ShowFlags.MEDIUM,horizontal:Z["a"].prototype.ShowFlags.XSMALL}}},xAxisTitle:{showFlag:{whenVertical:{vertical:Z["a"].prototype.ShowFlags.XSMALL,horizontal:Z["a"].prototype.ShowFlags.MEDIUM},whenHorizontal:{vertical:Z["a"].prototype.ShowFlags.MEDIUM,horizontal:Z["a"].prototype.ShowFlags.XSMALL}},reductionOrder:1},timeAxis:{show:true,isDimension:true,order:1,dock:"bottom",relevantSize:90,reductionOrder:2,clazz:G,showFlag:{whenHorizontal:{vertical:Z["a"].prototype.ShowFlags.SMALL,horizontal:Z["a"].prototype.ShowFlags.XSMALL},whenVertical:{vertical:Z["a"].prototype.ShowFlags.XSMALL,horizontal:Z["a"].prototype.ShowFlags.SMALL}}},continuousAxis:{show:true,isDimension:true,order:1,dock:"bottom",relevantSize:90,reductionOrder:2,clazz:h["a"],showFlag:{whenHorizontal:{vertical:Z["a"].prototype.ShowFlags.SMALL,horizontal:Z["a"].prototype.ShowFlags.XSMALL},whenVertical:{vertical:Z["a"].prototype.ShowFlags.XSMALL,horizontal:Z["a"].prototype.ShowFlags.SMALL}}},scrollArea:{sortKey:2,show:true,dock:"bottom",order:2,relevantSize:20,reductionOrder:10.1,showFlag:Z["a"].prototype.ShowFlags.XSMALL,clazz:ht},refLineLabels:{show:true,dock:"right",order:3,reductionOrder:3,showFlag:{whenVertical:{vertical:Z["a"].prototype.ShowFlags.XSMALL,horizontal:Z["a"].prototype.ShowFlags.SMALL},whenHorizontal:{vertical:Z["a"].prototype.ShowFlags.MEDIUM,horizontal:Z["a"].prototype.ShowFlags.XSMALL}},clazz:dt["a"]}}},a||{});this._super(e,i,u,s,r);this._scrollableHint=n()("<div class='qv-chart-scrollable'>").appendTo(this.components.dataArea.container);this._changeWatchers=this._changeWatchers||[];this._pagingInfo=new K["a"](0,0,0,0);this.components.measureAxis=this.components.yAxis;this.components.dimensionAxis=this.components.xAxis;this.components.dimensionAxisTitle=this.components.xAxisTitle;this.components.measureAxisTitle=this.components.yAxisTitle;delete this.components.xAxisTitle;delete this.components.yAxisTitle;delete this.components.xAxis;delete this.components.yAxis;this.components.dimensionAxisTitle.setType("dimension");this.components.dimensionAxisTitle.listen("drill-up",(function(t,e,i){l.backendApi.drillUp(e,i)}));this.components.dimensionAxisTitle.setModel(e.ext.model);this.components.measureAxisTitle.setType("measure");this.components.measureAxisTitle.setModel(e.ext.model);this.components.scrollArea.listen("scrollStart",(function(){Rt(o.selections,o.tooltips)}));this._showLegend=false;this.scrollMultiplicator=1;this.components.dataArea.setMinorAxis(this.components.measureAxis);this.components.dataArea.setMajorAxis(this.components.dimensionAxis);this.components.dataArea.setTimeAxis(this.components.timeAxis);this.components.dataArea.setContinuousAxis(this.components.continuousAxis);this._setActiveDimensionAxis(e.layout);this.components.grid.setAxes(this.components.dimensionAxis,this.components.measureAxis);this.components.dimensionAxis.setMinDiscreteUnitSize(28);this._changeWatchers.push(pt["a"].bindProperty(this.components.dataArea,"dimensionTree",this._chartContext,"dimensionTree"));this._changeWatchers.push(pt["a"].bindProperty(this.providers.colorMap,"dimensionTree",this._chartContext,"dimensionTree"));this._changeWatchers.push(pt["a"].bindSetter((function(){l.isDimensionContinuous||l.components.dimensionAxis.setOffset(l.components.scrollArea.getOffset());l.moreData=l.components.scrollArea.viewState.range<l.components.scrollArea.fullState.max;l.checkScrollToggle()}),this.components.scrollArea,"offset"));this._changeWatchers.push(pt["a"].bindSetter((function(t){l.isDimensionContinuous||null===t||l.components.scrollArea.setFullRange(t)}),this.components.dimensionAxis,"numDiscreteUnits"));this._changeWatchers.push(pt["a"].bindSetter((function(t){l.isDimensionContinuous||l.components.scrollArea.setViewRange(l._pagingMode===Lt.TWO_DIM?t/2:t)}),this.components.dimensionAxis,"numDiscreteUnitsInView"));[this.components.timeAxis,this.components.continuousAxis].forEach((function(t){t&&t.listen("rendered",(function(){var t=l.selections&&l.selections.getActiveType&&l.selections.getActiveType();if(t&&"range.dimension"===t.getActiveMode()){t.refreshContainer();t.updateRangeProjection();t.updateRangeDisplay()}}))}));(this.components.timeAxis||this.components.continuousAxis)&&$t.call(this,this.components.continuousAxis);this._changeWatchers.push(pt["a"].bindSetter((function(){false!==l._checkPage&&l.checkPage();Bt.call(l)}),this.components.dimensionAxis,"offset"));this._scrollController=new At(this.components.dataArea.container,this.container,this.components.scrollArea);this.panStartFn=function(){Rt(l.selections)};this.panUpdateFn=function(t){var e=l.components.scrollArea.isHorizontal()?"x":"y";l.yMirrorMode&&(t.x=-t.x);It.call(l,t[e])};this.panWheelFn=function(t){Rt(l.selections);It.call(l,t*l.components.dimensionAxis._discreteSpacing)};this._scrollController.PanStart.bind(this.panStartFn);this._scrollController.PanUpdate.bind(this.panUpdateFn);this._scrollController.PanWheel.bind(this.panWheelFn);this._panZoomController=new kt["a"](n()(this.components.dataArea.container),{start:function t(){Tt.call(l)},update:function t(){Nt.call(l)},end:function t(){Nt.call(l)},reset:function t(){Et.call(l)}});this._panZoomController.setZoomPanByWebkitTransform(false);this.isDimensionContinuous&&this._panZoomController.setMaxZoomLevel(27)},setYMirrorMode:function t(e){this._super(e);this.updateVerticalComponentsDock()},getVerticalComponents:function t(){var e=this._super();var i;if(this._data&&this.components){if(this.components.dimensionAxis&&this.components.dimensionAxis.isVertical()&&this._data.dimensionAxis){e.push({comp:this.components.dimensionAxis,dock:this._data.dimensionAxis.dock});this.components.dimensionAxisTitle&&e.push({comp:this.components.dimensionAxisTitle,dock:this._data.dimensionAxis.dock})}if(this.components.measureAxis&&this.components.measureAxis.isVertical()&&this._data.measureAxis){i=this._data.measureAxes&&this._data.measureAxes[0]?this._data.measureAxes[0].dock:this._data.measureAxis.dock;e.push({comp:this.components.measureAxis,dock:i});this.components.measureAxisTitle&&e.push({comp:this.components.measureAxisTitle,dock:i})}this.components.refLineLabels&&this.components.refLineLabels.isVertical()&&this._data.measureAxis&&e.push({comp:this.components.refLineLabels,dock:"far"===this._data.measureAxis.dock?"near":"far"});this.components.scrollArea&&this.components.scrollArea.isVertical()&&e.push({comp:this.components.scrollArea,dock:"far"})}return e},initSelections:function t(){this.selections._disableSelections=this.options._disableSelections;this.selections.types.dataArea.setComponent("dataArea",this.components.dataArea);this.selections.types.colorLegend.setComponent("colorLegend",this.components.colorLegend);if(!this.options._disableSelections){this.selections.types.range.setComponent("dataArea",this.components.dataArea);this.selections.Activated.bind(this.onSelection.Activated.bind(this));this.selections.Lasso.bind(this.onToggleLasso.bind(this));this.selections.Deactivated.bind(this.onSelection.Deactivated.bind(this));this.selections.SelectRange.bind(this.onSelection.SelectRange.bind(this));this.selections.SelectAttributeDim.bind(this.onSelection.SelectAttributeDim.bind(this));this.selections.ToggleShape.bind(this.onSelection.ToggleShape.bind(this));this.selections.Confirm.bind(this.onSelection.Confirm.bind(this));this.selections.Cancel.bind(this.onSelection.Cancel.bind(this));this.selections.Clear.bind(this.onSelection.Clear.bind(this));this.selections.SelectWhileLocked.bind(this.selectWhileLocked.bind(this));this.selections.SelectWhileSingleSelect.bind(this.selectWhileSingleSelect.bind(this))}},initTooltips:function t(){this.tooltips.setComponent("dataArea",this.components.dataArea)},getSnapshotSize:function t(){var e=0;var i=0;if(this.rect){e=this.rect.width;i=this.rect.height}var a=this.getSnapshotChartData();!a.hasMiniChart&&this.components.scrollArea.isVisible()&&(this.components.scrollArea.isVertical()?e-=this.components.scrollArea.rect.width:i-=this.components.scrollArea.rect.height);return{w:e,h:i}},getSnapshotChartData:function t(e){var i=n.a.extend(true,this._super()||{},{scrollOffset:e&&e.ignoreReducedData?0:this.components.scrollArea.getOffset(),discreteSpacing:this.components.dimensionAxis.getDiscreteSpacing(),axisInnerOffset:e&&e.ignoreReducedData?0:this.components.dimensionAxis.getInnerOffset(),hasMiniChart:this.components.miniChart&&!!this.components.miniChart.isVisible(),viewRange:this.components.scrollArea.getViewRange()});e&&e.ignoreReducedData&&this.components.measureAxis.isStacked&&(i.dataRanges=[{min:this.components.measureAxis.getPlotMin(),max:this.components.measureAxis.getPlotMax()}]);return i},setSnapshotData:function t(e,i){this._super(e,i);var a=Object(o["a"])();var s;if(!i||!i.ignoreReducedData){if(this.isDimensionContinuous){e.qHyperCube.qDataPages=this._data.qHyperCube.qDataPages;e.qHyperCube.qAxisData=this._data.qHyperCube.qAxisData}if(this.components.miniChart.isVisible())this.components.miniChart.getReducedDataHypercube().then((function(t){e.reducedHyperCube=t;a.resolve(e)}));else{delete e.reducedHyperCube;a.resolve(e)}return a.promise}delete e.reducedHyperCube;if(this.isDimensionContinuous){s=e.qHyperCube;s.qDataPages=[n.a.extend(true,{},this._data.qHyperCube.qDataPages[0])];this._upperFocusIndex?s.qDataPages[0].qMatrix=s.qDataPages[0].qMatrix.slice(this._lowerFocusIndex,this._upperFocusIndex+1):s.qDataPages[0].qMatrix=s.qDataPages[0].qMatrix;s.qAxisData=this._cachedFocusAxisData;s.qDimensionInfo[0].qMin=this._activeDimAxis.getPlotMin();s.qDimensionInfo[0].qMax=this._activeDimAxis.getPlotMax();a.resolve(e);return a.promise}function r(){var t=this.components.scrollArea;var i=t.getOffset()/this.scrollMultiplicator;var a=Math.round(i);var n=this.components.dimensionAxis._discreteSpacing;var s=t.getViewRange()/this.scrollMultiplicator;var r=Math.round(s-(a-i));var o=Math.min(8,n/2);var l=this._pagingInfo.y;Number.isNaN(+r)&&(r=10);if(this._data.barGrouping&&"grouped"===this._data.barGrouping.grouping&&this._data.qHyperCube.qMeasureInfo.length>1){a=Math.floor(i);r=Math.ceil(s-(a-i));e.snapshotData.content.chartData.scrollOffset=t.getOffset()%this.scrollMultiplicator;var c=(Math.ceil(i)-i)*n*this.scrollMultiplicator-n/2;a=c<o?Math.ceil(i):Math.floor(i);r=Math.round(i+s);var h=i+s;var u=(h-Math.floor(h))*n*this.scrollMultiplicator-n/2;h=u<o?Math.floor(h):Math.ceil(h);r=h-a}else if(this._data.barGrouping&&"grouped"===this._data.barGrouping.grouping&&this._data.qHyperCube.qDimensionInfo.length>1){var d=this.components.dataArea._tree;a=Math.max(Math.round(i-.5),l);r=Math.round(this.components.dimensionAxis.getNumDiscreteUnitsInView()-(a-(i-.5)));if(d){var f=0;var p=0;var v=0;var m=l;var g;if(l!==a){for(f=0;f<d.children.length&&m<a;f++,m++){g=d.children[f];for(p=0;p<g.children.length&&m<a;p++,++m)v++}a=l+v;f=Math.max(0,f-1);p=Math.max(0,p-1)}v=0;m=0;for(;f<d.children.length&&m<r;f++,m++){g=d.children[f];for(p;p<g.children.length&&m<r;p++,++m)v++;p=0}r=v}else r*=2}return{qTop:a,qLeft:0,qWidth:this._data.qHyperCube.qSize.qcx,qHeight:r||0}}s=e.qHyperCube;this.providers.colorMap&&this.providers.colorMap.getColorDataInfo()&&(e.color.persistent=!!this.providers.colorMap.getColorDataInfo().persistentColors);if("K"===s.qMode){var l=new _t["a"];l.store(s.qStackedDataPages);var c=l.get([r.call(this)]);s.qSize.qcy=c[0].qArea.qHeight;if(c[0]&&c[0].qData[0]){c[0].qData[0].qDown=0;c[0].qData[0].qUp=0}s.qStackedDataPages=c;a.resolve(e)}else this.backendApi.getData([r.call(this)]).then((function(t){"S"===s.qMode?s.qDataPages=t:s.qStackedDataPages=t;s.qSize.qcy=t[0].qArea.qHeight;if(s.qDimensionInfo[0].qStateCounts){s.qDimensionInfo[0].qStateCounts.qOption=s.qSize.qcy;s.qDimensionInfo[0].qStateCounts.qSelected=0}a.resolve(e)}));return a.promise},getViewState:function t(){return n.a.extend(true,this._super()||{},{scrollOffset:this.components.scrollArea.getOffset(),axisInnerOffset:this.components.dimensionAxis.getInnerOffset(),viewRange:this.components.scrollArea.getViewRange()})},checkPage:function t(e){if(!this.isValid(this._data)||!this._pagingMode)return false;var i=this.components.scrollArea;var a=Math.floor(i.getOffset()/this.scrollMultiplicator);var n=this._pagingInfo.y;var s=this._pagingInfo.height;var r=this._pagingMode===Lt.TWO_DIM?0:20;var o=Math.ceil(i.getViewRange()/this.scrollMultiplicator);Number.isNaN(+o)&&(o=500);this._pagingMode===Lt.TWO_DIM&&(o*=2);if(a+o>n+s||Math.max(0,a)<n)return this.pageData(Math.floor(Math.max(0,a-r)),o+2*r,e);return},pageData:function t(e,i,a){if("function"!==typeof this.backendApi.getReducedData)return false;var n=Object(o["a"])();if(this._data.qHyperCube){var s=this;var r;r="K"===this._data.qHyperCube.qMode?this._data.qHyperCube.qStackedDataPages[0]&&this._data.qHyperCube.qStackedDataPages[0].qData&&this._data.qHyperCube.qStackedDataPages[0].qData.length>0:this._data.qHyperCube.qDataPages[0]&&this._data.qHyperCube.qDataPages[0].qMatrix.length>0;if(i<=0){"S"===s._data.qHyperCube.qMode?s._data.qHyperCube.qDataPages=[]:s._data.qHyperCube.qStackedDataPages=[];s._pagingInfo.set(e,0,this._data.qHyperCube.qSize.qcx,i)}else this.backendApi.getData([{qTop:e,qLeft:0,qWidth:this._data.qHyperCube.qSize.qcx,qHeight:i}]).then((function(t){if("S"===s._data.qHyperCube.qMode){s._data.qHyperCube.qDataPages=t;var o=t[0].qArea;s._pagingInfo.set(o.qLeft,o.qTop,o.qWidth,o.qHeight)}else{s._data.qHyperCube.qStackedDataPages=t;s._pagingInfo.set(0,e,s._data.qHyperCube.qSize.qcx,i)}if(a||!r){s._chartContext.refresh(s._data);s.paint(s._data).then((function(){n.resolve()}))}else s.partialUpdate(s._data).then((function(){n.resolve()}))})).catch((function(t){false}))}else n.resolve();return n.promise},partialUpdate:function t(e){var i=this;var a;var n;var s;var r;var l=[];Ht.call(this);n=e.qHyperCube.qStackedDataPages.length>0?this._pagingInfo.y:e.qHyperCube.qDataPages[0].qArea.qTop;this.components.dimensionAxis.setInnerOffset(n*this.scrollMultiplicator);return this.providers.colorMap.setData(e).then((function(){i._chartContext.refresh(e);for(a in i.components)"miniChart"!==a&&a.indexOf("AxisTitle")<0&&i.components[a].invalidateProperties("ScrollableChart.partialUpdate");i.components.dataArea.updateNow(["properties"]);s=i.components.dataArea.getMajorAxisData();r=i.components.dataArea.getMinorAxisData();!r||i._readStoredData&&i.getSnapshotStoredChartData().dataRanges||i.components.measureAxis.setDataRange(r.min,r.max);i.components.dimensionAxis.setDataRange(s.data,s.info);i.components.dimensionAxis.updateLevels();i.components.colorLegend.invalidateProperties("ScrollableChart.partialUpdate");i.components.colorLegend.updateNow(["properties"]);i.isDimensionContinuous&&i.layout();l.push(i.components.colorLegend.invalidateDisplay("ScrollableChart.partialUpdate"));l.push(i.components.dataArea.invalidateDisplay("ScrollableChart.partialUpdate"));if(i.isDimensionContinuous){l.push(i.components.timeAxis.invalidateDisplay("ScrollableChart.partialUpdate"));l.push(i.components.continuousAxis.invalidateDisplay("ScrollableChart.partialUpdate"));l.push(i.components.measureAxis.invalidateDisplay("ScrollableChart.partialUpdate"))}else l.push(i.components.dimensionAxis.invalidateDisplay("ScrollableChart.partialUpdate"));return o["a"].all(l)}))},getApproriateNrOfBins:function t(e,i){var a=4;var n=e.qHyperCube.qMeasureInfo.length;var s=n||1;var r=a+2*(s-1);if(i)return Math.ceil(mt["a"].maxNumberOfDataPoints);if(e.qHyperCube.qDimensionInfo.length>1){s=Math.max(1,Math.min(mt["a"].maxNumberOfLines,Ct["a"].getDimensionSize(e.qHyperCube.qDimensionInfo[1])));r=4}return Math.ceil(mt["a"].maxNumberOfDataPoints/(s*r))},getHyperCubeContinousData:function t(e){if(e.qStart>e.qEnd||Number.isNaN(+e.qStart)||Number.isNaN(+e.qEnd))return o["a"].resolve({qAxisData:{qAxis:[]},qDataPages:[{qMatrix:[],qTails:false,qArea:{qLeft:0,qTop:0,qRight:0,qBottom:0}}]});var i=this;return this.backendApi.getHyperCubeContinousData(e,false).then((function(t){if(i.cancelPromises)return o["a"].reject();return t}))},getFullContinousData:function t(e,i,a){var n=this;var r=e.qHyperCube.qSize.qcy*e.qHyperCube.qMeasureInfo.length;var o=r<mt["a"].maxNumberOfDataPoints;var l=e.qHyperCube.qDimensionInfo;var c=Ut(o,l);return this.getHyperCubeContinousData({qStart:i,qEnd:a,qNbrPoints:this.getApproriateNrOfBins(e,o),qMaxNbrTicks:300,qMaxNumberLines:c}).then((function(t){n._cachedContinousMatrix=t.qDataPages[0].qMatrix;e.qHyperCube.qDimensionInfo[0].qIsCyclic||(n._cachedContinousAxisData=t.qAxisData);n._cachedFocusAxisData=s["a"].extend(true,{},t.qAxisData);n._lowerFocusIndex=null;n._upperFocusIndex=null;return t})).catch((function(t){t.code===qt["a"].LocalizedErrorCode.LOCERR_GENERIC_INVALID_PARAMETERS&&"Start and End are outside data range"===t.parameter&&(t.isHandled=true);throw t}))},getFocusedContinousData:function t(e,i,a){var n=this;var r=a.qHyperCube.qSize.qcy*a.qHyperCube.qMeasureInfo.length;var o=r<mt["a"].maxNumberOfDataPoints;var l=a.qHyperCube.qDimensionInfo;var c=Ut(o,l);return this.getHyperCubeContinousData({qStart:e,qEnd:i,qNbrPoints:this.getApproriateNrOfBins(a,o),qMaxNbrTicks:300,qMaxNumberLines:c}).then((function(t){if(n._cachedContinousMatrix&&!n._readStoredData){if(t.qDataPages[0]&&t.qDataPages[0].qMatrix.length){e=Math.min(e,t.qDataPages[0].qMatrix[0][0].qNum);i=Math.max(i,t.qDataPages[0].qMatrix[t.qDataPages[0].qMatrix.length-1][0].qNum)}var a=n._cachedContinousMatrix.filter((function(t){return t[0].qNum<e}));var r=n._cachedContinousMatrix.filter((function(t){return t[0].qNum>i}));t.qDataPages[0].qMatrix=a.concat(t.qDataPages[0].qMatrix,r);var o=vt.getFocusRange(t.qDataPages[0].qMatrix,a.length,r.length,n._data.qHyperCube.qDimensionInfo.length);n._lowerFocusIndex=o.lower;n._upperFocusIndex=o.upper}if(n._cachedContinousAxisData&&!n._readStoredData){n._cachedFocusAxisData=s["a"].extend(true,{},t.qAxisData);Wt(e,i,t.qAxisData.qAxis,n._cachedContinousAxisData.qAxis)}return t}))},updateFocusedContinuousData:function t(e,i){var a=this;var n=this._data;return this.getFocusedContinousData(e,i,n).then((function(t){n.qHyperCube.qDataPages=t.qDataPages;n.qHyperCube.qAxisData=t.qAxisData;var e=0===n.qHyperCube.qDataPages[0].qMatrix.length;a._activeDimAxis.setLabels(e?[]:n.qHyperCube.qAxisData.qAxis);var i=a._activeDimAxis.getUseTransition();a._activeDimAxis.setUseTransition(false);a._activeDimAxis.updateSize();a._activeDimAxis.setUseTransition(i)}))},_preUpdateData:function t(e){var i=this;var a=this._super;var s=vt.getFullContinuousRange(e);var r=s.min;var o=s.max;if(i.isDimensionContinuous)return i.getFullContinousData(e,r,o).then((function(t){if(!i.isDimensionContinuous)return e;e=vt.addContinuousDataToLayout(e,t);i._activeDimAxis.setDataRange(r,o);i.components.scrollArea.setFullRange(o-r);i.components.scrollArea.setViewRange(o-r);i._activeDimAxis.setPlotMin(r);i._activeDimAxis.setPlotMax(o);gt["a"].cancelDebounce(i._debounceUpdateHandle);return a.call(i,e).then((function(t){var e=n.a.extend(true,{},t);i.components.miniChart.setData(e,true);return t}))}));return this._super(e)},_updateData:function t(e){this._super.apply(this,[].slice.call(arguments));this._pagingInfo.set(0,0,0,0);if(this.isValid(e)){var i;var a=e.qHyperCube.qStackedDataPages[e.qHyperCube.qStackedDataPages.length-1];i=a&&a.qData?a.qData.length?{qLeft:0,qTop:0,qWidth:e.qHyperCube.qSize.qcx,qHeight:a.qData[0].qSubNodes.length}:a.qArea:e.qHyperCube.qDataPages[0].qArea;this._pagingInfo.set(i.qLeft,i.qTop,i.qWidth,i.qHeight);this.components.dimensionAxis.setInnerOffset(i.qTop*this.scrollMultiplicator)}},updateGrid:function t(e,i){this._super(e,i);this.components.grid.setAxes(this._activeDimAxis,this.components.measureAxis)},_setActiveDimensionAxis:function t(e){var i=this.isDimensionContinuous;var a=mt["a"].isTimeDimension(i,e.qHyperCube.qDimensionInfo[0]);var n;if(a){this._activeDimAxis=this.components.timeAxis;n="continuousAxis"}else if(i){this._activeDimAxis=this.components.continuousAxis;n="continuousAxis"}else{this._activeDimAxis=this.components.dimensionAxis;n="dimensionAxis"}this.components.miniChart&&this.components.miniChart.setActiveDimensionAxis(n);this.components.dataArea&&this.components.dataArea.setActiveDimensionAxis(this._activeDimAxis)},updateAxis:function t(e){this._super.apply(this,[].slice.call(arguments));this._readStoredData&&this.options.hideChartScrollWithoutMiniChart&&!this.components.scrollArea.getUseMiniChart()?this.components.scrollArea.hideComponent():this.components.scrollArea.showComponent();if(this.selections){var i="S"!==e.qHyperCube.qMode||this.isDimensionContinuous&&e.qHyperCube.qDimensionInfo.length>1;Vt.apply(this,[e.qHyperCube.qDimensionInfo.length,e.qHyperCube.qMeasureInfo.length,i,e.color?e.color.mode:null])}this.tooltips&&this.tooltips.setComponent(["top","bottom"].includes(this.components.dimensionAxis.dock)?"y":"x",this.components.dimensionAxis);this._updateMinDiscreteUnitSize(this.components.dimensionAxis)},shouldShowMiniChart:function t(){return Ct["a"].getDimensionSize(this._data.qHyperCube.qDimensionInfo[0])>1&&false!==this._data.showMiniChartForContinuousAxis},shouldDisableZoom:function t(){return Ct["a"].getDimensionSize(this._data.qHyperCube.qDimensionInfo[0])<=1},updateTimeAxis:function t(){if(this.isDimensionContinuous){this._disableZoom=this.shouldDisableZoom();if(mt["a"].isTimeDimension(true,this._data.qHyperCube.qDimensionInfo[0])){this.components.timeAxis.showComponent();this.components.continuousAxis.hideComponent();this.components.timeAxis.setLabels(this._data.qHyperCube.qAxisData?this._data.qHyperCube.qAxisData.qAxis:null)}else{this.components.continuousAxis.showComponent();this.components.timeAxis.hideComponent()}mt["a"].hasTimeTag(this._data.qHyperCube.qDimensionInfo[0])?this._activeDimAxis.dimensionFormatter=new xt["a"](this.backendApi.localeInfo,this.backendApi.localeInfo.qDateFmt,null,null,"TS"):this._activeDimAxis.dimensionFormatter=this.chartFormatter.getFormattersForMeasures(this._data.qHyperCube.qDimensionInfo,[0])[0];this.shouldShowMiniChart()?this.components.scrollArea.showComponent():this.components.scrollArea.hideComponent();this.components.dimensionAxis.hideComponent()}else{this.components.dimensionAxis.showComponent();this.components.dimensionAxis.setOffset(this.components.scrollArea.getOffset());this.components.timeAxis.hideComponent();this.components.continuousAxis.hideComponent()}},_disablePagingTransitions:function t(){zt.call(this)},_enablePagingTransitions:function t(){Ht.call(this)},_postResize:function t(){this._super();if(!this.components.dimensionAxis)return;this._updateMinDiscreteUnitSize(this.components.dimensionAxis)},_updateMinDiscreteUnitSize:function t(e){var i=this._data.qHyperCube.qSize.qcy;var a=this._data.qHyperCube;var n="S"===a.qMode?"qDataPages":"qStackedDataPages";var s=a[n]&&a[n][0]?a[n][0].qArea.qHeight:0;if(s>=i&&false===this.options.components.scrollArea.show){e.setMinDiscreteUnitSize(null);return}!e.isVisible(this._layoutMode)||"title"===this._data.dimensionAxis.show||"all"===this._data.dimensionAxis.show&&"none"===this._data.dimensionAxis.label?this._layoutMode===Z["a"].prototype.ShowFlags.SPARK?e.setMinDiscreteUnitSize(7):e.setMinDiscreteUnitSize(20):e.setMinDiscreteUnitSize(28)},layout:function t(){var e;if(false===this.options.components.scrollArea.show){var i=this.components.dimensionAxis;i._hideMyLabels=false;e=function t(){if(i._discreteSpacing*(i._groupSize||1)<20){i._hideMyLabels=true;return true}return}}this._super(this.components.dimensionAxis.isVertical()?"vertical":"horizontal",e);Bt.call(this)},setIsDimensionContinuous:function t(e){if(this.isDimensionContinuous===e)return;this.isDimensionContinuous=e;this.components.scrollArea.setAllowResize(e);this.checkScrollToggle()},checkScrollToggle:function t(){if(this._navigation&&this._on)if(this.isDimensionContinuous){this._scrollController.off();this._panZoomController.on()}else{this._panZoomController.off();this.moreData?this._scrollController.on():this._scrollController.off()}},on:function t(){if(this._on)return;this._super();this.checkScrollToggle()},off:function t(){if(!this._on)return;if(this._navigation){this._scrollController.off();this._panZoomController.off()}this._super()},destroy:function t(){this._super();this.cancelPromises=true;this._disablePagingTransitions();this.components.scrollArea.stopListen("scrollStart");this.components.dimensionAxisTitle.stopListen("drill-up");this._panZoomController.release();this.components.timeAxis&&this.components.timeAxis.stopListen("rendered");this.components.continuousAxis&&this.components.continuousAxis.stopListen("rendered");this._scrollController.PanStart.unbind(this.panStartFn);this._scrollController.PanUpdate.unbind(this.panUpdateFn);this._scrollController.PanWheel.unbind(this.panWheelFn)}});var Zt=Gt;var Yt=i("tccY");var Xt=i("WoAn");function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jt(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function Qt(t,e,i){e&&Jt(t.prototype,e);i&&Jt(t,i);return t}var te={LINE:"line",AREA:"area",STACKED:"stackedArea"};var ee={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function ie(t,e,i,a){return i<t||a>e}function ae(t){return t.color.byMeasureDef&&t.color.byMeasureDef.activeMeasureIndex>=0&&1===t.qHyperCube.qMeasureInfo.length}var ne=function(){function t(){Kt(this,t);this._lineObjectSettings=[]}Qt(t,[{key:"update",value:function t(e,i){this._updateLineObjectsSettings(e,s["a"].extend({selections:this._getSelected(e,i.numDimensions)},i))}},{key:"getLineObjectsSettings",value:function t(){return this._lineObjectSettings}},{key:"getPointsOutOfRange",value:function t(){return this._outOfRange.points}},{key:"_updateLineObjectsSettings",value:function t(e,i){var a=e?e.length:0;this._outOfRange={up:{},down:{},points:[]};this._lineObjectSettings=[];for(var n=0;n<a;n++){var r=e[n];var o=i.minorAxes[i.measureToAxisIndex[r.measureIdx]];var l=i.axesSettings[i.measureToAxisIndex[r.measureIdx]];var c=this._getColorSettings(i.colorMap,l,o);var h=[];this._updateLinePoints(e[n].points,h,this._outOfRange,s["a"].extend({majorAxis:i.majorAxis,minorAxis:o,measureIdx:r.measureIdx,axisSettings:l,isLineSelected:i.selections.lines.indexOf(n)>=0},i));var u=s["a"].extend({info:e.info,colors:c,clippings:this._getClippings(o,i.rect),idx:e.idx,points:h},i);this._lineObjectSettings.push(u)}}},{key:"_updateLinePoints",value:function t(e,i,a,n){var s=.5;var r=e?e.length:0;var o=1===r;var l=n.yMirrorMode;var c=n.rect.width;var h=n.rect.height;var u=0;for(var d=0;d<r;d++){if(!e[d])continue;var f=e[d];var p=f.idx;var v={x:n.isNumeric?n.numericAxis.getPositionOfValue(f.dimValue):n.majorAxis.getPositionOfValue(p,0),y:n.minorAxis.zeroPos};var m=f.cacheCircle;if(m){m.cx=v.x;m.cy=v.y}if(o&&(v.x<0||v.x>c))continue;if(f.isNaN&&!f.hasRightNeighbour&&"number"!==typeof f.nearestRightNeighbour)break;if(f.isNaN&&n.lineType===te.STACKED&&n.nullMode===ee.CONNECT&&true!==f.isInterpolationOffset);else if(f.isNaN&&true!==f.isInterpolationOffset){i.push(false);continue}var g=f.hasRightNeighbour?e[d+1].idx:f.nearestRightNeighbour;var x="undefined"!==typeof g?n.isNumeric?e[g]?n.numericAxis.getPositionOfValue(e[g].dimValue):NaN:n.majorAxis.getPositionOfValue(g,0):NaN;if(!l&&ie(0,c,x,u)||l&&ie(0,c,u,x)){i.push(false);continue}var _=f.cacheItem&&f.cacheItem.selected;var y=!_&&n.isLineSelected&&n.selections.synqronize&&this._isSelectedIndirectly(p,n.selections.lines,n.selections.points);var b=n.minorAxis.getPositionOfValue(f.aggregated.end);v.y=L["a"].roundToHalf(b)+s;v.y<-1e5&&(v.y=-1e5);v.y>h+1e5&&(v.y=h+1e5);if(m){m.r=Math.max(n.style.dataPoints.size.normal/2,8);m.cy=Math.max(n.axisSettings.topCutoff,Math.min(n.axisSettings.bottomCutoff,v.y))}f.isNaN||(u=v.x);var M=void 0;var w=f.cacheItem&&(f.cacheItem.parent?[f.cacheItem.parent.id,f.cacheItem.id]:f.cacheItem.id);var S=n.colorMap.getColor(w,f.aggregated.end,n.measureIdx,f.rowIndex).toRGBA();if(o)M=true;else{M=!f.hasLeftNeighbour&&!f.hasRightNeighbour&&n.nullMode===ee.GAP;M&&n.isNumeric&&(M=(0===d||e[d-1])&&(d===r-1||e[d+1]))}var D={size:_?n.style.dataPoints.size.selected:n.style.dataPoints.size.normal,selected:_||y,selectedIndirectly:y,text:f.cacheItem?f.cacheItem.getDimensions()[0]:"",measureIdx:f.measureIdx,label:f.label,value:f.aggregated.end,isNaN:f.isNaN,isInterpolationOffset:f.isInterpolationOffset,color:S,outOfRangeUp:b<n.axisSettings.topCutoff,outOfRangeDown:b>n.axisSettings.bottomCutoff,outOfDimensionBounds:v.x<0||v.x>c,outOfBounds:v.x<0||v.x>c||f.aggregated.end>n.axisSettings.plotMax||f.aggregated.end<n.axisSettings.plotMin,dataIndex:p,isSingle:M,hidden:f.hidePoint,x:v.x,y:v.y,y1:0===f.aggregated.start?n.axisSettings.areaStartBase:n.minorAxis.getPositionOfValue(f.aggregated.start),cacheItem:f.cacheItem,isNull:f.cacheItem&&-2===f.cacheItem.id};if(D.outOfRangeUp||D.outOfRangeDown)if(D.outOfRangeUp&&!a.up[D.x]){a.points.push(D);a.up[D.x]=true}else if(D.outOfRangeDown&&!a.down[D.x]){a.points.push(D);a.down[D.x]=true}i[p]=D}}},{key:"_getSelected",value:function t(e,i){var a=[];var n=[];if(i)for(var s=0;s<e.length;s++){var r=e[s].points;for(var o=0;o<r.length;o++){if(!r[o])continue;if(r[o].cacheItem&&r[o].cacheItem.selected)if(-1===a.indexOf(s)){a.push(s);n[s]=[r[o].idx]}else n[s].push(r[o].idx)}}return{lines:a,points:n,synqronize:a.length>1}}},{key:"_isSelectedIndirectly",value:function t(e,i,a){var n=i?i.length:0;var s=false;for(var r=0;r<n;r++){var o=a[i[r]];for(var l=0;l<o.length;l++)if(e===o[l]){s=true;break}}return s}},{key:"_getMeasureGradient",value:function t(e,i,a){var n={gradient:{colors:[],limits:[],x0:0,x1:0,y0:e.posMin,y1:e.posMax}};i.getColorMapping().slice().reverse().forEach((function(t){n.gradient.colors.push(t.grad[1].toRGBA());n.gradient.colors.push(t.grad[0].toRGBA());n.gradient.limits.push(Math.min(1,Math.max(0,a.getNormalizedValue(t.id[1]))));n.gradient.limits.push(Math.min(1,Math.max(0,a.getNormalizedValue(t.id[0]))))}));return n}},{key:"_getClippings",value:function t(e,i){var a=e.getPadding();var n=a.top-1;var s=e.rect.height-a.top-a.bottom+2;return{areaClip:{x:0,y:n,width:i.width,height:s},lineClip:{x:0,y:n,width:i.width,height:s}}}},{key:"_getColorSettings",value:function t(e,i,a){var n=.3;var s=false;var r=false;if(e.mode&&e.mode===e.MEASURE&&!Number.isNaN(+i.posMin)&&ae(e._data)){n=.6;r=this._getMeasureGradient(i,e,a)}else if(e.mode&&e.mode===e.EXPRESSION||e.mode===e.MEASURE&&!Number.isNaN(+i.posMin)){s=true;n=.6}return{isExpression:s,areaAlpha:n,varyingPointColors:s,gradient:r}}}]);return t}();var se=ne;var re=i("plXO");function oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function ce(t,e,i){e&&le(t.prototype,e);i&&le(t,i);return t}var he=function(){function t(e,i){oe(this,t);this.wrapper=document.createElement("div");this.wrapper.style.position="absolute";this.renderer=new re["a"](this.wrapper,i);this.minorAxis=null;this.majorAxis=null;e.appendChild(this.wrapper)}ce(t,[{key:"update",value:function t(){}},{key:"release",value:function t(){this.wrapper&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper);this.wrapper=null;this.renderer.release();this.minorAxis=null;this.majorAxis=null}},{key:"show",value:function t(){this.wrapper.style.display="block"}},{key:"hide",value:function t(){this.wrapper.style.display="none"}},{key:"render",value:function t(){if("none"!==this.wrapper.style.display)return this.renderer.render();return o["a"].resolve()}},{key:"clear",value:function t(){this.renderer.clear()}}]);return t}();var ue=he;var de=i("Q5XB");var fe=i("NWoE");var pe=i("ZrpC");var ve=i("T7lR");function me(t){switch(t){case"diamond":case"triangle":return new pe["a"];case"circle":return new fe["a"];case"line":return new ve["a"];default:return new ve["a"]}}function ge(t,e,i,a,n){var s=a;switch(n){case"circle":t.set(e,i,.5*s);break;case"diamond":t.set([{x:e,y:i-s/2},{x:e-s/2,y:i},{x:e,y:i+s/2},{x:e+s/2,y:i}]);break;case"triangle":t.set([{x:e,y:i-s/2},{x:e-s/2,y:i+s/2},{x:e+s/2,y:i+s/2}]);break;default:s=a;t.set(e-s/2,i-s/2,s,s)}}var xe=de["a"].extend("Points",{init:function t(e){this._super();this._symbol=e||"circle"},update:function t(e){var i;var a;var n;var s=e.points?e.points:[];var r=0;var o=false;var l=s?s.length:0;for(a=0;a<l;a++){n=s[a];if(!n||n.outOfDimensionBounds||n.isNaN)continue;i=this._children[r++];if(!i){i=me(this._symbol);this.addChild(i)}ge(i,n.x,n.y,n.size,this._symbol);i.fill=n.selectedIndirectly?"white":n.color;i.stroke=n.selectedIndirectly?n.color:!!n.selected&&"white";i.opacity=n.selected||n.selectedIndirectly?1:e.globalAlpha;i.strokeWidth=1.5;i.visible=!n.outOfBounds&&!n.isNaN&&!n.hidden&&(e.showDataPoints||n.isSingle||n.keep||n.selected);i.visible&&!o&&(o=i.true);i.data.outOfBounds=n.outOfBounds;i.data.value=n.value;i.data.label=n.label;i.data.dataIndex=n.dataIndex;i.data.text=n.text}r<this._children.length&&this.removeChildren(this._children.slice(r-this._children.length));this.visible=o;this._selectedSize=e.style.dataPoints.size.selected;return this},getFromRange:function t(e,i,a){return this.children.filter((function(t){if(a)return t.cx>=e&&t.cx<=i&&t.visible;return t.cx>=e&&t.cx<i&&t.visible})).map((function(t){var e=new fe["a"](t.cx,t.cy,.5*this._selectedSize);e.fill=t.fill;e.stroke="white";e.opacity=1;e.strokeWidth=1.5;return e}),this)}});var _e=xe;var ye=i("djNn");var be={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function Me(t,e){var i=new pe["a"](t);i.opacity=e.opacity;i.close=false;i.stroke=e.stroke;i.strokeWidth=e.strokeWidth;i.lineJoin=e.lineJoin;i.lineCap=e.lineCap;return i}function we(t){var e=[];var i=t._polygons[0].points;if(!i||i.length<2)return e;t.data.selected=i[0].selected&&i[1].selected;var a=null;var n=i.length-1;for(var s=1;s<i.length;s++)if(i[s-1].selected&&i[s].selected){a=s-1;break}if(null!==a){for(var r=a;r<i.length;r++)if(!i[r].selected){n=r-1;break}var o=i.slice(0,a+1);var l=i.slice(a,n+1);var c=i.slice(n);var h;if(o&&o.length>1){h=Me(o,t);e.push(h)}if(l&&l.length>1){h=Me(l,t);h.data.selected=true;e.push(h)}if(c&&c.length>1){h=Me(c,t);e=e.concat(we(h))}}else e.push(t);return e}function Se(t){var e=[];for(var i=0;i<t.length;i++)e=e.concat(we(t[i]));return e}function De(t,e,i,a){var n;var s;var r=[];var o=e?e.length:0;var l=[];for(var c=0;c<o;c++){s=e[c];if(!s||s.isNaN&&true!==s.isInterpolationOffset){if((void 0!==s||!t.isNumeric)&&i===be.GAP&&n&&r.length){n.set(r);l.push(n);n=null;r=[]}continue}if(!n){n=new pe["a"];n.close=false;n.stroke=a||s.color||"#333333";n.lineJoin="round";n.lineCap="round";n.opacity=1;r=[];s.isNull&&!a&&e[c+1]&&(n.stroke=e[c+1].color||"#333333");if(s.hidden&&!a)for(var h=1;h<o-c;++h)if(e[c+h]&&!e[c+h].hidden){n.stroke=e[c+h].color||"#333333";break}}r.push({x:s.x,y:s.y,selected:s.selected,dataIndex:s.dataIndex,y_:s.y1})}if(n&&r.length>1){n.set(r);l.push(n)}l=Se(l);o=l.length;for(var u=0;u<o;u++){l[u].strokeWidth=t.style.line.width*(l[u].data.selected?2:1);l[u].opacity=l[u].data.selected?1:t.globalAlpha}return l}function Ae(t,e,i,a){var n=e?e.length:0;var s=t.interpolateVaryingColors;var r=[];var o=null;var l;var c;var h;var u;for(var d=0;d<n;d++){l=e[d];if(!l||l.isNaN&&true!==l.isInterpolationOffset){void 0===l&&t.isNumeric||i!==be.GAP||(c=null);continue}if(c){o=new a(c.x,c.y,l.x,l.y);o.data.selected=c.selected&&l.selected;o.data.y1_=c.y1;o.data.y2_=l.y1;if(l.hidden||c.hidden){for(var f=d;f>=0;f--)if(!e[f].hidden){h=e[f].color;break}if(void 0===h)for(var p=d;p<n;p++)if(!e[p].hidden){h=e[p].color;break}u=h}else{h=c.color;u=l.color}c.color!==l.color?o.stroke={gradient:{x0:c.x,y0:0,x1:l.x,y1:0,limits:s?[0,1]:[0,.5,.5,1],colors:s?[h||"#333333",u||"#333333"]:[h||"#333333",h||"#333333",u||"#333333",u||"#333333"]}}:o.stroke=u||"#333333";o.opacity=o.data.selected?1:t.globalAlpha;o.strokeWidth=t.style.line.width*(o.data.selected?2:1);r.push(o);c=l}else c=l}return r}var ke=de["a"].extend("PolyLine",{init:function t(){this._super();this.lineJoin="round";this.lineCap="round"},update:function t(e){this.clip=e.clippings.lineClip;this.removeChildren();e.colors.varyingPointColors?this.addChildren(ke.getLines(e,e.points,e.nullMode,ye["a"])):this.addChildren(De.call(this,e,e.points,e.nullMode,e.colors.gradient))},getLineInRange:function t(e,i){var a=new ke;this.children.forEach((function(t){var n=t.getPartialFromRange(e,i);if(!n)return;n.stroke=t.stroke;n.strokeWidth=3;n.close=t.close;a.addChildren([n])}));return a}});ke.getLines=Ae;var Ce=ke;function qe(t){return{x:t.x,y:t.y_}}function Le(t,e){var i;var a;var n=[];var s;var r;var o;var l=e?e.length:0;for(i=0;i<l;i++){if(e[i]instanceof pe["a"]){s=e[i]._polygons[0].points;a=new pe["a"](s.concat(s.map(qe).reverse()));a.fill=t.colors.gradient||e[i].stroke;a.opacity=t.colors.areaAlpha*(e[i].data.selected?1:t.globalAlpha)}else if(e[i]instanceof ye["a"]){r=Math.floor(e[i].x1);o=Math.floor(e[i].x2);s=[{x:r,y:e[i].y1},{x:r,y:e[i].data.y1_},{x:o,y:e[i].data.y2_},{x:o,y:e[i].y2}];a=new pe["a"](s);e[i].stroke.gradient?a.fill={gradient:{colors:e[i].stroke.gradient.colors,limits:e[i].stroke.gradient.limits,x0:e[i].stroke.gradient.x0,x1:e[i].stroke.gradient.x1,y0:0,y1:0}}:e[i].stroke?a.fill=e[i].stroke||"#eeeeee":a.fill=t.colors.gradient||"#eeeeee";a.opacity=t.colors.areaAlpha*(e[i].data.selected?1:t.globalAlpha)}a&&n.push(a)}return n}var Pe=de["a"].extend("PolyArea",{getAreaFromSegments:function t(e){var i=new de["a"];i.addChildren(Le(this.__data,e));return i},update:function t(e,i){this.__data=e;this.clip=e.clippings.areaClip;this.removeChildren();this.addChildren(Le(e,i))}});var Ie=Pe;var Te=de["a"].extend("LineObject",{init:function t(e,i){this._super();this.data.label=e.info.label;if(i.showArea){this._areaLayer=new Ie;this.addChild(this._areaLayer)}this._lineLayer=new Ce;this.addChild(this._lineLayer);this._pointLayer=new _e("circle");this.addChild(this._pointLayer)},update:function t(e){this._pointLayer.update(e);this._lineLayer.update(e);this.visible=this._pointLayer.visible||this._lineLayer.visible;if(this._areaLayer){this._areaLayer.update(e,this._lineLayer.children);this._areaLayer.visible&&(this.visible=true)}},getLinesInRange:function t(e,i,a){var n=new de["a"];var s=this._lineLayer.getLineInRange(e,i);if(this._areaLayer){var r=this._areaLayer.getAreaFromSegments(s.children);n.addChildren([r])}n.addChildren([s]);n.addChildren(this._pointLayer.getFromRange(e,i,a));return n}});var Oe=Te;function Ne(t){Ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Ne(t)}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function Ve(t,e,i){e&&Re(t.prototype,e);i&&Re(t,i);return t}function ze(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&Fe(t,e)}function Fe(t,e){Fe=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return Fe(t,e)}function je(t){var e=$e();return function i(){var a=We(t),n;if(e){var s=We(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return He(this,n)}}function He(t,e){if(e&&("object"===Ne(e)||"function"===typeof e))return e;return Be(t)}function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function We(t){We=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return We(t)}var Ue=function(t){ze(i,t);var e=je(i);function i(t){Ee(this,i);return e.call(this,t,{name:"line-objects-layer"})}Ve(i,[{key:"updateInstances",value:function t(e,i){var a=e?e.length:0;var n=[];this.renderer.stage.removeChildren();for(var s=0;s<a;s++)n.push(new Oe(e[s],{showArea:i.showArea}));this.renderer.stage.addChildren(n);this._lineObjects=n}},{key:"getLineObjects",value:function t(){return this._lineObjects}},{key:"getPolyLinesInRange",value:function t(e,i,a){return this._lineObjects.map((function(t){return t.getLinesInRange(e,i,a)}))}},{key:"update",value:function t(e){var i=this._lineObjects?this._lineObjects.length:0;for(var a=0;a<i;a++)this._lineObjects[a].update(e[a])}}]);return i}(ue);var Ge=Ue;function Ze(t){Ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Ze(t)}function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function Ke(t,e,i){e&&Xe(t.prototype,e);i&&Xe(t,i);return t}function Je(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&Qe(t,e)}function Qe(t,e){Qe=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return Qe(t,e)}function ti(t){var e=ai();return function i(){var a=ni(t),n;if(e){var s=ni(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return ei(this,n)}}function ei(t,e){if(e&&("object"===Ze(e)||"function"===typeof e))return e;return ii(t)}function ii(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ai(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function ni(t){ni=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return ni(t)}function si(t,e,i,a,n){var s=[];if("left"===n){s.push({x:t,y:e+i/2});s.push({x:t,y:e-i/2});s.push({x:t-a,y:e})}else if("right"===n){s.push({x:t,y:e+i/2});s.push({x:t,y:e-i/2});s.push({x:t+a,y:e})}else if("up"===n){s.push({x:t-i/2,y:e});s.push({x:t+i/2,y:e});s.push({x:t,y:e-a})}else if("down"===n){s.push({x:t-i/2,y:e});s.push({x:t+i/2,y:e});s.push({x:t,y:e+a})}return s}var ri=function(t){Je(i,t);var e=ti(i);function i(t){var a;Ye(this,i);a=e.call(this,t,{name:"out-of-bounds-layer"});a._markerSize=8;return a}Ke(i,[{key:"update",value:function t(e,i){var a=this.renderer.stage;var n=a.children;var s=i.markerSize||this._markerSize;var r=e?e.length:0;for(var o=0;o<r;o++){var l=n[o];var c=e[o];var h=c;c.data&&(h=c.data);var u=i.axesSettings[i.measureToAxisIndex[h.measureIdx]];var d=si(h.x,h.outOfRangeUp?u.topCutoff+s:u.bottomCutoff-s,s,s,h.outOfRangeUp?"up":"down");if(l)l.set(d);else{l=new pe["a"](d);a.addChild(l)}l.fill=i.style.outOfRange.color;l.opacity=h.selected?1:i.globalAlpha}r<n.length&&a.removeChildren(n.slice(r-n.length))}}]);return i}(ue);var oi=ri;var li=i("ohbW");var ci=i("x/4K");function hi(t){hi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return hi(t)}function ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function di(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function fi(t,e,i){e&&di(t.prototype,e);i&&di(t,i);return t}function pi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&vi(t,e)}function vi(t,e){vi=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return vi(t,e)}function mi(t){var e=_i();return function i(){var a=yi(t),n;if(e){var s=yi(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return gi(this,n)}}function gi(t,e){if(e&&("object"===hi(e)||"function"===typeof e))return e;return xi(t)}function xi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _i(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function yi(t){yi=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return yi(t)}var bi={LINE:"line",AREA:"area",STACKED:"stackedArea"};function Mi(){var t;var e;var i;var a;var n;var s;var r;var o;var l;var c={};var h;var u=this.combinedMeasuresFormatter;this._allDataLineObjectsLength=this._allDataLineObjects?this._allDataLineObjects.length:0;this._dataLabelsOfLines=new Array(this._allDataLineObjectsLength);this._allDataPointLabels=[];for(t=0;t<this._allDataLineObjectsLength;t++){this._dataLabelsOfLines[t]=[];i=this._allDataLineObjects[t];s=i.find("Points [visible='true']");n=s?s.length:0;for(e=0;e<n;e++){r=s[e].getLocalBoundingRect();o=r.x+r.width/2;l=r.y+r.height/2;h="".concat(o,";").concat(l);if(h in c)continue;c[h]=true;a={text:this._lineType===bi.STACKED&&this._allDataLineObjectsLength>1?u.formatValue(s[e].value):s[e].data.label,x0:o,y0:l,align:"center",font:this._style.dataPoints.font,maxWidth:512,maxNumLines:1,line:t};this._dataLabelsOfLines[t].push(a);this._allDataPointLabels.push(a)}}this._numAllDataPointLabels=this._allDataPointLabels.length}function wi(){var t;for(t=0;t<this._numAllDataPointLabels;t++)this._allDataPointLabels[t].size=li["a"].measureTextObject({type:"text",shape:this._allDataPointLabels[t]})}function Si(){wi.call(this);var t;var e;var i;var a;var n;var s;var r;var o=this._discreteSpacing/2;var l="leftDx";var c="leftDy";var h="rightDx";var u="rightDy";var d=1;if(this.yMirrorMode){l="rightDx";c="rightDy";h="leftDx";u="leftDy";d=-1}for(t=0;t<this._allDataLineObjectsLength;t++){a=this._dataLabelsOfLines[t];i=a.length;if(0===i)continue;if(1===i){n=a[0];n[l]=o;n[c]=0;n[h]=o;n[u]=0;continue}n=a[0];n.priority=6;r=a[1];n[l]=o;n[c]=0;n[h]=(r.x0-n.x0)*d;n[u]=n.y0-r.y0;for(e=1;e<i-1;e++){n=a[e];s=a[e-1];r=a[e+1];n[l]=s[h];n[c]=-s[u];n[h]=(r.x0-n.x0)*d;n[u]=n.y0-r.y0;s.y0<n.y0?n.y0<r.y0?n.priority=1:n.y0===r.y0?n.priority=2:n.priority=3:s.y0===n.y0?n.y0<r.y0?n.priority=2:n.y0===r.y0?n.priority=0:n.priority=2:n.y0<r.y0?n.priority=4:n.y0===r.y0?n.priority=2:n.priority=1}n=a[i-1];s=a[i-2];n[l]=s[h];n[c]=-s[u];n[h]=o;n[u]=0;n.priority=5}}function Di(){void 0!==this._usedDataMax&&this._usedDataMax===this._usedDataMin?this._allDataPointLabels.sort((function(t,e){return t.x0<e.x0?-1:1})):this._allDataPointLabels.sort((function(t,e){if(t.priority>e.priority)return-1;if(t.priority===e.priority){if(6===t.priority)return t.x0===e.x0?t.y0>e.y0?1:-1:t.x0>e.x0?1:-1;if(5===t.priority)return t.x0===e.x0?t.y0>e.y0?1:-1:t.x0>e.x0?-1:1;if(4===t.priority)return t.y0>e.y0?1:-1;if(3===t.priority)return t.y0>e.y0?-1:1;if(t.y0===e.y0)return t.x0>e.x0?-1:1;return t.y0<e.y0?-1:1}return 1}))}function Ai(){var t;var e;var i;var a;var n;var s;var r=[];var o;for(t=0;t<this._allDataLineObjectsLength;t++){i=this._allDataLineObjects[t];a=i.find("PolyLine [stroke]");n=a?a.length:0;for(e=0;e<n;e++){s=a[e];o=s.getLocalPoints();r.push(o)}}return r}function ki(t,e){if(t.minX2>e.maxX2||t.maxX2<e.minX2||t.minY2>e.maxY2||t.maxY2<e.minY2)return false;return true}function Ci(t){var e=this._allDataPointLabels[t];var i=0;var a=this.rect.width;var n=0;var s=this.rect.height;return e.x0>=i&&e.x0<=a&&e.minX>=i&&e.maxX<=a&&e.minY>=n&&e.maxY<=s}function qi(t){return!ci["a"].checkPolylinesIntersectingRectDefinedByMaxMin(this._polylines,this._allDataPointLabels[t])}function Li(t){var e=this._allDataPointLabels[t];var i=(e.minX+e.maxX)/2;var a=(e.minY+e.maxY)/2;var n=Math.pow(i-e.x0,2)+Math.pow(a-e.y0,2);var s;var r;for(r=0;r<this._numAllDataPointLabels;r++){s=this._allDataPointLabels[r];if(r!==t&&n>=Math.pow(i-s.x0,2)+Math.pow(a-s.y0,2))return false}return true}function Pi(t){var e;var i=this._allDataPointLabels[t];for(e=0;e<t;e++)if(this._allDataPointLabels[e].status&&ki(i,this._allDataPointLabels[e]))return false;return true}function Ii(t){if(!Ci.call(this,t))return false;if(!Li.call(this,t))return false;if(!qi.call(this,t))return false;return Pi.call(this,t)}function Ti(t){var e=this._dataLabelHorizontalGap/2;var i=this._dataLabelVerticalGap/2;var a=t.size.width/2;var n=a+e;t.minX=t.x-a;t.maxX=t.x+a;t.minX2=t.x-n;t.maxX2=t.x+n;var s=t.size.height;if("top"===t.baseline){t.minY=t.y;t.maxY=t.y+s;t.maxY2=t.maxY+i;t.minY2=t.minY-i}if("bottom"===t.baseline){t.maxY=t.y;t.minY=t.y-s;t.maxY2=t.maxY+i;t.minY2=t.minY-i}if("middle"===t.baseline){t.maxY=t.y+s/2;t.minY=t.y-s/2;t.maxY2=t.maxY+i;t.minY2=t.minY-i}}function Oi(t){6===t.priority&&t.x-t.size.width/2<0&&(t.x=t.size.width/2+1);5===t.priority&&t.x+t.size.width/2>this.rect.width&&(t.x=this.rect.width-t.size.width/2-1)}function Ni(t){t.baseline="middle";t.x=t.x0-t.size.width/2-this._dataLabelHorizontalGap;t.y=t.y0;return true}function Ei(t){t.baseline="middle";t.x=t.x0+t.size.width/2+this._dataLabelHorizontalGap;t.y=t.y0;return true}function Ri(t){t.baseline="bottom";t.x=t.x0;t.y=t.y0-this._dataLabelMargin;Oi.call(this,t);return true}function Vi(t){t.baseline="top";t.x=t.x0;t.y=t.y0+this._dataLabelMargin;Oi.call(this,t);return true}function zi(t){var e;var i;var a;var n;var s;var r=t.leftDx;var o=t.rightDx;var l=t.leftDy;var c=t.rightDy;var h=1e-9;if(l>0||c>0){l=Math.max(l,h);c=Math.max(c,h);e=t.size.width+2*this._horizontalDistanceFromLine;a=e/(r/l+o/c);if(a<=this._maxDataLabelMargin){t.baseline="bottom";a=Math.max(a,this._dataLabelMargin);t.y=t.y0-a;n=a*r/l;s=a*o/c;i=e/2;n<i?t.x=t.x0+(i-n):s<i&&(t.x=t.x0-(i-s));return true}}return false}function Fi(t){var e;var i;var a;var n;var s;var r=t.leftDx;var o=t.rightDx;var l=-t.leftDy;var c=-t.rightDy;var h=1e-9;if(l>0||c>0){l=Math.max(l,h);c=Math.max(c,h);e=t.size.width+2*this._horizontalDistanceFromLine;a=e/(r/l+o/c);if(a<=this._maxDataLabelMargin){t.baseline="top";a=Math.max(a,this._dataLabelMargin);t.y=t.y0+a;n=a*r/l;s=a*o/c;i=e/2;n<i?t.x=t.x0+(i-n):s<i&&(t.x=t.x0-(i-s));return true}}return false}function ji(t){var e=t.leftDx;var i=t.leftDy;t.baseline="middle";var a=t.size.height/2+this._horizontalDistanceFromLine;var n=Math.abs(this._dataLabelHorizontalGap*i/e);t.x=t.x0-t.size.width/2-this._dataLabelHorizontalGap;t.y=t.y0+(n>=a?0:i>0?a-n:n-a);return true}function Hi(t){var e=t.rightDx;var i=t.rightDy;t.baseline="middle";var a=t.size.height/2+this._horizontalDistanceFromLine;var n=Math.abs(this._dataLabelHorizontalGap*i/e);t.x=t.x0+t.size.width/2+this._dataLabelHorizontalGap;t.y=t.y0+(n>=a?0:i>0?a-n:n-a);return true}function Bi(t){var e=0;var i=this.rect.width;var a;var n;var s=9;var r;var o;if(t.priority>3){t.baseline="middle";if(t.x0-e<=i-t.x0){t.x=t.x0+s+t.size.width/2;t.y=t.y0}else{t.x=t.x0-s-t.size.width/2;t.y=t.y0}}else if(3===t.priority){a=t.leftDy/t.leftDx;n=t.rightDy/t.rightDx;if(n>=a){r=(t.size.height/2+1)/n;if(r<=2*s){t.baseline="middle";t.y=t.y0;t.x=t.x0+Math.max(r,s)+t.size.width/2}else{o=2*s*n-1;t.baseline="top";t.y=t.y0-o;t.x=t.x0+2*s+t.size.width/2}}else{r=(t.size.height/2+1)/a;if(r<=2*s){t.baseline="middle";t.y=t.y0;t.x=t.x0-Math.max(r,s)-t.size.width/2}else{o=2*s*a-1;t.baseline="top";t.y=t.y0-o;t.x=t.x0-2*s-t.size.width/2}}}return true}function $i(t){var e;if(t.rightDy<=0){t.baseline="bottom";t.x=t.x0+t.size.width/2;t.y=t.y0+1}else if(t.rightDy<=t.rightDx){t.baseline="bottom";t.x=t.x0+t.size.width/2;t.y=t.y0-t.size.width*Math.abs(t.rightDy/t.rightDx)-1}else{t.baseline="top";e=Math.max(0,t.size.height+1-this.rect.height+t.y0);t.x=t.x0+t.size.width/2+e*Math.abs(t.rightDx/t.rightDy);t.y=t.y0-e+1}return true}function Wi(t){var e;if(t.leftDy<=0){t.baseline="bottom";t.x=t.x0-t.size.width/2;t.y=t.y0+1}else if(t.leftDy<=t.leftDx){t.baseline="bottom";t.x=t.x0-t.size.width/2;t.y=t.y0-t.size.width*Math.abs(t.leftDy/t.leftDx)-1}else{t.baseline="top";e=Math.max(0,t.size.height+1-this.rect.height+t.y0);t.x=t.x0-t.size.width/2-e*Math.abs(t.leftDx/t.leftDy);t.y=t.y0-e+1}return true}function Ui(t,e){var i=this._allDataPointLabels[e];if(!i.status&&t.call(this,i)){Ti.call(this,i);i.status=Ii.call(this,e)}}function Gi(t){var e=this._allDataPointLabels[t];if(this._allDataLineObjectsLength>1){6===e.priority&&Ui.apply(this,[Ni,t]);5===e.priority&&Ui.apply(this,[Ei,t]);Ui.apply(this,[Ri,t]);Ui.apply(this,[Vi,t])}else{Ui.apply(this,[Ri,t]);Ui.apply(this,[Vi,t]);6===e.priority&&Ui.apply(this,[Ni,t]);5===e.priority&&Ui.apply(this,[Ei,t])}if(!e.status)if(e.rightDy+Math.abs(e.rightDx)*e.leftDy/Math.abs(e.leftDx)>=0){Ui.apply(this,[Fi,t]);Ui.apply(this,[zi,t])}else{Ui.apply(this,[zi,t]);Ui.apply(this,[Fi,t])}if(!e.status)if(e.rightDy+Math.abs(e.rightDx)*e.leftDy/Math.abs(e.leftDx)>=0){Ui.apply(this,[ji,t]);Ui.apply(this,[Hi,t])}else{Ui.apply(this,[Hi,t]);Ui.apply(this,[ji,t])}Ui.apply(this,[Bi,t]);e.status||6!==e.priority||Ui.apply(this,[$i,t]);e.status||5!==e.priority||Ui.apply(this,[Wi,t])}function Zi(){var t;for(t=0;t<this._numAllDataPointLabels;t++)Gi.call(this,t)}function Yi(){var t;var e;var i;var a=[];for(t=0;t<this._numAllDataPointLabels;t++){e=this._allDataPointLabels[t];if(e.status){i={type:"text",fill:this._style.dataPoints.color,shape:e};a.push(i)}}this.renderer.shapes=a}var Xi=function(t){pi(i,t);var e=mi(i);function i(t){var a;ui(this,i);a=e.call(this,t);a.wrapper=document.createElement("div");a.wrapper.style.position="absolute";a.renderer=new li["a"](a.wrapper);a.minorAxis=null;a.majorAxis=null;t.appendChild(a.wrapper);a._dataLabelMargin=6;a._maxDataLabelMargin=12;a._dataLabelHorizontalGap=6;a._dataLabelVerticalGap=3;a._horizontalDistanceFromLine=2;return a}fi(i,[{key:"setYMirrorMode",value:function t(e){this.yMirrorMode=e}},{key:"update",value:function t(e,i){this.combinedMeasuresFormatter=i.combinedMeasuresFormatter;this._allDataLineObjects=e;this._lineType=i.lineType;this._discreteSpacing=i.majorAxis.getDiscreteSpacing();this._style=i.style;this.rect=i.rect;this.renderer.shapes=[];Mi.call(this);Si.call(this);Di.call(this);this._polylines=Ai.call(this);Zi.call(this);Yi.call(this)}}]);return i}(ue);var Ki=Xi;function Ji(t){Ji="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return Ji(t)}function Qi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function ea(t,e,i){e&&ta(t.prototype,e);i&&ta(t,i);return t}function ia(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&aa(t,e)}function aa(t,e){aa=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return aa(t,e)}function na(t){var e=oa();return function i(){var a=la(t),n;if(e){var s=la(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return sa(this,n)}}function sa(t,e){if(e&&("object"===Ji(e)||"function"===typeof e))return e;return ra(t)}function ra(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oa(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function la(t){la=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return la(t)}var ca=function(t){ia(i,t);var e=na(i);function i(t){var a;Qi(this,i);a=e.call(this,t);a.ranges=[];return a}ea(i,[{key:"getLineObjects",value:function t(){return this._lineObjects}},{key:"setRanges",value:function t(e){this.ranges=e}},{key:"update",value:function t(e,i){var a=[];this.ranges.forEach((function(t){var n=e.getPositionOfValue(t.min);var s=e.getPositionOfValue(t.max);a=a.concat(i.getPolyLinesInRange(n,s,t.maxIncluded))}),this);this.renderer.stage.removeChildren();if(a.length){this.renderer.stage.addChildren(a);this.show()}else this.hide()}}]);return i}(ue);var ha=ca;function ua(t){ua="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return ua(t)}function da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fa(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function pa(t,e,i){e&&fa(t.prototype,e);i&&fa(t,i);return t}function va(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&ma(t,e)}function ma(t,e){ma=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return ma(t,e)}function ga(t){var e=ya();return function i(){var a=ba(t),n;if(e){var s=ba(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return xa(this,n)}}function xa(t,e){if(e&&("object"===ua(e)||"function"===typeof e))return e;return _a(t)}function _a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ya(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function ba(t){ba=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return ba(t)}var Ma=function(t){va(i,t);var e=ga(i);function i(t){var a;da(this,i);a=e.call(this,t);a.ranges=[];a.color=J["a"].toRGBA("#52cc52",.2);return a}pa(i,[{key:"setRanges",value:function t(e){this.ranges=e}},{key:"update",value:function t(e){var i=this;var a=this.ranges.map((function(t){var a=e.getPositionOfValue(t.min);var n=e.getPositionOfValue(t.max);var s=new ve["a"](a,0,n-a,i.rect.height);s.fill=i.color;return s}));this.renderer.stage.removeChildren();if(a.length){this.renderer.stage.addChildren(a);this.show()}else this.hide()}}]);return i}(ue);var wa=Ma;var Sa={LINE:"line",AREA:"area",STACKED:"stackedArea"};var Da={GAP:"gap",CONNECT:"connect",ZERO:"zero"};function Aa(t,e){var i=t.layoutMap[e]||"medium";var a=t.getStyle("label.value","fontSize");var n=t.getStyle("label.value","fontFamily");return{dataPoints:{color:t.getStyle("label.value","color"),font:"normal ".concat(a," ").concat(n),size:{normal:6,selected:10}},outOfRange:{color:t.getStyle("outOfRange","color")},line:{width:"full"===i?2:1}}}function ka(){if(!this._data||!this._tree)return[];var t=this._data.qHyperCube.qDimensionInfo;var e=t.length;var i=[];var a;var n=0;this._tree.children.forEach((function(s){s.id="".concat(t[0].cId,"_").concat(s.data.qElemNo);a={label:s.data.qText||"",cacheIndex:[],id:s.id};i.push(a);1===e&&(a.cacheIndex[0]=n++);e>1&&s.children.forEach((function(t){if(t.children[0]&&t.children[0].isBranch){-2!==t.data.qElemNo&&a.cacheIndex.push(n);n++}}),this)}),this);return{data:i,info:[{qApprMaxGlyphCount:this._tree.data.qApprMaxGlyphCount}],groupSize:null}}function Ca(t){return!!t}function qa(t,e){var i=Object.keys(t);var a=i.length;var n=i.map((function(e){return t[e].points}));var s=Math.max.apply(null,n.map((function(t){return t.length})));var r;for(var o=0;o<s;++o){var l=false;var c=false;for(r=0;r<a;++r){l=l||n[r][o];c=c||!n[r][o]}if(!l||!c)continue;for(r=0;r<a;++r)n[r][o]||(n[r][o]={idx:l.idx,dimValue:l.dimValue,measureIdx:l.measureIdx,aggregated:{start:0,end:0},hasLeftNeighbour:!!n[r][o-1]&&!n[r][o-1].isNaN,hasRightNeighbour:!!n[r][o+1]&&!n[r][o+1].isNaN,isNaN:!e,value:e?0:NaN,text:e?"0":"",hidePoint:true,color:null,label:""})}}function La(t){var e;var i;var a;var n;var s;var r=t?t.length:0;for(e=0;e<r;e++){s=t[e];if(s&&!s.hasRightNeighbour){for(i=e+1;i<r;i++)if(t[i]&&!t[i].isNaN){s.nearestRightNeighbour=i;break}if(!s.isNaN){if(!Number.isNaN(+s.nearestRightNeighbour)){n=i-e;for(a=1;a<n;a++)if(t[e+a]){t[e+a].nearestRightNeighbour=s.nearestRightNeighbour;t[e+a].nearestLeftNeighbour=e}}e=i-1}}}}function Pa(t){var e;var i;var a;var n;var s;var r;var o;var l;var c;var h=t?t.length:0;var u=this.isDimensionContinuous;for(e=0;e<h;e++){c=t[e];if(c&&!c.hasRightNeighbour&&!c.isNaN&&!Number.isNaN(+c.nearestRightNeighbour)){i=c.nearestRightNeighbour;s=c.value;r=t[i].value;l=i-e;o=u?t[i].dimValue-c.dimValue:i-e;for(a=1;a<l;a++){n=(u?t[e+a].dimValue-c.dimValue:a)/o;t[e+a]&&(t[e+a].interpolatedValue=s*(1-n)+r*n)}}}}function Ia(t,e){var i;var a=[];var n;var s;var r;var o;var l=t?t.length:0;for(i=0;i<l;i++){n=t[i].points;Object.keys(n).forEach((function(t){var i=false;o=n[t].idx;a[o]||(a[o]={pos:0,neg:0,total:0});r=n[t];if(!r)return;s=r.isNaN?Number.isNaN(+r.interpolatedValue)?0:r.interpolatedValue:r.value;if(!Number.isNaN(+s)){if(e){0===s?r.hasLeftNeighbour&&n[t-1]?i=n[t-1].aggregated.end<0:r.hasRightNeighbour&&n[t+1]&&(i=n[t+1].aggregated.end<0):i=s<0;if(i){r.aggregated.start=a[o].neg;a[o].neg+=s;r.aggregated.end=a[o].neg}else{r.aggregated.start=a[o].pos;a[o].pos+=s;r.aggregated.end=a[o].pos}}else{r.aggregated.start=a[o].total;a[o].total+=s;a[o].pos=Math.max(a[o].pos,a[o].total);a[o].neg=Math.min(a[o].neg,a[o].total);r.aggregated.end=a[o].total}if("number"===typeof r.interpolatedValue){r.interpolatedValue=r.aggregated.end;r.isInterpolationOffset=true}}}))}return{pos:Math.max.apply(null,a.filter((function(t){return!!t})).map((function(t){return t.pos}))),neg:Math.min.apply(null,a.filter((function(t){return!!t})).map((function(t){return t.neg})))}}var Ta=Z["a"].extend("LineArea",{init:function t(){this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._generatedCacheItems=[];this._showDataPoints=true;this._colorMap=null;this._showDataPoints=false;this._lineType=Sa.LINE;this._nullMode=Da.GAP;this._separateStacking=true;this._globalAlpha=1;this._dataLabelMargin=6;this._maxDataLabelMargin=12;this._dataLabelHorizontalGap=6;this._dataLabelVerticalGap=3;this._horizontalDistanceFromLine=2;this.interpolateVaryingColors=true;this._styleService=Q["a"].initializeService("object.lineChart");this._lineObjectsModel=new se;this._edgeBleed=0;this._lineLayer=new Ge(this.container);this.layers=[this._lineLayer];if(this.isMini){this._rangeSelectionLayer=new wa(this.container);this.layers.push(this._rangeSelectionLayer)}else{this._oobLayer=new oi(this.container);this.layers.push(this._oobLayer);this._labelLayer=new Ki(this.container);this.layers.push(this._labelLayer);this._rangeSelectionLayer=new ha(this.container);this.layers.push(this._rangeSelectionLayer)}},setYMirrorMode:function t(e){this.yMirrorMode=e;this._labelLayer&&this._labelLayer.setYMirrorMode(e)},preRender:function t(){},afterPaint:function t(){return o["a"].resolve()},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},setShowDataPoints:function t(e){this._showDataPoints=e},getShowDataPoints:function t(){return this._showDataPoints},setMajorAxis:function t(e){this._majorAxis=e;this._majorAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setMinorAxis:function t(e){this._minorAxis=e;this._minorAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setTimeAxis:function t(e){this.timeAxis=e;this.timeAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setContinuousAxis:function t(e){this.continuousAxis=e;this.continuousAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setActiveDimensionAxis:function t(e){this._activeDimAxis=e},setSecondaryMinorAxis:function t(e){this._secondaryMinorAxis=e;this._secondaryMinorAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setIsDimensionContinuous:function t(e){this.isDimensionContinuous=e;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function t(e){this._tree=e;this.invalidateProperties("linearea: setDimensionTree")},setLineType:function t(e){this._lineType=e},setNullMode:function t(e){this._nullMode=e},setSeparateStacking:function t(e){this._separateStacking=e},setShowDataPointLabels:function t(e){this._showDataPointLabels=e},getShowDataPointLabels:function t(){return this._showDataPointLabels},freezeZOrdering:function t(){this._zOrderFreezed=true},unFreezeZOrdering:function t(){this._zOrderFreezed=false},setColorMappings:function t(e){this._colorMappings=e},_updateSize:function t(){this.invalidateDisplay()},getCacheItems:function t(){return this._cacheItems},setCacheItems:function t(e){this._cacheItems=e},getGeneratedCacheItems:function t(){return this._generatedCacheItems||[]},setMeasureIndices:function t(e){this._measureIndices=e},getMajorAxisData:function t(){return this._majorAxisData},getMinorAxisData:function t(){return this._minorAxisData},renderRangeSelections:function t(){this._rangeSelectionLayer.update(this._activeDimAxis,this._lineLayer);return this._rangeSelectionLayer.render()},updateRangeSelection:function t(e){this._rangeSelectionLayer.setRanges(e);this.renderRangeSelections()},_updateProperties:function t(){if(!this._data||!this._tree)return;this._minorAxes=[this._minorAxis];this._secondaryMinorAxis&&this._minorAxes.push(this._secondaryMinorAxis);this._majorAxisData=ka.call(this);this._minorAxisData=null;var e=[];var i=this._data.qHyperCube.qDimensionInfo;var a=i.length;var n=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length;var s=this._data.qHyperCube.qMeasureInfo;var r=this._tree;var o;var l=this._shapes;var c=r.children.length;var h;var u;var d;var f;var p=0;var v=this._shapes.length;var m={};var g=this.measureFormatters;var x;var _;var y=this.selectionIdentifier?this.selectionIdentifier:"dataArea";var b=this._minorAxes;var M=[];var w=[];if(this._measureIndices)w=this._measureIndices;else if(n>0&&n<20)while(w.length<n)w.push(w.slice(-1)[0]+1||0);w.forEach((function(t){M[t]=b.filter((function(e){return!e._dataIndices||e._dataIndices.indexOf(t)>=0}))[0]}));this._measureToAxis=M;this._measureToAxisIndex=M.map((function(t){return b.indexOf(t)}));this._polysData=[];if(c&&w||w.length){r.children.forEach((function(t,n){t.id="".concat(i[0].cId,"_").concat(t.data.qElemNo);t.children.forEach((function(r,c){if(a>1){o="".concat(t.id,";").concat(i[1].cId,"_").concat(r.data.qElemNo);var b="X".concat(r.data.qElemNo);_=m[b];if(!_){m[b]={info:{label:r.data.qText},points:[],values:[],measureIdx:a>1?0:c};_=m[b]}r=r.children[0];x=g[0]}else{if(this._measureIndices&&this._measureIndices.indexOf(c)<0)return;o=t.id;_=m[c];if(!_){m[c]={info:{label:s[c].qFallbackTitle},measureIdx:c,points:[],values:[]};_=m[c]}x=g[c]}u=r?r.children[0]:void 0;if(!u)return;h=void 0!==u.data.qValue?u.data.qValue:u.data.qNum;f=Number.isNaN(+h);if(this._nullMode===Da.ZERO&&f){h=0;f=false}r.chartData={value:h,isNaN:f,idx:n,measureIdx:a>1?0:c,hasLeftNeighbour:!!_.points[n-1]&&!_.points[n-1].isNaN,hasRightNeighbour:false,color:null,text:u.data.qText,label:u.data.qText?x&&("U"===x.type||Number.isNaN(+u.data.qNum))?x.formatValue(h):u.data.qText:"",rowIndex:r.data.rowIndex,dimValue:t.data.qNum,id:o,aggregated:{}};if(!r.chartData.isNaN){r.chartData.aggregated.start=0;r.chartData.aggregated.end=h;_.values.push(h)}_.points[n]=r.chartData;_.points[n-1]&&(_.points[n-1].hasRightNeighbour=!r.chartData.isNaN);r.chartData.shapeIndex=p++;v<p&&l.push(new Xt["a"](NaN,NaN,NaN));r.chartData.cacheCircle=l[r.chartData.shapeIndex];d=r.parent;if(d.cacheItem){e.indexOf(d.cacheItem)<0&&e.push(d.cacheItem);r.chartData.cacheItem=d.cacheItem;d.cacheItem.addShape(y,r.chartData.cacheCircle,true);d.cacheItem.calculateTooltipPosition=true}}),this)}),this);var S=[];var D=n>1||a>1;var A=(this._nullMode===Da.CONNECT||this.isDimensionContinuous)&&this._lineType===Sa.STACKED&&D;var k=this._nullMode===Da.ZERO&&D&&!this.isDimensionContinuous;(A||k)&&qa.call(this,m,k);Object.keys(m).forEach((function(t){(A||this._nullMode!==Da.ZERO)&&La.call(this,m[t].points);A&&Pa.call(this,m[t].points);this.isDimensionContinuous||(m[t].points=m[t].points.filter(Ca));S.push(m[t])}),this);this._polysData=S;if(this._zOrderFreezed){var C=this._sortedOrder;this._polysData.forEach((function(t,e){t.idx=e}));this._polysData.sort((function(t,e){return C.indexOf(t.idx)-C.indexOf(e.idx)}))}else{if(this._lineType===Sa.AREA){this._polysData.forEach((function(t,e){t.idx=e;t.values.sort((function(t,e){return e-t}));t.absMedian=Math.abs(t.values[Math.floor(t.values.length/2)])}));this._polysData.sort((function(t,e){return e.absMedian-t.absMedian}))}else this._polysData.forEach((function(t,e){t.idx=e}));this._sortedOrder=this._polysData.map((function(t){return t.idx}))}if(this._lineType===Sa.STACKED&&(n>1||a>1)){var q=Ia.apply(this,[S,this._separateStacking]);this._minorAxisData={min:q.neg>=0?0:q.neg,max:q.pos<0?0:q.pos}}}this._shapes.length>p&&(this._shapes=this._shapes.slice(0,p));this.setSelectableShapes(e);this._lineLayer.updateInstances(this._polysData,{showArea:[Sa.AREA,Sa.STACKED].includes(this._lineType)})},hasValidData:function t(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data&&this._tree},updateSize:function t(){this._super();this.layers.forEach((function(t){t.rect=this.rect;t.renderer.setDimensions(0,-1,this.rect.width,this.rect.height+1);t.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y)}),this);this._style=Aa(this._styleService,this._layoutMode)},preRelevantSizeCalculation:function t(){this.perpendicularlyRelevantSpacing={left:this._edgeBleed,right:this._edgeBleed,top:1,bottom:this._edgeBleed}},release:function t(){this.layers.forEach((function(t){t.release()}));this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this._secondaryMinorAxis&&this._secondaryMinorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)},beforeLayerUpdates:function t(){},paint:function t(){this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow();var e={numDimensions:this._data.qHyperCube.qDimensionInfo.length,showDataPoints:this._showDataPoints&&this._layoutMode>this.ShowFlags.SPARK,nullMode:this._nullMode,globalAlpha:this._globalAlpha,majorAxis:this._majorAxis,minorAxes:this._minorAxes,numericAxis:this._activeDimAxis,isNumeric:this.isDimensionContinuous,measureToAxisIndex:this._measureToAxisIndex,axesSettings:this._minorAxes.map(this._getAxisDetails),combinedMeasuresFormatter:this.combinedMeasuresFormatter,interpolateVaryingColors:this.interpolateVaryingColors,colorMap:this._colorMap,rect:this.rect,style:this._style,markerSize:Math.min(8,this._majorAxis.getDiscreteSpacing()/2),yMirrorMode:this.yMirrorMode};var i=this;var a=[];this._lineObjectsModel.update(this._polysData,e);this.beforeLayerUpdates(this._lineObjectsModel.getLineObjectsSettings());this._lineLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:1,bottom:this._edgeBleed};this._lineLayer.update(this._lineObjectsModel.getLineObjectsSettings());this.preRender(this._lineLayer._lineObjects);a.push(this._lineLayer.render());if(this._oobLayer){this._oobLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:this._edgeBleed};this._oobLayer.update(this._lineObjectsModel.getPointsOutOfRange(),e);a.push(this._oobLayer.render())}if(this._labelLayer)if(this._layoutMode>this.ShowFlags.XSMALL&&this._showDataPointLabels&&this._showDataPoints){this._labelLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:this._edgeBleed};this._labelLayer.update(this._lineLayer.getLineObjects(),e);this._labelLayer.show();a.push(this._labelLayer.render())}else this._labelLayer.hide();this._rangeSelectionLayer&&a.push(this.renderRangeSelections());return o["a"].all(a).then((function(){return i.afterPaint(e.axesSettings[0].topCutoff,e.axesSettings[0].bottomCutoff)}))},clear:function t(){this._super();this.layers.forEach((function(t){t.clear()}))},_getAxisDetails:function t(e){var i=e.getPlotMin();var a=e.getPlotMax();var n=a-i;var s=e.getPadding();var r=s.top;var o=e.rect.height-s.bottom;var l=0;l=i>0?o:a<0?r:Math.ceil(e.getPositionOfValue(0)+1e-5);return{plotMin:i,plotMax:a,posMin:e.getPositionOfValue(i),posMax:e.getPositionOfValue(a),plotRange:n,topCutoff:r,bottomCutoff:o,areaStartBase:l,zeroPos:Math.floor(e.getPositionOfValue(0))-.5}}});var Oa=Ta;var Na=i("2Hli");function Ea(t,e,i,a,n,s,r){var o;var l;if(s){o=e;l=i;i=n;e=a;n=o;a=l;if(i<e){o=i;i=e;e=o}e=Math.max(r.x,Math.min(r.x+r.width,e));i=Math.max(r.x,Math.min(r.x+r.width,i))}else{if(a<n){o=n;n=a;a=o}a=Math.max(r.y,Math.min(r.y+r.height,a));n=Math.max(r.y,Math.min(r.y+r.height,n))}t.set(e,n,i-e,a-n);return t}function Ra(t,e,i,a){var n=[{x:t.x,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height},{x:t.x+t.width,y:t.y}];switch(e){case"left":a?n[0].x-=i:n[1].x+=i;break;case"right":a?n[2].x+=i:n[3].x-=i;break;case"top":a?n[3].y-=i:n[0].y+=i;break;case"bottom":a?n[1].y+=i:n[2].y-=i;break;default:break}return n}function Va(t,e,i){var a;var n=i.pad;var s=i.gap;var r=i.sharpness;var o=t.clone();var l=Ra;var c=[];if("right"===e){a=new ve["a"](o.x+o.width+s,o.y,n-s,o.height);c.push(l(o,"right",r,true));c.push(l(a,"left",r,false,true));t.width+=a.width+s}else if("left"===e){a=new ve["a"](0,o.y,n-s,o.height);c.push(l(o,"left",r,true));c.push(l(a,"right",r,false,true));t.x=a.x;t.width+=a.width+s}else if("down"===e){a=new ve["a"](o.x,o.y+o.height+s,o.width,n-s);c.push(l(o,"bottom",r,true));c.push(l(a,"top",r,false,true));t.height+=a.height+s}else if("up"===e){a=new ve["a"](o.x,0,o.width,n-s);c.push(l(o,"top",r,true));c.push(l(a,"bottom",r,false,true));t.y=a.y;t.height+=a.height+s}return c}function za(t,e,i){t.set(Va(t.data.hitRect,e,i))}function Fa(t,e,i,a,n){var s=[];if("left"===n){s.push({x:t,y:e+i/2});s.push({x:t,y:e-i/2});s.push({x:t-a,y:e})}else if("right"===n){s.push({x:t,y:e+i/2});s.push({x:t,y:e-i/2});s.push({x:t+a,y:e})}else if("up"===n){s.push({x:t-i/2,y:e});s.push({x:t+i/2,y:e});s.push({x:t,y:e-a})}else if("down"===n){s.push({x:t-i/2,y:e});s.push({x:t+i/2,y:e});s.push({x:t,y:e+a})}return s}function ja(t,e,i){var a;var n=Math.min(t[["left","right"].includes(e)?"height":"width"]/2,8);var s=Math.min(n,8);if("left"===e){a=Fa(i.x+s,t.y+t.height/2,n,s,e);t.width+=s}else if("right"===e){a=Fa(i.x+i.width-s-1,t.y+t.height/2,n,s,e);t.width+=s;t.x-=s}else if("up"===e){a=Fa(t.x+t.width/2,i.y+s,n,s,e);t.height+=s}else if("down"===e){a=Fa(t.x+t.width/2,i.y+i.height-s-1,n,s,e);t.height+=s;t.y-=s}return a}function Ha(t,e,i){t.set(ja(t.data.hitRect,e,i))}var Ba={updateRectangle:Ea,getSpike:Va,getSlicedPolygon:Ra,getHint:ja,updateSpike:za,updateHint:Ha};function $a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wa(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function Ua(t,e,i){e&&Wa(t.prototype,e);i&&Wa(t,i);return t}function Ga(){var t;var e;var i;var a;var n=this.style.shape;var s=new K["a"](0,0,0,0);var r=this.widthRatio;var o;var l;var c;var h=this.isSpikingEnabled;var u=this.isHintingEnabled;var d;var f;var p;var v=[];var m=this.majorAxis.isDiscrete();var g=this.majorAxis.getDiscreteSpacing()*r;var x;var _=this.minorAxis.getPlotMax();var y=this.minorAxis.getPlotMin();var b=!this.majorAxis.isVertical();var M=this.minorAxis.getPadding();var w=this.minorAxis.getPositionOfValue(0)-1;var S={pad:b?M.top:M.right};var D={pad:b?M.bottom:M.left};var A=new K["a"];S.gap=.3*S.pad;S.sharpness=.3*S.pad;D.gap=.3*D.pad;D.sharpness=.3*D.pad;A.set(M.left,M.top,this.rect.width-M.left-M.right,this.rect.height-M.top-M.bottom);this._bounds=A;var k=0;var C=b?this.rect.width:this.rect.height;var q=-1;var L=b?this.rect.height:this.rect.width;var P=this.shapes?this.shapes.length:0;if(this.isNumeric){m=false;var I=this.majorAxis._scale.plotRange/(this.majorAxis._scale._dataMax-this.majorAxis._scale._dataMin);var T=90;var O=.25;var N=2;var E=this.majorAxis._scale._plotSize/T;x=Math.max(E-Math.pow(I,O)*E,N);Number.isNaN(+x)&&(x=N)}for(var R=0;R<P;R++){l=this.shapes[R];p=l instanceof pe["a"]||"Polygon"===l.type;c=this.isNumeric?this.majorAxis.getPositionOfValue(l.data.axisNum):this.majorAxis.getPositionOfId(l.data.axisId);o=m?g:x||this.majorAxis.getWidthOfId(l.data.axisId)*r;if(l.data.isNaN||Number.isNaN(+l.data.value)){l.data.isNaN=true;i=w;a=w}else{i=this.minorAxis.getPositionOfValue(l.data.start)-1;a=this.minorAxis.getPositionOfValue(l.data.end)-1}t=c-o/2;e=c+o/2;Ba.updateRectangle(l.data.hitRect,t,e,i,a,!b,A);delete l.data.labelRect;delete l.data.isCutOff;delete l.data.hintDirection;if(e<k||t>C)l.data.isVisible=false;else{l.data.isVisible=true;p?l.set(l.data.hitRect.getPoints()):l.set(l.data.hitRect.x,l.data.hitRect.y,l.data.hitRect.width,l.data.hitRect.height);s.set(l.data.hitRect.x,l.data.hitRect.y,l.data.hitRect.width,l.data.hitRect.height);v.push(l);d=l.data.cacheItem;var V=d.selected;if(l.data.isFakeOtherCell&&l.data.highlightOnGroupSelect&&d.children[0].selected){V=true;for(var z=0;z<d.children.length;z++)if(!d.children[z].selected){V=false;break}}this.isNumeric&&this.selectedRanges&&!V&&(V=this.selectedRanges.some((function(t){return l.data.axisNum>=t.min&&(t.maxIncluded?l.data.axisNum<=t.max:l.data.axisNum<t.max)})));f=V&&o>6?n.selected:{border:{color:0,width:0}};l.stroke=f.border.color;l.fill=l.data.isFakeOtherCell?this.othersFillPattern:l.data.fill;l.strokeWidth=f.border.width;l.opacity=V?1:this._globalAlpha;var F=!!u&&this._getHint(i,a,A,b);var j=!(!p||F||!h)&&this._getSpike(l.data.end,i,a,A,b,y,_);if(j){l.data.labelRect=s.clone();Ba.updateSpike(l,b?l.data.end>=0?"up":"down":l.data.end>=0?"right":"left",l.data.end>=0?S:D);l.data.isCutOff=true}else if(F){l.fill=n.outOfRange.color;Ba.updateHint(l,F,A);l.data.hintDirection=F}else(i<q&&a<q||i>L&&a>L)&&(l.data.isVisible=false)}}this.nodesInView=v}var Za=function(){function t(e){$a(this,t);this.renderer=new re["a"](e,{name:"bar-layer"});this.widthRatio=.7;this.isSpikingEnabled=false;this.isHintingEnabled=false;this.shapes=[];this._globalAlpha=1}Ua(t,[{key:"release",value:function t(){this.renderer.release();this.shapes=null;this.minorAxis=null;this.majorAxis=null}},{key:"update",value:function t(){Ga.call(this)}},{key:"render",value:function t(){return this.renderer.render()}},{key:"clear",value:function t(){this.renderer.clear()}},{key:"_getStyle",value:function t(e){return{selected:{border:{color:Na["a"].getValue(e,"shape.selected.border.color","rgba(0,0,0,0.25)"),width:Na["a"].getValue(e,"shape.selected.border.width",1)}}}}},{key:"_getHint",value:function t(e,i,a,n){if(n){if(i+1<a.y&&e+1<=a.y)return"up";if(i+1>a.y+a.height&&e+1>=a.y+a.height)return"down"}else{if(i+1<a.x&&e+1<=a.x)return"left";if(i+1>a.x+a.width&&e+1>=a.x+a.width)return"right"}return false}},{key:"_getSpike",value:function t(e,i,a,n,s,r,o){var l=e>o;var c=e<r;if(s){l=l&&a<n.y&&i>n.y;c=c&&a>n.y+n.height&&i<n.y+n.height}else{l=l&&a>n.x+n.width&&i<n.x+n.width;c=c&&a<n.x&&i>n.x}return l||c}}]);return t}();var Ya=Za;var Xa=i("wkj2");function Ka(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ja(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function Qa(t,e,i){e&&Ja(t.prototype,e);i&&Ja(t,i);return t}var tn;var en;var an;var nn;function sn(t,e){if(t)return J["a"].useDarkLabel(e,nn)?tn.label.dark.color:tn.label.light.color;return tn.label.color}function rn(t,e,i,a,n,s,r){return{type:"text",fill:tn.label.dark.color,opacity:a||1,data:{value:e,rect:i,labelRect:s,hintDirection:r,color:n},shape:{text:t,maxNumLines:1,align:"center",baseline:"middle"}}}function on(t){var e;var i;var a=t.descendants.filter((function(t){return!t.isBranch&&false!==t.data.isVisible}));var n=a.map((function(t){return t.data.hitRect}));if(n.length){e=n[0];n.length>1&&(e=e.combineWith(n.slice(-1)[0]));i=rn(t.data.valueLabel,t.data.sum,e,a[a.length-1].opacity,a[a.length-1].data.color,null,null);i.data.isFillPattern=window.CanvasPattern&&a[a.length-1].fill instanceof window.CanvasPattern;i.data.lastRect=n[n.length-1];return i}return}function ln(t,e){var i;var a;t.forEach((function(t){i=t.children;if(t.data.isStack){a=on(t);if(a){a.data.isStack=true;a.targetShape=t;e.push(a)}}else if(i&&i.length)ln(i,e);else if(false!==t.data.isVisible){a=rn(t.data.valueLabel,t.data.value,t.data.hitRect,t.opacity,t.data.color,t.data.labelRect,t.data.hintDirection);a.targetShape=t;e.push(a)}}))}function cn(t,e){var i;t.forEach((function(t){i=t.children;i&&i.length?cn(i,e):false!==t.data.isVisible&&e.push(t)}))}function hn(t,e){Object.keys(e).forEach((function(i){t[i]=e[i]}))}function un(t){return t.filter((function(t){return!!t.labelBounds}))}function dn(t,e,i){return t.filter((function(t){return t.labelBounds.x>=e&&t.labelBounds.x+t.labelBounds.width<=i}))}function fn(t,e){var i=e?e.length:0;var a;var n=t.labelBounds;for(var s=0;s<i;s++){a=e[s].data.hitRect;if(t.targetShape===e[s]){if(n.y+n.height/2>a.y&&n.width>a.width+8)return true}else if(a&&n.x<=a.x+a.width&&a.x<=n.x+n.width&&n.y<=a.y+a.height&&a.y<=n.y+n.height)return true}return false}function pn(t,e){return t.filter((function(t){return!fn(t,e)}))}function vn(t){return t.filter((function(t){return t.data.value<0}))}function mn(t){return t.filter((function(t){return t.data.value>=0}))}function gn(t,e){var i=e?e.length:0;var a;var n=t.labelBounds;for(var s=0;s<i;s++){a=e[s].labelBounds;if(n.x<=a.x+a.width&&a.x<=n.x+n.width&&n.y<=a.y+a.height&&a.y<=n.y+n.height)return true}return false}function xn(t){var e=t?t.length:0;var i=[];var a;var n;var s;var r;var o;for(a=0;a<e;a++){o=t[a];n=o.data.value;s=0===a?n:t[a-1].data.value;r=a===e-1?n:t[a+1].data.value;o.priority=n>s&&n>r?6:n<s&&n<r?5:n>s&&n===r||n===s&&n>r?4:n<s&&n===r||n===s&&n<r?3:n===s&&n===r?2:1}t.sort((function(t,e){return t.priority-e.priority}));for(a=0;a<e;a++)gn(t[a],i)||(i[i.length]=t[a]);return i}function _n(t,e,i){var a;var n;var s;var r;var o=e&&t.data.isStack?8:4;var l=[];a=t.data.rect.width;n=t.data.rect.height;s=t.data.rect.x;r=t.data.rect.y;if("up"!==t.data.hintDirection&&t.data.value>=0||"down"===t.data.hintDirection){r-this.bounds.y-2*o>4&&l.push({align:e?"left":"center",baseline:e?"middle":"bottom",rect:{x:s-.5*(i-a),y:this.bounds.y+o,width:i,height:r-this.bounds.y-2*o}});if(t.data.labelRect){a=t.data.labelRect.width;n=t.data.labelRect.height;s=t.data.labelRect.x;r=t.data.labelRect.y}t.data.hintDirection||l.push({align:e?"right":"center",baseline:e?"middle":"top",inline:true,rect:{x:s,y:r+o,width:a,height:n-2*o}})}else{this.bounds.height-r-n-2*o>0&&l.push({align:e?"right":"center",baseline:e?"middle":"top",rect:{x:s-.5*(i-a),y:r+n+o,width:i,height:this.bounds.height-r-n-2*o}});if(t.data.labelRect){a=t.data.labelRect.width;n=t.data.labelRect.height;s=t.data.labelRect.x;r=t.data.labelRect.y}t.data.hintDirection||l.push({align:e?"left":"center",baseline:e?"middle":"bottom",inline:true,rect:{x:s,y:r+o,width:a,height:n-2*o}})}return l}function yn(t,e){var i;var a=this.renderer.getFontHeight(tn.label.font);var n=_n.apply(this,[t,false,e]);for(var s=0;s<n.length;s++){hn(t.shape,n[s].rect);if(a<n[s].rect.height){i=n[s];break}}if(i){var r=i.rect.width-t.data.labelWidth;hn(t.shape,i.rect);t.shape.baseline=i.baseline;t.shape.align=i.align;t.labelBounds={x:i.rect.x+Math.min(r/2,4),y:"top"===i.baseline?i.rect.y:i.rect.y+i.rect.height-16,width:Math.max(i.rect.width-Math.min(r,8)),height:16,containingRect:i.inline?t.shape:void 0};if(t.data.isStack&&i.inline&&(t.data.lastRect.height<20||t.data.isFillPattern))t.backdrop={x:t.labelBounds.x,y:t.labelBounds.y,width:t.labelBounds.width,height:t.labelBounds.height,radius:4};else{t.fill=sn(i.inline,t.data.color);t.backdrop=false}}else t.fill=false}function bn(t,e){var i;var a=_n.apply(this,[t,true,e]);var n=this.bounds.x+this.bounds.width;var s="labelWidth"in t.data?t.data.labelWidth:li["a"].getTextWidth(t.shape.text);for(var r=0;r<a.length;r++)if(a[r].rect.height>=s){i=a[r];break}if(!i){a.sort((function(t,e){return.8*e.rect.height-t.rect.height}));a[0].rect.height>=8&&(i=a[0])}if(i){var o=new Xa["a"];o.translate(i.rect.x,i.rect.y+i.rect.height);o.rotate(-Math.PI/2);hn(t.shape,{width:i.rect.height,height:i.rect.width,baseline:i.baseline,align:i.align,x:0,y:0});t.transform=o.elements;t.labelBounds={x:i.rect.x+i.rect.width/2-8,y:"right"===i.align?i.rect.y-4:i.rect.y+i.rect.height-s-4,width:16,height:s+8};i.rect.x<0&&i.rect.x+i.rect.width>0&&(t.labelBounds.x=Math.max(t.labelBounds.x,this.bounds.x-4));i.rect.x<n&&i.rect.x+i.rect.width>n&&(t.labelBounds.x=Math.min(t.labelBounds.x,n-t.labelBounds.width));if(t.data.isStack&&i.inline&&(t.data.lastRect.height<s+4||t.data.isFillPattern))t.backdrop={x:t.labelBounds.x,y:t.labelBounds.y,width:t.labelBounds.width,height:t.labelBounds.height,radius:4};else{t.fill=sn(i.inline,t.data.color);t.backdrop=false}}else t.fill=false}function Mn(t){var e;var i;var a;var n;var s=t.data.isStack?8:4;var r=[];e=t.data.rect.width;i=t.data.rect.height;a=t.data.rect.x;n=t.data.rect.y;if("right"!==t.data.hintDirection&&(this.yMirrorMode?t.data.value<0:t.data.value>=0)||"left"===t.data.hintDirection){this.bounds.width-a-e-2*s>0&&r.push({align:"left",rect:{x:a+e+s,y:n,width:this.bounds.width-a-e-2*s,height:i}});if(t.data.labelRect){e=t.data.labelRect.width;i=t.data.labelRect.height;a=t.data.labelRect.x;n=t.data.labelRect.y}t.data.hintDirection||r.push({align:"right",inline:true,rect:{x:a+s,y:n,width:e-2*s,height:i}})}else{a-this.bounds.x-2*s&&r.push({align:"right",rect:{x:this.bounds.x+s,y:n,width:a-this.bounds.x-2*s,height:i}});if(t.data.labelRect){e=t.data.labelRect.width;i=t.data.labelRect.height;a=t.data.labelRect.x;n=t.data.labelRect.y}t.data.hintDirection||r.push({align:"left",inline:true,rect:{x:a+s,y:n,width:e-2*s,height:i}})}return r}function wn(t,e){var i;var a=Mn.apply(this,[t,e]);var n="labelWidth"in t.data?t.data.labelWidth:li["a"].getTextWidth(t.shape.text);for(var s=0;s<a.length;s++)if(a[s].rect.width>=n){i=a[s];break}if(!i&&a.length){a.sort((function(t,e){return.8*e.rect.width-t.rect.width}));a[0].rect.width>=8&&(i=a[0])}if(i){t.shape.baseline="middle";t.shape.align=i.align;hn(t.shape,i.rect);t.labelBounds={x:("right"===i.align?i.rect.x+i.rect.width-n:i.rect.x)-4,y:i.rect.y+i.rect.height/2-8,width:n+8,height:16};if(t.data.isStack&&i.inline&&(t.data.lastRect.width<n+8||t.data.isFillPattern))t.backdrop={x:t.labelBounds.x,y:t.labelBounds.y,width:t.labelBounds.width,height:t.labelBounds.height,radius:4};else{t.fill=sn(i.inline,t.data.color);t.backdrop=false}}else t.fill=false}function Sn(){var t=[];var e=[];var i=this.minorAxis.getPlotMin();var a=this.minorAxis.getPlotMax();var n;var s=tn.label.font;var r=this.bounds;ln(this._shapes,t);li["a"].setFont(s);this.renderer.setFont(s);t=t.filter((function(t){if("NaN"===t.data.value)return true;if(t.data.labelRect||t.data.showHintLabel)return true;if(t.data.value>=0&&a>=t.data.value&&i<=t.data.value)return true;if(t.data.value<0&&i<=t.data.value&&a>=t.data.value)return true;if(t.data.rect.width&&t.data.rect.height&&r.intersectsWith(t.data.rect))return true;return false}));var o;var l;var c;if(this._shapes&&this._shapes.length){l=this._shapes[0].descendants.filter((function(t){return!t.isBranch}))[0];c=l?l.data.hitRect.width:this.majorAxis._discreteSpacing}else c=0;o=0;var h=t?t.length:0;for(var u=0;u<h;u++){n=t[u];if(n.shape){n.shape.font=s;n.data.labelWidth=li["a"].getTextWidth(n.shape.text);o=Math.max(o,n.data.labelWidth)}}this._longestLabel=o;var d=this._longestLabel<c;var f;f=this.minorAxis.isVertical()?d?yn:bn:wn;for(var p=0;p<h;p++)f.call(this,t[p],c);if(this.isNumeric){var v=4;var m;var g;cn(this._shapes,e);t=un(t);t=dn(t,this.bounds.x-v,this.bounds.x+this.bounds.width+v);t=pn(t,e);m=vn(t);g=mn(t);m=xn(m);g=xn(g);t=g.concat(m)}t.slice().forEach((function(e){if(e.fill&&e.backdrop){t.unshift({opacity:e.opacity||1,type:"roundRect",fill:en,shape:e.backdrop});e.fill=nn?tn.label.light.color:tn.label.dark.color}}));this.renderer.shapes=t;this.renderer.render()}var Dn=function(){function t(e){Ka(this,t);this.renderer=new li["a"](e)}Qa(t,[{key:"setYMirrorMode",value:function t(e){this.yMirrorMode=e}},{key:"setData",value:function t(e){this._data=e}},{key:"setMeasureIndices",value:function t(){}},{key:"setBarData",value:function t(e){this._barData=e}},{key:"setShapes",value:function t(e){this._shapes=e}},{key:"show",value:function t(){this.renderer.show()}},{key:"hide",value:function t(){this.renderer.hide()}},{key:"clear",value:function t(){this.renderer.clear()}},{key:"release",value:function t(){this.renderer.release()}},{key:"render",value:function t(){tn=this.style.dataPoints;an=new J["a"](this.style.backgroundColor);nn=an.isDark();en=J["a"].toRGBA(an,.75);Sn.call(this)}}]);return t}();var An=Dn;var kn={dataPoint:{label:{dark:{color:"#666"},light:{color:"#eee"},font:"11px 'QlikView Sans', sans-serif"}},shape:{selected:{border:{color:"#333",width:2}},unselected:{opacity:.5},highlighted:{border:{dark:{color:"rgba( 26, 26, 26, 0.75 )"},light:{color:"rgba( 230, 230, 230, 0.75)"},width:1}}}};var Cn="stacked";var qn="grouped";var Ln=document.createElement("canvas");var Pn=Ln.getContext("2d");function In(t){var e=1;Ln.width=5*e;Ln.height=5*e;Pn.save();Pn.fillStyle=J["a"].toRGBA(t,.8);Pn.scale(e,e);Pn.fillRect(0,0,1,1);Pn.fillRect(0,1,1,1);Pn.fillRect(1,0,1,1);Pn.fillRect(4,1,1,1);Pn.fillRect(4,2,1,1);Pn.fillRect(3,2,1,1);Pn.fillRect(3,3,1,1);Pn.fillRect(2,3,1,1);Pn.fillRect(2,4,1,1);Pn.fillRect(1,4,1,1);Pn.restore();return Pn.createPattern(Ln,"repeat")}function Tn(t){var e=t.getStyle("label.value","fontSize");var i=t.getStyle("label.value","fontFamily");return{shape:{selected:{border:{color:"#333333",width:2}},outOfRange:{color:t.getStyle("outOfRange","color")}},dataPoints:{label:{font:"normal ".concat(e," ").concat(i),color:t.getStyle("label.value","color"),dark:{color:"#595959"},light:{color:"#E6E6E6"}},backgroundColor:t.getStyle("","backgroundColor")},backgroundColor:t.getStyle("","backgroundColor")}}var On=Z["a"].extend("BarArea",{init:function t(){this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._barData=[];this._showDataPoints=true;this._colorMap=null;this._groupingMode=qn;this._globalAlpha=1;this._styleService=Q["a"].initializeService("object.barChart");this._edgeBleed=0;this._barLayer=new Ya(this.container);this._barLayer.isMini=this.isMini;this.layers=[this._barLayer];if(this.isMini){this._rangeSelectionLayer=new wa(this.container);this.layers.push(this._rangeSelectionLayer)}else{this._labelLayer=new An(this.container);this.layers.push(this._labelLayer)}},setYMirrorMode:function t(e){this._super(e);this._labelLayer&&this._labelLayer.setYMirrorMode(e)},beforeBarsAddedToRenderer:function t(){},barsAddedToRenderer:function t(){},labelAddedToRenderer:function t(){},afterPaint:function t(){return o["a"].resolve()},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},setShowDataPoints:function t(e){this._showDataPoints=e;this.invalidateDisplay("BarArea.setShowDataPoints")},getShowDataPoints:function t(){return this._showDataPoints},getMeasureIndices:function t(){return this._measureIndices},setMeasureIndices:function t(e){this._measureIndices=e},setMajorAxis:function t(e){this._majorAxis=e;this._majorAxis.listen("changed",(function(){this.invalidateDisplay("BarArea.setMajorAxis")}),this)},setMinorAxis:function t(e){this._minorAxis=e;this._minorAxis.listen("changed",(function(){this._localFormatting&&(this._areLabelsFormatted=false);this.invalidateDisplay("BarArea.setMinorAxis")}),this)},setTimeAxis:function t(e){this.timeAxis=e;this.timeAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setContinuousAxis:function t(e){this.continuousAxis=e;this.continuousAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setActiveDimensionAxis:function t(e){this._activeDimAxis=e},setIsDimensionContinuous:function t(e){this.isDimensionContinuous=e;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function t(e){this._tree=e},setGroupingMode:function t(e){this._groupingMode=e},_updateSize:function t(){this.invalidateDisplay("BarArea._updateSize")},insertAdjacentTo:function t(e,i){this._super(e,i);if(this._minorAxis&&this._minorAxis.isHorizontal())switch(this._minorAxis.dock){case"bottom":this.rect.height-=1;break;default:break}},getMajorAxisData:function t(){return this._majorAxisData},getMinorAxisData:function t(){return this._minorAxisData},setCacheItems:function t(e){this._cacheItems=e},getCacheItems:function t(){return this._cacheItems},createAxisData:function t(e,i,a,n){if(!n){this._cacheIndex=0;this._outerCacheIndex=0}var s=i.stackLevel===n+1;var r;var o=e.children;var l=i.numLevels-i.numMeasures;"measure"===i.types[n]&&this._measureIndices&&(o=o.filter((function(t,e){return this._measureIndices.indexOf(e)>=0}),this));return o.map((function(t){var e;if("dimension"===i.types[n]){e={label:t.data.qText,group:"dimension"===i.types[n+1]||"measure"===i.types[n+1]&&i.numMeasures>1,id:t.data.id,cacheIndex:[]};if("measure"===i.types[n+1])for(r=0;r<i.numMeasures;r++)e.cacheIndex.push(this._cacheIndex++);else l>1&&0===n&&t.children.forEach((function(t){if(t.children[0].isBranch){-2!==t.data.qElemNo&&e.cacheIndex.push(this._outerCacheIndex);this._outerCacheIndex++}}),this);!s&&("dimension"===i.types[n+1]||"measure"===i.types[n+1]&&i.numMeasures>1)&&(e.children=this.createAxisData(t,i,a,n+1))}else"measure"===i.types[n]&&(e={label:t.data.qText,id:t.data.id});return e}),this)},_createMeasureDisplayNode:function t(e,i){if(!e.isBranch)return;var a=true===this.isMini||this._isStacked?new ve["a"]:new pe["a"];var n=e.children;var s=n[0].data;var r=e.parent.cacheItem;var o=new K["a"](0,0,0,0);var l=this.measureFormatters[i];var c="undefined"!==typeof s.qValue?s.qValue:s.qNum;var h=e.ancestors.filter((function(t){return"qElemNo"in t.data})).map((function(t){return t.data.qElemNo})).reverse();a.data={qText:e.data.qText,measureIndex:i,value:c,start:0,end:c,valueLabel:e.children[0].data.qText,formatted:!l||"U"!==l.type,hitRect:o,cacheItem:r,color:this._colorMap.getColor(h,c,i,e.data.rowIndex)};r.addShape("dataArea",o,true);r.calculateTooltipPosition=true;a.data.fill=a.data.color.toRGBA();a.fill=a.data.fill;a.data.isFillColorDark=a.data.color.isDark();return a},_createDimensionDisplayNode:function t(e){var i=new de["a"];i.data={qText:e.data.qText,qElemNo:e.data.qElemNo,qMaxPos:e.data.qMaxPos,qMinNeg:e.data.qMinNeg,qType:e.data.qType};return i},_createStackNode:function t(){var e=new de["a"];e.data={stack:true};return e},_createOtherNode:function t(e,i){var a=new ve["a"];var n=new K["a"](0,0,0,0);var s=this.measureFormatters[0];a.data={measureIndex:0,value:i-e,start:e,end:i,isFakeOtherCell:true,highlightOnGroupSelect:0===this._selectionIndices[0],valueLabel:"valueLabel",formatted:!s||"U"!==s.type,hitRect:n,cacheItem:{},color:this._colorMap.getColor([-3],i-e,0,0)};a.data.fill=a.data.color.toRGBA();a.fill=a.data.fill;a.data.isFillColorDark=a.data.color.isDark();return a},_addOtherNode:function t(e,i,a){var n=this._createDimensionDisplayNode({data:{qMaxPos:0,qMinNeg:0,qElemNo:-3,qType:"O"}});var s=this._createOtherNode(e.data.sum,i);s.data.axisId=a.data.id;s.data.cacheItem=a.cacheItem;n.addChild(s);e.data.sum=i;e.addChild(n);return s},_stackNodes:function t(e,i,a,n){var s;var r;var o;var l=this._createStackNode();var c=this._createStackNode();var h=false;var u=false;var d;var f;var p=0;var v=0;l.data.isStack=true;c.data.isStack=true;e.forEach((function(t){s=i;o=t.children&&t.children[0]?t.children[0].data:t.data;if(o.value>=0){s=l;o.start=p;p+=o.value;o.end=p;r=p;d=true;s.addChild(t);"O"===t.data.qType&&(h=true)}else if(!Number.isNaN(+o.value)){s=c;o.start=v;v+=o.value;o.end=v;r=v;f=true;s.addChild(t);"O"===t.data.qType&&(u=true)}s.data.sum=r}));if("undefined"!==typeof i.data.qMaxPos&&!h&&p!==i.data.qMaxPos){n.push(this._addOtherNode(l,i.data.qMaxPos,a));p=l.data.sum;d=p>0}if("undefined"!==typeof i.data.qMinNeg&&!u&&v!==i.data.qMinNeg){n.push(this._addOtherNode(c,i.data.qMinNeg,a));v=c.data.sum;f=v<0}if(d){l.data.valueLabel=this.combinedMeasuresFormatter?this.combinedMeasuresFormatter.formatValue(l.data.sum):"".concat(l.data.sum);i.addChild(l)}if(f){c.data.valueLabel=this.combinedMeasuresFormatter?this.combinedMeasuresFormatter.formatValue(c.data.sum):"".concat(c.data.sum);i.addChild(c)}i.data.sum={positive:p,negative:v}},getRenderTree:function t(e,i,a,n){var s=i.stackLevel===n+1;var r=[];var o;var l;var c=e.children;"measure"===i.types[n]&&this._measureIndices&&(c=c.filter((function(t,e){return this._measureIndices.indexOf(e)>=0}),this));var h=c.length;for(var u=0;u<h;u++){var d=c[u];if("dimension"===i.types[n]){l=this._createDimensionDisplayNode(d);var f=this.getRenderTree(d,i,a,n+1);if(s){this._stackNodes(f,l,d,a.otherShapes);a.globalPositiveSum=Math.max(a.globalPositiveSum,l.data.sum.positive);a.globalNegativeSum=Math.min(a.globalNegativeSum,l.data.sum.negative)}else l.addChildren(f);l.isBranch&&r.push(l)}else if("measure"===i.types[n]){l=this._createMeasureDisplayNode(d,this._measureIndices?this._measureIndices[u]:u);if(!l)continue;o=d;i.numMeasures<=1&&(o=o.parent);i.stackLevel===n&&(o=o.parent);l.data.axisId=o.data.id;l.data.axisNum=1===n?o.data.qNum:o._parent.data.qNum;a.shapes.push(l);r.push(l)}}return r},_applyIds:function t(e,i,a,n){var s=this;var r;e.children.forEach((function(t,o){r=e.data.id?"".concat(e.data.id,";")||false:"";if("dimension"===a[n]){t.data.id="".concat(r+i[n],":").concat(t.data.qElemNo);s._applyIds(t,i,a,n+1)}else"measure"===a[n]&&(t.data.id=r+i[n+o])}))},renderRangeSelections:function t(){this._rangeSelectionLayer.update(this._activeDimAxis);return this._rangeSelectionLayer.render()},updateRangeSelection:function t(e){if(this._rangeSelectionLayer){this._rangeSelectionLayer.setRanges(e);this.renderRangeSelections()}this.isMini||(this._barLayer.selectedRanges=e)},_updateProperties:function t(){var e=this;if(!this._data||!this._tree)return;this._barLayer.renderer.stage.removeChildren();var i=this._data.qHyperCube.qDimensionInfo.length;var a=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length;var n=this._groupingMode===Cn&&(i>1||a>1);var s=i+1;var r=-2;var o=[];var l=new Array(i).join(",").split(",").map((function(){return"dimension"}));var c=this._data.qHyperCube.qDimensionInfo.concat(this._data.qHyperCube.qMeasureInfo).map((function(t){return t.cId}));var h=this._data.qHyperCube.qDimensionInfo.map((function(t){return t.qApprMaxGlyphCount}));l.push("measure");h.push(this._data.qHyperCube.qMeasureInfo.reduce((function(t,e){return Math.max(t,e.qApprMaxGlyphCount)}),0));if(n)r=a>1?i:i-1;else if(i>1){var u=this._data.qHyperCube.qDimensionInfo[0].qStateCounts.qOption+this._data.qHyperCube.qDimensionInfo[0].qStateCounts.qSelected;var d=this._data.qHyperCube.qSize.qcy/u;o.push(d);o.push(a)}else{o.push(a);o.push(1)}this._isStacked=n;var f={columns:[],shapes:[],shapesToLabel:[],otherShapes:[],globalPositiveSum:0,globalNegativeSum:0};var p={colIds:c,types:l,numLevels:s,numMeasures:a,stackLevel:r};if(i>1&&this._allowInnerSelection&&!this._data.qHyperCube.qDimensionInfo[1].qLocked){this.setSelectionIndices([1]);this._majorAxis.setSelectionIndices([1]);this._majorAxis.setCurrentDataIndices([1])}else{this.setSelectionIndices([0]);this._majorAxis.setSelectionIndices([0]);this._majorAxis.setCurrentDataIndices([0])}this._applyIds(this._tree,c,l,0);var v=this.getRenderTree(this._tree,p,f,0);this._objects=v;this._formatted=this._isStacked||this.measureFormatters.every((function(t,e){var i=!this._measureIndices||this._measureIndices.indexOf(e)>=0;return!i||t&&"U"!==t.type}),this);this._shapes=f.shapes;var m=f.shapes.map((function(t){return t.data.cacheItem}));this._shapes=this._shapes.concat(f.otherShapes);v.forEach((function(t){e._barLayer.renderer.stage.addChild(t)}));var g=this.createAxisData(this._tree,p,f,0);var x=l.map((function(t,e){return{qApprMaxGlyphCount:h[e],show:e<l.length-1,groupSize:o[e]}}));this._majorAxisData={data:g,info:x};this._numDimensions=i;this._numMeasures=a;this._minorAxisData=n?{min:f.globalNegativeSum,max:f.globalPositiveSum}:null;this.setSelectableShapes(m)},hasValidData:function t(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data&&this._tree&&(this._data.qHyperCube.qStackedDataPages.length>0||this._data.qHyperCube.qDataPages.length>0)},updateSize:function t(){this._super();this.layers.forEach((function(t){t.rect=this.rect;t.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y);t.renderer.setDimensions(0,0,this.rect.width,this.rect.height)}),this)},paint:function t(){this._super(this._layoutMode,this._data);this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow();var e=this._minorAxis.getPadding();var i=new K["a"];var a=this;this._style=Tn(this._styleService);i.set(e.left,e.top,this.rect.width-e.left-e.right,this.rect.height-e.top-e.bottom);this.layers.forEach((function(t){t.minorAxis=this._minorAxis;t.majorAxis=this.isDimensionContinuous?this._activeDimAxis:this._majorAxis;t.isNumeric=this.isDimensionContinuous;t.shapes=this._shapes;t.othersFillPattern=In(this._colorMap.getColor([-3]));t.groupingMode=this._groupingMode;t.widthRatio=this._numDimensions<=1&&this._numMeasures<=1||this._groupingMode===Cn?.7:.95;t.isSpikingEnabled=!this.isMini&&!(this._groupingMode===Cn&&(this._numDimensions>1||this._numMeasures>1));t.isHintingEnabled=!this.isMini&&(this._groupingMode===qn||this._groupingMode===Cn&&this._numDimensions+this._numMeasures<=2);t.style=this._style;t._globalAlpha=this._globalAlpha}),this);this._barLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0};this._barLayer.colorMap=this._colorMap;this._barLayer.update();this.nodesInView=this._barLayer.nodesInView;this.barsAddedToRenderer();if(this._labelLayer){this._labelLayer.renderer.edgeBleed={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0};this._labelLayer.setShapes(this._objects);this._labelLayer.bounds=i;this._labelLayer._longestLabel=20;if(this._layoutMode>this.ShowFlags.XSMALL&&this._showDataPoints){this._formatLabels();this._labelLayer.show();this._labelLayer.render()}else this._labelLayer.hide()}var n=[this._barLayer.render()];this._rangeSelectionLayer&&n.push(this.renderRangeSelections());return o["a"].all(n).then((function(){return a.afterPaint()}))},_formatLabels:function t(){if(this._isStacked||this._formatted)return;var e;var i;var a=this.nodesInView?this.nodesInView.length:0;for(e=0;e<a;e++){i=this.nodesInView[e].data;if(!i.formatted){i.formatted=true;i.valueLabel=this.measureFormatters[i.measureIndex]?this.measureFormatters[i.measureIndex].formatValue(i.value):i.valueLabel}}},preRelevantSizeCalculation:function t(){this.perpendicularlyRelevantSpacing={left:this._edgeBleed,right:this._edgeBleed,top:0,bottom:0}},clear:function t(){this._super();this.layers.forEach((function(t){t.clear()}))},release:function t(){this.layers.forEach((function(t){t.release()}));this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)}});var Nn=On;function En(t){switch(t){case"diamond":case"triangle":return new pe["a"];case"circle":return new fe["a"];case"line":return new ve["a"];default:return new ve["a"]}}function Rn(t,e,i,a,n,s){var r=n.type;var o=n.rgb;var l=n.shiftedRgb;var c=.5;var h=n.isFilled;var u;var d=true;switch(r){case"circle":t.set(e,i,Math.max(2,Math.min(6,.125*a)));break;case"diamond":u=Math.max(4,Math.min(12,.25*a));t.set([{x:e,y:i-u/2},{x:e-u/2,y:i},{x:e,y:i+u/2},{x:e+u/2,y:i}]);break;case"triangle":u=Math.max(4,Math.min(12,.25*a));t.set([{x:e,y:i-u/2},{x:e-u/2,y:i+u/2},{x:e+u/2,y:i+u/2}]);break;case"line":u=Math.max(4,.5*a);u<24?t.set(e-u/2,Math.floor(i)-c,u,Math.min(3,Math.max(2,Math.round(u/4)))):t.set(Math.floor(e-u/2)-c,Math.floor(i)-c,Math.ceil(u),Math.min(3,Math.max(2,Math.round(u/4))));h=true;break;default:u=Math.max(4,Math.min(12,.25*a));t.set(e-u/2,i-u/2,u,u)}if(d&&false!==h){t.fill=o;t.stroke=l}else{t.stroke=o;delete t.fill}s&&(t.stroke="#000000")}function Vn(t){var e;var i=this._shapes?this._shapes.length:0;var a;var n;var s=this.rect.width;var r=this._majorAxis;var o;var l;var c;var h;this._outOfRange={up:{},down:{},points:[]};for(e=0;e<i;e++){h=this._shapes[e];o=this._minorAxes[h.data.axisIdx];l=t[this._measureToAxisIndex[h.data.measureIdx]];c=this.isDimensionContinuous?2:r.getWidthOfId(h.data.axisId);a=this.isDimensionContinuous?this._activeDimAxis.getPositionOfValue(h.data.axisNum):r.getPositionOfId(h.data.axisId);n=o.getPositionOfValue(h.data.end);h.data.x=a;h.data.y=n;h.data.outOfRangeUp=n<l.topCutoff;h.data.outOfRangeDown=n>l.bottomCutoff;h.data.selected=h.data.cacheItem&&h.data.cacheItem.selected;h.opacity=h.data.outOfRangeUp||h.data.outOfRangeDown?0:h.data.selected?1:this._globalAlpha;n=h.data.outOfRangeUp?l.topCutoff+4:h.data.outOfRangeDown?l.bottomCutoff-4:Math.floor(n);var u=h.data.cacheItem&&h.data.cacheItem.selected;this.isDimensionContinuous&&this.selectedRanges&&!u&&(u=this.selectedRanges.some((function(t){return h.data.axisNum>=t.min&&(t.maxIncluded?h.data.axisNum<=t.max:h.data.axisNum<t.max)})));Rn(h,a,n,c,h.data,u);h.data.isVisible=a>=0&&a<=s;if(h.data.isVisible&&(h.data.outOfRangeUp||h.data.outOfRangeDown))if(h.data.outOfRangeUp&&!this._outOfRange.up[a]){this._outOfRange.points.push(h);this._outOfRange.up[a]=true}else if(h.data.outOfRangeDown&&!this._outOfRange.down[a]){this._outOfRange.points.push(h);this._outOfRange.down[a]=true}}}var zn=Z["a"].extend("MarkerArea",{init:function t(){this._super.apply(this,arguments);this.renderers={markers:new re["a"](this.container,{name:"marker-layer"})};this._edgeBleed=0;this._oobLayer=new oi(this.container);this.layers=[this._oobLayer];this._markerRenderer=this.renderers.markers},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},getMeasureIndices:function t(){return this._measureIndices},setMeasureIndices:function t(e){this._measureIndices=e},setMajorAxis:function t(e){this._majorAxis=e;this._majorAxis.listen("changed",(function(){this.invalidateDisplay("MarkerArea.setMajorAxis")}),this)},setMinorAxis:function t(e){this._minorAxis=e;this._minorAxis.listen("changed",(function(){this.invalidateDisplay("MarkerArea.setMinorAxis")}),this)},setSecondaryMinorAxis:function t(e){this._secondaryMinorAxis=e;this._secondaryMinorAxis.listen("changed",(function(){this.invalidateDisplay("MarkerArea.setSecondaryMinorAxis")}),this)},setTimeAxis:function t(e){this.timeAxis=e;this.timeAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setContinuousAxis:function t(e){this.continuousAxis=e;this.continuousAxis.listen("changed",(function(){this.invalidateDisplay()}),this)},setActiveDimensionAxis:function t(e){this._activeDimAxis=e},setIsDimensionContinuous:function t(e){this.isDimensionContinuous=e;this._edgeBleed=this.isDimensionContinuous?5:0},setDimensionTree:function t(e){this._tree=e;this.invalidateProperties()},hasValidData:function t(){return this._super()&&this._data},getMajorAxisData:function t(){return this._majorAxisData},createAxisData:function t(e,i,a,n){n||(this._cacheIndex=0);var s=e.children;return s.map((function(t){var e;if("dimension"===i.types[n]){e={label:t.data.qText,group:false,id:t.data.id,cacheIndex:[]};"measure"===i.types[n+1]&&e.cacheIndex.push(this._cacheIndex++)}return e}),this)},_createMeasureDisplayNode:function t(e,i,a,n){var s=En(a);var r=e.children[0].data;var o=e.parent.cacheItem;var l=this.measureFormatters[i];var c="undefined"!==typeof r.qValue?r.qValue:r.qNum;var h=e.ancestors.filter((function(t){return"qElemNo"in t.data})).map((function(t){return t.data.qElemNo})).reverse();s.data={qText:e.data.qText,qNum:c,start:0,end:c,valueLabel:l&&"U"===l.type?l.formatValue(c):e.data.qText,cacheItem:o,type:a,isFilled:n,measureIdx:i,color:this._colorMap.getColor(h,c,i,e.data.rowIndex)};o.addShape("dataArea",s,true);s.fill=s.data.color.toHex();s.data.rgb=s.data.color.toRGBA();s.data.shiftedRgb=s.data.color.createShiftedColor().toRGBA();return s},_createDimensionDisplayNode:function t(e){var i=new de["a"];i.data={qText:e.data.qText};return i},_applyIds:function t(e,i,a,n){var s;e.children.forEach((function(t,r){s=e.data.id?"".concat(e.data.id,";")||false:"";if("dimension"===a[n]){t.data.id="".concat(s+i[n],":").concat(t.data.qElemNo);this._applyIds(t,i,a,n+1)}else"measure"===a[n]&&(t.data.id=s+i[n+r])}),this)},getRenderTree:function t(e,i,a,n){var s;var r;var o;r=e.children;"measure"===i.types[n]&&this._measureIndices&&(r=r.filter((function(t,e){return this._measureIndices.indexOf(e)>=0}),this));return r.map((function(t,e){var r;if("dimension"===i.types[n]){r=this._createDimensionDisplayNode(t);s=this.getRenderTree(t,i,a,n+1);s.forEach((function(t){r.addChild(t)}))}else if("measure"===i.types[n]){o=this._measureIndices?this._measureIndices[e]:e;r=this._createMeasureDisplayNode(t,o,this._data.qHyperCube.qMeasureInfo[o].series.marker||"circle",this._data.qHyperCube.qMeasureInfo[o].series.markerFill);r.data.axisId=t.parent.data.id;r.data.axisNum=t.parent.data.qNum;r.data.axisIdx=i.measureToAxisIndex[o];a.shapes.push(r)}return r}),this)},updateRangeSelection:function t(e){this.isMini||(this.selectedRanges=e)},_updateProperties:function t(){this._markerRenderer.stage.removeChildren();if(!this._data||!this._tree)return;var e=this._data.qHyperCube.qDimensionInfo.length;var i=this._measureIndices?this._measureIndices.length:this._data.qHyperCube.qMeasureInfo.length;var a=e+1;var n=new Array(e).join(",").split(",").map((function(){return"dimension"}));var s=this._data.qHyperCube.qDimensionInfo.concat(this._data.qHyperCube.qMeasureInfo).map((function(t){return t.cId}));var r=this._data.qHyperCube.qDimensionInfo.map((function(t){return t.qApprMaxGlyphCount}));r.push(this._data.qHyperCube.qMeasureInfo.reduce((function(t,e){return Math.max(t,e.qApprMaxGlyphCount)}),0));this._minorAxes=[this._minorAxis];this._secondaryMinorAxis&&this._minorAxes.push(this._secondaryMinorAxis);var o=this._minorAxes;var l=[];var c=[];if(this._measureIndices)c=this._measureIndices;else if(i>0&&i<20)while(c.length<i)c.push(c.slice(-1)[0]+1||0);c.forEach((function(t){l[t]=o.filter((function(e){return!e._dataIndices||e._dataIndices.indexOf(t)>=0}))[0]}));this._measureToAxis=l;this._measureToAxisIndex=l.map((function(t){return o.indexOf(t)}));n.push("measure");var h={shapes:[],shapesToLabel:[],globalPositiveSum:0,globalNegativeSum:0};var u={colIds:s,types:n,numLevels:a,numMeasures:i,measureToAxisIndex:this._measureToAxisIndex,axesSettings:this._minorAxes.map(this._getAxisDetails)};this._applyIds(this._tree,s,n,0);var d=this.getRenderTree(this._tree,u,h,0);this._objects=d;this._shapes=h.shapes;d.forEach((function(t){this._markerRenderer.stage.addChild(t)}),this);var f=this.createAxisData(this._tree,u,h,0);var p=n.map((function(t,e){return{qApprMaxGlyphCount:r[e],show:e<n.length-1}}));this._majorAxisData={data:f,info:p};this.setSelectableShapes(h.shapes.map((function(t){return t.data.cacheItem})))},paint:function t(){this._super(this._layoutMode,this._data);var e=this._minorAxes.map(this._getAxisDetails);var i=[];Vn.call(this,e);if(this._oobLayer){this._oobLayer.update(this._outOfRange.points,{measureToAxisIndex:this._measureToAxisIndex,axesSettings:e,style:{outOfRange:"#999999"},globalAlpha:this._globalAlpha,markerSize:Math.min(8,this._majorAxis.getDiscreteSpacing()/2)});this._oobLayer.renderer.edgeBleed={left:0,right:this._edgeBleed,top:0,bottom:0};i.push(this._oobLayer.render())}this._markerRenderer.edgeBleed={left:0,right:this._edgeBleed,top:0,bottom:0};i.push(this._markerRenderer.render());return o["a"].all(i)},updateSize:function t(){this._super();this.renderers.markers.setDimensions(0,-1,this.rect.width,this.rect.height);this.layers.forEach((function(t){t.rect=this.rect;t.renderer.setDimensions(0,0,this.rect.width,this.rect.height);t.renderer.setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y)}),this)},release:function t(){this.layers.forEach((function(t){t.release()}));this._super();this._majorAxis&&this._majorAxis.stopListen("changed",null,this);this._minorAxis&&this._minorAxis.stopListen("changed",null,this);this._secondaryMinorAxis&&this._secondaryMinorAxis.stopListen("changed",null,this);this.timeAxis&&this.timeAxis.stopListen("changed",null,this);this.continuousAxis&&this.continuousAxis.stopListen("changed",null,this)},clear:function t(){this._super();this.layers.forEach((function(t){t.clear()}))},_getAxisDetails:function t(e){var i=e.getPlotMin();var a=e.getPlotMax();var n=a-i;var s=e.getPadding();var r=s.top-1;var o=e.rect.height-s.bottom;var l=0;l=i>0?o:a<0?r:Math.floor(e.getPositionOfValue(0))-.5;return{plotMin:i,plotMax:a,posMin:e.getPositionOfValue(i),posMax:e.getPositionOfValue(a),plotRange:n,topCutoff:r,bottomCutoff:o,areaStartBase:l,zeroPos:Math.floor(e.getPositionOfValue(0))-.5}}});var Fn=zn;var jn=Z["a"].extend("ComboArea",{init:function t(){var e=new(Function.prototype.bind.apply(Nn,[null].concat([].slice.call(arguments))));var i=new(Function.prototype.bind.apply(Oa,[null].concat([].slice.call(arguments))));var a=new(Function.prototype.bind.apply(Fn,[null].concat([].slice.call(arguments))));this._super.apply(this,arguments);this._data=null;this._layoutMode=null;this._selectableShapes=[];this._shapes=[];this._cacheItems=[];this._colorMap=null;i.setShowDataPoints(!this.isMini);i.setShowDataPointLabels(false);e.setShowDataPoints(false);this.subComponents=[e,i,a];this.lineArea=i;this.barArea=e;this.markerArea=a},setYMirrorMode:function t(e){this.yMirrorMode=e;this.subComponents.forEach((function(t){t.setYMirrorMode(e)}))},setColorMap:function t(e){this._colorMap=e;this.subComponents.forEach((function(t){t.setColorMap(e)}))},getColorMap:function t(){return this._colorMap},setShowDataPoints:function t(){},setMajorAxis:function t(e){this.subComponents.forEach((function(t){t.setMajorAxis(e)}));this._majorAxis=e},setMinorAxis:function t(e){this._minorAxis=e;this.subComponents[0].setMinorAxis(this._minorAxis);this.subComponents[2].setMinorAxis(this._minorAxis)},setTimeAxis:function t(e){this.timeAxis=e;this.subComponents.forEach((function(t){t.setTimeAxis(e)}))},setContinuousAxis:function t(e){this.continuousAxis=e;this.subComponents.forEach((function(t){t.setContinuousAxis(e)}))},setActiveDimensionAxis:function t(e){this._activeDimAxis=e;this.subComponents.forEach((function(t){t.setActiveDimensionAxis(e)}))},setIsDimensionContinuous:function t(e){this.isDimensionContinuous=e;this.subComponents.forEach((function(t){t.setIsDimensionContinuous(e)}))},getMinorAxisData:function t(){return this.barArea.getMinorAxisData()},setSecondaryMinorAxis:function t(e){this._secondaryMinorAxis=e},setDimensionTree:function t(e){this._tree=e;this.subComponents.forEach((function(t){t.setDimensionTree(e)}))},setData:function t(e){this._super(e);var i=[];var a=[];var n=[];for(var s=0;s<e.qHyperCube.qMeasureInfo.length;s++)e.qHyperCube.qMeasureInfo[s].series&&"line"===e.qHyperCube.qMeasureInfo[s].series.type?i.push(s):e.qHyperCube.qMeasureInfo[s].series&&"marker"===e.qHyperCube.qMeasureInfo[s].series.type?n.push(s):a.push(s);this.subComponents[0].setHasValidData(a.length>0);this.subComponents[1].setHasValidData(i.length>0);this.subComponents[2].setHasValidData(n.length>0);this.lineArea.setMeasureIndices(i);this.barArea.setMeasureIndices(a);this.markerArea.setMeasureIndices(n);this.subComponents.forEach((function(t){t.setData(e)}));this.barArea.setMinorAxis(this._minorAxis);this.lineArea.setMinorAxis(this._secondaryMinorAxis);this.lineArea.setSecondaryMinorAxis(this._minorAxis);this.markerArea.setMinorAxis(this._minorAxis);this.markerArea.setSecondaryMinorAxis(this._secondaryMinorAxis);this.invalidateProperties()},setHasValidData:function t(e){this.subComponents.forEach((function(t){t.setHasValidData(e)}))},setLayoutMode:function t(e){this._super(e);this.subComponents.forEach((function(t){t.setLayoutMode(e)}))},setRect:function t(e,i,a,n){this._super(e,i,a,n);this.subComponents.forEach((function(t){t.setRect(e,i,a,n)}))},setOuterRect:function t(e,i,a,n){this._super(e,i,a,n);this.subComponents.forEach((function(t){t.setOuterRect(e,i,a,n)}))},setLayoutToContainerRatios:function t(e,i){this._super(e,i);this.subComponents.forEach((function(t){t.setLayoutToContainerRatios(e,i)}))},setContainerRect:function t(e,i,a,n){this._super(e,i,a,n);this.subComponents.forEach((function(t){t.setContainerRect(e,i,a,n)}))},insertAdjacentTo:function t(){this._super.apply(this,[].slice.call(arguments));this.subComponents.forEach((function(t){t.setRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height)}),this)},setGlobalOpacity:function t(e,i){this._super(e,i);this.subComponents.forEach((function(t){t.setGlobalOpacity(e,i)}),this)},setLineType:function t(){},updateSize:function t(){this._super();this.subComponents.forEach((function(t){t.updateSize()}),this)},_updateDisplay:function t(){var e=[];this.subComponents.forEach((function(t){e.push(t.invalidateDisplay())}));return o["a"].all(e)},_updateSize:function t(){},updateRangeSelection:function t(e){this.isMini?this.lineArea.updateRangeSelection(e):this.subComponents.forEach((function(t){t.updateRangeSelection(e)}))},_updateProperties:function t(){if(!this._data||!this._tree)return;this.barArea.measureFormatters=this.measureFormatters;this.lineArea.measureFormatters=this.measureFormatters;this.markerArea.measureFormatters=this.measureFormatters;this.barArea.combinedMeasuresFormatter=this.combinedMeasuresFormatter;this.lineArea.combinedMeasuresFormatter=this.combinedMeasuresFormatter;this.markerArea.combinedMeasuresFormatter=this.combinedMeasuresFormatter;this.subComponents[0].updateNow(["properties"]);this.subComponents[1].updateNow(["properties"]);this.subComponents[2].updateNow(["properties"]);var e=this.subComponents[0].getSelectableShapes();e&&e.length||(e=this.subComponents[1].getSelectableShapes());e&&e.length||(e=this.subComponents[2].getSelectableShapes());this.setSelectableShapes(e)},invalidateProperties:function t(){this._super.apply(this,Array.prototype.slice.call(arguments));this.subComponents.forEach((function(t){t.invalidateProperties("ComboArea.invalidateProperties")}))},hasValidData:function t(){return this._super()&&this._majorAxis&&this._minorAxis&&this._data},paint:function t(){this._majorAxis.updateNow();this._minorAxis.updateNow();this._activeDimAxis&&this._activeDimAxis.updateNow()},clear:function t(){this._super();this.subComponents.forEach((function(t){t.clear()}))},release:function t(){this.subComponents.forEach((function(t){t.release()}))}});var Hn=jn;var Bn=i("6uJb");var $n=i("DXLV");var Wn=i("DGsO");function Un(t,e,i){var a;var n=i||0;a=e?e.getMeasureLayouts():Na["a"].getValue(t,"qHyperCubeDef.qMeasures",[]).map((function(t){return t.qDef}));var s=a.filter((function(t){return Na["a"].getValue(t,"series.axis",0)===n||0===n&&"bar"===Na["a"].getValue(t,"series.type","bar")}));return s}function Gn(t,e){if(e)return e.getDimensionLayouts();return t.qHyperCubeDef.qDimensions.map((function(t){return t.qDef}))}function Zn(t,e){return e.getMeasures().filter((function(t){return t.qDef.series&&"line"===t.qDef.series.type})).length>0}function Yn(t,e,i){return e.getMeasures().filter((function(t){return!t.qDef.series||"bar"===t.qDef.series.type})).length>i}var Xn={uses:"settings",items:{presentation:{type:"items",translation:"properties.presentation",grouped:true,show:function t(e,i){return Zn(e,i)||Yn(e,i,0)},items:{grouping:{ref:"barGrouping.grouping",type:"string",component:"item-selection-list",defaultValue:"grouped",horizontal:true,items:[{icon:"grouped",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.grouped",value:"grouped"},{icon:"stacked",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.stacked",value:"stacked"}],show:function t(e,i,a){return Yn(e,i,1)&&!$n["a"].isContinuousChart(a.layout)}},orientation:{ref:"orientation",type:"string",component:"item-selection-list",defaultValue:"vertical",horizontal:true,show:false,items:[{component:"icon-item",icon:"bar_vertical",labelPlacement:"bottom",translation:"properties.orientation.vertical",value:"vertical"},{icon:"bar_horizontal",component:"icon-item",labelPlacement:"bottom",translation:"Common.Horizontal",value:"horizontal"}]},scrollStartPos:{ref:"scrollStartPos",type:"number",translation:"properties.ScrollAlignment",component:"dropdown",defaultValue:0,options:[{value:0,translation:"properties.ScrollAlignStart"},{value:1,translation:"properties.ScrollAlignEnd"}],show:function t(e,i,a){return!$n["a"].isContinuousChart(a.layout)}},nullMode:{type:"string",component:"dropdown",ref:"nullMode",translation:"properties.nullMode",options:[{value:"gap",translation:"properties.nullMode.gap"},{value:"connect",translation:"properties.nullMode.connect"},{value:"zero",translation:"properties.nullMode.zero"}],defaultValue:"gap",show:function t(e,i){return Zn(e,i)&&i.getMeasures().length>1}},dataPointSettings:{type:"items",grouped:false,snapshot:{tid:"property-dataPoint"},show:function t(e,i){return Zn(e,i)},items:{dataPoints:{ref:"dataPoint.show",translation:"properties.dataPoints.showDataPoints",type:"boolean",defaultValue:false},showLineDataPointLabels:{ref:"dataPoint.showLineLabels",translation:"properties.dataPoints.linelabelmode",type:"boolean",component:"switch",defaultValue:false,show:function t(e){return e.dataPoint&&e.dataPoint.show},options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]}}},showBarLabels:{ref:"dataPoint.showBarLabels",type:"boolean",translation:"properties.dataPoints.barlabelmode",component:"switch",show:function t(e,i){return Yn(e,i,0)},defaultValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]}}},colorsAndLegend:{uses:"colorsAndLegend",items:{legend:{items:{show:{snapshot:{tid:"property-legend"}}}}}},dimensionAxis:{uses:"axis.dimensionAxis",label:function t(e,i){var t;var a="x";var n=Gn(e,i).map((function(t){return t.qFallbackTitle||""})).join(", ");t=n?Bn["default"].get("properties.".concat(a,"AxisWithInfo"),[n]):Bn["default"].get("properties.".concat(a,"Axis"));return t},items:{othersGroup:{items:{dock:{options:[{value:"near",translation:"Common.Bottom"},{value:"far",translation:"Common.Top"}]}}}}},measureAxis:{uses:"axis.measureAxis",label:function t(e,i){var t;var a=Un(e,i,0).map((function(t){return t.qFallbackTitle}));t=a.length?Bn["default"].get("properties.yAxisWithInfo",[a.join(",")]):Bn["default"].get("properties.yAxis");return t},show:function t(e){return Un(e,null,0).length>0},items:{axis:{items:{show:{ref:"measureAxes.0.show",snapshot:{title:"properties.yAxis",tid:"property-yAxis"}},dock:{ref:"measureAxes.0.dock",show:function t(e){return"none"!==e.measureAxes[0].show},options:function t(e,i,a){var n=a.yMirrorMode?"properties.dock.right":"properties.dock.left";var s=a.yMirrorMode?"properties.dock.left":"properties.dock.right";return[{value:"near",translation:n},{value:"far",translation:s}]}},spacing:{ref:"measureAxes.0.spacing",show:function t(e){return e.measureAxes[0]&&"none"!==e.measureAxes[0].show}}}},minMax:{items:{autoMinMax:{ref:"measureAxes.0.autoMinMax"},minMax:{ref:"measureAxes.0.minMax",defaultValue:"min",show:function t(e){return!e.measureAxes[0].autoMinMax}},min:{ref:"measureAxes.0.min",show:function t(e){return["min","minMax"].includes(e.measureAxes[0].minMax)&&!e.measureAxes[0].autoMinMax},invalid:function t(e){if("minMax"===e.measureAxes[0].minMax)return e.measureAxes[0].min>=e.measureAxes[0].max;return false}},max:{ref:"measureAxes.0.max",show:function t(e){return["max","minMax"].includes(e.measureAxes[0].minMax)&&!e.measureAxes[0].autoMinMax},invalid:function t(e){if("minMax"===e.measureAxes[0].minMax)return e.measureAxes[0].min>=e.measureAxes[0].max;return false}}}}}},secondaryMeasureAxis:{uses:"axis.measureAxis",label:function t(e,i){var t;var a=Un(e,i,1).map((function(t){return t.qFallbackTitle}));t=a.length?Bn["default"].get("properties.yAxisWithInfo",[a.join(",")]):Bn["default"].get("properties.yAxis");return t},show:function t(e){return Un(e,null,1).length>0},items:{axis:{items:{show:{ref:"measureAxes.1.show"},dock:{ref:"measureAxes.1.dock",defaultValue:"far",show:function t(e){return"none"!==e.measureAxes[1].show},options:function t(e,i,a){var n=a.yMirrorMode?"properties.dock.right":"properties.dock.left";var s=a.yMirrorMode?"properties.dock.left":"properties.dock.right";return[{value:"near",translation:n},{value:"far",translation:s}]}},spacing:{ref:"measureAxes.1.spacing",show:function t(e){return e.measureAxes[1]&&"none"!==e.measureAxes[1].show}}}},minMax:{type:"items",items:{autoMinMax:{ref:"measureAxes.1.autoMinMax"},minMax:{ref:"measureAxes.1.minMax",defaultValue:"min",show:function t(e){return!e.measureAxes[1].autoMinMax}},min:{ref:"measureAxes.1.min",show:function t(e){return["min","minMax"].includes(e.measureAxes[1].minMax)&&!e.measureAxes[1].autoMinMax},invalid:function t(e){if("minMax"===e.measureAxes[1].minMax)return e.measureAxes[1].min>=e.measureAxes[1].max;return false}},max:{ref:"measureAxes.1.max",show:function t(e){return["max","minMax"].includes(e.measureAxes[1].minMax)&&!e.measureAxes[1].autoMinMax},invalid:function t(e){if("minMax"===e.measureAxes[1].minMax)return e.measureAxes[1].min>=e.measureAxes[1].max;return false}}}}}},tooltips:{uses:"tooltip"}}};var Kn={uses:"data",items:{dimensions:{items:{nullSuppression:{show:function t(e,i,a){var n=Wn["a"].isFirstDimension(e,i);var s=$n["a"].isContinuousChart(a.layout);var r=!(n&&s);return r}}}},measures:{items:{series:{type:"items",items:{seriesType:{ref:"qDef.series.type",type:"string",component:"item-selection-list",defaultValue:"bar",horizontal:true,items:[{icon:function t(e){if("stacked"===e.barGrouping.grouping||$n["a"].isContinuousChart(e))return"stacked";return"grouped"},component:"icon-item",labelPlacement:"bottom",translation:"properties.style.bar",value:"bar"},{icon:"line_chart_line",component:"icon-item",labelPlacement:"bottom",translation:"properties.style.line",value:"line"},{icon:"shapes",component:"icon-item",labelPlacement:"bottom",translation:"properties.style.marker",value:"marker"}],change:function t(){}},seriesAxis:{ref:"qDef.series.axis",type:"integer",component:"dropdown",defaultValue:0,options:[{translation:"properties.axis.primary",value:0},{translation:"properties.axis.secondary",value:1}],show:function t(e){return e.qDef&&e.qDef.series&&e.qDef.series.type&&"bar"!==e.qDef.series.type}},seriesMarker:{ref:"qDef.series.marker",type:"string",component:"dropdown",defaultValue:"circle",options:[{translation:"properties.marker.circle",value:"circle"},{translation:"properties.marker.rect",value:"rect"},{translation:"properties.marker.diamond",value:"diamond"},{translation:"properties.marker.triangle",value:"triangle"},{translation:"properties.marker.line",value:"line"}],show:function t(e){return e.qDef&&e.qDef.series&&"marker"===e.qDef.series.type}},seriesMarkerFill:{ref:"qDef.series.markerFill",translation:"properties.series.fill",type:"boolean",defaultValue:true,show:function t(e){return e.qDef&&e.qDef.series&&"marker"===e.qDef.series.type&&!["line"].includes(e.qDef.series.marker)}}}}}}}};var Jn={uses:"sortingWithDisclaimer"};var Qn={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}}}};var ts={type:"items",component:"accordion",items:{data:Kn,sorting:Jn,addons:Qn,settings:Xn}};function es(t){return t.qHyperCubeDef.qMeasures.filter((function(t){return t.qDef.series&&"line"===t.qDef.series.type})).length>0}function is(t){return t.qHyperCubeDef.qMeasures.filter((function(t){return!t.qDef.series||"bar"===t.qDef.series.type})).length>1}var as={type:"items",component:"accordion",items:{data:{uses:"data"},sort:{uses:"sortWithDisclaimer"},presentation:{uses:"presentation",type:"items",translation:"properties.presentation",grouped:true,show:function t(e,i){return es(e,i)||is(e,i)&&!$n["a"].isContinuousChart(i)},items:{grouping:{ref:"barGrouping.grouping",type:"string",component:"item-selection-list",horizontal:true,items:[{icon:"grouped",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.grouped",value:"grouped"},{icon:"stacked",component:"icon-item",labelPlacement:"bottom",translation:"properties.grouping.stacked",value:"stacked"}],show:function t(e,i){return is(e,i)}},nullMode:{type:"string",component:"radio-list",ref:"nullMode",translation:"properties.nullMode",options:function t(){return[{value:"gap",translation:"properties.nullMode.gap"},{value:"connect",translation:"properties.nullMode.connect"},{value:"zero",translation:"properties.nullMode.zero"}]},show:function t(e){return es(e)&&e.qHyperCubeDef.qMeasures.length>1}},dataPoints:{ref:"dataPoint.show",translation:"properties.dataPoints.showDataPoints",type:"boolean",show:function t(e){return es(e)}}}},color:{uses:"color"}}};var ns=i("26xU");var ss=i("e4OJ");var rs=i("YWN+");var os=i("hPNO");var ls=i("4zDG");var cs='<div class="qv-viz" aria-hidden="true"></div>\n<span class="qv-viz-center-disclaimer" ng-if="dataAttributes.noDataExist && dataAttributes.layoutMode > 2" q-translation="Object.Disclaimer.NoDataExist" q-title-translation="Object.Disclaimer.NoDataExist" dir="ltr"></span>\n<div qva-chart-disclaimer attributes="dataAttributes" visible="!dataAttributes.noDataExist" direction="options.direction"></div>';var hs=i("KBmc");var us=i("ByVn");var ds=i("3r60");var fs=i("acVu");var ps={NONE:0,ONE_DIM:1,TWO_DIM:2};var vs={ACCUMULATIONS:"accumulation",MOVING_AVERAGE:"movingAverage",DIFFERENCE:"difference",NORMALIZATION:"normalization"};function ms(){var t=[];Object.keys(vs).forEach((function(e){Object(fs["b"])(e)&&t.push(vs[e])}));return t}function gs(t){var e=[];var i=[];t.qHyperCube.qMeasureInfo.forEach((function(t){t.series&&"bar"!==t.series.type&&1===t.series.axis?i.push(t):e.push(t)}));return{primaryMeasures:e,secondaryMeasures:i}}function xs(t,e,i,a,n,r){if(!e.length)return;var o;var l;if(n){o=n.min;l=n.max}else{o=Math.min.apply(this,e.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));l=Math.max.apply(this,e.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})))}s["a"].isNumeric(o)||(o=-1);s["a"].isNumeric(l)||(l=1);var c=this.getAxisOptions(i);if(a){l=Math.max(0,l);o=Math.min(0,o)}if(r){r.min=o;r.max=l;if(r.minMeasure&&r.maxMeasure){this._cutMode=this.getSpikeSettings(r,c);o=this._cutMode.min;l=this._cutMode.max}else this._cutMode={positive:false,negative:false}}t.setRealDataRange(void 0,void 0);this.setAxisDataRange(t,l,o,c.max,c.min,1)}var _s=Zt.extend("ComboChart",{namespace:".combochart",init:function t(e,i,a,s,r){a=n.a.extend(true,{components:{dataArea:{clazz:Hn},miniChart:{components:{dataArea:{clazz:Hn},secondaryMeasureAxis:{show:false,dock:"right",clazz:h["a"]}}},axis:{show:true,order:1.1,reductionOrder:2.1,dock:"right",relevantSize:90,showFlag:Z["a"].prototype.ShowFlags.XSMALL,clazz:h["a"]},secondaryMeasureAxisTitle:{show:true,order:1.2,dock:"right",relevantSize:30,reductionOrder:1,showFlag:Z["a"].prototype.ShowFlags.SMALL,clazz:Yt["a"]}}},a||{});this._super(e,i,a,s,r);ds["a"].updateProperties(e.backendApi,e.layout);this.components.scrollArea.setUseMiniChart(false);this.components.axis.setShowStrategy("all");this.components.dataArea.setSecondaryMinorAxis(this.components.axis);this.components.secondaryMeasureAxisTitle.setType("measure");this.components.secondaryMeasureAxisTitle.setModel(e.ext.model);if(this.components.miniChart){var o=this.components.miniChart;this.components.miniChart.setBackendApi(this.backendApi);this.components.scrollArea.setMiniChart(o);o.setColorMap(this.providers.colorMap);o.components.measureAxis.setDock("left");o.components.dimensionAxis.setDock("bottom");o.components.dataArea.setMinorAxis(o.components.measureAxis);o.components.dataArea.setMajorAxis(o.components.dimensionAxis);o.components.dataArea.setSecondaryMinorAxis(o.components.secondaryMeasureAxis)}},getVerticalComponents:function t(){var e=this._super();var i;if(this._data&&this.components){if(this.components.measureAxis&&this.components.measureAxis.isVertical()&&this._data.measureAxes){i=this._data.measureAxes[0].dock;e.push({comp:this.components.measureAxis,dock:i});this.components.measureAxisTitle&&e.push({comp:this.components.measureAxisTitle,dock:i})}if(this.components.axis&&this.components.axis.isVertical()&&this._data.measureAxes&&this._data.measureAxes.length>1){i=this._data.measureAxes[1].dock;e.push({comp:this.components.axis,dock:i});this.components.secondaryMeasureAxisTitle&&e.push({comp:this.components.secondaryMeasureAxisTitle,dock:i})}}return e},partialUpdate:function t(e){var i=this;var a;var n;var s;var r=[];var l=this._dataOptions.primary.indexOf(this._dataOptions.barSeries[0])>=0;this._enablePagingTransitions();n=e.qHyperCube.qStackedDataPages.length>0?this._pagingInfo.y:e.qHyperCube.qDataPages[0].qArea.qTop;this.components.dimensionAxis.setInnerOffset(n*this.scrollMultiplicator);return this.providers.colorMap.setData(e).then((function(){i._chartContext.refresh(e);i.components.colorLegend.updateNow(["properties"]);r.push(i.components.colorLegend.invalidateDisplay("ScrollableChart.partialUpdate"));for(a in i.components)"miniChart"!==a&&i.components[a].invalidateProperties("ScrollableChart.partialUpdate");i.components.dataArea.updateNow(["properties"]);s=i.components.dataArea.barArea.getMeasureIndices().length?i.components.dataArea.barArea.getMajorAxisData():i.components.dataArea.markerArea.getMeasureIndices().length?i.components.dataArea.markerArea.getMajorAxisData():i.components.dataArea.lineArea.getMajorAxisData();i.components.dimensionAxis.setDataRange(s.data,s.info);var t=i.components.dataArea.barArea.getMinorAxisData();t&&i._dataOptions.primary.forEach((function(e){if(this._dataOptions.barSeries.indexOf(e)<0&&!Number.isNaN(+e.qMin)){t.min=Math.min(e.qMin,t.min);t.max=Math.max(e.qMax,t.max)}}),i);xs.apply(i,[i.components.measureAxis,i._dataOptions.primary,i._dataOptions.axes.measureAxis,l,t,t?i.getPrimaryMeasureSettings(e,i._dataOptions):null]);i.components.dimensionAxis.updateNow(["properties"]);i.components.dimensionAxis.updateLevels();r.push(i.components.dimensionAxis.invalidateDisplay("ScrollableChart.partialUpdate"));r.push(i.components.dataArea.invalidateDisplay("ScrollableChart.partialUpdate"));return o["a"].all(r)}))},isValid:function t(e){return this._super(e)&&!this.supressChartRendering},_paint:function t(){if(!this.isValid(this._data))return this.clear();this._super();var e;var i=this.components.scrollArea;var a=this.rect.height;var n=this.getSnapshotStoredChartData();var s=0;var r=[];if(this._cutMode.positive||this._cutMode.negative){this._layoutMode>=31&&(s=48);s=this._layoutMode>=15?32:this._layoutMode>=7?16:8}this.components.measureAxis.setPadding(this._cutMode.positive?s:0,0,this._cutMode.negative?s:0,0);this.components.axis.setPadding(this._cutMode.positive?s:0,0,this._cutMode.negative?s:0,0);this.components.dimensionAxis.setMaxDiscreteUnitSize(Math.max(1,Math.ceil(a/4)));this.components.dataArea.updateNow(["properties"]);this.components.dimensionAxis.updateNow(["properties"]);this.layout();if(this._readStoredData){this.components.dimensionAxis.setInnerOffset(n.axisInnerOffset);this.components.scrollArea.setOffset(n.scrollOffset);this.components.scrollArea.setViewRange(n.viewRange)}else if(this.options.viewState){this.components.dimensionAxis.setInnerOffset(this.options.viewState.axisInnerOffset);this.components.scrollArea.setOffset(this.options.viewState.scrollOffset);this.components.scrollArea.setViewRange(this.options.viewState.viewRange)}var l=this.checkPage();if(l)r.push(l);else{for(e in this.components)r.push(this.components[e].invalidateDisplay("ComboChart.paint"));i.viewState.min+i.viewState.range>i.fullState.max&&i.setOffset(i.fullState.max-i.viewState.range)}return o["a"].all(r)},prePaint:function t(e){this._super(e);ss["a"].applyDisclaimerAttributes({paging:true},this.$scope.dataAttributes,this.$element,this.$scope,e);this.supressChartRendering=this.$scope.dataAttributes.noDataExist},updateData:function t(e){if(this._destroyed)return o["a"].reject();this.setIsDimensionContinuous($n["a"].isContinuousChart(e));this._setActiveDimensionAxis(e);return this._super(e)},_updateData:function t(e){var i=[];this._checkPage=false;var a=this.getSnapshotStoredChartData();this.components.scrollArea.setUseMiniChart(this.isDimensionContinuous);var s=e.qHyperCube.qMeasureInfo.filter((function(t){return t.series&&"line"===t.series.type}));var r=e.qHyperCube.qMeasureInfo.filter((function(t){return!t.series||"bar"===t.series.type}));var l=e.qHyperCube.qMeasureInfo.filter((function(t){return t.series&&"marker"===t.series.type}));var c=gs(e);var h=c.primaryMeasures;var u=c.secondaryMeasures;this.isStacked=false;this.components.measureAxis.isStacked=("stacked"===e.barGrouping.grouping||this.isDimensionContinuous)&&r.length>1;this.components.axis.isStacked=false;this._pagingMode=ps.NONE;this.scrollMultiplicator="grouped"===e.barGrouping.grouping&&r.length>1?r.length+1:1;this.components.dataArea.setIsDimensionContinuous(this.isDimensionContinuous);if(this.isDimensionContinuous)this._pagingMode=ps.NONE;else{if(e.qHyperCube.qSize.qcy>e.qHyperCube.qDataPages[0].qArea.qHeight){this._pagingMode=ps.ONE_DIM;var d=e.qHyperCube.qSize.qcy;if("grouped"===e.barGrouping.grouping&&r.length>1){this.scrollMultiplicator=r.length+1;d*=this.scrollMultiplicator}this.components.dimensionAxis.setNumDiscreteUnits(d)}else this.components.dimensionAxis.setNumDiscreteUnits(null);this.components.dimensionAxis.isDiscrete()||(this._pagingMode=ps.NONE)}var f=n.a.extend(true,{},e.measureAxes[0],{show:h.length?e.measureAxes[0].show:"none"});var p=n.a.extend(true,{},e.measureAxes[1],{show:u.length?e.measureAxes[1].show:"none",dock_:["near","far"].includes(e.measureAxes[0].dock)?"near"===e.measureAxes[0].dock?"far":"near":Z["a"].prototype.getOppositeDock.call({options:{dock:e.measureAxes[0].dock}})});var v={primary:h,secondary:u,lineSeries:s,markerSeries:l,barSeries:r,axes:{measureAxis:{component:this.components.measureAxis,data:f,dataIndices:h.map((function(t){return e.qHyperCube.qMeasureInfo.indexOf(t)}))},secondaryMeasureAxis:{component:this.components.axis,data:p,dataIndices:u.map((function(t){return e.qHyperCube.qMeasureInfo.indexOf(t)}))},dimensionAxis:{component:this.components.dimensionAxis,data:e.dimensionAxis,dataIndices:e.qHyperCube.qDimensionInfo.map((function(t,e){return e}))},timeAxis:{component:this.components.timeAxis,data:e.dimensionAxis},continuousAxis:{component:this.components.continuousAxis,data:e.dimensionAxis}},axisTitles:{dimensionAxisTitle:{component:this.components.dimensionAxisTitle,data:e.dimensionAxis},measureAxisTitle:{component:this.components.measureAxisTitle,data:f},secondaryMeasureAxisTitle:{component:this.components.secondaryMeasureAxisTitle,data:p}}};var m=this.components.dimensionAxisTitle;var g=this.components.measureAxisTitle;var x=this.components.secondaryMeasureAxisTitle;this._dataOptions=v;var _=[];var y=[];h.forEach((function(t){_.push({label:t.qFallbackTitle,index:e.qHyperCube.qMeasureInfo.indexOf(t)})}));u.forEach((function(t){y.push({label:t.qFallbackTitle,index:e.qHyperCube.qMeasureInfo.indexOf(t)})}));this._data=e;i.push(m.setData(e));i.push(g.setData(_));i.push(x.setData(y));i.push(this.components.dataArea.setData(e));i.push(this.components.colorLegend.setData(e));var b=this.providers.colorMap.getLegendDataProvider();b.setMeasureLegendTypes(e.qHyperCube.qMeasureInfo.map((function(t){if(!t.series||!t.series.type)return["rect"];if("line"===t.series.type)return e.dataPoint.show?["line","circle"]:["line"];if("marker"===t.series.type)return[(false===t.series.markerFill?"!":"")+(t.series.marker||"circle")];return["rect"]})));this._super(e,v);if(this._readStoredData){this.components.dimensionAxis.setInnerOffset(a.axisInnerOffset);this.components.scrollArea.setOffset(a.scrollOffset);this.components.scrollArea.setViewRange(a.viewRange)}else if(this.options.viewState){this._checkPage=true;this.components.dimensionAxis.setInnerOffset(this.options.viewState.axisInnerOffset);this.components.scrollArea.setOffset(this.options.viewState.scrollOffset);this.components.scrollArea.setViewRange(this.options.viewState.viewRange)}else if(Number.isNaN(+e.scrollStartPos)){if(!this.isDimensionContinuous){this.components.dimensionAxis.setInnerOffset(0);this.components.scrollArea.setOffset(0)}}else this.components.scrollArea.setRelativeOffset(e.scrollStartPos);this.isDimensionContinuous||(this._checkPage=true);return o["a"].all(i)},initSelections:function t(){var e=this;this._super();if(!this.options._disableSelections){this.selections.types.range.addComponent("y",this.components.axis);this.selections.Select.bind((function(t,i){var a;var n=e.selections.getActiveType().activeComponent;a=n.subComponents?e.components.dimensionAxis.getType().current:n.getSelectionIndices();e.onSelection.Select.apply(e,[t,i,a])}));var i=function t(e){this.onSelection.scheduleInvalidation.call(this);this.components.timeAxis.setSelectedRanges(e);this.components.dataArea.updateRangeSelection(e);this.components.miniChart.components.dataArea.updateRangeSelection(e)};this.selections.UpdateRanges.bind(i.bind(this));this.selections.Clear.bind(i.bind(this,[]));this.selections.Deactivated.bind(i.bind(this,[]))}},updateDataArea:function t(e,i){this._super.apply(this,[].slice.call(arguments));"byExpression"===e.color.mode?this.components.dataArea.lineArea.interpolateVaryingColors=!e.color.expressionIsColor&&-1!==["sg","dg"].indexOf(e.color.measureScheme):this.components.dataArea.lineArea.interpolateVaryingColors=false;var a="area"===e.lineType&&e.stackedArea?"stackedArea":e.lineType;this.components.dataArea.lineArea.setShowDataPoints(e.dataPoint.show);this.components.dataArea.lineArea.setLineType(a);this.components.dataArea.lineArea.setNullMode(e.nullMode);this.components.dataArea.lineArea.setShowDataPointLabels(e.dataPoint.showLineLabels);this.components.dataArea.barArea.setShowDataPoints(e.dataPoint.showBarLabels);var n=this.isDimensionContinuous?"stacked":e.barGrouping.grouping;this.components.dataArea.barArea.setGroupingMode(n);if(this.components.miniChart){this.components.miniChart.components.dataArea.lineArea.setLineType(a);this.components.miniChart.components.dataArea.lineArea.setNullMode(e.nullMode);this.components.miniChart.components.dataArea.barArea.setGroupingMode(n);var s;var r;for(s in i.axes){var o=i.axes[s];r=this.components.miniChart.components[s];if(r){r.setDataIndices(o.dataIndices||[o.dataIndex||0]);r.setCurrentDataIndices(o.currentDataIndices||o.dataIndices||[o.dataIndex||0])}}}this.components.dataArea.updateNow(["properties"])},getMinDiscreteUnitSize:function t(){return this._minDiscreteUnitSize},updateAxis:function t(e,i){var a;var s=i.primary.indexOf(i.barSeries[0])>=0;var r=this.getSnapshotStoredChartData();var o=gs(e);var l=n.a.extend(true,{},e.measureAxes[0],{show:o.primaryMeasures.length?e.measureAxes[0].show:"none"});var c=n.a.extend(true,{},e.measureAxes[1],{show:o.secondaryMeasures.length?e.measureAxes[1].show:"none",dock_:["near","far"].includes(e.measureAxes[0].dock)?"near"===e.measureAxes[0].dock?"far":"near":Z["a"].prototype.getOppositeDock.call({options:{dock:e.measureAxes[0].dock}})});this._super(e,i);this.components.timeAxis.setData(e);this._cutMode={positive:false,negative:false};var h=this.components.dataArea.barArea.getMinorAxisData();h&&i.primary.forEach((function(t){if(i.barSeries.indexOf(t)<0&&!Number.isNaN(+t.qMin)){h.min=Math.min(t.qMin,h.min);h.max=Math.max(t.qMax,h.max)}}));if(this._readStoredData&&r.dataRanges){h.min=r.dataRanges[0].min;h.max=r.dataRanges[0].max}xs.apply(this,[this.components.measureAxis,i.primary,i.axes.measureAxis,s,h,s?this.getPrimaryMeasureSettings(e,i):null]);xs.apply(this,[this.components.axis,i.secondary,i.axes.secondaryMeasureAxis,"zero"===e.nullMode,null]);var u=this.chartFormatter.getFormattersForMeasures(e.qHyperCube.qMeasureInfo,i.primary.map((function(t){return e.qHyperCube.qMeasureInfo.indexOf(t)})));var d=this.chartFormatter.getFormattersForMeasures(e.qHyperCube.qMeasureInfo,i.secondary.map((function(t){return e.qHyperCube.qMeasureInfo.indexOf(t)})));this.components.measureAxis.combinedMeasuresFormatter=this.chartFormatter.getFormatterFromFormatters(u);this.components.axis.combinedMeasuresFormatter=this.chartFormatter.getFormatterFromFormatters(d);if(i.barSeries.length)a=this.components.dataArea.barArea.getMajorAxisData();else if(i.markerSeries.length){a=this.components.dataArea.markerArea.getMajorAxisData();i.lineSeries.length||a.data.forEach((function(t){var e=[];for(var a=0;a<i.markerSeries.length;a++)e.push(t.cacheIndex[0]*i.markerSeries.length+a);t.cacheIndex=e}))}else a=i.lineSeries.length?this.components.dataArea.lineArea.getMajorAxisData():{data:[],info:[],groupSize:null};this.components.dimensionAxis.setDataRange(a.data,a.info);this._updateMinDiscreteUnitSize(this.components.dimensionAxis);var f=this.components.dimensionAxisTitle;var p=this.components.measureAxisTitle;var v=this.components.secondaryMeasureAxisTitle;f.setDock("far"===e.dimensionAxis.dock?"top":"bottom");p.setDock("far"===l.dock?"right":"left");v.setDock("far"===c.dock?"right":"left");f.setSelectionsEnabled(!!this.selections);p.setSelectionsEnabled(!!this.selections);v.setSelectionsEnabled(!!this.selections);if(i.primary.length&&i.secondary.length||e.measureAxes.every((function(t){return"none"===t.show})))this.components.dimensionAxis.setUnitAlignment("center");else{var m=i.primary.length?e.measureAxes[0]:e.measureAxes[1];this.components.dimensionAxis.setUnitAlignment(L["a"].getAxisUnitAlignment(m.dock,this.components.dimensionAxis.isHorizontal()))}this.updateTimeAxis()},updateGrid:function t(e,i){this._super(e,i);!i.primary.length&&i.secondary.length||["all","labels"].indexOf(i.axes.measureAxis.data.show)<0&&i.secondary.length&&["all","labels"].indexOf(i.axes.secondaryMeasureAxis.data.show)>=0?this.components.grid.setAxes(this._activeDimAxis,this.components.axis):this.components.grid.setAxes(this._activeDimAxis,this.components.measureAxis)},_updateMinDiscreteUnitSize:function t(e){this._super(e)},getPrimaryMeasureSettings:function t(e,i){var a=i.primary.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return{min:t.qMin,max:t.qMax,index:e.qHyperCube.qMeasureInfo.indexOf(t),isBarSeries:i.barSeries.indexOf(t)>=0}}));var n=i.primary.filter((function(t){return!Number.isNaN(+t.qMin)&&i.barSeries.indexOf(t)<0}));var r;var o;var l;var c;if(a.length){r=a.reduce((function(t,e){return t.min<e.min?t:e}),a[0]);o=a.reduce((function(t,e){return t.max>e.max?t:e}),a[0]);o&&(c=r.max);r&&(l=r.min);s["a"].isNumeric(l)||(l=0);s["a"].isNumeric(c)||(c=1)}return{minMeasure:r,maxMeasure:o,nonBarSeriesMax:Math.max.apply(null,n.map((function(t){return t.qMax}))),nonBarSeriesMin:Math.min.apply(null,n.map((function(t){return t.qMin}))),min:l,max:c,data:e,options:i}},getSpikeSettings:function t(e,i){var a=e.data;var n=e.minMeasure;var s=e.maxMeasure;var r=e.min;var o=e.max;var l=0;var c=0;var h=0;var u=0;var d=false;var f=false;var p;var v;var m=s.index+a.qHyperCube.qDimensionInfo.length;var g=n.index+a.qHyperCube.qDimensionInfo.length;var x=a.qHyperCube.qDataPages[0]?a.qHyperCube.qDataPages[0].qMatrix:[];!Number.isNaN(+e.nonBarSeriesMax)&&e.nonBarSeriesMax>0&&(l=e.nonBarSeriesMax);!Number.isNaN(+e.nonBarSeriesMin)&&e.nonBarSeriesMin<0&&(c=e.nonBarSeriesMin);if(!this.components.measureAxis.isStacked){for(var _=0;_<x.length;_++){p=x[_];v=p[m].qNum;v>0&&!Number.isNaN(+v)&&(p[0].qIsOtherCell||p[1].qIsOtherCell?h=Math.max(v,h):l=Math.max(v,l));v=p[g].qNum;v<0&&!Number.isNaN(+v)&&(p[0].qIsOtherCell||p[1].qIsOtherCell?u=Math.min(v,u):c=Math.min(v,c))}if(null!==i.max&&i.max<s.max)d=i.max>0;else if(l>0&&h/l>5){o=l;d=o>=0}if(null!==i.min&&i.min>n.min)f=i.min<0;else if(c<0&&u/c>5){r=c;f=r<0}}return{max:o,min:r,positive:d,negative:f}},getPreferredSize:function t(){return this._super()}});function ys(t,e){var i=this.item;var a;var n=["contextMenu.add",i.name];if(e.canAddMeasure()){a=this.menu.addItem({translation:n,tid:"add-as"});a.addItem({translation:"contextMenu.asBar",tid:"as-bar",icon:"bar-chart",select:function a(){e.addLibraryMeasure(i.id).then((function(i){i.qDef.series.type="bar";e.updateGlobalChangeListeners();t.setProperties(e.properties);r["default"].$rootScope.$broadcast("pp-open-path","data.".concat(i.qDef.cId))}))}});a.addItem({translation:"contextMenu.asLine",tid:"as-line",icon:"line-chart",select:function a(){e.addLibraryMeasure(i.id).then((function(i){i.qDef.series.type="line";i.qDef.series.axis=1;e.updateGlobalChangeListeners();t.setProperties(e.properties);r["default"].$rootScope.$broadcast("pp-open-path","data.".concat(i.qDef.cId))}))}});a.addItem({translation:"contextMenu.asMarker",tid:"as-marker",icon:"shapes",select:function a(){e.addLibraryMeasure(i.id).then((function(i){i.qDef.series.type="marker";i.qDef.series.axis=1;e.updateGlobalChangeListeners();t.setProperties(e.properties)}))}})}e.canColorBy().byMeasure&&this.menu.addItem({translation:["contextMenu.colorBy",i.name],tid:"colorby",select:function a(){hs["a"].setColorByPropertyDef(e.properties,i);e.updateGlobalChangeListeners();t.setProperties(e.properties)}})}var bs=e["default"]={type:"ComboChart",BackendApi:rs["a"],template:cs,View:_s,definition:ts,softDefinition:as,initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:17,qHeight:500}],qSuppressMissing:true},measureAxes:[{autoMinMax:true,dock:"near",max:10,min:0,minMax:"min",show:"all",spacing:1},{autoMinMax:true,dock:"far",max:10,min:0,minMax:"min",show:"all",spacing:1}]},data:ns["a"],support:{cssScaling:false,snapshot:true,export:true,exportData:true,sharing:true,viewData:true,modifiers:ms()},migrate:{properties:function t(e){var i=ds["a"].migrateProperties(e);return us["a"].migrateProperties(i)}},options:{selections:{dataArea:{},range:{},colorLegend:{}},tooltips:{}},getDropMeasureOptions:function t(e,i,a,n,s){if("measure"===e.item.type){ys.call(e,a,i,s);i.getMeasures().length>=i.minMeasures()&&e.ReplaceMeasures(a,i,s);n()}else os["a"].getDropMeasureOptions(e,i,a,n,s)},importProperties:function t(e,i,a){var n=ls["default"].axisChart.importProperties.apply(ls["default"],[e,i,a]);var r="linechart"===e.properties.visualization;var o=[];n.qProperty.qHyperCubeDef.qMeasures.forEach((function(t){t.qDef.series||(t.qDef.series={type:r?"line":"bar",axis:0,marker:"circle",markerFill:true});o.indexOf(t.qDef.series.axis)<0&&o.push(t.qDef.series.axis)}));var l=o.sort().shift();n.qProperty.measureAxes[l]&&e.properties.measureAxis&&"undefined"!==typeof e.properties.measureAxis.autoMinMax&&s["a"].extend(true,n.qProperty.measureAxes[l],e.properties.measureAxis,{logarithmic:false});return n},exportProperties:ls["default"].axisChart.exportProperties.bind(ls["default"])}},"/D2Q":function(t,e,i){"use strict";var a=i("nHjU");var n=i("UV1h");var s=i("plXO");var r={positionRectanglesAlongAxis:function t(e,i,a,n,s){var r;var o;var l;var c;var h=e?e.length:0;true!==s&&e.sort((function(t,e){return t.position>e.position?1:-1}));function u(){if(0===h){r=[];o=0;return}var t;var a;var n;var s;var l;r=[[0]];for(t=1;t<h;t++){a=e[t].position;n=e[t].size;s=e[t-1].position;l=e[t-1].size;s+l/2+i>a-n/2?r[r.length-1].push(t):r.push([t])}o=r?r.length:0}function d(){if(0===h)return;f();p();m();l=v();if(l)return;g()}function f(){var t;var n;var s;var r;var o;n=e[0].position;s=e[0].size;n=Math.max(a,n-s/2)+s/2;e[0].newPosition=n;for(t=1;t<h;t++){r=e[t-1].newPosition;o=e[t-1].size;n=e[t].position;s=e[t].size;n=Math.max(r+o/2+i,n-s/2)+s/2;e[t].newPosition=n}}function p(){var t;var s;var r;var o;var l;s=e[h-1].newPosition;r=e[h-1].size;if(s+r/2>n){e[h-1].newPosition=n-r/2-a;for(t=h-2;t>=0;t--){o=e[t+1].newPosition;l=e[t+1].size;s=e[t].newPosition;r=e[t].size;s=Math.min(o-l/2-i,s+r/2)-r/2;e[t].newPosition=s}}}function v(){var t;var n;var s;var r=e[0].newPosition;var o=e[0].size;if(r-o/2<a)return true;if(r-o/2>a)return false;for(t=1;t<h;t++){n=e[t-1].newPosition;s=e[t-1].size;r=e[t].newPosition;o=e[t].size;if(n+s/2+i<r-o/2)return false}return true}function m(){var t;var i;var a;var n;var s;var l;var h;var u;var d;var f;var p;var v;c&&c.length===o||(c=new Array(o));for(t=0;t<o;t+=1){i=r[t];a=i[0];n=i[i.length-1];s=e[a];l=e[n];d=s.position;h=s.size;p=s.newPosition-h/2;f=l.position;u=l.size;v=l.newPosition+u/2;c[t]={firstPosition:d,lastPosition:f,minPosition:p,maxPosition:v}}}function g(){x(0,a);for(var t=1;t<o;t++)x(t,c[t-1].maxPosition+i)}function x(t,e){var i=r[t];i.length%2===0?_(t,e):y(t,e)}function _(t,i){var a=r[t];var n=a[0];var s=a[a.length/2-1];var o=a[a.length/2];var l=e[n];var c=e[s];var h=e[o];var u=l.newPosition;var d=l.size;var f=(c.position+h.position)/2;var p=(c.newPosition+h.newPosition)/2;var v=p-f;var m=u-v;b(t,u,m,d,i)}function y(t,i){var a=r[t];var n=a[0];var s=a[(a.length-1)/2];var o=e[n];var l=e[s];var c=o.newPosition;var h=o.size;var u=l.position;var d=l.newPosition;var f=d-u;var p=c-f;b(t,c,p,h,i)}function b(t,e,i,a,n){if(i>=e)return;i=Math.max(n+a/2,i);var s=e-i;c[t].minPosition-=s;c[t].maxPosition-=s;M(t,s)}function M(t,i){var a;var n;var s;var o=r[t];var l=o?o.length:0;for(a=0;a<l;a++){n=o[a];s=e[n];s.newPosition-=i}}u();d()}};var o=r;var l=i("qIEf");var c=i.n(l);var h=i("G1wx");var u=i("FJpR");var d=i("/Zwk");var f=i("Xb14");function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function m(t,e,i){e&&v(t.prototype,e);i&&v(t,i);return t}var g=c()(document);var x;function _(t,e,i){var a=t.offset();return new u["a"](e-a.left,i-a.top)}function y(t,e,i){var a=t.offset();return new u["a"](a.left+e,a.top+i)}function b(t,e){var i=t.shapeWrapper.getBoundingRect();return i.pointInside(e.x,e.y)}function M(t,e){return t.filter((function(t){return b(t,e)}))[0]}function w(t,e){return{positions:[y(e,t.x+t.width/2,t.y),y(e,t.x+t.width,t.y+t.height/2),y(e,t.x,t.y+t.height/2),y(e,t.x+t.width/2,t.y+t.height)],directions:["top","right","left","bottom"]}}function S(){x&&(x=null)}var D=function(){function t(e,i){p(this,t);this.$container=c()(e);this.styleService=i;n["a"].ThemeChanged.bind(this.updateStyling.bind(this));this.updateStyling()}m(t,[{key:"updateStyling",value:function t(){this.styling={"font-family":this.styleService.getStyle("tooltip","fontFamily")}}},{key:"setLabelObjects",value:function t(e){this._labelObjects=e}},{key:"on",value:function t(){var e=this;this._onMouseMove=function(t){if(!e._labelObjects)return;var i=_(e.$container,t.pageX,t.pageY);var a=M(e._labelObjects,i);if(a&&x!==a){x=a;var n=w(a.shapeWrapper.getLocalBoundingRect(),e.$container);f["a"].open({content:[{rows:a.tooltipRows}],position:n.positions,direction:n.directions,hideCallback:S,styling:e.styling},d["a"].getDuration(a.tooltipRows.length),500)}else if(!a){x=null;f["a"].close()}};this._onMouseLeave=function(){x=null;f["a"].close()};if(h["a"].treatAsDesktop()){this.$container.on("mousemove",this._onMouseMove);this.$container.on("mouseleave",this._onMouseLeave);g.on("mouseleave.refLineLabels",this._onMouseLeave)}}},{key:"off",value:function t(){this.$container.off("mousemove",this._onMouseMove);this.$container.off("mouseleave",this._onMouseLeave);g.off("mouseleave.refLineLabels",this._onMouseLeave)}},{key:"release",value:function t(){this.$container=null;n["a"].ThemeChanged.unbind(this.updateStyling)}}]);return t}();var A=D;var k=i("wdNe");var C=i("NWoE");var q=i("ZrpC");var L=i("4nJ1");var P=i("zjn0");var I=i("gapF");var T;var O;var N;var E;var R;var V="center";var z="bottom";var F=2;function j(t){t.forEach((function(t){t.size=t.shapeWrapper.measure().height}))}function H(t,e){if(!t||!t.paletteColor&&!t.color)return e;if(t.paletteColor)return n["a"].resolveColor(t.paletteColor);return n["a"].resolveColor(t.color,n["a"].deprecatedPalette)}function B(t,e,i,a,n,s){void 0===n&&(n=Number.MAX_VALUE);void 0===s&&(s=1);var r=new k["a"];r.setText(t);r.font=e;r.x=i;r.y=a;r.maxWidth=n;r.maxNumLines=s;r.align=V;r.baseline=z;return r}function $(t){if(void 0===t||""===t)return 0;T.setText(t);return T.measure().width}function W(t){if(void 0===t||""===t)return 0;N.setText(t);return N.measure()}function U(t){if(void 0===t||""===t)return 0;O.setText(t);return O.measure().width}function G(t,e){if(void 0===t||""===t)return{numLines:0,width:0,height:0,lines:[]};O.setText(t);O.maxWidth=e;return O.measure()}function Z(t,e){if(void 0===t||""===t)return{index:-1,width1:0,width2:0,width:0};void 0===e&&(e=$(t));var i=Number.MAX_VALUE;var a=t.length;var n=Math.floor(a/2);var s=t.substring(0,n);var r=0;var o=true;var l=s.lastIndexOf(" ");var c;var h;var u;var d;while(l>-1&&o){s=t.substring(0,l);c=$(s);h=e-c-E;u=Math.max(c,h);if(i<u)o=false;else{i=u;r++;d={index:l,width1:c,width2:h,width:i};l=s.lastIndexOf(" ")}}if(r>1)return d;l=t.indexOf(" ",n);r=0;while(l>-1){s=t.substring(l+1);h=$(s);c=e-h-E;u=Math.max(c,h);if(i<u)return d;i=u;r++;d={index:l,width1:c,width2:h,width:i};l=t.indexOf(" ",l+1)}void 0===d&&(d={index:-1,width1:0,width2:e,width:e});return d}function Y(t,e){if(void 0===t||""===t)return{index1:-1,index2:-1,width1:0,width2:0,width3:0,width:0};void 0===e&&(e=$(t));var i=Number.MAX_VALUE;var a=t.length;var n=Math.floor(a/3);var s=t.substring(0,n);var r=0;var o=true;var l=s.lastIndexOf(" ");var c;var h;var u;var d;var f;var p;var v;while(l>-1&&o){s=t.substring(0,l);c=t.substring(l+1);u=$(c);h=e-u-E;p=Z(c,u);f=p.width;d=Math.max(h,f);if(i<d)o=false;else{i=d;r++;v={index1:l,index2:p.index,width1:h,width2:p.width1,width3:p.width2,width:i};l=s.lastIndexOf(" ")}}if(r>1)return v;l=t.indexOf(" ",n);r=0;while(l>-1){c=t.substring(l+1);u=$(c);h=e-u-E;p=Z(c,u);f=p.width;d=Math.max(h,f);if(i<d)return v;i=d;r++;v={index1:l,index2:p.index,width1:h,width2:p.width1,width3:p.width2,width:i};l=t.indexOf(" ",l+1)}void 0===v&&(v={index1:-1,index2:-1,width1:0,width2:0,width3:e,width:e});return v}function X(t,e,i){var a;if(e<=i)return{minTextWidth:e,level:1};if(e<=2*i){a=Z(t,e);if(a.width<=i)return{minTextWidth:a.width,level:0===a.width1?3:2};if(0===a.width1)return{minTextWidth:Math.ceil(a.width/2)+R,level:3}}if(e<3*i){a=Y(t,e);if(0===a.width1&&0===a.width2)return{minTextWidth:Math.min(Math.ceil(a.width/3)+Math.ceil(3*R/2),i),level:3};return{minTextWidth:Math.min(a.width,i),level:3}}return{minTextWidth:i,level:3}}function K(t,e,i,a,n){t.size=e;t.size2=i;t.numLines=a;t.level=n}function J(t,e,i){if(t.size/2<=e||3===t.numLines||3===t.level)return;var a;var n;if(2===t.numLines){a=Y(t.text,t.singleLineTextWidth);n=G(t.text,a.width);K(t,a.width,n.height,n.numLines,3);return}a=Z(t.text,t.singleLineTextWidth);if(0===a.width1)return;if(a.width/2<=e||true===i){n=G(t.text,a.width);K(t,a.width,n.height,n.numLines,2);return}a=Y(t.text,t.singleLineTextWidth);n=G(t.text,a.width);K(t,a.width,n.height,n.numLines,3)}function Q(t,e,i){var a;var n;if(t.position+t.size/2+i>e.position-e.size/2){if(t.size>e.size){a=t;n=e.position-e.size/2-i-t.position}else{a=e;n=e.position-(t.position+t.size/2+i)}J(a,n,true)}}function tt(t,e,i,a,n,s){t.singleLineTextWidth=e;t.size=i;t.size2=a;t.numLines=n;t.level=s}function et(t){return String(void 0!==t.label?t.label:t)}function it(t,e){var i=t;var a=L["a"].escapeRegExp("+-".concat(this.chartFormatter.getLocaleInfo().qDecimalSep||"").concat(this.chartFormatter.getLocaleInfo().qThousandSep||""));var n=i.replace(new RegExp("[0-9e".concat(a,"]"),"g"),"");n=n.length?i:this._axis.format(e);return n}function at(t){if(!this._axis||!this._data)return;this._axis.updateFormatter();var e=this._data?this._data.length:0;var i=[];var a=this._axis.getPlotMin();var n=this._axis.getPlotMax();var s;var r;var o;var l;var c;var h;var u;var d=[];var f=[];var p=-Number.MAX_VALUE;var v=Number.MAX_VALUE;var m=0;var g=0;this._plotMinValueForRelevantSize=a;this._plotMaxValueForRelevantSize=n;this._maxLowerLabelIndex=void 0;this._minUpperLabelIndex=void 0;for(s=0;s<e;s+=1){if(!I["a"].isVisible(this._data[s])||false===this._data[s].showLabel&&false===this._data[s].showValue)continue;r=et(this._data[s].refLineExpr);o=t?this._currentProperties["value".concat(s)]:this._data[s].refLineExpr.value;if(null===o||Number.isNaN(+o))continue;l=this._data[s].label;c=it.apply(this,[r,o]);h=" ".concat(P["a"].lrm,"(").concat(c,")").concat(P["a"].lrm);if(o<a){m++;f.push({label:l,value:c});p<o&&(this._maxLowerLabelIndex=s);continue}if(o>n){g++;d.push({label:l,value:c});v>o&&(this._minUpperLabelIndex=s);continue}u=I["a"].getRefLineTitle({refLine:this._data[s],label:l,valueString:c});i.push({index:s,text:u,value:o,text1:l,text2:false!==this._data[s].showValue?h:"",tooltipRows:[{label:l,value:c}]})}g>0&&i.push({index:-1,text:g<10?g.toString():"9+",value:"max",type:1,tooltipRows:d});m>0&&i.push({index:-2,text:m<10?m.toString():"9+",value:"min",type:-1,tooltipRows:f});this._labelObjects=i;this._numLabelObjects=this._labelObjects?this._labelObjects.length:0;this._labelsMaxWidthNeedToUpdate=true;this._labelsMaxHeightNeedToUpdate=true;this._labelObjectsNeedToUpdate=false;this._numLowerLabels=m;this._numUpperLabels=g}function nt(){if(!this._labelsMaxWidthNeedToUpdate)return;this._labelsMaxWidthNeedToUpdate=false;var t;var e=0;var i;var a;O.maxWidth=this._labelMaxWidthForYAxis;for(t=0;t<this._numLabelObjects;t++){if(void 0!==this._labelObjects[t].type){i=W(this._labelObjects[t].text);a=ot(i);e=Math.max(e,a+4)}else e=Math.max(e,U(this._labelObjects[t].text)+4);if(e>=this._labelMaxWidthForYAxis){this._labelsMaxWidth=this._labelMaxWidthForYAxis;return}}this._labelsMaxWidth=e}function st(t){if("max"===t)return Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-.5+(this.isVertical()?-.1:.1);if("min"===t)return Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-.5+(this.isVertical()?.1:-.1);return Math.floor(this._axis.getPositionOfValue(t))-.5}function rt(){var t;var e;var i;for(t=0;t<this._numLabelObjects;t+=1){e=this._labelObjects[t];i=st.call(this,e.value);e.position=i}}function ot(t){return Math.sqrt(t.width*t.width+t.height*t.height)}function lt(){if(!this._labelsMaxHeightNeedToUpdate)return;this._labelsMaxHeightNeedToUpdate=false;rt.call(this);var t;var e=0;var i;var a;this.calculateLabelWidths(this._labelObjects,this._componentWidth,this._horizontalLabelGap,this._boundaryGap,this._labelMaxWidthForXAxis);o.positionRectanglesAlongAxis(this._labelObjects,this._horizontalLabelGap,this._boundaryGap,this._componentWidth,true);for(t=0;t<this._numLabelObjects;t+=1)if(void 0!==this._labelObjects[t].type){i=W(this._labelObjects[t].text);a=ot(i);e=Math.max(e,a)}else e=Math.max(e,this._labelObjects[t].size2);this._labelsMaxHeight=e}function ct(t,e){var i=t.scaleFontSize(t.getStyle("referenceLine.label.name","fontSize"),e,null);var a=t.getStyle("referenceLine.label.name","fontFamily");var n=t.scaleFontSize(t.getStyle("referenceLine.outOfBounds","fontSize"),e,null);var s=t.getStyle("referenceLine.outOfBounds","fontFamily");var r={label:{color:t.getStyle("referenceLine.label.name","color"),font:"normal ".concat(i," ").concat(a)},outOfBounds:{color:t.getStyle("referenceLine.outOfBounds","color"),backgroundColor:t.getStyle("referenceLine.outOfBounds","backgroundColor"),font:"normal ".concat(n," ").concat(s)}};T=B("",r.label.font,0,0,Number.MAX_VALUE,1);O=B("",r.label.font,0,0,Number.MAX_VALUE,3);N=B("",r.outOfBounds.font,0,0,Number.MAX_VALUE,1);E=$("m m")-$("mm");R=$("m");return r}var ht=a["a"].extend("RefLineLabels",{init:function t(){this._super.apply(this,arguments);this.renderer=new s["a"](this.container);this._styleService=n["a"].initializeService("object.".concat(this.options.parentType||""));this._style=ct(this._styleService);this._tooltips=new A(this.container,this._styleService);this._currentProperties={};this._transitionProperties={};this.renderers={labels:this.renderer};this._$renderAreaWrap.addClass("qv-chart-component-reflinelabels");this._hasVisibleRefLines=false;this._labelMargin=4;this._labelMaxWidthForYAxis=70;this._labelMaxWidthForXAxis=100;this._labelMaxHeightForXAxis=50;this._verticaLabelGap=4;this._horizontalLabelGap=6;this._boundaryGap=4},calculateRelevantSize:function t(){this._super();at.call(this);if(this.isVertical()){nt.call(this);this.relevantSize=this._labelsMaxWidth+this._labelMargin}else{var e=this.rect.width?this.rect.width:this._axis._plotSize;if(this._componentWidth!==e){this._componentWidth=e;this._labelsMaxHeightNeedToUpdate=true}lt.call(this);this.relevantSize=this._labelsMaxHeight+this._labelMargin}},calculatePreliminaryRelevantSize:function t(){this.relevantSize=this.isVertical()?this._labelMaxWidthForYAxis:this._labelMaxHeightForXAxis},setData:function t(){this._super.apply(this,arguments);this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues();this._labelObjectsNeedToUpdate=true},setAxis:function t(e){var i=this;this._axis&&this._axis.stopListen("changed",i.invalidateDisplay,i);this._axis=e;this._axis.listen("changed",i.invalidateDisplay,i);this._labelObjectsNeedToUpdate=true},isVisible:function t(){var e=this._super.apply(this,arguments);if(!e)return false;if(this._axis&&(this._plotMinValue!==this._axis.getPlotMin()||this._plotMaxValue!==this._axis.getPlotMax())){this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues()}return this._hasVisibleRefLines},calculateLabelWidths:function t(e,i,a,n,s){var r;var o;var l;var c;var h;var u;var d;var f=e?e.length:0;if(0===f)return;for(r=0;r<f;r++){l=e[r];c=l.text;if(void 0===c||""===c)tt(l,0,0,0,0,0,void 0);else{h=$(c);u=X(c,h,s);d=G(c,u.minTextWidth);tt(l,h,u.minTextWidth,d.height,d.numLines,u.level,d)}}e.sort((function(t,e){return t.position>e.position?1:-1}));l=e[f-1];void 0!==l.text&&""!==l.text&&J(l,i-l.position-n);l=e[0];void 0!==l.text&&""!==l.text&&J(l,l.position-n);for(r=0;r<f-1;r++)if(void 0!==e[r].text&&""!==e[r].text&&void 0!==e[r+1].text&&""!==e[r+1].text)for(o=0;o<4;o++)Q(e[r],e[r+1],a)},checkIfHavingVisibleRefLines:function t(){if(!this._data||0===this._data.length||!this._axis)return false;var e;for(e=0;e<this._data.length;e+=1)if(I["a"].isVisible(this._data[e])){if("value"in this._data[e].refLineExpr&&(null===this._data[e].refLineExpr.value||Number.isNaN(+this._data[e].refLineExpr.value)))continue;return true}return false},updateLocalPlotMaxMinValues:function t(){if(this._axis){this._plotMinValue=this._axis.getPlotMin();this._plotMaxValue=this._axis.getPlotMax()}},setLabelMargin:function t(e){this._labelMargin=void 0===e?4:e},hasValidData:function t(){return this._super()&&this._data&&this._axis},paint:function t(){this._super.apply(this,arguments);this._style=ct(this._styleService);if(this._plotMinValue!==this._axis.getPlotMin()||this._plotMaxValue!==this._axis.getPlotMax()){this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues()}if(!this._hasVisibleRefLines){this._clearLabels();return}at.call(this,true);var e;var i;var a;var n;var s;var r;var l;var c;var h;var u;var d;var f;var p;var v;var m;var g;var x;var _;var y=this.isVertical()?"middle":"top"===this.dock?"bottom":"top";var b="middle";var M=this.rect.width;var w=this.rect.height;var S="top"===this.dock?w-this._labelMargin:this._labelMargin;var D=new Array(this._numLabelObjects);var A=this._labelMaxWidthForYAxis;var L=this._style.label.font;var P="top"===this.dock?(w-this._labelMargin)/2:(w+this._labelMargin)/2;if(this.yMirrorMode){c=.7;h=.3;u=M/2-(this._labelMargin/2+1)}else{c=.3;h=.7;u=M/2+this._labelMargin/2+1}var I=u;for(e=0;e<this._numLabelObjects;e+=1){x=this._labelObjects[e];i=x.index;a=st.call(this,x.value);if(this.isVertical()){n=u;s=a}else{n=a;s=void 0!==x.type?P:S}d=i>-1?H(this._data[i],this._style.label.color):this._style.label.color;if(void 0!==x.type){L=this._style.outOfBounds.font;_=b;d=this._style.outOfBounds.color}else{L=this._style.label.font;_=y}f=new k["a"];f.fill=d;f.x=n;f.y=s;f.align=V;f.baseline=_;f.font=L;f.maxWidth=A;f.maxHeight=92;f.maxNumLines=3;f.ellipsis="… ".concat(x.text2);f.setText(x.text);D[e]=f;x.position=a;x.shapeWrapper=f}if(0===this._numLabelObjects){this._clearLabels();return}if(this.isVertical()){j(this._labelObjects);if(this._numUpperLabels>0){a=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-.7;this._labelObjects.push({position:a,size:F})}if(this._numLowerLabels>0){a=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-.3;this._labelObjects.push({position:a,size:F})}o.positionRectanglesAlongAxis(this._labelObjects,this._verticaLabelGap,this._boundaryGap,this.rect.height,false);for(e=this._labelObjects.length-1;e>-1;e--)void 0===this._labelObjects[e].shapeWrapper&&this._labelObjects.splice(e,1);for(e=0;e<this._numLabelObjects;e+=1){x=this._labelObjects[e];p=x.shapeWrapper;p.y=x.newPosition;if(1===x.type){v=x.shapeWrapper.measure();m={cx:p.x,cy:p.y,r:ot(v)/2}}if(-1===x.type){v=x.shapeWrapper.measure();g={cx:p.x,cy:p.y,r:ot(v)/2}}}}else{this.calculateLabelWidths(this._labelObjects,this.rect.width,this._horizontalLabelGap,this._boundaryGap,this._labelMaxWidthForXAxis);if(this._numUpperLabels>0){a=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-c;this._labelObjects.push({position:a,size:F})}if(this._numLowerLabels>0){a=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-h;this._labelObjects.push({position:a,size:F})}o.positionRectanglesAlongAxis(this._labelObjects,this._horizontalLabelGap,this._boundaryGap,this.rect.width,false);for(e=this._labelObjects.length-1;e>-1;e--)void 0===this._labelObjects[e].shapeWrapper&&this._labelObjects.splice(e,1);for(e=0;e<this._numLabelObjects;e+=1){x=this._labelObjects[e];p=x.shapeWrapper;p.x=x.newPosition;p.maxWidth=x.size;if(1===x.type){v=x.shapeWrapper.measure();m={cx:p.x,cy:P,r:ot(v)/2}}if(-1===x.type){v=x.shapeWrapper.measure();g={cx:p.x,cy:P,r:ot(v)/2}}}}if(this._numLowerLabels>0){if(this.isVertical())f=new q["a"]([{x:I-3,y:w-5.2},{x:I,y:w},{x:I+3,y:w-5.2}]);else{r=this.yMirrorMode?M-5.2:5.2;l=this.yMirrorMode?M:0;f=new q["a"]([{x:r,y:P-3},{x:l,y:P},{x:r,y:P+3}])}f.fill=this._style.label.color;D.push(f);f=new C["a"](g.cx,g.cy,g.r);f.fill=this._style.outOfBounds.backgroundColor;D.splice(0,0,f)}if(this._numUpperLabels>0){if(this.isVertical())f=new q["a"]([{x:I-3,y:5.2},{x:I,y:0},{x:I+3,y:5.2}]);else{r=this.yMirrorMode?5.2:M-5.2;l=this.yMirrorMode?0:M;f=new q["a"]([{x:r,y:P-3},{x:l,y:P},{x:r,y:P+3}])}f.fill=this._style.label.color;D.push(f);f=new C["a"](m.cx,m.cy,m.r);f.fill=this._style.outOfBounds.backgroundColor;D.splice(0,0,f)}this.renderer.stage.removeChildren();this.renderer.stage.addChildren(D);this.renderer.render();this._tooltips.setLabelObjects(this._labelObjects)},release:function t(){this._super();this._axis&&this._axis.stopListen("changed",null,this);this._tooltips.release();this._tooltips=null},on:function t(){this._super();this._tooltips.on()},off:function t(){this._super();this._tooltips.off()},_updateProperties:function t(){if(!this._data)return;var e=this._data;var i=e.length;var a;var n;for(n=0;n<i;n++){a="value".concat(n);this._transitionProperties[a]=e[n].refLineExpr.value}this.calculateRelevantSize();this._super()},_clearLabels:function t(){this.renderer.stage.removeChildren();this.renderer.clear()}});var ut=e["a"]=ht},"022E":function(t,e,i){"use strict";var a=i("NWoE");e["a"]={displayObject:a["a"],render:function t(e,i,a){e.beginPath();e.moveTo(this.cx+this.r,this.cy);e.arc(this.cx,this.cy,this.r,0,2*Math.PI,false);i&&e.fill();a&&e.stroke()}}},"0GN8":function(t,e,i){"use strict";function a(t){return t.replace(/^=+/,"")}function n(t,e){s(t,e);t.description?t.validity.description=t.description.length<=e.description:t.validity.description=true;return t.validity.name&&t.validity.description}function s(t,e){t.validity.name=!!t.name&&!!t.name.trim()&&t.name.length<=e.name;return t.validity.name}function r(t,e){var i=t.expression;var n="string"===typeof i&&i.trim().length>0&&i.length<=e.expression;i&&(t.expression=a(i));t.validity.expression=n;return n}function o(t){var e=t.selectedFields;var i=false;if(!e)return false;"single"===t.type?i=1===e.length:"drilldown"===t.type&&(i=e.length>1);t.validity.selectedFields=i;return i}e["a"]={validateMetadata:n,validateMetadataName:s,validateExpr:r,validateFieldsInDimension:o}},"0vQd":function(t,e,i){"use strict";var a=i("SOxp");var n=a["a"].extend("Node",{init:function t(){this._parent=null;this._children=[];this._ancestors=null;this.data={}},detach:function t(){this._parent&&this._parent.removeChild(this);return this},each:function t(e,i){if("function"!==typeof e||!this._children||!this._children.length)return this;var a;var n=this._children.length;for(a=0;a<n;a++){e.call(i,this._children[a],a);this._children[a].isBranch&&this._children[a].each(e,i)}return this}});Object.defineProperties(n.prototype,{parent:{get:function t(){return this._parent}},isBranch:{get:function t(){return this._children&&this._children.length}},children:{get:function t(){return this._children}},siblings:{get:function t(){if(!this._parent)return[];var e=this._parent._children.slice();e.splice(e.indexOf(this),1);return e}},ancestors:{get:function t(){if(!this._ancestors){var e=this._parent;this._ancestors=e?[e].concat(e.ancestors):[]}return this._ancestors}},descendants:{get:function t(){var e=[];var i;var a;var n;for(i=0,a=this._children.length;i<a;i++){n=this._children[i];e.push(n);n._children.length&&(e=e.concat(n.descendants))}return e}},leaves:{get:function t(){var e=[];var i;var a;var n=this._children.length;for(a=0;a<n;a++){i=this._children[a];i._children&&i._children.length?e=e.concat(i.leaves):e.push(i)}return e}}});e["a"]=n},"26xU":function(t,e,i){"use strict";var a=i("2Hli");var n=i("pRem");var s=i("6uJb");var r=i("acVu");function o(t,e){var i=e.getMeasures();var n=a["a"].getValue(t,"color.mode");"byDimension"===n&&1===i.length&&"line"===a["a"].getValue(i[0].qDef,"series.type")?a["a"].setValue(t,"color.mode","primary"):"byDimension"===n&&i.length>1&&a["a"].setValue(t,"color.mode","byMultiple")}function l(t,e){var i=0===e.indexOf(t);i||(t.qDef.series={axis:1,type:"line"})}function c(t){n["a"].setCustomTooltipAttrs(t);n["a"].unquarantineCustomTooltipAttrs(t)}function h(t){if(t.qHyperCubeDef.qDimensions.length>0){n["a"].setCustomTooltipAttrs(t);n["a"].unquarantineCustomTooltipAttrs(t)}}function u(t,e){n["a"].quarantineCustomTooltipAttrs(t,e)}function d(t,e){n["a"].quarantineCustomTooltipAttrs(t,e);n["a"].setCustomTooltipAttrs(t);n["a"].unquarantineCustomTooltipAttrs(t)}e["a"]={dimensions:{min:1,max:1,description:function t(e){var i=e.qHyperCubeDef.qMeasures;var a=[0,0,0];var n;var r=["Visualizations.Descriptions.Marker","Visualizations.Descriptions.Line","Visualizations.Descriptions.ComboChart.Dimension.LineMarker","Visualizations.Descriptions.Bars","Visualizations.Descriptions.ComboChart.Dimension.BarMarker","Visualizations.Descriptions.ComboChart.Dimension.BarLine","Visualizations.Descriptions.ComboChart.Dimension.BarLineMarker"];if(!i.length)return s["default"].get("Visualizations.Descriptions.Bars");for(var o=0;o<i.length;++o){n=i[o].qDef.series.type;"bar"===n?a[0]=1:"line"===n?a[1]=1:a[2]=1}var l=r[parseInt(a.join(""),2)-1];return s["default"].get(l)},add:function t(e,i,a){o(i,a);Object(r["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&c(i)},move:function t(e,i,a){o(i,a);Object(r["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&h(i)},remove:function t(e,i){Object(r["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&u(i,e)},replace:function t(e,i,a,n){Object(r["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&d(n,i)}},measures:{min:1,max:15,description:function t(e,i){var a;var n=e.qHyperCubeDef.qMeasures[i];if(n){var r=n.qDef.series.type;a="line"===r?"Visualizations.Descriptions.HeightLine":"bar"===r?"Visualizations.Descriptions.ComboChart.Measure.HeightBar":"Visualizations.Descriptions.ComboChart.Measure.HeightMarker"}else a="Visualizations.Descriptions.HeightBars";return s["default"].get(a)},add:function t(e,i,a){o(i,a);l(e,i.qHyperCubeDef.qMeasures)},move:function t(e,i,a){o(i,a)},replace:function t(e,i){i.qDef.series&&(e.qDef.series.type=i.qDef.series.type||"bar")}}}},"3I2r":function(t,e,i){"use strict";var a=i("+GbC");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function r(t,e,i){e&&s(t.prototype,e);i&&s(t,i);return t}var o={Expression:0,NumberOrExpression:1};var l=function(){function t(e,i){n(this,t);this.currentExpr=null;this.nextExpr=null;this.hasOutstandingCall=false;this.app=e;this.mode=i||o.Expression;a["a"].create(this,"Update")}r(t,[{key:"onResponse",value:function t(e){var i;this.hasOutstandingCall=false;if(this.nextExpr){i=this.nextExpr;var a=this.nextLabels;this.nextExpr=null;this.nextLabels=null;this.callEngine(i,a)}else{i=this.currentExpr;var n=!e.qErrorMsg&&0===e.qBadFieldNames.length;for(var s=0;s<e.qBadFieldNames.length;s++){var r=e.qBadFieldNames[s];r.name=i.substr(r.qFrom||0,r.qCount)}this.Update.emit({valid:n,data:{error:e.qErrorMsg,bad:e.qBadFieldNames}})}}},{key:"callEngine",value:function t(e,i){var a=this;if(this.hasOutstandingCall)throw new Error("Invalid state");this.currentExpr=e;this.hasOutstandingCall=true;var n;n=this.mode===o.NumberOrExpression?this.app.checkNumberOrExpression(e):this.app.checkExpression(e,i||[]);n.then((function(t){a.onResponse(t)}),(function(){a.onResponse({qErrorMsg:"Error",qBadFieldNames:[]})}))}},{key:"validate",value:function t(e,i){if(this.hasOutstandingCall){this.nextExpr=e;this.nextLabels=i}else this.app&&this.callEngine(e,i)}}]);return t}();e["a"]={ExpressionValidator:l,Modes:o}},"3r60":function(t,e,i){"use strict";var a=i("4nJ1");var n=i("BcSl");var s=i("acVu");function r(t,e){var i=a["a"].getValue(t,"tooltip.data.qHyperCubeDef.qMeasures",[]);if(i.length>0&&e.length)return true;return false}function o(t,e){var i=a["a"].getValue(t,"tooltip.data.qHyperCube.qMeasureInfo",[]);if(i.length>0&&e.length>0)return true;return false}function l(t,e){var i=e.qMeasures;return t.concat(i.map((function(t){var e=n["a"].CUSTOM.EXPRESSION;var i=t.qDef,a=i.qNumFormat,s=i.qLabel,r=i.qLabelExpression,o=i.cId;return t.qLibraryId?{qLibraryId:t.qLibraryId,id:e,qNumFormat:a,qLabel:s,qLabelExpression:r,cId:o}:{qExpression:t.qDef.qDef,id:e,qNumFormat:a,qLabel:s,qLabelExpression:r,cId:o}})))}function c(t){if(t.length>0){var e=t.length-1;return a["a"].getValue(t,"".concat(e,".qAttributeExpressions"),[])}return[]}function h(t,e){var i=a["a"].getValue(t,"qHyperCubeDef.qDimensions",[]);if(i.length>0){var n=i.length-1;t.qHyperCubeDef.qDimensions[n].qAttributeExpressions=e}}function u(t){var e=a["a"].getValue(t,"tooltip");var i=a["a"].getValue(t,"qHyperCubeDef.qDimensions",[]);if(Object(s["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&e&&r(t,i)){var n=e.data.qHyperCubeDef;var o=c(i);o=l(o,n);h(t,o);delete e.data}return t}function d(t,e){var i=a["a"].getValue(e,"qHyperCube.qDimensionInfo",[]);Object(s["b"])("CUSTOM_TOOLTIP_REMOVE_LIMITS")&&o(e,i)&&t&&t.model&&t.model.getEffectiveProperties&&t.model.getEffectiveProperties().then((function(e){t.model.setProperties(e);t.model.app.clearUndoBuffer()}))}e["a"]={migrateProperties:u,updateProperties:d,checkLayoutForBackwardCompatibility:o,checkPropertiesForBackwardCompatibility:r}},"3x6l":function(t,e,i){"use strict";var a=i("nHjU");var n=i("UV1h");var s=i("ohbW");var r=i("gapF");function o(t){return Number(void 0!==t.value?t.value:t)}function l(t,e){if(!t||!t.paletteColor&&!t.color)return e;if(t.paletteColor)return n["a"].resolveColor(t.paletteColor);return n["a"].resolveColor(t.color,n["a"].deprecatedPalette)}function c(){if(!this._numRefLinesDataAxes||!this._numAxes)return false;var t;var e;var i;var a;var n;var s;var l;for(t=0;t<this._numAxes;t+=1){i=this._axes[t];s=i.getPlotMin();l=i.getPlotMax();this._axisPlotMinValues[t]=s;this._axisPlotMaxValues[t]=l;a=this._data[t]||[];for(e=0;e<a.length;e+=1){n=o(a[e].refLineExpr);if(r["a"].isVisible(a[e])&&null!==n&&!Number.isNaN(+n)&&n>=s&&n<=l)return true}}return false}function h(){var t;var e;var i;var a;for(t=0;t<this._numAxes;t+=1){e=this._axes[t];i=e.getPlotMin();a=e.getPlotMax();if(this._axisPlotMinValues[t]!==i||this._axisPlotMaxValues[t]!==a)return true}return false}function u(){var t;var e;for(t=0;t<this._numAxes;t+=1){e=this._axes[t];this._axisPlotMinValues[t]=e.getPlotMin();this._axisPlotMaxValues[t]=e.getPlotMax()}}var d=a["a"].extend("RefLines",{init:function t(){this._super.apply(this,arguments);this.renderer=new s["a"](this.container);this.renderer.edgeBleed={top:1,left:1,right:0,bottom:0};this._$renderAreaWrap.addClass("qv-chart-component-reflines");this._hasVisibleRefLines=false;this._styleService=n["a"].initializeService("object.".concat(this.options.parentType));this._numAxes=0;this.renderers={lines:this.renderer}},setData:function t(){this._super.apply(this,arguments);this._numRefLinesDataAxes=void 0===this._data?0:this._data.length;this._hasVisibleRefLines=c.call(this);u.call(this)},setAxes:function t(e){var i=this;this._axes&&this._axes.forEach((function(t){t.stopListen("changed",i.invalidateDisplay,i)}));this._axes=e;this._axes.forEach((function(t){t.listen("changed",i.invalidateDisplay,i)}));this._numAxes=void 0===e?0:e.length;void 0!==this._axisPlotMinValues&&this._axisPlotMinValues.length===this._numAxes||(this._axisPlotMinValues=new Array(this._numAxes));void 0!==this._axisPlotMaxValues&&this._axisPlotMaxValues.length===this._numAxes||(this._axisPlotMaxValues=new Array(this._numAxes))},isVisible:function t(){var e=this._super.apply(this,arguments);if(!e||!this._numAxes||!this._numRefLinesDataAxes)return false;return true},hasValidData:function t(){return this._super()&&this._numRefLinesDataAxes&&this._numAxes},paint:function t(){var e=this._styleService.getStyle("referenceLine.label.name","color");this._super.apply(this,[].slice.call(arguments));if(h.call(this)){this._hasVisibleRefLines=c.call(this);u.call(this)}if(!this._hasVisibleRefLines){this.renderer.shapes=[];this.renderer.clear();return}var i;var a;var n;var s;var o;var d;var f;var p;var v;var m;var g;var x;var _;var y=[];for(i=0;i<this._numRefLinesDataAxes;i+=1){n=this._data[i];s=this._axes[i];o=this._axisPlotMinValues[i];d=this._axisPlotMaxValues[i];for(a=0;a<n.length;a+=1){var b,M;if(!r["a"].isVisible(n[a]))continue;f=this._currentProperties["value".concat(i).concat(a)];if(null===f||Number.isNaN(+f)||f>d||f<o)continue;p=s.getPositionOfValue(f);p=Math.floor(p)-.5;if(s.isVertical()){v=0;m=p;g=this.rect.width;x=p}else{v=p;m=0;g=p;x=this.rect.height}_=l(n[a],e);y.push({type:"line",stroke:_,strokeWidth:1,strokeDasharray:(null===(b=n[a])||void 0===b||null===(M=b.style)||void 0===M?void 0:M.lineType)?n[a].style.lineType.split(" "):void 0,shape:{x1:v,y1:m,x2:g,y2:x}})}}this.renderer.shapes=y;this.renderer.render()},_updateProperties:function t(){if(!this._data)return;var e=this._data;var i=e.length;var a;var n;for(a=0;a<i;a++)if(void 0!==e[a])for(n=0;n<e[a].length;n++)this._transitionProperties["value".concat(a).concat(n)]=e[a][n].refLineExpr.value;this._super()}});e["a"]=d},"45bU":function(t,e,i){"use strict";var a=i("PX8M");var n=i("4nJ1");var s=i("sWge");var r="ColorMapModel_";function o(t){var e=null;return t.getLayout().then((function(t){t.colorMap&&(e=t.colorMap);return e?n["a"].extend(true,{},e):null}))}function l(t,e){var i=n["a"].extend(true,{},e);return t.getProperties().then((function(e){if(e.colorMap){e.colorMap=i;return t.setProperties(e)}return}))}e["a"]={getColorMap:function t(e,i){var n;n=i?s["a"].resolve(i):a["a"].getApp();if(!e)return s["a"].resolve(null);return n.then((function(t){return t.getObject((r+e).toString()).then((function(t){return o(t)}))})).catch((function(){return null}))},setColorMap:function t(e,i){var n=(r+e).toString();return a["a"].getApp().then((function(t){return t.getObject(n).catch((function(){return t.createObject({qInfo:{qType:"ColorMap",qId:n},colorMap:{}})})).then((function(t){return l(t,i)}))}))},deleteColorMap:function t(e){return a["a"].getApp().then((function(t){return t.destroyObject((r+e).toString())}))},getTemplate:function t(){return{colors:[],nul:null,oth:null,pal:null,single:null,usePal:null,autoFill:true}},getMeasureGradient:function t(e,i){var n;n=i?s["a"].resolve(i):a["a"].getApp();return n.then((function(t){return t.getMeasure(e).then((function(t){return t.getProperties().then((function(t){if(t&&t.qMeasure&&t.qMeasure.coloring)return t.qMeasure.coloring.gradient;return}))}))})).catch((function(){return null}))}}},"6eqC":function(t,e,i){"use strict";var a=i("Nc9l");var n=i("AaFn");var s=i("DWZC");var r=i("P8Hz");var o=i("4nJ1");function l(t,e,i,a){var s=new n["a"];s.text=t;s.title=e;s.id=i;s.idx=a;return s}function c(t,e){var i=new n["a"];var a;i.data.qApprMaxGlyphCount=0;for(a in e)i.data[a]=e[a];t&&t.addChild(i);return i}function h(t,e){return t.labelExpRef?o["a"].getValue(e,t.labelExpRef):t.label}var u=a["a"].extend({init:function t(e){this._super();this._properties={};e&&this.refresh(e)},refresh:function t(e){this._data=e;this._qDataObject=e.qHyperCube?e.qHyperCube:e.qListObject;var i;if("K"===this._qDataObject.qMode&&this._qDataObject.qStackedDataPages&&this._qDataObject.qStackedDataPages.length>0)i=this._generatePivotTree();else{if(!("S"===this._qDataObject.qMode&&this._qDataObject.qDataPages&&this._qDataObject.qDataPages.length>0))return;i=this._generateDimensionTree()}this._dimensionTree=i?i.dimensionTree:null;this._cacheItems=i?i.cacheItems:null;this.fire("dimensionTreeChanged")},bindProperty:function t(){throw new Error("ChartContext bindProperty: Deprecated")},unBindProperty:function t(){throw new Error("ChartContext unBindProperty: Deprecated")},releaseAll:function t(){throw new Error("ChartContext releaseAll: Deprecated")},release:function t(){this._data=null;this._dimensionTree=null;this._cacheItems=null;this._qDataObject=null},_generateDimensionTree:function t(){var e=l();var i=this.getDataMatrix();var a=this._qDataObject;var o=a.qMeasureInfo;var u=a.qDimensionInfo;var d=a.qDataPages[0].qArea.qTop;var f=a.qDataPages[0].qTails;var p=o.length;var v=u.length;var m=i&&i[0]?i[0].length:0;var g;var x;var _;var y;var b;var M;var w;var S;var D;var A;var k=[];var C;var q=[];var L;var P;var I=this;S=0;for(w=0;w<v;w++)if(!u[w].qError){k[S]=w;S++}v=S;if(0===v)return null;var T=function t(e,i){for(var a=0;a<e.length;a++)if(e[a].data.qElemNo===i)return a;return-1};for(w=0;w<i.length;w++){g=i[w];y=e;var O=[];var N=[];var E=[];for(S=0;S<v;S++){x=g[S];_=u[k[S]];if(!x)return;A=x.qIsOtherCell?void 0===y.data.othersIndex?-1:y.data.othersIndex:T(y.children,x.qElemNumber);if(-1===A){b=c(y,{qElemNo:g[S].qElemNumber,qText:g[S].qText,rowIndex:d+w,type:"dimension"});b.data.qNum=g[S].qNum;if(x.qIsOtherCell){b.data.qIsOtherCell=true;b.data.qText=_.othersLabel||""}x.qIsTotalCell&&(b.data.qIsTotalCell=true);y.data.qApprMaxGlyphCount=_.qApprMaxGlyphCount;x.qIsOtherCell&&(y.data.othersIndex=y.children.length-1);C=new r["a"]([b.data.qText],null,null,null,d+w,S,b.data.qElemNo);x.qAttrDims&&_.qAttrDimInfo&&_.qAttrDimInfo.length&&x.qAttrDims.qValues.forEach((function(t,e){C.addAttributeDimension(t.qElemNo,t.qText,h(_.qAttrDimInfo[e],I._data))}));if(_.qAttrExprInfo&&_.qAttrExprInfo.length){var R=s["a"].retrieveAttrExpsValues(x.qAttrExps,_,I._data),V=R.customTooltipAttrExpsArr,z=R.customTooltipInfoAttrExpsArr,F=R.attributeExpressionArr;N=N.concat(V);E=E.concat(z);O=O.concat(F)}if(y.cacheItem){C.parent=y.cacheItem;C.parent.children.push(C);L=C.parent.getDimensions();for(P in L)C.addDimension(L[P])}b.cacheItem=C;y=b}else y=y.children[A]}C=y.cacheItem;q.push(C);for(D=0;D<p&&v+D<m;D++){b=c(y,{qText:o[D].qFallbackTitle,qNum:g[v+D].qNum,rowIndex:d+w,type:"measure"});y.data.qApprMaxGlyphCount=Math.max(y.qApprMaxGlyphCount,o[D].qApprMaxGlyphCount);C.addMeasure(b.data.qText,b.data.qNum,g[v+D].qText);M=new n["a"];M.data={qText:g[v+D].qText,qNum:g[v+D].qNum,qElemNo:g[v+D].qElemNumber,qState:g[v+D].qState};b.addChild(M)}O.forEach((function(t){C.addMeasure(t.label,t.value)}));N.forEach((function(t){C.addCustomTooltipAttribute(t)}));E.forEach((function(t){C.addCustomTooltipInfoAttributes(t)}))}f&&f[0]&&(f[0].qUp>0||f[0].qDown>0)&&(e.children[e.children.length-1].incomplete=true);return{dimensionTree:e,cacheItems:q}},_generatePivotTree:function t(){return s["a"].prepareData(this._qDataObject.qStackedDataPages[0].qData,this._qDataObject.qMeasureInfo,this._qDataObject.qDimensionInfo,this._data)},_extractProperties:function t(){throw new Error("ChartContext _extractProperties: Deprecated")},_updateProperty:function t(){throw new Error("ChartContext _updateProperty: Deprecated")},getDataMatrix:function t(){return this._qDataObject.qDataPages[0].qMatrix},getDimensionTree:function t(){return this._dimensionTree},getCacheItems:function t(){return this._cacheItems}});e["a"]=u},"7xSA":function(t,e,i){"use strict";var a=i("WwCo");var n=i("HBwF");var s=i("sYQE");var r=Math.log(10);var o=1e-12;var l=Math.log(3)/r;var c=[[2,4,6],[2,4],[3]];var h=[,[,,[[1,2]],[[1,2,3],[1,3]],[[1,2,4],[1,4]],[[1,2,4],[1,5]],[[1,2,4,6],[2,4,6],[1,3,6],[1,6]],[[1,2,4,6],[2,4,6],[1,3,6],[1,7]],[[1,2,4,8],[2,4,8],[1,8]],[[1,2,4,8],[2,4,8],[1,3,9],[1,9]],[[1,2,4,6,10],[1,2,4,10],[1,3,10],[3,10],[1,10]]],[,,,[[2,3]],[[2,3,4],[2,4]],[[2,3,4],[2,4],[2,5]],[[2,4,6],[2,6]],[[2,4,6],[2,6],[2,7]],[[2,4,8],[2,8]],[[2,4,8],[2,8],[2,9]],[[2,4,6,10],[2,4,10],[5,10],[3,10]]],[,,,,[[3,4]],[[3,4,5],[3,5]],[[3,4,5,6],[3,6]],[[3,4,5,6],[3,5,7],[3,7]],[[3,4,5,6,8],[3,5,7],[4,8],[3,8]],[[3,4,5,6,8],[3,4,6,9],[3,4,6,8],[3,6,9],[4,8],[3,9]],[[4,6,10],[5,10],[3,10]]],[,,,,,[[4,5]],[[4,5,6],[4,6]],[[4,5,6,7],[4,5,6],[4,6]],[[4,5,6,7,8],[4,5,6,7],[4,6,8],[4,8]],[[4,5,6,7,8],[4,6,9],[4,6,8],[4,8]],[[4,6,10],[5,7,9],[5,10],[4,10]]],[,,,,,,[[5,6]],[[5,6,7],[5,7]],[[5,6,7,8],[5,6,7],[6,8]],[[5,6,7,8,9],[5,6,7,8],[5,7,9],[5,9]],[[6,8,10],[5,10]]],[,,,,,,,[[6,7]],[[6,7,8],[6,8]],[[6,7,8,9],[6,7,8],[6,9]],[[6,7,8,9,10],[6,8,10],[6,10]]],[,,,,,,,,[[7,8]],[[7,8,9],[7,9]],[[7,8,9,10],[8,10],[7,10],[7,9]]],[,,,,,,,,,[[8,9]],[[8,9,10],[8,10]]],[,,,,,,,,,,[[9,10]]]];var u=[,[,,[1,2],[1,3],[1,4],[1,5,1,6],[1,6],[1,10,1,8,1,7],[1,8,1,10],[1,10,1,9]],[,,,[2,3],[2,4],[2,6,2,5],[2,6,2,8],[2,8,2,7],[2,8,1,10],[1,10,2,10,2,9],[1,10,2,10]],[,,,,[3,4,2,4],[3,6,3,5],[3,6,2,6],[2,8,3,8,3,7],[2,8,3,8,3,9],[2,10,3,10,3,9]],[,,,,,[4,5,4,6,3,5],[4,6],[4,8,4,7],[4,8],[4,10,4,9,3,9],[4,10]],[,,,,,[5,6,4,6],[5,7,4,8],[4,8,5,8,5,10],[5,10,4,10,5,9],[5,10,4,10]],[,,,,,,[6,7,6,8],[6,8],[6,10,5,10,6,9],[6,10,5,10]],[,,,,,,,[7,8,6,8],[7,9,6,10],[6,10,7,10]],[,,,,,,,,[8,10,8,9],[8,10]],[,,,,,,,,,[9,10]]];function d(t,e,i){var a=t?t.length:0;var n;var s=void 0===e?Number.MAX_VALUE:t[0]/e;for(n=1;n<a;n++)s=Math.min(s,t[n]/t[n-1]);void 0!==i&&(s=Math.min(s,i/t[a-1]));t.splice(0,0,s)}function f(t,e,i){var a;var n=t?t.length:0;for(a=0;a<n;a++)d(t[a],e,i)}function p(){var t;var e;f(c,1,10);for(t=0;t<h.length;t++)if(h[t])for(e=0;e<h[t].length;e++)h[t][e]instanceof Array&&f(h[t][e])}p();function v(){var t=true;var e=0;var i;var a;var n;var s;var r;var o=this.tickDataSpacingLog;var l=0;while(t&&e<5){o=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*o);i=this.minIsStrict?Math.ceil(this.usedDataMinLog/o):Math.floor(this.usedDataMinLog/o);a=this.maxIsStrict?Math.floor(this.usedDataMaxLog/o):Math.ceil(this.usedDataMaxLog/o);n=this.minIsStrict?this.explicitPlotMinLog:i*o;s=this.maxIsStrict?this.explicitPlotMaxLog:a*o;r=s-n;t=o/r*this.plotSize<this.minTickSpacingInPixel;e++}if(t){o=Math.ceil(this.tickDataSpacingLog);i=this.minIsStrict?Math.ceil(this.usedDataMinLog/o):Math.floor(this.usedDataMinLog/o);a=this.maxIsStrict?Math.floor(this.usedDataMaxLog/o):Math.ceil(this.usedDataMaxLog/o);n=this.minIsStrict?this.explicitPlotMinLog:i*o;s=this.maxIsStrict?this.explicitPlotMaxLog:a*o}return{plotMinLog:n,plotMaxLog:s,tickMinIndex:i,tickMaxIndex:a,tickDataSpacingNNLog:o,tickBaseValueLog:l,success:!t}}function m(){var t=true;var e=0;var i;var a;var n;var s;var r;var o;i=this.tickDataSpacingLog;a=0;var l=this.usedDataMinLogFloor;while(t&&e<5){i=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*i);a=this.minIsStrict?Math.ceil((this.usedDataMinLog-l)/i):Math.floor((this.usedDataMinLog-l)/i);n=this.maxIsStrict?Math.floor((this.usedDataMaxLog-l)/i):Math.ceil((this.usedDataMaxLog-l)/i);s=this.minIsStrict?this.explicitPlotMinLog:a*i+l;r=this.maxIsStrict?this.explicitPlotMaxLog:n*i+l;o=r-s;t=i/o*this.plotSize<this.minTickSpacingInPixel;e++}if(t){i=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*i);a=this.minIsStrict?Math.ceil((this.usedDataMinLog-l)/i):Math.floor((this.usedDataMinLog-l)/i);n=this.maxIsStrict?Math.floor((this.usedDataMaxLog-l)/i):Math.ceil((this.usedDataMaxLog-l)/i);s=this.minIsStrict?this.explicitPlotMinLog:a*i+l;r=this.maxIsStrict?this.explicitPlotMaxLog:n*i+l}return{plotMinLog:s,plotMaxLog:r,tickMinIndex:a,tickMaxIndex:n,tickDataSpacingNNLog:i,tickBaseValueLog:l,success:!t}}function g(){var t;var e=m.call(this);if(!e.success){t=v.call(this);return t}var i=this.usedDataMaxLog-this.usedDataMinLog;var a=i/(e.plotMaxLog-e.plotMinLog);if(1===a)return e;t=v.call(this);if(!t.success)return e;var n=i/(t.plotMaxLog-t.plotMinLog);var s=t.tickMaxIndex-t.tickMinIndex;var r=e.tickMaxIndex-e.tickMinIndex;if(r>s||r===s&&a>n||r===s&&a===n&&e.plotMinLog<t.plotMinLog)return e;return t}function x(t,e,i,a,n){var r=s["a"].getNiceNumber(1.1*n);var o=t?Math.ceil(i/r):Math.floor(i/r);var l=e?Math.floor(a/r):Math.ceil(a/r);var c=t||0===o?i:o*r;var h=e?a:l*r;return{plotMin:c,plotMax:h,tickSpacing:r,tickBaseValue:0}}function _(t,e){var i;for(i=0;i<t.length;i++)if(t[i]>=e)return i-1;return-1}function y(t,e){var i;for(i=t.length-1;i>=0;i--)if(t[i]<=e)return i+1;return-1}function b(t,e,i,a,n){var s;var r;s=_(t,e);r=y(t,i);!a&&void 0!==t[s+1]&&t[s+1]>e&&(s-=1);!n&&r>0&&void 0!==t[r-1]&&t[r-1]<i&&(r+=1);r<t.length&&t.splice(r,t.length-r);s>=0&&t.splice(0,s+1)}function M(t,e,i,a){var n;var r=Number.MAX_VALUE;var l=-Number.MAX_VALUE;var c;var h=s["a"].log10(i);var u=s["a"].log10(e);var d=h-u;var f=t?t.length:0;var p=new Array(f);(null===a||Number.isNaN(+a))&&(a=1.71);for(n=0;n<f;n++)p[n]=s["a"].log10(t[n]);for(n=1;n<f;n++){c=p[n]-p[n-1];r=Math.min(r,c);l=Math.max(l,c)}l=Math.max(l,Math.abs(p[0]-u));l=Math.max(l,Math.abs(h-p[f-1]));return r/d*this.plotSize>=this.minTickSpacingInPixel-o&&l/r<=a&&t.length-1<=this.maxNumIntervals}function w(t){var e;var i=Number.MAX_VALUE;var a=-Number.MAX_VALUE;var n;var r=t.mainTickValues;var o=r?r.length:0;var l=new Array(o);for(e=0;e<o;e++)l[e]=s["a"].log10(r[e]);for(e=1;e<o;e++){n=l[e]-l[e-1];i=Math.min(i,n);a=Math.max(a,n)}t.maxTickSpacing=a;t.minTickSpacing=i;t.tickSpacingRatio=a/i;t.spaceUseFactor=this.usedDataRange/(t.plotMax-t.plotMin);t.factor=t.spaceUseFactor/(t.tickSpacingRatio*t.tickSpacingRatio)}function S(t,e,i,a,n){var r;var o;var l;var c;var h=(a+i)/2;if(void 0===n){r=Math.round(h);if(r>=i&&r<=a)return Math.pow(10,r);o=Math.floor(h);if(o>=i&&o<=a)return Math.pow(10,o);l=Math.ceil(h);if(l>=i&&l<=a)return Math.pow(10,l);c=s["a"].getSmallNiceNumber(Math.max(1,e-t));return Math.ceil(t/c)*c}o=Math.pow(10,Math.floor(h));l=Math.pow(10,Math.ceil(h));if(Math.abs(o-n)<Math.abs(l-n))return o;return l}function D(t,e,i,a,n,s){var r=n?Math.ceil((t-i)/a):Math.floor((t-i)/a);var o=s?Math.floor((e-i)/a):Math.ceil((e-i)/a);var l;var c;var h=[];for(l=r;l<=o;l++){c=l*a+i;c>0&&h.push(l*a+i)}return h}function A(t,e,i,a){t.mainTickValues=e;t.plotMin=i;t.plotMax=a}function k(){if(this.usedDataMax>=10*this.usedDataMin)return 1;if(this.usedDataMaxLogFloor===this.usedDataMinLogFloor){if(this.maxIsStrict&&this.minIsStrict)return 2;return 3}return 1}function C(t){t.sort((function(t,e){return t-e}))}function q(t,e,i,a,n,s,r){var l=0;var c;var h;var u;var d;var f;var p;var v=[];for(l=0;l<t.length;l++)if(e<=t[l][0]+o){d=i.concat();for(c=a;c<n;c++)for(h=1;h<t[l].length;h++)d.push(t[l][h]*Math.pow(10,c*s+r));C(d);b(d,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);f=this.minIsStrict?this.explicitPlotMin:d[0];p=this.maxIsStrict?this.explicitPlotMax:d[d.length-1];M.apply(this,[d,f,p])&&v.push({mainTickValues:d,plotMin:f,plotMax:p})}if(0===v.length){d=i;b(d,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);f=this.minIsStrict?this.explicitPlotMin:d[0];p=this.maxIsStrict?this.explicitPlotMax:d[d.length-1];return{mainTickValues:d,plotMin:f,plotMax:p}}if(1===v.length)return v[0];var m=i.length-1;for(l=0;l<v.length;l++){u=v[l].mainTickValues.length-1;if(v[l].mainTickValues[0]===i[0]&&v[l].mainTickValues[u]===i[m])return v[l]}return v[0]}function L(t,e){var i=true;var a=Math.ceil(this.fractionMinLog);var n=Math.floor(this.fractionMaxLog);var s=0;var r;var l;var c;var h;if(t[a]&&t[a][n]){c=t[a][n];c instanceof Array||(c=t[a][c]);h=c.length;while(s<h&&i){if(e<=c[s][0]+o&&c[s].length-2<=this.maxNumIntervals){l=[];for(r=1;r<c[s].length;r++)l.push(c[s][r]*this.dataMinMagnitude);i=!M.apply(this,[l,this.usedDataMin,this.usedDataMax])}i&&s++}}i&&(l=[S(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)]);var u=this.minIsStrict?this.explicitPlotMin:l[0];var d=this.maxIsStrict?this.explicitPlotMax:l[l.length-1];return{mainTickValues:l,plotMin:u,plotMax:d}}function P(t,e){var i=this.minIsStrict?Math.ceil(this.fractionMinLog):Math.floor(this.fractionMinLog);var a=this.maxIsStrict?Math.floor(this.fractionMaxLog):Math.ceil(this.fractionMaxLog);var n;var s;var r;var l;var c;var h;var d={};var f;var p;var v;var m;var g;var x;var _;var y;var w;if(u[i]&&u[i][a]){f=u[i][a];p=f instanceof Array?f.length/2:0;d.mainTickValues=[];for(n=0;n<p;n++){v=f[2*n];m=f[2*n+1];if(t[v]&&t[v][m]){g=t[v][m];x=g.length;for(s=0;s<x;s++){_=e<=g[s][0]+o&&g[s].length-2<=this.maxNumIntervals;y=g[s][1]*this.dataMinMagnitude;w=g[s][g[s].length-1]*this.dataMinMagnitude;_=this.minIsStrict?_&&y>=this.usedDataMin:_&&y<=this.usedDataMin;_=this.maxIsStrict?_&&w<=this.usedDataMax:_&&w>=this.usedDataMax;if(_){l=[];for(r=1;r<g[s].length;r++)l.push(g[s][r]*this.dataMinMagnitude);b(l,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);c=this.minIsStrict?this.explicitPlotMin:l[0];h=this.maxIsStrict?this.explicitPlotMax:l[l.length-1];if(M.apply(this,[l,c,h])){d.mainTickValues.length<l.length&&A(d,l,c,h);break}}}}}}d.mainTickValues&&0!==d.mainTickValues.length||(d.mainTickValues=[S(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)]);l=d.mainTickValues;d.plotMin=this.minIsStrict?this.explicitPlotMin:l[0];d.plotMax=this.maxIsStrict?this.explicitPlotMax:l[l.length-1];return d}function I(t,e,i){var a=t.length;var n;if(i){for(n=a-1;n>=0;n--)if(Math.abs(t[n]-e[n]*this.dataMinMagnitude)>o)return false;return true}for(n=0;n<a;n++)if(Math.abs(t[n]-e[n]*this.dataMinMagnitude)>o)return false;return true}function T(t){var e=t.mainTickValues;var i=e.length;var a;var n;if(i<2||i>4)return;n=5*this.dataMinMagnitude;if((this.minIsStrict&&this.usedDataMin<=n||!this.minIsStrict&&this.usedDataMin>=n)&&(I.apply(this,[e,[6,10,20,40]])||I.apply(this,[e,[4,10,20,40]]))){a=e[0];e[0]=n;t.plotMin=this.minIsStrict?this.explicitPlotMin:e[0];if(!M.apply(this,[e,t.plotMin,t.plotMax])){e[0]=a;t.plotMin=this.minIsStrict?this.explicitPlotMin:e[0]}return}n=80*this.dataMinMagnitude;if((this.maxIsStrict&&this.usedDataMax>=n||!this.maxIsStrict&&this.usedDataMax<=n)&&I.apply(this,[e,[10,20,40,60],true])){a=e[i-1];e[i-1]=n;t.plotMax=this.maxIsStrict?this.explicitPlotMax:e[i-1];if(!M.apply(this,[e,t.plotMin,t.plotMax])){e[i-1]=a;t.plotMax=this.maxIsStrict?this.explicitPlotMax:e[i-1]}}}function O(t,e,i,a,n,r,o,l,c,h){var u=s["a"].calculateTicks(t,e,i,a,n,r,o,l,c,h);var d=null!==a;var f=null!==n;var p=d?a:e;var v=f?n:i;var m;var g;var _;var y=1;var b;0===u.plotMin&&(u.plotMin=d?a:e);m=u.mainTickValues;g=d?a:Math.min(e,m[0]);_=f?n:Math.max(m[m.length-1],i);while(!M.apply(this,[m,g,_])&&y<=20){u=x(d||u.tickSpacing>p,f,p,v,u.tickSpacing);m=D(p,v,u.tickBaseValue,u.tickSpacing,d,f);g=d?a:Math.min(e,m[0]);_=f?n:Math.max(m[m.length-1],i);y++}if(M.apply(this,[m,g,_])){b=s["a"].getFraction(m[0])/2;if(2===m.length&&m[1]/m[0]===2&&m[0]/2>=g&&b===Math.floor(b)){m.splice(0,0,m[0]/2);b=s["a"].getFraction(m[0])/2;m[0]/2>=g&&b===Math.floor(b)&&m.splice(0,0,m[0]/2)}}else m=[];u.mainTickValues=m;u.numLoops=y;return u}function N(){var t;var e;var i;var a;var n;var s;var r={};if(this.maxIsStrict&&this.explicitPlotMax<=this.usedDataMin){this.dataMinLog=Math.ceil(this.explicitPlotMaxLog-(this.maxNumIntervals<2?1:2));this.dataMin=Math.pow(10,this.dataMinLog)}else if(this.minIsStrict&&this.explicitPlotMin>=this.usedDataMax){this.dataMaxLog=Math.floor(this.explicitPlotMinLog+(this.maxNumIntervals<2?1:2));this.dataMax=Math.pow(10,this.dataMaxLog)}else if(this.usedDataMin===this.usedDataMax){e=this.usedDataMin;this.dataMinLog=Math.floor(this.dataMinLog);this.dataMaxLog=this.dataMinLog+1;this.dataMin=Math.pow(10,this.dataMinLog);this.dataMax=Math.pow(10,this.dataMaxLog)}this.usedDataMin=this.minIsStrict?this.explicitPlotMin:this.dataMin;this.usedDataMax=this.maxIsStrict?this.explicitPlotMax:this.dataMax;this.usedDataMinLog=this.minIsStrict?this.explicitPlotMinLog:this.dataMinLog;this.usedDataMaxLog=this.maxIsStrict?this.explicitPlotMaxLog:this.dataMaxLog;if(this.maxNumIntervals<1){A(r,[S(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog,e)],this.usedDataMin,this.usedDataMax);return r}this.tickDataSpacingLog=(this.usedDataMaxLog-this.usedDataMinLog)/this.maxNumIntervals;this.usedDataMinLogFloor=Math.floor(this.usedDataMinLog);this.usedDataMaxLogFloor=Math.floor(this.usedDataMaxLog);this.dataMinMagnitude=Math.pow(10,this.usedDataMinLogFloor);this.fractionMinLog=this.usedDataMin/this.dataMinMagnitude;this.fractionMaxLog=this.usedDataMax/this.dataMinMagnitude;var o=Math.ceil(this.usedDataMaxLog);if(this.usedDataMinLog===this.usedDataMinLogFloor&&this.usedDataMaxLog===o&&this.maxNumIntervals>=2&&this.maxNumIntervals<3&&this.tickDataSpacingLog>1&&this.tickDataSpacingLog-Math.floor(this.tickDataSpacingLog)<l){t=Math.floor((this.usedDataMinLogFloor+o)/2);a=[Math.pow(10,this.usedDataMinLogFloor),3*Math.pow(10,t),Math.pow(10,o)];b(a,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);n=this.minIsStrict?this.explicitPlotMin:a[0];s=this.maxIsStrict?this.explicitPlotMax:a[a.length-1];if(a.length>=2&&M.apply(this,[a,n,s])){A(r,a,n,s);return r}}var u=g.call(this);if(!u.success){A(r,[S(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)],this.usedDataMin,this.usedDataMax);return r}var d=u.tickMinIndex;var f=u.tickMaxIndex;var p=u.tickDataSpacingNNLog;var v=u.tickBaseValueLog;this.minIsStrict&&d--;this.maxIsStrict&&f++;var m=[];for(i=d;i<=f;i++)m.push(Math.pow(10,i*p+v));var x=Math.pow(10,this.tickDataSpacingLog);var _=k.call(this);if(2===_)return L.apply(this,[h,x]);if(3===_)return P.apply(this,[h,x]);r=q.apply(this,[c,x,m,d,f,p,v]);T.call(this,r);return r}function E(){var t;var e={};this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;var i=Math.floor(this.maxNumIntervals);var a=(this.dataMaxLog-this.dataMinLog)/i;var n=[this.usedDataMin];for(t=0;t<i;t++)n.push(Math.pow(10,this.dataMinLog+(t+1)*a));A(e,n,this.plotMin,this.plotMax);return e}var R={calculateTicksLogPositive:function t(e,i,a,n,r,o,l,c,h){var u;var d={};Number.isNaN(+n)&&(n=null);Number.isNaN(+r)&&(r=null);if(i>a){u=i;i=a;a=u}if(null!==n&&null!==r&&n>r){u=n;n=r;r=u}this.plotSize=e;this.dataMin=i;this.dataMax=a;this.explicitPlotMin=n;this.explicitPlotMax=r;this.minTickSpacingInPixel=o;this.minIsStrict=null!==n;this.maxIsStrict=null!==r;this.usedDataMin=this.minIsStrict?n:i;this.usedDataMax=this.maxIsStrict?r:a;this.usedDataRange=this.usedDataMax-this.usedDataMin;this.maxNumIntervals=e/o;this.maxNumTicks=this.maxNumIntervals+1;this.explicitPlotMinLog=this.minIsStrict?s["a"].eliminateFloatingError(s["a"].log10(n)):null;this.explicitPlotMaxLog=this.maxIsStrict?s["a"].eliminateFloatingError(s["a"].log10(r)):null;this.dataMinLog=s["a"].eliminateFloatingError(s["a"].log10(i));this.dataMaxLog=s["a"].eliminateFloatingError(s["a"].log10(a));if(!c||0===e)return E.call(this);if(this.minIsStrict&&this.maxIsStrict&&this.explicitPlotMin===this.explicitPlotMax){A(d,[this.explicitPlotMin],this.explicitPlotMin,this.explicitPlotMax);return d}var f=N.call(this);if(this.usedDataMax>=10*this.usedDataMin)return f;var p=O.apply(this,[e,i,a,n,r,o,l,c,h]);if(p.mainTickValues.length<2)return f;if(f.mainTickValues.length<2)return p;if(p.mainTickValues.length===f.mainTickValues.length){w.call(this,p);w.call(this,f);if(p.factor>f.factor)return p;return f}if(p.mainTickValues.length-1>=1.5*(f.mainTickValues.length-1)&&p.mainTickValues.length>f.mainTickValues.length)return p;return f},calculateTicks:function t(e,i,a,n,s,r,o,l,c){var h;var u;var d;var f;var p;var v;var m;Number.isNaN(+n)&&(n=null);Number.isNaN(+s)&&(s=null);if(i>a){h=i;i=a;a=h}if(null!==n&&null!==s&&n>s){h=n;n=s;s=h}if(i*a<=0){i=null===n?i:n;a=null===s?a:s}if(i>0&&a>0&&(null===n||n>0)&&(null===s||s>0)){u=R.calculateTicksLogPositive(e,i,a,n,s,r,o,l,c);u.sign=1;return u}if(i<0&&a<0&&(null===n||n<0)&&(null===s||s<0)){d=R.calculateTicksLogPositive(e,-a,-i,null===s?null:-s,null===n?null:-n,r,o,l,c);u={};u.plotMin=-d.plotMax;u.plotMax=-d.plotMin;p=d.mainTickValues;v=p?p.length:0;f=new Array(v);for(m=0;m<v;m++)f[m]=-p[v-1-m];u.mainTickValues=f;u.sign=-1;return u}return{plotMin:null===n?i:n,plotMax:null===s?a:s,mainTickValues:[]}}};var V=R;function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function j(t,e,i){e&&F(t.prototype,e);i&&F(t,i);return t}var H=function(){function t(){z(this,t);this.plotMin=null;this.plotMax=null;this.plotRange=null;this.tickMin=this.plotMin;this.tickMax=this.plotMax;this.mainValues=[];this.secondaryValues=[];this._plotSize=0;this._calculationSize=0}j(t,[{key:"setSize",value:function t(e){this._plotSize=e}},{key:"getPositionOfValue",value:function t(e){if(0===e)return this._usedDataMin>0?0:this._plotSize;var i=e>0?s["a"].log10(e):-s["a"].log10(-e);return(i-this._plotMinLog10)/this._plotRangeLog10*this._plotSize}},{key:"getNormalizedValue",value:function t(e){if(0===e)return this._usedDataMin>0?0:1;var i=e>0?s["a"].log10(e):-s["a"].log10(-e);return(i-this._plotMinLog10)/this._plotRangeLog10}},{key:"getValueOfPosition",value:function t(e){if(0===e)return 0;var i=this._plotMinLog10+this._plotRangeLog10*e/this._plotSize;if(this._usedDataMin>0)return Math.pow(10,i);return-Math.pow(10,-i)}},{key:"calculateLimits",value:function t(){this._usedDataMin=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;this._usedDataMax=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;this.plotMin=null===this._explicitPlotMin||Number.isNaN(+this._explicitPlotMin)?this._usedDataMin:this._explicitPlotMin;this.plotMax=null===this._explicitPlotMax||Number.isNaN(+this._explicitPlotMax)?this._usedDataMax:this._explicitPlotMax;this.plotRange=this.plotMax-this.plotMin;this._plotMinLog10=s["a"].log10(Math.abs(this.plotMin))*(this.plotMin<0?-1:1);this._plotMaxLog10=s["a"].log10(Math.abs(this.plotMax))*(this.plotMax<0?-1:1);this._plotRangeLog10=this._plotMaxLog10-this._plotMinLog10}},{key:"calculateTicks",value:function t(){var e=V.calculateTicks(this._calculationSize,this._usedDataMin,this._usedDataMax,this._explicitPlotMin,this._explicitPlotMax,this._minTickSpacingInPixel,this._fontHeight,this._niceNumberEnabled,this._whiteSpaceOptimizingEnabled);this.plotMin=e.plotMin;this.plotMax=e.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=e.tickMin;this.tickMax=e.tickMax;this.mainValues=e.mainTickValues;this.secondaryValues=[];this._dataSign=e.sign;this._tickSpacing=this.mainValues.length>1?this.mainValues[1]-this.mainValues[0]:this.plotMax-this.plotMin;this._plotMinLog10=this._dataSign*s["a"].log10(Math.abs(this.plotMin));this._plotMaxLog10=this._dataSign*s["a"].log10(Math.abs(this.plotMax));this._plotRangeLog10=this._plotMaxLog10-this._plotMinLog10;0===this.mainValues.length&&this.mainValues.push(e.minTickValue);0===this._tickSpacing&&(this._tickSpacing=1)}},{key:"getValues",value:function t(){return{mainValues:this.mainValues,secondaryValues:this.secondaryValues}}}]);return t}();var B=H;var $=i("P2vc");var W=i("4nJ1");var U=i("tnCi");var G=i("hpzB");var Z=i("MoEg");var Y=i("R0oC");var X=1;var K={autoStart:false,duration:500,easing:"easeInOut"};function J(t){return t.some((function(t){return null===t}))}function Q(t,e){var i=0;var a=t[this._isVertical?"height":"width"];var n=0;var s;var r;var o=this._style;this._isVertical?a-=this._padding.top+this._padding.bottom:a-=this._padding.left+this._padding.right;if(this.isRadial())i=2*Math.sin(this._relevantAngle/4)*this._fontHeight*o.label.lineHeight;else if(this._isVertical){this._calculateScale(a);s=this._formatter;r=this._renderer;if(s){var l=this._scale.getValues().mainValues.map((function(t){return r.getTextWidth("".concat(s.formatValue(t),"ml"),o.label.font)}));n=Math.max.apply(null,l.length?l:[0])}i=Math.min(e[this._isVertical?"width":"height"]/3,n<this.outerRect.width/2?n:this.outerRect.width/3)}else i=this._fontHeight*o.label.lineHeight;this._wantedLabelSpacePerLevel=i;return i}var tt={onProgress:function t(){this._updateTickPositions();this.invalidateDisplay();this.fire("changed")},on:function t(){this._tickTween.on();this._linearTween.on()},off:function t(){this._tickTween.off();this._linearTween.off()},to:function t(){this._linearTween.stop().to({plotMin:this._scale.plotMin,plotMax:this._scale.plotMax,plotRange:this._scale.plotRange});this._tickTween.stop().to({ticks:this.ticks})},from:function t(){this._linearTween.stop().from({plotMin:this._scale.plotMin,plotMax:this._scale.plotMax,plotRange:this._scale.plotRange});this._tickTween.stop().from({ticks:this.ticks})},start:function t(){if(this._useTransition&&this._linearTween.willStart()){this._tickTween.start();this._linearTween.start()}},end:function t(){if(this._useTransition){this._tickTween.end();this._linearTween.end()}},stop:function t(){this._tickTween.stop();this._linearTween.stop()}};function et(){if(this._useTimeScaling)return 0;var t;var e;var i;var a=this._formatter;if(a){t=a.pattern;e=a.thousandDelimiter;i=a.decimalDelimiter;switch(t){case"#".concat(e,"##0"):return 1;case"#".concat(e,"##0").concat(i,"0"):return.1;case"#".concat(e,"##0").concat(i,"00"):case"0%":return.01;case"0".concat(i,"0%"):return.001;case"0".concat(i,"00%"):return 1e-4;default:return 0}}return 0}var it=a["a"].extend("ContinuousAxis",{init:function t(){this._super.apply(this,[].slice.call(arguments));this._scaleDetails={showExplicitMinMax:true,niceNumberEnabled:true,tickMultiplier:1};this.ticks=[];this.minorTicks=null;this._tickDates=[];this._minorTickDates=[];this._explicitLabels=[];this._defaultFormatter={formatValue:function t(e){return String(e)},format:function t(e){return String(e)}};this._formatter=this._defaultFormatter;this._useLogScaleIfPossible=false;this._cacheItems=null;this._useTransition=false;this._selectedRanges=[];this._initScales();this._linearTween=new U["a"](this._scale,{},K).progress(tt.onProgress.bind(this));this._tickTween=new U["a"](this,{},K)},_initScales:function t(){this._logarithmicScale=new B;this._linearScale=new n["a"];this._scale=this._linearScale},setSelectableShapes:function t(e){this._cacheItems=e},getDiscreteSpacing:function t(){return 4},updateSize:function t(){this._super();this._calculationSize=this._plotSize;this._updateScaleAndTicks();this._scale.setSize(this._plotSize);this._updateTickPositions();tt.to.call(this);if(this._changed){this._changed=false;tt.start.call(this)}else tt.end.call(this)},getPlotSize:function t(){return this._plotSize},calculateValuePositionMappingInfo:function t(){this._scale.setSize(this._plotSize);this._scale._calculationSize=this._plotSize;this._scale.calculateLimits()},setUseTransition:function t(e){this._super(e);tt[e?"on":"off"].call(this)},preRelevantSizeCalculation:function t(){this._super();this._areLabelsVisible=this.isVisible(this._layoutMode)&&this._showLabels},calculatePreliminaryLabelSpace:function t(e){var i=0;this._areLabelsVisible&&(i=Q.call(this,e,e));return{relevantLabelSize:i||0,relevantSpacing:0}},calculateLabelSpace:function t(e,i,a){var n=0;this._calculateScale(this._calculationSize);this._areLabelsVisible&&(n=Q.call(this,a||e,e));return{relevantLabelSize:n||0,relevantSpacing:0}},_getLabels:function t(e,i){var a=e?e.length:0;var n;var s=[];var r=[];var o=[];var l=[];var c=[];var h=[];var u;var d;e.forEach((function(t){u=this.getPositionOfValue(t.value);u=G["a"].roundToHalf(u);l.push(u);o.push(t.value);c.push("opacity"in t?t.opacity:1);s.push("".concat(t.value));r.push(t.qualifiedLabel)}),this);if(a<=1)h=[this._plotSize];else if(i){d=this.yMirrorMode?this._padding.left+this._plotSize-l[0]:l[0];h[0]=Math.abs(l[1]-l[0])+d;for(n=1;n<e.length-1;n++)h.push(Math.abs(l[n]-l[n-1]));h[n]=this.yMirrorMode?l[n]:this._padding.left+this._plotSize-l[n]}else{d=this.yMirrorMode?this._padding.left+this._plotSize-l[0]:l[0];h[0]=Math.abs(l[1]-l[0])/2+d;for(n=1;n<e.length-1;n++)h.push(Math.abs(l[n]-l[n-1])/2+Math.abs(l[n+1]-l[n])/2);d=this.yMirrorMode?l[n]:this._padding.left+this._plotSize-l[n];h[n]=Math.abs(l[n]-l[n-1])/2+d}return{values:o,widths:h,positions:l,opacities:c,labels:s,labelMode:X,labelSpace:this._wantedLabelSpacePerLevel,qualifiedLabels:r[0]?r:null,labelsBetweenTicks:i}},_updateTickPositions:function t(){var e;var i;for(i=0;i<this.ticks.length;i++){e=this.getPositionOfValue(this.ticks[i].value);this.ticks[i].position=G["a"].roundToHalf(e)}for(i=0;i<this.minorTicks.length;i++){e=this.getPositionOfValue(this.minorTicks[i].value);this.minorTicks[i].position=G["a"].roundToHalf(e)}this._initLevels();this._updateTickFormatting(this._levels,this._formatter);if(this.indicators)for(i=0;i<this.indicators.positions.length;i++){e=this.getPositionOfValue(this.indicators.values[i]);this.indicators.positions[i]=G["a"].roundToHalf(e)}this._snapTicksAvgWidth=G["a"].getAvgTickWidth(this.indicators?this.indicators.positions:this._levels[0].positions)||this._plotSize},_initLevels:function t(){this._levels=[this._getLabels(this.ticks,false)]},_calculateScale:function t(e){if(0===e)return;var i=this._scaleDetails;var a=Number.isNaN(+i.realDataMin)?i.dataMin:i.realDataMin;var n=Number.isNaN(+i.realDataMax)?i.dataMax:i.realDataMax;var s=Number.isNaN(+i.explicitPlotMin)||null===i.explicitPlotMin?a:i.explicitPlotMin;var r=Number.isNaN(+i.explicitPlotMax)||null===i.explicitPlotMax?n:i.explicitPlotMax;var o;o=this.isRadial()?96:Math.max(96,this._getApproximateLabelWidth(s,r));var l=this.isVertical()?4*this._fontHeight:o;var c=Math.max(2,e/l/i.tickMultiplier+1);l=e/(c-1);if(this._useLogScaleIfPossible&&s*r>0&&a*n>0){this._scale=this._logarithmicScale;this.setUseTransition(false)}else this._scale=this._linearScale;i.usedDataMin=a;i.usedDataMax=n;i.minTickSpacingInPixel=l;i.minTickDataSpacing=et.call(this);i.plotSize=this._plotSize;i.calculationSize="undefined"!==typeof e?e:this._calculationSize;i.fontHeight=this._fontHeight;Object.keys(i).forEach((function(t){this._scale["_".concat(t)]=i[t]}),this);this._scale.calculateTicks()},_getApproximateLabelWidth:function t(e,i,a){var n=this._formatter;var s=this._renderer;var r=this._style.label.font;if(!n)return 0;return Math.max.apply(null,[e,i,(i-e)/2].map((function(t){return s.getTextWidth(n.formatValue(t,a),r)})))},_generateTickObjects:function t(e,i){var a=e.getValues();this.ticks=G["a"].getTicks(a.mainValues,this._padding,i);this.minorTicks=G["a"].getTicks(a.secondaryValues,this._padding,i);this._tickDates=a.mainDates;this._minorTickDates=a.secondaryDates},_updateTickFormatting:function t(e,i){for(var a=0;e[0]&&a<e[0].values.length;a++)e[0].labels[a]=i?i.formatValue(e[0].values[a]):e[0].values[a]},setPlotMin:function t(e){this._scaleDetails.explicitPlotMin="number"===typeof e?e:null;this.invalidateProperties("setPlotMin")},getPlotMin:function t(){return this._scale.plotMin},setPlotMax:function t(e){this._scaleDetails.explicitPlotMax="number"===typeof e?e:null;this.invalidateProperties("setPlotMax")},getPlotMax:function t(){return this._scale.plotMax},setTickMultiplier:function t(e){this._scaleDetails.tickMultiplier=e||1;this.invalidateProperties("setTickMultiplier")},setSpacingMode:function t(e){this._scaleDetails.spacingMode=e;this.invalidateProperties("setSpacingMode")},getSpacingMode:function t(){return this._scaleDetails.spacingMode},setShowExplicitMinMax:function t(e){this._scaleDetails.showExplicitMinMax=e;this.invalidateProperties("setShowExplicitMinMax")},setLogScale:function t(e){this._useLogScaleIfPossible=e;this.invalidateProperties("setLogScale")},getLogScale:function t(){return this._scale===this._logarithmicScale},numberFormat:function t(e,i){if(this._discrete)return e;return W["a"].numberFormat(e,i||this._precision,this._exponentUsed)},format:function t(e){if(this._discrete||!this._formatter)return"".concat(e);return this._formatter.format(e,this._formatPattern)},formatValue:function t(e){if(this._discrete||!this._formatter)return"".concat(e);return this._formatter.formatValue(e)},_transition:function t(){this._onAnimatitonEnd()},setDataRangeTransition:function t(e){this._transitionEnabled=e},setDataRange:function t(e,i){this._scaleDetails.dataMin=e;this._scaleDetails.dataMax=i;this.invalidateDisplay("setDataRange");this.invalidateProperties("setDataRange");return this},setRealDataRange:function t(e,i){this._scaleDetails.realDataMin=e;this._scaleDetails.realDataMax=i;this.invalidateProperties("setRealDataRange")},getDataMin:function t(){return this._scaleDetails.dataMin},getDataMax:function t(){return this._scaleDetails.dataMax},setNiceNumberEnabled:function t(e){if(this._scaleDetails.niceNumberEnabled===e)return;this._scaleDetails.niceNumberEnabled=e;this.invalidateProperties("setNiceNumberEnabled")},setWhiteSpaceOptimizingEnabled:function t(e){this._scaleDetails.whiteSpaceOptimizingEnabled=e;this.invalidateProperties("setWhiteSpaceOptimizingEnabled")},getLevels:function t(){return this._levels},updateFormatter:function t(){if(this.isDimension)this._formatter=this.dimensionFormatter||this._defaultFormatter;else{var e=this.getType().indices;this._formatter=1===e.length&&this.measureFormatters.length&&!J(this.measureFormatters)?this.measureFormatters[e[0]]:this.combinedMeasuresFormatter||this._defaultFormatter}this._formatter.prepare&&this._formatter.prepare()},_onAnimatitonEnd:function t(){this._super();this.rect.width>0&&this.calculateLabelSpace(this.rect)},_updateProperties:function t(){tt.from.call(this);this._changed=this._oldIsVertical===this.isVertical()&&"number"===typeof this._scale.plotRange&&!Number.isNaN(+this._scale.plotRange);this._oldIsVertical=this.isVertical();this.updateFormatter();this._isSizing||this._updateScaleAndTicks()},_updateScaleAndTicks:function t(){this._calculateScale(this._calculationSize);this._generateTickObjects(this._scale,this._plotSize);this._updateTickPositions()},clear:function t(){this._linearTween.end();this._tickTween.end();this._super()},getWidthOfValue:function t(){return 1},getSnapTicksAvgWidth:function t(){return this._snapTicksAvgWidth},getPositionOfValue:function t(e){var i;var a=this._scale.plotMin;var n=this._scale.plotRange;i=0===n?e>a?100*this._plotSize:e<a?100*-this._plotSize:this._plotSize/2:this._scale.getPositionOfValue(e);(this._isVertical&&!this._reverse||!this._isVertical&&(this._reverse||this.yMirrorMode))&&(i=this._plotSize-i);return i+this._padding[this._isVertical?"top":"left"]},getNormalizedValue:function t(e){var i=this._scale.plotMin;var a=this._scale.plotRange;if(0===a){if(e>i)return 1;if(e<i)return 0;return.5}return this._scale.getNormalizedValue(e)},getPositionOfNormalizedValue:function t(e){var i=this._scale.plotMin;var a=this._scale.plotMax;return this.getPositionOfValue(e*(a-i)+i)},getValueOfPosition:function t(e){if(this._plotSize<=0)return NaN;e-=this._padding[this._isVertical?"top":"left"];(this._isVertical&&!this._reverse||!this._isVertical&&(this._reverse||this.yMirrorMode))&&(e=this._plotSize-e);return this._scale.getValueOfPosition(e)},getAngleOfValue:function t(e){return $["a"].getAngleOfNormalizedValue((e-this._scale.plotMin)/(this._scale.plotMax-this._scale.plotMin),this)},getAngleOfNormalizedValue:function t(e){return $["a"].getAngleOfNormalizedValue(e,this)},isLabelSelected:function t(e,i){return this._selectedRanges.some((function(t){return t.min<=e&&t.max>=i}))},setSelectedRanges:function t(e){this._selectedRanges=e;this._updateTickPositions()},getLabelFromPoint:function t(e){if(this.isVertical())return null;var i=1;var a="far"===this.getAlignment()?1:-1;var n=(i+this._style.label.margin)*a;var s="near"===this.getAlignment()?this.rect.height-1:0;s+=n;var r=null;var o;for(o=0;o<this._levels.length;++o){s+=this._levels[o].labelSpace*a;if(e.y*a<s*a){r=this._levels[o];break}}if(!r)return null;for(o=0;o<r.labels.length;++o){var l=r.positions[o];var c=r.positions[o+1];var h=e.x>=l&&e.x<c||e.x<=l&&e.x>c;if(h)return{label:r.labels[o],start:r.values[o],end:r.values[o+1]}}return null}});var at=e["a"]=it},"9Bsw":function(t,e,i){"use strict";var a=i("TmNk");var n=i.n(a);var s=i("sWge");var r=i("6uJb");var o=i("oxue");function l(){this.titles={}}l.prototype.getDimensionTitle=h;l.prototype.getMeasureTitle=u;l.prototype.resetTitles=d;var c=l;function h(t,e,i){x(this);return f.call(this,t,e,i,true)}function u(t,e,i){x(this);return f.call(this,t,e,i,false)}function d(){this.titles={}}function f(t,e,i,a){var n=p(t,this.titles);if(n)return n.promise;n=v(t,this.titles);n.promise=m(t,e,i,a);return n.promise}function p(t,e){var i=g(t);return e[i]}function v(t,e){var i=g(t);var a={id:i,promise:null};e[i]=a;return a}function m(t,e,i,a){var l="H"===t.qDef.qGrouping;var c=!!t.qLibraryId;if(l)return s["a"].when(t.qData.title);if(c){var h=a?e.getDimensionList:e.getMeasureList;return h.call(e).then((function(e){var n=a?o["a"].findLibraryDimension:o["a"].findLibraryMeasure;var s=n(t.qLibraryId,e);var l=s&&s.qData.labelExpression;if(!s)return r["default"].get(a?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure");if(!i&&l)return l;return s.qData.title}))}var u=t.qDef.qLabelExpression;var d=!!u;if(d){if(i)return s["a"].when(u);return e.evaluate(u)}var f;if(a){var p=t.qDef.qFieldLabels[0];f=p||t.qDef.qFieldDefs[0]}else f=t.qDef.qLabel||n.a.measureBase.getExpression(t);return s["a"].when(f)}function g(t){return t.qDef.cId}function x(t){if(!t)throw new Error("AlternativeTitleRetriever: Called without a context")}var _={create:b};var y=e["a"]=_;function b(){return new c}},AaFn:function(t,e,i){"use strict";var a=i("0vQd");var n;var s=a["a"].extend("TreeNode",{addChild:function t(e){if(!e||!(e instanceof a["a"]))throw new TypeError("Expecting a Node as argument, but got ".concat(e));if(e===this)throw new Error("Can not add itself as child!");if(e._children&&e._children.length&&this.ancestors.indexOf(e)>=0)throw new Error("Can not add an ancestor as child!");e._parent&&e._parent!==this&&e._parent.removeChild(e);if(e._pushed){n=this._children.indexOf(e);n>=0&&this._children.splice(n,1)}e._pushed=true;this._children.push(e);e._parent=this;e._ancestors=null;return this},addChildren:function t(e){var i;var a=e?e.length:0;for(i=0;i<a;i++)this.addChild(e[i]);return this},removeChild:function t(e){n=this._children.indexOf(e);if(n>=0){this._children.splice(n,1);e._parent=null;e._ancestors=null}return this},removeChildren:function t(e){var i;var a;if(!this._children)return this;if(e){a=e.length;for(i=0;i<a;i++)this.removeChild(e[i])}else while(this._children.length)this.removeChild(this._children[0]);return this}});e["a"]=s},BGgI:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("Oc2G");var r=i("nHjU");var o=i("3x6l");var l=i("7xSA");var c=i("tccY");var h=i("ohbW");var u=i("UV1h");var d={NONE:0,SPARSE:1,NORMAL:1,DENSE:3};function f(t,e,i,a,n,s,r){var o;var l;var c;var h;if(r){o=0;l=a;c=t;h=t}else{o=t;l=t;c=0;h=n}return{type:"line",opacity:i,strokeWidth:s,shape:{x1:o,x2:l,y1:c,y2:h},stroke:e}}function p(t,e){var i=t.ticks;var a=t.minorTicks;var n=i?i.length:0;var s=a?a.length:0;var r=t.getSpacingMode()===d.DENSE||t.isDimension;var o=t.getSpacingMode()===d.SPARSE?2:1;var l=e.rect.height;var c=e.rect.width;var h=e.style;var u;var p;var v;var m=[];var g;if(t.getSpacingMode()===d.NONE||!i)return[];for(g=0;g<n;g+=1){p=i[g].position;u=i[g].value;v=i[g].opacity;g%o!==0&&0!==u||(0===u?m.push(f(p,h.zero.color,v,c,l,h.zero.width,t.isVertical())):m.push(f(p,h.major.color,v,c,l,h.major.width,t.isVertical())))}if(r&&a)for(g=0;g<s;g+=1){p=a[g].position;m.push(f(p,h.minor.color,1,c,l,h.minor.width,t.isVertical()))}return m}function v(t){return{ticks:{major:{color:t.getStyle("line.major","color")},minor:{color:t.getStyle("line.minor","color")},zero:{color:t.getStyle("line.highContrast","color")}}}}function m(){this.invalidateDisplay("Grid.setAxes")}var g=r["a"].extend("Grid",{init:function t(){this._super.apply(this,Array.prototype.slice.call(arguments));this._styleService=u["a"].initializeService("object.grid");this._renderer=new h["a"](this.container);this._renderer.edgeBleed={top:1,left:1,bottom:0,right:0};this._$renderAreaWrap.addClass("qv-chart-component-grid");this.renderers={gridlines:this._renderer}},afterRenderLines:function t(){},setAxes:function t(e,i){if(this._primaryHorizontalAxis!==e){this._primaryHorizontalAxis&&this._primaryHorizontalAxis.stopListen("changed",m,this);this._primaryHorizontalAxis=e;this._primaryHorizontalAxis&&this._primaryHorizontalAxis.listen("changed",m,this)}if(this._primaryVerticalAxis!==i){this._primaryVerticalAxis&&this._primaryVerticalAxis.stopListen("changed",m,this);this._primaryVerticalAxis=i;this._primaryVerticalAxis&&this._primaryVerticalAxis.listen("changed",m,this)}},hasValidData:function t(){return this._super()&&(this._primaryVerticalAxis||this._primaryHorizontalAxis)},paint:function t(e,i){this._super(e,i);var a=[];this._style=v(this._styleService);if(this._primaryVerticalAxis){this._primaryVerticalAxis.updateNow();a=p(this._primaryVerticalAxis,{rect:this.rect,style:this._style.ticks})}if(this._primaryHorizontalAxis){this._primaryHorizontalAxis.updateNow();a=a.concat(p(this._primaryHorizontalAxis,{rect:this.rect,style:this._style.ticks}))}this.afterRenderLines(a);this._renderer.shapes=a;this._renderer.render();return this},release:function t(){this._super();this._styleService=null;this._primaryHorizontalAxis&&this._primaryHorizontalAxis.stopListen("changed",null,this);this._primaryVerticalAxis&&this._primaryVerticalAxis.stopListen("changed",null,this)}});var x=g;var _=s["a"].extend({init:function t(e,i,a,s,h){var u=n.a.extend(true,{components:{grid:{show:true,dock:"center",showFlag:r["a"].prototype.ShowFlags.XSMALL,clazz:x},refLines:{clazz:o["a"]},colorLegend:{show:true,order:4,reductionOrder:1,dock:"right",relevantSize:126,showFlag:r["a"].prototype.ShowFlags.MEDIUM},xAxis:{show:true,order:1,dock:"bottom",relevantSize:120,showFlag:r["a"].prototype.ShowFlags.XSMALL,clazz:l["a"]},yAxis:{show:true,order:1,dock:"left",relevantSize:90,reductionOrder:2,showFlag:r["a"].prototype.ShowFlags.XSMALL,clazz:l["a"]},yAxisTitle:{show:true,order:1.1,dock:"left",relevantSize:30,reductionOrder:1,showFlag:r["a"].prototype.ShowFlags.SMALL,clazz:c["a"]},xAxisTitle:{show:true,order:1.1,dock:"bottom",relevantSize:30,reductionOrder:1,showFlag:r["a"].prototype.ShowFlags.SMALL,clazz:c["a"]}}},a||{});this._super(e,i,u,s,h)},getVerticalComponents:function t(){var e=this._super();if(this._data&&this.components){if(this.components.xAxis&&this.components.xAxis.isVertical()&&this._data.xAxis){e.push({comp:this.components.xAxis,dock:this._data.xAxis.dock});this.components.xAxisTitle&&e.push({comp:this.components.xAxisTitle,dock:this._data.xAxis.dock})}if(this.components.yAxis&&this.components.yAxis.isVertical()&&this._data.yAxis){e.push({comp:this.components.yAxis,dock:this._data.yAxis.dock});this.components.yAxisTitle&&e.push({comp:this.components.yAxisTitle,dock:this._data.yAxis.dock})}}return e},_updateData:function t(e,i){this._super.apply(this,[].slice.call(arguments));this.updateDataArea(e,i);this.updateAxis(e,i);this.updateGrid(e,i);this.updateRefLines(e,i);this.updateVerticalComponentsDock()},updateDataArea:function t(e,i){var a;var n;for(a in i.axes){n=i.axes[a];n.component.setDataIndices(n.dataIndices||[n.dataIndex||0]);n.component.setCurrentDataIndices(n.currentDataIndices||n.dataIndices||[n.dataIndex||0])}},setAxisDataRange:function t(e,i,a,n,s,r){var o;var l;if(null!==n&&null!==s||null===n&&null===s){o=a;l=i}else if(null!==n&&n<=a){o=n-r;l=i}else if(null!==s&&s>=i){o=a;l=s+r}else{o=a;l=i}e.setDataRange(o,l);this.components.miniChart&&this.components.miniChart.components.measureAxis.setDataRange(o,l)},updateAxis:function t(e,i){var a;var n=i.axes;var s=this.components.miniChart;var r;var o;for(a in i.axes){r=n[a];r.component.setTitle(r.title);r.component.setShowStrategy(r.data.show);r.component.setLabelMode(r.data.label);r.component.setLockedInfo&&r.component.setLockedInfo(e.qHyperCube.qDimensionInfo.map((function(t){return true===t.qLocked})));if(r.component.setPlotMin&&!r.component.isDimension){o=this.getAxisOptions(r);r.component.setPlotMin(o.min);r.component.setPlotMax(o.max);r.component.setTickMultiplier(r.data.spacing);r.component.setLogScale(r.data.logarithmic);if(s&&s.components[a]){o=this.getAxisOptions(r);s.components[a].setPlotMin(o.min);s.components[a].setPlotMax(o.max)}}r.component.isVertical()?r.component.setDock("far"===r.data.dock?"right":"left"):r.component.setDock("far"===r.data.dock?"top":"bottom")}for(a in i.axisTitles){r=i.axisTitles[a];r.component.setShowStrategy(r.data.show);r.component.isVertical()?r.component.setDock("far"===r.data.dock?"right":"left"):r.component.setDock("far"===r.data.dock?"top":"bottom")}},getAxisOptions:function t(e){if(!e||!e.data)return;if(e.data.autoMinMax)return{min:null,max:null};return{min:["min","minMax"].includes(e.data.minMax)?Number(e.data.min):null,max:["max","minMax"].includes(e.data.minMax)?Number(e.data.max):null}},updateGrid:function t(e,i){if(!this.components.grid)return;var a;var n;if(e.gridLine&&"number"===typeof e.gridLine.spacing){n=e.gridLine.auto?2:e.gridLine.spacing;for(a in i.axes)i.axes[a].component.setSpacingMode&&i.axes[a].component.setSpacingMode(n)}},updateRefLines:function t(e,i){var a;var n=i.refLineLabels;var s=[];var r=[];for(a in n){if(!n[a].component)continue;n[a].component.setData(n[a].data);n[a].component.setAxis(n[a].axis);n[a].component.setDock(n[a].axis.getOppositeDock());r.push(n[a].axis);s.push(n[a].data)}if(i.refLines&&i.refLines.component){i.refLines.component.setAxes(r);i.refLines.component.setData(s)}}});var y=e["a"]=_},ByVn:function(t,e,i){"use strict";var a=i("4nJ1");e["a"]={migrateProperties:n,needToMigrateProperties:s};function n(t){var e=a["a"].findValuesOfQProperty(t,"qHyperCubeDef");e&&e.forEach((function(t){var e=t.qDimensions;e&&e.forEach((function(t){var e=t.qDef;true===e.autoSort&&e.qSortCriterias.forEach((function(t){t.qSortByNumeric=1;t.qSortByAscii=1}))}))}));return t}function s(t){var e=a["a"].findValuesOfQProperty(t,"qHyperCubeDef");return e.some((function(t){var e=t.qDimensions;return e.some((function(t){var e=t.qDef;return true===e.autoSort&&e.qSortCriterias.some((function(t){return 1!==t.qSortByNumeric||1!==t.qSortByAscii}))}))}))}},CpIe:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("mWu2");s["default"].directive("qvaApplyStyle",[function(){return{restrict:"A",link:function t(e,i,a){e.$watch(a.qvaApplyStyle,(function(t){"string"===n.a.type(t)&&i.attr("style",t)}),false)}}}])},CyFZ:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("Z9ZH");var r=i.n(s);var o=i("PX8M");var l=i("sWge");var c=i("TmCs");var h=i("mWu2");var u='<lui-dialog id="expression-editor-wrapper">\t\n\t<lui-dialog-header class="expression-editor-toolbar">\n\t\t<span class="expression-editor-toolbar-title" q-translation="{{input.title}}"></span>\n\t\t<div class="expression-editor-toolbar-buttons">\t\t\n\t\t\t<button class="lui-fade-button expression-editor-undo-button" \n\t\t\t\t\tdata-name="undo" ng-disabled="undoDisabled || !codearea.contextApi.canUndo" \n\t\t\t\t\tng-click="onUndo()" q-title-translation="Common.Undo" disabled="disabled" title="Undo">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--back"></span>\n\t\t\t</button>\n\t\t\t<button class="lui-fade-button expression-editor-redo-button" \n\t\t\t\t\tdata-name="redo" ng-disabled="redoDisabled || !codearea.contextApi.canRedo" \n\t\t\t\t\tng-click="onRedo()" q-title-translation="Common.Redo" disabled="disabled" title="Redo">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--forward"></span>\n\t\t\t</button>\t\t\t\t\t\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button expression-editor-help-button"\n\t\t\t\tdata-name="help-mode"\n\t\t\t\tng-class="{\'lui-active\': controller.helpmodeActive}"\n\t\t\t\tng-click="onHelpmode()"\n\t\t\t\tq-title-translation="Tooltip.HelpMode.Enter">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--help"></span>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button"\n\t\t\t\tqva-activate="$event.preventDefault(); close()"\n\t\t\t\tdata-name="close">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--close" q-title-translation="Common.Close"></span>\n\t\t\t</button>\t\t\t\t\n\t\t</div>\t\n\t</lui-dialog-header>\t\n\t<lui-dialog-body class="expression-editor-body" qv-cancel="cancel()" qv-confirm="confirm()">\n\t\t<section id="expression-editor-panel" class="qribby-accordion-pp">\n\t\t\t<div class="qv-expandable-list-wrapper" qv-expandable-list></div>\t\t\t\n\t\t</section>\n\t\t<section id="expression-editor-content">\n\t\t\t<main class="dm-main">\n\t\t\t\t<div id="expression-editor-container">\n\t\t\t\t\t<div id="expression-editor-stage" data-help="Panel.Stage" ng-class="{ invalid: !validity.expression }">\n\t\t\t\t\t\t<qv-codearea\n\t\t\t\t\t\t\t\tdata-show-breakpoint-gutter="true"\n\t\t\t\t\t\t\t\tdata-disabled="controller.helpmodeActive"\n\t\t\t\t\t\t\t\tdata-resize-trigger="resizeCounter"\n\t\t\t\t\t\t\t\tdata-mode="qlikviewReloadScriptMode"\n\t\t\t\t\t\t\t\tclass="expression-dialog-code-mirror"\n\t\t\t\t\t\t\t\tqva-outside-ignore-for="allOutside"\n\t\t\t\t\t\t\t\tqv-codearea-code-container="codearea"\n\t\t\t\t\t\t\t\tqv-codearea-exposed-context-api="codearea.contextApi"\n\t\t\t\t\t\t\t\tqv-codearea-function-tip="functionTipOptions"\n\t\t\t\t\t\t\t\tqv-codearea-limit="stringLimits.expression"\n\t\t\t\t\t\t\t\tqv-codearea-autocomplete="autocompleteOptions"\n\t\t\t\t\t\t\t\tqv-codearea-help-mode="controller.helpmodeActive"\n\t\t\t\t\t\t\t\tqv-codearea-help-mode-options="helpModeOptions"\n\t\t\t\t\t\t\t\tqva-activate="closePopoverIfOpen($event)"\n\t\t\t\t\t\t></qv-codearea>\n\t\t\t\t\t\t<div class="ee-information-wrapper">\n\t\t\t\t\t\t\t<div class="row-number-fill"></div>\n\t\t\t\t\t\t\t<div class="ee-information">\n\t\t\t\t\t\t\t\t<qv-information-area x-info="info" x-app="input.app" x-mode="input.mode" x-labels="input.labels"></qv-information-area>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t</main>\n\t\t</section>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button class="lui-button close button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel">Cancel</button>\n\t\t<button class="lui-button confirm button" ng-click="confirm()"  qv-confirm="confirm()" name="confirmButton" q-translation="Common.Apply">Confirm</button>\n\t</lui-dialog-footer>\n</lui-dialog>';var d='<div class="expression-editor-section">\n    \x3c!-- TABLE DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-table">\n        <label q-translation="Assets.FieldsTab.Table"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="tables"\n            tid="table-dropdown"\n            title="{{controller.selectedTable.label}}">\n            <div class="label">\n                {{controller.selectedTable.label}}\n            </div>\n        </button>\n    </div>\n   \x3c!-- FIELD DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-field">\n        <label q-translation="Common.Field"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)" \n            data-context="fields"\n            tid="field-dropdown"\n            title="{{controller.selectedField.label}}">\n            <div class="label">\n                {{controller.selectedField.label}}\n            </div>\n        </button>\n    </div>\n    \x3c!-- AGGREGATION DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-functions" >\n        <label q-translation="ExpressionEditor.AggregationFunctions"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="commonFunctions"\n            tid="aggregation-dropdown"\n            title="{{controller.selectedCommonFunction.label}}">\n            <div class="label">\n                {{controller.selectedCommonFunction.label}}\n            </div>\n        </button>\n    </div>\n   \x3c!-- SET EXPRESSION CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-current">        \n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input"\n                type="checkbox"\n                ng-disabled="controller.readOnly() || controller.noSelectionsInObjectState"\n                ng-model="controller.currentOption" \n            />            \n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-set"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly() || controller.noSelectionsInObjectState"\n                    q-translation="ExpressionEditor.SetExpression"\n                    q-title-translation="ExpressionEditor.SetExpression">\n                </span>              \n            </div>           \n        </label>  \n        <span ng-if="( !controller.readOnly() && controller.noSelectionsInObjectState )" \n            q-translation="ExpressionEditor.EmptySelections" text="inline style" style="color:grey">\n        </span>      \n    </div>\n    \x3c!-- DISTINCT CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-distinct">\n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input" \n                type="checkbox" \n                ng-disabled="controller.readOnly()" \n                ng-model="controller.distinctOption"\n                ng-true-value="\'distinct\'"\n                ng-false-value="\'\'"\n            />\n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-distinct"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly()"\n                    q-translation="ExpressionEditor.Distinct"\n                    q-title-translation="ExpressionEditor.Distinct">\n                </span>\n            </div>\n        </label>\n    </div>\n    \x3c!-- TOTAL CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-total">\n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input"\n                type="checkbox"\n                ng-disabled="controller.readOnly()"\n                ng-model="controller.totalOption"\n                ng-true-value="\'total\'"\n                ng-false-value="\'\'" \n            />\n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-total"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly()"\n                    q-translation="ExpressionEditor.Total"\n                    q-title-translation="ExpressionEditor.Total">\n                </span>\n            </div>\n        </label>\n    </div>\n    \x3c!-- INSERT BUTTON --\x3e\n    <div id="expression-editor-toolbar-insert">\n        <lui-button\n                ng-disabled="!controller.previewText()"\n                type="button"\n                tid="insert-field"\n                ng-click="insertTextHandler($event)"\n                q-title-translation="Tooltip.ExpressionEditor.InsertExpression">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div>\n</div>';var f='<div class="expression-editor-section">\n    \n    <label q-translation="ExpressionEditor.FunctionCategory"></label>\n    <button\n        class="lui-button expression-editor-dropdown" \n        ng-click="openPopover($event)"\n        data-context="functionCategories"\n        title="{{controller.selectedFunctionCategory.label}}">\n        <div class="label">\n            {{controller.selectedFunctionCategory.label}}\n        </div>\n    </button>\n    \n    <div class="expression-editor-function-name">\n        <label q-translation="ExpressionEditor.FunctionName"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="functions"\n            tid="functions-dropdown"\n            title="{{controller.selectedFunction.label}}">\n            <div class="label">\n                {{controller.selectedFunction.label}}\n            </div>\n        </button>\n        <textarea disabled class="expression-editor-function-definition lui-textarea lui-disabled">{{controller.selectedFunctionTip}}</textarea>\n    </div>\n    \n    <div id="expression-editor-toolbar-insert">\n        <lui-button\n            type="button"\n            tid="insert-function"\n            ng-disabled="!controller.previewText()"  \n            ng-click="insertFunctionHandler($event)" \n            q-title-translation="Tooltip.ExpressionEditor.InsertFunction">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div> \n</div>';var p='<div class="expression-editor-section">\n    <div id="expression-editor-toolbar-variables">\n        <label q-translation="ExpressionEditor.VariableList"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="variables"\n            tid="variables-dropdown"\n            title="{{controller.selectedVariable.label}}">\n            <div class="label">\n                {{controller.selectedVariable.label}}\n            </div>\n        </button>\n\n        <div class="expression-editor-system-variables">\n            <label class="lui-checkbox">\n                <input class="lui-checkbox__input" type="checkbox" ng-model="controller.showSystemVars"></input>\n                <div class="lui-checkbox__check-wrap">\n                    <span class="lui-checkbox__check"></span>\n                    <span class="lui-checkbox__check-text label" ng-disabled="readOnly" q-translation="ExpressionEditor.SystemVariables" q-title-translation="ExpressionEditor.SystemVariables"></span>\n                </div>\n            </label>\n        </div>\n        \n        <div class="expression-editor-variable-definition">\n            <label q-translation="ExpressionEditor.Definition"></label>\n            <textarea disabled class="lui-textarea lui-disabled">{{controller.variableDef}}</textarea>\n        </div>\n        \n        <div class="expression-editor-variable-value">\n            <label q-translation="ExpressionEditor.Value"></label>\n            <textarea disabled class="lui-textarea lui-disabled">{{controller.variableVal}}</textarea>\n        </div>\n        \n        <div id="expression-editor-toolbar-insert">\n            <lui-button \n                type="button" \n                ng-click="insertVariableHandler($event)" \n                q-title-translation="Tooltip.ExpressionEditor.InsertVariable" \n                tid="insert-variable">\n                <span q-translation="ExpressionEditor.Insert"></span>\n            </lui-button>\n        </div>\n    </div>\n</div>';var v='<div class="expression-editor-section">\n\n    <div class="expression-editor-toolbar-set-expressions">        \n        <div class="form-element">\n            <lui-radiobutton \n                x-disabled="controller.noSelections" \n                x-model="controller.setExpressionOption" \n                x-change="changeCurrentSetExpressionOption(\'0\')" \n                x-value="0"\n                >\n                {{ \'ExpressionEditor.SetExpressions.ContentOfCurrentSelection\' | translate }}\n            </lui-radiobutton>\n            <lui-radiobutton \n                x-disabled="!controller.bookmarks.length > 0" \n                x-model="controller.setExpressionOption" \n                x-change="changeCurrentSetExpressionOption(\'1\')" \n                x-value="1"\n                >\n                {{ \'ExpressionEditor.SetExpressions.ContentOfBookmark\' | translate }}\n            </lui-radiobutton>\n        </div>\n    </div>\n    <div id="expression-editor-toolbar-set-expression-bookmark" \n        ng-if="controller.setExpressionOption==1">\n        <label q-translation="ExpressionEditor.SetExpresions.Bookmark"></label>\n        <button \n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)" \n            data-context="bookmarks" \n            tid="bookmark-dropdown" \n            title="{{controller.selectedBookmark.label}}">\n            <div class="label">\n                {{controller.selectedBookmark.label}}\n            </div>\n        </button>\n\n    </div>\n    <div id="expression-editor-toolbar-set-expression-states" x-disabled="controller.noSelections && !controller.bookmarks.length > 0" ng-if="controller.showAlternateStates">\n        <label q-translation="ExpressionEditor.SetExpresions.AlternateState"></label>\n        <lui-select x-model="controller.selectedAlternateState">\n            <option value="{{state.value}}" ng-if="controller.setExpressionOption==0" ng-repeat="state in controller.currentSelectionsAlternateStates ">{{state.label}}</option>\n            <option value="{{state.value}}" ng-if="controller.setExpressionOption==1" ng-repeat="state in controller.selectedBookmark.alternateStates ">{{state.label}}</option>\n        </lui-select>\n    </div>\n    <div id="expression-editor-toolbar-insert">\n        <lui-button \n            type="button" \n            tid="insert-set-expression" \n            ng-disabled="controller.disableSetExpressionInsertButton()" \n            ng-click="insertSetExpressionHandler($event)" \n            q-title-translation="Tooltip.ExpressionEditor.InsertSetExpression">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div>\n</div>';var m=i("z4LI");var g=i("4nJ1");var x=i("cWJj");function _(t){var e=[{label:t,value:""},{label:"Sum",value:"Sum"},{label:"Count",value:"Count"},{label:"Avg",value:"Avg"},{label:"Min",value:"Min"},{label:"Max",value:"Max"},{label:"Median",value:"Median"},{label:"Fractile",value:"Fractile"},{label:"Only",value:"Only"},{label:"Concat",value:"Concat"},{label:"Mode",value:"Mode"},{label:"MinString",value:"MinString"},{label:"MaxString",value:"MaxString"},{label:"FirstSortedValue",value:"FirstSortedValue"}];return e}function y(){var t;t=this.selectedField?this.selectedField.value:"";t=g["a"].escapeField(t);if(!this.selectedCommonFunction)return t;if(this.selectedCommonFunction&&""===this.selectedCommonFunction.value)return t;var e=this.distinctOption.length?"".concat(this.distinctOption," "):"";var i=this.totalOption.length?"".concat(this.totalOption," "):"";var a=this.currentOption&&""!==this.selections?"{".concat(this.selections,"} "):"";var n=this.selectedCommonFunction.value;return"".concat(n,"(").concat(a).concat(e).concat(i).concat(t,")")}function b(t){var e=[];t.forEach((function(t){e.push({label:t.qName,value:t.qName})}));return e}function M(t,e){var i=e;return t.filter((function(t){e&&(i=e.value);return-1!==t.qSrcTables.indexOf(i)}))}function w(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}function S(t,e){return t.qName.toLowerCase().localeCompare(e.qName.toLowerCase())}function D(t,e){return t.label.toLowerCase().localeCompare(e.label.toLowerCase())}function A(t){var e=[];t.forEach((function(t){e.push({label:t,value:t})}));return e}function k(t){var e;var i;var a=[];for(e=0;e<t.length;++e)for(i=0;i<t[e].qSrcTables.length;++i)-1===a.indexOf(t[e].qSrcTables[i])&&a.push(t[e].qSrcTables[i]);a.sort(w);a=A(a);return a}function C(t,e,i){var a=i.value;var n=t.allTablesText.value;a!==n&&(e=M(e,i));t.fieldNames=b(e);N(t)}function q(t,e,i){e=e.value;t.functions=[];if(i.hasOwnProperty(e))e&&(t.functions=i[e]);else for(var a in i)i[a].forEach((function(e){-1===t.functions.indexOf(e)&&(t.functions=t.functions.concat(e))}));if(t.functions&&t.functions.length>0){t.functions.sort(w);t.functions=A(t.functions);E(t)}}function L(t,e){var i=t.filter((function(t){return e||!t.qIsReserved&&!t.qIsConfig})).sort(S);i.forEach((function(t){t.label=t.qName;t.value=t.qName}));return i}function P(t,e){var i=[];t.forEach((function(t){if(t.qFieldItems.length>0){var a=t.qStateName;i.push({label:"$"===a?e.get("AlternateState.DefaultState"):a,value:a})}}));return i}function I(t,e){var i=[];var a=true;t=t||[];t.forEach((function(t){if(t.qSelectionObject.qSelections.length>0){var n=t.stateName;a=false;i.push({label:"$"===n?e.get("AlternateState.DefaultState"):n,value:n})}}));return{states:i,noSelections:a}}function T(t,e){var i=[];t.forEach((function(t){i.push({label:t.qData.title,value:t.qInfo.qId,alternateStates:t.qData.qBookmark?P(t.qData.qBookmark.qStateData,e):[]})}));return i.sort(D)}function O(t,e,i){var a=[];e.forEach((function(t){"EXT"!==t&&a.push({value:t,label:i.get("ExpressionEditor.Functions.".concat(t))})}));a.sort((function(t,e){return t.label.toLowerCase().localeCompare(e.label.toLowerCase())}));a.unshift({value:t,label:i.get("ExpressionEditor.Functions.".concat(t))});return a}function N(t){var e=false;t.fieldNames.forEach((function(i){var a=t.selectedField.label;var n=i.label;if(a===n){var s=t.selectedField;e=true;t.selectedField=s}}));e||(t.selectedField=t.fieldNames[0])}function E(t){var e=false;t.functions.forEach((function(i){var a=t.selectedFunction.label;var n=i.label;if(a===n){var s=t.selectedFunction;e=true;t.selectedFunction=s}}));e||(t.selectedFunction=t.functions[0])}function R(t){var e=["$Field","$FieldNo","$Fields","$Info","$Rows","$Table"];var i=[];var a=t.get("ExpressionEditor.FieldsTab.SystemFields");e.forEach((function(t){var e={qName:t,qSrcTables:[a]};i.push(e)}));return i}function V(t,e){0!==e.length||t.showSystemVars||(t.selectedVariable="");t.variables.length>0&&-1===t.variables.indexOf(t.selectedVariable)&&(t.selectedVariable=t.variables[0])}function z(t,e){var i=[];switch(t){case"tables":i=e.tableNames;break;case"fields":i=e.fieldNames;break;case"commonFunctions":i=e.commonFunctions;break;case"functionCategories":i=e.functionCategories;break;case"functions":i=e.functions;break;case"variables":i=e.variables;break;case"bookmarks":i=e.bookmarks;break;default:break}return i}function F(t,e,i,a){switch(e){case"tables":i.setTableFilter(t);i.selectedTable=t;break;case"fields":i.selectedField=t;break;case"commonFunctions":i.selectedCommonFunction=t;break;case"functionCategories":i.selectedFunctionCategory=t;break;case"functions":i.selectedFunction=t;break;case"variables":i.selectedVariable=t;break;case"bookmarks":i.selectedBookmark=t;break;default:break}a(e)}function j(t){return x["a"].get(t).then((function(t){return t.getLayout().then((function(){return{selectionsInStates:t.layout.selectionsInStates||[]}}))}))}function H(t){var e=t.translator;var i=[];var a=t.fields.slice();a.sort(S);t.published||(a=a.concat(R(e)));var n=e.get("Common.All.Tables");var s=e.get("ExpressionEditor.Functions.ALL");var r=e.get("ExpressionEditor.FieldsTab.SelectAggregationHint");var o=t.sections.fields.state;var l=t.sections.functions.state;var c=t.sections.variables.state;n={label:n,value:n};""===o.table.label&&(o.table=n);if(""===o.aggregfunc.label){o.aggregfunc.label=r;o.aggregfunc.value=""}""===l.functionCategory.label&&(l.functionCategory.label=s);for(var h in t.functions)i.push(h);var u={getData:function t(e){return z(e,u)},setSelectedItem:F,allTablesText:n,commonFunctions:_(r),selectedCommonFunction:o.aggregfunc,readOnly:function t(){return""===u.selectedCommonFunction.value},setTableFilter:function t(e){C(u,a,e)},selectedTable:o.table,tableNames:[n].concat(k(a)),fieldNames:b(a),previewText:y,selectedField:o.field,distinctOption:o.distinctCheckBox,totalOption:o.totalCheckBox,currentOption:o.setExpressionCheckBox,selections:"",noSelections:false,noSelectionsInObjectState:false,functions:[],functionCategories:O("ALL",i,e),selectedFunction:l.funct,selectedFunctionTip:"",selectedFunctionCategory:l.functionCategory,setFunctionCategoryFilter:function e(i){q(u,i,t.functions)},variables:L(t.variables,false),selectedVariable:c.variable,variableDef:"",variableVal:"",showSystemVars:c.sysVarsCheckBox,showVariablesFirstTime:c.showVariablesFirstTime,showVariableInfo:function t(e,i){u.variableDef=e;u.variableVal=i},setSysVarsFilter:function e(){var i=t.variables.filter((function(t){return!t.qIsReserved}));if(0===i.length&&u.showVariablesFirstTime){c.sysVarsCheckBox=true;u.showSystemVars=true;c.showVariablesFirstTime=false;u.showVariablesFirstTime=false}u.variables=L(t.variables,u.showSystemVars);V(u,i)},setCurrentSelections:function t(e){u.selections=e},isStateInArray:function t(e,i){var a=false;e.forEach((function(t){t.value===i&&(a=true)}));return a},setInitialOptionsForSetExpressionSection:function e(i){u.noSelections=i;if(i&&"0"===u.setExpressionOption)if(u.bookmarks.length>0){u.setExpressionOption="1";if(""===u.selectedBookmark){u.selectedBookmark=u.bookmarks[0];""===u.selectedAlternateState&&u.bookmarks[0].alternateStates.length>0&&(u.selectedAlternateState=u.bookmarks[0].alternateStates[0].value)}}else{u.setExpressionOption="";u.setExpressionInsertDisabled=true}else"0"===u.setExpressionOption&&u.currentSelectionsAlternateStates.length>0&&(u.selectedAlternateState=u.isStateInArray(u.currentSelectionsAlternateStates,t.sections.setExpressions.state.selectedAlternateState)?t.sections.setExpressions.state.selectedAlternateState:u.currentSelectionsAlternateStates[0].value)},disableSetExpressionInsertButton:function t(){return!u.selectedAlternateState},showAlternateStates:t.showAlternateStates,setExpressionOption:t.sections.setExpressions.state.setExpressionOption,bookmarks:T(t.bookmarks,e),currentSelectionsAlternateStates:[],selectedBookmark:t.sections.setExpressions.state.selectedBookmark,selectedAlternateState:t.sections.setExpressions.state.selectedAlternateState,setExpressionInsertDisabled:false,stateName:t.stateName};j(t.app).then((function(i){var a=t.stateName||"$";u.noSelectionsInObjectState=true;i.selectionsInStates.forEach((function(t){t.stateName===a&&t.qSelectionObject.qSelections.length>0&&(u.noSelectionsInObjectState=false)}));var n=I(i.selectionsInStates,e);u.currentSelectionsAlternateStates=n.states;u.setInitialOptionsForSetExpressionSection(n.noSelections)}));N(u);return u}var B={create:H};var $=i("ESef");var W=i("0GN8");var U=i("6uJb");var G=i("bam4");var Z=i("rB9Y");var Y=i("acVu");function X(t,e,i,a,n,s,r){try{var o=t[s](r);var l=o.value}catch(t){i(t);return}o.done?e(l):Promise.resolve(l).then(a,n)}function K(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){X(s,a,n,r,o,"next",t)}function o(t){X(s,a,n,r,o,"throw",t)}r(void 0)}))}}var J=["like","not","and","or","xor","follows","precedes","bitnot","bitand","bitor","bitxor","$","$1","$2","$3","$4","$5","$_1","$_2","$_3","$_4","$_5","total","distinct","nodistinct","all","include","must_include"];function Q(t,e){if("field"===t||"measure"===t)return{text:e,type:t,value:g["a"].escapeField(e)};return{text:e,type:t}}function tt(t){var e=t.bnf;var i=et();var a=t.fields;var n=t.variables;var s=t.measures;var r=J.map(Q.bind(null,"keyword"));var o=Object.keys(n).map(Q.bind(null,"variable"));var l=Object.keys(s).map(Q.bind(null,"measure"));var c=Object.keys(a).map(Q.bind(null,"field"));var h=e.getAllFunctions().map(Q.bind(null,"function"));var u=r.concat(o,l,c,h);function d(t){return e.isFunction(t)}function f(t){return e.getFunctionTip(t)}function p(t){return!!i[t.toLowerCase()]||d(t)}function v(t){return!!a[t]}function m(t){while(t){if("qvfunction"===t.type&&"aggr"===t.info.toLowerCase())return false;if("qvfunction"===t.type&&e.isAggrFunction(t.info))return true;t=t.prev}return false}function g(t,e){return!!s[t]&&!m(e.lexical)}function x(t){return!!n[t]}function _(){return u}var y={getAutocompleteList:_,getFunctionTip:f,getFunctionsAndCategories:e.getAllFunctionsAndCategories,isFunction:d,isField:v,isKeyword:p,isMeasure:g,isVariable:x};return y}function et(){var t={};for(var e=0;e<J.length;++e){var i=J[e];t[i]=true}return t}function it(t){return t.enigmaModel.getFieldList().then((function(t){t=c["a"].expand(t);var e={};for(var i=0;i<t.length;++i){var a=t[i].qName;e[a]=true}return e}))}function at(t){return t.enigmaModel.getVariableList().then((function(t){var e={};for(var i=0;i<t.length;++i){var a=t[i].qName;e[a]=true}return e}))}function nt(t){return st.apply(this,arguments)}function st(){st=K(regeneratorRuntime.mark((function t(e){var i,a,n,s;return regeneratorRuntime.wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return e.enigmaModel.getMeasureList();case 2:i=r.sent;a={};for(n=0;n<i.length;++n){s=i[n].qData.title;a[s]=true}return r.abrupt("return",a);case 6:case"end":return r.stop()}}),t)})));return st.apply(this,arguments)}function rt(t){return ot.apply(this,arguments)}function ot(){ot=K(regeneratorRuntime.mark((function t(e){var i,a,n,s;return regeneratorRuntime.wrap((function t(r){while(1)switch(r.prev=r.next){case 0:i=Z["a"].getExpressionBnfModel(e);a=it(e);n=at(e);s=Object(Y["b"])("REF_MASTER_MEASURE")?nt(e):[];r.t0=tt;r.next=7;return i;case 7:r.t1=r.sent;r.next=10;return a;case 10:r.t2=r.sent;r.next=13;return n;case 13:r.t3=r.sent;r.next=16;return s;case 16:r.t4=r.sent;r.t5={bnf:r.t1,fields:r.t2,variables:r.t3,measures:r.t4};return r.abrupt("return",(0,r.t0)(r.t5));case 19:case"end":return r.stop()}}),t)})));return ot.apply(this,arguments)}var lt={get:rt};var ct='<lui-popover \n    class="popover-wrapper" \n    style="min-width: 200px;width: 230px;" \n    align-to="alignTo" \n    position="position" \n    collision="\'flipfit\'" \n    on-close-view="closePopover(event)">\n    <object-add-typeahead>\n        <lui-popover-header>\n            <div class="lui-search">\n                <span class="lui-icon  lui-icon--search  lui-search__search-icon"></span>\n                <input class="lui-search__input" maxlength="255" spellcheck="false" type="text" name="new-test" placeholder="{{ \'ExpressionEditor.SearchPopupPlaceholder\' | translate}}" autocomplete="off"\n                    ng-model="search.term" on-escape="onEscape($event)" qva-focus="autoFocus" object-add-typeahead-input/>\n                <button class="lui-search__clear-button" ng-click="clearSearchTerm()">\n                    <span ng-if="showClearIcon" class="lui-icon  lui-icon--small  lui-icon--close"></span>\n                </button>\n            </div>        \n        </lui-popover-header>\n        <div class="content" object-add-typeahead-menu>\n            <ul class="lui-list">\n                <li class="lui-list__item lui-list__action"                    \n                    ng-repeat="item in items" tid="item"\n                    object-add-typeahead-item="item"\n                    on-select="setSelectedItem(item, context, ctrl, closePopover)">\n                    <span qve-highlight text="{{item.label}}" title="{{item.label}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n                </li>\n            </ul>\n        </div>\n    </object-add-typeahead>\n</lui-popover>';var ht=i("wIyQ");var ut=i("G1wx");var dt=i("5ezW");var ft=i("dtUF");function pt(t,e){if(""===e)return t;return t.filter((function(t){if("undefined"===typeof t)return false;return dt["a"].string(t.label.toLowerCase()).indexOf(dt["a"].string(e.toLowerCase()))>-1}))}var vt={template:ct,scope:{alignTo:"=",close:"=",qvaOutsideIgnoreFor:"=",position:"="},controller:["$scope",function(t){var e=g["a"].extend([],t.items);t.autoFocus=ut["a"].treatAsDesktop();t.search={term:""};t.onEscape=function(){t.search.term="";t.closePopover(t.context)};t.clearSearchTerm=function(){t.search.term=""};t.$watch("search.term",(function(i){t.items=pt(e,i);t.showClearIcon=""!==i}));ht["a"].on("start",t.closePopover);t.$on("$destroy",(function(){ht["a"].off("start",t.closePopover)}))}]};var mt=vt;var gt=i("kKh9");var xt=i("ghLF");var _t='<div class="qv-expandable-list-component" tcl="expandable-list">\n\t<ul class="qv-expandable-list">\n\t\t<li ng-repeat="item in items track by item.key" tid="section {{item.key}}">\n\t\t\t<div class="qv-expandable-list-header" qva-activate="expandClicked(item)" ng-class="{ \'expanded\': item.state.stateExpanded }" tid="{{item.key}}">\n                <i class="toggle-expand  lui-icon  {{ item.expanded ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }}"></i>\n\t\t\t\t<span class="text" q-translation="{{item.translation}}"></span>\n\t\t\t</div>\n\t\t\t<div class="qv-expandable-list-content" ng-if="item.expanded">\n\t\t\t\t<div include-section></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>';h["default"].directive("qvExpandableList",[function(){return{restrict:"A",template:_t,controller:["$scope",function(t){t.expandClicked=function(t){t.expanded=!t.expanded;"undefined"!==typeof t.state&&(t.expanded?t.state.sectionExpanded=true:t.state.sectionExpanded=false)}}]}}]);h["default"].directive("includeSection",[function(){return{restrict:"A",controller:["$scope","$element","$compile",function(t,e,i){e.append(i(t.item.template)(t))}]}}]);var yt='<div class="ia-wrapper" ng-class="{ \'collapsed\' : state.expanded, \'ia-light\' : nbrOfStatements <= 1 }">\r\n    <div class="icon-column">\r\n        <span class="lui-icon  lui-icon--info" aria-hidden="true"></span>\r\n    </div>\r\n    <div class="text-column">\r\n        <div class="ia-text">\r\n           \r\n            <div class="hint" ng-if="info.translatedErrorMgs !== \'\'">\r\n                <span>{{info.translatedErrorMgs}}</span>\r\n            </div>\r\n            <div class="hint" ng-if="info.extraErrorMsg !== \'\'">\r\n                <span>{{info.extraErrorMsg}}</span>\r\n            </div>\r\n            <div class="evaluated" ng-if="info.expandedExpr !== \'\'">\r\n                {{info.expandedExpr}}\r\n            </div>\r\n               \r\n        </div>\r\n    </div>\r\n    <div class="action-column">\r\n        <span class="lui-icon  lui-icon--arrow-down" \r\n              ng-class="{ \'lui-icon--arrow-down\' : !state.expanded, \'lui-icon--arrow-up\' : state.expanded }" \r\n              aria-hidden="true"\r\n              ng-if="nbrOfStatements > 1"\r\n              ng-click="expandCollapse($event)">\r\n        </span>\r\n    </div>    \r\n</div>';function bt(t){return t?l["a"].resolve(t.enigmaModel):o["a"].getApp()}var Mt={};Mt.getExpandedExpression=function(t,e){return bt(t).then((function(t){return t.engineApp.expandExpression(e)})).catch((function(t){console.error("error".concat(t))}))};var wt=Mt;var St=i("3I2r");h["default"].directive("qvInformationArea",(function(){return{scope:{info:"=",app:"=",mode:"="},restrict:"E",replace:true,template:yt,link:function t(e,i){e.nbrOfStatements=0;e.exprValidator=null;e.state={expanded:false,autoExpanded:false};var a="validating";var s="valid";var r="invalid";var o=i.find(".text-column");var l=n()("#expression-editor-content");var c=[{start:"[",end:"]",remove:false},{start:"$(",end:")",remove:false},{start:"'",end:"'",remove:false},{start:'"',end:'"',remove:false},{start:["`","´"],end:["`","´"],remove:false},{start:"//",end:{EOL:true},remove:true},{start:"/*",end:"*/",remove:true}];function h(){setTimeout((function(){o.css({"max-height":l.height()/2})}))}function u(){var t=0;""!==e.info.translatedErrorMgs&&t++;""!==e.info.extraErrorMsg&&t++;""!==e.info.expandedExpr&&t++;t>1&&(e.state.autoExpanded=true);e.nbrOfStatements=t}function d(t){e.info.status=t.valid?s:r;e.info.errorMsg=t.valid?"Common.OK":"Expression.Validation.InvalidExpression";e.info.translatedErrorMgs=U["default"].get(e.info.errorMsg);e.info.extraErrorMsg="";if(t.data)if(t.data.bad.length>0){var i=t.data.bad.map((function(t){return t.name}));e.info.errorMsg={id:"Expression.Validation.BadFieldName",value:[i.join(", ")]}}else t.data.error&&(e.info.extraErrorMsg=t.data.error);u()}function f(t){var e=-1;var i=null;var a=function a(s){if(i){var r=-1;t.slice(s).startsWith(i.end)||Array.isArray(i.end)&&(t.slice(s).startsWith(i.end[0])||t.slice(s).startsWith(i.end[1]))?r=s+i.end.length:i.end.EOL&&(t.slice(s).startsWith("\n")||t.slice(s).startsWith("\r\n")||s===t.length-1)&&(r=s+1);if(r>-1){if(i.remove){t=t.slice(0,e)+t.slice(r);s-=r-e}i=null}}else{var o=c.find((function(e){n=s;return!(!Array.isArray(e.start)||!t.slice(s).startsWith(e.start[0])&&!t.slice(s).startsWith(e.start[1]))||t.slice(s).startsWith(e.start)}));if(o){i=o;e=s}}n=s};for(var n=0;n<t.length;n++)a(n);return t}e.$watch("info.codeArea.content",(function(t){e.info.status=a;wt.getExpandedExpression(e.app,t).then((function(i){if(null==e.exprValidator){e.exprValidator=new St["a"].ExpressionValidator(e.app,e.mode);e.exprValidator.Update.bind((function(t){d(t)}))}e.info.expr=f(t);e.info.expandedExpr=f(i.qExpandedExpression);e.info.translatedErrorMgs=U["default"].get(e.info.errorMsg);e.exprValidator.validate(e.info.expandedExpr,e.labels)}))}));e.expandCollapse=function(){e.state.expanded=!e.state.expanded};h();ht["a"].on("end.ee-update-size",h);e.$on("$destroy",(function(){ht["a"].off("end.ee-update-size",h);e.exprValidator=null}))}}}));var Dt=null;var At=null;var kt=[];function Ct(){if(At){At.close();At=null}}function qt(t){if(kt[t]){kt[t].close();kt[t]=null}}function Lt(t,e){e.preventDefault();var i=t.controller.previewText();t.codearea.contextApi.replaceSelection(i)}function Pt(t,e){e.preventDefault();t.codearea.contextApi.replaceSelection("".concat(t.controller.selectedFunction.value,"()"));var i=t.codearea.contextApi.getCursor();i.ch+=-1;t.codearea.contextApi.setCursor(i)}function It(t,e){e.preventDefault();t.codearea.contextApi.replaceSelection(t.controller.selectedVariable.qName)}function Tt(t,e){e.preventDefault();"0"===t.controller.setExpressionOption?gt["a"].getCurrentSelections(t.controller.app,t.controller.selectedAlternateState).then((function(e){void 0!==e&&void 0!==e.qSetExpression&&""!==e.qSetExpression?t.codearea.contextApi.replaceSelection("{".concat(e.qSetExpression,"}")):void 0!==e&&void 0!==e.qSetExpression||Vt()})):t.controller.selectedBookmark&&gt["a"].getSelectionsFromBookmarkId(t.controller.app,t.controller.selectedBookmark.value,t.controller.selectedAlternateState).then((function(e){void 0!==e&&void 0!==e.qSetExpression&&""!==e.qSetExpression?t.codearea.contextApi.replaceSelection("{".concat(e.qSetExpression,"}")):void 0!==e&&void 0!==e.qSetExpression||Vt()}))}function Ot(t,e){t.functionTipOptions={service:e,view:G["a"]}}function Nt(t,e,i,a){if(!i)return;if(At){r();return}i=i.replace(/\n/g," ");/^(input|textarea)$/i.test(document.activeElement.tagName)&&n.a.support.touch&&document.activeElement.blur();function s(){r();e.codearea.contextApi.focus()}function r(){n()(document).off("keydown",s);n()(document).off("mouseup",s);Ct()}At=h["default"].getService("luiPopover").show({template:"<lui-popover><lui-popover-body><p>{{input.text}}</p></lui-popover-body></lui-popover>",input:{text:i},controller:["$element",function(t){t.css("z-index","1200")}],alignTo:a.target,closeOnEscape:true,closeOnOutside:true,dock:"top",autoFocus:false});At.closed.then((function(){r()}));n()(document).one("keydown",{self:this},s);n()(document).one("mouseup",{self:this},s)}function Et(t,e){var i={expression:t,validity:e.validity};return W["a"].validateExpr(i,$["a"])}function Rt(t){var e={};t.forEach((function(t){t.fglist.forEach((function(i){e[i]||(e[i]=[]);e[i].push(t.func)}))}));return e}function Vt(){var t=h["default"].getService("qvAlertDialog");return t.show({title:U["default"].get("ErrorDialog.Title"),message:U["default"].get("ExpressionEditor.TooManySelections"),closeOnEscape:false})}function zt(){var t={statusText:"",errorMsg:"",extraErrorMsg:"",status:"",expr:"",expandedExpr:"",codeArea:null};return t}var Ft=false;var jt={template:u,sections:{fields:{key:"fields",translation:"ExpressionEditor.Fields",template:d,state:{sectionExpanded:true,table:{label:"",value:""},field:{label:"",value:""},aggregfunc:{label:"",value:""},setExpressionCheckBox:false,distinctCheckBox:"",totalCheckBox:""},expanded:true},functions:{key:"functions",translation:"ExpressionEditor.Functions",template:f,state:{sectionExpanded:false,functionCategory:{label:"",value:"ALL"},funct:{label:"",value:""}},expanded:false},setExpressions:{key:"setExpressions",translation:"ExpressionEditor.SetExpressions",template:v,state:{sectionExpanded:false,setExpressionOption:"0",selectedBookmark:"",selectedAlternateState:""},expanded:false},variables:{key:"variables",translation:"ExpressionEditor.Variables",template:p,state:{sectionExpanded:false,variable:"",sysVarsCheckBox:false,showVariablesFirstTime:true},expanded:false}},controller:["$scope","$element","$timeout",function(t,e,i){t.stringLimits=$["a"];t.controller=t.input.controller;t.codearea={content:t.input.expr};t.validity={expression:true};t.initializeToolbar=function(){t.undoDisabled=false;t.redoDisabled=false};t.sections=jt.sections;t.items=[jt.sections.fields,jt.sections.functions,jt.sections.setExpressions,jt.sections.variables];t.$watch("controller.helpmodeActive",(function(){if(t.controller.helpmodeActive){t.helpmodeTooltip="Tooltip.HelpMode.Exit";t.undoDisabled=true;t.redoDisabled=true}else{t.helpmodeTooltip="Tooltip.HelpMode.Enter";t.undoDisabled=false;t.redoDisabled=false}}));t.$watch("controller.selectedFunctionCategory",(function(e){t.sections.functions.state.functionCategory=e;t.controller.setFunctionCategoryFilter(e)}));t.$watch("controller.selectedFunction",(function(e){t.sections.functions.state.funct=e;e&&(t.controller.selectedFunctionTip=t.input.expressionBnfModel.getFunctionTip(e.value))}));t.$watch("controller.selectedTable",(function(e){t.sections.fields.state.table=e;t.controller.setTableFilter(e)}));t.$watch("controller.selectedField",(function(e){t.sections.fields.state.field=e}));t.$watch("controller.selectedFunction",(function(e){t.sections.fields.state.funct=e}));t.$watch("controller.selectedCommonFunction",(function(e){t.sections.fields.state.aggregfunc=e}));t.$watch("controller.currentOption",(function(e){t.sections.fields.state.setExpressionCheckBox=e;e&&gt["a"].getCurrentSelections(t.app,t.controller.stateName).then((function(i){if(void 0!==i&&void 0!==i.qSetExpression&&""!==i.qSetExpression)t.controller.setCurrentSelections(i.qSetExpression);else if(void 0===i||void 0===i.qSetExpression){t.controller.currentOption=!e;t.sections.fields.state.setExpressionCheckBox=!e;Vt()}else{t.controller.currentOption=!e;t.items[0].state.setExpressionCheckBox=!e}})).catch((function(){t.controller.currentOption=!e;t.sections.fields.state.setExpressionCheckBox=!e}))}));t.$watch("controller.distinctOption",(function(e){t.sections.fields.state.distinctCheckBox=e}));t.$watch("controller.totalOption",(function(e){t.sections.fields.state.totalCheckBox=e}));t.$watch("controller.showSystemVars",(function(e){t.sections.variables.state.sysVarsCheckBox=e;t.controller.setSysVarsFilter()}));t.$watch("controller.selectedVariable",(function(e){t.sections.variables.state.variable=e;e?e.qDefinition&&0===e.qDefinition.indexOf("=")?t.app.evaluate(e.qDefinition).then((function(i){t.controller.showVariableInfo(e.qDefinition,i)})):t.controller.showVariableInfo(e.qDefinition,e.qDefinition):t.controller.showVariableInfo("","")}));t.enableTouchOverlay=r.a.utils.touch;t.insertTextHandler=Lt.bind(null,t);t.insertFunctionHandler=Pt.bind(null,t);t.insertVariableHandler=It.bind(null,t);t.insertSetExpressionHandler=Tt.bind(null,t);t.info=zt();t.showErrorMessage=Nt.bind(null,e,t);t.qlikviewReloadScriptMode={name:"qlikviewscript",service:t.input.expressionBnfModel};t.helpModeOptions={syntax:"chartsyntax",service:t.input.expressionBnfModel};t.autocompleteOptions={completeSingle:false,service:t.input.expressionBnfModel};Ot(t,t.input.expressionBnfModel);t.cancel=function(){t.close();t.$destroy()};function a(t){return t.replace(/(\r\n|\r|\n)/,"\r\n")}t.confirm=function(){var e=a(t.codearea.content);var i=Et(e,t);(i||t.input.allowEmpty&&""===e)&&t.close(e)};m["a"].StateChanged.bind(t.cancel);function s(e){t.info.codeArea=t.codearea;e=a(e);t.validity.expression||Et(e,t)}ut["a"].treatAsDesktop()&&i((function(){i((function(){t.codearea.contextApi.focus();t.codearea.contextApi.setCursor(t.codearea.contextApi.lineCount(),0)}))}));t.$watch("codearea.content",s);t.openPopover=function(e){var i=e.currentTarget.dataset.context;Dt&&kt&&Dt!==i&&qt(Dt);Dt=i;if(!kt[i]){kt[i]=h["default"].getService("luiPopover").show({template:mt.template,controller:mt.controller,alignTo:e.currentTarget,input:{context:i,ctrl:t.controller,closePopover:qt,items:t.controller.getData(Dt),setSelectedItem:t.controller.setSelectedItem},position:"bottom",closeOnEscape:true});kt[i].closed.then((function(){qt(i)}))}};i((function(){n()(".qv-expandable-list-component").on("scroll",(function(){qt()}))}));t.closePopoverIfOpen=function(t){var e=n()(t.currentTarget).parents(".popover-wrapper").length>0;var i=n()(t.target).hasClass("expression-editor-dropdown");var a=n()(t.target).hasClass("label");e||i||a||qt(Dt)};t.$on("$destroy",(function(){Ct();qt(Dt);n()(".qv-expandable-list-component").off("scroll");Ft=false;m["a"].StateChanged.unbind(t.cancel)}));t.onHelpmode=function(){t.controller.helpmodeActive=!t.controller.helpmodeActive;n()(document.body).toggleClass("help-mode",t.controller.helpmodeActive)};function o(){t.controller.helpmodeActive=false}t.onUndo=function(){o();t.codearea.contextApi.undo()};t.onRedo=function(){o();t.codearea.contextApi.redo()};t.initializeToolbar();t.changeCurrentSetExpressionOption=function(e){t.sections.setExpressions.state.setExpressionOption=e;t.controller.selectedBookmark="";t.controller.selectedAlternateState="";"0"===e?t.controller.currentSelectionsAlternateStates.length>0&&(t.controller.selectedAlternateState=t.controller.currentSelectionsAlternateStates[0].value):t.controller.bookmarks.length>0&&(t.controller.selectedBookmark=t.controller.bookmarks[0])};t.$watch("controller.selectedBookmark",(function(e){t.sections.setExpressions.state.selectedBookmark=e;e&&e.alternateStates.length>0&&(t.controller.isStateInArray(e.alternateStates,t.controller.selectedAlternateState)||(t.controller.selectedAlternateState=e.alternateStates[0].value))}));t.$watch("controller.selectedAlternateState",(function(e){t.sections.setExpressions.state.selectedAlternateState=e}))}]};function Ht(t){var e=t.app?l["a"].resolve(t.app.enigmaModel):o["a"].getApp();return e.then((function(e){return l["a"].all({bnf:lt.get(e),fields:e.getFieldList(),variables:e.getVariableList(),layout:e.getLayout(),bookmarks:e.getBookmarkList()}).then((function(i){if(Ft)return l["a"].reject();var a=i.bnf;var n=c["a"].expand(i.fields);var s=Rt(a.getFunctionsAndCategories());var r=String(t.expr||"");var o={title:t.title,allowEmpty:t.allowEmpty,labels:t.labels,expr:r,mode:t.mode,controller:B.create({fields:n,sections:jt.sections,functions:s,variables:i.variables,bookmarks:i.bookmarks,translator:U["default"],showAlternateStates:e.layout.qStateNames.length>0,stateName:t.stateName,published:true===i.layout.published,app:e}),app:e,expressionBnfModel:a};Ft=true;var u=h["default"].getService("luiDialog").show({template:jt.template,controller:jt.controller,input:o,closeOnOutside:false,showArrow:false});return u.closed.then((function(t){if(void 0===t)return l["a"].reject();return t}))}))}))}function Bt(){return Ft}var $t=e["a"]={_insertTextHandler:Lt,show:Ht,isOpen:Bt}},DWZC:function(t,e,i){"use strict";var a=i("AaFn");var n=i("P8Hz");var s=i("4nJ1");var r=i("BcSl");var o=i("WRI6");var l;var c;var h;var u;var d;function f(t,e){var i=t?p(t):null;if(i){var a=i.getDimensions();if(a.length)return"".concat(e.qText,",").concat(a.join(","))}return e.qText}function p(t){if("P"===t.data.qType&&t.parent)return t.parent.cacheItem;return t.cacheItem}function v(t,e){return t.labelExpRef?s["a"].getValue(e,t.labelExpRef):t.label}function m(t,e,i,n){var s=new a["a"];var r=[];var o;var d=[];if(t&&t.length){l=0;c=e&&e.length<2;h=e;u=i;s.data.qApprMaxGlyphCount=u[0]?u[0].qApprMaxGlyphCount:0;o=g(n,t[0].qSubNodes,s,r,d,0);return{dimensionTree:o,cacheItems:r}}return{dimensionTree:s,cacheItems:[]}}function g(t,e,i,s,r,o){var m;var _;var y;var b;var M;r[l]||(r[l]={});for(var w=0;w<e.length;w++){var S=[];var D=[];var A=[];if("T"===e[w].qType)continue;m=new a["a"];m.data.qType=e[w].qType;m.data.qMaxPos=e[w].qMaxPos;m.data.qMinNeg=e[w].qMinNeg;"P"===e[w].qType&&(d=e[w]);if("V"===e[w].qType||"E"===e[w].qType||"P"===e[w].qType){m.data.qText=e[w].qText;m.data.qNum=Number.isNaN(+e[w].qValue)?e[w].qNum:e[w].qValue;m.data.qValue=e[w].qValue;m.data.rowIndex=0;if(c){_=new a["a"];_.data.qType="_M";_.data.qMaxPos=m.data.qMaxPos;_.data.qMinNeg=m.data.qMinNeg;_.data.qText=h[0].qFallbackTitle;_.data.rowIndex=e[w].qRow;_.addChild(m);m=_}else m.data.rowIndex=e[w].qRow}else{m.data.qText="O"===e[w].qType&&u[o]?u[o].othersLabel||"":e[w].qText;u[o+1]&&(m.data.qApprMaxGlyphCount=u[o+1].qApprMaxGlyphCount);m.data.qElemNo=e[w].qElemNo;m.data.rowIndex=e[w].qRow}i.addChild(m);if("V"!==e[w].qType&&"P"!==e[w].qType){var k=f(i,e[w]);if(r[l][k]&&d){b=r[l][k];m.cacheItem=b}else{b=new n["a"](null,null,null,null,e[w].qRow,l);m.cacheItem=b;b.addDimension(m.data.qText);b.id=e[w].qElemNo;if("U"!==e[w].qType){e[w].qAttrDims&&e[w].qAttrDims.qValues.forEach((function(e,i){b.addAttributeDimension(e.qElemNo,e.qText,v(u[o].qAttrDimInfo[i],t))}));if(u[o]){var C=x(e[w].qAttrExps,u[o],t),q=C.customTooltipAttrExpsArr,L=C.customTooltipInfoAttrExpsArr,P=C.attributeExpressionArr;D=D.concat(q);A=A.concat(L);S=S.concat(P)}}var I=p(i);if(I){b=m.cacheItem;b.parent=I;I.children.push(b);M=b.parent.getDimensions();for(y in M)b.addDimension(M[y])}r[l][k]=b}}if("V"===e[w].qType){b=p(i);if(b){b.addMeasure(d?d.qText:m.data.qText,e[w].qValue,e[w].qText);s.includes(b)||s.push(b)}}if(e[w].qSubNodes&&e[w].qSubNodes.length>0){l++;m=g(t,e[w].qSubNodes,m,s,r,o+("V"!==e[w].qType?1:0))}S.forEach((function(t){b.addMeasure(t.label,t.value)}));D.forEach((function(t){b.addCustomTooltipAttribute(t)}));A.forEach((function(t){b.addCustomTooltipInfoAttributes(t)}))}--l;return i}function x(t,e,i){var a={customTooltipAttrExpsArr:[],customTooltipInfoAttrExpsArr:[],attributeExpressionArr:[]};var n=e.qAttrExprInfo;var s=o["a"].getCustomTooltipInfoIdList();t&&n&&t.qValues.forEach((function(t,e){if(n[e].id===r["a"].CUSTOM.EXPRESSION)a.customTooltipAttrExpsArr.push({qNum:t.qNum,qText:t.qText});else if(s[n[e].id]){var o=void 0!==t.qText?t.qText:n[e].qFallbackTitle;a.customTooltipInfoAttrExpsArr.push({value:o,id:n[e].id})}else a.attributeExpressionArr.push({value:t.qNum,label:v(n[e],i)})}));return a}e["a"]={prepareData:m,retrieveAttrExpsValues:x}},EDQw:function(t,e,i){"use strict";var a=i("2Hli");var n={className:/^\w[\w-]+/,attr:/^\[\w(?:[\w._-]+)?(?:[!]?=['"][\w\s*#_-]*['"])?\]/};var s={className:function t(e,i){return i.filter((function(t){var i=t.constructor.name;if(i){var a=e.replace(/(-[a-z])/g,(function(t){return t[1].toUpperCase()}));a=a[0].toUpperCase()+a.slice(1);return i===e||i===a}return false}))},attr:function t(e,i,n,s){return s.filter((function(t){var s=a["a"].getValue(t,e);if(!i)return"undefined"!==typeof s;if("undefined"===typeof s)return false;switch(i){case"=":return n===String(s);case"!=":return n!==String(s);default:break}return false}))}};var r={find:function t(e,i){var a;var n=[];var s=[];var r;if(i.isBranch){a=this._tokenize(e);r=i.descendants;a.forEach((function t(e){var i=r.slice();var a=[];var n=false;e.reverse().forEach((function t(e){if(" "===e.type){a.push(i);i=r.slice();n=false;return}i=this._filter(e,i);n=true}),this);n&&a.push(i);var o=a[0].filter((function(t){var e=t.parent;var i;var n;for(i=1;i<a.length;i++){while(e&&(n=a[i].indexOf(e))<0)e=e.parent;if(n<0)return false}return true}));s.push(o)}),this);s.forEach((function(t){t.forEach((function(t){n.indexOf(t)<0&&n.push(t)}))}))}return n||[]},_filter:function t(e,i){if(!i||!i.length||!e||"function"!==typeof s[e.type])return[];switch(e.type){case"className":return s[e.type](e.value,i);case"attr":return s[e.type](e.attribute,e.operator,e.attributeValue,i);default:break}return[]},_tokenize:function t(e){var i=[];var a;var s;var r;var o;e.split(/\s*,\s*/).forEach((function(t){t=t.trim();a=[];while(t){o=false;r=t.match(/^\s*([>+~]|\s)\s*/);if(r){o=true;a.push({type:" ",value:r[0]});t=t.slice(r[0].length)}for(var e in n){r=t.match(n[e]);if(r){o=true;t=t.slice(r[0].length);s={type:e,value:r[0]};if("attr"===e){r=r[0].match(/\[(\w[\w._-]+)?(?:([!]?=)['"]([\w\s#_-]*)['"])?\]/);s.attribute=r[1];s.operator=r[2];s.attributeValue=r[3]}a.push(s)}}a&&a.length&&i.indexOf(a)<0&&i.push(a);if(!o)break}}));return i}};e["a"]=r},GULB:function(t,e,i){"use strict";var a=i("Z9ZH");var n=i.n(a);var s=i("SOxp");var r=i("i7ks");var o=i("FJpR");var l=i("MoEg");var c=i("wkj2");var h=i("Nc9l");function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function f(t,e,i){e&&d(t.prototype,e);i&&d(t,i);return t}var p=function(){function t(){u(this,t)}f(t,[{key:"getProjectionType",value:function t(){return"Unit"}},{key:"project",value:function t(e){return e}},{key:"invProject",value:function t(e){return e}}]);return t}();var v=p;var m=22;var g=1e-9;var x=.001;var _=new o["a"](0,0);var y=Math.log(2);function b(t){if(this._originalProjectedDataCenterIsZeroPoint)return t;return new o["a"](t.x-this._originalProjectedDataCenter.x,t.y-this._originalProjectedDataCenter.y)}function M(t){if(this._originalProjectedDataCenterIsZeroPoint)return t;return new o["a"](t.x+this._originalProjectedDataCenter.x,t.y+this._originalProjectedDataCenter.y)}function w(t,e){var i=Math.pow(2,e+8)/this._projectedDataSize;return new o["a"](t.x*i,t.y*i)}function S(t,e){var i=Math.pow(2,e+8)/this._projectedDataSize;return new o["a"](t.x/i,t.y/i)}function D(){if(!this._projection||!this._projectedDataBoundingBox)return;(!this._currentProjectedDataDataCenter||this._projectionChanged||this._currentDataCenterChanged)&&(this._currentProjectedDataDataCenter=void 0===this._currentDataCenter?this._originalProjectedDataCenter:this._projection.project(this._currentDataCenter));this._transformMatrixForZoomLevel.identity();this._transformMatrixForZoomLevel.translate(this._viewportSize.x/2,this._viewportSize.y/2);this._mirrorYAxis&&this._transformMatrixForZoomLevel.scale(1,-1);var t=Math.pow(2,this._zoomLevel+8)/this._projectedDataSize;this._transformMatrixForZoomLevel.scale(t,t);this._transformMatrixForZoomLevel.translate(-this._originalProjectedDataCenter.x,-this._originalProjectedDataCenter.y);var e=this._transformMatrixForZoomLevel.transformPoint(this._originalProjectedDataCenter);var i=this._transformMatrixForZoomLevel.transformPoint(this._currentProjectedDataDataCenter);var a=e.x-i.x;var n=e.y-i.y;this._transformMatrix.identity();this._transformMatrix.translate(a,n);this._transformMatrix.multiply(this._transformMatrixForZoomLevel.elements);this._invTransformMatrix=this._transformMatrix.clone();this._invTransformMatrix.invert();this._projectionChanged=false;this._currentDataCenterChanged=false;this.enabledChangeEvent&&this.fire("changed")}function A(){var t={x:this._boundingBox.x,y:this._boundingBox.y};var e={x:this._boundingBox.x+this._boundingBox.width,y:this._boundingBox.y+this._boundingBox.height};var i=this._projection.project(t);var a=this._projection.project(e);var n=Math.min(i.x,a.x);var s=Math.min(i.y,a.y);this._projectedDataBoundingBox=new l["a"](n,s,Math.abs(a.x-i.x),Math.abs(a.y-i.y));this._projectedDataSize=Math.max(this._projectedDataBoundingBox.width,this._projectedDataBoundingBox.height);this._originalProjectedDataCenter=this._projectedDataBoundingBox.getCenterPoint();this._originalProjectedDataCenterIsZeroPoint=0===this._originalProjectedDataCenter.x&&0===this._originalProjectedDataCenter.y}var k=h["a"].extend("ViewportProjection",{init:function t(){this._super();this._fractionalZoomMode=true;this._viewportSize=new o["a"](256,256);this._zoomLevel=0;this._maxZoomLevel=m;this._minZoomLevel=0;this._translation=new o["a"](0,0);this._unitProjection=new v;this._projection=this._unitProjection;this._originalProjectedDataCenter=new o["a"](0,0);this._boundingBox=new l["a"](0,0,256,256);A.call(this);this._originalProjectedDataCenterIsZeroPoint=true;this._transformMatrixForZoomLevel=new c["a"];this._transformMatrix=new c["a"];this._invTransformMatrix=new c["a"];this.enabledChangeEvent=true;this._mirrorYAxis=false;this.helpFunctions={translateProjectedDataCenterToZeroPoint:b,invTranslateProjectedDataCenterToZeroPoint:M,scaleProjectedDataToZoomLevel:w,invScaleProjectedDataToZoomLevel:S,updateProjectedDataBoundingBox:A}},setProjection:function t(e){if(this._projection&&e&&this._projection.getProjectionType()===e.getProjectionType())return false;this._projection=e;this._projection||(this._projection=this._unitProjection);A.call(this);this._projectionChanged=true;D.call(this);return true},getProjection:function t(){return this._projection},getUnitProjection:function t(){return this._unitProjection},setBoundingBox:function t(e){if(this._boundingBox&&this._boundingBox.equal&&this._boundingBox.equal(e))return;this._boundingBox=new l["a"](e.x,e.y,e.width,e.height);A.call(this);D.call(this)},getBoundingBox:function t(){return this._boundingBox},setSize:function t(e){if(this._viewportSize&&this._viewportSize.equal&&this._viewportSize.equal(e))return false;this._viewportSize=new o["a"](e.x,e.y);D.call(this);return true},getSize:function t(){return this._viewportSize},setZoomLevel:function t(e){if(Number.isNaN(+e))return false;this._fractionalZoomMode||(e=Math.round(e));e=Math.max(Math.min(e,this._maxZoomLevel),this._minZoomLevel);Math.abs(e-this._minZoomLevel)<x?e=this._minZoomLevel:Math.abs(e-this._maxZoomLevel)<x&&(e=this._maxZoomLevel);if(Math.abs(this._zoomLevel-e)<x)return false;this._zoomLevel=e;D.call(this);return true},getZoomLevel:function t(){return this._zoomLevel},setDataCenter:function t(e){if(!e)return false;if(this._currentDataCenter&&this._currentDataCenter.closeTo&&this._currentDataCenter.closeTo(e,g))return false;this._currentDataCenterChanged=true;this._currentDataCenter=new o["a"](e.x,e.y);D.call(this);return true},getDataCenter:function t(){return this._currentDataCenter},setFractionalZoomMode:function t(e){this._fractionalZoomMode=e},getFractionalZoomMode:function t(){return this._fractionalZoomMode},project:function t(e){var i=this._projection.project(e);var a=this.transform(i);return a},fromDataRectToViewportRect:function t(e){var i=this.project(new o["a"](e.x,e.y));var a=this.project(new o["a"](e.x+e.width,e.y+e.height));var n=new l["a"](i.x,i.y,a.x-i.x,a.y-i.y);return n},invProject:function t(e){var i=this.invTransform(e);var a=this._projection.invProject(i);return a},fromViewportRectToDataRect:function t(e){var i=this.invProject(new o["a"](e.x,e.y));var a=this.invProject(new o["a"](e.x+e.width,e.y+e.height));var n=new l["a"](i.x,i.y,a.x-i.x,a.y-i.y);return n},getDataRectOfViewport:function t(){var e=this.invProject(_);var i=this.invProject(this._viewportSize);var a=new l["a"](e.x,e.y,i.x-e.x,i.y-e.y);return a},getDataRectOfViewportIfZoomOnADataRect:function t(e){var i=this.enabledChangeEvent;this.enabledChangeEvent=false;var a=this.getZoomLevel();var n=this.getDataCenter();this.zoomOnDataRectangle(e);var s=this.getDataRectOfViewport();this.setZoomLevel(a);this.setDataCenter(n);this.enabledChangeEvent=i;return s},transform:function t(e){var i=this._transformMatrix.transformPoint(e);return new o["a"](i.x,i.y)},invTransform:function t(e){var i=this._invTransformMatrix.transformPoint(e);return new o["a"](i.x,i.y)},fromDataPointToPixel:function t(e,i){var a=Math.pow(2,i+7);var n=this._projection.project(e);var s=b.call(this,n);var r=w.apply(this,[s,i]);var l=new o["a"](r.x+a,a-r.y);return l},fromPixelToDataPoint:function t(e,i){var a=Math.pow(2,i+7);var n=new o["a"](e.x-a,a-e.y);var s=S.apply(this,[n,i]);var r=M.call(this,s);var l=this._projection.invProject(r);return l},calculateZoomLevelForDataRectangle:function t(e){if(!e)return;var i=new o["a"](e.x,e.y);var a=new o["a"](e.x+e.width,e.y+e.height);var n=this.fromDataPointToPixel(i,0);var s=this.fromDataPointToPixel(a,0);var r=Math.abs(n.x-s.x);var l=Math.abs(n.y-s.y);var c=0===r?Number.MAX_VALUE:this._viewportSize.x/r;var h=0===l?Number.MAX_VALUE:this._viewportSize.y/l;var u=Math.min(c,h);if(u===Number.MAX_VALUE)return 20;var d=Math.log(u)/Math.LN2;return d},calculateCenterPointForDataRectangle:function t(e){if(!e)return;var i=new o["a"](e.x,e.y);var a=new o["a"](e.x+e.width,e.y+e.height);var n=this.fromDataPointToPixel(i,0);var s=this.fromDataPointToPixel(a,0);var r=new o["a"]((n.x+s.x)/2,(n.y+s.y)/2);var l=this.fromPixelToDataPoint(r,0);return l},moveViewport:function t(e,i){this.setDataCenter(this.invProject(new o["a"](this._viewportSize.x/2-e,this._viewportSize.y/2-i)))},zoom:function t(e){e>0&&this.setZoomLevel(this.getZoomLevel()+Math.log(e)/Math.LN2)},zoomOnPixel:function t(e,i){if(i>0){var a=this.invTransform(e);var n=Math.log(i)/Math.LN2;this.setZoomLevel(this.getZoomLevel()+n);var s=this.transform(a);this.moveViewport(e.x-s.x,e.y-s.y)}},zoomOnDataRectangle:function t(e,i){if(!e)return;var a=this.calculateZoomLevelForDataRectangle(e);this._fractionalZoomMode||(a=i?Math.round(a):Math.floor(a));this.setZoomLevel(a);var n=this.calculateCenterPointForDataRectangle(e);this.setDataCenter(n)},setMaxZoomLevel:function t(e){this._maxZoomLevel=e},setMinZoomLevel:function t(e){this._minZoomLevel=e},getTransformMatrix:function t(){return this._transformMatrix},setTransformMatrix:function t(e){this._invTransformMatrix=e.clone().invert();var i=Math.abs(e.elements[0][0]);var a=Math.log(i*this._projectedDataSize)/y-8;var n=this.invProject(new o["a"](this._viewportSize.x/2,this._viewportSize.y/2));this.setZoomLevel(a);this.setDataCenter(n)},getInvTransformMatrix:function t(){return this._invTransformMatrix}});var C=k;var q=i("XJsW");var L=i("3J65");var P=22;var I=200;var T=1e-6;function O(t){t=Math.min(Math.max(t,this._minZoomLevel),this._maxZoomLevel);this._viewportProjection.setZoomLevel(t)}function N(t,e,i,a){var n=new c["a"];var s=i/a;var r=e.x-t.x;var o=e.y-t.y;var l=this._localMatrix.clone().invert().transformPoint(t);n.translate(l.x,l.y);n.scale(s,s);n.translate(-l.x,-l.y);this._localMatrix=this._localMatrix.multiply(n);var h=this._localMatrix.elements;this._localMatrix.translate(r/h[0][0],o/h[1][1]);R.call(this);n.identity();var u=this._globalMatrix.clone().invert().transformPoint(t);n.translate(u.x,u.y);n.scale(s,s);n.translate(-u.x,-u.y);this._globalMatrix=this._globalMatrix.multiply(n);h=this._globalMatrix.elements;this._globalMatrix.translate(r/h[0][0],o/h[1][1])}function E(t){if(!this._setTransformOrigin){var e="top left";t.style["-webkit-transform-origin"]=e;t.style["-moz-transform-origin"]=e;t.style["-o-transform-origin"]=e;t.style["-ms-transform-origin"]=e;t.style["transform-origin"]=e;this._setTransformOrigin=true}}function R(){var t=this._localMatrix.elements;var e="matrix(".concat(t[0][0],",0,0,").concat(t[1][1],",").concat(t[0][2],",").concat(t[1][2],")");this.helpFunctions.setTransform(this._$element[0],e)}function V(t,e){this.helpFunctions.onInteractionStart();z.call(this,t,e)}function z(t,e){if(this._disableZoomOnMouseWheel)return;this._disableZoomOnMouseWheel=true;var i=this;var a=new c["a"];var n;setTimeout((function(){i._disableZoomOnMouseWheel=false}),i._mouseWheelTimeoutPeriod);if(this._zoomPanByWebkitTransform){this._zooming=true;var s=this._localMatrix.clone().invert().transformPoint(t);a.translate(s.x,s.y);a.scale(e,e);a.translate(-s.x,-s.y);this._localMatrix=this._localMatrix.multiply(a);R.call(this)}else W.call(this,t,e);if(!this._zoomCancelled){a.identity();n=this._globalMatrix.clone().invert().transformPoint(t);a.translate(n.x,n.y);a.scale(e,e);a.translate(-n.x,-n.y);this._globalMatrix=this._globalMatrix.multiply(a);this._updateCallback()}this._zoomCancelled=false}function F(){this._zooming=false;this.helpFunctions.onInteractionEnd()}function j(t,e){this.helpFunctions.onInteractionStart();H.call(this,t,e)}function H(t,e){var i;if(this._zoomPanByWebkitTransform){this._panning=true;i=this._localMatrix.elements;this._localMatrix.translate(t/i[0][0],e/i[1][1]);R.call(this)}else $.call(this,t,e);i=this._globalMatrix.elements;this._globalMatrix.translate(t/i[0][0],e/i[1][1]);this._updateCallback()}function B(){this._panning=false;this.helpFunctions.onInteractionEnd()}function $(t,e){this._viewportProjection.enabledChangeEvent=false;this.moveViewport(t,e);this._viewportProjection.enabledChangeEvent=true}function W(t,e){this._viewportProjection.enabledChangeEvent=false;this.zoomOnPixel(t,e);this._viewportProjection.enabledChangeEvent=true}var U=s["a"].extend("PanZoomController",{init:function t(e,i,a,s){var h=this;this._minZoomLevel=-3;this._maxZoomLevel=P;this._interactionStarted=false;this._zoomPanByWebkitTransform=false;this._fractionalZoomMode=true;this._defaultScale=Math.pow(2,.5);this._invDefaultScale=1/this._defaultScale;this._mouseWheelTimeoutPeriod=50;this._viewportProjection=s||new C;this._viewportProjection.setMinZoomLevel(this._minZoomLevel);this._viewportProjection.setMaxZoomLevel(this._maxZoomLevel);this._localMatrix=new c["a"];this._$element=e;this._offset=e.offset();this._startCallback=function(){i.start&&i.start(this._viewportProjection._transformMatrix)};this._updateCallback=function(){i.update&&i.update(this._viewportProjection._transformMatrix)};this._endCallback=function(){i.end&&i.end(this._viewportProjection._transformMatrix)};this._resetCallback=function(){i.reset&&i.reset(this._viewportProjection._transformMatrix)};this._enabled=true;this._defaultBounds=this._viewportProjection.getBoundingBox();this._dataBounds=a?new l["a"](a.x,a.y,a.width,a.height):this._defaultBounds;this.helpFunctions={setTransform:function t(e,i){e.style["-webkit-transform"]=i;e.style["-moz-transform"]=i;e.style["-o-transform"]=i;e.style["-ms-transform"]=i;e.style.transform=i},onInteractionStart:function t(){if(h._interactionStarted)return;h._startCallback();h.reset();h._interactionStarted=true},onInteractionEnd:function t(){if(h._zooming||h._panning||h._pinching||!h._interactionStarted)return;h.helpFunctions.setTransform(h._$element[0],"matrix(1,0,0,1,0,0)");h._viewportProjection.enabledChangeEvent=false;h._viewportProjection.setTransformMatrix(h._globalMatrix);h._endCallback();h._viewportProjection.enabledChangeEvent=true;h._interactionStarted=false}};var u;var d;var f;var p;var v=false;var m=this._$element[0];var g=false;this.container=m;E.call(this,this._$element[0]);var x=function t(e){var i=r["a"].getMouseWheelData(e.originalEvent);var a=i.x-h._offset.left;var n=i.y-h._offset.top;var s=new o["a"](a,n);var l=i.delta>0?h._defaultScale:h._invDefaultScale;g?z.call(h,s,l):V.call(h,s,l);g=true;null!==p&&clearTimeout(p);p=setTimeout((function(){p=null;F.call(h);g=false}),250)};var _=function t(e,i){if(2===i.pagePoints.length){this.pinch={start:{},current:{}};this.pinch.start.point1=i.pagePoints[0];this.pinch.start.point2=i.pagePoints[1];i.centerPoint=new o["a"]((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2);i.scale=1;d={};d.x=(this.pinch.start.point1.x+this.pinch.start.point2.x)/2-h._offset.left;d.y=(this.pinch.start.point1.y+this.pinch.start.point2.y)/2-h._offset.top;f={x:i.centerPoint.x-h._offset.left,y:i.centerPoint.y-h._offset.top};h.helpFunctions.onInteractionStart();u=i.scale;d=f}else h.onPan("start",e,i);n.a.preventGestures(this.gestureHandler)};var y=function t(e,i){if(2===i.pagePoints.length)if(this.pinch.start.point2){i.centerPoint||(i.centerPoint=new o["a"]((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2));this.pinch.current.point1=i.pagePoints[0];this.pinch.current.point2=i.pagePoints[1];this.startDistance=this.pinch.start.point2.distanceTo(this.pinch.start.point1);this.lastDistance=this.currentDistance;this.currentDistance=this.pinch.current.point2.distanceTo(this.pinch.current.point1);this.pinchLength=Math.abs(this.startDistance-this.currentDistance);this.scale=this.currentDistance/this.startDistance;i.scale=this.scale;i.delta=this.currentDistance-this.lastDistance;i.centerPoint.x=(this.pinch.current.point1.x+this.pinch.current.point2.x)/2;i.centerPoint.y=(this.pinch.current.point1.y+this.pinch.current.point2.y)/2;f={x:i.centerPoint.x-h._offset.left,y:i.centerPoint.y-h._offset.top};h._pinching=true;if(h._zoomPanByWebkitTransform){N.call(h,d,f,i.scale,u);u=i.scale}else{if(Math.abs(i.scale-u)>.1){z.call(h,f,i.scale-u+1);u=i.scale}H.call(h,f.x-d.x,f.y-d.y)}d=f}else this.pinch.start.point2=i.pagePoints[1];else h.onPan("update",e,i);n.a.preventGestures(this.gestureHandler)};var b=function t(e,i){h._pinching=false;this._zoomPanByWebkitTransform||(this._zooming=false);h.onPan("end",e,i)};var M=r["a"].throttle((function(t){x(t)}),20);this._eventHandlers=q["a"].extend({preventDefault:true,mousewheel:function t(e){M(e)},swipe:{start:function t(e,i){_.call(this,e,i)},update:function t(e,i){y.call(this,e,i)},end:function t(e,i){b.call(this,e,i)}},swipetwo:{start:function t(e,i){_.call(this,e,i)},update:function t(e,i){y.call(this,e,i)},end:function t(e,i){b.call(this,e,i)}},tapthree:{end:function t(){h.zoomOnDataBounds();L["a"].preventGestures(this)}},wheelswipe:{start:function t(e){h._panX=e.pageX;h._panY=e.pageY;v=false},update:function t(e){var i=e.pageX;var a=e.pageY;var n=i-h._panX;var s=a-h._panY;var r=v;!v&&(Math.abs(n)>3||Math.abs(s)>3)&&(v=true);if(v){h._panX=i;h._panY=a;r?H.call(h,n,s):j.call(h,n,s)}},end:function t(){v?B.call(h):h.zoomOnDataBounds();v=false}},active:function t(){return h._enabled}})},reset:function t(){this._localMatrix.identity();this._globalMatrix=this._viewportProjection.getTransformMatrix().clone();this._zoomPanByWebkitTransform&&this.helpFunctions.setTransform(this._$element[0],"matrix(1,0,0,1,0,0)")},setOffset:function t(e){this._offset=e},navigate:function t(e,i){var a=this;var n;switch(e){case"resetZoom":a.zoomOnDataBounds();break;case"zoomIn":n=a.getZoomLevel();if(void 0===n||null===n||n===a._maxZoomLevel)return;V.call(a,{x:this._$element.width()/2,y:this._$element.height()/2},a._defaultScale);F.call(a);break;case"zoomOut":n=a.getZoomLevel();if(void 0===n||null===n||n===a._minZoomLevel)return;V.call(a,{x:this._$element.width()/2,y:this._$element.height()/2},a._invDefaultScale);F.call(a);break;case"navUp":j.call(a,0,I);B.call(a);break;case"navDown":j.call(a,0,-I);B.call(a);break;case"navLeft":j.call(a,I,0);B.call(a);break;case"navRight":j.call(a,-I,0);B.call(a);break;case"jumpTo":j.call(a,i.x,i.y);B.call(a);break;case"startAt":j.call(a,i.x,i.y);break;case"moveTo":H.call(a,i.x,i.y);break;case"endAt":B.call(a);break;default:break}},onPan:function t(e,i,a){var n=this;switch(e){case"start":j.call(n,a.swipe.deltaX,a.swipe.deltaY);break;case"update":H.call(n,a.swipe.curDeltaX,a.swipe.curDeltaY);break;case"end":B.call(n);break;default:break}},on:function t(){if(this._on)return;this._on=true;if(arguments.length)throw new Error("PanZoomController.on(): arguments has been deprecated");L["a"].addInteraction(this._eventHandlers,this._$element[0],2,["tapthree","swipe","swipetwo","wheelswipe","mousewheel"])},off:function t(){this._on&&L["a"].removeInteraction(this._eventHandlers);this._on=false},setMaxZoomLevel:function t(e){this._maxZoomLevel=e;this._viewportProjection&&this._viewportProjection.setMaxZoomLevel(e)},setMinZoomLevel:function t(e){this._minZoomLevel=e;this._viewportProjection&&this._viewportProjection.setMinZoomLevel(e)},setCenter:function t(e){this._viewportProjection&&this._viewportProjection.setDataCenter(e)},getCenter:function t(){if(this._viewportProjection)return this._viewportProjection.getDataCenter();return null},setZoomLevel:function t(e){if(Number.isNaN(+e)||!Number.isFinite(+e))return;Math.abs(e-Math.round(e))<T&&(e=Math.round(e));O.call(this,e)},getZoomLevel:function t(){if(this._viewportProjection)return this._viewportProjection.getZoomLevel();return 0},moveViewport:function t(e,i){var a=this._viewportProjection.getSize();this.setCenter(this._viewportProjection.invProject(new o["a"](a.x/2-e,a.y/2-i)))},zoom:function t(e){if(e>0){var i=Math.log(e)/Math.LN2;Math.abs(i-Math.round(i))<T&&(i=Math.round(i));this.setZoomLevel(this.getZoomLevel()+i)}},zoomOnPixel:function t(e,i){var a=this.getZoomLevel();if(a<=this._minZoomLevel&&i<=1||a>=this._maxZoomLevel&&i>=1){this._zoomCancelled=true;return}var n=Math.pow(2,this._minZoomLevel-a);var s=Math.pow(2,this._maxZoomLevel-a);i=Math.min(Math.max(i,n),s);this._viewportProjection.zoomOnPixel(e,i)},zoomOnDataRectangle:function t(e,i){this._viewportProjection.zoomOnDataRectangle(e,i)},zoomOnViewportRectangle:function t(e,i){var a=this._viewportProjection.fromViewportRectToDataRect(e);this.zoomOnDataRectangle(a,i)},setBounds:function t(e,i,a,n){if(Number.isNaN(+e)||Number.isNaN(+i)||Number.isNaN(+a)||Number.isNaN(+n))return;this._dataBounds=new l["a"](e,i,a,n)},setBoundsRect:function t(e){if(!e||this._dataBounds&&this._dataBounds.equal(e))return;this._dataBounds=e.clone()},zoomOnDataBounds:function t(){var e=this._dataBounds&&!this._dataBounds.hasNaN()?this._dataBounds:this._defaultBounds;if(e){this.zoomOnDataRectangle(e,false);this._resetCallback();this._viewportProjection.fire("resetZoomFinished");return true}return false},setFractionalZoomMode:function t(e){this._fractionalZoomMode=e;this._defaultScale=this._fractionalZoomMode?Math.pow(2,.5):2;this._invDefaultScale=1/this._defaultScale;this._mouseWheelTimeoutPeriod=this._fractionalZoomMode?50:100;this._viewportProjection&&this._viewportProjection.setFractionalZoomMode(e)},getFractionalZoomMode:function t(){return this._fractionalZoomMode},setZoomPanByWebkitTransform:function t(e){this._zoomPanByWebkitTransform=e},getZoomPanByWebkitTransform:function t(){return this._zoomPanByWebkitTransform},release:function t(){this._viewportProjection=null;this._$element=null}});Object.defineProperties(U.prototype,{enabled:{set:function t(e){this._enabled=e},get:function t(){return this._enabled}}});var G=e["a"]=U},HBwF:function(t,e,i){"use strict";var a=i("sYQE");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function r(t,e,i){e&&s(t.prototype,e);i&&s(t,i);return t}var o=function(){function t(){n(this,t);this.plotMin=null;this.plotMax=null;this.plotRange=null;this.tickMin=this.plotMin;this.tickMax=this.plotMax;this.mainValues=[];this.secondaryValues=[];this._plotSize=0;this._calculationSize=0}r(t,[{key:"setSize",value:function t(e){this._plotSize=e}},{key:"getPositionOfValue",value:function t(e){return(e-this.plotMin)/this.plotRange*this._plotSize}},{key:"getValueOfPosition",value:function t(e){return this.plotMin+this.plotRange*e/this._plotSize}},{key:"getNormalizedValue",value:function t(e){return(e-this.plotMin)/this.plotRange}},{key:"calculateLimits",value:function t(){this._usedDataMin=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;this._usedDataMax=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;this.plotMin=null===this._explicitPlotMin||Number.isNaN(+this._explicitPlotMin)?this._usedDataMin:this._explicitPlotMin;this.plotMax=null===this._explicitPlotMax||Number.isNaN(+this._explicitPlotMax)?this._usedDataMax:this._explicitPlotMax;this.plotRange=this.plotMax-this.plotMin}},{key:"calculateTicks",value:function t(){var e=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;var i=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;var n=a["a"].calculateTicks(this._calculationSize,e,i,this._explicitPlotMin,this._explicitPlotMax,this._minTickSpacingInPixel,this._fontHeight,this._niceNumberEnabled,this._whiteSpaceOptimizingEnabled,.6,this._showExplicitMinMax,this._minTickDataSpacing);this._tickSpacing=n.tickSpacing;this.plotMin=n.plotMin;this.plotMax=n.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=n.tickMinValue;this.tickMax=n.tickMaxValue;this.mainValues=n.mainTickValues;this.secondaryValues=n.secondaryTickValues;0===this.mainValues.length&&this.mainValues.push(n.minTickValue);0===this._tickSpacing&&(this._tickSpacing=1);if(this._showExplicitMinMax){var s=this.mainValues[0];this.mainValues[0]=n.plotMin;s-n.plotMin>=n.tickSpacing/2&&this.mainValues.splice(1,0,s);var r=n.mainTickValues[n.mainTickValues.length-1];n.plotMax-r<=n.tickSpacing/2?this.mainValues[n.mainTickValues.length-1]=n.plotMax:this.mainValues.push(n.plotMax)}}},{key:"getValues",value:function t(){return{mainValues:this.mainValues,secondaryValues:this.secondaryValues}}}]);return t}();e["a"]=o},Hk9t:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("mWu2");var r=i("nHjU");var o=r["a"].extend({init:function t(e,i,a,r){this._super(e,i,a);var o=s["default"].getService("$compile");this._innerContainer=n()(r).appendTo(n()(this.container));o(this._innerContainer)(n()(this.container).scope().$new());this._innerScope=this._innerContainer.scope()},getInnerContainer:function t(){return this._innerContainer},setYMirrorMode:function t(e){this._super(e);this._innerScope.options.direction=this.readDirection},getInnerContainerScope:function t(){return this._innerScope},release:function t(){this._super();this._innerContainer.remove();this._innerContainer=null;this._innerScope.$destroy();this._innerScope=null}});e["a"]=o},Lj2P:function(t,e,i){"use strict";var a=i("6uJb");var n=i("gVPc");var s=i("acVu");var r={};Object.defineProperty(r,"path",{get:function t(){var e=n["a"].getProductInfo(),i=e.externalUrls;var r;r=i.helpBaseUrl?i.helpBaseUrl:Object(s["b"])("IS_DESKTOPCLIENT")?i.personalHelpBaseUrl:i.serverHelpBaseUrl;var o=r.replace("{language}",a["default"].language);return"".concat(o,"client/")},configurable:true});e["a"]=r},Mj5g:function(t,e,i){"use strict";var a=i("wvr8");var n=2e3;function s(t,e,i){var s=a["a"].occurrencesRE(t,e,i);var r=s>=n?n:s;return r}e["a"]={MAX_NBR_OF_HITS:n,getMaxNumberOfHits:s}},NWoE:function(t,e,i){"use strict";var a=i("b5IE");var n=i("WoAn");var s=a["a"].extend("Circle",{init:function t(e,i,a){this._super();n["a"].apply(this,[e,i,a])},containsPoint:n["a"].prototype.pointInside,intersectsLocalLine:n["a"].prototype.intersectsLine,intersectsLocalRect:n["a"].prototype.intersectsRect,getLocalPoints:n["a"].prototype.getPoints,getLocalBoundingRect:function t(){return{x:this.cx-this.r,y:this.cy-this.r,width:2*this.r,height:2*this.r}},set:function t(){n["a"].prototype.set.apply(this,[].slice.call(arguments));this.invalidateBounds()}});Object.keys(n["a"].prototype).forEach((function(t){!s.prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","intersectsRect"].indexOf(t)<0&&(s.prototype[t]=n["a"].prototype[t])}));e["a"]=s},Nc9l:function(t,e,i){"use strict";var a=i("SOxp");e["a"]=a["a"].extend({init:function t(){this._listeners={}},listen:function t(e,i,a){if("function"!==typeof i)return this;this._listeners[e]||(this._listeners[e]=[]);this._listeners[e].push({callback:i,scope:a});return this},stopListen:function t(e,i,a){var n=this._listeners[e];var s;if(n)for(s=n.length-1;s>=0;s-=1)i?(a&&a===n[s].scope&&n[s].callback===i||!a&&n[s].callback===i)&&n.splice(s,1):n.splice(s,1);return this},fire:function t(e,i){var a=e;"string"!==typeof a&&(a=e.getType());var n=this._listeners[a];if(n)for(var s=n.length-1;s>=0;--s)"string"===typeof e?n[s].callback.apply(n[s].scope?n[s].scope:this,i||[]):n[s].callback.apply(n[s].scope?n[s].scope:this,[e]);return this},hasListener:function t(e){var i=e;"string"!==typeof i&&(i=e.getType());return this._listeners&&this._listeners[i]&&this._listeners[i].length}})},Oc2G:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("Nc9l");var r=i("MoEg");function o(){this._layoutComponents=[];this._componentSizes=[]}o.prototype={addComponent:function t(e){var i=this._layoutComponents;this.removeComponent(e);i.push(e)},removeComponent:function t(e){var i=this._layoutComponents;for(var a=0;a<i.length;++a)if(i[a]===e){i.splice(a,1);return}},_reduceLayoutRectForComponents:function t(e,i,a,n,s,r){var o;for(o=0;o<e.length;++o){if(!e[o]||!["left","right","bottom","top"].includes(e[o].dock)||!r(e[o]))continue;e[o].calculateRelevantSize(i,a,n);if(!e[o].isVisible(s))continue;e[o].relevantSize=Math.round(e[o].relevantSize);e[o].reduceLayoutRect(i)}},_reducePreliminaryLayoutRectForComponents:function t(e,i,a,n,s){var r;for(r=0;r<e.length;++r){if(!e[r]||!["left","right","bottom","top"].includes(e[r].dock)||!s(e[r]))continue;e[r].calculatePreliminaryRelevantSize?e[r].calculatePreliminaryRelevantSize(i,a):e[r].calculateRelevantSize(i,a);if(!e[r].isVisible(n))continue;e[r].reduceLayoutRect(i)}},_reduceComponentRectBySpacingH:function t(e,i,a,n){var s;var r;for(s=0;s<a.length;++s){r=a[s].perpendicularlyRelevantSpacing;if(r&&a[s].isVisible(n)){if(r.left>e.x&&e.x>=0){e.width-=r.left-e.x;e.x=r.left}r.right>i.width-e.x-e.width&&(e.width-=r.right-(i.width-e.x-e.width-i.x))}}},_reduceComponentRectBySpacingV:function t(e,i,a,n){var s;var r;for(s=0;s<a.length;++s){r=a[s].perpendicularlyRelevantSpacing;if(r&&a[s].isVisible(n)){if(r.top>e.y&&e.y>=0){e.height-=r.top-e.y;e.y=r.top}r.bottom>i.height-e.y-e.height&&(e.height-=r.bottom-(i.height-e.y-e.height-i.y))}}},_layoutComponent:function t(e,i,a,n){e&&e.insertAdjacentTo(e.dock&&"center"!==e.dock?e.isVertical()?a.x:a.y:n,e.isVisible(i))},layout:function t(e,i,a,n,s){var o=2;e=new r["a"](e.x,e.y,e.width,e.height);a=new r["a"](a.x,a.y,a.width,a.height);var u=a.width/e.width;var d=a.height/e.height;var f;var p=this._layoutComponents;p.sort((function(t,e){if("center"===t.dock)return"center"===e.dock?0:-1;if("center"===e.dock)return 1;return t.layoutOrder-e.layoutOrder}));e=new r["a"](e.x,e.y,e.width-2*o,e.height-2*o);var v=new r["a"](e.x,e.y,e.width,e.height);var m={x:new r["a"],y:new r["a"]};h.apply(this,[v,e,i,n,s]);v.x+=o;v.y+=o;m.x.set(v.x,v.y,v.width,v.height);m.y.set(v.x,v.y,v.width,v.height);for(var g=0;g<p.length;++g){p[g].setLayoutToContainerRatios(u,d);this._layoutComponent(p[g],i,m,v);f=c.call(this,p[g]);p[g].updateSize(!f||f.rect.width!==p[g].rect.width||f.rect.height!==p[g].rect.height);l.call(this,p[g])}}};function l(t){var e=this._componentSizes.filter((function(e){return e.component===t}))[0];if(!e){e={component:t};this._componentSizes.push(e)}e.rect=t.rect.clone()}function c(t){return this._componentSizes.filter((function(e){return e.component===t}))[0]}function h(t,e,i,a,n){var s;var r=this._layoutComponents.slice();var o=[{fn:"_reduceComponentRectBySpacingV",dock:["left","right"]},{fn:"_reduceComponentRectBySpacingH",dock:["top","bottom"]}];"vertical"===a&&o.reverse();r.sort((function(t,e){return(t.reductionOrder||1e3)-(e.reductionOrder||1e3)}));for(s=0;s<r.length;s++){r[s].perpendicularlyRelevantSpacing={top:0,left:0,right:0,bottom:0};r[s].preRelevantSizeCalculation&&r[s].preRelevantSizeCalculation()}var l=t.clone();o.forEach((function(t){this._reducePreliminaryLayoutRectForComponents(r,l,e,i,(function(e){return e&&t.dock.indexOf(e.dock)>=0}))}),this);o.forEach((function(t){this[t.fn](l,e,r,i)}),this);if(n&&n()){l=t.clone();o.forEach((function(t){this._reducePreliminaryLayoutRectForComponents(r,l,e,i,(function(e){return e&&t.dock.indexOf(e.dock)>=0}));this[t.fn](l,e,r,i)}),this)}o.forEach((function(a){this._reduceLayoutRectForComponents(r,t,e,l,i,(function(t){return t&&a.dock.indexOf(t.dock)>=0}))}),this);o.forEach((function(a){this[a.fn](t,e,r,i)}),this)}var u=o;var d=i("jRMJ");var f=i("WwCo");var p=i("bPi8");var v=i("7xSA");var m=i("6uJb");var g=i("ohbW");var x=26;var _=26;var y=54;var b=4;var M=20;var w=15;var S=10;var D=1;var A=100;function k(t){if(t.label)return t.label;if(t.min&&t.max)return"".concat(t.min," - ").concat(t.isMax?"":"<").concat(t.max);if(t.max)return"<".concat(t.max);return">".concat(t.min)}function C(t){var e=0;while(t&&t.parent){e++;t=t.parent}return e}function q(t,e,i){var a={};if(t){var n;var s;var r=t.length;var o;var l;var c=C(t[0])-e;for(n=0;n<r;n++){o=t[n];if(!o)continue;s=0;while(s<c&&o.parent){o=o.parent;s--}l=!Number.isNaN(+i)&&i>=0?o.getAttributeDimensions(i):o.id;a[l]?a[l].push(t[n]):a[l]=[t[n]]}}return a}function L(t,e,i,a,n,s,r){var o=[];var l;var c=0;var h=_;var u;var d=Math.min(A,t.length);var f=0;s=s||0;var p=q(e,s,r);i=i||{font:"13px 'QlikView Sans', sans-serif"};u=g["a"].getAverageLetterWidth(i.font)*M;a>(u+x)*t.length&&(u=a/t.length-x-D);var v={type:"text",fill:0,opacity:1,shape:{text:null,font:i.font,maxWidth:u,align:"left",baseline:"middle",maxNumLines:2}};for(var m=0;m<d;m++){var w=t[m];l=w.color.toHex();v.shape.text=k(w);var S=g["a"].measureTextObject(v);S.height=Math.ceil(S.height);c=Math.max(c,S.width);h=Math.max(h,S.height);var C=Math.floor(Math.max(S.height,_)*n);"range"===w.type?o.push({text:S.lines.join(" "),height:C,tipText:w.label,marker:"rect",color:l,isDimensionValue:true,locked:false,id:w.id,index:w.index,isMax:w.isMax,type:w.type}):o.push({text:S.lines.join(" "),tipText:w.label,height:C,marker:w.marker||"rect",color:l,isDimensionValue:true,locked:false,id:w.id,index:w.index,cacheItems:p[w.id],type:w.type});o[o.length-1].position=f;f+=o[o.length-1].height}var L=h;var P=Math.max(c+x,y);return{viewItems:o,cellHeight:L,cellWidth:P+D+2*b}}function P(t,e,i){var a=[];var n;var s=0;g["a"].setFont(e.font);for(n=t.length-1;n>=0;n--){var r=t[n];var o={colorFrom:r.grad[0].toHex(),colorTo:r.grad[1].toHex(),maxText:i.formatValue(r.max),minText:i.formatValue(r.min),max:r.id[0],min:r.id[1],limits:r.limits};a.push(o)}var l=t.length-1;var c=a[0].max>a[l].max?a[0].maxText:a[l].maxText;var h=a[0].min<a[l].min?a[0].minText:a[l].minText;s=Math.max(s,g["a"].getTextWidth(c.substr(0,S)),g["a"].getTextWidth(h.substr(0,S)));return{viewItems:a,labelHeight:g["a"].getFontHeight(e.font),maxLabelWidth:s+1}}function I(t,e){var i=g["a"].getAverageLetterWidth(e.font)*w;var a={type:"text",fill:0,opacity:1,shape:{text:t,font:e.font,maxWidth:i,align:"left",baseline:"middle",maxNumLines:2}};var n=g["a"].measureTextObject(a);return{text:n.lines.join(" "),fullText:t,height:n.height,width:n.width+D}}var T={prepareDiscreteData:L,prepareContinousData:P,prepareLegendTitle:I,Modes:{DISCRETE:"discrete",CONTINOUS:"continous"},constants:{PADDING:b}};var O=i("Hk9t");var N='<div qva-direction x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}" class="color-legend">\n    <div qv-discrete-legend\n         ng-if="discrete && visible"\n         view-items="viewItems"\n         options="options">\n    </div>\n\n\t<div qv-continous-legend\n\t\t ng-if="!discrete && visible"\n\t\t view-items="viewItems"\n\t\t options="options"></div>\n</div>\n';var E=i("2UuD");var R=i("UV1h");var V=i("Z9ZH");var z=i.n(V);var F=i("mWu2");var j='<div class="qv-continous-color-legend"\n\t ng-class="cclOrientationClass"\n\t ng-style="options.titleStyle">\n\t<div class="cl-title ccl-title"\n\t\t ng-if="options.legendTitle"\n\t\t ng-class="cclOrientationClass">\n\t\t<div qva-direction x-dir-text="{{options.legendTitle}}" x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}" class="ccl-title-inner"\n\t\t\t title="{{options.legendTitleTooltip}}">{{options.legendTitle}}</div>\n\t</div>\n    <div class="ccl-gradient"\n\t\t ng-class="cclOrientationClass"\n\t\t tid="ccl.gradient">\n        <div class="ccl-axis" ng-class="cclOrientationClass"  ng-style="options.labelStyle">\n\t\t\t<div ng-repeat="axisVal in axisValues track by $index" class="ccl-axis-value" ng-class="{\'first\': $first, \'last\':$last}" dir="ltr">{{axisVal}}</div>\n            \x3c!--\n                <div class="ccl-axis-top-value">{{axisValues[1]}}</div>\n                <div class="ccl-axis-bottom-value">{{axisValues[0]}}</div>\n                --\x3e\n        </div>\n\t\t<div class="ccl-gradient-color"\n\t\t\t ng-class="cclOrientationClass"\n\t\t\t qva-apply-style="cclGradientStyle">\n\t\t</div>\n\t\t<div dir="ltr" class="ccl-range"\n\t\t\t ng-show="selectionEnabled && !isLocked"\n\t\t\t ng-style="cclRangeStyle"\n\t\t\t ng-class="cclOrientationClass">\n\t\t\t<div ng-show="active" class="ccl-range-inner"\n\t\t\t\t ng-class="cclOrientationClass"\n\t\t\t\t ng-style="rangeStyle">\n\t\t\t\t<div class="ccl-axis-cover"\n\t\t\t\t\t ng-style="active && cclCoverStyle"\n\t\t\t\t\t tid="ccl.cover"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.cover}"></div>\n\t\t\t\t<div class="ccl-far-edge"\n\t\t\t\t\t tid="ccl.edge.far"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.far}">\n\t\t\t\t</div>\n\t\t\t\t<div class="ccl-near-edge"\n\t\t\t\t\t tid="ccl.edge.near"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.near}">\n\t\t\t\t</div>\n\t\t\t\t<div class="ccl-outer-bubble-wrapper"\n\t\t\t\t\t ng-class="active && cclOrientationClass">\n                    <qva-range-selection-bubble visible="active" active-component="fakeAxis" handle-points="handlePoints" horizontal="!options.vertical" far="false" data="values.start" active="activeOptions.near" tid="ccl.bubble.near"> </qva-range-selection-bubble>\n                    <qva-range-selection-bubble visible="active" active-component="fakeAxis" handle-points="handlePoints" horizontal="!options.vertical" far="true" data="values.end" active="activeOptions.far" tid="ccl.bubble.far"> </qva-range-selection-bubble>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>';var H=i("FJpR");var B=i("CpIe");var $=".legendRangeSelection";var W=Math.min;var U=Math.max;function G(t,e){if(!t||t.length!==e){var i=[];var a=1/e*2;for(var n=0;n<e/2;n++){i.push(a*n);i.push(a*(n+1))}return i}return t}function Z(t,e,i,a){var n="";a=G(a,t.length);var s=t.length;for(var r=0;r<s-1;r+=2){n+=", ".concat(t[r]," ").concat(100*a[r],"%");n+=", ".concat(t[r+1]," ").concat(100*a[r+1],"%")}var o=i?e?"bottom":"top":e?"left":"right";return"background: linear-gradient(to ".concat(o).concat(n,")")}function Y(t,e,i){return e?t[0][i]>t[1][i]?0:1:t[0][i]<t[1][i]?0:1}function X(t){return["left","bottom"].includes(t)}function K(t,e,i){var a=i?e.height():e.width();var n=i?"y":"x";t[0][n]=W(U(t[0][n],0),a);t[1][n]=W(U(t[1][n],0),a)}function J(t,e,i,a){var n=[];if(i){n[e]=new H["a"](t[e].x,t[e].y+a);n[1^e]=t[1^e]}else{n[e]=new H["a"](t[e].x+a,t[e].y);n[1^e]=t[1^e]}return n}function Q(t,e){var i=t.find(".ccl-axis");return e?i.outerWidth():i.outerHeight()}function tt(t,e){return{vertical:t.options.vertical,direction:t.options.vertical?"y":"x",grt:t.options.vertical?e:!e}}F["default"].directive("qvContinousLegend",[function(){return{template:j,replace:true,scope:true,link:function t(e,i){var a=false;var n={gradient:i.find(".ccl-gradient"),rangeElement:i.find(".ccl-range"),rangeInner:i.find(".ccl-range-inner"),axisCover:i.find(".ccl-axis-cover"),nearEdge:i.find(".ccl-near-edge"),farEdge:i.find(".ccl-far-edge")};e.fakeAxis={getPositionOfValue:function t(i){var a=e.viewItems[0].min;var s=e.viewItems[e.viewItems.length-1].max;var r=(i-a)/(s-a);var o=e.options.vertical?n.rangeElement.height():n.rangeElement.width();var l=e.options.vertical||!e.options.vertical&&e.options.yMirrorMode;l&&(r=1-r);return r*o},isDiscrete:function t(){return false}};e.activeOptions={far:false,near:false,cover:false};e.values={start:{},end:{}};e.setRangeStyle=function(t){if(!t||2!==t.length)return;e.relevantSize=Q(i,e.options.vertical);var a=t[0];var n=t[1];var s=e.options.vertical?"y":"x";e.options.vertical?e.rangeStyle={height:Math.abs(a[s]-n[s]),top:Math.min(a[s],n[s])}:e.rangeStyle={width:Math.abs(a[s]-n[s]),left:Math.min(a[s],n[s])}};e.updateHandleValues=function(t,i){K(t,n.rangeElement,e.options.vertical);e.setRangeStyle(t);if(e.active){var a=e.options.vertical?"y":"x";var r=e.options.vertical?n.rangeElement.height():n.rangeElement.width();var o=t[Y(e.handlePoints,e.options.vertical,a)];var l=t[Y(e.handlePoints,!e.options.vertical,a)];e.cclNearValueLabel=s(o);e.values.start.text=e.cclNearValueLabel;e.cclFarValueLabel=s(l);e.values.end.text=e.cclFarValueLabel;if(i){if(i.switch){var c=e.values.start.value;e.values.start.value=e.values.end.value;e.values.end.value=c}var h=e.viewItems[0].min;var u=e.viewItems[e.viewItems.length-1].max;0===i.index?e.values.start.value=Math.max(Math.min(i.value,u),h):e.values.end.value=Math.max(Math.min(i.value,u),h)}else if(e.options.vertical){e.values.start.value=e.positionToValue((r-o[a])/r);e.values.end.value=e.positionToValue((r-l[a])/r)}else{e.values.start.value=e.positionToValue(o[a]/r);e.values.end.value=e.positionToValue(l[a]/r)}}if(e.active&&e.options){var d=X(e.options.dock);g(e.options.vertical,d,false);g(e.options.vertical,d,true)}};e.updateHandlePoints=function(t){if(t){e.updateHandleValues(t);p(e.handlePoints)}};e.$on("rangeUpdate",(function(t,i,a,n){if(!Number.isNaN(+a))return;e.handlePoints=[i[0],i[1]];e.updateHandleValues(e.handlePoints,n);e.$digest();p(i,n);t.stopPropagation()}));e.$watchCollection("[viewItems, options.yMirrorMode, options.vertical]",(function(t){var i=t[0];var a=t[1];var n=t[2];var s=a&&!n;if(i&&i.length){var r=[];var o=[];for(var l=0;l<i.length;l++){r.push(i[l].colorTo);r.push(i[l].colorFrom);if(i[l].limits){o.push(i[l].limits[0]);o.push(i[l].limits[1])}}e.cclGradientStyle=Z(r,s,n,o);var c=[i[0].minText,i[i.length-1].maxText];n&&c.reverse();e.axisValues=c}}));function s(t){if(e.positionToFormattedValue&&t){var i;var a;if(e.options.vertical){i=n.rangeElement.height();a=1-t.y/i}else{i=n.rangeElement.width();a=t.x/i}return e.positionToFormattedValue(a)}return"".concat(t)}var r={right:"",bottom:""};var o={right:"0px",bottom:""};var l={bottom:"0px",right:""};e.$watchCollection("[options.vertical, options.dock, relevantSize]",(function(t){var i=t[0];var a=X(t[1]);var n=t[2];e.cclOrientationClass={vertical:i,horizontal:!i,near:a,far:!a};if(a){e.cclCoverStyle=i?{left:"0px",width:"".concat(n,"px")}:{bottom:"0px",height:"".concat(n,"px")};e.cclBubbleNearStyle=i?r:l;e.cclBubbleFarStyle=i?r:l}else{e.cclCoverStyle=i?{right:"0px",width:"".concat(n,"px")}:{top:"0px",height:"".concat(n,"px")};e.cclBubbleNearStyle=i?o:r;e.cclBubbleFarStyle=i?o:r}}));c.call(this);e.$watch("selectionEnabled",(function(t){t?c.call():u.call()}));e.$on("$destroy",(function(){u.call()}));e.$on("cancelSelection",(function(){e.active=false}));function c(){if(a||!e.selectionEnabled)return;a=true;var t="hey";var i;z()(n.gradient[0]).swipe({id:$,options:{preventDefault:true},start:function t(a,n){if(e.isLocked)return;var s=n.pagePoints[0];i=m(s.x,s.y);z.a.preventGestures(this.gestureHandler);d(a,n)},update:function t(a,n){if(e.isLocked)return;e.active=true;e.swiping=true;var s=n.pagePoints[0];e.handlePoints=[i,m(s.x,s.y)];e.updateHandlePoints(e.handlePoints);e.$digest()},end:function t(){if(e.isLocked){f();return}e.swiping=false;v()}});z()(n.axisCover[0]).tap({id:$,options:{preventDefault:true},start:function t(){z.a.preventGestures(this.gestureHandler)}}).swipe({id:$,options:{preventDefault:true},start:function i(a,n){t=e.handlePoints;z.a.preventGestures(this.gestureHandler);d(a,n);e.activeOptions.cover=true},update:function i(a,n){var s=e.options.vertical?n.swipe.deltaY:0;var r=e.options.vertical?0:n.swipe.deltaX;e.handlePoints=[new H["a"](t[0].x+r,t[0].y+s),new H["a"](t[1].x+r,t[1].y+s)];e.updateHandlePoints(e.handlePoints);e.$digest()},end:function t(){v();e.activeOptions.cover=false}});if(!z.a.utils.touch){h(n.farEdge[0],false);h(n.nearEdge[0],true)}e.$broadcast("on")}function h(t,i){var a;var n;var s=tt(e,i);var r;z()(t).tap({id:$,options:{preventDefault:true},start:function t(){z.a.preventGestures(this.gestureHandler)}}).swipe({id:$,options:{radiusThreshold:0},start:function t(r,o){s=tt(e,i);n=Y(e.handlePoints,s.grt,s.direction);a=e.handlePoints;z.a.preventGestures(this.gestureHandler);d(r,o)},update:function t(i,o){e.handlePoints=J(a,n,s.vertical,s.vertical?o.swipe.deltaY:o.swipe.deltaX);e.updateHandlePoints(e.handlePoints);e.activeOptions.near=false;e.activeOptions.far=false;r=Y(e.handlePoints,s.grt,s.direction)?"far":"near";e.activeOptions[r]=true;e.$digest()},end:function t(){v(e.handlePoints);e.activeOptions.far=false;e.activeOptions.near=false;e.$digest()}})}function u(){e.active=false;Object.keys(n).forEach((function(t){z()(n[t][0]).off("*",$)}));a=false;e.$broadcast("off")}function d(t,i){e.$emit("rangeStart",t,i)}function f(){e.$emit("selectWhileLocked")}function p(t,i){e.$emit("rangeUpdate",t,e.options.vertical?n.rangeElement.height():n.rangeElement.width(),i)}function v(){var t;if(e.options.vertical&&e.handlePoints[0].y<e.handlePoints[1].y){t=[];t[1]=e.handlePoints[0];t[0]=e.handlePoints[1];e.handlePoints=t}else if(!e.options.vertical&&e.handlePoints[0].x>e.handlePoints[1].x){t=[];t[1]=e.handlePoints[0];t[0]=e.handlePoints[1];e.handlePoints=t}e.$emit("rangeEnd")}function m(t,e){var i=n.rangeElement.offset();return new H["a"](t-i.left,e-i.top)}function g(t,a,s){if(!n.nearBubbleWrapper){n.nearBubbleWrapper=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.near");n.nearBubble=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.near .bubble");n.farBubbleWrapper=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.far");n.farBubble=i.find(".ccl-outer-bubble-wrapper .bubble-wrapper.far .bubble")}n.nearBubbleWrapper.css(e.cclBubbleNearStyle);n.farBubbleWrapper.css(e.cclBubbleFarStyle);var r=x(t,s);r=r>0?r:0;s?n.nearBubble.css({"margin-left":"".concat(Math.round(r),"px")}):n.farBubble.css({"margin-right":"".concat(Math.round(r),"px")})}function x(t,e){if(t)return 0;if(e)return i.offset().left-(n.nearBubbleWrapper.offset().left-.5*n.nearBubbleWrapper.width()-5);return n.farBubbleWrapper.offset().left-i.offset().left+1.5*n.farBubbleWrapper.width()+5-i.width()}}}}]);var et=i("GMLQ");var it='<div class="qv-discrete-color-legend"\n\t ng-class="{ \'vertical\': options.vertical }"\n\t ng-style="options.labelStyle">\n\t<div class="cl-title dcl-title"\n\t\t ng-if="options.legendTitle && options.legendTitle.length"\n\t\t ng-style="options.titleStyle"\n\t\t ng-class="{\'vertical\': options.vertical }">\n\t\t<div class="dcl-title-inner" title="{{options.legendTitleTooltip}}" qva-direction x-dir-text="{{options.legendTitle}}" x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}">{{options.legendTitle}}</div>\n\t</div>\n\t<div class="dcl-flex" ng-class="{\'align\': align, \'vertical\': options.vertical, \'in-selections\': selectionsApi.active }"\n\t\t qv-selections-toggle-dimension-value="{ selector: \'.color-item\', itemKey: \'item\' }"\n\t\t qv-selections-on-toggle-dimension-value="selectionEnabled && !isScrolling && select($event, item)">\n\t\t<div ng-repeat="item in viewItems track by $index"\n\t\t\t ng-style="{\'height\':item.height,  \'width\': (options.vertical ? \'auto\' : options.cellWidth)}"\n\t\t\t class="color-item" ng-class="{\'selected\': item.selected}"\n\t\t\t tid="dcl.item">\n\t\t\t<div class="marker">\n\t\t\t\t<div ng-style="item.markerClass[\'glyph-triangle\']  ? {\'border-bottom-color\': item.color} : ( item.markerClass[\'glyph-inverse-triangle\'] ? {\'border-top-color\': item.color} : {background: item.color} )" ng-class="item.markerClass"></div>\n\t\t\t</div>\n\t\t\t<div qva-direction x-dir-text="{{item.text}}" class="text"\n\t\t\t\t title="{{item.tipText}}">{{item.text}}</div>\n\t\t</div>\n\t</div>\n\t<div class="dcl-buttons-v" ng-show="options.vertical && overflow">\n\t\t\x3c!--DOWN--\x3e\n\t\t<button class="dcl-down lui-fade-button" ng-disabled="!interactionEnabled || scrollAtEnd" tid="dcl.down">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-bottom"></span>\n\t\t</button>\n\t\t\x3c!--UP--\x3e\n\t\t<button class="dcl-up lui-fade-button" ng-disabled="!interactionEnabled || scrollAtStart" tid="dcl.up">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-top"></span>\n\t\t</button>\n\t</div>\n\t<div class="dcl-buttons-h" ng-show="!options.vertical && overflow">\n\t\t\x3c!--RIGHT--\x3e\n\t\t<button class="dcl-right lui-fade-button" ng-disabled="!interactionEnabled || scrollAtEnd" tid="dcl.right">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-right"></span>\n\t\t</button>\n\t\t\x3c!--LEFT--\x3e\n\t\t<button class="dcl-left lui-fade-button" ng-disabled="!interactionEnabled || scrollAtStart" tid="dcl.left">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-left"></span>\n\t\t</button>\n\t</div>\n</div>\n';var at=i("i7ks");var nt=i("zjn0");var st=i("pSod");var rt=5;var ot=10;var lt=".discretelegend";et["a"].directive("qvDiscreteLegend",["$timeout",function(t){return{template:it,replace:true,scope:true,link:function e(i,a){var n=a.find(".dcl-flex");i.$watch("viewItems",(function(t){t&&t.forEach((function(t){var e={};var i=Array.isArray(t.marker)?t.marker:[t.marker];for(var a=0;a<i.length;a++)switch(i[a]){case"line":case"!line":e["glyph-line"]=true;break;case"triangle":case"!triangle":e["glyph-triangle"]=true;break;case"inverse-triangle":case"!inverse-triangle":e["glyph-inverse-triangle"]=true;break;case"diamond":case"!diamond":e["glyph-diamond"]=true;break;case"circle":case"!circle":e["glyph-circle"]=true;break;case"rect":case"!rect":default:e["glyph-rect"]=true}t.markerClass=e}))}));i.callbacks&&(i.callbacks.paintLegend=function(){s();r()});i.$on("clearSelection",(function(){if(i.viewItems){i.selectedValues=[];for(var t=0;t<i.viewItems.length;t++){var e=i.viewItems[t];e.selected=false}}}));function s(){if(i.viewItems){i.selectedValues=[];for(var t=0;t<i.viewItems.length;t++){var e=i.viewItems[t];"dimension"===e.type&&(i.selectionsCache?e.selected=i.selectionsCache.isValueSelected(e.id[0]):"dimension"===e.type&&e.cacheItems&&e.cacheItems[0]&&(e.selected=e.cacheItems[0].selected))}}i.$digest()}i.select=function(t,e){if("others"!==e.type){"range"===e.type&&(e.selected=!e.selected);i.$emit("toggleSelect",t,[e]);"dimension"===e.type&&i.selectionsCache&&(e.selected=i.selectionsCache.isValueSelected(e.id[0]))}};i.$on("$destroy",(function(){x(a)}));i.$watch("explicitScrollPosition",(function(t){i.explicitScrollPosition=t}));function r(){if(void 0===i.explicitScrollPosition)p(i.options.vertical,true);else{var t=o(i.explicitScrollPosition,i.options.vertical);i.options.vertical?n.scrollTop(t):n.scrollLeft(t)}i.options.vertical?i.overflow=n[0].scrollHeight-n.height()>1:i.overflow=n[0].scrollWidth-n.width()>1}g(a,i);function o(t,e){var a=i.viewItems;if(!a)return 0;return e?a[t].position:t*i.options.cellWidth}function l(){if(i.options.vertical)return n.scrollTop();return n.scrollLeft()}function c(t){h(l(),t*(i.options.vertical?1:-1))}function h(t,e,a){var s;s=i.options.vertical?{scrollTop:"".concat(t+e,"px")}:{scrollLeft:"".concat(nt["a"].getScrollPos("rtl"===i.options.direction,t,e),"px")};n.animate(s,a?200:0)}function u(t){if(t&&t.some((function(t){return void 0===t.position}))){t[0].position=0;for(var e=1;e<t.length;e++)t[e].position=t[e-1].position+t[e-1].height}}function d(t,e){for(var i=0;i<e.length;i++)if(e[i].position+e[i].height/2>=t)return i;return 0}function f(t,e){var a=i.viewItems;if(!a)return null;var s=0;var r;var o;var l=0;if(e){u(a);var c=n[0].scrollHeight-n.height();if(t>c){l=d(t,a);a[l].position<c&&l++}else l=d(t,a);s=a[l].position;o=l<=0;r=t>=c}else{s=Math.round(t/i.options.cellWidth)*i.options.cellWidth;l=Math.abs(Math.round(t/i.options.cellWidth));if(t+n.width()>=n[0].scrollWidth){s=t;l++}if("rtl"!==i.options.direction||"default"===nt["a"].scrollImplementation){r=n.width()/i.options.cellWidth>=a.length/Math.floor(n.height()/i.options.cellHeight)-l;o=s<=0}else{o=n.width()/i.options.cellWidth>=a.length/Math.floor(n.height()/i.options.cellHeight)-l;r=l>=0}}return{position:s,index:l,end:r,start:o}}function p(e,a,s){s=s||0;var r=l();var o=f(r+s,e);if(o){if(o.position!==r){n.stop(true);h(o.position,0,a)}t((function(){i.scrollAtEnd=o.end;i.scrollAtStart=o.start}));i.$emit("scrollPositionChanged",o.index)}}function v(t,e,n){var s=false;var r=a.find(t).first();z()(a.find(t)[0]).longtap({id:lt,options:{timeThreshold:1e4},update:function t(a,o){if(o.percentage>2&&i.interactionEnabled){m(e*(n?rt:ot));s=true;r.addClass("lui-active");z.a.preventGestures(this.gestureHandler)}},end:function t(){s=false;r.removeClass("lui-active");z.a.preventGestures(this.gestureHandler)},cancel:function t(){r.removeClass("lui-active");z.a.preventGestures(this.gestureHandler)}}).tap({end:function t(){if(i.interactionEnabled){if(s)p(n,true);else{m(e*(n?i.options.cellHeight:i.options.cellWidth));p(n,false)}s=false}}})}function m(t){c(t)}function g(t,e){var i=null;var a=at["a"].throttle((function(t){if(e.interactionEnabled){var i=at["a"].getMouseWheelData(t.originalEvent);var a;a=(i.delta>0?-1:1)*(e.options.vertical?e.options.cellHeight:e.options.cellWidth);e.options.yMirrorMode&&!e.options.vertical&&(a=-a);p(e.options.vertical,false,a)}}),20);n.on("mousewheel".concat(lt," DOMMouseScroll").concat(lt),(function(t){if(e.overflow){a(t);t.preventDefault();t.stopPropagation()}}));v(".dcl-up",-1,true);v(".dcl-down",1,true);v(".dcl-left",-1,false);v(".dcl-right",1,false);z()(n[0]).swipe({options:{useMomentum:true,inertia:.7,preventDefault:true},start:function t(a){if(e.interactionEnabled){i=l();e.isScrolling=true;z.a.preventGestures(this.gestureHandler);a.preventDefault()}},update:function t(a,n){if(null!==i&&n.swipe){var s=n.swipe.distance;e.options.vertical?"up"===n.swipe.direction?h(i,-s):"down"===n.swipe.direction&&h(i,s):"left"===n.swipe.direction?h(i,s):"right"===n.swipe.direction&&h(i,-s)}},end:function t(){if(null!==i){p(e.options.vertical,true);e.isScrolling=false;i=null}}})}function x(t){z()(n[0]).off();z()(t.find(".dcl-up")[0]).off();z()(t.find(".dcl-down")[0]).off();z()(t.find(".dcl-left")[0]).off();z()(t.find(".dcl-right")[0]).off()}}}}]);var ct=2;var ht=17;var ut=12;function dt(t,e,i){var a=t.getStyle(e,"fontSize");var n=parseInt(a,10)*i;var s=t.getStyle(e,"fontFamily");return"normal ".concat(n,"px ").concat(s)}function ft(t,e){return{backgroundColor:t.getStyle("legend","backgroundColor"),label:{font:dt(t,"legend.label",1),lineHeight:"1em"},scaledLabel:{font:dt(t,"legend.label",e),color:t.getStyle("legend.label","color"),lineHeight:"1em"},ticks:{color:"#a6a6a6",length:8},line:{color:"#666666"},title:{font:dt(t,"legend.title",1),lineHeight:"1em"},scaledTitle:{font:dt(t,"legend.title",e),color:t.getStyle("legend.title","color"),lineHeight:"1.2em"}}}function pt(t){return t&&"primary"!==t.colorMode}function vt(t,e,i){var a={};a.maxItemsPerRow=Math.floor((t.width-(i.show?i.width:0))/e.cellWidth);a.numRows=Math.ceil(e.viewItems.length/a.maxItemsPerRow);a.itemsPerRow=Math.ceil(e.viewItems.length/a.numRows);a.w=a.itemsPerRow*e.cellWidth;a.h=Math.ceil(Math.max(i.height,Math.min(e.cellHeight*ct,a.numRows*e.cellHeight)));return a}function mt(t,e,i){var a=5;return(i?Math.max(t.width,e.maxLabelWidth+ht+a):Math.max(e.labelHeight+ht,t.height))+20}var gt=O["a"].extend("BasicColorLegend",{init:function t(){var e=Array.prototype.slice.call(arguments);e.push(N);this._super.apply(this,e);this._styleService=R["a"].initializeService("object.".concat(this.options.parentType));this._legendContainer=this.getInnerContainer();this._dataInvalid=true;this.$scope=this.getInnerContainerScope();this.$scope.callbacks={};this._scrollPosition=0;this._mode={}},release:function t(){this._super();this.$scope=null;this._legendContainer=null},setColorMap:function t(e){this._colorMap=e;this.invalidateProperties("Legend.setColorMap");this.invalidateDisplay("Legend.setColorMap")},getColorMap:function t(){return this._colorMap},setProperties:function t(e){this._legendProperties=e;this._dataInvalid=true;return this.invalidateProperties("BasicColorMap.setProperties")},setExternalColorItems:function t(e){if(e&&e[0]&&e[0].qMatrix&&this._colorMap){this._externalDataPage=e;var i=e[0].qMatrix;var a=[];this._colorDataInfo=this._colorMap.getColorDataInfo();for(var n=0;n<i.length;n++){var s=i[n];a.push({id:[s[1].qNum],index:n,label:s[0].qText,type:"dimension"})}if(this._colorDataInfo&&this._colorDataInfo.hasOthers){var r=this._colorDataInfo.activeDimensionIndex;a.push({id:[-3],index:a.length,label:void 0!==r&&r>-1?this._colorDataInfo.othersLabels[r]:m["default"].get("properties.dimensionLimits.others"),type:"others"})}this._externalColorItems=a}else this._externalColorItems=null;this.invalidateProperties("Legend.setExternalColorItems")},getExternalDataPage:function t(){return this._externalDataPage},isVisible:function t(e){return this._super(e)&&this.hasValidData()&&pt(this._mode)&&this._legendProperties&&this._legendProperties.show},updateSize:function t(){this._super();this.invalidateProperties("LegendLight.calculateRelevantSize");this.updateNow(["properties"]);this._dataInvalid=true},_updateProperties:function t(){var e=this;if(!this._colorMap||!this._legendProperties){this._clearScope(this.$scope);return false}this._colorDataInfo=this._colorMap.getColorDataInfo();this._mode=this._colorDataInfo.legendMode||{};this._marker=this._colorMap.getLegendDataProvider()?this._colorMap.getLegendDataProvider().getLegendMarker():"rect";if(!this._mode.colorMode||this._colorDataInfo.altMode&&!this._externalColorItems&&"dimension"===this._mode.colorMode){this._clearScope(this.$scope);return false}var i=ft(this._styleService,this.chartScale);var a;if(this._externalColorItems&&"dimension"===this._mode.colorMode){a=this._externalColorItems;a.forEach((function(t){t.color=e._colorMap.getColorFromPreScaledValue(t.id[0],t.label);t.marker=e._marker}));a=a.filter((function(t){return!t.color.isInvalid()})).slice(0,100)}else{a=this._colorMap.getColorMapping().concat();a=a.filter((function(t){return!t.color.isInvalid()}))}this._mode.showTitle=this._data.legend.showTitle;if(!this.isVisible()||!a||!a.length){this._clearScope(this.$scope);return false}this.$scope.visible=true;this.$scope.selectionEnabled=false;if(this._mode.showTitle){this._titleMetrics=T.prepareLegendTitle(this._colorMap.getLegendTitle(),i.title);this._titleMetrics.show=this._mode.showTitle}else this._titleMetrics={show:false,width:0,height:0};if(this._mode.discrete){this._legendMetrics=T.prepareDiscreteData(a,this._selectableShapes,i.label,this.rect.width-(this._mode.showTitle&&this.isHorizontal()?this._titleMetrics.width:0),this.chartScale,this._colorMap.getDimensionIndex()[0],this._colorDataInfo.attrIndex);this.$scope.viewItems=this._legendMetrics.viewItems}else{this._formatter=this._colorMap.getValueFormatter()||E["a"].getStaticFormatter();this._formatter.prepare();this._legendMetrics=T.prepareContinousData(a,i.label,this._formatter);this.$scope.viewItems=this._legendMetrics.viewItems}if(this.isHorizontal()){this._horizontalMetrics=vt(this.rect,this._legendMetrics,this._titleMetrics);this.$scope.align=this._horizontalMetrics.numRows>=ct}this.$scope.discrete=this._mode.discrete;this.$scope.options.vertical=this.isVertical();this.$scope.options.labelStyle=i.scaledLabel;if(this.isDiscrete()){this.$scope.options.titleStyle=n.a.extend(true,{width:"".concat(Math.ceil(this._titleMetrics.width*this.chartScale),"px")},i.scaledTitle);this.$scope.options.titleHeight=(Math.max(this._titleMetrics.height,ut)+ut)*this.chartScale;this.$scope.options.legendTitle=this._titleMetrics.show?this._titleMetrics.text:null}else{this.$scope.options.titleStyle=i.scaledTitle;this.$scope.options.legendTitle=this._titleMetrics.text}this.$scope.options.legendTitleTooltip=this._titleMetrics.fullText;this.$scope.options.cellWidth=Math.ceil(this._legendMetrics.cellWidth*this.chartScale);this.$scope.options.cellHeight=Math.ceil(this._legendMetrics.cellHeight*this.chartScale);this.$scope.options.yMirrorMode=this.yMirrorMode;this.$scope.options.dock=this.dock;this.$scope.isLocked=this.isSelectionLocked();this._dataInvalid=false;return true},paint:function t(){this.$scope.callbacks&&this.$scope.callbacks.paintLegend&&this.$scope.callbacks.paintLegend()},calculateRelevantSize:function t(e){this._super();this.relevantSize=0;this.invalidateProperties("Legend.calculateRelevantSize");this.updateNow(["properties"]);if(this.isVisible()&&this._titleMetrics&&this._legendMetrics)if(this.isDiscrete())if(this.isHorizontal()){var i=vt(e,this._legendMetrics,this._titleMetrics);this.relevantSize=i.h+(i.numRows>ct?ct:i.numRows)+2*T.constants.PADDING}else this.relevantSize=Math.max(this._legendMetrics.cellWidth,this._titleMetrics.width);else this.relevantSize=mt(this._titleMetrics,this._legendMetrics,this.isVertical(),this._values)},isDiscrete:function t(){return this._mode.discrete},clear:function t(){this._super()},isSelectionLocked:function t(){return this._colorDataInfo.altMode&&this._colorDataInfo.internalMode===(this._colorMap?this._colorMap.DIMENSION:"dimension")?this._colorDataInfo.altLocked:this._super()},getAttributeDimensionInfo:function t(){return this._colorMap&&this._colorMap.hasAttributeDimension()?this._colorMap.getAttributeDimensionInfo():[]},_clearScope:function t(e){e.visible=false;e.viewItems=null;this._titleMetrics=null;this._legendMetrics=null},on:function t(){this._super();this.$scope.interactionEnabled=true},off:function t(){this._super();this.$scope.interactionEnabled=false}});Object.defineProperty(gt.prototype,"className",{value:"BasicColorLegend"});var xt=gt;function _t(t,e,i,a,n,s){var r;var o;var l=a[0].min;var c=a[a.length-1].max;var h=c-l;if(i){r=1-Math.max(t[0].y,t[1].y)/e;o=1-Math.min(t[0].y,t[1].y)/e}else if(n){r=1-Math.min(t[0].x,t[1].x)/e;o=1-Math.max(t[0].x,t[1].x)/e}else{r=Math.min(t[0].x,t[1].x)/e;o=Math.max(t[0].x,t[1].x)/e}r=0===r?l:r*h+l;o=1===o?c:o*h+l;return{idx:s,startVal:r,updateVal:o,isMax:true}}function yt(t,e,i){var a=e[0].min;var n=e[e.length-1].max;var s=n-a;i&&(t=1-t);return 0===t?a:1===t?n:t*s+a}function bt(t,e,i){var a=[];var n;for(var s=0;s<e.length;s++){n=e[s];a.push({idx:i,startVal:n.id[0],updateVal:n.id[1],isMax:n.isMax})}return a}function Mt(t){return!("measure"===t.colorMode&&"item"===t.boxType)}function wt(t,e,i){e.selectionEnabled=!!t._mode.selectionEnabled&&!!i&&t._on&&!i.handler._disableSelections;if(!i||!e.selectionEnabled){t._watchers&&t._watchers.forEach((function(t){t()}));t._watchers=null;return}if(t._watchers)return;t._watchers=[];t._watchers.push(e.$on("toggleSelect",(function(a,n,s){i.initComponent(null,t);if(Mt(t._mode)){if("range"===t._mode.boxType){i.rangeStart();var r=bt(e.viewItems,s,t._mode.rangeSelectionIndex);i.indices=[t._mode.rangeSelectionIndex];i.rangeUpdate(r,true);i.rangeEnd()}else{if(t.$scope.isLocked)t.selections.selectWhileLocked(t._mode.altMode?i.activeComponent.getAttributeDimensionInfo():void 0);else{var o=s.map((function(t){return t.id[0]}));var l=[];var c;var h=s.length;for(c=0;c<h;c++)s[c].cacheItems&&(l=l.concat(s[c].cacheItems));i.updateFromItems(n,l,t._mode.altMode,o)}t._mode.altMode||t.selections._selectedShapes.length||t.selectionsApi.clear()}a.preventDefault()}})));t._watchers.push(e.$on("rangeStart",(function(e,a,n){n&&i.initComponent(n.pagePoints[0]);t._formatter=t._colorMap.getValueFormatter()||E["a"].getStaticFormatter();t._formatter.prepare();i.rangeStart(true);e.preventDefault()})));t._watchers.push(e.$on("rangeUpdate",(function(e,a,n,s){var r=_t(a,n,t.isVertical(),t.$scope.viewItems,t.yMirrorMode,t._mode.rangeSelectionIndex);i.indices=[t._mode.rangeSelectionIndex];s&&(0===s.index?r.startVal=s.value:r.updateVal=s.value);i.rangeUpdate([r]);e.preventDefault()})));t._watchers.push(e.$on("rangeEnd",(function(t){i.rangeEnd();t.preventDefault()})));t._watchers.push(e.$on("rangeEditChanged",(function(e,a){t._nrEditing=a?t._nrEditing+1:t._nrEditing-1;if(t._nrEditing>1){i.confirmEdit();t._nrEditing=1;e.targetScope.onEditBubble()}t._editing=t._nrEditing>0;i.setIsEditing(t._editing,t.$scope)})));t._watchers.push(e.$on("scrollPositionChanged",(function(e,i){t._scrollPosition=i})));t._watchers.push(e.$on("selectWhileLocked",(function(){t.selections&&t.selections.selectWhileLocked()})))}var St=xt.extend("ColorLegend",{init:function t(){var e=Array.prototype.slice.call(arguments);this._super.apply(this,e);this._nrEditing=0;this.$scope.options={};var i=this;this.formatValue=function(t){return i._formatter.formatValue(t)};this.$scope.positionToFormattedValue=function(t){return i.formatValue(yt(t,i.$scope.viewItems,i.yMirrorMode&&!i.isVertical()))};this.$scope.positionToValue=function(t){return yt(t,i.$scope.viewItems,i.yMirrorMode&&!i.isVertical())}},setData:function t(e){this._super(e);this.setProperties(e.legend)},getSelectionIndices:function t(){return this._colorMap.getSelectionIndices()},setSelectableShapes:function t(e){this._super(e);this._dataInvalid=true;this.invalidateProperties("Legend.setSelectableShapes")},setHasValidData:function t(e){this._super(e);if(!e){this.clear();this._clearScope(this.$scope)}},_updateProperties:function t(){if(!this._super())return false;this.$scope.selectionEnabled=!this.options._disableSelections&&this._mode.selectionEnabled&&this.$scope.interactionEnabled&&!!this.selections;this.$scope.selectionsApi=this.selectionsApi;this.$scope.selectionsCache=this._colorDataInfo&&this._colorDataInfo.altMode&&this.attributeSelectionsCache;wt(this,this.$scope,this.selections);return true},on:function t(){this._super();wt(this,this.$scope,this.selections)},off:function t(){this._super();wt(this,this.$scope,this.selections)},getType:function t(){return this.selections},getSelectionMode:function t(){return this._mode.legend},clearSelection:function t(){this.$scope.$broadcast("clearSelection");this.$scope.$broadcast("cancelSelection")},cancelSelection:function t(){this.$scope.$broadcast("cancelSelection")},getScrollPosition:function t(){return this._scrollPosition},setScrollPosition:function t(e){this.$scope.explicitScrollPosition=e}});Object.defineProperties(St.prototype,{selections:{get:function t(){return this._selections},set:function t(e){this._selections=e;wt(this,this.$scope,this.selections)}}});Object.defineProperty(St.prototype,"className",{value:"ColorLegend"});var Dt=St;var At=i("QLJv");var kt=i("xnZp");var Ct=i("6eqC");var qt=i("qZHi");var Lt=i("iTPj");var Pt=i("hmfc");var It=i("6WTg");var Tt=i("sWge");function Ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function Et(t,e,i){e&&Nt(t.prototype,e);i&&Nt(t,i);return t}var Rt={ROW:1,VALUE:2};function Vt(t,e,i){var a=e.indexOf(t);-1===a&&false!==i?e.push(t):-1===a||i||e.splice(a,1)}function zt(t){var e=[];var i;t.forEach((function(t){t.split(";").forEach((function(t){i=t.split(":");e[+i[0]]||(e[+i[0]]=[]);-1===e[i[0]].indexOf(+i[1])&&e[i[0]].push(+i[1])}))}));return e}function Ft(t){t._dirty&&(t.columns=zt(t.values));t._dirty=false}function jt(t,e){var i=[];do{e&&-1===e.indexOf(t.col)||i.push("".concat(t.col,":").concat(t.id))}while((t=t.parent)&&"undefined"!==typeof t.col&&"undefined"!==typeof t.id);return i.join(";")}var Ht=function(){function t(){Ot(this,t);this.rows=[];this.values=[];this.columns=[];this.indicesToTrack=null;this._dirty=false;this.selectionMode=Rt.ROW|Rt.VALUE}Et(t,[{key:"clear",value:function t(){this.clearRows();this.clearValues()}},{key:"toggle",value:function t(e,i){this.toggleRow(e.row,i);this.toggleValue(e.value,e.col,i)}},{key:"toggleByCacheItem",value:function t(e){this.toggleRow(e.rowIndex||e.row||0,e.selected);var i=jt(e,this.indicesToTrack);i&&Vt(i,this.values,e.selected);this._dirty=true}},{key:"toggleRow",value:function t(e,i){Vt(e,this.rows,i)}},{key:"toggleValue",value:function t(e,i,a){Vt("".concat(i||0,":").concat(e),this.values,a);this._dirty=true}},{key:"isRowSelected",value:function t(e){return!!(this.selectionMode&Rt.ROW)&&-1!==this.rows.indexOf(e)}},{key:"isValueSelected",value:function t(e,i){if(!(this.selectionMode&Rt.VALUE))return false;Ft(this);return"undefined"!==typeof this.columns[i||0]&&-1!==this.columns[i||0].indexOf(e)}},{key:"isValueChainSelected",value:function t(e){if(!(this.selectionMode&Rt.VALUE))return false;if(this.indicesToTrack){Ft(this);var i=jt(e,this.indicesToTrack).split(";");return i.length&&!i.some((function(t){var e=t.split(":");return!("undefined"!==typeof this.columns[+e[0]||0]&&-1!==this.columns[+e[0]||0].indexOf(+e[1]))}),this)}return-1!==this.values.indexOf("string"===typeof e?e:jt(e,this.indicesToTrack))}},{key:"isCacheItemSelected",value:function t(e){return this.isValueChainSelected(e)||this.isRowSelected(e.rowIndex||e.row||0)}},{key:"hasSelections",value:function t(){return!!(this.selectionMode&Rt.ROW)&&this.rows.length>0||!!(this.selectionMode&Rt.VALUE)&&this.values.length>0}},{key:"setRows",value:function t(e){this.rows=e.slice()}},{key:"setValues",value:function t(e,i){this.values=e.map((function(t){return"".concat(i||0,":").concat(t)}));this._dirty=true}},{key:"getSelectedColumns",value:function t(){Ft(this);var e=this.columns;return e.filter((function(t){return"undefined"!==typeof t})).map((function(t){return e.indexOf(t)}))}},{key:"getSelectedValuesInColumn",value:function t(e){Ft(this);return this.columns[e||0]||[]}},{key:"getSelectedValues",value:function t(){Ft(this);return this.columns}},{key:"clearRows",value:function t(){this.rows.length=0}},{key:"clearValues",value:function t(){this.values=[];this.columns.length=0;this._dirty=false}},{key:"setSelectionMode",value:function t(e){this.selectionMode=e}},{key:"trackByIndices",value:function t(e){this.indicesToTrack=Array.isArray(e)?e.slice():null}}]);return t}();Ht.prototype.SELECTION_MODE=Rt;Ht.SELECTION_MODE=Rt;var Bt=Ht;function $t(t){$t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return $t(t)}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ut(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function Gt(t,e,i){e&&Ut(t.prototype,e);i&&Ut(t,i);return t}function Zt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&Yt(t,e)}function Yt(t,e){Yt=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return Yt(t,e)}function Xt(t){var e=Qt();return function i(){var a=te(t),n;if(e){var s=te(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Kt(this,n)}}function Kt(t,e){if(e&&("object"===$t(e)||"function"===typeof e))return e;return Jt(t)}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qt(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function te(t){te=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return te(t)}var ee=function(t){Zt(i,t);var e=Xt(i);function i(){Wt(this,i);return e.apply(this,arguments)}Gt(i,[{key:"isCacheItemSelected",value:function t(e){var i=e.getAttributeDimensions();return i&&1===i.length&&this.isValueSelected(i[0])}}]);return i}(Bt);var ie=ee;function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ne(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function se(t,e,i){e&&ne(t.prototype,e);i&&ne(t,i);return t}var re=function(){function t(e){ae(this,t);this.collection=e||[]}se(t,[{key:"clear",value:function t(){this.collection.forEach((function(t){t.clear()}))}},{key:"add",value:function t(e){-1===this.collection.indexOf(e)&&this.collection.push(e)}},{key:"remove",value:function t(e){var i=this.collection.indexOf(e);-1!==i&&this.collection.splice(i,1)}},{key:"isCacheItemSelected",value:function t(e){return this.collection.some((function(t){return t.isCacheItemSelected(e)}))}}]);return t}();var oe=re;var le=i("xN6f");var ce=i("acVu");var he='<div class="qv-viz-disclaimer"\n\t ng-if="visible && (attributes.limitedData || attributes.onlyNullColor || attributes.hasNegativeOrZeroData || attributes.hasDataRangeIncludingZero) && !attributes.doesNotFit"\n\t style="font-size: 1em;"\n\t qva-direction x-dir-setting="{{direction}}" x-dir-text="{{languageString}}">\n\t<span class="ltr-star">*</span>\n\t<span ng-if="attributes.limitedData" q-translation="Object.Disclaimer.LimitedData" q-title-translation="Object.Disclaimer.LimitedData"></span>\n\t<span ng-if="attributes.onlyNullColor" q-translation="Object.Disclaimer.OnlyNanColor" q-title-translation="Object.Disclaimer.OnlyNanColor"></span>\n\t<span ng-if="attributes.hasNegativeOrZeroData" q-translation="Object.Disclaimer.NegativeOrZeroValues" q-title-translation="Object.Disclaimer.NegativeOrZeroValues"></span>\n\t<span ng-if="attributes.hasDataRangeIncludingZero" q-translation="Object.Disclaimer.DataRangeIncludingZero" q-title-translation="Object.Disclaimer.DataRangeIncludingZero"></span>\n\t<span class="rtl-star">*</span>\n</div>\n';F["default"].directive("qvaChartDisclaimer",[function(){return{template:he,scope:{attributes:"=",visible:"=",direction:"="},link:function t(e){e.languageString=m["default"].get("Object.Disclaimer.LimitedData")}}}]);var ue={debug:true,components:{}};function de(t){if(this._chartScale!==t){this._chartScale=t;this.$scope.dataAttributes.chartScale=t;Object.keys(this.components).forEach((function(t){this.components[t].chartScale=this._chartScale}),this)}}function fe(){var t=this.container.parentElement;var e;var i;var a="";var n="";var s;var r;var o;t.style.height="100%";t.style.width="";t.style.left="";t.style.top="";if(!this._readStoredData||this.options.freeResize){de.call(this,1);return}e=this.container.clientWidth;i=this.container.clientHeight;var l=this._data.snapshotData.content.size;var c=l.w;var h=l.h;var u=c/h;var d=e/i;if(u<=d){o=i/h;s=i*u/e;e="".concat(100*s,"%");i="100%";a="".concat(50*(1-s),"%")}else{o=e/c;r=e/u/i;i="".concat(100*r,"%");e="";n="".concat(50*(1-r),"%")}de.call(this,o);t.style.width=e;t.style.height=i;t.style.left=a;t.style.top=n}function pe(){this._sizeChanged=false;fe.call(this);var t=this.rect;var e=this.container.clientWidth;var i=this.container.clientHeight;var a=new r["a"](0,0,e,i);var n;var s;this.containerRect=new r["a"](0,0,e,i);this._readStoredData&&!this.options.freeResize&&(s={width:this._data.snapshotData.content.size.w,height:this._data.snapshotData.content.size.h});s&&(a=new r["a"](0,0,s.width,s.height));if(!t||t.width!==a.width||t.height!==a.height){for(n in this.components)this.components[n].setOuterRect(a.x+1,a.y+1,a.width-2,a.height-2);this.rect=a;this._updateLayoutMode(this.rect.width,this.rect.height);this._sizeChanged=true}}function ve(t,e){Object.keys(this.components).forEach((function(i){["colorLegend","xAxis","dimensionAxis","timeAxis","continuousAxis","dataArea"].includes(i)&&this.components[i].setGlobalOpacity(t,e||false)}),this)}function me(){var t;this.chartFormatter=new Pt["a"](this.backendApi.localeInfo,this._data.qHyperCube.qMeasureInfo);for(t in this.components){this.components[t].chartFormatter=this.chartFormatter;this.components[t].measureFormatters=this.chartFormatter.getFormatters();this.components[t].combinedMeasuresFormatter=this.chartFormatter.getCombinedMeasuresFormatter()}}function ge(){var t;var e={};for(t in s["a"].prototype)s["a"].prototype.hasOwnProperty(t)&&"init"!==t&&(e[t]=s["a"].prototype[t]);return e}function xe(){var t=this;this.backendApi.clearSelections();var e=this.components.dataArea.getSelectableShapes();e.forEach((function(e){e.selected=false;t.onSelection.ToggleShape.call(t,e)}));this.selectionsCacheCollection.clear();this.onSelection.scheduleInvalidation.call(this)}var _e=It["a"].extend(ge());var ye=_e.extend({refreshSelections:function t(){this.specialCaseForSingleSelect=false},initialize:function t(){this._super();this._initiateBindings()},init:function t(e,i,a,r,o){s["a"].prototype.init.call(this);a=n.a.extend(true,a||{},{},ue);var l=i.find(".qv-viz");this._super(e,l,a,r);this.container=l[0];this.backendApi=r;this.selectionsApi=o;this.layoutEngine=new u;this.components={};this.providers={};this._changeWatchers=[];this._createComponents();this._createProviders();this._chartScale=1;this.chartFormatter=new Pt["a"](this.backendApi.localeInfo);this.selectionsCache=new Bt;this.attributeSelectionsCache=new ie;this.selectionsCacheCollection=new oe([this.selectionsCache,this.attributeSelectionsCache]);this.selectionsCache.setSelectionMode(Bt.SELECTION_MODE.VALUE);this._chartContext=new Ct["a"];this._layoutMode=qt["a"].LayoutMode.FULL;this.$scope.dataAttributes={};this.resize();this.specialCaseForSingleSelect=false;this._navigation=a.navigation},clearSelections:xe,selectionModeAlpha:.5,getVerticalComponents:function t(){var e=[];this._data&&this._data.legend&&this.components&&this.components.colorLegend&&this.components.colorLegend.isVertical()&&e.push({comp:this.components.colorLegend,dock:this._data.legend.dock});return e},setYMirrorMode:function t(e){if(this.yMirrorMode===e)return;this.yMirrorMode=e;for(var i in this.components)this.components[i].setYMirrorMode(e);this.tooltips&&(this.tooltips.yMirrorMode=e);this.updateVerticalComponentsDock()},updateVerticalComponentsDock:function t(){var e;var i;var a;var n;this._verticalComponents=this.getVerticalComponents();var s=this._verticalComponents?this._verticalComponents.length:0;for(e=0;e<s;e++){i=this._verticalComponents[e];a=i.comp;if("far"===i.dock||"near"===i.dock||"auto"===i.dock){n="far"===i.dock||"auto"===i.dock;a.setDock(this.yMirrorMode?n?"left":"right":n?"right":"left")}}},setMinimumRequirements:function t(e,i){this._requirements={dimensions:{min:e},measures:{min:i}}},onToggleLasso:function t(e){this.toggleLasso=e},isLassoDisabled:function t(){return!this.selections.allowLasso},onSelection:{ToggleShape:function t(e){var i=this.$scope.layout.layers?this.$scope.layout.layers[0]:this.$scope.layout;var a=i.qListObject?i.qListObject:i.qHyperCube;if(!e.selected&&1===a.qSize.qcy){this.specialCaseForSingleSelect=true;return}this.toggleCacheItem?this.toggleCacheItem(e):this.onSelection.scheduleInvalidation.call(this);if(e.id<-2||e.id>-1){this.selections.getActiveType().activeComponent&&this.selectionsCache.trackByIndices(this.selections.getActiveType().activeComponent.getSelectionIndices());this.selectionsCache.toggleByCacheItem(e)}this.specialCaseForSingleSelect=false;this._haveToggledShapes=this.selectionsCache.hasSelections()},Activated:function t(){ve.apply(this,[this.selectionModeAlpha]);this._haveToggledShapes=false},Deactivated:function t(){ve.apply(this,[1,true]);this.selectionsCacheCollection.clear();this.toggleLasso=false},Select:function t(e,i,a,n){var s=this;if(this.specialCaseForSingleSelect)return;var r=Array.isArray(a)?a:[a||0];if(this.selectionsCache.hasSelections()){var o;var l=this.selectionsCache.getSelectedValuesInColumn(r[0]);var c=-1;"K"===this._data.qHyperCube.qMode&&(c=l.indexOf(-3));o=1===r.length&&-1===c?this.backendApi.selectValues(r[0],l,false):this.backendApi.select(this.selectionsCache.rows,r,n);o.then((function(t){t||xe.call(s)})).catch((function(t){t.isHandled=true}))}else e.length&&e.every((function(t){return!t.selected}))&&this.selectionsApi.clear()},SelectAttributeDim:function t(e,i){var a=this;e.forEach((function(t){this.attributeSelectionsCache.toggleValue(t,!!i&&void 0)}),this);var n=this.attributeSelectionsCache.getSelectedValuesInColumn(0);var s=this.providers.colorMap&&this.providers.colorMap.getColorDataInfo();s&&s.legendPath&&this.backendApi.selectValues(0,n,false,s.legendPath).then((function(t){t||xe.call(a)}))},SelectRange:function t(e,i){var a=this;e&&0!==e.length?"dimension"===e[0].type?this.backendApi.selectDimensionRange(e).then((function(t){t||xe.call(a)})):this.backendApi.selectRange(e,i).then((function(t){t||xe.call(a)})):this.selectionsApi.clear()},Confirm:function t(){},Cancel:function t(){this.selectionsCacheCollection.clear()},Clear:function t(){this.selectionsCacheCollection.clear()},scheduleInvalidation:function t(){var e=this;this._invalidationTimer||(this._invalidationTimer=setTimeout((function(){e.onSelection.invalidate.call(e);e._invalidationTimer=null}),10))},cancelInvalidation:function t(){clearTimeout(this._invalidationTimer);this._invalidationTimer=null},invalidate:function t(){this.components.dataArea.invalidateDisplay("Chart.onSelection.invalidate");this.components.colorLegend&&this.components.colorLegend.invalidateDisplay("Chart.onSelection.invalidate");Object.keys(this.components).forEach((function(t){(this.components[t]instanceof p["a"]||this.components[t]instanceof v["a"]&&this.components[t].isDimension)&&this.components[t].invalidateDisplay("Chart.onSelection.invalidate")}),this)}},getLayoutMode:function t(){return this._layoutMode},getVerticalLayoutMode:function t(){return this._verticalLayoutMode},getHorizontalLayoutMode:function t(){return this._horizontalLayoutMode},setLayoutMode:function t(e){this._explicitLayoutMode=e;if(this._layoutMode!==e){this._layoutMode=e;this.fire("layoutModeChanged")}},getSnapshotSize:function t(){return this.rect?{w:this.rect.width,h:this.rect.height}:{w:0,h:0}},_updateLayoutMode:function t(e,i){if(this._explicitLayoutMode)return;this._layoutMode=qt["a"].getLayoutMode(e,i);this._horizontalLayoutMode=qt["a"].getHorizontalLayoutMode(e);this._verticalLayoutMode=qt["a"].getVerticalLayoutMode(i);this.fire("layoutModeChanged");this.fire("verticalLayoutModeChanged");this.fire("horizontalLayoutModeChanged")},_createProviders:function t(){var e=this.options;if(e.providers.colorMap){this.providers.colorMap="function"===typeof e.providers.colorMap.clazz?new e.providers.colorMap.clazz(e.providers.colorMap,this.backendApi.model.app):new kt["a"](e.providers.colorMap,this.backendApi.model.app);this.components.dataArea&&this.components.dataArea.setColorMap(this.providers.colorMap);this.components.colorLegend&&this.components.colorLegend.setColorMap(this.providers.colorMap)}},_initiateBindings:function t(){this._changeWatchers||(this._changeWatchers=[]);Object.keys(this.components).forEach((function(t){this._changeWatchers.push(Lt["a"].bindProperty(this.components[t],"layoutMode",this,"layoutMode"));this._changeWatchers.push(Lt["a"].bindProperty(this.components[t],"verticalLayoutMode",this,"verticalLayoutMode"));this._changeWatchers.push(Lt["a"].bindProperty(this.components[t],"horizontalLayoutMode",this,"horizontalLayoutMode"))}),this);this.components.dataArea&&this._changeWatchers.push(Lt["a"].bindSetter(this._updateSelectionCache.bind(this),this.components.dataArea,"selectableShapes"))},_updateSelectionCache:function t(e){var i=this.selections&&this.selections.cache||this.tooltips&&this.tooltips.cache;if(!i)return;e=e||this.components.dataArea.getSelectableShapes();var a=this.selectionsCacheCollection;var n=!(!this.selections||!this.selections.getActiveType)&&this.selections.getActiveType();var s=!!n;i.clear();e.forEach((function(t){i.add(t)}));s&&(/^item/.test(n.getActiveMode())?e.forEach((function(t){t.selected=a.isCacheItemSelected(t)})):(n.activeComponent instanceof f["a"]&&"range.measure"===n.getActiveMode()||n.activeComponent instanceof Dt&&"range"===n.getActiveMode())&&n.updateShapesState());Object.keys(this.components).forEach((function(t){["colorLegend","xAxis","dimensionAxis"].includes(t)&&this.components[t].setSelectableShapes(e)}),this)},_createComponents:function t(){var e=this;var i=this.components;var a=this.options;var n;var s;var r;Object.keys(a.components).map((function(t){return{sortKey:a.components[t].sortKey||0,cmpKey:t}})).sort((function(t,e){return t.sortKey-e.sortKey})).forEach((function(t){var o=t.cmpKey;n=["component",o].join(".");s=a.components[o];s.label=o;r=null;if("function"===typeof a.components[o].clazz)r=a.components[o].clazz;else switch(o){case"dataArea":case"dataArea2":r=d["a"];break;case"colorLegend":r=Dt;break;case"basicColorLegend":r=xt;break;default:break}if(r){s.parentType=e.constructor.name.charAt(0).toLowerCase()+e.constructor.name.slice(1);s._disableSelections=a._disableSelections;i[o]=new r(this.container,s,n);i[o].selectionsApi=e.selectionsApi;i[o].backendApi=e.backendApi;i[o]instanceof At["a"]||this.layoutEngine.addComponent(i[o])}}),this)},preLayout:function t(){},layout:function t(e,i){this.layoutEngine.layout(this.rect,this._layoutMode,this.containerRect,e,i)},resize:function t(){if(this._data&&this.isDataValid(this._data)){this.prePaint(this._data);return this._paint()}return Tt["a"].resolve()},setSnapshotData:function t(e,i){var a=this.getSnapshotSize();var n={};Object.keys(this.components).forEach((function(t){n[t]={visible:this.components[t].isVisible(),dock:this.components[t].dock,size:{w:this.components[t].rect.width,h:this.components[t].rect.height}}}),this);e.snapshotData.content={chartData:this.getSnapshotChartData(i),size:{w:a.w,h:a.h},components:n,v:.96}},getSnapshotChartData:function t(){var e={};if(this.components.colorLegend){e.legendScrollOffset=this.components.colorLegend.getScrollPosition();var i=this.components.colorLegend.getExternalDataPage();i&&(e.legendDataPage=i)}if(this.providers.colorMap){var a=this.providers.colorMap.getSnapshotChartData();a.forEach((function(t){e[t.key]=t.data}))}return e},getViewState:function t(){return{legendScrollOffset:this.components.colorLegend?this.components.colorLegend.getScrollPosition():0}},getSnapshotStoredChartData:function t(){if(this._data&&this._data.snapshotData&&this._data.snapshotData.content)return this._data.snapshotData.content.chartData;return},setInteractionState:function t(e,i){this._super(e,i);var a=this;Object.keys(this.components).forEach((function(t){a.components[t].setUseTransition(a._navigation&&(a._inAnalysisState||a._inEditState))}))},_postResize:function t(){this._data.legend&&this.components.colorLegend&&this._updateLegendDock(this.components.colorLegend,this._data)},_paint:function t(){if(!this.isValid(this._data))return this.clear().then((function(){return{invalid:true}}));var e=this.getSnapshotStoredChartData();if(this.components.colorLegend){this.components.colorLegend.pagingMode=this._pagingMode||0;this._readStoredData&&e?this.components.colorLegend.setScrollPosition(e.legendScrollOffset||0):this.options.viewState&&this.components.colorLegend.setScrollPosition(this.options.viewState.legendScrollOffset||0)}pe.call(this);this.$scope.dataAttributes.doesNotFit=this.rect.height<10;this._sizeChanged&&this._postResize();return Tt["a"].resolve()},paint:function t(e){if(e.qSelectionInfo&&e.qSelectionInfo.qInSelections||!this.isValid(this._data))return Tt["a"].resolve();return this._paint()},suppressOnPaint:function t(e){var i=this._super(e);i&&this.prePaint(e);return i},prePaint:function t(){this.$scope.dataAttributes.layoutMode=this._layoutMode;this.$scope.dataAttributes.onlyNullColor=false;return this._super()},_preUpdateData:function t(e){if(this.providers.colorMap){if(this._readStoredData){this.providers.colorMap.setSnapshotChartData(e.snapshotData.content.chartData);this.components.miniChart&&this.components.miniChart.setSnapshotChartData(e.snapshotData.content.chartData)}else{this.providers.colorMap.setSnapshotChartData();this.components.miniChart&&this.components.miniChart.setSnapshotChartData()}return this.providers.colorMap.setData(e).then((function(){return e}))}return Tt["a"].resolve(e)},updateData:function t(e){var i=this;if(i._destroyed)return Tt["a"].reject();var a=i.isValid(e);var n;for(n in i.components)i.components[n].setHasValidData(a);if(!a){i.updateSelectableState(e);i._updateSelectionCache([]);return i.clear()}this._readStoredData=this.options._readStoredData||e&&e.snapshotData&&e.snapshotData.content;return this._preUpdateData(e).then(s);function s(t){if(i._destroyed)return Tt["a"].reject();i._data=t;var e=i._updateData(t);i.setYMirrorMode(i.options&&"rtl"===i.options.direction&&!(i._data&&i._data.reverseRtl));function a(){if(i._destroyed)return Tt["a"].reject();if(i.providers.colorMap){var t=i.providers.colorMap.getColorDataInfo();if(i.components.colorLegend&&t&&t.legendPath){if(i._readStoredData){i.components.colorLegend.setExternalColorItems(i._data.snapshotData.content.chartData.legendDataPage);return Tt["a"].resolve()}return Tt["a"].all([i.backendApi.getData(t.legendPages,t.legendPath).then((function(t){i.components.colorLegend.setExternalColorItems(t)}))])}i.components.colorLegend.setExternalColorItems(null);return Tt["a"].resolve()}return Tt["a"].resolve()}if(e&&"function"===typeof e.then)return e.then(a);e=a();return e}},_updateData:function t(e){var i;this._data=e;this._readStoredData=this.options._readStoredData||e&&e.snapshotData&&e.snapshotData.content;this.selectionsCacheCollection.clear();if(e.legend&&this.components.colorLegend){this.components.colorLegend["".concat(e.legend.auto||e.legend.show?"show":"hide","Component")]();this.components.colorLegend.attributeSelectionsCache=this.attributeSelectionsCache;this._updateLegendDock(this.components.colorLegend,e)}me.call(this);if(this.providers.colorMap){this.providers.colorMap.setMeasureFormatters(this.chartFormatter.getFormatters());this.providers.colorMap.setGenericFormatter(this.chartFormatter.createFormatter())}if(this.tooltips){this.tooltips.measureFormatters=this.chartFormatter.getFormatters();this.tooltips.parentScope=this.$scope;this.tooltips.colorMap=this.providers.colorMap}this._chartContext.refresh(e);var a=this.isValid(this._data);for(i in this.components)this.components[i]._hasValidData=a;this.updateSelectableState();return Tt["a"].resolve()},_updateLegendDock:function t(e,i){i.legend&&i.legend.dock&&"auto"!==i.legend.dock?e.setDock(i.legend.dock):e.setDock(e.outerRect.height/e.outerRect.width<1?this.yMirrorMode?"left":"right":"bottom")},destroy:function t(){this.off();while(this._changeWatchers.length)this._changeWatchers.pop().unbind();var e;for(e in this.components)this.components[e].release();for(e in this.providers)this.providers[e].release&&this.providers[e].release();this.$scope.dataAttributes={};if(this.selections){this.selections.cache.clear();this.selections.release();this.selections=null}if(this.tooltips){this.tooltips.release();this.tooltips=null}this._chartContext.release();this._super.apply(this,arguments)},clear:function t(){var e=[];Object.keys(this.components).forEach((function(t){e.push(this.components[t].clear())}),this);return Tt["a"].all(e)},isValid:function t(e){return this.isDataValid(e)},isDataValid:function t(e){var i=!!e&&!!e.qHyperCube&&e.qHyperCube.qDimensionInfo.length&&!e.qHyperCube.qDimensionInfo.some((function(t){return!!t.qError}))&&e.qHyperCube.qMeasureInfo.length&&!e.qHyperCube.qMeasureInfo.some((function(t){return!!t.qError}));return i},isDataSelectable:function t(e,i){if(!this.isValid(this._data)||!this._inAnalysisState)return false;if(void 0!==i)return true!==e.qHyperCube.qDimensionInfo[i].qLocked;return e.qHyperCube.qDimensionInfo.some((function(t){return true!==t.qLocked}))},updateSelectableState:function t(e){if(!this.selections)return;var i=!this.isDataSelectable(e||this._data);Object.keys(this.components).forEach((function(t){this.components[t].setSelectionLocked(i)}),this);this.selections&&this.selections.setLocked(i)},on:function t(){this._navigation&&Object.keys(this.components).forEach((function(t){this.components[t].on()}),this);this._super();this.updateSelectableState(this._data)},off:function t(){this._navigation&&Object.keys(this.components).forEach((function(t){this.components[t].off()}),this);this._super()},selectWhileLocked:function t(e){at["a"].showLockedFeedback(e||this._data.qHyperCube.qDimensionInfo)},selectWhileSingleSelect:function t(e){at["a"].showLockedFeedback(e||this._data.qHyperCube.qDimensionInfo)},getPreferredSize:function t(){return this._super()},getContextMenu:function t(e,i,a){if(Object(ce["b"])("COPY_DATA_CHART")&&a.target&&this.tooltips){var n=this.tooltips.shapesFrom.shapeFromPoint({x:a.offsetX,y:a.offsetY});if(n){var s="".concat(n.getDimensions().join(","),";").concat(n.getMeasures().join(","),";").concat(n.labels.join(","));s&&""!==s&&i.addItem({icon:"lui-icon lui-icon--copy",translation:"$Copy Cell",tid:"copy-cell-context-item",select:function t(){le["a"].copyToClipboard(s)}})}}return this._super(e,i,a)}});var be=e["a"]=ye},P2vc:function(t,e,i){"use strict";var a=i("wkj2");var n=i("MoEg");function s(t,e,i){var n=t.length>0?t[0].positions:[];var s=e._style;var l=e._radialOptions;var f=new a["a"];var p=s.ticks.major.length*i;var v=s.label.offset*i*20;var m;var g="far"===e.getAlignment()?"left":"right";var x=[];var _=Math.min(e.rect.height,e.rect.width);var y=0;var b;var M;var w;var S;var D=[];var A=e._radius;var k="left"===g?1:-1;p*=k;m=k>0?0:e.rect.width;e.getShowLine()&&x.push({stroke:s.line.color,shape:{cx:e._centerPoint.x,cy:e._centerPoint.y,radius:A,radianOffset:0,start:l.start,end:l.end},type:"arc"});if(e.getShowLabels())for(var C=0;C<n.length;C++){b=(n[C]-y)/(_-y);w=h(b,e);S=u(w);S.r+=v;S=d(S,e._centerPoint);M=c(b,e);S.angle=M;D.push(S);f.save();f.translate(w.x+e._centerPoint.x,w.y+e._centerPoint.y);f.rotate(M);x.push({stroke:s.ticks.major.color,opacity:e.ticks[C].opacity,transform:f.elements,shape:{x1:0,x2:-p,y1:0,y2:0},type:"line"});f.restore()}m+=s.ticks.major.length*k;if(e._showLabels&&e._layoutMode>1)for(var q=0;q<t.length;q++){x=x.concat(r(t[q],D,m,e));m+=t[q].labelSpace*k}e._showTitle&&e._layoutMode>1&&(x=x.concat(o(e,s)));e._renderer.shapes=x;e._renderer.render()}function r(t,e,i,a){var n=t.labels;var s=e;var r=t.opacities;var o;var l;var c=[];var h=a._style;var u;var d;var f;var p;var v=n?n.length:0;if(0===v)return;var m=v-1;for(var g=0;g<v;g++){d=a.yMirrorMode?n[m-g]:n[g];o=a._renderer.getTextWidth(d,h.label.font);f=s[g];u=f.angle;l=u-.1<3*Math.PI/2&&u+.1>3*Math.PI/2?"center":u<Math.PI/2||u>3*Math.PI/2?"left":"right";c.push({type:"text",fill:h.label.color,opacity:r?r[g]:1,shape:{text:d,x:f.x,y:f.y,maxWidth:f.x-o<0?f.x:f.x+o>a.rect.width?a.rect.width-f.x:o,height:p,maxNumLines:1,font:h.label.font,align:l,baseline:"middle"}})}return c}function o(t,e){var i=[];var a=Math.min(t.rect.width,t.rect.height);var n=l(t);i.push({type:"text",fill:e.title.color,opacity:1,shape:{text:t._title,x:n.x,y:n.y+a*(.06+Math.min(a-300,0)/-300*.04),maxWidth:1.4*t._radius,maxNumLines:1,font:e.title.font,align:"center",baseline:"middle"}});return i}function l(t){var e={x:t.rect.width/2,y:t.rect.height/2};return e}function c(t,e){var i=e._radialOptions;var a=Math.max(Math.min(t,1),0)*(i.end-i.start)+i.start;return a}function h(t,e,i){var a=e._radialOptions;var n=t*(a.end-a.start)+a.start;var s=e._radius;return d({a:n,r:s},i)}function u(t){return{r:Math.sqrt(t.x*t.x+t.y*t.y),a:Math.atan2(t.y,t.x)}}function d(t,e){e||(e={x:0,y:0});return{x:e.x+t.r*Math.cos(t.a),y:e.y+t.r*Math.sin(t.a)}}e["a"]={renderRadial:s,getPointOfValue:h,getPolPos:u,getCartPos:d,getAngleOfNormalizedValue:c}},P8Hz:function(t,e,i){"use strict";var a=i("BQvq");function n(t){n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return n(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function o(t,e,i){e&&r(t.prototype,e);i&&r(t,i);return t}function l(t,e,i){l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function t(e,i,a){var n=c(e,i);if(!n)return;var s=Object.getOwnPropertyDescriptor(n,i);if(s.get)return s.get.call(a);return s.value};return l(t,e,i||t)}function c(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=m(t);if(null===t)break}return t}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&u(t,e)}function u(t,e){u=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return u(t,e)}function d(t){var e=v();return function i(){var a=m(t),n;if(e){var s=m(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===n(e)||"function"===typeof e))return e;return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function m(t){m=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return m(t)}var g=function(t){h(i,t);var e=d(i);function i(){s(this,i);return e.apply(this,arguments)}o(i,[{key:"addShape",value:function t(e,a,n,s){l(m(i.prototype),"addShape",this).call(this,e,a,n);if(void 0!==s){this._shapeMeasures||(this._shapeMeasures=[]);this._shapeMeasures.push(s)}}},{key:"getMeasuresIndices",value:function t(e){if(this._shapeMeasures&&void 0!==this._shapeMeasures[this._shapes.indexOf(e)]){var a=this._shapeMeasures[this._shapes.indexOf(e)];return void 0!==a?[a]:[]}return l(m(i.prototype),"getMeasuresIndices",this).call(this)}}]);return i}(a["a"]);e["a"]=g},Q5XB:function(t,e,i){"use strict";var a=i("b5IE");var n=i("AaFn");var s;var r=a["a"].extend("Container",{init:function t(){this._super()},addChild:function t(e){n["a"].prototype.addChild.call(this,e);this.doInvalidate&&e.invalidate()},addChildren:n["a"].prototype.addChildren,removeChild:function t(e){this.doInvalidate&&e.invalidate();e._stage=null;var i=e.descendants;var a=i?i.length:0;var s;for(s=0;s<a;s++)i[s]._stage=null;n["a"].prototype.removeChild.call(this,e);return this},removeChildren:function t(e){var i;var a;var n;var s;var r;if(!this._children)return this;if(e){n=e.length;for(i=0;i<n;i++)this.removeChild(e[i])}else{n=this._children.length;for(i=0;i<n;i++){this._children[i]._parent=null;this._children[i]._ancestors=null;this._children[i]._stage=null;s=this._children[i].descendants;r=s?s.length:0;for(a=0;a<r;a++)s[a]._stage=null}this._children.length=0}return this},containsPoint:function t(e,i){if(this._children&&this._children.length)for(var a=0,n=this._children.length;a<n;a++)if(this._children[a].containsPoint(e,i))return true;return false},intersectsLocalRect:function t(e){if(this._children&&this._children.length)for(var i=0,a=this._children.length;i<a;i++)if(this._children[i].intersectsLocalRect(e))return true;return false},intersectsLocalLine:function t(e){if(this._children&&this._children.length)for(var i=0,a=this._children.length;i<a;i++)if(this._children[i].intersectsLocalLine(e))return true;return false},getLocalPoints:function t(){var e=[];if(this._children&&this._children.length)for(var i=0,a=this._children.length;i<a;i++)e=e.concat(this._children[i].getLocalPoints());return e},getLocalBoundingRect:function t(){var e=false;var i;var a;var n;var r;var o;var l;var c;if(this._children&&this._children.length){for(l=0,c=this._children.length;l<c;l++){o=this._children[l].getVisualBounds();if(!o||Number.isNaN(+o.width+o.height+o.x+o.y))continue;if(e){i=Math.min(i,o.x);n=Math.max(n,o.x+o.width);a=Math.min(a,o.y);r=Math.max(r,o.y+o.height)}else{i=o.x;n=o.x+o.width;a=o.y;r=o.y+o.height;e=true}}return e?{x:i,y:a,width:n-i,height:r-a}:s}return s},_calculateBounds:function t(){var e=this._bounds;var i=this.getLocalBoundingRect();var a=0;if(i){e.set(i.x,i.y,i.width,i.height);this._vmBounds.set(i.x,i.y,i.width,i.height);this._visualBounds.set(i.x-a,i.y-a,i.width+2*a,i.height+2*a)}else{e.set(NaN,NaN,NaN,NaN);this._vmBounds.set(NaN,NaN,NaN,NaN);this._visualBounds.set(NaN,NaN,NaN,NaN)}this._dirtyBounds=false}});e["a"]=r},QLJv:function(t,e,i){"use strict";var a=i("nHjU");var n=i("7xSA");var s=i("jRMJ");var r=i("6eqC");var o=i("xnZp");var l=i("iTPj");var c=i("GF7R");var h=i("sWge");function u(t){var e=[];var i=[];t.qHyperCube.qMeasureInfo.forEach((function(t){t.series&&"bar"!==t.series.type&&1===t.series.axis?i.push(t):e.push(t)}));return{primaryMeasures:e,secondaryMeasures:i}}function d(t,e){var i={};var a;if(e)for(a in t)i[a]="qHyperCube"===a?{qDataPages:[],qDimensionInfo:t.qHyperCube.qDimensionInfo.slice(),qMeasureInfo:t.qHyperCube.qMeasureInfo.slice(),qStackedDataPages:[],qMode:"S",qSize:t.qHyperCube.qSize}:t[a];else{if(!t.reducedHyperCube)return t;i={};for(a in t)i[a]="qHyperCube"===a?t.reducedHyperCube:t[a]}return i}var f=a["a"].extend("MiniChart",{init:function t(e,i){this._super.apply(this,Array.prototype.slice.call(arguments));this.components={};this._changeWatchers=[];this.options=i;this._chartContext=new r["a"];this._createComponents();var a=12303291;this._colorMap=void 0;this._constantColorMap={getColorByNode:function t(){return new c["a"](a)},getColor:function t(){return new c["a"](a)}};this.components.dataArea.setColorMap&&this.components.dataArea.setColorMap(this._constantColorMap);this.components.continuousAxis&&this.components.dataArea.setContinuousAxis(this.components.continuousAxis);this.components.dataArea.setLayoutMode(3);this._changeWatchers.push(l["a"].bindProperty(this.components.dataArea,"dimensionTree",this._chartContext,"dimensionTree"));this._logScale=false},setYMirrorMode:function t(e){if(this.yMirrorMode===e)return;this.yMirrorMode=e;for(var i in this.components)this.components[i].setYMirrorMode(e)},setData:function t(e,i){this._reducedDataPromise=null;if(!e||!e.qHyperCube)return h["a"].resolve();this.isDimensionContinuous=i;this.components.dataArea.setIsDimensionContinuous&&this.components.dataArea.setIsDimensionContinuous(i);if(i){this._data=e;return this.invalidateProperties("Mini-chart: setData")}this._data=null;var a=e.qHyperCube;var n=this;var s=Math.min(2e3,1e4/(a.qMeasureInfo.length+1));var r=-1;var o=("linechart"===e.visualization||"barchart"===e.visualization&&e.barGrouping&&"stacked"===e.barGrouping.grouping)&&a.qDimensionInfo.length>1&&"K"===a.qMode?1:0;if("function"!==typeof this.backendApi.getReducedData){this._data=d(e);return this.invalidateProperties()}var l=d(e,true);var c=l.qHyperCube;this._reducedDataPromise=this.backendApi.getReducedData([{qTop:0,qLeft:o,qWidth:e.qHyperCube.qDimensionInfo.length+e.qHyperCube.qMeasureInfo.length+o,qHeight:s}],r).then((function(t){c.qDataPages=t;n._data=l;if(o&&t&&(t[0].isReduced||t[0].qIsReduced)){c.qDimensionInfo=a.qDimensionInfo.slice(0,1);c.qMeasureInfo=[a.qMeasureInfo[0],a.qMeasureInfo[0]]}return n.invalidateProperties()}));return this._reducedDataPromise},calculateRelevantSize:function t(){this.relevantSize=Math.max(30,Math.min(40,this.outerRect[this.isVertical()?"width":"height"]/8))},setRect:function t(e,i,a,n){this.rect.width===a&&this.rect.height===n||this.invalidateDisplay();this._super(e,i,a,n);for(var s in this.components)this.components[s].setRect(0,0,a,n);this.updateSize()},setOuterRect:function t(e,i,a,n){this._super(e,i,a,n);for(var s in this.components)this.components[s].setOuterRect(e,i,a,n)},setLayoutToContainerRatios:function t(e,i){this._super(e,i);for(var a in this.components)this.components[a].setLayoutToContainerRatios(e,i)},setContainerRect:function t(e,i,a,n){this._super(e,i,a,n);for(var s in this.components)this.components[s].setContainerRect(e,i,a,n)},updateSize:function t(){this._super();for(var e in this.components)this.components[e].updateSize()},isVisible:function t(e){return this._super(e)&&this.rect&&this.rect.width>0&&this.rect.height>0},setLogScale:function t(e){this._logScale=e;true!==this._logScale&&(this._logScale=false)},getLogScale:function t(){return this._logScale},setHasValidData:function t(e){this._super(e);Object.keys(this.components).forEach((function(t){this.components[t].setHasValidData(e)}),this)},setDock:function t(e){this._super(e);if(this.isVertical()){this.components.measureAxis.setDock("top");this.components.dimensionAxis.setDock("left")}else{this.components.measureAxis.setDock("left");this.components.dimensionAxis.setDock("bottom")}},paint:function t(e,i){if(!i||!this.isVisible())return h["a"].resolve();this._super(e,i);var a;var n=[];this.components.dataArea.rect=this.rect.clone();this.components.dimensionAxis.rect=this.components.dataArea.rect;this.components.measureAxis.rect=this.components.dataArea.rect;this.components.dataArea.rect.x=0;this.components.dataArea.rect.y=0;this.components.dimensionAxis.invalidateProperties("MiniChart.paint");this.components.dimensionAxis.updateNow(["properties"]);this.components.measureAxis.invalidateProperties("MiniChart.paint");this.components.measureAxis.updateNow(["properties"]);this.components.dimensionAxis.calculateValuePositionMappingInfo();this.components.measureAxis.calculateValuePositionMappingInfo();for(a in this.components)n.push(this.components[a].invalidateDisplay("MiniChart.paint"));return h["a"].all(n)},_createComponents:function t(){var e=this.components;var i=this.options;Object.keys(i.components).forEach((function(t){var a=[this.testId||"component",t].join(".");var r=i.components[t];var o;r.label=t;if("function"===typeof i.components[t].clazz)o=i.components[t].clazz;else switch(t){case"dataArea":o=s["a"];break;case"yAxis":case"measureAxis":o=n["a"];break;default:break}o&&(e[t]=new o(this.container,r,a));e[t].setUseTransition&&e[t].setUseTransition(false)}),this)},setActiveDimensionAxis:function t(e){if(this.components[e]){this._activeDimAxis=this.components[e];this.components.dataArea&&this.components.dataArea.setActiveDimensionAxis(this.components[e])}},updateAxis:function t(e){var i;var a;var n;var s;var r;var o;var l;if("combochart"===e.visualization){s=e.qHyperCube.qMeasureInfo.filter((function(t){return!t.series||"bar"===t.series.type}));r=u(e);o=r.primaryMeasures;l=r.secondaryMeasures;a=Math.min.apply(this,l.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));n=Math.max.apply(this,l.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})));this.components.secondaryMeasureAxis.setDataRange(a,n);a=Math.min.apply(this,o.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));n=Math.max.apply(this,o.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})))}else{a=Math.min.apply(this,e.qHyperCube.qMeasureInfo.filter((function(t){return!Number.isNaN(+t.qMin)})).map((function(t){return t.qMin})));n=Math.max.apply(this,e.qHyperCube.qMeasureInfo.filter((function(t){return!Number.isNaN(+t.qMax)})).map((function(t){return t.qMax})))}var c=this.components.measureAxis;var h=this.components.dimensionAxis;c.setNiceNumberEnabled(false);c.setLogScale(this._logScale);if("barchart"===e.visualization){n=Math.max(0,n);a=Math.min(0,a)}var d=this.components.dataArea.getMinorAxisData();if(d){"combochart"===e.visualization&&o.forEach((function(t){if(s.indexOf(t)<0&&!Number.isNaN(+t.qMin)){d.min=Math.min(t.qMin,d.min);d.max=Math.max(t.qMax,d.max)}}));n=d.max;a=d.min}if(a===n&&0===n||Number.isNaN(+a)&&Number.isNaN(+n)){n=10;a=-10;c.setDataRange(a,n)}else(d||this.isDimensionContinuous)&&c.setDataRange(a,n);if(this.isDimensionContinuous){if(e.qHyperCube.qDimensionInfo){a=e.qHyperCube.qDimensionInfo[0].qMin;n=e.qHyperCube.qDimensionInfo[0].qMax;this._activeDimAxis.setDataRange(a,n);this._activeDimAxis.setPlotMin(a);this._activeDimAxis.setPlotMax(n)}}else{i=this.components.dataArea.getMajorAxisData();i?h.setDataRange(i.data,i.info):h.setDataRange([],[])}},setBackendApi:function t(e){this.backendApi=e},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},getReducedDataHypercube:function t(){var e=this;return this._reducedDataPromise?this._reducedDataPromise.then((function(){return e._data.qHyperCube})):h["a"].resolve()},setSnapshotChartData:function t(e){this._snapshotChartData=e},setOrientation:function t(e){this._orientation=e||"horizontal"},_updateProperties:function t(){if(!this._data)return;var e=this._data;var i=this;function a(){i._chartContext.refresh(e);i._miniColorMap&&i._miniColorMap.setDimensionTree(i._chartContext.getDimensionTree());i.components.dataArea.setData(e);i.components.dataArea.updateNow(["properties"]);i.updateAxis(e);return i._updateDisplay()}if(e&&e.qHyperCube&&e.qHyperCube.qDimensionInfo[0]){var n=e.qHyperCube.qDataPages[0]&&e.qHyperCube.qDataPages[0].qIsReduced;if(this.components.dataArea.setColorMap){if(this.isDimensionContinuous||!n&&(e.color.auto||"byExpression"!==e.color.mode)){this._miniColorMap||(this._miniColorMap=new o["a"](null,this.backendApi.model.app));this._colorMap&&(e.color.persistent=!!this._colorMap.getColorDataInfo().persistentColors);this.components.dataArea.setColorMap(this._miniColorMap);this._miniColorMap.setSnapshotChartData(this._snapshotChartData);return this._miniColorMap.setData(e).then(a)}this.components.dataArea.setColorMap(this._constantColorMap)}}return a()},clear:function t(){Object.keys(this.components).forEach((function(t){this.components[t].clear()}),this)},release:function t(){this._super();Object.keys(this.components).forEach((function(t){this.components[t].release()}),this);this._miniColorMap&&this._miniColorMap.release();while(this._changeWatchers.length)this._changeWatchers.pop().unbind();this._chartContext.release()},showComponent:function t(){this._super.apply(this);if(this.components.dataArea&&this.components.dataArea.renderers)for(var e in this.components.dataArea.renderers)this.components.dataArea.renderers[e].show()},hideComponent:function t(){this._super.apply(this);if(this.components.dataArea&&this.components.dataArea.renderers)for(var e in this.components.dataArea.renderers)this.components.dataArea.renderers[e].hide()}});Object.defineProperty(f.prototype,"className",{value:"MiniChart"});e["a"]=f},T7lR:function(t,e,i){"use strict";var a=i("b5IE");var n=i("MoEg");var s=a["a"].extend("Rect",{init:function t(e,i,a,s,r){this._super();this._radius=r||0;n["a"].apply(this,[e,i,a,s])},containsPoint:n["a"].prototype.pointInside,intersectsLocalLine:n["a"].prototype.intersectsLine,intersectsLocalRect:n["a"].prototype.intersectsRect,getLocalBoundingRect:n["a"].prototype.getBoundingRect,getLocalPoints:n["a"].prototype.getPoints,set:function t(e,i,a,s,r){n["a"].prototype.set.apply(this,[e,i,a,s]);r>=0&&(this._radius=r);this.invalidateBounds()}});Object.keys(n["a"].prototype).forEach((function(t){!s.prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","intersectsRect"].indexOf(t)<0&&(s.prototype[t]=n["a"].prototype[t])}));e["a"]=s},USFI:function(t,e,i){"use strict";var a=i("9Bsw");function n(){this.alternativeTitleRetriever=a["a"].create();this.cache={}}n.prototype.getDimensionTitle=r;n.prototype.getCachedDimensionTitle=o;n.prototype.getMeasureTitle=l;n.prototype.getCachedMeasureTitle=c;n.prototype.resetTitles=h;var s=n;function r(t,e,i){var a=this;return this.alternativeTitleRetriever.getDimensionTitle(t,e,i).then((function(e){d(a.cache,t.qDef.cId,e);return e}))}function o(t){return u(this.cache,t.qDef.cId)}function l(t,e,i){var a=this;return this.alternativeTitleRetriever.getMeasureTitle(t,e,i).then((function(e){d(a.cache,t.qDef.cId,e);return e}))}function c(t){return u(this.cache,t.qDef.cId)}function h(){this.alternativeTitleRetriever.resetTitles()}function u(t,e){return t[e]||""}function d(t,e,i){t[e]=i}var f={create:v};var p=e["a"]=f;function v(){return new s}},UbZW:function(t,e,i){var a,n;!(a=[],n=function(){var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var i="";var a,n,s,r,o,l,c;var h=0;e=t.compress(e);while(h<2*e.length){if(h%2==0){a=e.charCodeAt(h/2)>>8;n=255&e.charCodeAt(h/2);s=h/2+1<e.length?e.charCodeAt(h/2+1)>>8:NaN}else{a=255&e.charCodeAt((h-1)/2);if((h+1)/2<e.length){n=e.charCodeAt((h+1)/2)>>8;s=255&e.charCodeAt((h+1)/2)}else n=s=NaN}h+=3;r=a>>2;o=(3&a)<<4|n>>4;l=(15&n)<<2|s>>6;c=63&s;isNaN(n)?l=c=64:isNaN(s)&&(c=64);i=i+t._keyStr.charAt(r)+t._keyStr.charAt(o)+t._keyStr.charAt(l)+t._keyStr.charAt(c)}return i},decompressFromBase64:function(e){if(null==e)return"";var i="",a=0,n,s,r,o,l,c,h,u,d=0,f=t._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(d<e.length){l=t._keyStr.indexOf(e.charAt(d++));c=t._keyStr.indexOf(e.charAt(d++));h=t._keyStr.indexOf(e.charAt(d++));u=t._keyStr.indexOf(e.charAt(d++));s=l<<2|c>>4;r=(15&c)<<4|h>>2;o=(3&h)<<6|u;if(a%2==0){n=s<<8;64!=h&&(i+=f(n|r));64!=u&&(n=o<<8)}else{i+=f(n|s);64!=h&&(n=r<<8);64!=u&&(i+=f(n|o))}a+=3}return t.decompress(i)},compressToUTF16:function(e){if(null==e)return"";var i="",a,n,s,r=0,o=t._f;e=t.compress(e);for(a=0;a<e.length;a++){n=e.charCodeAt(a);switch(r++){case 0:i+=o(32+(n>>1));s=(1&n)<<14;break;case 1:i+=o(s+(n>>2)+32);s=(3&n)<<13;break;case 2:i+=o(s+(n>>3)+32);s=(7&n)<<12;break;case 3:i+=o(s+(n>>4)+32);s=(15&n)<<11;break;case 4:i+=o(s+(n>>5)+32);s=(31&n)<<10;break;case 5:i+=o(s+(n>>6)+32);s=(63&n)<<9;break;case 6:i+=o(s+(n>>7)+32);s=(127&n)<<8;break;case 7:i+=o(s+(n>>8)+32);s=(255&n)<<7;break;case 8:i+=o(s+(n>>9)+32);s=(511&n)<<6;break;case 9:i+=o(s+(n>>10)+32);s=(1023&n)<<5;break;case 10:i+=o(s+(n>>11)+32);s=(2047&n)<<4;break;case 11:i+=o(s+(n>>12)+32);s=(4095&n)<<3;break;case 12:i+=o(s+(n>>13)+32);s=(8191&n)<<2;break;case 13:i+=o(s+(n>>14)+32);s=(16383&n)<<1;break;case 14:i+=o(s+(n>>15)+32,32+(32767&n));r=0;break}}return i+o(s+32)},decompressFromUTF16:function(e){if(null==e)return"";var i="",a,n,s=0,r=0,o=t._f;while(r<e.length){n=e.charCodeAt(r)-32;switch(s++){case 0:a=n<<1;break;case 1:i+=o(a|n>>14);a=(16383&n)<<2;break;case 2:i+=o(a|n>>13);a=(8191&n)<<3;break;case 3:i+=o(a|n>>12);a=(4095&n)<<4;break;case 4:i+=o(a|n>>11);a=(2047&n)<<5;break;case 5:i+=o(a|n>>10);a=(1023&n)<<6;break;case 6:i+=o(a|n>>9);a=(511&n)<<7;break;case 7:i+=o(a|n>>8);a=(255&n)<<8;break;case 8:i+=o(a|n>>7);a=(127&n)<<9;break;case 9:i+=o(a|n>>6);a=(63&n)<<10;break;case 10:i+=o(a|n>>5);a=(31&n)<<11;break;case 11:i+=o(a|n>>4);a=(15&n)<<12;break;case 12:i+=o(a|n>>3);a=(7&n)<<13;break;case 13:i+=o(a|n>>2);a=(3&n)<<14;break;case 14:i+=o(a|n>>1);a=(1&n)<<15;break;case 15:i+=o(a|n);s=0;break}r++}return t.decompress(i)},compress:function(e){if(null==e)return"";var i,a,n={},s={},r="",o="",l="",c=2,h=3,u=2,d="",f=0,p=0,v,m=t._f;for(v=0;v<e.length;v+=1){r=e.charAt(v);if(!Object.prototype.hasOwnProperty.call(n,r)){n[r]=h++;s[r]=true}o=l+r;if(Object.prototype.hasOwnProperty.call(n,o))l=o;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(i=0;i<u;i++){f<<=1;if(15==p){p=0;d+=m(f);f=0}else p++}a=l.charCodeAt(0);for(i=0;i<8;i++){f=f<<1|1&a;if(15==p){p=0;d+=m(f);f=0}else p++;a>>=1}}else{a=1;for(i=0;i<u;i++){f=f<<1|a;if(15==p){p=0;d+=m(f);f=0}else p++;a=0}a=l.charCodeAt(0);for(i=0;i<16;i++){f=f<<1|1&a;if(15==p){p=0;d+=m(f);f=0}else p++;a>>=1}}c--;if(0==c){c=Math.pow(2,u);u++}delete s[l]}else{a=n[l];for(i=0;i<u;i++){f=f<<1|1&a;if(15==p){p=0;d+=m(f);f=0}else p++;a>>=1}}c--;if(0==c){c=Math.pow(2,u);u++}n[o]=h++;l=String(r)}}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(i=0;i<u;i++){f<<=1;if(15==p){p=0;d+=m(f);f=0}else p++}a=l.charCodeAt(0);for(i=0;i<8;i++){f=f<<1|1&a;if(15==p){p=0;d+=m(f);f=0}else p++;a>>=1}}else{a=1;for(i=0;i<u;i++){f=f<<1|a;if(15==p){p=0;d+=m(f);f=0}else p++;a=0}a=l.charCodeAt(0);for(i=0;i<16;i++){f=f<<1|1&a;if(15==p){p=0;d+=m(f);f=0}else p++;a>>=1}}c--;if(0==c){c=Math.pow(2,u);u++}delete s[l]}else{a=n[l];for(i=0;i<u;i++){f=f<<1|1&a;if(15==p){p=0;d+=m(f);f=0}else p++;a>>=1}}c--;if(0==c){c=Math.pow(2,u);u++}}a=2;for(i=0;i<u;i++){f=f<<1|1&a;if(15==p){p=0;d+=m(f);f=0}else p++;a>>=1}while(true){f<<=1;if(15==p){d+=m(f);break}p++}return d},decompress:function(e){if(null==e)return"";if(""==e)return null;var i=[],a,n=4,s=4,r=3,o="",l="",c,h,u,d,f,p,v,m=t._f,g={string:e,val:e.charCodeAt(0),position:32768,index:1};for(c=0;c<3;c+=1)i[c]=c;u=0;f=Math.pow(2,2);p=1;while(p!=f){d=g.val&g.position;g.position>>=1;if(0==g.position){g.position=32768;g.val=g.string.charCodeAt(g.index++)}u|=(d>0?1:0)*p;p<<=1}switch(a=u){case 0:u=0;f=Math.pow(2,8);p=1;while(p!=f){d=g.val&g.position;g.position>>=1;if(0==g.position){g.position=32768;g.val=g.string.charCodeAt(g.index++)}u|=(d>0?1:0)*p;p<<=1}v=m(u);break;case 1:u=0;f=Math.pow(2,16);p=1;while(p!=f){d=g.val&g.position;g.position>>=1;if(0==g.position){g.position=32768;g.val=g.string.charCodeAt(g.index++)}u|=(d>0?1:0)*p;p<<=1}v=m(u);break;case 2:return""}i[3]=v;h=l=v;while(true){if(g.index>g.string.length)return"";u=0;f=Math.pow(2,r);p=1;while(p!=f){d=g.val&g.position;g.position>>=1;if(0==g.position){g.position=32768;g.val=g.string.charCodeAt(g.index++)}u|=(d>0?1:0)*p;p<<=1}switch(v=u){case 0:u=0;f=Math.pow(2,8);p=1;while(p!=f){d=g.val&g.position;g.position>>=1;if(0==g.position){g.position=32768;g.val=g.string.charCodeAt(g.index++)}u|=(d>0?1:0)*p;p<<=1}i[s++]=m(u);v=s-1;n--;break;case 1:u=0;f=Math.pow(2,16);p=1;while(p!=f){d=g.val&g.position;g.position>>=1;if(0==g.position){g.position=32768;g.val=g.string.charCodeAt(g.index++)}u|=(d>0?1:0)*p;p<<=1}i[s++]=m(u);v=s-1;n--;break;case 2:return l}if(0==n){n=Math.pow(2,r);r++}if(i[v])o=i[v];else{if(v!==s)return null;o=h+h.charAt(0)}l+=o;i[s++]=h+o.charAt(0);n--;h=o;if(0==n){n=Math.pow(2,r);r++}}}};return t}.apply(e,a),void 0!==n&&(t.exports=n))},WoAn:function(t,e,i){"use strict";var a=i("MoEg");function n(t,e,i){0===arguments.length?this.set(0,0,0):this.set(t,e,i)}n.prototype={toString:function t(){return"".concat(this.cx," ").concat(this.cy," ").concat(this.r)},clone:function t(){return new n(this.cx,this.cy,this.r)},set:function t(e,i,a){this.cx=e;this.cy=i;this.r=a;this.radius=a},setPosition:function t(e,i){this.cx=e;this.cy=i},setRadius:function t(e){this.radius=e},combineWith:function t(){},intersectsWith:function t(e){return e.pointInside(this.cx,this.cy)},intersectsRect:function t(e){return e.pointInside(this.cx,this.cy)},intersectsLine:function t(e){if(this.pointInside(e.x1,e.y1)||this.pointInside(e.x2,e.y2))return true;var i;var a;var n;var s=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));var r=(e.x2-e.x1)/s;var o=(e.y2-e.y1)/s;var l=r*(this.cx-e.x1)+o*(this.cy-e.y1);var c=r*(this.cx-e.x2)+o*(this.cy-e.y2);if(l>=0&&c<=1){i=l*r+e.x1;a=l*o+e.y1;n=Math.sqrt(Math.pow(i-this.cx,2)+Math.pow(a-this.cy,2));if(n<=this.r)return true}else if(c>=0&&c<=1){i=c*r+e.x2;a=c*o+e.y2;n=Math.sqrt(Math.pow(i-this.cx,2)+Math.pow(a-this.cy,2));if(n<=this.r)return true}return false},pointInside:function t(e,i){var a=Math.sqrt(Math.pow(this.cx-e,2)+Math.pow(this.cy-i,2));return a<=this.r},getPoints:function t(){return[{x:this.cx,y:this.cy}]},getBoundingRect:function t(){return new a["a"](this.cx-this.r,this.cy-this.r,2*this.r,2*this.r)}};e["a"]=n},WwCo:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("nHjU");var r=i("P2vc");var o=i("ohbW");var l=i("wkj2");var c=i("MoEg");var h=i("R0oC");var u=i("UV1h");var d=0;var f=1;var p=3;var v=1;function m(){var t=this;var e=this.getLevels()||[];if(!e.length&&!this._showTitle_internal){this._renderer.clear();return}this._cacheItems&&this._cacheItems.length&&(this._cacheItems[0].objectShapes?this._cacheItems.forEach((function(e){e.objectShapes[t.selectionIdentifier]=null})):this._cacheItems.forEach((function(e){e.clearShapes(t.selectionIdentifier)})));this.isRadial()?r["a"].renderRadial(e,this,this._windowSizeMultiplier):this.isVertical()?M.apply(this,[e]):D.apply(this,[e,this.indicators])}function g(t,e,i,a){var n=t.labels;var s=t.positions;var r=Math.abs(this._fontHeight*Math.sin(i));var o=t.labelSpace;var c=Math.abs(o/Math.sin(i));var u=Math.cos(i);var d;var f;var p;var v;var m;var g;var x;var _;var y=this.yMirrorMode?-Math.PI/2:Math.PI/2;var b=(new l["a"]).skew(y-i,0).scale(this._discreteSpacing*(this._groupSize||1)/this._fontHeight,1).translate(0,-a*this._fontHeight/2).rotate(-y);var M=[];var w;var S=i<0?"right":"left";var D="middle";"near"===this.getAlignment()&&"center"!==S&&(S="left"===S?"right":"left");for(w=0;w<n.length;w++){d=s[w];if(d<0||d>this.rect.width)continue;x=new l["a"];x.translate(s[w],e+a*r/2);x.rotate(i);g="right"===S?Math.min((d+this._edgeBleed.left)/u,c):Math.min((this.rect.width-d+this._edgeBleed.right)/u,c);g-=2*r;M.push({type:"text",fill:this._style.label.color,opacity:t.opacities[w],transform:x.elements,shape:{text:n[w]||"",font:this._style.label.font,maxWidth:g,align:S,baseline:D}});if(A(this._cacheItems,this.isDiscrete(),t.indecies,w)){f="left"===S?0:-Math.abs(o);p=this._fontHeight/2;v=[{x:f,y:-p},{x:f+o,y:-p},{x:f+o,y:p},{x:f,y:p}];_=new l["a"];_.translate(s[w]-t.offsets[w],e+a*r/2);_.multiply(b);m=new h["a"](_.transformPoints(v));k(this._cacheItems,t.indecies[w],this.selectionIdentifier,m)}}return M}function x(t,e){t<e/2?t+=e/2-t:e/2>this._plotSize-t+this._padding.left&&(t-=e/2-(this._plotSize-t+this._padding.left));return t}function _(t,e,i){var a=20;var n="near"===this.getAlignment()?"bottom":"top";var s=t.align||"center";var r;var l;var h;var u;var d;var p;var v;var m;var g=t.labels;var _=t.positions;var b=t.opacities;var M=t.labelMode;var w=this._style;var S=t.widths;var D=[];for(r=0;r<g.length;r++){m=S[r];if(t.labelsBetweenTicks){if(this.yMirrorMode&&(_[r+1]>this.rect.width||_[r]<0))continue;if(!this.yMirrorMode&&(_[r+1]<0||_[r]>this.rect.width))continue;p=Math.min(this.rect.width,Math.max(0,_[r]));v=Math.min(this.rect.width,Math.max(0,_[r+1]||(this.yMirrorMode?Number.MIN_VALUE:Number.MAX_VALUE)));l=p+("left"===s?this._labelPadding:-this._labelPadding);m=Math.min(m,Math.abs(p-v)-this._labelPadding);if(m<this._labelPadding+a)continue}else{l=_[r];if(l<-.5||l>this.rect.width+.5)continue}if(this.isDiscrete()&&M===f&&(0===r||r===g.length-1)){h=o["a"].measureTextObject({type:"text",shape:{text:g[r]||"",x:l,y:e,maxWidth:S[r]-this._labelPadding,font:this._style.label.font,align:s,baseline:n}}).width;0===r&&l<h/2?l+=h/2-l:r===g.length-1&&h/2>this._plotSize-l&&(l-=h/2-(this._plotSize-l))}d=e+(M===f?0:1.5*this._fontHeight*(r%2)*i);if(A(this._cacheItems,this.isDiscrete(),t.indecies,r)){u=new c["a"](_[r]-t.offsets[r]-t.fullWidths[r]/2,d-("bottom"===n?this._fontHeight*w.label.lineHeight:0),t.fullWidths[r],this._fontHeight*w.label.lineHeight);k(this._cacheItems,t.indecies[r],this.selectionIdentifier,u)}D.push({type:"text",fill:this._style.label.color,opacity:b?b[r]:1,_index:r,shape:{text:g[r]||"",x:l,y:d,maxWidth:m-this._labelPadding,font:this._style.label.font,align:s,baseline:n}})}var C=t.labelsBetweenTicks&&g.length>=2&&(this.yMirrorMode?-.5===_[g.length-1]:this.rect.width-_[g.length-1]===.5);C&&y.call(this,{objectsToRender:D,positions:_,values:g,opacities:b,widths:S,align:s,baseline:n,y:e});if(!this.isDiscrete()&&D.length>0&&!t.labelsBetweenTicks){var q=D[0];h=o["a"].measureTextObject(q).width;q.shape.x=x.apply(this,[q.shape.x,h]);q=D[D.length-1];h=o["a"].measureTextObject(q).width;q.shape.x=x.apply(this,[q.shape.x,h])}return D}function y(t){if(0===t.objectsToRender.length)return;var e=t.objectsToRender;var i=t.positions;var a=t.values;var n=t.opacities;var s=t.widths;var r=t.align;var l=t.baseline;var c=t.y;var h=Math.min(this.rect.width,Math.max(0,i[a.length-1]));var u=h+("left"===r?-this._labelPadding:this._labelPadding);var d=o["a"].measureTextObject(e[e.length-1]).width;var f={text:a[a.length-1],font:this._style.label.font,baseline:l};var p=o["a"].measureDisplayTextObject(f).width;if(d+p+3*this._labelPadding>s[a.length-2]){if(!(a.length>2))return;e.length-=1}e.push({type:"text",fill:this._style.label.color,opacity:n?n[a.length-1]:1,_index:a.length-1,shape:{text:a[a.length-1]||"",x:u,y:c,maxWidth:s[a.length-2]-this._labelPadding,font:this._style.label.font,align:"left"===r?"right":"left",baseline:l}})}function b(t,e,i){var a=t.labels;var n=t.positions;var s=t.opacities;var r=t.labelSpace;var o=[];var l=this._style;var h;var u;var d;var f;var p=this._renderer.getFontHeight(l.label.font);d=n.length>1?Math.abs(n[0]-n[1]):this.rect.height;this.isDiscrete()||(d=0);for(u=0;u<a.length;u++){h=n[u];h=Math.max(p/2,Math.min(this._padding.top+this._plotSize-p/2,h));if(h-.5<0||h+.5>this.rect.height)continue;if(A(this._cacheItems,this.isDiscrete(),t.indecies,u)){f=new c["a"](e-("right"===i?r:0),n[u]-t.fullWidths[u]/2-t.offsets[u],r,t.fullWidths[u]);k(this._cacheItems,t.indecies[u],this.selectionIdentifier,f)}o.push({type:"text",fill:l.label.color,opacity:s?s[u]:1,shape:{text:a[u],x:e,y:h-d/2,maxWidth:r,height:d,maxNumLines:1,font:l.label.font,align:i,baseline:"middle"}})}return o}function M(t){var e=t[0]?t[0].positions:[];var i=t[0]?t[0].opacities:[];var a=this._style;var n=this.isDiscrete()?0:a.ticks.major.length;var s=1;var r;var o;var c=new l["a"];var h="far"===this.getAlignment()?"left":"right";var u=[];var f;var p="left"===h?1:-1;n*=p;r=p>0?0:this.rect.width;o=0;r+=p*s/2;o+=this._padding.top;this._showLine_internal&&u.push({stroke:a.line.color,shape:{x1:r,x2:r,y1:o-1,y2:o+this._plotSize},type:"line"});if(!this.isDiscrete()&&this._showLabels_internal){if(this._showLabels_internal)for(f=0;f<e.length;f++)e[f]>=0&&e[f]<=this.rect.height&&u.push({stroke:a.ticks.major.color,opacity:i[f],shape:{x1:r,x2:r+n,y1:e[f],y2:e[f]},type:"line"});r+=a.ticks.major.length*p}if(this._showLabels_internal){r+=a.label.margin*p;t.reverse();for(f=0;f<t.length;f++){if(t[f].labelMode===d)continue;u=u.concat(b.apply(this,[t[f],r,h]));r+=t[f].labelSpace*p}t.reverse()}if(this._showTitle_internal){c=new l["a"];c.translate((p>0?r:0)+(p>0?this.rect.width-r:r)/2,this._padding.top+this._plotSize/2);c.rotate(.5*Math.PI*("right"===h?-1:1));u.push({type:"text",fill:a.title.color,transform:c.elements,shape:{text:this._title||"",maxWidth:this._plotSize,font:a.title.font,align:"center",baseline:"middle"}})}this._renderer.shapes=u;this._renderer.render()}function w(t,e,i,a,n){if(!e)return;for(var s=0;s<e.positions.length;s++)e.positions[s]>=0&&e.positions[s]<=this.rect.width&&t.push({stroke:n,opacity:e.opacities[s],shape:{x1:e.positions[s],x2:e.positions[s],y1:i,y2:i+a},type:"line"})}function S(t,e){var i=this._padding.left||0;t.push({stroke:this._style.line.color,shape:{x1:i-1,x2:i+this._plotSize,y1:e,y2:e},type:"line"})}function D(t,e){var i=!!t[0]&&t[0].labelsBetweenTicks;var a=this._style.ticks.major.length;var n;var s="far"===this.getAlignment()?1:-1;var r=[];var o;var l;var c;a*=s;var h=this._padding.left||0;n="near"===this.getAlignment()?this.rect.height-1:this.isDiscrete()&&this.isHorizontal()?-1:0;n+=v/2*s;S.call(this,r,n);if(!this.isDiscrete()){n+=v*s/2;if(!i){w.call(this,r,t[0],n,a,this._style.ticks.major.color);n+=a}}if(this._showLabels_internal){w.call(this,r,e,n,3,this._style.ticks.major.color);n+=this._style.label.margin*s;for(o=0;o<t.length;o++){if(t[o].labelMode===d)continue;if(i){a=t[0].labelSpace*s*(o+(t[o].outOfSyncWithLevelBelow?0:1));l=n-this._style.label.margin*s-(t[o].outOfSyncWithLevelBelow?0:t[0].labelSpace*s*o);c=t.length>1&&o<t.length-1?this._style.ticks.minor.color:this._style.ticks.major.color;w.call(this,r,t[o],l,a,c)}r=t[o].labelMode===p?r.concat(g.apply(this,[t[o],n,t[o].radians,s])):r.concat(_.apply(this,[t[o],n,s]));t[o].labelSpace&&(n+=t[o].labelSpace*s)}}this._showTitle_internal&&r.push({type:"text",fill:this._style.title.color,shape:{x:h,y:s>0?n:0,width:this._plotSize,height:s>0?this.rect.height-n:n,text:this._title||"",font:this._style.title.font,align:"center",baseline:"middle"}});this._renderer.shapes=r;this._renderer.render()}function A(t,e,i,a){return e&&t&&i&&t[i[a][0]]}function k(t,e,i,a){Array.isArray(e)?e.forEach((function(e){t[e].addShape(i,a)})):t[e].addShape(i,a)}var C=s["a"].extend("Axis",{init:function t(e,i,a){this._super.apply(this,[e,n.a.extend(true,{},{components:{title:{show:true,showFlag:i.showFlag},labels:{show:false,showFlag:i.showFlag}}},i),a]);this._fontHeight=20;this._titleShowFlag=i.titleShowFlag||null;this._showLabels=true;this._showLabels_internal=true;this._showLine=true;this._showLine_internal=true;this._showTitle=false;this._dataIndex=0;this._radial=false;this._relevantAngle=0;this._labelPadding=4;this._cacheItems=null;this._styleService=u["a"].initializeService("object.".concat(i.parentType));this._style=this._getStyleObject(this._styleService);this._padding={top:0,bottom:0,left:0,right:0};this._renderer=new o["a"](this.container);this._$renderAreaWrap&&this._$renderAreaWrap.addClass("qv-chart-component-axis");this.innerRect=new c["a"](0,0,0,0);this.renderers={axis:this._renderer};this.isDimension=i.isDimension},getLevels:function t(){return[]},setSelectableShapes:function t(e){this._cacheItems=e},setSelectedRanges:function t(){},calculateValuePositionMappingInfo:function t(){},_calculatePlotSize:function t(e){var i=0;var a;var n;if(this.isRadial()){a=Math.min(e.height,e.width);n=.4*a;this._relevantAngle=Math.abs(this._radialOptions.end-this._radialOptions.start);i=Math.tan(-this._relevantAngle/4+Math.PI/2)*a*.02;this._radius=n+i;this._centerPoint={x:e.width/2,y:e.height/2+4*i}}else a=this.isVertical()?e.height-this._padding.top-this._padding.bottom:e.width-this._padding.left-this._padding.right;0===this._plotSize&&0!==a,this._plotSize=a},_calculateEdgeBleedAndPlotSize:function t(e){this._edgeBleed={top:(this.isVertical(),1),bottom:this.isVertical()?1:0,left:this.isVertical()?1:Math.max(e.x,1),right:this.isVertical()?0:Math.max(0,this.outerRect.width-e.width-e.x)};this._calculatePlotSize(e)},preRelevantSizeCalculation:function t(){this._isSizing=true;this.updateNow(["properties"]);this._isVertical=this.isVertical();this._style=this._getStyleObject(this._styleService,this._layoutMode,this.isDiscrete());this._fontHeight=Math.ceil(this._renderer.getFontHeight(this._style.label.font));var e=this._isVertical;this._showTitle_internal=s["a"].prototype.isVisible.call({show:this._showTitle&&!!this._title,_verticalLayoutMode:this._verticalLayoutMode,_horizontalLayoutMode:this._horizontalLayoutMode,isVertical:function t(){return e},showFlag:null!==this._titleShowFlag?this._titleShowFlag:this.showFlag<<1},this._layoutMode);if(this._showTitle_internal){this._titleFontHeight=this._renderer.getFontHeight(this._style.title.font);this.relevantSize+=this._titleFontHeight*this._style.title.lineHeight}},calculatePreliminaryRelevantSize:function t(e,i){var a=0;var n=0;var s=e[this.isVertical()?"height":"width"];this._isSizing=true;this.relevantSize=0;this.preliminaryRelevantSize=0;this._preliminaryStatics=0;if(s<=0)return;var r=this.calculatePreliminaryLabelSpace(e,i);a=r.relevantLabelSize||0;n=r.relevantSpacing||0;this.isDiscrete()?this._preliminaryStatics+=v:this._preliminaryStatics+=this._style.ticks.major.length;if(a){this.preliminaryRelevantSize+=a;this.preliminaryRelevantSize+=this._style.label.margin}this._showTitle_internal&&(this._preliminaryStatics+=this._titleFontHeight*this._style.title.lineHeight);this.preliminaryRelevantSize+=this._preliminaryStatics;this.preliminaryRelevantSize=Math.ceil(this.preliminaryRelevantSize);this.perpendicularlyRelevantSpacing={top:0,left:this.yMirrorMode&&"near"===this.getAlignment()||!this.yMirrorMode&&"far"===this.getAlignment()?n:0,right:this.yMirrorMode&&"far"===this.getAlignment()||!this.yMirrorMode&&"near"===this.getAlignment()?n:0,bottom:0};this.relevantSize=this.preliminaryRelevantSize},calculateRelevantSize:function t(e,i,a){this._isSizing=true;this._isVertical=this.isVertical();this.relevantSize=0;var n=a||e;var s=0;var r=0;this.rect.set(n.x,n.y,n.width,n.height);this._calculationSize=n[this.isVertical()?"height":"width"];this.isVertical()?this._calculationSize-=this._padding.top+this._padding.bottom:this._calculationSize-=this._padding.left+this._padding.right;this._plotSize=this._calculationSize;if(0===n.width)return;var o=this.calculateLabelSpace(e,i,a);s=o.relevantLabelSize||0;r=o.relevantSpacing||0;if(s){this.relevantSize+=s;this.relevantSize+=this._style.label.margin}this.relevantSize+=this._preliminaryStatics;this.relevantSize=Math.ceil(this.relevantSize);this.perpendicularlyRelevantSpacing={top:0,left:this.yMirrorMode&&"near"===this.getAlignment()||!this.yMirrorMode&&"far"===this.getAlignment()?r:0,right:this.yMirrorMode&&"far"===this.getAlignment()||!this.yMirrorMode&&"near"===this.getAlignment()?r:0,bottom:0};this._isSizing=false;return this},insertAdjacentTo:function t(e,i){this._super(e,i);if(!this.isDiscrete())switch(this.dock){case"top":this.rect.y+=1;break;case"bottom":this.rect.y-=1;break;default:break}},_getStyleObject:function t(e,i,a){var n=e.layoutMap[i]||"medium";var s=a?".discrete":"";var r=e.scaleFontSize(e.getStyle("axis.label.name","fontSize"),i,s);var o=e.getStyle("axis.label.name","fontFamily");var l=e.scaleFontSize(e.getStyle("axis.title","fontSize"),"full"===n?i:"medium",s);var c=e.getStyle("axis.title","fontFamily");var h={backgroundColor:e.getStyle("","backgroundColor"),label:{lineHeight:1.4,color:e.getStyle("axis.label.name","color"),margin:4,offset:1,font:"normal ".concat(r," ").concat(o)},ticks:{major:{color:e.getStyle("axis.line.major","color"),length:8},minor:{color:e.getStyle("axis.line.minor","color"),length:8}},line:{color:e.getStyle("axis.line.major","color")},title:{lineHeight:1.4,font:"normal ".concat(l," ").concat(c),color:e.getStyle("axis.title","color")}};return h},isVisible:function t(){return this._super.apply(this,[].slice.call(arguments))&&this._showSubcomponents},setShowLabels:function t(e){this._showLabels_internal=e;this._showLabels=e},getShowLabels:function t(){return this._showLabels},getSpacingMode:function t(){return},setShowLine:function t(e){this._showLine_internal=e;this._showLine=e},getShowLine:function t(){return this._showLine},setShowStrategy:function t(e){this._showSubcomponents="none"!==e;this._showTitle=["all","title"].includes(e);this._showTitle_internal=this._showTitle;this.components.title.show=this._showSubcomponents&&["all","title"].includes(e);this._showLabels=["all","labels"].includes(e);this._showLabels_internal=this._showLabels;this.components.labels.show=this._showSubcomponents&&["all","labels"].includes(e)},getShowStrategy:function t(){return this._showSubcomponents},setTitle:function t(e){this._title=e},setLabelMode:function t(e){this._explicitLabelMode=e},setLabels:function t(e){this._explicitLabels=e},setCurrentDataIndices:function t(e){this._currentDataIndices=Array.isArray(e)?e:[e]},setDataIndices:function t(e){this._dataIndices=Array.isArray(e)?e:[e]},setDataRange:function t(){},setOffset:function t(){},setInnerOffset:function t(){},getInnerOffset:function t(){},getNumDiscreteUnits:function t(){},setNumDiscreteUnits:function t(){},getNumDiscreteUnitsInView:function t(){},setMaxDiscreteUnitSize:function t(){},setMinDiscreteUnitSize:function t(){},setUnitAlignment:function t(){},_updateProperties:function t(){var e=this.getType().indices;this._formatter=1===e.length&&this.measureFormatters.length?this.measureFormatters[e[0]]:this.combinedMeasuresFormatter||this._defaultFormatter;this.container.setAttribute("data-type",this.isDiscrete()?"discrete":"continuous");return this},updateSize:function t(){this._super();this._calculateEdgeBleedAndPlotSize(this.rect);this._renderer.edgeBleed=this._edgeBleed;this.innerRect=new c["a"](this.rect.x+this._padding.left,this.rect.y+this._padding.top,this.rect.width-this._padding.left-this._padding.right,this.rect.height-this._padding.top-this._padding.bottom);this._isVertical=this.isVertical()},paint:function t(){m.apply(this,[]);this.fire("rendered");return this},isDiscrete:function t(){return false},getPositionOfValue:function t(){},getAngleOfValue:function t(){},getValueOfPosition:function t(){},getType:function t(){return{type:this.isDimension||this.isDiscrete()?"dimension":"measure",indices:this._dataIndices||[0],current:this._currentDataIndices||[0]}},setPadding:function t(e,i,a,n){this._padding={top:e>0?e:0,right:i>0?i:0,bottom:a>0?a:0,left:n>0?n:0}},getPadding:function t(){return this._padding},isVertical:function t(){var e=this.options.dock;switch(e){case"left":case"right":return true;case"center":return"vertical"===this._orientation;default:return false}},setOrientation:function t(e){this._orientation=e},setAlignment:function t(e){this._align=e},getAlignment:function t(){var e=this.options.dock;switch(e){case"left":case"top":return"near";case"center":return this._align;default:return"far"}},setRadial:function t(e,i){this._radial=e;this._radialOptions=i},isRadial:function t(){return this._radial}});e["a"]=C},"YWN+":function(t,e,i){"use strict";var a=i("q6LT");var n=a["a"].extend("HyperCube",{init:function t(e,i){this._super(e,"/qHyperCubeDef",i);this.cacheCube.setMethodName("getHyperCubeData")},updateCache:function t(e){if(e&&e.qHyperCube){this.cacheCube.set(e.qHyperCube.qDataPages);this.cacheCube.setCubeSize(e.qHyperCube.qSize)}else this.cacheCube.clear()},getData:function t(e,i){if(i)return this.model.getHyperCubeData(i,e);return this.cacheCube.getData(e)},getHyperCubeBinnedData:function t(e,i,a,n){return this.model.getHyperCubeBinnedData(this.path,e,{width:0,height:0},i,a,n,0)},getHyperCubeContinousData:function t(e,i){return this.model.getHyperCubeContinuousData(this.path,e,i)},getReducedData:function t(e,i,a){a=void 0!==a?a:"D1";return this.model.getHyperCubeReducedData(this.path,e,i,a)},selectDimensionRange:function t(e){var i=e.map((function(t){return{qDimIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:true,qMaxInclEq:t.range.maxIncluded}}}));return this.model.selectHyperCubeContinuousRange(this.path,i)},selectRange:function t(e,i,a){i=!!i;a=a||[];var n=e.map((function(t){return{qMeasureIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:false!==t.range.minInclEq,qMaxInclEq:false!==t.range.maxInclEq}}}));return this.model.rangeSelectHyperCubeValues(this.path,n,a,i)},selectRects:function t(e,i){i=i||[];var a=e.map((function(t){var e=t[0];var a=t[1];return{qRanges:[{qMeasureIx:e.idx,qRange:{qMin:e.range.min,qMax:e.range.max,qMinInclEq:false!==e.range.minInclEq,qMaxInclEq:false!==e.range.maxInclEq}},{qMeasureIx:a.idx,qRange:{qMin:a.range.min,qMax:a.range.max,qMinInclEq:false!==a.range.minInclEq,qMaxInclEq:false!==a.range.maxInclEq}}],qColumnToSelect:i}}));return this.model.multiRangeSelectHyperCubeValues(this.path,a,false)},select:function t(e,i){return this.model.selectHyperCubeCells(this.path,e,i)},selectValues:function t(e,i,a,n){return this.model.selectHyperCubeValues(n||this.path,e,i,a)},getProperties:function t(){return this.model.getProperties()},getDimensionInfos:function t(){return this.model.layout.qHyperCube.qDimensionInfo},getMeasureInfos:function t(){return this.model.layout.qHyperCube.qMeasureInfo},clearSelections:function t(){return this.model.resetMadeSelections()},hasSelections:function t(){return this.model.layout.qSelectionInfo.qMadeSelections}});e["a"]=n},ZM1a:function(t,e,i){"use strict";var a=i("ZrpC");e["a"]={displayObject:a["a"],render:function t(e,i,a){var n;var s;var r;var o;var l;var c;e.beginPath();for(l=0;l<this._polygons.length;l++){n=this._polygons[l].points;s=n?n.length:0;r=n[0];if(!r)return;c=r;e.moveTo(r.x,r.y);for(o=1;o<s;o+=1){r=n[o];e.lineTo(r.x,r.y)}false===this.close||!a||c.x===r.x&&c.y===r.y||e.lineTo(c.x,c.y)}false!==this.close&&e.closePath();i&&e.fill();a&&e.stroke()}}},ZrpC:function(t,e,i){"use strict";var a=i("b5IE");var n=i("R0oC");var s=i("cQOM");var r=a["a"].extend("Polygon",{init:function t(e){this._super();e?this.set(e):this._polygons=[]},getLocalBoundingRect:function t(){var e;if(this._polygons&&this._polygons.length){e=this._polygons.reduce((function(t,e){return t.combineWith(e.getBoundingRect())}),this._polygons[0].getBoundingRect());return{x:e.x,y:e.y,width:e.width,height:e.height}}return},getLocalPoints:function t(){return this._polygons&&this._polygons[0]?this._polygons[0].points:[]},getPartialFromRange:function t(e,i){var a;var n=0;var s=[];var o=this._polygons[0]?this._polygons[0].points:[];var l=o.length;var c=e<=i;while(n<l&&(c?o[n].x<e:o[n].x>e))n++;if(n&&n<l){a=(e-o[n-1].x)/(o[n].x-o[n-1].x);s.push({x:e,y:o[n-1].y+a*(o[n].y-o[n-1].y),y_:o[n-1].y_+a*(o[n].y_-o[n-1].y_)})}while(n<l&&(c?o[n].x<i:o[n].x>i)){s.push({x:o[n].x,y:o[n].y,y_:o[n].y_});n++}if(n&&n<l){a=(i-o[n-1].x)/(o[n].x-o[n-1].x);s.push({x:i,y:o[n-1].y+a*(o[n].y-o[n-1].y),y_:o[n-1].y_+a*(o[n].y_-o[n-1].y_)})}if(!s.length)return;return new r(s)},set:function t(e){var i=e&&e[0]&&Array.isArray(e[0])?e:[e];this._polygons=i.map((function(t){return new n["a"](t)}));this.invalidateBounds()},intersectsLocalLine:function t(e){return this._polygons.some((function(t){return t.intersectsLine(e)}))},intersectsLocalRect:function t(e){return this._polygons.some((function(t){return n["a"].prototype.intersectsRect.call(t,e)}))},containsPoint:function t(e,i){return this._polygons.some((function(t){return t.pointInside(e,i)}))}});e["a"]=r},a7yF:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("NFdj");var r=i.n(s);var o=i("mWu2");var l=i("wIyQ");var c=i("GG1N");var h=i("3I2r");var u=i("CyFZ");var d=i("4nJ1");var f=i("rwJ+");var p=i("G1wx");var v=i("MEqe");var m=i.n(v);function g(t){g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return g(t)}o["default"].directive("ppSortable",[function(){return{scope:"=",link:function t(e,i,a){e.$watch(a.ppSortable,(function(t){if(!t)return;t=d["a"].extend({},{handle:"[pp-sortable-handle]",start:function t(e,i){i.item.data("startPos",i.item.index())},scrollSpeed:p["a"].treatAsDesktop()?25:60,distance:p["a"].treatAsDesktop()?10:0,items:"> :not(.locked)",cancel:".locked",update:function i(a,n){var s=n.item.index();var r=n.item.data("startPos");e.$apply((function(){t.onMove(r,s)}))},stop:function t(){p["a"].treatAsDesktop()||i.sortable("option","disabled",true)}},t);var a=i.closest(".pp-section");a.length&&(t.containment=a);i.sortable(t);p["a"].treatAsDesktop()||i.sortable("option","disabled",true);e.enableTouchDrag=function(){i.sortable("option","disabled",false);var t=n.a.Event(window.event,{type:"mousedown"});t.which=1;t.pageX=window.event.pageX;t.pageY=window.event.pageY;t.target=window.event.target;n.a.ui.mouse.prototype._touchStart.call(i.data("ui-sortable"),t)}}))}}}]);o["default"].directive("ppSlider",[function(){return{require:"?ngModel",link:function t(e,i,a,n){var s=false;e.$watch(a.ppSlider,(function(t){if(!t)return;if(t.range){t=d["a"].extend({},{min:0,max:10,step:1,values:n.$modelValue,stop:function t(i,a){o["default"].$apply(e,(function(){n.$setViewValue(a.values)}))}},t);s||e.$watchCollection((function(){return n.$modelValue}),(function(t,e){r.a.equals(t,e)||i.slider("values",t)}))}else{t=t.values?d["a"].extend({},{min:0,max:10,step:1,values:n.$modelValue,stop:function t(i,a){o["default"].$apply(e,(function(){n.$setViewValue(a.values)}))}},t):d["a"].extend({},{min:0,max:10,step:1,value:n.$modelValue,stop:function t(i,a){o["default"].$apply(e,(function(){n.$setViewValue(a.value)}))}},t);s||e.$watch((function(){return n.$modelValue}),(function(t,e){t!==e&&(Array.isArray(t)?i.slider("values",t):i.slider("value",t))}))}s&&i.slider("destroy");i.slider(t);s=true}))}}}]);o["default"].directive("ppPlaceholder",[function(){return{link:function t(e,i,a){function n(){var t=e.$eval(a.ppPlaceholder);var n=e.$eval(a.ppPlaceholderSuppressEqual);t&&n&&"="===t[0]&&(t=t.substr(1));i.attr("placeholder",t)}i.on("focus",(function(){i.attr("placeholder","")}));i.on("blur",(function(){n()}));e.$watch(a.ppPlaceholder,(function(){n()}))}}}]);o["default"].directive("ppHeaderWithSwitch",[function(){return{scope:{definition:"=",data:"=",args:"="}}}]);o["default"].directive("ppAccordion",[function(){return{template:"<div ng-transclude></div>",transclude:true,scope:{ppAccordion:"=",definition:"=",args:"="},controller:["$scope","$element","$timeout",function(t,e,i){var a=t.args.cache;var s=null;var r="accordion_path";t.definition.cacheKey&&(r="".concat(r,"_").concat(t.definition.cacheKey));function o(){s=i((function(){e.accordion("refresh");s=null}))}function c(e){var i=e.split(".")[0];var a=Object.keys(t.definition.items||{}).filter((function(e){var i=t.definition.items[e];return false!==i.show}));for(var n=0;n<a.length;++n)if(a[n]===i)return n;return-1}this.loadit=function(i){var s=a.get(r);var h=void 0!==t.definition.defaultActiveTabIndex?t.definition.defaultActiveTabIndex:-1;s&&(h=c(s));if(i===t.ppAccordion.length-1){e.accordion({header:".pp-section-header",active:h,heightStyle:"fill",animate:!!p["a"].treatAsDesktop()&&"swing",activate:function e(i,s){var o=n()(s.newPanel).attr("x-path");a.put(r,o);t.$broadcast("ppAccordionNewPath",o)}});l["a"].on("end",o)}};t.$on("pp-open-path",(function(t,i){var a=c(i);a>=0&&e.accordion("option","active",a)}));t.$on("$destroy",(function(){if(s){i.cancel(s);s=null}l["a"].off("end",o)}))}]}}]);o["default"].directive("ppAccordionItem",[function(){return{require:"^ppAccordion",link:function t(e,i,a,n){n.loadit(e.$index)}}}]);function x(t){if("ValueExpr"===t||"ValueExpression"===t)return h["a"].Modes.NumberOrExpression;return h["a"].Modes.Expression}o["default"].directive("ppInputValidator",["$parse",function(t){return{require:"ngModel",link:function e(i,a,n,s){var r=null;var o=i.definition;var l=n.expressionType;function u(t,e){if(o&&"function"===typeof o.isExpression)return o.isExpression(t);if(void 0===t)return false;if("always"===o.expression)return true;switch(e){case"StringExpression":return 0===t.indexOf("=");case"ValueExpression":return"string"===typeof t&&0===t.indexOf("=");case"StringExpr":return 0===t.indexOf("=");case"ValueExpr":return true;case"dimension":return true;case"measure":return true;default:return false}}function f(e){n.ppValidationOnResult?t(n.ppValidationOnResult)(i,{isValid:e}):i.invalid=!e}function p(t){f(t.valid)}if(l){var v=i.args?i.args.app:i.app;r=new h["a"].ExpressionValidator(v,x(l));r.Update.bind(p)}function m(t){if("measure"===l)if(""===t)f(true);else{var e=i.args?i.args.handler.getLabels():[];r.validate(t,e)}else if("dimension"===l)if(""===t)f(false);else{t&&"="!==t[0]&&(t="=".concat(d["a"].escapeField(t)));r.validate(t)}else r.validate(t)}function g(t){u(t,l)?m(t):f(c["a"].validateType(t,o,i.data,i.args))}i.$on("datachanged",(function(){g(s.$modelValue)}));i.$on("pp-revalidate",(function(){g(s.$modelValue)}));i.$watch((function(){return s.$modelValue}),(function(t){g(t)}));i.$on("$destroy",(function(){r&&r.Update.unbind(p)}))}}}]);function _(t){t=t||"";return"="===t[0]?t:"=".concat(t)}o["default"].directive("ppExpressionEditor",["$parse","$timeout",function(t,e){return{link:function i(a,s,o){function l(t,e){if(void 0===t)return false;switch(e){case"StringExpression":return"object"===g(t);case"ValueExpression":return"object"===g(t);case"StringExpr":return"object"===g(t)&&0===t.qv.indexOf("=");case"ValueExpr":return"object"===g(t);case"dimension":return true;case"measure":return true;default:return false}}function c(t){return"'"!==t[0]&&"'"!==t[t.length-1]&&-1===t.indexOf("(")&&-1===t.indexOf(")")&&!d["a"].isNumeric(t)}function h(){var e=t(o.ppExpressionEditor)(a);var i=o.expressionType;var n=x(i);var s=e;var h=[];var f=l(e,i);"object"===g(e)&&("StringExpression"===i?e=_(e.qStringExpression.qExpr):"ValueExpression"===i?e=_(e.qValueExpression.qExpr):("StringExpr"===i||"ValueExpr"===i)&&(e=e.qv));if("dimension"===i&&e.length)"="!==e[0]&&(e="=".concat(d["a"].escapeField(e)));else if("measure"===i)h=a.args?a.args.handler.getLabels():[];else if(!f&&("StringExpr"===i||"StringExpression"===i)){"StringExpr"===i&&e.qv&&(e=e.qv);e&&c(e)&&(e="='".concat(e.replace(/'/g,"''"),"'"))}u["a"].show({expr:e,title:e?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title",allowEmpty:true,mode:n,labels:h,app:a.args?a.args.app:a.app,stateName:a.args&&a.args.layout?a.args.layout.qStateName:void 0}).then((function(e){if("ValueExpression"===i&&e.length)e={qValueExpression:{qExpr:e}};else if("StringExpression"===i&&e.length)e={qStringExpression:{qExpr:e}};else if("ValueExpr"===i)e={qv:e};else if("StringExpr"===i){"="!==e[0]&&(e="=".concat(e));e={qv:e}}else"dimension"===i&&e.length&&"="!==e[0]&&(e="=".concat(e));if(o.ppExpressionEditorOnApply)t(o.ppExpressionEditorOnApply)(a,{value:e});else if(!r.a.equals(s,e)){a.value=e;a.change()}}),(function(){}))}s.on("keypress.pp-expression",(function(t){13!==t.which&&32!==t.which||n()(t.target).trigger("qv-activate")}));s.on("qv-activate.pp-expression",(function(){var i=null;var s;if(o.editorDisabled){i=t(o.editorDisabled)(a);if(i)return}if(f["a"].isInput(document.activeElement)){s=n()(document.activeElement);s.on("blur.pp-expression",(function(){e((function(){h()}));s.off("blur.pp-expression")}));s.blur()}else h()}));a.$on("$destroy",(function(){s.off(".pp-expression")}))}}}]);o["default"].directive("ppScrollableAutoContent",[function(){var t=".property-content";return{link:function e(i){i.$watch((function(){return i.isAutoChart}),(function(t){a(t)}));function a(e){var i=n()(t);i.length&&i.css({"overflow-y":e?"auto":"hidden"})}i.$on("$destroy",(function(){a(false)}))}}}]);o["default"].directive("ppDiDraggableHover",[function(){var t=".pp-nm-di__header";var e="hovered";return{link:function i(a,n){var s=n.closest(t);if(!s.length)return;n.hover((function(){s.addClass(e)}),(function(){s.removeClass(e)}))}}}]);o["default"].componentDirective("includePpComponent",{definition:"=",data:"=",args:"="});var y={}},b5IE:function(t,e,i){"use strict";var a=i("0vQd");var n=i("wkj2");var s=i("MoEg");var r=i("EDQw");var o={translate:function t(e,i){this.matrix.translate(e,i);this._dirtyBounds=true;this.invalidate();return this},rotate:function t(e){this.matrix.rotate(e);this._dirtyBounds=true;this.invalidate();return this},scale:function t(e,i){this.matrix.scale(e,i);this._dirtyBounds=true;this.invalidate();return this}};function l(){this.matrix=new n["a"];this.scale=o.scale;this.rotate=o.rotate;this.translate=o.translate;this._dirtyBounds=true}var c=a["a"].extend("DisplayObject",{init:function t(){this._super();this._dirtyBounds=true;this._bounds=new s["a"](NaN,NaN,NaN,NaN);this._vmBounds=new s["a"](NaN,NaN,NaN,NaN);this._visualBounds=new s["a"](NaN,NaN,NaN,NaN);this._stage=null;this.rData={inherited:{}};this._modelView=null;this._inverseModelView=null;this._inheritedProps={}},find:function t(e){return r["a"].find(e,this)},translate:function t(e,i){if(0===e&&0===i)return this;l.call(this);return o.translate.call(this,e,i)},rotate:function t(e){if(Number.isNaN(+e)||0===e)return this;l.call(this);return o.rotate.call(this,e)},scale:function t(e,i){if(1===e)return this;l.call(this);return o.scale.call(this,e,i)},clearTransform:function t(){if(this.matrix){this.matrix.identity();this._dirtyBounds=true;this.invalidate()}return this},invalidate:function t(){var e=this._stage||this.stage;e&&e.invalidateObject(this);this._inheritedProps={};return this},attr:function t(e){if("undefined"!==typeof this[e])return this[e];if("undefined"!==typeof this.rData.inherited[e])return this.rData.inherited[e];return},attrs:function t(e){for(var i in e)"undefined"===typeof e[i]?delete this[i]:this[i]=e[i];return this},getBoundingRect:function t(){this._dirtyBounds&&this._calculateBounds();return this._vmBounds},getVisualBounds:function t(){this._dirtyBounds&&this._calculateBounds();return this._visualBounds},getVisualExpansion:function t(){var e=this.attr("stroke");if(!e)return 0;var i=this.attr("strokeWidth");if(!i)return 0;return i/2},pointInside:function t(e,i){if(false===this.visible)return false;var a=this.getInverseModelView();var n;if(a&&true!==this._transformedIncomingPoint){n=a.transformPoint({x:e,y:i});return this.containsPoint(n.x,n.y)}return this.containsPoint(e,i)},intersectsLine:function t(e){if(false===this.visible)return false;var i=this.getInverseModelView();var a;var n;var s;if(i&&true!==this._transformedIncomingPoint){n=i.transformPoint({x:e.x1,y:e.y1});s=i.transformPoint({x:e.x2,y:e.y2});e=e.clone();e.set(n.x,n.y,s.x,s.y);this._transformedIncomingPoint=true;a=this.intersectsLocalLine(e);delete this._transformedIncomingPoint;return a}return this.intersectsLocalLine(e)},intersectsRect:function t(e){if(false===this.visible)return false;var i=this.getInverseModelView();var a;var n;if(i&&true!==this._transformedIncomingPoint){this._transformedIncomingPoint=true;a=this._getTransformedBoundsOfRect(i,e);n=this.intersectsLocalRect(a);delete this._transformedIncomingPoint;return n}return this.intersectsLocalRect(e)},getPoints:function t(){if(false===this.visible)return[];var e=this.getModelView();var i;var a;var n;if(e){i=this.getLocalPoints().slice();for(a=0,n=i?i.length:0;a<n;a++)i[a]=e.transformPoint(i[a]);return i}return this.getLocalPoints()},getLocalPoints:function t(){return[]},intersectsLocalLine:function t(){return false},intersectsLocalRect:function t(e){var i="function"===typeof e.getPoints?e.getPoints():[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];var a;var n=i.length;for(a=0;a<n;a++)if(this.containsPoint(i[a].x,i[a].y))return true;i=this.getLocalPoints();n=i.length;for(a=0;a<n;a++)if(i[a].x>=e.x&&i[a].x<=e.x+e.width&&i[a].y>=e.y&&i[a].y<=e.y+e.height)return true;return false},containsPoint:function t(){return false},getLocalBoundingRect:function t(){return this._bounds},invalidateBounds:function t(){this._dirtyBounds=true;return this},clearModelView:function t(){this._modelView=null;this._inverseModelView=null;this._isModelViewCalculated=false;this._dirtyBounds=true},getModelView:function t(){this._modelView||this._isModelViewCalculated||this._calculateModelView();return this._modelView},getInverseModelView:function t(){this._inverseModelView||this._isModelViewCalculated||this._calculateModelView();return this._inverseModelView},destroy:function t(){this._stage=null},_calculateBounds:function t(){var e=this._bounds;var i=this.getLocalBoundingRect();var a=this.getModelView();var n=this.getVisualExpansion();var s;if(i){e.set(i.x,i.y,i.width,i.height);if(a){s=this._getTransformedBoundsOfRect(a,e);this._vmBounds.set(s.x,s.y,s.width,s.height);s=this._getTransformedBoundsOfRect(a,{x:e.x-n,y:e.y-n,width:e.width+2*n,height:e.height+2*n});this._visualBounds.set(s.x,s.y,s.width,s.height)}else{this._vmBounds.set(i.x,i.y,i.width,i.height);this._visualBounds.set(i.x-n,i.y-n,i.width+2*n,i.height+2*n)}}else{e.set(NaN,NaN,NaN,NaN);this._vmBounds.set(NaN,NaN,NaN,NaN);this._visualBounds.set(NaN,NaN,NaN,NaN)}this._dirtyBounds=false},_getTransformedBoundsOfRect:function t(e,i){var a=e.transformPoints([{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}]);var n=a.map((function(t){return t.x}));var r=a.map((function(t){return t.y}));var o=Math.min.apply(null,n);var l=Math.max.apply(null,n);var c=Math.min.apply(null,r);var h=Math.max.apply(null,r);return new s["a"](o,c,l-o,h-c)},_calculateModelView:function t(){var e=this;while(e&&!e.rData.vmTransform)e=e._parent;this._isModelViewCalculated=true;if(!e)return false;if(!e._modelView){e._modelView=new n["a"];e._inverseModelView=new n["a"]}if(e.rData.dirtyVMTransform){e._modelView.set(e.rData.vmTransform);e._inverseModelView.set(e.rData.vmTransform).invert();delete e.rData.dirtyVMTransform}this._modelView=e._modelView;this._inverseModelView=e._inverseModelView;return true}});Object.defineProperties(c.prototype,{stage:{get:function t(){this._parent&&!this._stage?this._stage=this._parent.stage:this._parent||this._stage===this||(this._stage=null);return this._stage}}});e["a"]=c},bPi8:function(t,e,i){"use strict";var a=i("WwCo");var n=i("MoEg");var s=i("wvr8");function r(t){r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return r(t)}var o=0;var l=1;var c=3;function h(t){var e=this._cacheItems;return e&&t&&t.some((function(t){return e[t]&&e[t].selected}))?1:this._globalAlpha}function u(t,e,i){var a;var n;var s=this.isHorizontal();var r=[];var o=[];var l=[];var c=[];var u=[];var d=[];var f=[];for(a=0;a<t.length;a+=1){n={center:this.getPositionOfValue(a,e),width:this.getWidthOfValue(a,e)};if(n.width>=2*this._discreteSpacing&&(n.center-this._discreteSpacing+n.width/2<0||n.center+this._discreteSpacing-n.width/2>i))continue;if(n.width<2*this._discreteSpacing&&(n.center<0||n.center>i))continue;c.push(n.width);s&&n.center+n.width/2>i?r.push(Math.min(i,i-(n.center-n.width/2))):s&&n.center-n.width/2<0?r.push(Math.min(i,n.width/2+n.center)):r.push(Math.min(i,n.width));if(n.width>this._discreteSpacing){var p=Math.max(1,Math.min(n.center,i-1));o.push(p);l.push(p-n.center)}else{o.push(n.center);l.push(0)}u.push(t[a].label);d.push(t[a].cacheIndex?t[a].cacheIndex:0);f.push(h.apply(this,[t[a].cacheIndex]))}return{labels:u,widths:r,positions:o,indecies:d,opacities:f,offsets:l,fullWidths:c}}function d(t,e,i,a,n,o){if(!t||!t.length)return[];var l=[];var c;var h;var u;var f;var p;var v;for(c=0;c<t.length;c++){h=t[c];u={};f="";p=null;if("object"===r(h)){f=h.label;p=h.children?d(h.children,e,i+1,u,n,o):null;u.cacheIndex="cacheIndex"in t[c]?t[c].cacheIndex:[];u.group=true===h.group;h.id&&(o[h.id]=u)}else f=h;u.label=f||"";u.parent=a;v=s["a"].getCharacterRatios(u.label);p&&p.length&&(u.children=p);l.push(u);if(!e[i]){e[i]={data:[]};e[i].show=(!n||!n[i]||false!==n[i].show)&&!e[i].silo;e[i].qApprMaxGlyphCount=n&&n[i]&&n[i].qApprMaxGlyphCount||10;e[i].characterRatios={latin:0,cjk:0,longestCjk:{latin:0,cjk:0},longestLatin:{latin:0,cjk:0}};e[i].groupSize=n&&n[i]?n[i].groupSize:void 0}e[i].data.push(u);e[i].characterRatios.latin+=v.latin;e[i].characterRatios.cjk+=v.cjk;if(e[i].characterRatios.longestLatin.latin<v.latin){e[i].characterRatios.longestLatin.latin=v.latin;e[i].characterRatios.longestLatin.cjk=v.cjk}if(e[i].characterRatios.longestCjk.cjk<v.cjk){e[i].characterRatios.longestCjk.cjk=v.cjk;e[i].characterRatios.longestCjk.latin=v.latin}}return l}function f(t){var e=t.parent;var i=[];while(e){e.collapseChildren||i.push(e);e=e.parent}return i}function p(t,e){var i=t[t.length-1].data;var a;var n;var s;var r;var o;var l;var c;var h;i[0].distanceFrom=e/2;i[0].distanceTo=i[0].distanceFrom+1;a=f(i[0]);c=a.filter((function(t){return t.group}))[0];for(r=1;r<i.length;r++){l=i[r-1].distanceTo;n=f(i[r]);h=n.filter((function(t){return t.group}))[0];if(h!==c){for(o=0;o<n.length;o++)if(n[o]===a[o]&&(n[o]<0||n[o].group))break;l+=e*o;c=h;a=n}i[r].distanceFrom=l;i[r].distanceTo=i[r].distanceFrom+1}if(t.length>1)for(r=t.length-2;r>=0;r--){s=t[r].data;for(o=0;o<s.length;o++){s[o].distanceFrom=s[o].children[0].distanceFrom;s[o].distanceTo=s[o].children[s[o].children.length-1].distanceTo}}}function v(t,e,i,a){var n;var r=e.getTextWidth("m",i);var o=e.getAverageLetterWidth(i);if(a){n=e.getTextWidth("客",i);var l=s["a"].estimateLabelWidth(a.cjk*t,a.latin*t,n,r,o);var c=s["a"].estimateLabelWidth(a.longestCjk.cjk,a.longestCjk.latin,n,r,o);var h=s["a"].estimateLabelWidth(a.longestLatin.cjk,a.longestLatin.latin,n,r,o);return Math.max(l,c,h)}return s["a"].estimateLabelWidth(0,t,0,r,o)}var m=a["a"].extend("DiscreteAxis",{init:function t(){this._super.apply(this,[].slice.call(arguments));this._unitsOffset=0;this._innerOffset=0;this._shrinkToFitThreshold=arguments[1]&&null!==arguments[1].shrinkToFitThreshold?arguments[1].shrinkToFitThreshold:.85;this._maxDiscreteUnitSize=null;this._minDiscreteUnitSize=null;this._alignmentOffset=0;this._unitAlignment="center";this._angle1=-40;this._angle2=-90},setYMirrorMode:function t(e){this._super(e);if(e){this._angle1=40;this._angle2=90}else{this._angle1=-40;this._angle2=-90}},updateSize:function t(){this._super();1===this._numDiscrete?this._discreteSpacing=Math.min(this._discreteSpacing,this._plotSize/this._numDiscrete):this._discreteSpacing-=(this._preliminarySize-this._plotSize)/(this._numUnitsInView||1);this._alignmentOffset=this._getAlignmentOffset(this._unitAlignment,this._plotSize);this.extendedRect=new n["a"](this.rect.x-this._edgeBleed.left,this.rect.y-this._edgeBleed.top,this.rect.width+this._edgeBleed.left+this._edgeBleed.right,this.rect.height+this._edgeBleed.top+this._edgeBleed.bottom)},updateLevels:function t(){var e=this._oldLevels;this._levels.forEach((function(t,i){t.labelSpace=e[i].labelSpace;t.labelMode=e[i].labelMode;t.radians=e[i].radians;t.show=e[i].show}))},setLabelLevelVisibility:function t(e){this._labelLevelVisibility=e;this._levels&&this._levels.forEach((function(t,i){t.show=false!==e[i]}))},_getPerpendicularExtensionForTiltedLabels:function t(e,i,a,n){var s=this._angle1*Math.PI/180;var r=Math.abs(Math.sin(s))*e.longestLabelWidth;var o;var l=0;r=Math.min(n,r);o=Math.abs(Math.cos(s))*r;o=Math.max(o-this._discreteSpacing/2,0);if("bottom"===this.dock){o=Math.max(o-this._alignmentOffset,0);o>i.x&&(l=o-i.x)}else if("top"===this.dock){o=Math.max(o-("center"===this._unitAlignment?this._alignmentOffset:this._getAlignmentOffset("far"===this._unitAlignment?"near":"far")),0);o>a.width-i.x-i.width&&(l=o-(a.width-a.x-i.x-i.width))}return l},_getLabelMode:function t(e,i,a){var n=e.qApprMaxGlyphCount;var s;if(!this._showLabels||"none"===this._explicitLabelMode)return o;if(this._explicitLabelMode&&"auto"!==this._explicitLabelMode)return"none"===this._explicitLabelMode?o:"tilted"===this._explicitLabelMode?c:l;if(i&&this.isHorizontal()&&e.data&&e.data.length){s=v(n,this._renderer,this._style.label.font,e.characterRatios);e.groupSize&&(a*=e.groupSize);if(a<s)return c}return l},preRelevantSizeCalculation:function t(){this._super();var e;var i=this._levels?this._levels.filter((function(t){return false!==t.show})):[];var a=i.length;var n=this.outerRect[this.isVertical()?"width":"height"]/4;var s=0;var r=0;if(this.isVisible()){for(e=0;e<a;e++){i[e].longestLabelWidth=v(i[e].qApprMaxGlyphCount,this._renderer,this._style.label.font,i[e].characterRatios);s+=i[e].longestLabelWidth}for(e=0;e<a;e++){i[e].labelSizeRatio=Math.min(1/a,i[e].longestLabelWidth/Math.min(s,n));r+=i[e].labelSizeRatio}r<1&&a>1?i[0].labelSizeRatio===1/a?i[0].labelSizeRatio+=1-r:i[1].labelSizeRatio===1/a&&(i[1].labelSizeRatio+=1-r):1===a&&(i[0].labelSizeRatio=1)}},calculatePreliminaryLabelSpace:function t(e,i){var a;var n=this._hideMyLabels;var s=this._levels?this._levels.filter((function(t){return false!==t.show&&!n})):[];var r=s.length;var h=this.outerRect[this._isVertical?"width":"height"]/4;var u=this._fontHeight*this._style.label.lineHeight;var d=0;var f=0;var p=0;this._preliminarySize=e[this._isVertical?"height":"width"];this._calculateDiscreteUnits(this._preliminarySize);if(this.isVisible())for(a=0;a<r;a++){s[a].labelMode=this._getLabelMode(s[a],a===s.length-1,this._discreteSpacing);var v=0;switch(s[a].labelMode){case l:var m=Math.min(s[a].labelSizeRatio*h,s[a].longestLabelWidth);s[a].labelSpace=this.isHorizontal()?u:Math.min(s[a].labelSizeRatio*h,s[a].longestLabelWidth);f=Math.max(0,m-s[a].labelSpace);break;case c:s[a].radians=this._angle1*Math.PI/180;v=this._getPerpendicularExtensionForTiltedLabels(s[a],e,i,h*s[a].labelSizeRatio);v>e.width/5&&(s[a].radians=this._angle2*Math.PI/180);s[a].labelSpace=Math.abs(Math.sin(s[a].radians))*s[a].longestLabelWidth+Math.abs(this._fontHeight*Math.sin(s[a].radians)*2);s[a].labelSpace=Math.min(f+s[a].labelSizeRatio*h+Math.abs(this._fontHeight*Math.sin(s[a].radians)/2),s[a].labelSpace);break;default:s[a].labelSpace=0}if(s[a].labelMode===c){d=Math.max(d,Math.min(e.width/3,Math.ceil(Math.cos(s[a].radians)*s[a].labelSpace)));d=Math.max(d-this._discreteSpacing/2,0);"bottom"===this.dock?d=Math.max(d-this._alignmentOffset,0):"top"===this.dock&&(d=Math.max(d-("center"===this._unitAlignment?this._alignmentOffset:this._getAlignmentOffset("far"===this._unitAlignment?"near":"far")),0));d=Math.ceil(d)}p+=s[a].labelSpace}if(d>0){"bottom"===this.dock&&d>e.x?this._preliminarySize-=d-e.x:"top"===this.dock&&d>i.width-e.x-e.width&&(this._preliminarySize-=d-(i.width-i.x-e.x-e.width));this._calculateDiscreteUnits(this._preliminarySize)}this.fire("numDiscreteUnitsChanged");this.fire("numDiscreteUnitsInViewChanged");this._showLabels_internal=this._showLabels&&s&&s.some((function(t){return t.labelMode!==o}));this._preliminaryRelevantSize={relevantLabelSize:p,relevantSpacing:d};return this._preliminaryRelevantSize},calculateLabelSpace:function t(){this.updateNow(["properties"]);return this._preliminaryRelevantSize},setDataRange:function t(e,i){var a;var n;var s;this._levels&&this._levels.length&&(this._oldLevels=this._levels.map((function(t){return{labelMode:t.labelMode,labelSpace:t.labelSpace,radians:t.radians,show:t.show,groupSize:t.groupSize}})));this._levels=[];this._labelIds={};d(e,this._levels,0,-1,i,this._labelIds);var r=this._levels.length>1?1:0;if(this._levels&&this._levels.length){p(this._levels,r);for(var o=0;o<this._levels.length;o++)if(this._levels[o].characterRatios){s=this._levels[o].characterRatios.latin+this._levels[o].characterRatios.cjk||1;this._levels[o].characterRatios.latin/=s;this._levels[o].characterRatios.cjk/=s}a=this._levels[this._levels.length-1].data;n=a[a.length-1].distanceTo+r/2;this._numDiscrete=a.length;this._numDiscrete=n||0;if(this._explicitNumDiscrete){this._numDiscrete=this._explicitNumDiscrete;this._numDiscrete=this._explicitNumDiscrete}}return this},setOffset:function t(e){if(this._unitsOffset===e)return;this._unitsOffset=e;this.invalidateProperties();this.invalidateDisplay("setOffset");this.fire("changed");return this},getOffset:function t(){return this._unitsOffset},setInnerOffset:function t(e){this._innerOffset=e},getInnerOffset:function t(){return this._innerOffset||0},getNumDiscreteUnits:function t(){return this._numDiscrete},setNumDiscreteUnits:function t(e){this._explicitNumDiscrete=e},getNumDiscreteUnitsInView:function t(){return this._numUnitsInView},setMaxDiscreteUnitSize:function t(e){this._maxDiscreteUnitSize=e},setMinDiscreteUnitSize:function t(e){this._minDiscreteUnitSize=e},setUnitAlignment:function t(e){this._unitAlignment=e},isDiscrete:function t(){return true},setLockedInfo:function t(e){this._lockedInfo=e},getLevels:function t(){var e=[];var i;var a;if(this._levels&&this._levels.length)for(a=0;a<this._levels.length;a++){if(!this._levels[a].show)continue;i=u.call(this,this._levels[a].data,a,this._plotSize);i.labelMode=this._levels[a].labelMode;i.labelSpace=this._levels[a].labelSpace;i.radians=this._levels[a].radians;e.push(i)}return e},calculateValuePositionMappingInfo:function t(){this._calculateDiscreteUnits(this._plotSize)},getDiscreteSpacing:function t(){return this._discreteSpacing},getPositionOfValue:function t(e,i){var a=this._levels.length-1;"undefined"!==typeof i&&(a=Math.min(this._levels.length-1,Math.max(0,i)));var n=this._levels[a].data;var s=n[e];var r=s.distanceFrom+.5*(s.distanceTo-s.distanceFrom)+this._innerOffset-this._unitsOffset;var o=r*this._discreteSpacing+this._alignmentOffset;return!this._isVertical&&this.yMirrorMode?this._plotSize-o:o},getWidthOfValue:function t(e,i){var a=this._levels.length-1;"undefined"!==typeof i&&(a=Math.min(this._levels.length-1,Math.max(0,i)));var n=this._levels[a].data;return(n[e].distanceTo-n[e].distanceFrom)*this._discreteSpacing},getPositionOfId:function t(e){var i=this._labelIds[e]||this._labelIds[e.split(";").reverse().slice(-1).reverse().join(";")];if(!i)return 0;var a=i.distanceFrom+.5*(i.distanceTo-i.distanceFrom)+this._innerOffset-this._unitsOffset;var n=a*this._discreteSpacing+this._alignmentOffset;return!this._isVertical&&this.yMirrorMode?this._plotSize-n:n},getWidthOfId:function t(e){var i=this._labelIds[e]||this._labelIds[e.split(";").reverse().slice(-1).reverse().join(";")];if(!i)return 0;return(i.distanceTo-i.distanceFrom)*this._discreteSpacing},getValueOfPosition:function t(e){var i;var a;var n;var s=this._levels[0].data;var r=s.length;var o;e=!this._isVertical&&this.yMirrorMode?this._plotSize-e:e;for(n=0;n<r;n+=1){o=s[n];i=(o.distanceFrom+this._innerOffset-this._unitsOffset)*this._discreteSpacing;a=i+(o.distanceTo-o.distanceFrom)*this._discreteSpacing;if(e>=i&&e<=a)return o.label}return""},_calculateDiscreteUnits:function t(e){this._discreteSpacing=Math.max(null!==this._minDiscreteUnitSize?this._minDiscreteUnitSize:0,e/this._numDiscrete);null!==this._maxDiscreteUnitSize&&(this._discreteSpacing=Math.min(this._maxDiscreteUnitSize,this._discreteSpacing));(1===this._numDiscrete||this._numDiscrete*this._discreteSpacing>e&&this._numDiscrete*this._discreteSpacing*this._shrinkToFitThreshold<e)&&(this._discreteSpacing=Math.min(this._discreteSpacing,e/this._numDiscrete));this._alignmentOffset=this._getAlignmentOffset(this._unitAlignment,e);this._numUnitsInView=Math.min(this._numDiscrete,Number((e/this._discreteSpacing).toFixed(5)))},_getAlignmentOffset:function t(e,i){var a=null!==this._maxDiscreteUnitSize&&this._discreteSpacing<i/this._numDiscrete?.5*(i-this._numDiscrete*this._discreteSpacing):0;if("near"===e)return 0;if("far"===e)return 2*a;return a}});e["a"]=m},bam4:function(t,e,i){"use strict";var a='<qui-float qui-offset="offset" qui-resize-on-change="content" class="qv-function-tip-container">\n\t<div class=\'qv-function-tip-view\' ng-show=\'content\'>{{content}}</div>\n</qui-float>\n';var n=e["a"]={scope:{offset:"=",content:"="},template:a,controller:[function(){}]}},djNn:function(t,e,i){"use strict";var a=i("b5IE");var n=i("cQOM");var s=i("4nJ1");var r=a["a"].extend("Line",{init:function t(e,i,a,s){this._super();n["a"].apply(this,[e,i,a,s])},containsPoint:function t(){return false},intersectsLocalLine:n["a"].prototype.intersectsLine,intersectsLocalRect:n["a"].prototype.intersectsRect,getLocalPoints:n["a"].prototype.getPoints,getLocalBoundingRect:function t(){var e=Math.min(this.x1,this.x2);var i=Math.max(this.x1,this.x2);var a=Math.min(this.y1,this.y2);var n=Math.max(this.y1,this.y2);return{x:e,y:a,width:i-e,height:n-a}},set:function t(){n["a"].prototype.set.apply(this,[].slice.call(arguments));this.invalidateBounds()},getPartialFromRange:function t(e,i){if(i<this.x1||e>this.x2)return;var a=this.x2-this.x1;var n=this.y2-this.y1;var o=e<=this.x1?0:(e-this.x1)/a;var l=i>=this.x2?1:(i-this.x1)/a;var c=new r(this.x1+o*a,this.y1+o*n,this.x1+l*a,this.y1+l*n);c.data=s["a"].extend({},this.data);if(!Number.isNaN(+this.data.y1_)){var h=this.data.y2_-this.data.y1_;c.data.y1_=this.data.y1_+o*h;c.data.y2_=this.data.y1_+l*h}return c}});Object.keys(n["a"].prototype).forEach((function(t){!n["a"].prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","intersectsRect"].indexOf(t)<0&&(r.prototype[t]=n["a"].prototype[t])}));e["a"]=r},dtUF:function(t,e,i){"use strict";var a=i("mWu2");var n="<div ng-transclude></div>";function s(t){this.container=t.container;this.body=t.body;this.alignAgainst=t.alignAgainst}s.prototype.showTranscluded=function(t){var e=this;t((function(t){e.container.appendTo(e.body).append(t)}))};s.prototype.showContent=function(t){this.container.appendTo(this.body).append(t)};s.prototype.update=function(){var t=this.alignAgainst.offset();this.container.css({top:t.top,left:t.left,width:this.alignAgainst.width(),height:this.alignAgainst.height(),zIndex:1021})};s.prototype.hide=function(){this.container.remove()};var r=s;a["default"].directive("objectAddTypeahead",[function(){return{template:n,scope:{},transclude:true,replace:true,restrict:"E",controller:["$scope",function(t){var e=this;t.items=[];function i(){var e=t.menu;if(t.activeItem){var i=t.activeItem;var a=i.getPosition();a.top<0?e.setScrollTop(i.getOffsetTop()):a.top+i.getHeight()>e.getHeight()&&i.scrollIntoView(false)}else e.setScrollTop(0)}this.activate=function(e){t.activeItem=e};this.nextItem=function(a){var n=t.items.indexOf(t.activeItem);"undefined"!==typeof a&&(n=(n+a)%t.items.length);n===t.items.length-1?e.activate(null):-1===n?e.activate(t.items[0]):e.activate(t.items[n+1]);i()};this.prevItem=function(a){var n=t.items.indexOf(t.activeItem);"undefined"!==typeof a&&(n=(n-a+t.items.length)%t.items.length);0===n?e.activate(null):-1===n?e.activate(t.items[t.items.length-1]):e.activate(t.items[n-1]);i()};this.getActiveItem=function(){return t.activeItem};this.selectActiveItem=function(){t.activeItem&&t.activeItem.select()};this.select=function(e){t.select({item:e});t.activeItem=null};this.setMenu=function(e){t.menu=e};this.addItem=function(e){t.items.push(e)};this.removeItem=function(e){var i=t.items.indexOf(e);i>=0&&t.items.splice(i,1)}}]}}]);a["default"].directive("objectAddTypeaheadInput",[function(){return{require:["^objectAddTypeahead","ngModel"],link:function t(e,i,a,n){var s=n[0];var r=n[1];i.on("keydown",(function(t){t.stopPropagation();if(13===t.which||9===t.which){t.preventDefault();s.getActiveItem()?e.$apply((function(){s.selectActiveItem()})):e.$apply((function(){e.$eval(a.onEnter,{$event:t})}))}else if(33===t.which){t.preventDefault();e.$apply((function(){s.prevItem(10)}))}else if(34===t.which){t.preventDefault();e.$apply((function(){s.nextItem(10)}))}else if(40===t.which){t.preventDefault();e.$apply((function(){s.nextItem()}))}else if(38===t.which){t.preventDefault();e.$apply((function(){s.prevItem()}))}else if(27===t.which){t.preventDefault();e.$apply((function(){e.$eval(a.onEscape,{$event:t})}))}}));e.$watch(s.getActiveItem,(function(t){t?t.item.label&&i.val(t.item.label):i.val(r.$modelValue)}));e.$watch(r.$modelValue,(function(t){t||s.activate(null)}))}}}]);a["default"].directive("objectAddTypeaheadMenu",[function(){return{require:"^objectAddTypeahead",link:function t(e,i,a,n){e.controller=n;n.setMenu({getHeight:function t(){return i.height()},setScrollTop:function t(e){i[0].scrollTop=e}})}}}]);a["default"].directive("objectAddTypeaheadItem",[function(){return{require:"^objectAddTypeahead",link:function t(e,i,a,n){var s=e.$eval(a.objectAddTypeaheadItem);var r={item:s,getOffsetTop:function t(){return i[0].offsetTop},scrollIntoView:function t(e){i[0].scrollIntoView(e)},getPosition:function t(){return i.position()},getHeight:function t(){return i.height()},select:function t(){o()}};function o(){e.$eval(a.onSelect,{item:s})}n.addItem(r);e.$on("$destroy",(function(){n.removeItem(r)}));e.$watch((function(){var t=n.getActiveItem();if(t)return t.item===s;return false}),(function(t){t?i.addClass("object-add-typeahead-active"):i.removeClass("object-add-typeahead-active")}));i.on("mouseenter",(function(){i.addClass("object-add-typeahead-hover")}));i.on("mouseleave",(function(){i.removeClass("object-add-typeahead-hover")}));i.on("qv-activate",(function(t){t.preventDefault();e.$apply((function(){o()}))}))}}}])},e4OJ:function(t,e,i){"use strict";var a=i("4nJ1");function n(t,e){var i=e.length;var a;var n;var s;var r;var o;if(t){n=!t.autoMinMax&&("min"===t.minMax||"minMax"===t.minMax)&&null!==t.min&&!Number.isNaN(+t.min);s=!t.autoMinMax&&("max"===t.minMax||"minMax"===t.minMax)&&null!==t.max&&!Number.isNaN(+t.max)}r=Number.MAX_VALUE;o=-Number.MAX_VALUE;for(a=0;a<i;a++){r=Math.min(r,e[a].qMin);o=Math.max(o,e[a].qMax);if(r<=0&&o>=0)return true}r=n?t.min:r;o=s?t.max:o;return r<=0&&o>=0}var s={applyDisclaimerAttributes:function t(e,i,s,r,o){i||(i={});var l=a["a"].extend({limitedData:false,hasNegativeOrZeroData:false,onlyNegativeOrZero:false,onlyNanData:false,onlyNullColor:false,hasDataRangeIncludingZero:false},i);a["a"].extend(i,l);i.noDataExist=o.qHyperCube.qSize.qcy*o.qHyperCube.qSize.qcx===0;if(i.noDataExist){s.toggleClass("qv-viz-with-disclaimer",false);return i}e=e||{};e.overlay=e.overlay||false;e.supportNegative=void 0===e.supportNegative||e.supportNegative;e.supportRangeOverZero=void 0===e.supportRangeOverZero||e.supportRangeOverZero;var c=a["a"].getValue(o,"qHyperCube.qDataPages.0.qArea.qWidth",0)&&a["a"].getValue(o,"qHyperCube.qDataPages.0.qArea.qHeight",0);c&&true!==e.explicitLimitedData?i.limitedData=!e.paging&&o.qHyperCube.qSize.qcy>o.qHyperCube.qDataPages[0].qMatrix.length:i.limitedData=true===e.explicitLimitedData;i.hasNegativeOrZeroData=!e.supportNegative&&o.qHyperCube.qMeasureInfo.some((function(t){return t.qMin<=0}));i.onlyNegativeOrZero=!e.supportNegative&&o.qHyperCube.qMeasureInfo.every((function(t){return t.qMax<=0&&t.qMax>=t.qMin}))||0===o.qHyperCube.qSize.qcy;i.onlyNanData=o.qHyperCube.qMeasureInfo.every((function(t){return t.qMax<t.qMin||"NaN"===t.qMax}));i.hasDataRangeIncludingZero=!e.supportRangeOverZero&&n(o.measureAxis,o.qHyperCube.qMeasureInfo,o.lineType);if(i.onlyNegativeOrZero&&e.overlay||!(i.limitedData||i.hasNegativeOrZeroData&&!e.supportNegative||i.hasDataRangeIncludingZero||i.onlyNullColor)){s.toggleClass("qv-viz-with-disclaimer",false);r.options.showDisclaimerStar=false}else{s.toggleClass("qv-viz-with-disclaimer",e.bottom);r.options.showDisclaimerStar=true}return i}};e["a"]=s},gapF:function(t,e,i){"use strict";var a=i("4nJ1");var n=i("n7pR");var s=i("zjn0");function r(t,e){var i;var s="undefined"!==typeof e.paletteColor?n["a"].Theme.resolveColor(e.paletteColor):"transparent";var r={value:0,line:{stroke:s,strokeDasharray:null===e||void 0===e||null===(i=e.style)||void 0===i?void 0:i.lineType}};return a["a"].extend(true,r,t||{})}function o(t,e){var i=e&&e.chartID;var s=n["a"].getStyle(i,"referenceLine.label.name","color");var r=n["a"].getFontSize(i,"referenceLine.label.name","fontSize");var o=n["a"].getStyle(i,"referenceLine.label.name","fontFamily");e.paletteColor?s=n["a"].Theme.resolveColor(e.paletteColor):s||(s="transparent");var l={value:0,line:{stroke:"transparent"},label:{align:"center",vAlign:"middle",text:"",fill:s,fontFamily:o,fontSize:r,maxWidthPx:135}};return a["a"].extend(true,l,t||{})}var l=function t(e){return e&&false!==e.show&&0!==e.show&&"0"!==e.show&&void 0!==e.refLineExpr};function c(t){var e=t.refLine,i=t.label,a=t.valueString;if(false!==e.showValue){if(false!==e.showLabel)return"".concat(i," ").concat(s["a"].lrm,"(").concat(a,")").concat(s["a"].lrm);return"".concat(s["a"].lrm,"(").concat(a,")").concat(s["a"].lrm)}if(false!==e.showLabel)return i;return""}e["a"]={lineSettings:r,lineLabelSettings:o,isVisible:l,getRefLineTitle:c}},ghLF:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("mWu2");var r=i("UvZF");var o=i.n(r);var l=i("BPQk");var c=/[^\s()"',+$*\-<>=&/!{};:@`´[\]]/;var h=/[\s()"',+$*\-<>=&/!{};:@`´[\]]/;var u={REGEXP_WORD:c,REGEXP_WORD_SEPARATOR:h};var d=u.REGEXP_WORD;var f={state:null,column:null,marked:null,cc:null};var p=function t(e,i){var a=/[+\-*&=<>]/;var n=/[\u0022\u0027\u0060\u00b4[]/;function s(t,e,i){e.tokenize=i;return i(t,e)}function r(t,e){var i;while(null!=(i=t.next()))if(i===e)return false;return false}var o;var l;function c(t,e,i){o=t;l=i;return e}function h(t,e){if(t.eatSpace()){o="whitespace";return null}o="any";var r=t.next();if(n.test(r)){if("["===r)return s(t,e,p("]"));return s(t,e,p(r))}if(/[[\]{}(),;:]/.test(r))return c(r);if("0"===r&&t.eat(/x/i)){t.eatWhile(/[\da-f]/i);return c("number","number")}if(/[.\d]/.test(r)){t.match(/^\d*(?:\.\d*)?(?:[eE][+-]?\d+)?/);if(!t.eol()){r=t.peek();if(/[A-z]/.test(r))return"normaltext"}return"number"}if("/"===r){if(t.eat("*"))return s(t,e,v);if(t.eat("/")){t.skipToEnd();return"comment"}t.eatWhile(a);return"operator"}if(a.test(r)){t.eatWhile(a);return c(r,"operator")}if("$"===r&&t.match(/^\(=/,false,true))return c("$");if("$"===r&&t.match(/^\((MUST_INCLUDE|INCLUDE)=/i,false,true))return c("$");if("$"===r&&t.match(/^\(/,false,true)){t.eat("(");e.tokenize=g;return c("$(")}t.eatWhile(d);var l=t.current();var h=l.toLowerCase();if("rem"===h)return s(t,e,m);if(i.service.isFunction(h)&&t.match(/(^\s*\()/,false,true))return c("function","keyword",h);if(i.service.isMeasure(l,e))return c("measure","measure");if(i.service.isField(l))return c("field","field");if(i.service.isVariable(l))return c("variable","variable");if(i.service.isKeyword(h))return c("keyword","keyword");return"normaltext"}function u(t){return t.substr(1,t.length-2)}function p(t){return function(e,a){if(!r(e,t)){a.tokenize=h;if("'"!==t){var n=u(e.current(),t);if(i.service.isMeasure(n,a))return c("measure","measure");if(i.service.isField(n))return c("field","field");if(i.service.isVariable(n))return c("variable","variable")}}return c("string","string")}}function v(t,e){var i=false;var a;while(a=t.next()){if("/"===a&&i){e.tokenize=h;break}i="*"===a}return c("comment","comment")}function m(t,e){var i;while(i=t.next())if(";"===i){e.tokenize=h;break}return c("comment","comment")}function g(t,e){o="any";var a=t.next();")"!==a&&"("!==a||(e.tokenize=h);if(/[()]/.test(a))return c(a);t.eatWhile(/[^()]/);var n=t.current();if(!/^\d/.test(n)&&i.service.isVariable(n))return c("variable","variable");return"normaltext"}function x(t,e,i,a){this.type=t;this.prev=e;this.info=i;this.pos=a}function _(t,e,i,a,n){var s=t.cc;f.state=t;f.stream=n;f.marked=null;f.cc=s;while(true){var r=s.length?s.pop():A;if(r(i,a)){while(s.length&&s[s.length-1].lex)s.pop()();if(f.marked)return f.marked;return e}}}function y(){for(var t=arguments.length-1;t>=0;t--)f.cc.push(arguments[t])}function b(){y.apply(null,arguments);return true}function M(t,e){var i=function i(){var a=f.state;a.lexical=new x(t,a.lexical,e,f.stream.pos)};i.lex=true;return i}function w(){var t=f.state;t.lexical.prev&&(t.lexical=t.lexical.prev)}w.lex=true;function S(t){return function e(i){if(i===t)return b();if(";"===t)return y();return b(e)}}function D(t,e){return function i(a){if(a===e)return b();return y(t,i)}}function A(t){if("function"===t)return b(M("qvfunction",l),S("("),D(A,")"),w);if("("===t)return b(D(A,")"));if("$("===t)return b(D(A,")"));return b()}return{startState:function t(){return{tokenize:h,lastType:null,cc:[],lexical:new x("block")}},token:function t(e,i){var a=i.tokenize(e,i);if("comment"===o)return a;i.lastType=o;return _(i,a,o,l,e)},lineComment:"//"}};o.a.defineMode("qlikviewscript",p);var v={REGEXP_WORD:d,mode:p};var m=i("FdxK");s["default"].directive("qvCodeareaFunctionTip",[function(){return{restrict:"A",require:"qvCodearea",link:function t(e,i,a,n){var r;var o;var l=22;var c=e.$watch(a.qvCodeareaFunctionTip,(function(t){function i(){var t=n.codemirror.getCursor();var e=n.codemirror.getTokenAt(t,true);if("comment"!==e.type){var i=0;var a=e.state.lexical;while(a&&"qvfunction"!==a.type||0===i&&a.info&&e.string.toLowerCase()===a.info.toLowerCase()){a=a.prev;i++}return a}return}function a(t,e){var i=n.codemirror.getCursor();var a={line:i.line,ch:i.ch};var s;var r;while(a.line>=0){s=n.codemirror.getLine(a.line).toLowerCase();r=s.substring(t.pos-e.length,t.pos);if(r===e){a.ch=t.pos-e.length;break}a.line-=1}var o=n.codemirror.charCoords(a);o.top-=n.codemirror.defaultTextHeight()+l;return o}function h(){var e=i();var n=e?e.info:void 0;var o=n?t.service.getFunctionTip(n):void 0;s["default"].$apply(s["default"].$rootScope,(function(){u();if(o){var i=a(e,n);v();r=m["a"].show(t.view,{content:o,offset:i})}}))}function u(){g();if(r){r.destroy();r=void 0}}function d(){clearTimeout(o);o=setTimeout(h,250)}function f(){u()}var p={Esc:function t(){e.$apply((function(){u()}))}};function v(){n.codemirror.addKeyMap(p)}function g(){n.codemirror.removeKeyMap(p)}if(t){n.codemirror.on("blur",f);n.codemirror.on("cursorActivity",d);e.$on("$destroy",(function(){n.codemirror.off("blur",f);n.codemirror.off("cursorActivity",d);u()}));c()}}),true)}}}]);var g='<div class="qv-autocomplete-container">\n\t<ul class="codearea-autocomplete-hints">\n\t\t<li ng-repeat="item in state.hints track by item.text"\n\t\t\tqva-scroll-into-view="{ scroll: state.selectedHint == $index, scrollSelector: \'.codearea-autocomplete-hints\' }"\n\t\t\tclass="codearea-autocomplete-hint"\n\t\t\tng-class="{ \'codearea-autocomplete-hint-active\': state.selectedHint == $index }"\n\t\t\tng-mouseover="state.selectedHint = $index;"\n\t\t\tqva-activate="state.choose( $index )">\n\n\t\t\t<div class="codearea-autocomplete-hint-text">{{item.text}}</div>\n\t\t\t<div ng-repeat="type in item.types track by $index"\n\t\t\t\t class="codearea-autocomplete-hint-type {{type.id}}"\n\t\t\t\t q-translation="{{type.key}}"></div>\n\t\t</li>\n\t</ul>\n</div>\n';function x(t,e,i){var a=i.bottom+t.height<=e.height;var n=a?i.bottom:i.top-t.height;var s=Math.max(0,i.left+t.width-e.width);var r=i.left-s;return{top:n,left:r}}function _(t,e){t.$$postDigest((function(){t.$$postDigest(e)}))}var y={scope:{state:"="},template:g,controller:["$scope","$element",function(t,e){var i=e.find(".qv-autocomplete-container");var a=n()(window);function s(){var e={width:a.width(),height:a.height()};var n=i[0].getBoundingClientRect();var s=t.state.cursorPos;var r=x(n,e,s);i.css({left:r.left,top:r.top})}t.$watch("state.hints.length",(function(){_(t,s)}))}]};var b=i("wIyQ");var M=100;var w=u.REGEXP_WORD_SEPARATOR;function S(t){var e=t.getTokenAt(t.getCursor()).type;return"keyword"===e||"field"===e||"variable"===e||"measure"===e}function D(t,e,i){if(t.somethingSelected()||S(t)&&!i||e.disabled)return null;var a=e.getHints(t);var n=a.list;if(0===n.length)return null;n.length>M&&(n=n.slice(0,M));var s=t.cursorCoords(false!==e.alignWithWord?a.from:null);return{from:a.from,to:a.to,hints:n,selectedHint:i?i.selectedHint:0,cursorPos:s}}function A(t,e){this.dialogHandle=null;this.dialogOptions={};this.state=null;this.options=e;this.cm=t;this.currentOptions=null;this.once=null;this.closingOnBlur=null;this.bound={cursorActivity:this.cursorActivity.bind(this),pick:this.pick.bind(this),close:this.close.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),choose:this.choose.bind(this),showHint:this.showHint.bind(this)};function i(){return 8}var a=this;this.ourMap={Up:function t(){a.changeActive(a.state.selectedHint-1);s["default"].$rootScope.$apply()},Down:function t(){a.changeActive(a.state.selectedHint+1);s["default"].$rootScope.$apply()},PageUp:function t(){a.changeActive(a.state.selectedHint-i());s["default"].$rootScope.$apply()},PageDown:function t(){a.changeActive(a.state.selectedHint+i());s["default"].$rootScope.$apply()},Home:function t(){a.changeActive(0);s["default"].$rootScope.$apply()},End:function t(){a.changeActive(a.state.hints.length-1);s["default"].$rootScope.$apply()},Enter:this.bound.pick,Tab:this.bound.pick,Esc:this.bound.close}}A.prototype.cursorActivity=function(){var t=s["default"].getService("$timeout");t.cancel(this.once);this.once=null;var e=this.cm.getCursor();e.line!==this.startLine||this.cm.somethingSelected()?this.close():this.once=t(this.bound.showHint,70)};A.prototype.choose=function(t){this.changeActive(t);this.pick()};A.prototype.pick=function(){this.cm.replaceRange(this.state.hints[this.state.selectedHint].value,this.state.from,this.state.to);this.cm.focus();this.close();s["default"].$apply(s["default"].$rootScope)};A.prototype.onBlur=function(){var t=s["default"].getService("$timeout");this.closingOnBlur=t(this.bound.close,300)};A.prototype.onFocus=function(){var t=s["default"].getService("$timeout");t.cancel(this.closingOnBlur);this.closingOnBlur=null};A.prototype.changeActive=function(t){if(!this.state)return;t=Math.max(0,Math.min(t,this.state.hints.length-1));if(this.state.selectedHint===t)return;this.state.selectedHint=t};A.prototype.close=function(){var t=s["default"].getService("$timeout");t.cancel(this.once);t.cancel(this.startTimeout);if(!this.dialogHandle)return;this.dialogHandle.destroy();this.dialogHandle=null;this.cm.removeKeyMap(this.ourMap);this.cm.off("cursorActivity",this.bound.cursorActivity);this.cm.off("blur",this.bound.onBlur);this.cm.off("focus",this.bound.onFocus);this.cm.off("scroll",this.bound.close);this.state=null;s["default"].$apply(s["default"].$rootScope)};A.prototype.open=function(){this.dialogHandle=m["a"].show(this.options.view,this.dialogOptions);this.startLine=this.cm.getCursor().line;this.cm.addKeyMap(this.ourMap);this.cm.on("cursorActivity",this.bound.cursorActivity);this.cm.on("blur",this.bound.onBlur);this.cm.on("focus",this.bound.onFocus);this.cm.on("scroll",this.bound.close)};A.prototype.showHint=function(){var t=this.state;this.state=D(this.cm,this.options,t);if(!this.state){t&&this.close();return}this.state.choose=this.bound.choose;this.dialogOptions.state=this.state;t||this.open()};A.prototype.start=function(){var t=s["default"].getService("$timeout");if(this.state)return;this.startTimeout&&t.cancel(this.startTimeout);this.startTimeout=t(this.bound.showHint,500)};var k={keyword:{translation:"Common.Keyword",allowQuote:false},variable:{translation:"Common.Variable",allowQuote:true},field:{translation:"Common.Field",allowQuote:true},function:{translation:"Common.Function",allowQuote:false},measure:{translation:"Common.Measure",allowQuote:true}};function C(t){return"[".concat(t.replace(/\]/g,"]]"),"]")}function q(t,e){var i={};var a=[];var n=t.toLowerCase();var s="["===t[0];function r(t){"string"===typeof t&&(t={text:t});var e=t.text;if(s){if(!k[t.type]||!k[t.type].allowQuote)return;e=C(e)}if(!e||0!==e.toLowerCase().indexOf(n))return;if(!i[e]){i[e]={text:t.text,types:[],value:t.value||e};a.push(i[e])}k[t.type]&&i[e].types.push({id:t.type,key:k[t.type].translation})}function o(t,e){var i=t.text.toLowerCase();var a=e.text.toLowerCase();if(i===a)return 0;if(i>a)return 1;return-1}if(!s&&w.test(t)||/^\d+$/.test(t))return[];if(""!==t){e.forEach(r);a.sort(o)}1===a.length&&t===a[0].value&&(a=[]);return a}function L(t,e){var i=t.getCursor();var a=t.getTokenAt(i);var n=q(a.string,e);return{list:n,from:{line:i.line,ch:a.start},to:{line:i.line,ch:a.end}}}s["default"].directive("qvCodeareaAutocomplete",[function(){return{restrict:"A",require:"qvCodearea",link:function t(e,i,a,s){var r=[37,38,39,40,33,34,27];var o=e.$watch(a.qvCodeareaAutocomplete,(function(t){var i;function a(e){return L(e,t.service.getAutocompleteList())}function l(){i.start()}function c(t,e){-1===n.a.inArray(e.which,r)&&l()}if(t){t.view||(t.view=y);t.getHints||(t.getHints=a);i=new A(s.codemirror,t);var h=i.close.bind(i);s.codemirror.on("focus",l);s.codemirror.on("keyup",c);b["a"].on("end",h);e.$on("$destroy",(function(){s.codemirror.off("focus",l);s.codemirror.off("keyup",c);b["a"].off("end",h);i.close()}));o()}}),true)}}}]);var P={getCompletions:q};var I=o.a.Pos;function T(t,e,i,a){this.atOccurrence=false;this.cm=t;a||"string"!=typeof e||(a=false);i=i?t.clipPos(i):I(0,0);this.pos={from:i,to:i};e||(e="");if("string"!=typeof e){e.global||(e=new RegExp(e.source,e.ignoreCase?"ig":"g"));this.matches=function(i,a){var n;var s;var r;if(i){e.lastIndex=0;n=t.getLine(a.line).slice(0,a.ch);s=e.exec(n);r=0;while(s){r+=s.index+1;n=n.slice(r);e.lastIndex=0;var o=e.exec(n);if(!o)break;s=o}r--}else{e.lastIndex=a.ch;n=t.getLine(a.line);s=e.exec(n);r=s&&s.index}if(s&&s[0])return{from:I(a.line,r),to:I(a.line,r+s[0].length),match:s};return}}else{a||(e=e.toLowerCase());var n=a?function(t){return t}:function(t){return t.toLowerCase()};var s=e.split("\n");1==s.length?e.length?this.matches=function(i,a){var s=n(t.getLine(a.line));var r=e.length;var o;if(i?a.ch>=r&&-1!=(o=s.lastIndexOf(e,a.ch-r)):-1!=(o=s.indexOf(e,a.ch)))return{from:I(a.line,o),to:I(a.line,o+r)};return}:this.matches=function(){}:this.matches=function(e,i){var a=i.line;var r=e?s.length-1:0;var o=s[r];var l=n(t.getLine(a));var c=e?l.indexOf(o)+o.length:l.lastIndexOf(o);if(e?c>=i.ch||c!=o.length:c<=i.ch||c!=l.length-o.length)return;for(;;){if(e?!a:a==t.lineCount()-1)return;l=n(t.getLine(a+=e?-1:1));o=s[e?--r:++r];if(r>0&&r<s.length-1){if(l!=o)return;continue}var h=e?l.lastIndexOf(o):l.indexOf(o)+o.length;if(e?h!=l.length-o.length:h!=o.length)return;var u=I(i.line,c);var d=I(a,h);return{from:e?d:u,to:e?u:d}}}}}T.prototype={findNext:function t(){return this.find(false)},findPrevious:function t(){return this.find(true)},find:function t(e){var i=this;var a=this.cm.clipPos(e?this.pos.from:this.pos.to);function n(t){var e=I(t,0);i.pos={from:e,to:e};i.atOccurrence=false;return false}for(;;){if(this.pos=this.matches(e,a)){this.atOccurrence=true;return this.pos.match||true}if(e){if(!a.line)return n(0);a=I(a.line-1,this.cm.getLine(a.line-1).length)}else{var s=this.cm.lineCount();if(a.line==s-1)return n(s);a=I(a.line+1,0)}}},from:function t(){if(this.atOccurrence)return this.pos.from;return},to:function t(){if(this.atOccurrence)return this.pos.to;return},replace:function t(e){if(!this.atOccurrence)return;var i=o.a.splitLines(e);this.cm.replaceRange(i,this.pos.from,this.pos.to);this.pos.to=I(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}};function O(t,e,i,a){return new T(t,e,i,a)}var N={getSearchCursor:O};var E=i("Mj5g");var R;function V(){this.posFrom=null;this.posTo=null;this.query=null;this.marked=[]}function z(t){var e=new V;var i;function a(e,i,a){return N.getSearchCursor(t,e,i,a)}function n(t){R.validQuery=true;var e=false;try{return e?new RegExp(e[1],-1===e[2].indexOf("i")?"":"i"):t}catch(e){R.validQuery=false;return t}}function s(){t.operation((function(){var t;if(!e.query)return;e.query=null;for(t=0;t<e.marked.length;++t)e.marked[t].clear();e.marked.length=0}));l()}function r(r,o,l,c){var u=2e3;var d=0;s();if(r){t.operation((function(){e.query=n(r);var s={line:0,ch:0};!o&&i&&i.from()&&(s=i.from());i=a(e.query,{line:0,ch:0},c);d=E["a"].getMaxNumberOfHits(t.getValue(),r,c);if(t.lineCount()<u)while(i.findNext())e.marked.push(t.markText(i.from(),i.to(),{className:"cm-searching"}));e.posTo=t.getCursor();e.posFrom=e.posTo;i=a(e.query,s,c)}));l&&h();R.hits=d;return d}R.hits=0;return 0}var o;function l(){o&&o.clear()}function c(){l();o=t.markText(i.from(),i.to(),{className:"cm-current"});t.setCursor(i.to());e.posFrom=i.from();e.posTo=i.to()}function h(e,a){var n=i.find(e);if(n){c();t.scrollIntoView(i.from(),t.getScrollInfo().clientHeight/2)}else a&&a();return n}function u(t){i=a(e.query,{line:0,ch:0},t);return h(false)}function d(n){var s=t.lastLine();var r=t.getLine(s).length;i=a(e.query,{line:s,ch:r},n);return h(true)}function f(t,a,n,s){var r="string"===typeof e.query?a:i.pos.match[0].replace(e.query,a);i.atOccurrence||u(n);i.replace(r);R.hits--;var o=i.find(t);o?c():s&&s()}function p(s,r,o){if(!s)return;var l=0;s=n(s);t.operation((function(){for(i=a(s,void 0,o);i.findNext();){l++;var t="string"===typeof e.query?r:i.pos.match[0].replace(e.query,r);i.replace(t)}}));R.hits=0;return l}R={doSearch:r,clearMarkedSearch:s,doFindNext:h,doFindFirst:u,doFindLast:d,doReplaceAll:p,doReplace:f,hits:0,validQuery:true};return R}var F={createSingleCodeareaSearcher:z};var j=i("Lvlw");var H="\r\n";s["default"].directive("qvCodeareaExposedContextApi",["$parse","$timeout",function(t,e){return{require:["qvCodearea","qvCodeareaExposedContextApi"],link:function e(i,a,n,s){var r=s[0];var o=s[1];o._connectCodeArea(r);var l=t(n.qvCodeareaExposedContextApi);l.assign(i,o);i.$on("$destroy",(function(){l.assign(i,void 0);o._connectCodeArea(void 0)}))},controller:function t(){var i;function a(t){i=t}function n(){var t=i.codemirror.getTokenAt(i.codemirror.getCursor());var e=0;var a=t.state.lexical;while(a&&"qvfunction"!==a.type||0===e&&a.info&&t.string.toLowerCase()===a.info.toLowerCase()){a=a.prev;e++}return!!a&&a.info}function s(){i.focus()}function r(){i.codemirror.undo()}function l(){i.codemirror.redo()}function c(){o.a.commands.toggleComment(i.codemirror);s()}function h(){i.codemirror.indentSelection("add");s()}function u(){i.codemirror.indentSelection("subtract");s()}function d(){return i.codemirror.options.readOnly}function f(t){var e=i.codemirror.getDoc().getSelection();var a=t(e);i.codemirror.replaceSelection(a)}function p(t){i.codemirror.setCursor(i.codemirror.getCursor("end"));var e=i.codemirror.getCursor().line;var a=i.codemirror.getCursor().ch;var n=i.codemirror.getLine(e).length;if(n>0)if(a===n){i.codemirror.setCursor(e,n);i.codemirror.replaceSelection(H)}else{i.codemirror.setCursor(i.codemirror.lineCount(),0);t=H+H+t}i.codemirror.setCursor(i.codemirror.getCursor("end"));i.codemirror.replaceSelection(t);i.focus()}function v(t){i.codemirror.replaceSelection(t,"end");i.focus()}function m(t){e((function(){var e=i.codemirror.lineCount();t<e?i.codemirror.setCursor(t-1,0):i.codemirror.setCursor(e-2,0);i.focus()}))}function g(t){return i.codemirror.getCursor(t)}function x(t,e,a){i.codemirror.setCursor(t,e,a)}function _(){return i.codemirror.lineCount()}var y={applyToSelection:f,focus:s,undo:r,redo:l,comment:c,indent:h,outdent:u,insertCode:p,replaceSelection:v,getFunctionNameUnderCursor:n,gotoLine:m,isReadOnly:d,getCursor:g,setCursor:x,lineCount:_,_connectCodeArea:a,codemirror:void 0};Object.defineProperty(y,"canUndo",{get:function t(){return i&&i.codemirror&&i.codemirror.historySize().undo>0},enumerable:true});Object.defineProperty(y,"canRedo",{get:function t(){return i&&i.codemirror&&i.codemirror.historySize().redo>0},enumerable:true});return y}}}]);function B(t,e){var i=t.length;var a=e.length;var n;var s=Math.min(t.length,e.length);for(n=0;n<s;n++)if(t.charAt(n)!==e.charAt(n))break;if(n===t.length&&n===e.length)return;var r=n;var o;var l;for(n=0;n<s;n++){o=i-n-1;l=a-n-1;if(o<r||l<r)break;if(t.charAt(i-n-1)!==e.charAt(a-n-1))break}var c=i-n-1;var h=a-n-1;return{start:r,targetRange:{from:r,to:c+1},sourceRange:{from:r,to:h+1}}}s["default"].directive("qvCodeareaExposedTouchApi",["$parse","$timeout",function(t,e){return{require:["qvCodearea","qvCodeareaExposedTouchApi"],link:function i(a,n,s,r){var o=r[0];var l=r[1];l._connectCodeArea(o);var c=t(s.qvCodeareaExposedTouchApi);c.assign(a,l);a.$on("$destroy",(function(){c.assign(a,void 0);e((function(){l._connectCodeArea(void 0)}))}))},controller:["$scope",function(t){var i;var a;function s(t){i=t}function r(t,e){i.codemirror.scrollTo(e,t)}function o(t){i.setCustomFocusFn(t)}function l(e){function a(){var t=n()(i.codemirror.getScrollerElement());e(t.scrollTop(),t.scrollLeft())}i.codemirror.on("scroll",a);t.$on("$destroy",(function(){i.codemirror.off("scroll",a);e=void 0}))}function c(e){function n(){var t={anchor:i.codemirror.indexFromPos(i.codemirror.getCursor("anchor")),head:i.codemirror.indexFromPos(i.codemirror.getCursor("head"))};e(i.codemirror.getValue(),t)}function s(){a||n()}n();i.codemirror.on("change",s);t.$on("$destroy",(function(){i.codemirror.off("change",s);e=void 0}))}function h(a){t.$watch((function(){return String(i.codemirror.lineCount()).length}),(function(){e((function(){var t=n()(i.codemirror.getGutterElement()).outerWidth();var e={top:0,left:t,bottom:0,right:0};a(e)}))}));t.$on("$destroy",(function(){a=void 0}))}function u(t,e,a){i&&i.codemirror.setSelection(t,e,a)}function d(t,e){var n=i.codemirror.getValue("\n");var s=B(n,e);if(s){var r=e.substring(s.sourceRange.from,s.sourceRange.to);var o=i.codemirror.posFromIndex(s.targetRange.from);var l=i.codemirror.posFromIndex(s.targetRange.to);a=true;i.codemirror.replaceRange(r,o,l);a=false}}function f(){i.cssClasses["qv-codearea-disable-selection"]=true}function p(){i.cssClasses["qv-codearea-disable-selection"]=false}var v={_connectCodeArea:s,scrollTo:r,onScroll:l,setOverlayFocuser:o,replicateSelection:u,replicateContent:d,onNewContent:c,onResize:h,disableSelections:f,restoreSelections:p};return v}]}}]);var $={diff:B};s["default"].directive("qvCodeareaExposedSearchApi",["$parse",function(t){return{require:"qvCodearea",link:function e(i,a,n,s){var r=t(n.qvCodeareaExposedSearchApi);r.assign(i,F.createSingleCodeareaSearcher(s.codemirror));i.$on("$destroy",(function(){r.assign(i,void 0)}))},controller:function t(){}}}]);function W(t){W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return W(t)}s["default"].directive("qvCodeareaAccelerators",[function(){return{require:["qvCodearea","qvCodeareaExposedContextApi"],link:function t(e,i,a,n){var r=n[0];var o=n[1];var l={keyCode:void 0,ctrlKey:void 0,shiftKey:void 0};function c(t,e){return t.keyCode===e.keyCode&&t.ctrlKey===(e.ctrlKey||false)&&t.shiftKey===(e.shiftKey||false)}function h(t,i){var n=e.$eval(a.qvCodeareaAccelerators);var r=function t(e){var a=n[e];if(c(i,a)&&(!a.previous||c(l,a.previous))){s["default"].$apply(s["default"].$rootScope,(function(){a.fn(o)}));l={keyCode:void 0,ctrlKey:void 0,shiftKey:void 0};i.preventDefault();return{v:void 0}}};for(var h in n){var u=r(h);if("object"===W(u))return u.v}l={keyCode:i.keyCode,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey}}r.codemirror.on("keydown",h);e.$on("$destroy",(function(){r.codemirror.off("keydown",h)}))}}}]);function U(t){var e=n()("<div class='qv-codearea-breakpoint-marker'><span class='lui-icon lui-icon--minus'></span></div>");e.data("breakpoint",t);return e[0]}function G(t,e){if(e.enabled){n()(t).addClass("qv-codearea-breakpoint-marker-enabled");n()(t).removeClass("qv-codearea-breakpoint-marker-disabled")}else{n()(t).addClass("qv-codearea-breakpoint-marker-disabled");n()(t).removeClass("qv-codearea-breakpoint-marker-enabled")}}s["default"].directive("qvCodeareaBreakpoints",[function(){return{require:"qvCodearea",link:function t(e,i,a,r){var o;function l(t){if(t){o=t;var e=r.codemirror.getDoc().lineCount();for(var i=0;i<e;i++){var a=i+1;var n=t[a];var s=r.codemirror.lineInfo(i).gutterMarkers;var l=s&&s["qv-codearea-breakpoint"];if(n){if(!l){l=U(n);r.codemirror.setGutterMarker(i,"qv-codearea-breakpoint",l)}G(l,n)}else l&&r.codemirror.setGutterMarker(i,"qv-codearea-breakpoint",null)}}}e.$watch(a.qvCodeareaBreakpoints,l);e.$watch(a.qvCodeareaBreakpoints,l,true);function c(t){var e=r.codemirror.getDoc().lineCount();for(var i=t.from.line;i<e;i++){var a=r.codemirror.lineInfo(i).gutterMarkers;if(a&&a["qv-codearea-breakpoint"])return true}return false}function h(t){return t.text.length!==t.removed.length}function u(t,e){!r.supressChangeEvent&&h(e)&&c(e)&&s["default"].$apply(s["default"].$rootScope,(function(){var t=o;for(var e in t)t.hasOwnProperty(e)&&delete t[e];var i=r.codemirror.getDoc().lineCount();for(var a=0;a<i;a++){var s=a+1;var l=r.codemirror.lineInfo(a).gutterMarkers;var c=l&&l["qv-codearea-breakpoint"];if(c){var h=n()(c);var u=h.data("breakpoint");u.lineNbr=s;t[s]=u}}}))}function d(t,i){r.disabled||e.$apply((function(){var t=i+1;var e=o[t];e?delete o[t]:o[t]={enabled:true,lineNbr:t}}))}r.codemirror.on("change",u);r.codemirror.on("gutterClick",d);var f={F9:function t(){d(r.codemirror,r.codemirror.getCursor().line)}};r.codemirror.addKeyMap(f);e.$on("$destroy",(function(){r.codemirror.off("change",u);r.codemirror.off("gutterClick",d);r.codemirror.removeKeyMap(f)}))}}}]);s["default"].directive("qvCodeareaDebugLocation",[function(){return{require:"qvCodearea",link:function t(e,i,a,n){var s;e.$watch(a.qvCodeareaDebugLocation,(function(t){if(t){var e=n.codemirror.lastLine()+1;var i=t.lineNbr;i>e&&(i=e);if(s){n.codemirror.removeLineClass(s,"background","qv-codearea-current-debug-line");n.codemirror.removeLineClass(s,"background","qv-codearea-current-debug-line-error")}if(i>0&&i<=e){n.codemirror.addLineClass(i-1,"background","qv-codearea-current-debug-line");t.errorMessage&&n.codemirror.addLineClass(i-1,"background","qv-codearea-current-debug-line-error");n.codemirror.scrollIntoView({line:i-1,ch:0},200);s=n.codemirror.getLineHandle(i-1)}}}),true)}}}]);s["default"].directive("qvCodeareaErrors",[function(){return{require:"qvCodearea",link:function t(e,i,a,n){var s=[];e.$watch("".concat(a.qvCodeareaErrors,".content"),(function(t){if(t){var e;for(e=0;e<s.length;e++)s[e].clear();for(e=0;e<t.length;e++){var i=t[e];var a={line:i.qLineInTab,ch:i.qColInLine};var r={line:i.qLineInTab,ch:i.qColInLine+i.qErrLen};var o=n.codemirror.markText(a,r,{className:"cm-servererror"});s.push(o)}}}),true);e.$on("$destroy",(function(){s=[]}))}}}]);function Z(t,e,i){var a=e.text.join("\n");var n=t.getRange(e.from,e.to).length;var s=a.length;var r=s-n;var o=t.getValue().length;if(o>=i&&0===n)e.cancel();else if(o+r>i){s=Math.max(0,i-o+n);a=a.substr(0,s);e.update(null,null,a.split("\n"))}}var Y=Z;s["default"].directive("qvCodeareaLimit",[function(){return{require:"qvCodearea",link:function t(e,i,a,n){function s(t,i){var n=e.$eval(a.qvCodeareaLimit);n&&n>0&&Y(t,i,n)}n.codemirror.on("beforeChange",s);e.$on("$destroy",(function(){n.codemirror.off("beforeChange",s)}))}}}]);var X=i("Lj2P");var K;var J;var Q;function tt(t,e){var i=[];for(var a=0;a<t.length;a++){var n=t[a].split(" ");for(var s=0;s<n.length;s++)if(n[s].toLowerCase()===e.toLowerCase()){if(!K){K=n.length>1;J=s>0}i.push(t[a])}}return i}function et(t,e,i){if(" "===i.string){var a=t.getTokenAt({ch:i.end+1,line:e.line});if(a.string.length>1)return a}return i}function it(t,e,i,a){var n=a?e.end-(e.string.length+1):e.end+2;var s=t.getTokenAt({ch:n,line:i.line});return s}function at(t,e,i,a){K=false;J=false;i=i||"scriptsyntax";var n="".concat(X["a"].path+i,".");if("keyword"!==e.type&&"function"!==e.type)return false;e=et(t,t.getCursor(),e);var s=tt(a.getAutocompleteList().map((function(t){return t.text})),e.string);var r;if(K){var o=it(t,e,t.getCursor(),J);var l=tt(s,o.string);r=l.length>0&&o.string!==e.string?J?"".concat(o.string,"_").concat(e.string):"".concat(e.string,"_").concat(o.string):e.string}else r=e.string;n+=r;/firefox/.test(window.navigator.userAgent.toLocaleLowerCase())&&Q&&Q.close();Q=window.open(n,"__qlikviewhelp");return true}function nt(t,e,i,a){var n={left:e.pageX,top:e.pageY};var s=t.coordsChar(n,"window");var r=t.getTokenAt(s);return at(t,r,i,a)}function st(t,e,i,a){var n=t.getTokenAt(t.getCursor());return at(t,n,i,a)}s["default"].directive("qvCodeareaHelpMode",["$parse",function(t){return{require:"qvCodearea",link:function e(i,a,s,r){var o;var l=i.$watch(s.qvCodeareaHelpModeOptions,(function(e){l();function c(a){if(o){a.preventDefault();var n=nt(r.codemirror,a,e.syntax,e.service);n&&i.$apply((function(){t(s.qvCodeareaHelpMode).assign(i,false)}))}}function h(t,i){if((72===i.keyCode||104===i.keyCode)&&i.ctrlKey){i.preventDefault();st(r.codemirror,i,e.syntax,e.service)}}i.$watch(s.qvCodeareaHelpMode,(function(t){o=t;r.cssClasses["qv-codearea-help-mode"]=t}));n()(a).on("click",c);r.codemirror.on("keydown",h);i.$on("$destroy",(function(){n()(a).off("click",c);r.codemirror.off("keydown",h)}))}))}}}]);s["default"].directive("qvCodeareaTouchOverlay",[function(){return{restrict:"E",replace:true,scope:{codeareaTouchApi:"=",enabled:"=",helpMode:"="},template:'<div class="qv-codearea-touch-overlay-container" ng-style="containerStyle"><textarea class="qv-codearea-touch-overlay" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" wrap="off"></textarea></div>',link:function t(e,i){var a=i.find("textarea");var n=false;e.containerStyle={};function s(t){var i=/iPad|iPhone|iPod/.test(navigator.userAgent);i&&a.css("padding-left","1px");t.disableSelections();e.$on("$destroy",(function(){t.restoreSelections()}));t.onNewContent((function(t,e){a.val(t);if(a[0]!==document.activeElement)return;if(a[0].selectionStart!==e.anchor||a[0].selectionEnd!==e.head){a[0].selectionStart=e.anchor;a[0].selectionEnd=e.head}}));t.setOverlayFocuser((function(){}));t.onResize((function(t){e.containerStyle.left=t.left}));t.onScroll((function(t,e){a.scrollTop(t);a.scrollLeft(e);document.activeElement===a[0]&&(""===a[0].style.textShadow?a[0].style.textShadow="rgba(0,0,0,0) 0 0 0":a[0].style.textShadow="")}));a.on("scroll",(function(){t.scrollTo(a.scrollTop(),a.scrollLeft())}));a.on("input",(function(e){var i=a.val();t.replicateContent(e,i)}));function s(t,e){var i=t.substring(0,e).split("\n");var a=i.length-1;var n=i[i.length-1].length;return{line:a,ch:n}}function r(){var e=a.val();var i=a[0].selectionStart;var n=a[0].selectionEnd;var r=s(e,i);var o=s(e,n);t.replicateSelection(r,o,{scroll:false})}var o;var l;function c(){if(!n){if(a[0].selectionStart!==o||a[0].selectionEnd!==l){o=a[0].selectionStart;l=a[0].selectionEnd;r()}setTimeout(c,200)}}setTimeout(c,200)}e.$watch("helpMode",(function(t){t?i.hide():i.show()}));var r=e.$watch("codeareaTouchApi",(function(t){if(t){s(t);r()}}));e.$on("$destroy",(function(){n=true;a=void 0}))}}}]);s["default"].directive("qvCodeareaBlockLargePastes",[function(){var t=function t(e){if(""===e||Number.isNaN(+e))return 1e6;return e};var e=function t(e){if(e.originalEvent.clipboardData)return e.originalEvent.clipboardData.getData("text/plain").length;return window.clipboardData.getData("Text").length};return{restrict:"A",controller:["$scope","$element","$attrs",function(i,a,n){a.find("textarea").on("paste",(function(i){e(i)>t(n.qvCodeareaBlockLargePastes)&&i.preventDefault()}));i.$on("$destroy",(function(){a.find("textarea").off("paste")}))}]}}]);s["default"].directive("qvCodeareaExposedGutterWidth",["$parse","$timeout",function(t,e){return{require:"qvCodearea",link:function i(a,s,r,o){var l=t(r.qvCodeareaExposedGutterWidth);a.$watch((function(){return String(o.codemirror.lineCount()).length}),(function(){var t=n()(o.codemirror.getGutterElement()).outerWidth();l.assign(a,t);e((function(){var t=n()(o.codemirror.getGutterElement()).outerWidth();l.assign(a,t)}))}));a.$on("$destroy",(function(){l.assign(a,void 0)}))},controller:function t(){}}}]);var rt="CodeMirror-text-in-composition";var ot={inclusiveLeft:true,inclusiveRight:true,className:rt};function lt(t){var e;var i=t.getAllMarks();for(var a=0;a<i.length;a++){e=i[a];null!=e&&e.className===rt&&e.clear()}return true}var ct;var ht;var ut;var dt;var ft;var pt;var vt;var mt;var gt;var xt;var _t;function yt(t,e){var i=e;t.options.enableCompositionMod=true;ft=function e(){pt&&pt();t.display.input.blur();t.display.input.focus()};dt=function e(i){vt=i.char;pt&&pt();if(t.display.inCompositionMode){var a=t.getCursor();var n=t.display.compositionHead;var s=t.charCoords(a).left-t.charCoords(n).left;s+=void 0!==vt?30:1;t.display.input.style.width="".concat(s,"px")}};ct=function e(){if(t.options.enableCompositionMod){_t.disabled=true;t.display.inCompositionMode=true;gt=i.offset();t.display.inputDiv.classList.add("CodeMirror-input-wrapper");t.display.inputDiv.classList.add("in-composition");t.setOption("readOnly",true);t.somethingSelected()&&t.replaceSelection("");t.display.compositionHead=t.getCursor();void 0===vt?t.display.input.value="":" "===vt&&ht({data:" "})}};ht=function e(i){var a;var n;if(!t.options.enableCompositionMod||!t.display.inCompositionMode)return;var s=t.display.compositionHead;if(t.display.textMarkerInComposition){a=t.display.textMarkerInComposition.find();if(a){t.replaceRange(i.data,s,a.to);t.display.textMarkerInComposition.clear();t.display.textMarkerInComposition=void 0}}else t.replaceRange(i.data,s,s);var r=t.getCursor();n=t.charCoords(r).left-t.charCoords(s).left;void 0===vt&&(n+=1);t.display.input.style.width="".concat(n,"px");t.display.textMarkerInComposition=t.markText(s,r,ot);mt()};function a(){var t=window.navigator.userAgent;var e=t.indexOf("MSIE ");return e>0||!!navigator.userAgent.match(/Trident.*rv:11\./)}ut=function e(i){var n;if(!t.options.enableCompositionMod||!t.display.inCompositionMode)return;a()?"\b"===vt&&ht(i):ht(i);t.display.inCompositionMode=false;t.display.compositionHead=void 0;null!=(n=t.display.textMarkerInComposition)&&n.clear();t.display.textMarkerInComposition=void 0;t.setOption("readOnly",false);t.display.inputDiv.classList.remove("in-composition");t.display.inputDiv.classList.remove("CodeMirror-input-wrapper");lt(t);pt=function e(){_t.disabled=false;o.a.off(t.display.input,"input",pt);if(!t.display.inCompositionMode){t.display.input.value="";t.display.input.style.width="0px";pt=void 0}};o.a.on(t.display.input,"input",pt)};mt=function e(){if(t.display.inCompositionMode){var i=t.charCoords(t.display.compositionHead).top-gt.top;void 0!==vt&&(i-=1);t.display.inputDiv.style.top="".concat(i,"px");var a=t.charCoords(t.display.compositionHead).left-gt.left;t.display.inputDiv.style.left="".concat(a,"px")}};xt=function e(i){var a=n()(t.display.scroller);a.scrollTop(a.scrollTop()-i.wheelDelta)}}s["default"].directive("qvCodeareaCompositionEvent",[function(){return{restrict:"A",require:"qvCodearea",link:function t(e,i,a,s){yt(s.codemirror,i);var r=s.codemirror.display.input;var l=e.$watch(a.qvCodeareaAutocomplete,(function(t){_t=t;l()}));l=e.$watch("codeareaTouchApi",(function(t){if(t){t.onResize((function(){mt()}));t.onScroll((function(){mt()}));l()}}));n()(window).on("resize",mt);o.a.on(s.codemirror,"mousedown",ft);o.a.on(r,"keydown",dt);o.a.on(r,"compositionstart",ct);o.a.on(r,"compositionupdate",ht);o.a.on(r,"compositionend",ut);o.a.on(r,"mousedown",ft);o.a.on(r,"mousewheel",xt);e.$on("$destroy",(function(){n()(window).off("resize",mt);o.a.off(s.codemirror,"mousedown",ft);o.a.off(r,"compositionstart",ct);o.a.off(r,"keydown",dt);o.a.off(r,"compositionupdate",ht);o.a.off(r,"compositionend",ut);o.a.off(r,"input",pt);o.a.off(r,"mousedown",ft);o.a.off(r,"mousewheel",xt)}))}}}])},hpzB:function(t,e,i){"use strict";var a={getAxisUnitAlignment:function t(e,i){if(["near","far"].includes(e))return i?e:"near"===e?"far":"near";if(i)return"left"===e?"near":"far";return"bottom"===e?"far":"near"},roundToHalf:function t(e){var i=Math.round(e);return i-e>=0?i-.5:i+.5},getTicks:function t(e){var i=[];e&&e.forEach((function(t){i.push({position:0,value:t,opacity:1})}));return i},getAvgTickWidth:function t(e){if(!e||e.length<2)return 0;return Math.abs(e[e.length-1]-e[0])/(e.length-1)}};e["a"]=a},iTPj:function(t,e,i){"use strict";var a=i("SOxp");var n=i("Nc9l");function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function o(t,e,i){e&&r(t.prototype,e);i&&r(t,i);return t}var l=function(){function t(e){s(this,t);this._type=e}o(t,[{key:"getType",value:function t(){return this._type}}]);return t}();var c=l;function h(t){h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return h(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&f(t,e)}function f(t,e){f=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return f(t,e)}function p(t){var e=g();return function i(){var a=x(t),n;if(e){var s=x(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return v(this,n)}}function v(t,e){if(e&&("object"===h(e)||"function"===typeof e))return e;return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function x(t){x=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return x(t)}var _=function(t){d(i,t);var e=p(i);function i(t,a,n){var s;u(this,i);s=e.call(this,"propertyChange");s.property=t;s.oldValue=a;s.newValue=n;return s}return i}(c);var y=_;var b="__setters";var M=n["a"].extend("Link",{init:function t(e,i){this._super();this._property=i;this._host=e},setHost:function t(e){if(this._host===e&&this._hostObserved)return;this.unobserve();this._host=e;this.observe()},observe:function t(e){if(!this._host){this.fire("hostPropertyValueChanged",[void 0]);return}C(this._host,this._property);var i=this;var a=k(this._property);this._callback=function(t){t.property===i._property&&i.fire("hostPropertyValueChanged",[t.newValue])};this._callbackSimple=function(){"function"===typeof this[a]&&i.fire("hostPropertyValueChanged",[this[a]()])};e||"function"!==typeof this._host[a]||i.fire("hostPropertyValueChanged",[this._host[a]()]);this._host.listen("propertyChange",this._callback);this._host.listen("".concat(this._property,"Changed"),this._callbackSimple);this._hostObserved=true},unobserve:function t(){if(!this._host)return;this._callback&&this._host.stopListen("propertyChange",this._callback);this._callbackSimple&&this._host.stopListen("".concat(this._property,"Changed"),this._callbackSimple);if(this._host[b]&&this._host[b][this._property]){var e=this._host[b][this._property];var i;e.observers--;if(e.observers<=0){i="set".concat(this._property.substring(0,1).toUpperCase()).concat(this._property.substring(1));if(e.isOriginalOwn)this._host[i]=e.original;else{this._host[i]=null;delete this._host[i]}e.original=null;this._host[b][this._property]=null;delete this._host[b][this._property]}}this._host=void 0;this._callback=void 0;this._callbackSimple=void 0;this._hostObserved=false}});var w=a["a"].extend("Chain",{init:function t(e,i){this._links=[];if(1===arguments.length&&"function"===typeof e)this._setter=e;else{this._wannabe=e;this._wannabeProp=i}},add:function t(e){var i=this;var a;e.listen("hostPropertyValueChanged",(function(t){a=i._links.indexOf(this);if(a===i._links.length-1)if(i._setter)i._setter(t);else{var e="set".concat(i._wannabeProp.substring(0,1).toUpperCase()).concat(i._wannabeProp.substring(1));"function"===typeof i._wannabe[e]&&i._wannabe[e](t)}else i._links[a+1].setHost(t)}));this._links.push(e)},startObserving:function t(e){this._links[0].observe(e)},isBroken:function t(){return this._isBroken},unwatch:function t(){var e=this._links.pop();while(e){e.unobserve();e.stopListen("hostPropertyValueChanged");e=this._links.pop()}this._setter=void 0;this._wannabe=void 0;this._wannabeProp=void 0}});var S=a["a"].extend("ChangeWatcher",{init:function t(e){this._chain=e},unbind:function t(){this._chain.unwatch()}});var D={};D.bindProperty=function(t,e,i,a,n){return A(t,e,i,a,n)};D.bindSetter=function(t,e,i,a){return A(t,e,i,a)};function A(){var t;var e;var i;var a;var n;var s;var r;if(4===arguments.length){i=new w(arguments[0]);t=arguments[1];e=arguments[2];n=arguments[3]}else{i=new w(arguments[0],arguments[1]);t=arguments[2];e=arguments[3];n=arguments[4]}var o=e.split(".");a=o[0];for(r=0;r<o.length;r++){s=new M(t,a);i.add(s);t=t&&"function"===typeof t[k(a)]?t[k(a)]():void 0;a=o[r+1]}i.startObserving(n);return new S(i)}function k(t){return"get".concat(t.substring(0,1).toUpperCase()).concat(t.substring(1))}function C(t,e){var i=e.substring(0,1).toUpperCase()+e.substring(1);var a;var n;if("function"!==typeof t["set".concat(i)])return;t[b]||(t[b]={});if(void 0===t[b][e]){a=t["set".concat(i)];n=t.hasOwnProperty("set".concat(i));t["set".concat(i)]=function n(s){var r="function"===typeof t["get".concat(i)]?t["get".concat(i)]():void 0;if("function"===typeof t["get".concat(i)]&&s===r){a.call(t,s);return}a.call(t,s);t.fire(new y(e,r,s))};t[b][e]={observers:1,original:a,isOriginalOwn:n,keep:false}}else t[b][e].observers++}D.getter=k;var q=e["a"]=D},jRMJ:function(t,e,i){"use strict";var a=i("nHjU");var n=a["a"].extend({paint:function t(e){this._super(e)}});e["a"]=n},kKh9:function(t,e,i){"use strict";var a=i("PX8M");var n=i("sWge");function s(t){return t?n["a"].resolve(t.enigmaModel):a["a"].getApp()}var r={};r.getCurrentSelections=function(t,e){return s(t).then((function(t){return t.engineApp.getSetAnalysis(e).catch((function(t){t.isHandled=true}))}))};r.getSelectionsFromBookmarkId=function(t,e,i){return s(t).then((function(t){return t.engineApp.getSetAnalysis(i,e).catch((function(t){t.isHandled=true}))}))};e["a"]=r},lnqa:function(t,e,i){"use strict";var a=i("b5IE");var n=i("cQOM");var s=i("WoAn");var r=i("MoEg");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function c(t,e,i){e&&l(t.prototype,e);i&&l(t,i);return t}var h=function(){function t(e,i){o(this,t);this.x=e||0;this.y=i||0}c(t,[{key:"clone",value:function e(){return new t(this.x,this.y)}},{key:"add",value:function t(e){this.x+=e.x;this.y+=e.y}},{key:"dot",value:function t(e){return this.x*e.x+this.y*e.y}},{key:"length",value:function t(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]);return t}();h.add=function(t,e){return t.clone().add(e)};var u=h;var d=["top","left","bottom","right"];var f={top:"left",left:"bottom",bottom:"right",right:"top"};var p={top:"right",left:"top",bottom:"left",right:"bottom"};function v(t,e,i,a,n,s,r){this.cx=t;this.cy=e;this.innerRadius=i;this.radius=a;this.radianOffset=(r<0?r+2*Math.PI:r)%(2*Math.PI);this.start=n;this.start-=this.start>Math.PI?2*Math.PI:0;this.end=s;this.end-=this.end>Math.PI?2*Math.PI:0;this.arcCenter=(n+s)/2%(2*Math.PI);this.x1=t+a*Math.cos(this.start+this.radianOffset);this.y1=e+a*Math.sin(this.start+this.radianOffset);this.x2=t+a*Math.cos(this.end+this.radianOffset);this.y2=e+a*Math.sin(this.end+this.radianOffset);this.x3=t+i*Math.cos(this.start+this.radianOffset);this.y3=e+i*Math.sin(this.start+this.radianOffset);this.x4=t+i*Math.cos(this.end+this.radianOffset);this.y4=e+i*Math.sin(this.end+this.radianOffset)}v.prototype={getDistance:function t(e,i,a,n){var s=Math.abs(e-a);var r=Math.abs(i-n);var o=Math.sqrt(Math.pow(s,2)+Math.pow(r,2));return o},getAngle:function t(e,i,a,n){var s=e-a;var r=i-n;var o=Math.atan2(r,s)-this.radianOffset;o=o<0?o+2*Math.PI:o;o=o>Math.PI?o-2*Math.PI:o;return o},pointInside:function t(e,i){var a=this.getAngle(e,i,this.cx,this.cy);var n=this.getDistance(e,i,this.cx,this.cy);var s=this.start;var r=this.end;if(n>this.radius||n<this.innerRadius)return false;if(a>=s&&a<=r)return true;if(s>r&&(a<=r||a>=s))return true;return false},getDirection:function t(e){e+=Math.PI/4;e<0&&(e+=2*Math.PI);e%=2*Math.PI;var i=3;e>=1.5*Math.PI?i=0:e>=Math.PI?i=1:e>=Math.PI/2&&(i=2);return d[i]},getSecondaryDirection:function t(e){var i=this.getDirection(e);e+=Math.PI/4;return e%(Math.PI/2)>Math.PI/4?p[i]:f[i]},getPoints:function t(){var e=[];e.push({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},{x:this.x3,y:this.y3},{x:this.x4,y:this.y4});return e},getBoundingRect:function t(){var e=Math.min(Math.min(this.x1,this.x2),Math.min(this.x3,this.x4));var i=Math.min(Math.min(this.y1,this.y2),Math.min(this.y3,this.y4));var a=Math.max(Math.max(this.x1,this.x2),Math.max(this.x3,this.x4))-e;var n=Math.max(Math.max(this.y1,this.y2),Math.max(this.y3,this.y4))-i;return new r["a"](e,i,a,n)},getRelevantPosition:function t(){var e=this.cx+this.radius*Math.cos(this.arcCenter+this.radianOffset);var i=this.cy+this.radius*Math.sin(this.arcCenter+this.radianOffset);var a=this.getDirection(this.arcCenter+this.radianOffset);var n=this.getSecondaryDirection(this.arcCenter+this.radianOffset);return{pos:{x:e,y:i},direction:[a,n].concat(n===f[a]?[p[a],f[n]]:[f[a],p[n]])}},intersectsWith:function t(e){return this.intersectsLine(new n["a"](e.x,e.y,e.x+e.width,e.y))||this.intersectsLine(new n["a"](e.x+e.width,e.y,e.x+e.width,e.y+e.height))||this.intersectsLine(new n["a"](e.x,e.y+e.height,e.x+e.width,e.y+e.height))||this.intersectsLine(new n["a"](e.x,e.y,e.x,e.y+e.height))},intersectsLine:function t(e){if(this.pointInside(e.x1,e.y1)||this.pointInside(e.x2,e.y2))return true;if(e.intersectsLine(new n["a"](this.x1,this.y1,this.x4,this.y4))||e.intersectsLine(new n["a"](this.x3,this.y3,this.x2,this.y2)))return true;var i=new s["a"](this.cx,this.cy,this.innerRadius);if(this.innerRadius>0&&i.pointInside(e.x1,e.y1)&&i.pointInside(e.x2,e.y2))return false;var a=new u(e.x2-e.x1,e.y2-e.y1);var r=new u(e.x1-this.cx,e.y2-this.cy);var o=a.dot(a);var l=2*r.dot(a);var c=r.dot(r)-this.radius*this.radius;var h=l*l-4*o*c;var d;var f=[];if(h<0)return false;h=Math.sqrt(h);var p=(-l-h)/(2*o);var v=(-l+h)/(2*o);p>=0&&p<=1&&f.push({x:e.x1+p*a.x,y:e.y1+p*a.y});v>=0&&v<=1&&f.push({x:e.x1+v*a.x,y:e.y1+v*a.y});if(!f.length)return false;for(var m=0;m<f.length;m++){d=this.getAngle(f[m].x,f[m].y,this.cx,this.cy);if(d>=this.start&&d<=this.end)return true;if(this.start>this.end&&(d<=this.end||d>=this.start))return true}return false}};var m=v;var g=Math.PI/2;var x=3*Math.PI/2;var _=2*Math.PI;var y=a["a"].extend("Arc",{init:function t(e,i,a,n,s,r,o){this._super();m.apply(this,[e,i,a,n,s,r,o])},containsPoint:m.prototype.pointInside,intersectsLocalLine:m.prototype.intersectsLine,getLocalPoints:m.prototype.getPoints,intersectsLocalRect:function t(e){return m.prototype.intersectsWith.call(this,e)},getLocalBoundingRect:function t(){var e=[this.x1,this.x2,this.x3,this.x4];var i=[this.y1,this.y2,this.y3,this.y4];var a=(this.start+this.radianOffset)%_;var n=a+this.end-this.start;(a<_&&n>_||a<0&&n>0)&&e.push(this.cx+this.radius);a<g&&n>g&&i.push(this.cy+this.radius);a<Math.PI&&n>Math.PI&&e.push(this.cx-this.radius);(a<x&&n>x||a<-g&&n>-g)&&i.push(this.cy-this.radius);var s=Math.min.apply(null,e);var r=Math.min.apply(null,i);return{x:s,y:r,width:Math.max.apply(null,e)-s,height:Math.max.apply(null,i)-r}},getRelevantPosition:function t(){var e=this.getModelView();var i=m.prototype.getRelevantPosition.call(this);if(e){var a=this.cx+this.radius*Math.cos(this.arcCenter+this.radianOffset);var n=this.cy+this.radius*Math.sin(this.arcCenter+this.radianOffset);var s={x:a,y:n};s=e.transformPoint(s);i.pos.x=s.x;i.pos.y=s.y}return i},set:function t(){m.apply(this,[].slice.call(arguments));this.invalidateBounds()}});Object.keys(m.prototype).forEach((function(t){!y.prototype.hasOwnProperty(t)&&["pointInside","intersectsLine","getBoundingRect","getPoints","getRelevantPosition","intersectsRect"].indexOf(t)<0&&(y.prototype[t]=m.prototype[t])}));var b=e["a"]=y},n7pR:function(t,e,i){"use strict";var a=i("GF7R");var n=i("UV1h");var s={Theme:n["a"],TRANSPARENT_BLACK:"rgba( 0,0,0,0.2 )",TRANSPARENT_WHITE:"rgba( 255,255,255,0.7 )",LIGHT_GREY:"#ccc",DARK_GREY:"#666",BLACK:"#000",WHITE:"#fff",getInverse:function t(e){var i=new a["a"](e);var n=i.getAlpha();if(0===n)return this.BLACK;return i.isDark()?this.WHITE:this.BLACK},getContrastingGrey:function t(e){var i=new a["a"](e);var n=i.getAlpha();if(0===n)return this.DARK_GREY;return a["a"].getBestContrast(i,new a["a"](s.LIGHT_GREY),new a["a"](s.DARK_GREY))},getBestContrast:function t(e,i,n){return a["a"].getBestContrast(new a["a"](e),new a["a"](i),new a["a"](n))},getContrastingTransparent:function t(e){var i=new a["a"](e);var n=i.getAlpha();if(0===n||"none"===e)return this.TRANSPARENT_BLACK;return i.isDark()?this.TRANSPARENT_WHITE:this.TRANSPARENT_BLACK},getStyle:function t(e,i,a){e=e||"";this["".concat(e,"StyleService")]||(this["".concat(e,"StyleService")]=n["a"].initializeService("object.".concat(e)));return this["".concat(e,"StyleService")].getStyle(i,a)},getFontSize:function t(e,i,a){e=e||"";this["".concat(e,"StyleService")]||(this["".concat(e,"StyleService")]=n["a"].initializeService("object.".concat(e)));var s=this["".concat(e,"StyleService")];return s.scaleFontSize(s.getStyle(i,"fontSize"),a)}};e["a"]=s},nHjU:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("sWge");var r=i("Nc9l");var o=i("8fQa");function l(t,e){var i;this._validating=true;if(this._invalidatedProperties&&(!t||t&&t.includes("properties"))){i=h.call(this);i&&"function"===typeof i.then&&this._pendingDfds.push(i)}if(this._invalidatedDisplay&&(!t||t&&t.includes("display"))){i=c.call(this);i&&"function"===typeof i.then&&this._pendingDfds.push(i)}this._validating=false;this._invalidated=this._invalidatedDisplay||this._invalidatedProperties;if(this._invalidated){if(!t){var a=this;var n=this.dfd;this._timer=o["a"].request((function(){a._validate(null,n)}))}}else if(this._pendingDfds.length){s["a"].all(this._pendingDfds).then((function(){e.__qvState=1;e.resolve()})).catch((function(t){false}));this._pendingDfds=[]}else{e.__qvState=1;e.resolve()}}function c(){var t=this._updateDisplay();this._invalidatedDisplay=false;this.__invalidators.display=[];return t}function h(){var t=this._updateProperties();this._invalidatedProperties=false;this.__invalidators.properties=[];return t}function u(){if(!this._invalidated&&!this._validating&&!this._released){var t=this;this._invalidated=true;var e=Object(s["a"])();e.__qvState=0;e.__id=++this._dfdCount;this.dfd=e;this._timer=o["a"].request((function(){t._validate(null,e)}))}if(this.dfd)return this.dfd.promise;return}var d=r["a"].extend("Invalidatable",{init:function t(){this._super();this.__invalidators={size:[],display:[],properties:[]};this._pendingDfds=[];this._dfdCount=0},invalidate:function t(){if(this._released)return s["a"].reject();return u.call(this)},invalidateProperties:function t(e){if(this._released)return s["a"].reject();if(!this._invalidatedProperties){this._invalidatedProperties=true;u.call(this)}this.__invalidators.properties.push(e);return this.dfd.promise},invalidateDisplay:function t(e){if(this._released)return s["a"].reject();if(!this._invalidatedDisplay){this._invalidatedDisplay=true;u.call(this)}this.__invalidators.display.push(e);return this.dfd.promise},validateNow:function t(){this._invalidated=true;this.updateNow();return this},updateNow:function t(e){if(this._invalidated&&!this._validating){var i=e&&e.includes("display")===this._invalidatedDisplay;var a=e&&e.includes("properties")===this._invalidatedProperties;if(!e||i&&a){o["a"].cancel(this._timer);this._timer=null}this._validate(e,this.dfd)}return this},_update:function t(){return this},_updateDisplay:function t(){},_updateProperties:function t(){},cancel:function t(){o["a"].cancel(this._timer);this._invalidatedProperties=false;this.__invalidators.properties=[];this._invalidatedDisplay=false;this.__invalidators.display=[];this._invalidated=false;if(this.dfd){this.dfd.__qvState=2;this.dfd.reject()}},release:function t(){this._released=true;this.cancel();this.dfd=null},_validate:function t(e,i){l.call(this,e,i)}});var f=i("4nJ1");function p(t){p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return p(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function g(t,e,i){e&&m(t.prototype,e);i&&m(t,i);return t}var x=function(){function t(e,i,a,n){v(this,t);this.namespace=".transitionhelper";this._updateCallback=e;this._endCallback=i;this._transitionTime=a||500;this._scope=n;this._inAnimation=false;this._transitionProgress=0;this._lastFrame=false;this._animationCallback=function(){return null};this._initiateAnimation=true;this._transitionEnabled=true;this._transitionDelay=0;this._transitionCurve=""}g(t,[{key:"transition",value:function t(e,i,a,n,r,o){var l=this;var c=Object(s["a"])();this._oldValues=e;this._currentValues=i;this._newValues=a;this._updateCallback=r;this._endCallback=n;this._scope=o;b.apply(this,[e,i]);this._initiateAnimation=true;this._inAnimation||this._lastFrame?c.resolve():this._transitionDelay>0?this._transitionTimeout=setTimeout((function(){M.apply(l,[e,i,a,c])}),this._transitionDelay):M.apply(this,[e,i,a,c]);return c.promise}},{key:"clear",value:function t(){clearInterval(this._animationCallback);clearTimeout(this._transitionTimeout);this._inAnimation=false;this._lastFrame=true;this._transitionProgress=1}},{key:"setTransitionTime",value:function t(e){this._transitionTime=e}},{key:"setDelay",value:function t(e){this._transitionDelay=e}},{key:"setTransitionCurve",value:function t(e){this._transitionCurve=e}}],[{key:"checkEqual",value:function e(i,a){for(var n in a){if(!(n in i))return false;if(p(a[n])!==p(i[n]))return false;if(Array.isArray(a[n])){if(!t.checkEqual(i[n],a[n]))return false}else if(a[n]!==i[n]&&void 0!==i[n]&&!("number"===typeof a[n]&&"number"===typeof i[n]&&Number.isNaN(+a[n])&&Number.isNaN(+i[n])))return false}return true}}]);return t}();function _(t,e,i,a){b.apply(this,[t,e]);var n=false;var s=this;var r=x.checkEqual(t,i);for(var o in i)void 0===t[o]&&(n=true);if(r){s._endCallback&&s._endCallback.call(s._scope);a.resolve();return}if(n){f["a"].extend(e,i);f["a"].extend(t,i);s._endCallback&&s._endCallback.call(s._scope);a.resolve();return}var l=this._transitionTime;var c=Date.now();this._inAnimation=true;this._initiateAnimation=false;this._transitionProgress=0;f["a"].extend(e,y(t,e,i,0));this._animationCallback=setInterval((function(){var n=(Date.now()-c)/l;var r;if(n>1){clearInterval(s._animationCallback);f["a"].extend(e,y(t,e,i,1));s._updateCallback&&s._updateCallback.call(s._scope);s._inAnimation=false;s._lastFrame=true;s._transitionProgress=1}else{switch(s._transitionCurve){case"linear":r=n;break;case"easeout":r=Math.sin(Math.PI*n/2);break;case"easein":r=1-Math.cos(Math.PI*n/2);break;default:r=(1+Math.cos(Math.PI*(1+n)))/2;break}s._transitionProgress=r;f["a"].extend(e,y(t,e,i,r));s._updateCallback&&s._updateCallback.call(s._scope)}if(n>1){e=f["a"].extend({},i);s._endCallback.call(s._scope);a.resolve()}}),15)}function y(t,e,i,a){var n;var s=function t(e,s){f["a"].extend(e,y(e,i[n][s],a))};var r=function t(e,i,s){i[n]=y(e[n],i[n],s[n],a)};if(a<=0)return t;if(a>=1)return i;for(n in t){if(!t&&i){void 0!==i.opacity&&(e.opacity=a);e=f["a"].extend(e,i);continue}if(t&&!i){void 0!==t.opacity&&(e.opacity=1-a);continue}t[n]instanceof Array?t[n].forEach(s):Number.isNaN(+t[n])&&t[n]instanceof Object&&r(t,e,i);t[n]&&!i[n]&&(e[n]=i[n]);if(null===t[n]||null===i[n]||Number.isNaN(+t[n])||Number.isNaN(+i[n]))continue;e[n]=t[n]*(1-a)+i[n]*a}return e}function b(t,e){f["a"].extend(t,e);clearInterval(this._animationCallback);this._inAnimation=false;this._lastFrame=false}function M(t,e,i,a){this._inAnimation||this._initiateAnimation&&this._transitionEnabled?_.call(this,t,e,i,a):a.resolve()}var w=x;var S=i("MoEg");var D=i("lnqa");var A=i("qZHi");function k(t){k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return k(t)}function C(t){if(!this._$renderAreaWrap)return;this.containerRect=new S["a"](this.rect.x*this.layoutToContainerRatios.x||1,this.rect.y*this.layoutToContainerRatios.y||1,this.rect.width*this.layoutToContainerRatios.x||1,this.rect.height*this.layoutToContainerRatios.y||1);this.container.style.left="".concat(this.containerRect.x,"px");this.container.style.top="".concat(this.containerRect.y,"px");this.container.style.width="".concat(this.containerRect.width,"px");this.container.style.height="".concat(this.containerRect.height,"px");var e=this.isVisible(t)&&0!==this.rect.width&&0!==this.rect.height?"block":"none";this.container.style.display!==e&&(this.container.style.display=e)}function q(t,e){return w.checkEqual(t,e)}function L(t){if(!t)return"";t=t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())}));return t.replace(/^-/,"")}var P=d.extend("ChartComponent",{init:function t(e,i,a){this._super();this.testId=a;this.options=n.a.extend(true,{},{dock:"center",show:true,relevantSize:0,showFlag:this.ShowFlags.SPARK,components:{}},i);this.rect=new S["a"];this._transitionHelper=new w;this._transitionHelper.setTransitionCurve("easein");this._oldProperties={};this._currentProperties={};this._transitionProperties={};this._useTransition=false;this.outerRect=new S["a"];this.containerRect=new S["a"];this.layoutToContainerRatios={x:1,y:1};this.renderers={};this.dock=this.options.dock;this.show=this.options.show;this.isMini=this.options.isMini;this.relevantSize=this.options.relevantSize;this.showFlag=this.options.showFlag;this.layoutOrder=this.options.order||1;this.reductionOrder=this.options.reductionOrder;this.parentContainer=e;this.components=this.options.components;this.selectionIdentifier=this.options.label;this._selectionIndices=[0];this.chartFormatter=null;this.measureFormatters=[];this._globalAlpha=1;this._hasValidData=false;this._createRenderArea();try{var s=i&&i.tcl?i.tcl:L(this.constructor.name);s&&this._$renderAreaWrap[0].setAttribute("tcl",s)}catch(t){}this.chartScale=1;this._edgeBleed={top:0,bottom:0,left:0,right:0}},ShowFlags:{SPARK:1,XSMALL:2,SMALL:4,MEDIUM:8,FULL:16},setData:function t(e){this._data=e;return this.invalidateProperties("ChartComponent.setData")},getTransformedShape:function t(e){var i;var a=this.layoutToContainerRatios.x||1;var n=this.layoutToContainerRatios.y||1;if(e instanceof S["a"])i=new S["a"](e.x*a,e.y*n,e.width*a,e.height*n);else if(e instanceof D["a"]){var s=e.getModelView();var r={x:e.cx*a,y:e.cy*n};s&&(r=s.transformPoint(r));i=new D["a"](r.x,r.y,Math.min(a,n)*e.innerRadius,Math.min(a,n)*e.radius,e.start,e.end,e.radianOffset)}return i},getTransformedPoint:function t(e,i){return{x:e*this.layoutToContainerRatios.x||1,y:i*this.layoutToContainerRatios.y||1}},getOriginalPoint:function t(e,i){return{x:e/this.layoutToContainerRatios.x||1,y:i/this.layoutToContainerRatios.y||1}},setLayoutMode:function t(e){if(this._layoutMode===e)return;this._layoutMode=e;var i=/\s*qv-layout-\S+\s*/g;var a=this._layoutMode?" qv-layout-".concat(A["a"].getLayoutModeKey(e)):"";this.container.className.match(i)?this.container.className=this.container.className.replace(/\s*qv-layout-\S+/g,a):this.container.className+=a;this.invalidateDisplay("ChartComponent.setLayoutMode")},getLayoutMode:function t(){return this._layoutMode},setVerticalLayoutMode:function t(e){this._verticalLayoutMode=e},setHorizontalLayoutMode:function t(e){this._horizontalLayoutMode=e},setSelectableShapes:function t(e){this._selectableShapes=e},getSelectableShapes:function t(){return this._selectableShapes||[]},getSelectedCacheItems:function t(){var e;var i=this._selectableShapes?this._selectableShapes.length:0;var a=[];for(e=0;e<i;e++)this._selectableShapes[e].selected&&a.push(this._selectableShapes[e]);return a},getRect:function t(){return this.rect},setRect:function t(e,i,a,n){this.rect.set(e,i,a,n)},setUseTransition:function t(e){this._useTransition=e},getUseTransition:function t(){return this._useTransition},getTransitionHelper:function t(){return this._transitionHelper},setOuterRect:function t(e,i,a,n){this.outerRect.set(e,i,a,n)},setLayoutToContainerRatios:function t(e,i){this.layoutToContainerRatios={x:e,y:i}},setContainerRect:function t(e,i,a,n){this.containerRect.set(e,i,a,n)},setSelectionIndices:function t(e){if(!e||!(e instanceof Array))throw new Error("invalid input, selectionsIndices has to be an Array");this._selectionIndices=e},getSelectionIndices:function t(){return this._selectionIndices},setSelectionLocked:function t(e){this._selectionLocked=e},isSelectionLocked:function t(e){e=e||this._data;var i=this.getSelectionIndices();if(!e||!Array.isArray(i)||!i.length)return this._selectionLocked;return!e.qHyperCube.qDimensionInfo.filter((function(t,e){return-1!==i.indexOf(e)}),this).some((function(t){return true!==t.qLocked}))},setYMirrorMode:function t(e){this.yMirrorMode=e;this.readDirection=this.yMirrorMode?"rtl":"ltr"},setDock:function t(e){switch(e){case"left":case"top":case"right":case"bottom":case"center":break;default:throw new Error("".concat(e," invalid parameter"))}this.options.dock=e;this.dock=e},getOppositeDock:function t(){var e=this.options.dock;switch(e){case"left":return"right";case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"center":return"center";default:throw new Error("".concat(e," invalid parameter"))}},isHorizontal:function t(){var e=this.options.dock;switch(e){case"top":case"bottom":return true;default:return false}},isVertical:function t(){var e=this.options.dock;switch(e){case"left":case"right":return true;default:return false}},showComponent:function t(){this.show=this.options.show;if(this.renderers)for(var e in this.renderers)this.renderers[e].show()},hideComponent:function t(){this.show=false;if(this.renderers)for(var e in this.renderers)this.renderers[e].hide()},getFormatter:function t(){return this._formatter||this.measureFormatters[0]||{format:function t(e){return e.toString()}}},isVisible:function t(e){void 0===e&&(e=this._layoutMode);var i=this.showFlag;var a=e;if("object"===k(i)){"whenVertical"in i&&(i=this.isVertical()?i.whenVertical:i.whenHorizontal);if("vertical"in i)return this.show&&!!(i.vertical&this._verticalLayoutMode)&&!!(i.horizontal&this._horizontalLayoutMode)}return this.show&&!!(i&a)},setHasValidData:function t(e){this._hasValidData=e},hasValidData:function t(){return this._hasValidData},calculateRelevantSize:function t(){this.relevantSize=this.options.relevantSize},reduceLayoutRect:function t(e){switch(this.dock){case"top":e.y+=this.relevantSize;e.height-=this.relevantSize;break;case"bottom":e.height-=this.relevantSize;break;case"left":e.x+=this.relevantSize;e.width-=this.relevantSize;break;case"right":e.width-=this.relevantSize;break;default:break}},insertAdjacentTo:function t(e,i){switch(this.dock){case"top":this.rect.x=e.x;this.rect.y=e.y-this.relevantSize;this.rect.width=e.width;this.rect.height=this.isVisible(this._layoutMode)?this.relevantSize:0;if(i){e.y-=this.relevantSize;e.height+=this.relevantSize}break;case"bottom":this.rect.x=e.x;this.rect.y=e.getBottom();this.rect.width=e.width;this.rect.height=this.isVisible(this._layoutMode)?this.relevantSize:0;i&&(e.height+=this.relevantSize);break;case"left":this.rect.x=e.x-this.relevantSize;this.rect.y=e.y;this.rect.width=this.isVisible(this._layoutMode)?this.relevantSize:0;this.rect.height=e.height;if(i){e.x-=this.relevantSize;e.width+=this.relevantSize}break;case"right":this.rect.x=e.getRight();this.rect.y=e.y;this.rect.width=this.isVisible(this._layoutMode)?this.relevantSize:0;this.rect.height=e.height;i&&(e.width+=this.relevantSize);break;case"center":this.rect.x=e.x;this.rect.y=e.y;this.rect.width=e.width;this.rect.height=e.height;break;default:break}},_updateProperties:function t(){return this._transition()},_updateDisplay:function t(){if(!this.hasValidData())return this.clear();if(this.isVisible(this._layoutMode)&&this.rect.width>0&&this.rect.height>0)return this.paint(this._layoutMode,this._data);return s["a"].resolve()},updateSize:function t(){C.call(this,this._layoutMode);for(var e in this.renderers){this.renderers[e].setDimensions(0,0,this.rect.width,this.rect.height);this.renderers[e].setDimensionsToContainerRatio(this.layoutToContainerRatios.x,this.layoutToContainerRatios.y)}this._windowSizeMultiplier=Math.min(Math.min(this.rect.width,this.rect.height)/600,1)},_transition:function t(){if(this._useTransition)if(q(this._currentProperties,this._transitionProperties))this._onAnimatitonEnd();else{this._inTransition=true;this._transitionHelper.transition(this._oldProperties,this._currentProperties,this._transitionProperties,this._onAnimatitonEnd,this._updateDisplay,this)}else{n.a.extend(this._currentProperties,this._transitionProperties);n.a.extend(this._oldProperties,this._transitionProperties);this.invalidateDisplay("onAnimatitonEnd")}},paint:function t(){},setGlobalOpacity:function t(e,i){this._globalAlpha=e;i||this.invalidateDisplay("ChartComponent.setGlobalOpacity")},_createRenderArea:function t(){if(!this.parentContainer)return;this.container=document.createElement("div");this._$renderAreaWrap=n()(this.container);this._$renderAreaWrap.attr("tid",this.testId);this._$renderAreaWrap.css({position:"absolute"}).addClass("qv-chart-component");this.parentContainer.appendChild(this.container)},_onAnimatitonEnd:function t(){this._inTransition=false;this._oldProperties=n.a.extend(true,{},this._transitionProperties);this.invalidateDisplay("onAnimatitonEnd")},invalidateProperties:function t(e){return this._super(e).catch((function(t){false}))},invalidateDisplay:function t(e){return this._super(e).catch((function(t){false}))},release:function t(){this._super();if(this.renderers)for(var e in this.renderers)this.renderers[e].release();this.container=null;this._$renderAreaWrap=null;this._selectableShapes=null;this._transitionHelper.clear()},clear:function t(){var e=[];if(this.renderers)for(var i in this.renderers)e.push(this.renderers[i].clear());return s["a"].all(e)},on:function t(){this._on=true},off:function t(){this._on=false}});var I=e["a"]=P},pSod:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("Z9ZH");var r=i.n(s);var o=i("mWu2");var l=i("G1wx");o["default"].directive("qvSelectionsToggleDimensionValue",["$parse",function(t){return{restrict:"A",link:function e(i,a,s){var o=t(s.qvSelectionsToggleDimensionValue)();var l=o.selector;var c=".".concat(i.$id,"-toggle-dimension-value");var h=o.itemKey||"cell";r()(a[0]).tap({id:c,options:{preventDefault:false},end:function t(e){var a=n()(e.target).closest(l);if(!a.length)return;if(i.$eval(s.qvSelectionsExcludeToggleDimensionValue,{$event:e}))return;var r=a.scope()[h];if(!r||!r.isDimensionValue)return;if(r.locked){i.$eval(s.qvSelectionsSelectWhileLocked);return}i.$apply((function(){var t={$event:e};t[h]=r;i.$eval(s.qvSelectionsOnToggleDimensionValue,t)}))}});i.$on("$destroy",(function(){r()(a[0]).off("*",c)}))}}}]);o["default"].directive("qvSelectionsMultiselect",["$parse",function(t){return{restrict:"A",controller:function t(){},link:function e(i,a,s,o){var c=t(s.qvSelectionsMultiselect)();var h=c.selector;var u=c.itemKey||"cell";var d="".concat(i.$id,"-multiselect");var f="".concat(i.$id,"-2finger-multiselect");var p;var v;var m;var g;function x(){r()(a[0]).tap({id:d,options:{preventDefault:false},start:function t(e){m=n()(e.target).closest(h)}});r()(a[0]).swipe({id:d,options:{radiusThreshold:4,preventDefault:false},start:function t(e){if(!l["a"].isMouse(e)||!m.length){this.cancel();return}var a=m.scope()[u];if(!a.isDimensionValue){this.cancel();return}if(a.locked){i.$eval(s.qvSelectionsSelectWhileLocked);this.cancel();return}g=a;var n={$event:e};n[u]=a;i.$apply(i.$eval(s.qvSelectionsStartMultiselect,n))},update:function t(e){var a=n()(e.target).closest(h);if(!a.length)return;var r=a.scope()[u];i.$apply(i.$eval(s.qvSelectionsUpdateMultiselect,{start:g,current:r,dataColIx:r.dataColIx}))},end:function t(e){i.$apply(i.$eval(s.qvSelectionsEndMultiselect,{$event:e}))}});return function(){r()(a[0]).off("*",d)}}function _(){r()(a[0]).tap({id:f,options:{touches:2,preventDefault:false},end:function t(e,a){var r=a.pagePoints[0];var o=a.pagePoints[1];var l;var c=r?n()(document.elementFromPoint(r.x,r.y)):void 0;var d=o?n()(document.elementFromPoint(o.x,o.y)):void 0;var f=c?c.closest(h).scope():void 0;var p=d?d.closest(h).scope():void 0;var v=f?f[u]:void 0;var m=p?p[u]:void 0;if(!v||!m||!v.isDimensionValue||!m.isDimensionValue)return;if(v.locked||m.locked){i.$eval(s.qvSelectionsSelectWhileLocked);return}i.$apply((function(){l={offsetLeft:c[0].offsetLeft,width:c[0].clientWidth,$event:e};l[u]=v;i.$eval(s.qvSelectionsStartMultiselect,l);i.$eval(s.qvSelectionsUpdateMultiselect,{start:v,current:m,dataColIx:v.dataColIx});i.$eval(s.qvSelectionsEndMultiselect,{$event:e})}))}});return function(){r()(a[0]).off("*",f)}}o.on=function(){p||(p=x());v||(v=_())};o.off=function(){if(p){p();p=void 0}if(v){v();v=void 0}};i.$watch("interactive",(function(t){if(void 0===t)return;t?o.on():o.off()}));i.$on("$destroy",(function(){o.off()}))}}}])},plXO:function(t,e,i){"use strict";var a=i("qIEf");var n=i.n(a);var s=i("sWge");var r=i("SOxp");var o=i("Q5XB");var l=i("MoEg");var c=i("+GbC");var h=o["a"].extend("Stage",{init:function t(){this._super();this._stage=this;this._dimensions=new l["a"](0,0,0,0);c["a"].create(this,"Invalid")},invalidateObject:function t(e){this.Invalid.emit(e);return this},destroy:function t(){this._super();c["a"].release(this)}});var u=h;var d=i("EDQw");var f=r["a"].extend("Renderer",{init:function t(){this._stage=new u;this._stageBinding=function(t){this.invalidateObject(t)}.bind(this);this._stage.Invalid.bind(this._stageBinding);this.scaling={x:1,y:1};this._size=new l["a"];this._extendedSize=new l["a"]},find:function t(e){return d["a"].find(e,this._stage)},setDimensions:function t(e,i,a,n){this._size.set(e,i,a,n)},setDimensionsToContainerRatio:function t(e,i){this.scaling={x:e,y:i}},release:function t(){this._stage&&this._stage.Invalid&&this._stage.Invalid.unbind(this._stageBinding);this._stage.destroy();this._stageBinding=null},render:function t(){},clear:function t(){},invalidateObject:function t(){}});Object.defineProperties(f.prototype,{stage:{get:function t(){return this._stage}}});var p=f;var v=i("wkj2");var m=i("8fQa");var g=i("rwE6");var x=i("022E");var _=i("djNn");var y={displayObject:_["a"],render:function t(e,i,a){if(!a)return;e.beginPath();e.moveTo(this.x1,this.y1);e.lineTo(this.x2,this.y2);e.stroke()}};var b=i("ZM1a");var M=i("lnqa");var w={displayObject:M["a"],render:function t(e,i,a){e.beginPath();if(0===this.innerRadius){e.arc(this.cx,this.cy,this.radius,this.start+this.radianOffset,this.end+this.radianOffset,false);e.lineTo(this.innerRadius*Math.cos(this.end+this.radianOffset)+this.cx,this.innerRadius*Math.sin(this.end+this.radianOffset)+this.cy)}else if(this.end-this.start===2*Math.PI){e.arc(this.cx,this.cy,this.radius,this.start+this.radianOffset,this.end+this.radianOffset,false);e.moveTo(this.cx+this.innerRadius*Math.cos(this.radianOffset+this.start),this.cy+this.innerRadius*Math.sin(this.radianOffset+this.start));e.arc(this.cx,this.cy,this.innerRadius,this.end+this.radianOffset,this.start+this.radianOffset,true)}else{e.arc(this.cx,this.cy,this.radius,this.start+this.radianOffset,this.end+this.radianOffset,false);e.lineTo(this.innerRadius*Math.cos(this.end+this.radianOffset)+this.cx,this.innerRadius*Math.sin(this.end+this.radianOffset)+this.cy);e.arc(this.cx,this.cy,this.innerRadius,this.end+this.radianOffset,this.start+this.radianOffset,true);e.lineTo(this.radius*Math.cos(this.start+this.radianOffset)+this.cx,this.radius*Math.sin(this.start+this.radianOffset)+this.cy)}i&&e.fill();if(a){e.closePath();e.stroke()}}};var S=i("wdNe");var D=i("zjn0");var A=!D["a"].supportDirAuto();var k={displayObject:S["a"],render:function t(e,i,a){var n=this.x||0;var s=this.y||0;var r=this.lines||[];var o=r.length;var l=[];var c=this.lineHeight;var h=e.textAlign;var u="center"===h&&A;var d;var f;var p;n=this.getHorizontalAnchor();s=this.getVerticalAnchorFirstLine();i&&l.push("fillText");a&&(this.strokeFirst?l.unshift("strokeText"):l.push("strokeText"));if(!l.length)return;for(d=0;d<o;d++){f=D["a"].detectTextDirection(r[d]);e.canvas.dir=f;if(u&&"rtl"===f){e.textAlign="left";p=n-e.measureText(r[d]).width/2}else{e.textAlign=h;p=n}e[l[0]](r[d],p,s);l[1]&&e[l[1]](r[d],p,s);s+=c}e.textAlign=h}};var C=1;var q=[g["a"],x["a"],y,b["a"],w,k];var L={};var P=q.length;var I=document.createElement("canvas");var T=I.getContext("2d");var O=["fill","stroke","strokeWidth","opacity","font","align","baseline","lineJoin","lineCap"];var N=new RegExp(O.join("|"));var E=O.length;var R={fill:"fillStyle",stroke:"strokeStyle",strokeWidth:"lineWidth",opacity:"globalAlpha",align:"textAlign",baseline:"textBaseline"};var V={PENDING:0,RESOLVED:1,REJECTED:2};var z={};var F=[];function j(t,e){F.length>100&&delete z[F.shift()];F.push(t);z[t]=e}function H(){var t={dfd:Object(s["a"])(),state:V.PENDING};var e=t.dfd.promise;e.then((function(){t.state=V.RESOLVED}),(function(){t.state=V.REJECTED}));return t}function B(t,e,i,a,n){return a+n*(t-e)/i}var $=0;var W=p.extend("CanvasRenderer",{init:function t(e,i){this._super();this._id=++$;this._canvas=document.createElement("canvas");this._canvas.width=this._size.width;this._canvas.height=this._size.height;this._canvas.style.position="absolute";this._canvas.style.top="0";this._canvas.style.left="0";this._bufferCanvas=document.createElement("canvas");this._bufferCanvas.width=this._canvas.width;this._bufferCanvas.height=this._canvas.height;this._mvMatrix=new v["a"];this._wrapper=document.createElement("div");this._wrapper.style.position="relative";this._wrapper.style.left="0";this._wrapper.style.top="0";this._wrapper.appendChild(this._canvas);i&&i.name&&n()(this._wrapper).attr({tid:i.name});n()(this._wrapper).attr({tcl:"renderer"});this._wrapper.__do_not_use__renderer=this;this.container=e;this.container.appendChild(this._wrapper);this._isCompositingEnabled=true;this._invalidObjects=[];this._transformMatrix=new v["a"];this._storeNewImage=true},setDimensions:function t(e,i,a,n){this._super(e,i,a,n);this._wrapper.style.left="".concat(e,"px");this._wrapper.style.top="".concat(i,"px")},setCompositingEnabled:function t(e){this._isCompositingEnabled=e},getCompositingEnabled:function t(){return this._isCompositingEnabled},render:function t(e){if(this._rendering)return;this._resetImage();this._renderDfdObj&&this._renderDfdObj.state===V.PENDING||(this._renderDfdObj=H());if(e)this._invalidate(true,false);else{this._doClear=false;this._doRender=true;this._validate()}return this._renderDfdObj.dfd.promise},clear:function t(e){if(this._rendering)return;if(e)this._invalidate(false,true);else{this._doRender=false;this._doClear=true;this._validate()}},release:function t(){this._super();this._clearSchedule();n()(this._wrapper).removeData();this._bufferCanvas=null;this._canvas=null;if(this.container){this.container.removeChild(this._wrapper);this.container=null}},invalidateObject:function t(e){this._isCompositingEnabled&&this._invalidObjects.indexOf(e)<0&&this._invalidObjects.push(e);this.render(true)},transformScene:function t(e){this._transformMatrix=e.clone();this._invalidate(true,false);return this},translateScene:function t(e,i){this._transformMatrix.translate(e,i);this._invalidate(true,false);return this},scaleScene:function t(e,i,a){this._transformMatrix.translate(-e,-i);this._transformMatrix.scale(a,a);this._transformMatrix.translate(e,i);this._invalidate(true,false);return this},setAttribute:function t(e,i){var a;for(a in i)i.hasOwnProperty(a)&&(this._wrapper[e][a]=i[a])},getTextWidth:function t(e,i){return W.getTextWidth(e,i,this._canvas.getContext("2d"))},getFontHeight:function t(e){return W.getFontHeight(e,this._canvas.getContext("2d"))},_render:function t(){if(!this._canvas)return;this._rendering=true;var e=this._canvas;var i=e.getContext("2d");var a=this._mvMatrix;var n=[];var s=this._isCompositingEnabled&&!this._transformMatrix.isIdentity();var r=W.getDevicePixelToBackingStoreRatio();if(s&&this._storeNewImage){this._storeImage();this._storeNewImage=false}if(!this._updateSize()){if(this._isCompositingEnabled){n=this._getInvalidViews().filter((function(t){return!t.hasNaN()}));if(n.length&&s)n=[];else if(s){i.clearRect(0,0,e.width,e.height);n=n.concat(this._getInvalidImageParts()).filter((function(t){return!t.hasNaN()}))}}n.length||i.clearRect(0,0,e.width,e.height)}i.save();a.save();this.stage.matrix&&this.stage.matrix.identity();this.stage.scale(this.scaling.x,this.scaling.y);this.stage.translate(-this._extendedSize.x,-this._extendedSize.y);this.stage.translate(this._transformMatrix.elements[0][2],this._transformMatrix.elements[1][2]);i.setTransform(r,0,0,r,0,0);if(n.length){if(s){i.save();i.setTransform(1,0,0,1,0,0);this._patchImage();this._transformMatrix.identity();i.restore()}i.beginPath();n.forEach((function(t){i.rect(t.x,t.y,t.width,t.height)}));i.clip();i.clearRect(0,0,this._extendedSize.width,this._extendedSize.height)}if(!n.length){var o=new l["a"](0,0,this.scaling.x*this._extendedSize.width,this.scaling.y*this._extendedSize.height);n.push(o)}W._updateTransforms([this.stage],a,{});W._renderDisplayObjects(i,[this.stage],!!this._isCompositingEnabled&&n,r);a.restore();i.restore();this._invalidObjects=[];this._rendering=false},_updateSize:function t(){var e=this._canvas;var i=W.getDevicePixelToBackingStoreRatio();var a=this._extendedSize;this.edgeBleed?a.set(-this.edgeBleed.left,-this.edgeBleed.top,this._size.width+this.edgeBleed.left+this.edgeBleed.right,this._size.height+this.edgeBleed.top+this.edgeBleed.bottom):a.set(this._size.x,this._size.y,this._size.width,this._size.height);var n=new l["a"](Math.round(a.x*this.scaling.x),Math.round(a.y*this.scaling.y),Math.round(a.width*this.scaling.x),Math.round(a.height*this.scaling.y));var s=Math.round(i*n.width);var r=Math.round(i*n.height);this._canvas.style.left="".concat(n.x,"px");this._canvas.style.top="".concat(n.y,"px");if(e.width!==s||e.height!==r){e.width=s;e.height=r;e.style.width="".concat(n.width,"px");e.style.height="".concat(n.height,"px");this._bufferCanvas.width=s;this._bufferCanvas.height=r;return true}return false},_invalidate:function t(e,i){this._doRender=e||this._doRender;this._doClear=i||this._doClear;if(!this._invalidated){var a=this;this._invalidated=true;this._timer=m["a"].request((function(){a._validate()}),this._canvas)}},_validate:function t(){this._doClear&&!this._doRender?this._clear():this._doRender&&this._render();this._renderDfdObj&&this._renderDfdObj.state===V.PENDING&&this._renderDfdObj.dfd.resolve();this._clearSchedule()},_clear:function t(){this._canvas&&(this._canvas.width=this._canvas.width)},_clearSchedule:function t(){if(this._timer){m["a"].cancel(this._timer);this._timer=null}this._renderDfdObj&&this._renderDfdObj.state===V.PENDING&&this._renderDfdObj.dfd.reject();this._doRender=false;this._doClear=false;this._invalidated=false},_getInvalidViews:function t(){var e;var i=this._invalidObjects?this._invalidObjects.length:0;var a=new l["a"];var n=false;var s=false;var r=new l["a"];var o;var c;var h;var u;var d;var f;var p;var v;var m;var g;for(e=0;e<i;e++){o=this._invalidObjects[e].getVisualBounds();c=this._invalidObjects[e].rData.oldVisualBounds;if(!n&&o){h=o.x;d=o.x+o.width;u=o.y;f=o.y+o.height;n=true}else if(o){h=Math.min(h,o.x);d=Math.max(d,o.x+o.width);u=Math.min(u,o.y);f=Math.max(f,o.y+o.height)}if(!s&&c){p=c.x;m=c.x+c.width;v=c.y;g=c.y+c.height;s=true}else if(c){p=Math.min(p,c.x);m=Math.max(m,c.x+c.width);v=Math.min(v,c.y);g=Math.max(g,c.y+c.height)}}a.set(Math.floor(h)-1,Math.floor(u)-1,Math.ceil(d-h)+2,Math.ceil(f-u)+2);r.set(Math.floor(p)-1,Math.floor(v)-1,Math.ceil(m-p)+2,Math.ceil(g-v)+2);if(a.x!==r.x||a.y!==r.y||a.width!==r.width||a.height!==r.height)return[a,r];return[a]},_getInvalidImageParts:function t(){var e=[];var i=this._transformMatrix.elements[0][0];var a=this._transformMatrix.elements[0][2];var n=this._transformMatrix.elements[1][2];if(i&&i>1)e.push(new l["a"](0,0,0,0));else if(i&&i<1)e.push(new l["a"](0,0,0,0));else{0!==a&&this._size.width>Math.abs(a)&&e.push(new l["a"](a>0?0:this._size.width+a,0,Math.abs(a),this._size.height));0!==n&&this._size.height>Math.abs(n)&&e.push(new l["a"](0,n>0?0:this._size.height+n,this._size.width,Math.abs(n)))}return e},_storeImage:function t(){var e=this._bufferCanvas.getContext("2d");e.clearRect(0,0,this._bufferCanvas.width,this._bufferCanvas.height);e.drawImage(this._canvas,0,0)},_patchImage:function t(){var e=W.getDevicePixelToBackingStoreRatio();var i=this._transformMatrix.elements[0][0];if(1!==i){var a;var n;var s;var r;var o;var l;var c;var h;var u={x:0,y:this._size.height};var d={x:this._size.width,y:0};var f=this._transformMatrix.transformPoint(u);var p=this._transformMatrix.transformPoint(d);var v=p.x-f.x;var m=p.y-f.y;var g=f.x/v;var x=p.y/m;if(i>1){c=0;h=0;a=this._size.width;n=this._size.height;s=-g*this._size.width;r=x*this._size.height;o=this._size.width/i;l=this._size.height/i}else{s=0;r=0;o=this._size.width;l=this._size.height;a=this._size.width*i;n=this._size.height*i;c=g*a;h=-x*n}o*=e;l*=e;s*=e;r*=e;c*=e;h*=e;a*=e;n*=e;if(s>this._bufferCanvas.width||s+o<0||r>this._bufferCanvas.height||r+l<0)this._canvas.getContext("2d").drawImage(this._bufferCanvas,0,0,0,0,0,0,0,0);else{var _=Math.max(s,0);var y=Math.min(s+o,this._bufferCanvas.width);var b=B(_,s,o,c,a);var M=B(y,s,o,c,a);var w=y-_;var S=M-b;var D=Math.max(r,0);var A=Math.min(r+l,this._bufferCanvas.height);var k=B(D,r,l,h,n);var C=B(A,r,l,h,n);var q=A-D;var L=C-k;this._canvas.getContext("2d").drawImage(this._bufferCanvas,_,D,w,q,b,k,S,L)}}else this._canvas.getContext("2d").drawImage(this._bufferCanvas,this._transformMatrix.elements[0][2]*e,this._transformMatrix.elements[1][2]*e)},_resetImage:function t(){this._transformMatrix.identity();this._storeNewImage=true}});W.getFontHeightOfContext=function(t){return 1.5*t.measureText("m").width};W.getFontHeight=function(t,e){if("string"!==typeof t)throw new Error("CanvasRenderer.getFontHeight(): Input font is not a string");if(t in z)return z[t];var i;e=e||T;if(e.font!==t){e.save();e.font=t;i=1.5*e.measureText("m").width;e.restore()}else i=1.5*e.measureText("m").width;j(t,i);return i};W.getTextWidth=function(t,e,i){i=i||T;i.save();i.font=e;var a=void 0!==t?Math.ceil(i.measureText(t).width):0;i.restore();return a};W.getDevicePixelToBackingStoreRatio=function(){return(window.devicePixelRatio||1)/(T.webkitBackingStorePixelRatio||T.mozBackingStorePixelRatio||T.msBackingStorePixelRatio||T.oBackingStorePixelRatio||T.backingStorePixelRatio||1)};W.measureText=function(t,e,i){var a;i=i||T;if(e&&i.font!==e){i.save();i.font=e}var n=i.measureText(t).width;if(e in z)a=z[e];else{a=1.5*i.measureText("m").width;j(e,a)}e&&i.restore();var s=void 0!==t?{width:n,height:a}:{width:0,height:0};return s};W._renderDisplayObjects=function(t,e,i,a){var n;var s;var r;var o;var l=i?i.length:0;var c=[];var h=true;var u;var d=[];var f;s=e?e.length:0;for(n=0;n<s;n++){r=e[n];if(false===r.visible||false===r.data.isVisible)continue;if(l){h=false;for(u=0;u<l;u++)if(i[u].intersectsWith(r.getVisualBounds())){h=true;break}if(!h)continue}o=W._getRenderFn(e[n]);f=r.children.length>0;if("function"!==typeof o&&!f)continue;if(r.zIndex>0){c[r.zIndex]||(c[r.zIndex]={index:r.zIndex,objects:[]});c[r.zIndex].objects.push({object:r,renderFn:o,hasChildren:f});continue}W._renderObject(t,r,o,f,i,a)}c=c.filter((function(t){return t&&t.objects.length})).sort((function(t,e){return t.index-e.index}));for(n=0;n<c.length;n++){d=c[n].objects;s=d.length;for(u=0;u<s;u++)W._renderObject(t,d[u].object,d[u].renderFn,d[u].hasChildren,i,a)}};W._renderObject=function(t,e,i,a,n,s){var r;var o;var l;var c;var h;if("function"===typeof i){o=e.attr("strokeWidth");"undefined"===typeof o&&(o=1);l=!!e.attr("fill");c=!!e.attr("stroke")&&o>0}t.save();e.rData.stroke=c;e.rData.strokeWidth=o;if(n){h=e.getVisualBounds();e.rData.oldVisualBounds={x:h.x,y:h.y,width:h.width,height:h.height}}W._applyAttributes(t,e);if(e.rData.vmTransform){r=e.rData.vmTransform;t.setTransform(s*r[0][0],s*r[1][0],s*r[0][1],s*r[1][1],s*r[0][2],s*r[1][2])}if(e.clip){t.beginPath();t.rect(e.clip.x,e.clip.y,e.clip.width,e.clip.height);t.clip()}if(l||c){e.preRender&&e.preRender();i.apply(e,[t,l,c])}a&&W._renderDisplayObjects(t,e.children,n,s);t.restore()};W._registerRenderFn=function(t,e){var i;if("function"!==typeof t)throw new TypeError("First parameter must be a function");i="function"!==typeof e&&"function"===typeof e.constructor?e.constructor:e;i.__renderFnId="_".concat(C++);L[i.__renderFnId]=t};W._getRenderFn=function(t){var e=t.__renderFnId||(t.constructor?t.constructor.__renderFnId:void 0);if(e)return L[e];var i;for(i=0;i<P;i++)if(q[i].displayObject===t.constructor){W._registerRenderFn(q[i].render,t);return q[i].render}for(i=0;i<P;i++)if(t instanceof q[i].displayObject){W._registerRenderFn(q[i].render,t);return q[i].render}t.constructor.__renderFnId="does not exist";return};W._updateTransforms=function(t,e,i){var a;var n;var s;var r;var o;var l={};var c=t?t.length:0;for(o in i)N.test(o)&&(l[o]=i[o]);for(a=0;a<c;a++){n=t[a];n.clearModelView();if(n.matrix){e.save();e.multiply(n.matrix);n.rData.vmTransform=e.elements;n.rData.dirtyVMTransform=true}n.rData.inherited={};for(o in l)n.rData.inherited[o]=l[o];r=n.children;if(r&&r.length){for(s=0;s<E;s++)n.hasOwnProperty(O[s])&&(l[o]=n[o]);W._updateTransforms(r,e,l)}n.matrix&&e.restore()}};W.Gradient={LINEAR:0,RADIAL:1};W._applyAttributes=function(t,e){var i;var a;for(a=0;a<E;a++){i=O[a];i in e&&"undefined"!==typeof e[i]&&(("fill"===i||"stroke"===i)&&e[i]&&e[i].gradient?e[i].gradient.r?t[R[i]]=W._createGradient(t,e[i].gradient,W.Gradient.RADIAL)||"#000000":t[R[i]]=W._createLinearGradient(t,e[i].gradient)||"#000000":t[R[i]||i]=e[i])}};W._createLinearGradient=function(t,e){return W._createGradient(t,e,W.Gradient.LINEAR)};W._createGradient=function(t,e,i){var a;if(Number.isNaN(+e.x0)||Number.isNaN(+e.y0)||Number.isNaN(+e.x1)||Number.isNaN(+e.y1))return;a=i===W.Gradient.RADIAL?t.createRadialGradient(e.x0,e.y0,0,e.x1,e.y1,e.r):t.createLinearGradient(e.x0,e.y0,e.x1,e.y1);var n=e.limits.length;for(var s=0;s<n;s++)a.addColorStop(e.limits[s],e.colors[s]);return a};W.registerRenderObject=function(t){q.push(t);P=q.length};var U=e["a"]=W},qU3k:function(t,e,i){"use strict";var a=i("mWu2");var n=i("2Hli");var s=i("gl1R");var r=i("oxue");var o=i("fwzx");var l=i("KBmc");var c=i("6uJb");var h='<li class="em-item lui-list__item" qva-activate="alternativeItemClicked($event,item,alternative);">\n\t<i ng-if="alternative.hasIcon" class="em-item-icon lui-icon lui-icon--tick lui-list__aside" ng-class="{\'em-invisible\': !alternative.selected}"></i>\n\t<span class="lui-list__text lui-list__text--ellipsis" qva-direction x-dir-text="{{alternative.title()}}"  title="{{alternative.title()}}">{{alternative.title()}}&nbsp;</span>\n</li>';var u=i("USFI");var d=i("BcSl");function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function v(t,e,i){e&&p(t.prototype,e);i&&p(t,i);return t}a["default"].directive("hypercubeDataItem",[function(){return{restrict:"A",template:h,replace:true}}]);var m=function(){function t(e,i,a){f(this,t);this._props=e;this._app=i;this._hyperCubePath=a;this.libraryTitles={};this.cachingAlternativeTitleRetriever=u["a"].create()}v(t,[{key:"setProperties",value:function t(e){this._props=e;this.cachingAlternativeTitleRetriever.resetTitles()}},{key:"updateAlternativeItem",value:function t(e,i,a,s,r){var c=n["a"].getValue(this._props,s,[]);var h=n["a"].getValue(this._props,a,[]);var u=c[i.index];if(i.selected)return;i.original&&(u=n["a"].getValue(this._props,a,[])[i.index]);u.qAttributeExpressions=o["a"].moveById(e.data.qAttributeExpressions,u.qAttributeExpressions,o["a"].IDMAP.COLOR_BY_EXPRESSION);var f=[d["a"].CUSTOM.EXPRESSION,d["a"].CUSTOM.TITLE,d["a"].CUSTOM.DESCRIPTION,d["a"].CUSTOM.IMAGES];f.forEach((function(t){u.qAttributeExpressions=o["a"].moveAllById(e.data.qAttributeExpressions,u.qAttributeExpressions,t,"cId")}));var p;var v;var m;var g;if(r)for(p=0;p<r.length;p++){g=r[p];v=n["a"].getValue(h[e.index],g.path,[]);m=n["a"].getValue(c[i.index],g.path,[]);v&&v.hasOwnProperty(g.property)&&m&&m.hasOwnProperty(g.property)&&(m[g.property]=v[g.property])}c.splice(i.index,1,h[e.index]);h.splice(e.index,1,u);l["a"].colorByUpdater(this._props,"qHyperCubeDef.")}},{key:"getDimensionOptions",value:function t(e,i,a,n,r){var o=this;return e.concat(i).filter((function(t){return t.qDef.cId===a.qDef.cId||!s["a"].getDimensionLayout(t.qDef.cId,n,o._hyperCubePath)})).map((function(t){var n=o.cachingAlternativeTitleRetriever.getCachedDimensionTitle(t);o.cachingAlternativeTitleRetriever.getDimensionTitle(t,o._app).then((function(t){n=t}));return{id:t.qDef.cId,index:-1!==e.indexOf(t)?e.indexOf(t):i.indexOf(t),original:-1!==e.indexOf(t),ref:"dimensions",selected:t.qDef.cId===a.qDef.cId,hasIcon:r,title:function t(){return n}}}))}},{key:"getMeasureOptions",value:function t(e,i,a,n,r){var o=this;return e.concat(i).filter((function(t){return t.qDef.cId===a.qDef.cId||!s["a"].getMeasureLayout(t.qDef.cId,n,o._hyperCubePath)})).map((function(t){var n=o.cachingAlternativeTitleRetriever.getCachedMeasureTitle(t);o.cachingAlternativeTitleRetriever.getMeasureTitle(t,o._app).then((function(t){n=t}));return{id:t.qDef.cId,index:-1!==e.indexOf(t)?e.indexOf(t):i.indexOf(t),original:-1!==e.indexOf(t),ref:"measures",selected:t.qDef.cId===a.qDef.cId,hasIcon:r,title:function t(){return n}}}))}},{key:"getTitle",value:function t(e,i){var a=e.qLibraryId;var n=this;var s=c["default"].get(i?"Object.ErrorMessage.MissingDimension":"Object.ErrorMessage.MissingMeasure");function o(){if(i)return n._app.getDimensionList().then((function(t){return r["a"].findLibraryDimension(a,t)}));return n._app.getMeasureList().then((function(t){return r["a"].findLibraryMeasure(a,t)}))}if(a){if("undefined"!==typeof this.libraryTitles[a]){if(null===this.libraryTitles[a])return s;if("string"!==typeof this.libraryTitles[a])return"";return this.libraryTitles[a]}this.libraryTitles[a]=o().then((function(t){if(t){n.libraryTitles[a]=t.qData.title;return n.libraryTitles[a]}n.libraryTitles[a]=null;return s}));return this.libraryTitles[a]}return i?e.qDef.qFieldLabels[0]||e.qDef.qFieldDefs[0]:e.qDef.qLabel||e.qDef.qDef}}]);return t}();var g=e["a"]=m},qZHi:function(t,e,i){"use strict";var a={SPARK:1,XSMALL:3,SMALL:7,MEDIUM:15,FULL:31};var n=[[550,450,a.FULL],[400,220,a.MEDIUM],[300,150,a.SMALL],[150,75,a.XSMALL],[0,0,a.SPARK]];var s=[[450,a.FULL],[220,a.MEDIUM],[150,a.SMALL],[75,a.XSMALL],[0,a.SPARK]];var r=[[550,a.FULL],[400,a.MEDIUM],[300,a.SMALL],[150,a.XSMALL],[0,a.SPARK]];var o=n.length;function l(t,e){var i;for(i=0;i<o;++i)if(t>=n[i][0]&&e>=n[i][1])return n[i][2];return a.SPARK}function c(t){var e;for(e=0;e<o;++e)if(t>=s[e][0])return s[e][1];return a.SPARK}function h(t){var e;for(e=0;e<o;++e)if(t>=r[e][0])return r[e][1];return a.SPARK}function u(t){var e=Object.keys(a).filter((function(e){return a[e]===t}))[0];return e&&e.toLowerCase()||""}e["a"]={LayoutMode:a,getLayoutMode:l,getLayoutModeKey:u,getHorizontalLayoutMode:h,getVerticalLayoutMode:c}},rB9Y:function(t,e,i){"use strict";var a=i("5Pwf");var n=i("UbZW");var s=i.n(n);var r=i("sWge");var o={};function l(t){var e={};var i={keywords:[],keywordsAsLowerCase:[],functions:[],functionsAndCategories:[],notFunctions:[],bnfEntries:[],mapping:{}};function a(t){return t.replace(/\s+/g," ").replace(/\s+(\)|\]|,)/g,"$1").replace(/(\(|\[|,)\s+/g,"$1")}function n(){t.forEach(r);var e=[{qStr:"must_include",qBnfLiteral:true}];e.forEach(r)}function s(){i.functions.length<1&&n();function t(t,e){return{text:e,type:t}}var e=i.notFunctions.map(t.bind(null,"keyword"));var a=i.functions.map(t.bind(null,"function"));i.autocompleteList=e.concat(a)}function r(t){if(true===t.qBnfLiteral){-1===i.keywords.indexOf(t.qStr)&&i.keywords.push(t.qStr);if(t.qStr){i.keywordsAsLowerCase.push(t.qStr.toLowerCase());i.mapping[t.qStr.toLowerCase()]=t.qNbr;if(!t.qAggrFunc&&!t.qQvFunc){if(!t.qFieldFlag){-1===i.notFunctions.indexOf(t.qStr)&&i.notFunctions.push(t.qStr);e[t.qStr.toLowerCase()]="keyword"}}else{-1===i.functions.indexOf(t.qStr)&&i.functions.push(t.qStr);e[t.qStr.toLowerCase()]="function";i.functionsAndCategories.push({fglist:t.qFGList,func:t.qStr})}}}}function o(e){e=parseInt(e,10);if(i.bnfEntries[e])return i.bnfEntries[e];var a=t.filter((function(t){return parseInt(t.qNbr,10)===e}));i.bnfEntries[e]=a[0];return a[0]||false}function l(t){i.keywords.length<1&&n();t=t.toLowerCase();var e=i.mapping[t];return o(e)}function c(t){var e="";var i=o(t);t>=0&&t<=56?e=i.qStr||"":i&&(e=i.qStr||i.qName);return e}function h(t){if(t&&!t.signature){t.qBnf&&t.qBnf.length>0?t.signature=t.qBnf.map(c).join(" ").trim():t.qPNbr&&(t.signature=h(o(t.qPNbr)));t.signature=a(t.signature)}return t.signature||""}function u(){i.keywords.length<1&&n();return i.keywords}function d(){i.keywordsAsLowerCase.length<1&&n();return i.keywordsAsLowerCase}function f(){i.autocompleteList||s();return i.autocompleteList}function p(t){var e=l(t);return false!==e?h(e):""}function v(){return t.filter((function(t){return t.qHelpId&&t.qHelpId>0})).map((function(t){return t.qStr}))}function m(t){return"function"===e[t.toLowerCase()]}function g(t){var e;return(null===(e=l(t))||void 0===e?void 0:e.qAggrFunc)||false}function x(){return false}function _(){return false}function y(t){return!!e[t.toLowerCase()]}function b(){i.functions.length<1&&n();return i.functions}function M(){return i.functionsAndCategories}n();return{getBnfEntry:o,getLiteralString:c,getAllKeywords:u,getAllKeywordsAsLowerCase:d,getAutocompleteList:f,getKeywordsWithHelp:v,getSignatureFromKeyword:p,getFunctionTip:p,isFunction:m,isAggrFunction:g,isField:x,isKeyword:y,isVariable:_,getAllFunctions:b,getAllFunctionsAndCategories:M}}function c(t,e){var i="BNF_CACHE_DATA_".concat(t);var n="BNF_HASH_".concat(t);e=e||a["a"];return e.global.getBaseBNFHash(t).then((function(a){var o=a.qBnfHash;var c=new r["a"];var h=localStorage.getItem(n);var u=h===o;var d=u?localStorage.getItem(i):void 0;if(d)try{var f=JSON.parse(s.a.decompressFromUTF16(d));c.resolve(l(f));return c.promise}catch(t){}e.global.getBaseBNF(t).then((function(t){var e=t.qBnfDefs;localStorage.setItem(i,s.a.compressToUTF16(JSON.stringify(e)));localStorage.setItem(n,t.qBnfHash);c.resolve(l(e))}));return c.promise}))}function h(t){var e="BNF_STRING_CACHE_DATA_".concat(t);var i="BNF_STRING_HASH_".concat(t);return a["a"].global.getBaseBNFHash(t).then((function(n){var o=n.qBnfHash;var l=new r["a"];var c=localStorage.getItem(i);var h=c===o;var u=h?localStorage.getItem(e):void 0;if(u)try{var d=JSON.parse(s.a.decompressFromUTF16(u));l.resolve(d);return l.promise}catch(t){}a["a"].global.getBaseBNFString(t).then((function(t){var a=t.qBnfStr;localStorage.setItem(e,s.a.compressToUTF16(JSON.stringify(a)));localStorage.setItem(i,t.qBnfHash);l.resolve(a)}));return l.promise}))}function u(t,e){o[t]||(o[t]=c(t,e));return o[t]}function d(t){return h(t)}function f(){return u("S")}function p(t){return u("E",t)}function v(){return d("S")}e["a"]={createBnfModel:l,getReloadScriptBnfModel:f,getExpressionBnfModel:p,getScriptBnf:v}},rwE6:function(t,e,i){"use strict";var a=i("T7lR");e["a"]={displayObject:a["a"],render:function t(e,i,a){if(this._radius){var n=this.x;var s=this.y;var r=this.width;var o=this.height;var l=Math.min(this._radius,r/2,o/2);var c=n+r;var h=s+o;e.beginPath();e.moveTo(n+l,s);e.quadraticCurveTo(n,s,n,s+l);e.lineTo(n,h-l);e.quadraticCurveTo(n,h,n+l,h);e.lineTo(c-l,h);e.quadraticCurveTo(c,h,c,h-l);e.lineTo(c,s+l);e.quadraticCurveTo(c,s,c-l,s);e.lineTo(n+l,s);e.closePath();i&&e.fill();a&&e.stroke()}else{i&&e.fillRect(this.x,this.y,this.width,this.height);a&&e.strokeRect(this.x,this.y,this.width,this.height)}}}},sYQE:function(t,e,i){"use strict";var a=Math.log(10);var n=1e-12;var s={log:function t(e,i){if(e<=0||i<=0)return NaN;return Math.log(e)/Math.log(i)},log10:function t(e){if(e<=0)return NaN;return Math.log(e)/a},eliminateFloatingError:function t(e){var i=Math.round(e);Math.abs(e-i)<n&&(e=i);return e},getNiceNumber:function t(e){var i;if(0===e)return 0;var n=Math.floor(Math.log(Math.abs(e))/a);var s=e/Math.pow(10,n);i=s<=1?1:s<=2?2:s<=5?5:10;return i*Math.pow(10,n)*(e<0?-1:1)},getSmallNiceNumber:function t(e){var i;if(0===e)return 0;var n=Math.floor(Math.log(Math.abs(e))/a);var s=e/Math.pow(10,n);if(s<1){i=5;n--}else i=s<2?1:s<5?2:5;return i*Math.pow(10,n)*(e<0?-1:1)},getMagnitude:function t(e){if(0===e)return 0;var i=Math.floor(Math.log(Math.abs(e))/a);return Math.pow(10,i)},getFraction:function t(e){if(0===e)return 0;var i=Math.floor(Math.log(Math.abs(e))/a);return e/Math.pow(10,i)},getGoodNumber:function t(e){var i;if(0===e)return 0;var n=Math.floor(Math.log(Math.abs(e))/a);var s=e/Math.pow(10,n);i=Math.ceil(s);7!==i&&9!==i||i++;s>1&&s<=1.5?i=1.5:s>2&&s<=2.5&&(i=2.5);return i*Math.pow(10,n)*(e<0?-1:1)},calculateTicks:function t(e,i,a,n,s,r,o,c,h,u,d,f){var v;var M=false;void 0===d&&(d=false);Number.isNaN(+n)&&(n=null);Number.isNaN(+s)&&(s=null);if(i>a){v=i;i=a;a=v}if(null!==n&&null!==s&&n>s){v=n;n=s;s=v}this.plotSize=e;this.dataMin=i;this.dataMax=a;this.explicitPlotMin=n;this.explicitPlotMax=s;this.minTickSpacingInPixel=r;this.usedDataMin=null===this.explicitPlotMin?this.dataMin:this.explicitPlotMin;this.usedDataMax=null===this.explicitPlotMax?this.dataMax:this.explicitPlotMax;this.absMax=Math.max(Math.abs(this.usedDataMax),Math.abs(this.usedDataMin));this.absMin=Math.min(Math.abs(this.usedDataMax),Math.abs(this.usedDataMin));this.usedDataRange=this.usedDataMax-this.usedDataMin;this.maxNumIntervals=this.plotSize/this.minTickSpacingInPixel;this.maxNumTicks=this.maxNumIntervals+1;this.minTickDataSpacing=f||0;this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);this.fontHeight=o;this.niceNumberEnabled=c;this.tickBaseValue=0;this.spaceUseLimit=void 0===u?.6:u;this.spaceOptimizingEnabled=h;this.plotMaxCanBeTuned=null===this.explicitPlotMax&&this.usedDataMax>0;this.plotMinCanBeTuned=null===this.explicitPlotMin&&this.usedDataMin<0;if(!c||0===e){this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;this.tickDataSpacingNN=this.tickDataSpacing;w.call(this);return q.call(this)}if(null!==this.explicitPlotMax&&this.explicitPlotMax<this.usedDataMin||null!==this.explicitPlotMin&&this.explicitPlotMin>this.usedDataMax){M=true;l.call(this)}else if(0===this.usedDataRange)p.call(this);else if(this.maxNumIntervals<1)x.call(this);else{this.usedDataMax>0&&this.usedDataMin<0?1===this.maxNumIntervals?g.call(this,true):this.maxNumIntervals>=5?m.call(this):this.maxNumIntervals<2?_.call(this):y.call(this):m.call(this);if(this.tickMaxIndex<this.tickMinIndex){this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);x.call(this)}else b.call(this)}w.call(this);if(d&&this.maxNumIntervals>=1&&!M){k.call(this);C.call(this)}return q.call(this)}};function r(){var t=0===this.explicitPlotMax?1:s.getMagnitude(this.explicitPlotMax);var e=this.explicitPlotMax;var i;i=this.maxNumIntervals<2?e-t:e-2*t;i=Math.ceil(i/t)*t;var a=e-i;this.tickDataSpacing=Math.max(a/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(t/10,s.getNiceNumber(this.tickDataSpacing));this.plotMax=e;this.plotMin=i;this.plotRange=a;this.maxNumIntervals<1&&(this.tickBaseValue=this.plotMin)}function o(){var t=0===this.explicitPlotMin?1:s.getMagnitude(this.explicitPlotMin);var e=this.explicitPlotMin;var i;i=this.maxNumIntervals<2?e+t:e+2*t;i=Math.floor(i/t)*t;var a=i-e;this.tickDataSpacing=Math.max(a/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(t/10,s.getNiceNumber(this.tickDataSpacing));this.plotMax=i;this.plotMin=e;this.plotRange=a;this.maxNumIntervals<1&&(this.tickBaseValue=this.plotMax-this.tickDataSpacingNN)}function l(){null!==this.explicitPlotMax&&this.explicitPlotMax<this.usedDataMin?r.call(this):null!==this.explicitPlotMin&&this.explicitPlotMin>this.usedDataMax&&o.call(this)}function c(){this.tickBaseValue=this.usedDataMin;this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMin;this.plotRange=0;this.tickDataSpacingNN=0===this.usedDataMin?1:Math.abs(this.usedDataMin);this.tickDataSpacing=this.tickDataSpacingNN;this.tickMinIndex=0;this.tickMaxIndex=0}function h(){if(0===this.usedDataMax){if(this.maxNumIntervals<2){this.plotMin=0;this.plotMax=1}else{this.plotMin=-1;this.plotMax=1}this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacing=Math.max(this.plotRange/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(.1,s.getNiceNumber(this.tickDataSpacing));this.tickMinIndex=Math.ceil(this.plotMin/this.tickDataSpacingNN);this.tickMaxIndex=Math.floor(this.plotMax/this.tickDataSpacingNN)}else{var t=f(Math.abs(this.usedDataMax),this.maxNumIntervals);if(this.usedDataMax>0){this.plotMax=t.max;this.plotMin=t.min;this.tickBaseValue=t.tickBaseValue}else{this.plotMax=-t.min;this.plotMin=-t.max;this.tickBaseValue=-t.tickBaseValue}this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacing=Math.max(this.plotRange/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(t.magnitude/10,s.getNiceNumber(this.tickDataSpacing));this.tickMinIndex=Math.floor((this.plotMin-this.tickBaseValue)/this.tickDataSpacingNN);this.tickMaxIndex=Math.floor((this.plotMax-this.tickBaseValue)/this.tickDataSpacingNN)}}function u(){if(0===this.explicitPlotMax){this.plotMax=0;this.plotMin=-1;this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacingNN=Math.max(.1,s.getNiceNumber(this.plotRange/this.maxNumIntervals))}else r.call(this)}function d(){if(0===this.explicitPlotMin){this.plotMax=1;this.plotMin=0;this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacingNN=Math.max(.1,s.getNiceNumber(this.plotRange/this.maxNumIntervals))}else o.call(this)}function f(t,e){var i=s.getMagnitude(t);var a=t/i;var n=Math.floor(a);var r=Math.round(a);var o;var l;var c=0;if(e<2){o=n*i;l=(n+1)*i;e<1&&(c=o)}else{o=(r-1)*i;l=(r+1)*i}return{min:o,max:l,tickBaseValue:c,magnitude:i}}function p(){null!==this.explicitPlotMin&&null!==this.explicitPlotMax?c.call(this):null===this.explicitPlotMin&&null===this.explicitPlotMax?h.call(this):null===this.explicitPlotMin&&null!==this.explicitPlotMax?u.call(this):d.call(this)}function v(t,e,i){void 0===t&&(t=null!==this.explicitPlotMin);void 0===e&&(e=null!==this.explicitPlotMax);this.tickDataSpacingNN=i?s.getGoodNumber(this.tickDataSpacing):s.getNiceNumber(this.tickDataSpacing);A.apply(this,[t,e])}function m(){v.call(this);var t=this.tickMaxIndex-this.tickMinIndex;var e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;var i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;if(i&&this.maxNumIntervals>=5){while(this.tickDataSpacing<=this.absMax&&i){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);v.call(this);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit}if(!i)return}this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);(i||t<=2&&this.maxNumIntervals>=2*t)&&v.apply(this,[void 0,void 0,true]);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;while(this.tickDataSpacing<=this.absMax&&i){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);v.apply(this,[void 0,void 0,true]);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit}}function g(t){if(t){this.tickDataSpacingNN=s.getGoodNumber(this.absMax);this.tickBaseValue=-this.tickDataSpacingNN;this.plotMin=null===this.explicitPlotMin?-this.tickDataSpacingNN:this.explicitPlotMin;this.plotMax=null===this.explicitPlotMax?this.tickDataSpacingNN:this.explicitPlotMax;this.tickMinIndex=null===this.explicitPlotMin?0:1;this.tickMaxIndex=(null===this.explicitPlotMax,1);this.tickDataSpacingNN*=2}else{this.plotMax=this.usedDataMax;this.plotMin=this.usedDataMin;this.plotRange=this.plotMax-this.plotMin;this.tickMinIndex=0;this.tickMaxIndex=0;this.tickDataSpacingNN=s.getNiceNumber(this.absMax);this.tickDataSpacingNN===this.absMax&&(this.tickDataSpacingNN=s.getNiceNumber(1.1*this.absMax))}}function x(){var t;this.tickDataSpacingNN=s.getNiceNumber(this.tickDataSpacing);this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;this.plotRange=this.plotMax-this.plotMin;this.tickMinIndex=0;this.tickMaxIndex=0;if(this.usedDataMax<0||this.usedDataMin>0){t=s.getSmallNiceNumber(this.plotRange);this.tickBaseValue=Math.ceil(this.plotMin/t)*t}}function _(){var t=this.usedDataMax>=-this.usedDataMin;var e=t||null!==this.explicitPlotMin;var i=!t||null!==this.explicitPlotMax;v.apply(this,[e,i,true]);var a=(this.absMax+(1-this.spaceUseLimit)*this.absMin)/this.spaceUseLimit*1.0001;while(this.tickDataSpacing<=a&&this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);v.apply(this,[e,i,true])}var n=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=n/this.plotRange;this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit&&g.call(this)}function y(){m.call(this);var t=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=t/this.plotRange;if(this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit){this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);_.call(this)}}function b(){var t=s.getNiceNumber(this.tickDataSpacingNN);if(this.tickDataSpacingNN===t||0!==this.tickBaseValue)return;var e=this.tickDataSpacingNN;var i=this.tickMinIndex;var a=this.tickMaxIndex;var n=a-i;var r=this.plotMin;var o=this.plotMax;this.tickDataSpacingNN=t;A.apply(this,[null!==this.explicitPlotMin,null!==this.explicitPlotMax]);var l=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=l/this.plotRange;var c=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;var h=this.tickMaxIndex-this.tickMinIndex;if(!c&&(h===n||h>=10||h>=3&&1.5*h>=n))return;this.tickDataSpacingNN=e;this.tickMinIndex=i;this.tickMaxIndex=a;this.plotMin=r;this.plotMax=o;this.plotRange=this.plotMax-this.plotMin}function M(){if(this.niceNumberEnabled&&this.plotMax!==this.plotMin&&0!==this.plotSize){this.minTickValue=this.tickBaseValue+this.tickMinIndex*this.tickDataSpacingNN;this.maxTickValue=this.tickBaseValue+this.tickMaxIndex*this.tickDataSpacingNN}else{this.minTickValue=this.plotMin;this.maxTickValue=this.plotMax}}function w(){var t;var e;this.mainTickValues=[];this.secondaryTickValues=[];M.call(this);if(0===this.plotSize)return;if(!this.niceNumberEnabled){this.numIntervals=Math.floor(this.maxNumIntervals);this.tickDataSpacing=Math.max(this.usedDataRange/this.numIntervals,this.minTickDataSpacing);t=this.usedDataMin;for(e=0;e<=this.numIntervals;e++)this.mainTickValues.push(t+e*this.tickDataSpacing);t=this.usedDataMin+this.tickDataSpacing/2;for(e=0;e<this.numIntervals;e++)this.secondaryTickValues.push(t+e*this.tickDataSpacing);return}t=this.tickBaseValue;var i=this.tickMaxIndex-this.tickMinIndex;if(i<1)return;for(e=0;e<=i;e++)this.mainTickValues.push(t+(e+this.tickMinIndex)*this.tickDataSpacingNN);t=this.tickBaseValue+this.tickDataSpacingNN/2;for(e=0;e<i;e++)this.secondaryTickValues.push(t+(e+this.tickMinIndex)*this.tickDataSpacingNN)}function S(){var t;var e;var i;var a;var n=[.5];var s=this.mainTickValues[0];for(a=0;a<n.length;a++){t=s-this.tickDataSpacingNN*n[a];e=this.plotMax-t;i=this.plotSize*this.tickDataSpacingNN/e;if(i>3*this.fontHeight){this.plotMin=t;this.plotRange=e;this.mainTickValues.splice(0,0,t);return}}}function D(){var t;var e;var i;var a;var n=[.5];var s=this.mainTickValues[this.mainTickValues.length-1];for(a=0;a<n.length;a++){t=s+this.tickDataSpacingNN*n[a];e=t-this.plotMin;i=this.plotSize*this.tickDataSpacingNN/e;if(i>3*this.fontHeight){this.plotMax=t;this.plotRange=e;this.mainTickValues.push(t);return}}}function A(t,e){this.tickMinIndex=t?Math.ceil(this.usedDataMin/this.tickDataSpacingNN):Math.floor(this.usedDataMin/this.tickDataSpacingNN);this.tickMaxIndex=e?Math.floor(this.usedDataMax/this.tickDataSpacingNN):Math.ceil(this.usedDataMax/this.tickDataSpacingNN);this.plotMin=t?this.usedDataMin:this.tickMinIndex*this.tickDataSpacingNN;this.plotMax=e?this.usedDataMax:this.tickMaxIndex*this.tickDataSpacingNN;this.plotRange=this.plotMax-this.plotMin}function k(){var t=this.plotMin;var e=this.plotMax;var i=this.tickMinIndex;var a=this.tickMaxIndex;var n=this.tickDataSpacingNN;var r=this.tickMaxIndex-this.tickMinIndex;var o=null!==this.explicitPlotMin;var l=null!==this.explicitPlotMax;var c=true;var h=2*this.fontHeight;var u=r;var d;var f=this.mainTickValues?this.mainTickValues.length:0;var p=this.mainTickValues[0];var v=this.mainTickValues[f-1];null===this.explicitPlotMin&&p>this.dataMin&&u++;null===this.explicitPlotMax&&v<this.dataMax&&u++;if(u===r)return;var m=0;while(c&&m<10){this.tickDataSpacingNN=s.getSmallNiceNumber(.99*this.tickDataSpacingNN);A.apply(this,[o,l]);d=this.tickMaxIndex-this.tickMinIndex;d>u&&(c=false);m++}c=true;m=0;while(this.tickDataSpacingNN<n&&c&&m<10){this.tickDataSpacingNN=s.getGoodNumber(1.1*this.tickDataSpacingNN);A.apply(this,[o,l]);d=this.tickMaxIndex-this.tickMinIndex;d===u&&this.plotSize*this.tickDataSpacingNN/this.plotRange>h&&(c=false);m++}if(c){this.plotMin=t;this.plotMax=e;this.tickMinIndex=i;this.tickMaxIndex=a;this.tickDataSpacingNN=n}else w.call(this)}function C(){var t=this.mainTickValues?this.mainTickValues.length:0;var e=this.mainTickValues[0];var i=this.mainTickValues[t-1];if(null===this.explicitPlotMin&&e>this.dataMin&&null===this.explicitPlotMax&&i<this.dataMax)if(Math.abs(this.dataMin)<=Math.abs(this.dataMax)){S.call(this);D.call(this)}else{D.call(this);S.call(this)}else null===this.explicitPlotMin&&e>this.dataMin?S.call(this):null===this.explicitPlotMax&&i<this.dataMax&&D.call(this)}function q(){return{plotMin:this.plotMin,plotMax:this.plotMax,tickSpacing:this.tickDataSpacingNN,tickBaseValue:this.tickBaseValue,tickMinIndex:this.tickMinIndex,tickMaxIndex:this.tickMaxIndex,minTickValue:this.minTickValue,maxTickValue:this.maxTickValue,mainTickValues:this.mainTickValues,secondaryTickValues:this.secondaryTickValues}}e["a"]=s},tccY:function(t,e,i){"use strict";var a=i("mWu2");var n=i("6uJb");var s=i("sWge");var r=i("Hk9t");var o=i("ohbW");var l=i("plXO");var c={hasAlternatives:d,getTitlesApproxWidth:p};function h(t,e,i){var a=[];var n="dimension"===e?t.qDimensionInfo:t.qMeasureInfo;var s=false;var r;var o;var l;if(!e)return;for(l=0;l<n.length;l++){r=n[l];s=r.qGroupFallbackTitles&&r.qGroupFallbackTitles.length>1;o=s?r.qGroupFallbackTitles.slice(0,r.qGroupPos+1):[r.qFallbackTitle];a.push({labels:o,label:o[o.length-1],locked:r.qLocked&&i,isDrill:s&&i,currentDrillDownLevels:r.qGroupPos,wrapperStyle:{},index:l})}return a}function u(t,e){if(!(t&&t.getProperties))return s["a"].resolve();var i="dimension"===e?"qDimensions":"qMeasures";var a=t.getProperties().then((function(e){if(e.qExtendsId)return t.app.getObject(e.qExtendsId).then((function(t){return t.getProperties()}));return e}));return a.then((function(t){return c.hasAlternatives(t.qHyperCubeDef&&t.qHyperCubeDef.qLayoutExclude,i)}))}function d(t,e){return t&&t.qHyperCubeDef&&t.qHyperCubeDef[e].length>0}function f(t,e,i,a){if(!e.width())return;if("top-to-bottom"===i||"bottom-to-top"===i){t.width=e.height();t.height=e.width();if("top-to-bottom"===i){t.marginTop=-t.width+t.height;t.marginLeft=t.height}else{t.marginTop=t.width+t.height;t.marginLeft=0}}else{t.width=e.width();t.height=e.height();t.marginLeft=0;t.marginTop=0}var n=a?a.map((function(t){return t.label})):[];var s=c.getTitlesApproxWidth(n,t.font);if(s>t.width){t.justifyContent="flex-start";t.minWidth=70}else{t.justifyContent="center";t.minWidth="auto"}}function p(t,e){var i=0;t.forEach((function(t){"string"===typeof t&&(i+=l["a"].getTextWidth(t,e))}));return i||null}var v={getTitleDataFromHyperCube:h,modelHasAlternatives:u,setWrapperStyle:f,getTitlesApproxWidth:p,hasAlternatives:d};var m='<div ng-show="visible"\n     class="qva-chart-data-title">\n     <div class="qva-chart-data-title-rotate" ng-style="fontStyle" ng-class="direction" qva-direction x-dir-setting="{{options.direction}}">\n          <div class="qva-chart-data-title-align ellips-text">\n               <div class="qva-chart-data-title-wrapper ellips-text" ng-repeat-start="titleData in titles" ng-style="titleData.wrapperStyle" >\n                    <qva-breadcrumb-bar ng-if="titleData.isDrill" data="titleData" model="model" disabled="disabled || object.selectionsApi.active" type="type" dock="dock" column-index="$index" options="options"></qva-breadcrumb-bar>\n                    <qva-default-data-title ng-if="!titleData.isDrill" data="titleData" model="model" disabled="disabled || object.selectionsApi.active" type="type" dock="dock" options="options"></qva-default-data-title>\n               </div>\n               <span ng-repeat-end ng-if="!$last">, &nbsp;</span>\n          </div>\n\n     </div>\n</div>\n';var g='<div class="default-data-title-wrapper ellips-text">\n     <qva-simple-data-title ng-if="!data.hasAlternatives" label="data.label" locked="data.locked" options="options"></qva-simple-data-title>\n     <qva-dropdown-data-title ng-if="data.hasAlternatives" data="data" model="model" disabled="disabled" type="type" dock="dock" options="options"></qva-dropdown-data-title>\n</div>';var x='<div class="chart-data-title ellips-text" qva-direction x-dir-text="{{label}}" x-dir-setting="{{options.direction}}" >\n     <i ng-if="locked" class="lui-icon lui-icon--lock" title="{{lockedTooltip}}"></i>\n     <span class="chart-data-title-label" title="{{label}}" qva-direction x-dir-text="{{label}}" x-dir-setting="{{options.direction}}">{{label}}</span>\n</div>';var _=i("UV1h");var y=i("4nJ1");var b='<div class="qva-dropdown-data-title">\n     <div class="dropdown-data-title-wrapper" ng-class="{\'interactive\' : !disabled, \'active\': isMenuOpen}" qva-activate="openAlternativePopover()" qva-outside-ignore-for="{{\'dataTitle-\' + $id}}">\n          <qva-simple-data-title locked="data.locked" label="data.label" options="options"></qva-simple-data-title>\n          <span class="dropdown-arrow"></span>\n     </div>\n</div>';var M='<lui-popover class="qva-alternative-data-picker"\n\t\t\t\t\t  align-to="alignTo"\n\t\t\t\t\t  position="position"\n\t\t\t\t\t  collision="\'flip fit\'"\n\t\t\t\t\t  height="\'auto\'"\n\t\t\t\t\t  on-close-view="closePopover();"\n\t\t\t\t\t  qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<div class="em-section-content em-alternative-data qva-alternative-data-picker-list" qva-direction x-dir-setting="{{options.direction}}">\n\t\t<div hypercube-data-item ng-repeat="alternative in item.alternatives" item="item"></div>\n\t</div>\n</lui-popover>\n';var w=i("qYY7");var S=i("rQnm");var D=i("qU3k");var A=i("2Hli");var k=i("wIyQ");var C=i("a7yF");var q;var L={template:M,controller:["$scope",function(t){t.position||(t.position="right");var e=new D["a"](t.args.effectiveProperties,t.args.model.app);var i=new S["a"](t.args.model);t.alternativeItemClicked=function(a,n,s){a.stopPropagation();e.updateAlternativeItem(n,s,t.definition.items[s.ref].ref,t.definition.items[s.ref].alternativeRef,[{path:"qDef",property:"series"}]);i.saveSoftProperties(t.args.prevEffectiveProperties,t.args.effectiveProperties);t.closePopover()}}],scope:{alignTo:"=",position:"=",args:"=",definition:"=",item:"=",type:"=",closePopover:"=",qvaOutsideIgnoreFor:"=",options:"="}};function P(t){var e={left:"right",right:"left",top:"bottom",bottom:"top"};return e[t]}a["default"].directive("qvaDropdownDataTitle",[function(){return{replace:true,template:b,restrict:"E",scope:{model:"=",type:"=",data:"=",disabled:"=",dock:"=",options:"="},link:function t(e,i){var n=a["default"].getService("$cacheFactory");var r=n.get("em-object");var o={};var l=e.model;var c=new D["a"](null,l.app);e.closePopover=function(){if(!e.isMenuOpen)return;e.isMenuOpen=false;if(q){q.close();q=null}};e.openAlternativePopover=function(){var t=P(e.dock);if(e.disabled)return;if(e.isMenuOpen){e.closePopover();return}e.isMenuOpen=true;q=a["default"].getService("luiPopover").show({template:L.template,controller:L.controller,input:e.popoverSettings,alignTo:i[0],dock:t,variant:"inverse",closeOnOutside:true,closeOnEscape:true,outsideIgnore:"dataTitle-".concat(e.$id)});q.closed.then((function(){e.isMenuOpen=false}))};e.refreshItems=function(){s["a"].all({effectiveProperties:l.getEffectiveProperties(),properties:l.getProperties().then((function(t){if(t.qExtendsId)return l.app.getObject(t.qExtendsId).then((function(t){return t.getProperties()}));return t})),layout:l.getLayout()}).then((function(t){if(e.destroyed)return;o.args={layout:t.layout,model:l,properties:t.properties,effectiveProperties:y["a"].extend(true,{},t.effectiveProperties),prevEffectiveProperties:y["a"].extend(true,{},t.effectiveProperties),cache:r};o.data=t.effectiveProperties;o.definition=w["a"].data;o.item=e.getAlternativeItem(o);e.popoverSettings={args:o.args,item:o.item,type:o.type,definition:o.definition,closePopover:e.closePopover,qvaOutsideIgnoreFor:"dataTitle-".concat(e.$id),options:e.options};e.isMenuOpen&&e.closePopover()}))};e.refreshItems();e.$on("datachanged",(function(){e.refreshItems()}));e.getAlternativeItem=function(t){var i;var a;var n;var s=e.data.index;var r;if("dimension"===e.type){r=t.data.qHyperCubeDef.qDimensions[s];n=c.getDimensionOptions;a="dimensions"}else{r=t.data.qHyperCubeDef.qMeasures[s];n=c.getMeasureOptions;a="measures"}if(!r)return;i=A["a"].getValue(t.data,t.definition.items[a].alternativeRef,[]);var o=A["a"].getValue(t.data,t.definition.items[a].ref,[]);i=n.call(c,o,i,r,t.args.layout,true);return{alternatives:i,index:Number.isNaN(+e.data.index)?0:e.data.index,data:r}};k["a"].on("end",e.closePopover);e.$on("$destroy",(function(){k["a"].off("end",e.closePopover);e.destroyed=true;e.closePopover()}))}}}]);var I=i("GF7R");var T='<div class="qv-breadcrumb">\n\t<div class="qv-breadcrumb-container">\n\t\t<span class="lui-icon lui-icon--drill-down" title="{{drillDownTooltip}}"></span>\n\t\t\t<span class="crumb-item" ng-repeat="label in data.labels track by $index">\n\n\t\t\t\t<div ng-style="getCrumbStyle(hoverIndex === $index, $last, disabled)"\n\t\t\t\t\t ng-mouseover="hoverIndex = $index"\n\t\t\t\t\t ng-mouseout="hoverIndex = -1"\n\t\t\t\t\t ng-class="{\'crumb-button\' : !$last, \'disabled\' : disabled}"\n\t\t\t\t\t qva-activate="onClick($event, $index, $last)">\n\n\t\t\t\t\t<div ng-if="!$last" class="chart-data-title" >\n\t\t\t\t\t\t<span qva-direction x-dir-text="{{label}}" class="chart-data-title-label" title="{{label}}">{{label}}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<qva-default-data-title ng-if="$last" data="data" model="model" disabled="disabled" type="type" direction="direction" dock="dock" options="options"></qva-default-data-title>\n\n\t\t\t\t\t<span class="lui-icon lui-icon--triangle-left" ng-if="!$last"></span>\n\t\t\t\t\t<span class="lui-icon lui-icon--triangle-right" ng-if="!$last"></span>\n\t\t\t\t</div>\n\t\t\t</span>\n\t</div>\n</div>';var O=i("Z9ZH");var N={};function E(t){var e=_["a"].initializeService("object.".concat(t.options.parentType||""));var i=e.getStyle("","backgroundColor");var a=e.getStyle("axis.title","color");var n=e.getStyle("axis.title.disabled","color");N.crumbColor={color:a};N.crumbButtonColor={color:n};N.crumbButtonHoverColor={color:a};N.crumbButtonLockedColor={color:a};N.crumbButtonDisabledColor={color:n};var s=I["a"].toRGBA(i,0);var r=I["a"].toRGBA(i,1);t.faderStyle={background:"linear-gradient(to right, ".concat(r,", ").concat(s,")")}}a["default"].directive("qvaBreadcrumbBar",[function(){return{template:T,restrict:"E",replace:true,scope:{data:"=",type:"=?",model:"=?",disabled:"=?",dock:"=?",columnIndex:"=",options:"="},link:function t(e,i){e.hoverIndex=-1;e.height=i.width();e.singleLabelMode=true;e.onClick=function(t,i,a){if(!e.disabled&&!a){e.$emit("drill-up",e.columnIndex,i);t.stopImmediatePropagation()}};e.drillDownTooltip=n["default"].get("Tooltip.dimensions.drilldown");e.getCrumbStyle=function(t,e,i){if(i)return N.crumbButtonDisabledColor;if(e)return{};if(t)return N.crumbButtonHoverColor;return N.crumbButtonColor};E(e)}}}]);var R=3;a["default"].directive("qvaSimpleDataTitle",[function(){return{replace:true,template:x,restrict:"E",scope:{label:"=",locked:"=?",options:"="},link:function t(e){e.lockedTooltip=n["default"].get("Tooltip.selections.locked")}}}]);a["default"].directive("qvaDefaultDataTitle",[function(){return{replace:true,template:g,restrict:"E",scope:{data:"=",type:"=?",model:"=?",disabled:"=?",dock:"=?",options:"="}}}]);function V(t){this.relevantSize=this._titleFontHeight+R+(t?this._extraSizeWhenAlternatives:0)}function z(t,e,i,a){var n=t.getStyle(e,"fontSize");var s=t.getStyle(e,"fontFamily");var r=t.scaleFontSize(n,i);var o=parseInt(r,10)*a;return"normal ".concat(o,"px ").concat(s)}function F(){this._innerScope.options.parentType=this.options.parentType;var t=_["a"].initializeService("object.".concat(this.options.parentType));var e=t.layoutMap[this._layoutMode]||"medium";var i="full"===e?this._layoutMode:"medium";var a=z(t,"axis.title",i,this._innerScope.fontScale);this._innerScope.fontStyle.font=a;this._innerScope.fontStyle.color=t.getStyle("axis.title","color");this._titleFontHeight=o["a"].getFontHeight(a)}var j=r["a"].extend("DataTitle",{init:function t(){var e=Array.prototype.slice.call(arguments);var i=this;e.push(m);this._super.apply(this,e);this._showTitle=true;this._innerScope.fontScale=1;this._currentDrillDownLevels=[];this._innerScope.disabled=true;this._selectionsEnabled=true;this._innerScope.fontStyle={font:"12px 'QlikView Sans', sans-serif"};F.call(this);this._extraSizeWhenAlternatives=10;this.drillUpRef=this._innerScope.$on("drill-up",(function(t,e,a){i._currentDrillDownLevels[e]-a>0&&i.fire("drill-up",[t,e,i._currentDrillDownLevels[e]-a])}))},calculateRelevantSize:function t(){this._super();F.call(this);V.call(this,this._hasAlternatives)},setShowStrategy:function t(e){this._showTitle=["all","title"].includes(e)},setDock:function t(e){this._super(e);this._innerScope.direction="right"===e?"top-to-bottom":"left"===e?"bottom-to-top":"";this._innerScope.dock=e},setType:function t(e){this._innerScope.type=e},setModel:function t(e){this._innerScope.model=e},setSelectionsEnabled:function t(e){this._selectionsEnabled=e;this._changed=true;this.invalidateProperties("dataTitle.setSelectionsEnabled")},setData:function t(e){this._super(e);if(!e)return s["a"].resolve();var i=this;var a=this._innerScope.model;if(!a||a.layout&&!!a.layout.snapshotData){i._changed=true;return s["a"].resolve()}return v.modelHasAlternatives(this._innerScope.model,this._innerScope.type).then((function(t){i._hasAlternatives=t;i._changed=true;return i.invalidateProperties("dataTitle.setData")}))},_updateProperties:function t(){this._super();if(this._changed&&this._data){var e=this._data;if(e.qHyperCube&&this._innerScope.type){e=v.getTitleDataFromHyperCube(e.qHyperCube,this._innerScope.type,this._selectionsEnabled);this._currentDrillDownLevels=e.map((function(t){return t.currentDrillDownLevels}))}if(!this._innerScope)return;e.forEach((function(t){t.hasAlternatives=this._hasAlternatives}),this);this._innerScope.titles=e;this._innerScope.$broadcast("datachanged");v.setWrapperStyle(this._innerScope.fontStyle,this._innerContainer,this._innerScope.direction,this._innerScope.titles)}this._changed=false},isVisible:function t(){return this._super.apply(this,arguments)&&this._showTitle},on:function t(){this._innerScope.disabled=false},off:function t(){this._innerScope.disabled=true},paint:function t(){this._innerScope.visible=true;this._innerScope.fontScale=this.chartScale;F.call(this);this._innerScope.$digest();v.setWrapperStyle(this._innerScope.fontStyle,this._innerContainer,this._innerScope.direction,this._innerScope.titles)},release:function t(){this._super();this.drillUpRef()},clear:function t(){this._super();this._innerScope.visible=false}});var H=e["a"]=j},tnCi:function(t,e,i){"use strict";var a=i("8fQa");function n(t){n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return n(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||false;a.configurable=true;"value"in a&&(a.writable=true);Object.defineProperty(t,a.key,a)}}function o(t,e,i){e&&r(t.prototype,e);i&&r(t,i);return t}var l=null;var c=[];var h=true;var u=Math.PI;var d=Math.cos;var f=function t(){this._onSuccess=[];this._onProgress=[];this._isResolved=false};f.prototype={then:function t(e){this._onSuccess.push(e);this._isResolved&&e.call(null,[].slice.apply(arguments))},progress:function t(e){this._onProgress.push(e)},resolve:function t(){this._isResolved=true;var e;var i=this._onSuccess.length;for(e=0;e<i;e++)this._onSuccess[e].apply(null,[].slice.call(arguments))},notify:function t(){var e;var i=this._onProgress.length;for(e=0;e<i;e++)this._onProgress[e].apply(null,[].slice.call(arguments))},destroy:function t(){this._onSuccess=[];this._onProgress=[]}};var p=function(){function t(e,i,a,r){s(this,t);var o={};var l=true;this._target=e;this._enabled=true;for(var c in i){var h=Array.isArray(e[c])?e[c].slice():e[c];var u=Array.isArray(i[c])?i[c].slice():i[c];o[c]={from:h,to:u}}this._props=o;x.call(this);if("object"===n(a)){this._duration=a.duration||200;this._easing="function"===typeof a.easing?a.easing:t.easing[a.easing||"linear"];l=false!==a.autoStart}else{this._duration=a||200;this._easing="function"===typeof r?r:t.easing[r||"linear"]}this._dfd=new f;this._pos=0;this._isRunning=false;if(!l)return;if(_(this._props)){this._startTime=Date.now();m(this)}else this._step(true)}o(t,[{key:"from",value:function t(e){this._isRunning||g.call(this,e,"from");return this}},{key:"to",value:function t(e){this._isRunning||g.call(this,e,"to");return this}},{key:"start",value:function t(){if(!this._isRunning&&this._enabled&&h){x.call(this);_(this._props)?this._start():this._dfd.resolve()}return this}},{key:"willStart",value:function t(){if(!this._isRunning&&this._enabled&&h){x.call(this);if(_(this._props))return true}return false}},{key:"stop",value:function t(){if(this._isRunning){this._isRunning=false;c.splice(c.indexOf(this),1)}return this}},{key:"end",value:function t(){this._isRunning&&this._step(true);return this}},{key:"then",value:function t(){this._dfd.then.apply(this._dfd,[].slice.call(arguments));return this}},{key:"progress",value:function t(){this._dfd.progress.apply(this._dfd,[].slice.call(arguments));return this}},{key:"isRunning",value:function t(){return this._isRunning}},{key:"on",value:function t(){this._enabled=true}},{key:"off",value:function t(){this._enabled=false}},{key:"destroy",value:function t(){this.stop();this._dfd.destroy()}},{key:"_update",value:function t(){var e;for(e in this._props)this._target[e]=this._props[e].value}},{key:"_step",value:function t(e){var i=Date.now()-this._startTime;var a;if(i>=this._duration||e){this._pos=1;this._isRunning=false;a=c.indexOf(this);a>=0&&c.splice(a,1);y(this._props,this._pos,true);this._update();this._dfd.notify(i,i/this._duration,this._pos);this._dfd.resolve();return}this._pos=this._easing(i/this._duration);y(this._props,this._pos,false);this._update();this._dfd.notify(i,i/this._duration,this._pos)}},{key:"_start",value:function t(){this._startTime=Date.now();m(this);this._step()}}]);return t}();function v(){p.tick()&&(l=a["a"].request(v))}function m(t){c.push(t);t._isRunning=true;null===l&&(l=a["a"].request(v))}function g(t,e){for(var i in t){this._props[i]||(this._props[i]={});this._props[i][e]=Array.isArray(t[i])?t[i].slice():t[i]}}function x(){var t;var e;var i;var a;for(t in this._props){a=this._props[t];e="from"in a?a.from:this._target[t];i=a.to;a.from=e;Array.isArray(e)?function(){var t=e.map((function(t){return t.value}));var n=i.map((function(t){return t.value}));a.fresh=i.filter((function(e){return t.indexOf(e.value)<0}));a.rotten=e.filter((function(t){return n.indexOf(t.value)<0}));a.ripe=i.filter((function(e){return t.indexOf(e.value)>=0}));a.combined=a.rotten.concat(a.ripe).concat(a.fresh);a.isArray=true}():Number.isNaN(+e)||Number.isNaN(+a.to)||(a.change=a.to-e)}}function _(t){var e;for(e in t)if(t[e].isArray){if(t[e].fresh.length||t[e].rotten.length)return true}else if(t[e].change)return true;return false}function y(t,e,i){var a;var n;var s;var r;var o;var l;var c;for(n in t){s=t[n];r=s.to;o=s.from;if(s.isArray){l=s.fresh;c=s.rotten;s.value=i?s.to:s.combined;for(a=0;a<l.length;a++)l[a].opacity=e;for(a=0;a<c.length;a++)c[a].opacity=1-e;if(i){delete s.combined;delete s.fresh;delete s.rotten;delete s.ripe}}else s.value=!i&&"change"in s?o+s.change*e:r;i&&delete t[n].from}}p.off=function(){h=false};p.on=function(){h=true};p.tick=function(){var t;var e;var i=c.slice();var n=i.length;for(t=0;t<n;t++){e=i[t];e._step()}if(!c.length){a["a"].cancel(l);l=null;return false}return true};p.clear=function(){};p.easing={linear:function t(e){return e},easeInOut:function t(e){return.5*(1-d(e*u))}};p.tweens=c;e["a"]=p},wdNe:function(t,e,i){"use strict";var a=i("b5IE");var n=document.createElement("canvas").getContext("2d");var s="…";var r="-";function o(t,e,i,a){var s;var r;var o=t?t.split(/\n+|\r+|\r\n/):[];var l=[];var c;var h;var u=t?t.split(/\s+/):[];var d=o[0];var f;var p;if("number"!==typeof e||e<=0)return[t];if("number"===typeof a&&o.length>=a)return o.slice(0,a);i&&(n.font=i);for(r=0;r<o.length;r++){p=o[r]||"";u=p.split(/\s+/);d=u[0];f="";for(s=1;s<u.length;s++){c="".concat(d," ").concat(u[s]);h=n.measureText(c).width;if(h>e&&("number"!==typeof a||a>l.length)){l.push(d);d=u[s]}else d=c;if("number"===typeof a&&l.length>=a){f=u.slice(s+1).join(" ");break}}"number"!==typeof a||l.length<a?l.push(d):l[Math.max(0,l.length-1)]="".concat(l[Math.max(0,l.length-1)]||""," ").concat(d," ").concat(f)}return l}function l(t,e,i,a,s){if(!t||!t.length)return[];i&&(n.font=i);var r=[];var o=t.slice();var l;var h;var u;var f;o.filter((function(t){return!!t}));if("number"!==typeof e||e<0)return t.slice();for(f=0;f<o.length;f++){u=o[f];h=null;if(!u)continue;if(u.length<=1||n.measureText(u).width<=e){r.push(u);continue}l=d(u,e,void 0,a-r.length);if(l.length<=1){r.push(l[0]);continue}h=l.pop();r=r.concat(l);o[f+1]?n.measureText("".concat(h," ").concat(o[f+1])).width>e&&r.length+o.length-f<=a?o.splice(f+1,0,h):o[f+1]="".concat(h," ").concat(o[f+1]):o.push(h)}r.forEach((function(t,e,i){i[e]=t?t.trim():t}));if(r.length>a){r=r.splice(0,a);r[r.length-1]=c(r[r.length-1],e,i,s).text}else{u=r[r.length-1];u&&u.length>1&&n.measureText(u).width>e&&(r[r.length-1]=c(u,e,i,s).text)}return r}function c(t,e,i,a){var r=t;var o;var l;var c;var h;var u=n.measureText("i").width;var d=Math.ceil(e/u);a=a||s;i&&(n.font=i);if(t&&e){if(n.measureText(r).width>e){for(o=Math.min(d,r.length);o>0;o--){l=r.substring(0,o-1);c=l.trim()+a;if(n.measureText(c).width<=e){h=r.substring(o-1);r=c;break}}if(!o){h=r;r=s}}}else h=void 0;return{text:r,rest:h}}function h(t){return"number"===typeof t&&Number.isFinite(t)}function u(t,e,i,a){var s;var o=t;var l="";var c;var d=[];if(h(i)&&i<=1)return[t];var f=Math.ceil(e/a);var p=Math.min(t.length,f);for(s=p;s>0;s--){o=t.substring(0,s);c=t.substring(s-1,s);" "===c?o=t.substring(0,s-1):o+=r;l=t.substring(s);if(n.measureText(o).width<=e)break}if(!s&&!o||n.measureText(o).width>e){o=t.substring(0,1);l=t.substring(1)}d.push(o);if(!l)return d;if(n.measureText(l).width>e){l=u(l,e,i-1,a);d=d.concat(l)}else d.push(l);return d.filter((function(t){return""!==t.trim()}))}function d(t,e,i,a){if(!t||!e)return[];i&&(n.font=i);return u(t,e,a,Math.max(1,n.measureText("i").width))}function f(t,e,i,a,n){var s;if(Number.isNaN(+e))return[t];s=a>1?o(t,e,i,a):[t];s=l(s,e,i,a,n);return s}var p={lineWrap:o,wordWrap:l,splitWord:d,wrap:f,truncate:c};var v=i("cQOM");var m=document.createElement("canvas").getContext("2d");function g(t){return 1.5*t.measureText("m").width}function x(t){m.font=this.font;var e=g(m);var i=(this.lineHeightMultiplicator||1)*e;var a="maxWidth"in this?this.maxWidth:this.width;var n="maxHeight"in this?this.maxHeight:this.height;var s=this.maxNumLines;var r=[];var o=0;var l=[];this.lineHeight=i;if(n<e)return[];var c=n?Math.max(1,Math.floor(n/i)):s||1;if(Array.isArray(s)){s.forEach((function(t){o+=Number.isNaN(+t)||t<=0?0:t}));s.forEach((function(t){r.push(Number.isNaN(+t)||t<=0?c-o:t)}))}else r=[Number.isNaN(+s)||s<=0?c:Math.min(c,s)];Array.isArray(t)?t.forEach((function(t,e){l.length<c&&(l=l.concat(p.wrap(t,a,this.font,r[e])))}),this):l=p.wrap(t,a,this.font,r[0],this.ellipsis);return l}var _=a["a"].extend("Text",{init:function t(){this._super();this.options={};this.x=0;this.y=0;this.lineHeightMultiplicator=1;this._dirtyMeasures=true;this._measures={numLines:0,width:0,height:0}},setText:function t(e){this.text=e;this.invalidateBounds();return this},tokenize:function t(){this.lines=x.apply(this,[this.text]);return this},measure:function t(){this.preRender();if(this._dirtyMeasures){var e=0;var i;var a=this.lines;m.font!==this.font&&(m.font=this.font);for(i=0;i<a.length;i++)e=Math.max(e,m.measureText(a[i]).width);this._measures.numLines=a.length;this._measures.width=e;this._measures.height=a.length*this.lineHeight;this._dirtyMeasures=false}return{numLines:this._measures.numLines,width:this._measures.width,height:this._measures.height}},getHorizontalAnchor:function t(){var e=this.x||0;var i;if(this.width>0){i=this.attr("align");if("center"===i)return e+this.width/2;if("right"===i)return e+this.width}return e},getVerticalAnchorFirstLine:function t(){var e=this.y||0;var i=this.attr("baseline");var a;if("middle"===i){a=this.attr("lineHeight");e-=(this.lines.length-1)*a/2;this.height>0&&(e+=this.height/2)}else if("bottom"===i){a=this.attr("lineHeight");e-=(this.lines.length-1)*a;this.height>0&&(e+=this.height)}return e},preRender:function t(){var e="";Array.isArray(this.text)?this.text.forEach((function(t){e+="".concat(t,"__")})):e=this.text;var i=this.attr("font");this.font=i;var a=e+i+this.maxWidth+this.width+this.height;if(a!==this._renderedID){this.tokenize();this.invalidateBounds();this._dirtyMeasures=true;this._renderedID=a}return this},getLocalBoundingRect:function t(){var e=this.measure();var i=this.x;var a=this.y;var n=this.attr("align")||"left";var s=this.attr("baseline")||"top";this.height?"middle"===s?a+=this.height/2-e.height/2:"bottom"===s&&(a+=this.height-e.height):"middle"===s?a-=e.height/2:"bottom"===s&&(a-=e.height);this.width?"center"===n?i+=this.width/2-e.width/2:"right"===n&&(i+=this.width-e.width):"center"===n?i-=e.width/2:"right"===n&&(i-=e.width);return{x:i,y:a,width:e.width,height:e.height}},containsPoint:function t(e,i){var a=this.getLocalBoundingRect();return e>a.x&&e<a.x+a.width&&i>a.y&&i<a.y+a.height},getLocalPoints:function t(){var e=this.getLocalBoundingRect();return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]},intersectsLocalRect:function t(e){if(!e)return false;var i=this.getLocalBoundingRect();return i.x<=e.x+e.width&&e.x<=i.x+i.width&&i.y<=e.y+e.height&&e.y<=i.y+i.height},intersectsLocalLine:function t(e){if(this.containsPoint(e.x1,e.y1)||this.containsPoint(e.x2,e.y2))return true;var i=this.getLocalBoundingRect();return e.intersectsLine(new v["a"](i.x,i.y,i.x+i.width,i.y))||e.intersectsLine(new v["a"](i.x+i.width,i.y,i.x+i.width,i.y+i.height))||e.intersectsLine(new v["a"](i.x+i.width,i.y+i.height,i.x,i.y+i.height))||e.intersectsLine(new v["a"](i.x,i.y+i.height,i.x,i.y))}});var y=e["a"]=_},xN6f:function(t,e,i){"use strict";var a=i("NFdj");var n=i.n(a);var s=i("mWu2");var r=document.createElement("textarea");r.style.position="absolute";r.style.left="-9999px";r.setAttribute("readonly","");var o=s["default"].getService("$window");function l(t){r.value=t;document.body.appendChild(r);r.select();r.setSelectionRange(0,r.value.length);document.execCommand("copy");document.body.removeChild(r)}var c=n.a.element(o.document.body);var h=n.a.element("<textarea/>");h.css({position:"fixed",opacity:"0"});var u=function t(e){h.val(e);c.append(h);h[0].select();try{var i=document.execCommand("copy");if(!i)throw i}catch(t){window.prompt("Copy to clipboard: Ctrl+C, Enter",e)}h.remove()};s["default"].directive("qvClickCopy",(function(){return{restrict:"A",link:function t(e,i,a){i.bind("click",(function(){u(a.qvClickCopy)}))}}}));e["a"]={copyToClipboard:l}}}]);