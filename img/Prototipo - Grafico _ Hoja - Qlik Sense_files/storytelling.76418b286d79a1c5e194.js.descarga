/*! For license information please see storytelling.76418b286d79a1c5e194.js.LICENSE.txt */
/*!
 * sense-client@7.144.6
 * 
 * Copyright(C) 2021 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[22],{"0+WI":function(t,e,n){"use strict";var i=n("czhI");var a=n.n(i);var o=n("/2No");var r=n("acVu");function l(t,e,n,i,a,o,r){try{var l=t[o](r);var s=l.value}catch(t){n(t);return}l.done?e(s):Promise.resolve(s).then(i,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){l(o,i,a,r,s,"next",t)}function s(t){l(o,i,a,r,s,"throw",t)}r(void 0)}))}}var c={CHART_SHARING_ENABLED:false,MAX_RECIPIENTS:void 0};e["a"]={get:function t(){return c},chartSharingEnabled:function t(){var e=c.CHART_SHARING_ENABLED;return true===e||"true"===e},load:function t(){return s(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function t(i){while(1)switch(i.prev=i.next){case 0:if(!Object(r["b"])("PS_7141_CHARTSHARING")){i.next=7;break}e="".concat(o["a"].rootPath,"api/v1/sharing/settings");i.next=4;return a.a.get(e);case 4:n=i.sent;c.CHART_SHARING_ENABLED=n.data["enable-sharing"];c.MAX_RECIPIENTS=n.data.maxRecipients;case 7:case"end":return i.stop()}}),t)})))()}}},"5/nM":function(t,e,n){"use strict";var i=n("mWu2");var a=n("/2No");var o='<lui-dialog id="export-dialog">\n\t<div ng-if="state === states.PENDING">\n\t\t<lui-dialog-header q-translation="Export.Exporting"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<div class="qv-loader pb-10"></div>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="cancel()" q-translation="Common.Cancel"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.COMPLETED">\n\t\t<lui-dialog-header q-translation="Export.Completed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10">\n\t\t\t\t<span q-translation="Export.CompletedDescription"></span>\n\t\t\t\t<span q-translation="Export.WarningDataTruncated" ng-if="dataIsTruncated"></span>\n\t\t\t</p>\n\t\t\t<p class="pb-10">\n\t\t\t\t<a class="export-url" ng-href="{{exportUrl}}" target="_blank" q-translation="Export.CompletedLink"></a>\n\t\t\t</p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n\t<div ng-if="state === states.FAILED">\n\t\t<lui-dialog-header q-translation="Export.Failed"></lui-dialog-header>\n\t\t<lui-dialog-body class="export-dialog-body">\n\t\t\t<p class="pb-10" q-translation="{{errorTranslation}}"></p>\n\t\t</lui-dialog-body>\n\t\t<lui-dialog-footer>\n\t\t\t<lui-button ng-click="close()" q-translation="Common.Close"></lui-button>\n\t\t</lui-dialog-footer>\n\t</div>\n</lui-dialog>\n';var r=n("GWYG");var l=e["a"]={show:function t(e,n,r){return i["default"].getService("luiDialog").show({controller:["$scope",function(t){t.states={FAILED:-1,IDLE:0,PENDING:1,COMPLETED:2};t.state=t.states.PENDING;e.getLayout().then((function(i){var o=e.exportData(null,n,i.title||null);t.rpcId=o.requestId;o.then((function(e){t.exportUrl=a["a"].rootPath+e.qUrl.substring(1);t.state=t.states.COMPLETED;e.qWarnings&&1e3===e.qWarnings[0]&&(t.dataIsTruncated=true)}),(function(e){t.state=t.states.FAILED;t.errorTranslation="ErrorCode.".concat(e.code);e.isHandled=true}))}));t.openExportWindow=function(){window.open(t.exportUrl)};t.cancel=function(){t.rpcId?e.app.global.cancelRequest(t.rpcId).finally(t.close):t.close()};t.close=function(){t.destroyComponent();r&&r()}}],template:o})}}},"9ZdW":function(t,e,n){"use strict";var i=n("qIEf");var a=n.n(i);var o=n("mWu2");var r='<lui-tab-view id="download-dialog" aria-label="{{translate(\'Download.Aria.Dialog\')}}" class="lui-dialog" data-tid="dl-dialog">\n\t<div class="lui-dialog__header dd-header" ng-class="{ \'with-tabs\': !isSourceSheet() }">\n\t\t<div class="lui-dialog__title dd-title" q-translation="{{title}}"></div>\n\t\t<div class="dd-close" ng-click="$event.preventDefault(); close()" name="cancel" tid="download-cancel">\n\t\t\t<i class="lui-icon lui-icon--close lui-icon--small"></i>\n\t\t</div>\n\t\t<input ng-hide="true" ng-model="activeTab" aria-live="{{getChangedActiveTabAria(activeTab)}}" />\n\t\t<div class="dd-tabset-wrap" ng-show="!isSourceSheet()">\n\t\t\t<lui-tabset class="dd-tabset" active-tab="activeTab">\n\t\t\t\t<span ng-repeat="tab in tabList" q-title-translation="{{tab.disabled ? tab.disabledTitleKey : \'\'}}">\n\t\t\t\t\t<lui-tab \n\t\t\t\t\t\tng-if="!tab.hide && !tab.disabled"\n\t\t\t\t\t\ton-tab-selected="selectTab(tab.index)"\n\t\t\t\t\t\tref="{{tab.index}}"\n\t\t\t\t\t\tclass="dd-tab"\n\t\t\t\t\t\ttabindex="0"\n\t\t\t\t\t\taria-label="{{tab.aria}}"\n\t\t\t\t\t\tid="{{tab.id}}"\n\t\t\t\t\t\ttid="{{tab.tid}}">\n\t\t\t\t\t\t<i class="lui-icon lui-icon--{{tab.icon}} tab-icon"></i>\n\t\t\t\t\t\t<span q-translation="{{tab.translationKey}}"></span>\n\t\t\t\t\t</lui-tab>\n\t\t\t\t\t<div\n\t\t\t\t\t\tng-if="!tab.hide && tab.disabled"\n\t\t\t\t\t\tclass="lui-tab dd-tab lui-disabled"\n\t\t\t\t\t\tid="{{tab.id}}-disabled"\n\t\t\t\t\t\ttid="{{tab.tid}}-disabled">\n\t\t\t\t\t\t<i class="lui-icon lui-icon--{{tab.icon}} tab-icon"></i>\n\t\t\t\t\t\t<span q-translation="{{tab.translationKey}}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</lui-tabset>\n\t\t</div>\n\t</div>\n\n\t<div class="lui-dialog__body lui-nopad dd-body">\n\t\t<lui-tab-content ref="{{tabList[0].index}}" tid="{{tabList[0].ref}}" class="download-tab-content"><qv-download-image-tab></qv-download-image-tab></lui-tab-content>\n\t\t<lui-tab-content ref="{{tabList[1].index}}" tid="{{tabList[1].ref}}" class="download-tab-content"><qv-download-pdf-tab></qv-download-pdf-tab></lui-tab-content>\n\t\t<lui-tab-content ref="{{tabList[2].index}}" tid="{{tabList[2].ref}}" class="download-tab-content"><qv-download-data-tab></qv-download-data-tab></lui-tab-content>\n\t</div>\n\n\t<div class="lui-dialog__footer dd-footer">\n\t\t<div class="download-button-wrap">\n\t\t\t\x3c!-- Pending text --\x3e\n\t\t\t<div ng-if="isCurrentState(states.PENDING)" id="pendingText" class="marginRight" q-translation="{{tabList[activeTab].pendingKey}}"></div>\n\t\t\t<div ng-if="isCurrentState(states.PENDING)" id="pendingIcon" class="loading-screen marginRight"><div class="spinner"><div class="qv-loader"></div></div></div>\n\t\t\t\x3c!-- Failure text shown here only in Data tab --\x3e\n\t\t\t<div class="lui-text-danger" ng-if="activeTab === \'2\' && (tabS[activeTab].state < 0 )">\n\t\t\t\t<i class="lui-icon lui-icon--warning lui-icon--large download-warning-icon"></i>\n\t\t\t\t<span ng-show="isCurrentState(states.FAILED) || isCurrentState(states.TIMEOUT)"><span q-translation="Download.Error.Generic_1"></span>.</span>\n\t\t\t\t<span ng-show="isCurrentState(states.FAILED) || isCurrentState(states.TIMEOUT)"><span q-translation="Download.Error.Generic_2"></span>.</span>\n\t\t\t\t<span ng-show="isCurrentState(states.NODATA)"><span q-translation="Download.Data.NoData"></span>.</span>\n\t\t\t</div>\n\t\t\t\x3c!-- Download button --\x3e\n\t\t\t<lui-button\n\t\t\t\tng-show="isCurrentState(states.PENDING) || isCurrentState(states.COMPLETED) || isCurrentState(states.NODATA)"\n\t\t\t\tng-click="downloadFile()" \n\t\t\t\tclass="lui-button lui-button--success dd-button download-button" \n\t\t\t\tng-class="{ \'dd-disabled lui-disabled\': isCurrentState(states.PENDING) || isCurrentState(states.NODATA) || tabS[activeTab].getModifyingCustomSize() }" \n\t\t\t\ttid="download-export"\n\t\t\t\tq-translation="Download.Title" \n\t\t\t\taria-label="{{translate(\'Download.Aria.DownloadButton\')}}">\n\t\t\t</lui-button>\n\t\t\t\x3c!-- Try Again button --\x3e\n\t\t\t<lui-button \n\t\t\t\tng-show="isCurrentState(states.FAILED) || isCurrentState(states.TIMEOUT)"\n\t\t\t\tqva-activate="$event.preventDefault(); tabS[activeTab].printUrl = \'\'; tabS[activeTab].doCallLocal();" \n\t\t\t\tname="confirm" \n\t\t\t\tid="download-try-again" \n\t\t\t\ttid="download-try-again" \n\t\t\t\tclass="lui-button--warning dd-button download-try-again-button" \n\t\t\t\tq-translation="Common.TryAgain" \n\t\t\t\taria-label="{{translate(\'Download.Aria.TryAgainButton\')}}">\n\t\t\t</lui-button>\n\t\t</div>\n\t</div>\n</lui-tab-view>\n';var l=n("52II");var s='<div id="download-data">\n    <div class="section section-with-bottom">{{translate(\'Download.Data.Message\')}}</div>\n</div>\n';var c=n("hIUR");function d(t){t.fileType="xlsx";t.doCallLocal=e;function e(){t.print={};t.print.hasNoDataToExport=c["a"].hasNoDataToExport(t.input.object.layout);t.doCall(2)}var n=false;t.attemptFirstCall=i;function i(){if(!n){e();n=true}}t.injectScopeToParent(2,t)}var u={directiveLinkFunction:d};var p='<div id="download-pdf">\n\t<div class="preview-section preview-section-pdf">\n\t\t<dd-pdf-preview states="states" state="state" preview-disabled="optionChanged && state === states.PENDING" current-orientation-index="currentOrientationIndex" status-code="statusCode" preview-url="embedUrl"></dd-pdf-preview>\n\t</div>\n\n\t<div class="section form-element" ng-show="paperFormat.show">\n\t\t<div class="form-label" q-translation="{{paperFormat.title}}"></div>\n\t\t<div class="form-input" aria-label="{{translate(paperFormat.aria)}}">\n\t\t\t<lui-select\n\t\t\t\ttid="download-pdf-paper-format"\n\t\t\t\tx-change="onFormChange()"\n\t\t\t\tx-model="selectedPaperFormat"\n\t\t\t\tx-options="paperFormatOpt.label for paperFormatOpt in paperFormat.options">\n\t\t\t</lui-select>\n\t\t</div>\n\t</div>\n\n\t<div class="section form-element form-rbtns" ng-show="orientation.show">\n\t\t<lui-radiobutton tid="download-pdf-landscape" id="download-pdf-landscape" value=1 x-model="currentOrientationIndex"><span q-translation="{{orientation.options[1].translationKey}}"></span></lui-radiobutton>\n\t\t<lui-radiobutton tid="download-pdf-portrait" id="download-pdf-portrait" value=0 x-model="currentOrientationIndex"><span q-translation="{{orientation.options[0].translationKey}}"></span></lui-radiobutton>\n\t</div>\n\n\t<div class="section section-with-bottom form-element" ng-show="size.show">\n\t\t<div class="form-label" q-translation="{{size.title}}"></div>\n\t\t<div class="form-input" aria-label="{{translate(size.aria)}}">\n\t\t\t<lui-select\n\t\t\t\ttid="download-pdf-size"\n\t\t\t\tx-change="onFormChange()"\n\t\t\t\tx-model="selectedFitCriteria"\n\t\t\t\tx-options="sizeOpt.label for sizeOpt in size.options">\n\t\t\t</lui-select>\n\t\t</div>\n\t</div>\n</div>\n';var v=n("8QXK");var g=n("tdr+");var f='<div class="dd-preview dd-preview-pdf">\n    <div class="preview" ng-class="{\'dd-opacity-0 dd-hidden\': !(state && state === states.COMPLETED) }">\n        <div class="preview-content preview-content-pdf">\n            <div class="preview-embed-wrap-pdf" ng-class="{\'dd-opacity-0\': showPreviewNotAvailable()}">\n                <iframe \n                    width="100%"\n                    height="99%"\n                    tabindex="-1" \n                    class="preview-pdf" \n                    ng-class="{ \'preview-pdf-l\': currentOrientationIndex == 1, \'preview-pdf-p\': currentOrientationIndex == 0, \'preview-disabled\': previewDisabled }"\n                    ng-hide="!previewUrl"\n                    ng-src="{{previewUrl}}"\n                    tid="download-preview" \n                    type="application/pdf">\n                </iframe>\n            </div>\n        </div>\n        <div ng-show="showPreviewNotAvailable()" tid="unavailable-status" id="unavailable-status" class="status-wrap">\n            <div class="lui-icon lui-icon--warning status-icon"></div>\n            <div class="status-text">\n                <div class="st-header" q-translation="Download.PreviewNotAvailable"></div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="state === states.FAILED || !state" tid="failed-status" id="failed-status" class="status-wrap">\n        <div class="lui-icon lui-icon--warning status-icon"></div>\n        <div class="status-text">\n            <div class="st-header" q-translation="Download.Error.Generic_1"></div>\n            <div ng-switch="statusCode">\n                <div ng-switch-when="413" q-translation="Download.Error.Selections"></div>\n                <div ng-switch-default q-translation="Download.Error.Generic_2"></div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="state === states.TIMEOUT" tid="timeout-status" id="timeout-status" class="status-wrap">\n        <div class="lui-icon lui-icon--idle status-icon"></div>\n        <div class="status-text">\n            <div q-translation="Download.PDF.Timeout" class="st-header"></div>\n            <div q-translation="Download.Error.Generic_2"></div>\n        </div>\n    </div>\n    <div ng-if="state === states.PENDING" tid="pending-status" id="pending-status" class="status-wrap"> \n        <div class="status-spinner">\n            <div class="spinner">\n                <div class="qv-loader white"></div>\n            </div>\n        </div>\n        <div class="status-text">\n            <div q-translation="Download.PendingPreview" class="st-header"></div>\n        </div>\n    </div>\n</div>\n';o["default"].directive("ddPdfPreview",[function(){return{restrict:"E",template:f,replace:true,scope:{state:"=",states:"=",previewDisabled:"=",currentOrientationIndex:"=",statusCode:"=",previewUrl:"="},link:function t(e,n){e.showPreviewNotAvailable=i;function i(){if(!e.previewUrl)return true;try{var t=n[0].querySelector("iframe.preview-pdf").contentWindow.document.getElementsByTagName("body");return!!t.length&&!t[0].children.length}catch(t){return false}}}}}]);function h(t){t.fileType="pdf";t.doCallLocal=s;t.onFormChange=l;t.onOrientationChange=r;t.embedUrl="";var e="";t.$watch("printUrl",n);function n(n){if(n&&n!==e){e=n;var i=o["default"].getService("$timeout");g["a"].getPdfEmbedUrl(e).then((function(e){i((function(){t.embedUrl=t.sce.trustAsResourceUrl("".concat(e,"#zoom=42"))}))}),(function(){t.embedUrl=""}))}}var i=v["a"].getForPdf();t.paperFormat=i.paperFormat;t.selectedPaperFormat=t.paperFormat.options[1];t.size=i.size;t.selectedFitCriteria=t.size.options[1];t.orientation=i.orientation;t.currentOrientationIndex="1";var a=true;t.$watch("currentOrientationIndex",r);function r(t){c(t);a?a=false:l()}function l(){t.printUrl="";t.embedUrl="";t.optionChanged=true;s()}function s(){t.print={};t.print.dpi=200;t.minDpi=72;t.maxDpi=300;t.selectedSize=t.selectedPaperFormat;t.selectedLayout=t.orientation.options[t.currentOrientationIndex];t.print.fitCriteria=t.selectedFitCriteria.value;t.doCall(1)}function c(e){var n=t.orientation.options[e];if(!n||!n.orientation)return;t.paperFormat.options.forEach((function(t){t.setLabel(n.orientation)}))}var d=false;t.attemptFirstCall=u;function u(){if(!d){s();d=true}}t.injectScopeToParent(1,t)}var m={directiveLinkFunction:h};var b='<div id="download-image">\n\t<div class="preview-section preview-section-image">\n\t\t<dd-image-preview state="state" states="states" preview-url="printUrl" disable-preview="getModifyingCustomSize()" top-text="getSummaryText(1)" bottom-text="getSummaryText(0)"></dd-image-preview>\n\t</div>\n\t\x3c!-- Data Area select --\x3e\n\t<div class="section" ng-class="{\'section-with-bottom\': !scale.show}" ng-if="dataArea.show">\n\t\t<div class="sub-section form-element">\n\t\t\t<div class="form-label" q-translation="{{dataArea.title}}" q-title-translation="{{dataArea.tooltip}}"></div>\n\t\t\t<div class="form-input" aria-label="{{translate(dataArea.title)}}">\n\t\t\t\t<lui-select\n\t\t\t\t\tid="download-image-data-area"\n\t\t\t\t\ttid="download-image-data-area"\n\t\t\t\t\tx-model="selectedDataArea"\n\t\t\t\t\tx-change="onDataAreaChange()"\n\t\t\t\t\tx-options="dataAreaOpt.label for dataAreaOpt in dataArea.options">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!-- Data Area width/ height inputs --\x3e\n\t\t<div ng-show="selectedDataArea.isCustom" class="download-customSize" id="download-custom-data-area" tid="download-custom-data-area">\n\t\t\t<div class="download-customSize-form dcf-with-top-bottom">\n\t\t\t\t<div class="form-content">\n\t\t\t\t\t<div class="form-label" q-translation="Common.Width"></div>\n\t\t\t\t\t   <dd-input \n\t\t\t\t\t\t\t  ng-class="{\'lui-invalid\': width.percError}"\n\t\t\t\t\t\t\t  on-blur="changeCustomSize(1)" \n\t\t\t\t\t\t\t  model="width.percentageValue" \n\t\t\t\t\t\t\t  on-change="width.onDynamicPercentageChange()"\n\t\t\t\t\t\t\t  on-enter="changeCustomSize(1)"\n\t\t\t\t\t\t\t  tid="download-custom-width-percentage" id="download-custom-width-percentage" \n\t\t\t\t\t\t\t  aria-label="{{translate(\'Download.Aria.Image.CustomSizeWidth\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t<div class="download-customSize-unit">%</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\x3c!-- Data Area - Height --\x3e\n\t\t\t<div class="download-customSize-form">\n\t\t\t\t<div class="form-content">\n\t\t\t\t\t<div class="form-label" q-translation="Common.Height"></div>\n\t\t\t\t\t\t<dd-input \n\t\t\t\t\t\t\tng-class="{\'lui-invalid\': height.percError}"\n\t\t\t\t\t\t\ton-blur="changeCustomSize(2)" \n\t\t\t\t\t\t\tmodel="height.percentageValue" \n\t\t\t\t\t\t\ton-change="height.onDynamicPercentageChange()"\n\t\t\t\t\t\t\ton-enter="changeCustomSize(2)"\n\t\t\t\t\t\t\ttid="download-custom-height-percentage" id="download-custom-height-percentage" \n\t\t\t\t\t\t\taria-label="{{translate(\'Download.Aria.Image.CustomSizeHeight\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t\t<div class="download-customSize-unit">%</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="download-customSize-hint" ng-show="selectedDataArea.isCustom">\n\t\t\t\t<span q-translation="{{dataArea.hint}}"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t\x3c!-- Scale select --\x3e\n\t<div class="section section-with-bottom" ng-if="scale.show">\n\t\t<div class="sub-section form-element">\n\t\t\t<div class="form-label" q-translation="{{scale.title}}" q-title-translation="{{scale.tooltip}}"></div>\n\t\t\t<div class="form-input" aria-label="{{translate(scale.title)}}">\n\t\t\t\t<lui-select\n\t\t\t\t\tid="download-image-scale"\n\t\t\t\t\ttid="download-image-scale"\n\t\t\t\t\tx-model="selectedScale"\n\t\t\t\t\tx-change="onScaleChange()"\n\t\t\t\t\tx-options="scaleOpt.label for scaleOpt in scale.options">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!-- Scale - Custom input --\x3e\n\t\t<div ng-show="selectedScale.isCustom" class="sub-section download-customSize" id="download-custom-scale" tid="download-custom-scale">\n\t\t\t<div class="download-customSize-form-wrap">\n\t\t\t\t<div>\n\t\t\t\t\t<div class="download-customSize-form dcf-with-top-bottom">\n\t\t\t\t\t\t<div class="form-content">\n\t\t\t\t\t\t\t<div class="form-label" q-translation="Common.Width"></div>\n\t\t\t\t\t\t\t\t<dd-input\n\t\t\t\t\t\t\t\t\t\tng-class="{\'lui-invalid\': width.pxError}"\n\t\t\t\t\t\t\t\t\t\ton-blur="changeCustomSize(1)" \n\t\t\t\t\t\t\t\t\t\tmodel="width.current" \n\t\t\t\t\t\t\t\t\t\ton-change="width.onDynamicPixelChange()"\n\t\t\t\t\t\t\t\t\t\ton-enter="changeCustomSize(1)"\n\t\t\t\t\t\t\t\t\t\ttid="download-custom-width-pixels" id="download-custom-width-pixels" \n\t\t\t\t\t\t\t\t\t\taria-label="{{translate(\'Download.Aria.Image.CustomSizeWidth\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t\t\t<div class="download-customSize-unit" q-translation="Common.px"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- Data Area - Height --\x3e\n\t\t\t\t\t<div class="download-customSize-form">\n\t\t\t\t\t\t<div class="form-content">\n\t\t\t\t\t\t\t<div class="form-label" q-translation="Common.Height"></div>\n\t\t\t\t\t\t\t\t<dd-input \n\t\t\t\t\t\t\t\t\tng-class="{\'lui-invalid\': height.pxError}"\n\t\t\t\t\t\t\t\t\ton-blur="changeCustomSize(2)" \n\t\t\t\t\t\t\t\t\tmodel="height.current" \n\t\t\t\t\t\t\t\t\ton-change="height.onDynamicPixelChange()"\n\t\t\t\t\t\t\t\t\ton-enter="changeCustomSize(2)"\n\t\t\t\t\t\t\t\t\ttid="download-custom-height-pixels" id="download-custom-height-pixels" \n\t\t\t\t\t\t\t\t\taria-label="{{translate(\'Download.Aria.Image.CustomSizeHeight\')}}. {{translate(\'Download.Aria.Image.CustomSizeGeneral\')}}">\n\t\t\t\t\t\t\t\t</dd-input>\n\t\t\t\t\t\t\t<div class="download-customSize-unit" q-translation="Common.px"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="download-customSize-hint">\n\t\t\t\t<span q-translation="{{scale.hint}}"></span>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>\n';var w=n("n7R4");var S=n("6uJb");var y='<div class="dd-preview dd-preview-image">\n    <div class="preview" ng-hide="hidePreviewCondition()">\n        <div class="preview-text pt-top">{{topText}}</div>\n        <div class="preview-separator"></div>\n        <div class="preview-content preview-content-image" >\n            <img \n            class="preview-image"\n            tid="download-preview" \n            ng-src="{{previewUrl}}" \n            ng-class="{ \'preview-disabled\': disablePreviewCondition() }"\n            imageonload\n            loaded="imageLoaded"\n            />\n        </div>\n        <div class="preview-separator"></div>\n        <div class="preview-text pt-bottom">{{bottomText}}</div>\n    </div>\n    <div ng-if="state === states.PENDING" class="status-wrap" tid="pending-status" id="pending-status"> \n        <div class="status-spinner">\n            <div class="spinner">\n                <div class="qv-loader white"></div>\n            </div>\n        </div>\n        <div class="status-text">\n            <div q-translation="Download.PendingPreview" class="st-header"></div>\n        </div>\n    </div>\n    <div ng-if="state === states.FAILED || !state" tid="failed-status" id="failed-status" class="status-wrap">\n        <div class="lui-icon lui-icon--warning status-icon"></div>\n        <div class="status-text">\n            <div class="st-header" q-translation="Download.Error.Generic_1"></div>\n            <div ng-switch="statusCode">\n                <div ng-switch-when="413" q-translation="Download.Error.Selections"></div>\n                <div ng-switch-default q-translation="Download.Error.Generic_2"></div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="state === states.TIMEOUT" tid="timeout-status" id="timeout-status" class="status-wrap">\n        <div class="lui-icon lui-icon--idle status-icon"></div>\n        <div class="status-text">\n            <div q-translation="Download.Image.Timeout" class="st-header"></div>\n            <div q-translation="Download.Error.Generic_2"></div>\n        </div>\n    </div>\n</div>\n';o["default"].directive("ddImagePreview",[function(){return{restrict:"E",template:y,replace:true,scope:{state:"=",states:"=",disablePreview:"=",topText:"=",bottomText:"=",previewUrl:"="},link:function t(e){e.$watch("state",n);function n(t){t===e.states.PENDING&&(e.imageLoaded=false)}e.translate=S["default"].get;e.hidePreviewCondition=i;function i(){return!e.state||!e.previewUrl||e.state!==e.states.COMPLETED}e.hidePendingCondition=a;function a(){return e.state!==e.states.PENDING}e.disablePreviewCondition=o;function o(){return e.state===e.states.PENDING||e.disablePreview}}}}]);function x(t){t.fileType="png";t.doCallLocal=x;t.changeCustomSize=D;t.onFormChange=f;t.onDataAreaChange=h;t.onScaleChange=b;t.getModifyingCustomSize=C;t.getSummaryText=P;t.currentDpi=t.input.currentDpi;var e=100;var n=t.input.currentWidth/t.input.currentHeight;t.maxSize=4e3;t.minSize=8;t.maxDpi=300;function i(t){return w["a"].verifyPercentage(t)}function a(t,e){if(t)return i(t);return i(e)}function o(e,i){var a="width"===e.dimensionName?e:i;var o="height"===e.dimensionName?e:i;var r=n*(a.percentageValue/o.percentageValue);var l="width"===e.dimensionName?e.current/r:e.current*r;return I(Math.round(l),0,t.maxSize,true)}function r(t,e){return w["a"].reduceByPercentage(t,e)}function l(e,n){return w["a"].calculateInitialDimensions(e,n,w["a"].getDpiMultiplierValue(e,n,t.maxSize),t.maxSize)}function s(e,n){if(e.current){var i=I(e.current,0,t.maxSize,true);e.current=i.value;e.pxError=I(i.value,t.minSize,t.maxSize).error;var a=o(e,n);n.current=a.value;n.pxError=I(n.current,t.minSize,t.maxSize).error;a.error&&(e.current=o(n,e).value);e.modifying=w["a"].wasDimensionModified(e);t.dpiMultiplier=e.current/(e.orig*(e.percentageValue/100))*2;var l=t.dpiMultiplier*t.currentDpi;if(l>t.maxDpi){var s=c(100*(l-t.maxDpi)/l);t.dpiMultiplier=c(r(t.dpiMultiplier,s));e.current=Math.round(r(e.current,s));n.current=Math.round(r(n.current,s))}e.modifying=w["a"].wasDimensionModified(e);e.fallback=e.current;n.fallback=n.current}else e.pxError=true;e.modifying=w["a"].wasDimensionModified(e)}function c(t){return t.toFixed(3)}function d(e){var n=i(e.percentageValue);var a=Math.floor(n.value/100*e.orig);var o=I(a,8,t.maxSize);e.current=o.value;if(n.error)e.percError=true;else{if(o.error&&"max"===o.errorType){e.percentageValue=Math.floor(e.current/e.orig*100);e.current=Math.floor(e.percentageValue/100*e.orig)}e.percError=false;e.modifying=w["a"].wasDimensionModified(e)}t.width.fallback=t.width.current;t.height.fallback=t.height.current}var u=l(t.input.currentWidth,t.input.currentHeight);t.dpiMultiplier=u.dpi;t.width={dimensionName:"width",orig:u.w,prev:u.w,current:u.w,fallback:u.w,percentageValue:e,percentageFallback:e,modifying:false,min:8,max:t.maxSize,onDynamicPixelChange:function e(){s(t.width,t.height)},onDynamicPercentageChange:function e(){if(t.width.percentageValue){p();d(t.width);d(t.height);t.width.percentageFallback=t.width.percentageValue}else t.width.percError=true}};t.height={dimensionName:"height",orig:u.h,prev:u.h,current:u.h,fallback:u.h,percentageValue:e,percentageFallback:e,modifying:false,min:8,max:t.maxSize,onDynamicPixelChange:function e(){s(t.height,t.width)},onDynamicPercentageChange:function e(){if(t.height.percentageValue){p();d(t.width);d(t.height);t.height.percentageFallback=t.height.percentageValue}else t.height.percError=true}};function p(){t.width.current=t.width.orig;t.height.current=t.height.orig;t.dpiMultiplier=w["a"].getDpiMultiplierValue(t.width.current,t.height.current,t.maxSize)}var g=v["a"].getForImage(t.input.object);t.dataArea=g.dataArea;t.selectedDataArea=t.dataArea.options[0];t.scale=g.scale;t.selectedScale=t.scale.options[0];function f(){t.width.prev=t.width.current;t.height.prev=t.height.current;t.width.modifying=false;t.height.modifying=false;t.printUrl="";x()}function h(){if(t.selectedDataArea.isDefault&&(t.width.current!==t.width.orig||t.height.current!==t.height.orig)){t.width.current=t.width.orig;t.height.current=t.height.orig;t.width.percentageValue=e;t.height.percentageValue=e;f()}if(t.selectedDataArea.isMax){var n=4e3;var i=2500;if(t.width.current!==n||t.height.current!==i){t.width.current=n;t.height.current=i;f()}}}function m(){var e=t.width.current!==y(t.width);var n=t.height.current!==y(t.height);var i=t.dpiMultiplier!==w["a"].getDpiMultiplierValue(t.width.current,t.height.current,t.maxSize);return e||n||i}function b(){if(t.selectedScale.isDefault&&m()){t.width.current=y(t.width);t.height.current=y(t.height);t.dpiMultiplier=w["a"].getDpiMultiplierValue(t.width.current,t.height.current,t.maxSize);f()}}function y(t){return Math.floor(t.orig*t.percentageValue/100)}function x(){t.print={};t.print.minSize=t.minSize;t.print.width=t.width.current;t.print.height=t.height.current;t.print.dpi=t.dpiMultiplier?Math.floor(t.currentDpi*t.dpiMultiplier):t.currentDpi;t.width.percentageValue=i(t.width.percentageValue).value;t.height.percentageValue=i(t.height.percentageValue).value;t.imageCustomSize=true;t.print.format="png";t.prevPrintUrl=t.printUrl;t.doCall(0)}function D(){j();t.width.current=k(t.width.current,t.minSize,t.maxSize,false,t.width.fallback).value;t.height.current=k(t.height.current,t.minSize,t.maxSize,false,t.height.fallback).value;t.width.percentageValue=a(t.width.percentageValue,t.width.percentageFallback).value;t.height.percentageValue=a(t.height.percentageValue,t.height.percentageFallback).value;t.dpiMultiplier=w["a"].getDpiMultiplierValue(t.width.current,t.height.current,t.maxSize);t.width.prev===t.width.current&&t.height.prev===t.height.current||f()}function I(t,e,n,i){return w["a"].verifySizeRange(t,e,n,i)}function C(){return t.width.modifying||t.height.modifying}function k(t,e,n,i,a){if(!t&&a)return I(a,e,n,i);return I(t,e,n,i,a)}function P(e){switch(e){case 0:var n;var i=null!==(n=t.dpiMultiplier)&&void 0!==n?n:1;var a=k(t.width.current,t.minSize,t.maxSize,false,t.width.fallback).value*i;var o=k(t.height.current,t.minSize,t.maxSize,false,t.height.fallback).value*i;return"".concat(a," x ").concat(o," ").concat(t.translate("Common.px"));case 1:return S["default"].get("Common.Preview");default:return""}}var E=false;t.attemptFirstCall=T;function T(){if(!E){x();E=true}}t.injectScopeToParent(0,t);function j(){t.width.percError=false;t.width.pxError=false;t.height.percError=false;t.height.pxError=false}}var D={directiveLinkFunction:x};var I=n("RZ9f");var C=n("ydY7");var k=n("kXRb");o["default"].directive("imageonload",[function(){return{restrict:"A",scope:{loaded:"="},template:"<img />",link:function t(e,n){n.bind("load",(function(){e.loaded=true;e.$apply("loaded")}))}}}]);var P='<input type="text" class="lui-input form-input dd-input" min="0" maxlength="5"\n  ng-change="change()" \n  ng-model="model" \n  ng-blur="onBlur()" \n  ng-focus="onFocus()"\n  ng-keydown="onKeyDown($event)" />\n';var E=["$scope","$timeout",function(t,e){t.prev=t.model;t.onKeyDown=function(e){switch(e.which){case 13:t.onEnter();break;case 38:t.model++;n();break;case 40:t.model--;n();break;default:break}};t.change=n;function n(){t.model=parseInt(t.model,10);e((function(){t.onChange()}))}}];o["default"].directive("ddInput",[function(){return{restrict:"E",require:"ngModel",replace:true,scope:{onChange:"&",model:"=",onBlur:"&",onEnter:"&",onFocus:"&"},template:P,controller:E,link:function t(e,n,i,a){function o(t){if(t){var e=t.replace(/[^0-9]/g,"");if(e!==t){a.$setViewValue(e);a.$render()}return e}return}a.$parsers.push(o)}}}]);function T(t,e,n,i){var a="Download.Title";var l=Object(k["a"])();var s=o["default"].getService("luiDialog").show({controller:L,template:r,input:{title:a,object:t,sourceType:i||"visualization",currentWidth:e,currentHeight:n,currentDpi:l}});s.closed.then((function(){g["a"].cancel()}))}function j(t,e){var n;var i="GlobalMenu.DownloadSheetToPdf";n=t.isCustomSize()?a()("#grid"):a()(".qvt-sheet > .sheet-grid");var l=Math.round(n.width()||960);var s=Math.round(n.height()||720);var c=Object(k["a"])();var d=o["default"].getService("luiDialog").show({controller:L,template:r,input:{title:i,object:e,sourceType:"sheet",currentWidth:l,currentHeight:s,currentDpi:c}});d.closed.then((function(){g["a"].cancel()}))}var q;L.$inject=["$scope"];function L(t){q=t;t.states=g["a"].getStates();t.tabS=[];t.getChangedActiveTabAria=l;t.getCurrentlyActiveTabAria=s;t.translate=S["default"].get;t.title=t.input.title;t.selectTab=n;t.tabList=r();var e={sourceType:t.sourceType};"visualization"===t.sourceType&&(e.chartType=C["a"].get(t.object));I["a"].trackEvent(I["a"].customEvents.DOWNLOAD_DIALOG_OPEN,e);t.closingDeferred.promise.then((function(){t.closingDialog=true}));function n(e){if(!t.closingDialog){t.activeTab=e;t.tabS[e]&&t.tabS[e].attemptFirstCall&&t.tabS[e].attemptFirstCall()}}t.injectTab=i;function i(e,n){!t.tabList||t.tabList[e].hide||t.tabList[e].disabled?t.tabS[e]={}:t.tabS[e]=n}t.doCall=a;function a(e){var n=t.tabS[e];var i=t.tabList[e].ref;return z(n,i)}t.isSourceSheet=o;function o(){return"sheet"===t.sourceType}function r(){var e=[{ref:"image",index:"0",aria:"".concat(S["default"].get("Download.Aria.TabCurrentlyOnImage")," ").concat(S["default"].get("Download.Aria.TabImage")),id:"download-image-tab",tid:"download-image-tab",translationKey:"Download.Image.TabTitle",icon:"image",pendingKey:"Download.Image.Pending"},{ref:"pdf",index:"1",aria:"".concat(S["default"].get("Download.Aria.TabCurrentlyOnPDF")," ").concat(S["default"].get("Download.Aria.TabPDF")),id:"download-pdf-tab",tid:"download-pdf-tab",translationKey:"Download.PDF.TabTitle",icon:"file",pendingKey:"Download.PDF.Pending"},{ref:"data",index:"2",aria:"".concat(S["default"].get("Download.Aria.TabCurrentlyOnData")," ").concat(S["default"].get("Download.Aria.TabData")),id:"download-data-tab",tid:"download-data-tab",translationKey:"Common.Data",icon:"table",pendingKey:"Download.Data.Pending",disabledTitleKey:"Download.Data.NoData"}];if(o()){e[0].hide=true;e[2].hide=true}else{e[0].disabled=!t.object.supportExport();e[1].disabled=!t.object.supportExport();e[2].disabled=!t.object.supportExportData()}return e}function l(e){switch(e){case t.tabList[0].ref:return t.translate("Download.Aria.TabChangedToImage");case t.tabList[1].ref:return t.translate("Download.Aria.TabChangedToPDF");case t.tabList[2].ref:return t.translate("Download.Aria.TabChangedToData");default:return""}}function s(e){switch(e&&t.tabList){case t.tabList[0].ref:return t.translate("Download.Aria.TabCurrentlyOnImage");case t.tabList[1].ref:return t.translate("Download.Aria.TabCurrentlyOnPDF");case t.tabList[2].ref:return t.translate("Download.Aria.TabCurrentlyOnData");default:return""}}t.downloadFile=d;function d(){var n=t.tabS[t.activeTab].printUrl;var i=t.tabS[t.activeTab].printFileName;var a=t.tabS[t.activeTab].fileType;e.fileType=a;I["a"].trackEvent(I["a"].customEvents.DOWNLOAD_CONFIRMED,e);var o=function e(){t.tabS[t.activeTab].state=t.states.FAILED};g["a"].downloadFile(n,i,a,o)}t.isCurrentState=u;function u(e){return c["a"].checkCurrentState(t.tabS,t.activeTab,e)}}var A={pdf:{directive:"qvDownloadPdfTab",template:p,link:m.directiveLinkFunction},image:{directive:"qvDownloadImageTab",template:b,link:D.directiveLinkFunction},data:{directive:"qvDownloadDataTab",template:s,link:u.directiveLinkFunction}};o["default"].directive(A.image.directive,[function(){return O(A.image)}]);o["default"].directive(A.pdf.directive,[function(){return O(A.pdf)}]);o["default"].directive(A.data.directive,[function(){return O(A.data)}]);function O(t){return{restrict:"E",template:t.template,replace:true,scope:{},controller:["$scope","$sce",function(e,n){e.sce=n;e.input=q.input;e.states=q.states;if(e.input.object){var i="visualization"===e.input.sourceType?e.input.object.model:e.input.object;var a=i.id;var o={id:a,model:i,options:{id:a,isVisible:true,isOnGrid:false,isZoomed:false}};e.obj=o;e.translate=S["default"].get}e.doCall=q.doCall;e.injectScopeToParent=q.injectTab;t.link(e)}]}}function z(t,e){var n=l["a"].create(t);return n.confirm(e)}var M=e["a"]={show:T,showForGlobalMenu:j}},EdSF:function(t,e,n){"use strict";var i=n("mWu2");var a='<lui-dialog class="qv-developer-dialog" style="min-width: 350px;">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title>Developer</lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body>\n\t\t<div style="margin-top: 5px;">\n\t\t\t<span style="font-weight: bold;">Object ID</span>\n\t\t\t<input readonly="readonly" ng-model="layout.qInfo.qId" style="display: inline-block; text-align: right; border: none; cursor: text;"/>\n\t\t</div>\n\t\t\n\t\t<div style="margin-top: 8px; font-weight: bold;" ng-click="toggleProperties()">\n\t\t\t<span>Properties</span>\n\t\t\t<span class="lui-icon lui-icon--small" ng-class="state.propertiesExpanded ? \'lui-icon--triangle-top\' : \'lui-icon--triangle-right\'"\n\t\t\t\tstyle="cursor: pointer; margin-left: 5px;">\n\t\t\t</span>\n\t\t</div>\n\t\t<div ng-if="state.propertiesExpanded" style="margin-top: 5px;">\n\t\t\t<textarea type="text" rows="15" class="lui-textarea" ng-readonly="!layout.permissions.update"\n\t\t\t\tng-model="formattedProperties" ng-change="change()" ng-model-options="{ updateOn: \'blur\' }">\n\t\t\t</textarea>\n\t\t</div>\n\t\n\t\t<div style="margin-top: 8px; font-weight: bold;" ng-click="state.layoutExpanded = !state.layoutExpanded">\n\t\t\t<span>Layout</span>\n\t\t\t<span class="lui-icon lui-icon--small" ng-class="state.layoutExpanded ? \'lui-icon--triangle-top\' : \'lui-icon--triangle-right\'"\n\t\t\t\tstyle="cursor: pointer; margin-left: 5px;">\n\t\t\t</span>\n\t\t</div>\n\t\t<div ng-if="state.layoutExpanded" style="margin-top: 5px;">\n\t\t\t<textarea type="text" rows="15" class="lui-textarea" readonly="true" ng-model="formattedLayout"></textarea>\n\t\t</div>\n\t\n\t\t<div style="margin: 12px 5px; border-top: 1px solid #b3b3b3"></div>\n\t\n\t\t<div style="margin-top: 8px;" ng-if="layout.qInfo.qType !== \'slideitem\'">\n\t\t\t<div style="margin-top: 8px;">\n\t\t\t\t<a href="javascript:void(0)" target="_blank" ng-click="clickSingleIntegratorLink( $event );">\n\t\t\t\t\tOpen in single configurator <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\n\t\t\t<div style="margin-top: 8px;">\n\t\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLink( $event );">\n\t\t\t\t\tTest exporting <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t</a>&nbsp;&nbsp;\n\t\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLinkFull( $event );">\n\t\t\t\t\tTest window sized export <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div style="margin-top: 8px;">\n\t\t\t\tTest Live mashup: \n\t\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLiveLink( $event, \'object\' );">\n\t\t\t\t\tObject&nbsp;<span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t</a>&nbsp;&nbsp;\n\t\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLiveLink( $event, \'sheet\' );">\n\t\t\t\t\tSheet&nbsp;<span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div style="margin-top: 8px;" ng-if="layout.qInfo.qType === \'slideitem\'">\n\t\t\t<div style="margin-top: 8px;">\n\t\t\t\tStory object: \n\t\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLiveLink( $event, \'slideitem\', \'render\' );">\n\t\t\t\t\trender in live mashup <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t</a>\n\t\t\t\t<span ng-if="layout.visualization === \'text\'">\n\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLiveLink( $event, \'slideitem\', \'html\' );">\n\t\t\t\t\t\treturn text html in console <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t\t<span ng-if="layout.visualization === \'shape\'">\n\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t<a href="javascript:void(0)" ng-click="clickPrintLiveLink( $event, \'slideitem\', \'svg\' );">\n\t\t\t\t\t\treturn shape svg xml in console <span class="lui-icon  lui-icon--new-tab lui-icon--small"></span>\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button tid="developer-dialog-close" ng-click="close(true);" qva-focus="true">{{::closeLabel}}</lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n';var o=n("6uJb");var r=n("/2No");var l=n("GbxD");var s=n("6Z/P");var c=n("UV1h");var d=n("sWge");var u=n("4qf9");var p=e["a"]={show:function t(e,n){i["default"].getService("luiDialog").show({controller:["$scope","$element",function(t,i){t.layout=n.model.layout;t.closeLabel=o["default"].get("Common.Close");t.title="Developer";i.on("keyup,keydown",(function(t){t.stopPropagation()}));t.state={layoutExpanded:false,propertiesExpanded:false};t.toggleProperties=function(){t.state.propertiesExpanded?t.state.propertiesExpanded=false:n.model.getProperties().then((function(e){t.properties=e;t.state.propertiesExpanded=true}))};Object.defineProperty(t,"formattedLayout",{get:function t(){return JSON.stringify(n.model.layout,null,2)}});Object.defineProperty(t,"formattedProperties",{get:function e(){return JSON.stringify(t.properties||{},null,2)},set:function e(i){var a=JSON.parse(i);a.qInfo.qId=n.model.layout.qInfo.qId;n.model.setProperties(a);t.properties=a}});t.clickPrintLink=function(t){t.preventDefault();d["a"].all([n.model.app.getLayout(),n.getSnapshotLayout()]).then((function(t){var e=t[0];var i=t[1];var a=n.model.layout.qInfo.qId+Date.now();localStorage.setItem("print-".concat(a),JSON.stringify({data:i,language:o["default"].language,appLocaleInfo:e.qLocaleInfo,options:{themeName:c["a"].getCurrentTheme()}}));var l="".concat(r["a"].localResourcesPath,"printing-snapshot.html?callback=fromLocalStorage&printId=").concat(a);window.open(l,"_blank")}))};t.clickPrintLinkFull=function(t){t.preventDefault();d["a"].all([u["a"].snapshot(n.model.id,"object",{size:{width:document.body.clientWidth,height:document.body.clientHeight},source:n,sourceSize:{width:100,height:100},sheetLayout:"grid"})]).then((function(t){var e=t[0];var i=n.model.layout.qInfo.qId+Date.now();localStorage.setItem("print-".concat(i),e.snapshotData);var a="".concat(r["a"].localResourcesPath,"printing-snapshot.html?callback=fromLocalStorage&printId=").concat(i);window.open(a,"_blank")}))};t.clickPrintLiveLink=function(t,i,a){t.preventDefault();var u=n.model.layout.qInfo.qId+Date.now();var p="".concat(r["a"].localResourcesPath,"printing-live.html?callback=fromLocalStorage&livePrintId=").concat(u);switch(i){case"object":d["a"].all([n.getViewState(),l["a"].getAppliedPatchesForChart(n),l["a"].getVariables(n.model.app)]).then((function(t){var e=t[0];var a=t[1];var r=t[2];localStorage.setItem("live-print-".concat(u),JSON.stringify({appId:n.model.app.id,type:i,objectId:n.model.layout.qInfo.qId,options:{language:o["default"].language,viewState:e,theme:c["a"].getCurrentTheme(),variables:r,patches:a,objectSize:n.objectSize}}));window.open(p,"_blank")}));break;case"sheet":s["a"].getViewState().then((function(t){localStorage.setItem("live-print-".concat(u),JSON.stringify({appId:n.model.app.id,type:i,objectId:e.layout.qInfo.qId,options:{language:o["default"].language,viewState:t,theme:c["a"].getCurrentTheme()}}));window.open(p,"_blank")}));break;case"slideitem":localStorage.setItem("live-print-".concat(u),JSON.stringify({appId:n.model.app.id,type:i,objectId:n.model.layout.qInfo.qId,outputType:a,options:{language:o["default"].language,theme:c["a"].getCurrentTheme()}}));window.open(p,"_blank");break;default:break}};t.clickSingleIntegratorLink=function(t){t.preventDefault();var e=encodeURIComponent(n.model.app.layout.qFileName);var i=n.model.layout.qInfo.qId;var a="".concat(r["a"].rootPath,"dev-hub/single-configurator#qapp{").concat(e,";").concat(i,"}");window.open(a,"_blank")}}],template:a,closeOnEscape:true})}}},I3M1:function(t,e,n){"use strict";var i=n("qIEf");var a=n.n(i);var o=n("mWu2");var r=n("Mb12");var l=n("lCV6");var s=n("bF7x");var c=n("6uJb");var d=[];var u=[{tid:"Print.Ppt.Format.Standard",w:4,h:3},{tid:"Print.Ppt.Format.Widescreen",w:16,h:9},{tid:"Print.Ppt.Format.Widescreen",w:16,h:10},{tid:"Print.Ppt.Format.Custom"}];var p=function t(e,n){this.ratio=e||{};this.isCustom=n||false};p.prototype={toPixels:function t(e){var n=parseInt(e,10)||960;var i=n/this.ratio.w*this.ratio.h;return{w:Math.round(n),h:Math.round(i)}},setLabel:function t(){var e=this;var n=c["default"].get(e.ratio.tid);e.label=n;e.ratio.w&&e.ratio.h&&(e.label+=" ".concat(e.ratio.w,":").concat(e.ratio.h))}};var v=u.length;for(var g=0;g<v;g++){var f=new p(u[g]);3===g&&(f.isCustom=true);d.push(f)}d.forEach((function(t){t.setLabel("portrait")}));var h={formats:d};var m='<lui-dialog id="print-dialog" tcl="print-image-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button" tid="print-current-size" ng-class="{ \'lui-active\': ! imageCustomSize }" q-translation="Print.Image.CurrentSize" ng-click="onImageCustomSize(false)" ng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button" tid="print-custom-size"  ng-class="{ \'lui-active\': imageCustomSize }" q-translation="Common.Custom" ng-click="onImageCustomSize(true)" ng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="! imageCustomSize">\n\t\t\t{{input.currentWidth}} x {{input.currentHeight}} px @ 96 dpi</span>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-width"\n\t\t\t\t\t\tqui-model="print.width" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-height"\n\t\t\t\t\t\tqui-model="print.height" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-dpi"\n\t\t\t\t\t\tqui-model="print.dpi" qui-disabled="state === states.PENDING" qui-min="0" qui-max="300" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Format"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\t\tx-model="print.format"\n\t\t\t\t\t\t\tx-options="f as f for f in availableFormats"\n\t\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\t\ttid="print-image-selected-format"></lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-if="!usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink"></a>\n\t\t\t\t<a ng-if="usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink" download="{{printFileName}}"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n';var b='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="{{minDpi}}"\n\t\t\t\t\t\tqui-max="{{maxDpi}}"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n';var w='<lui-dialog id="print-dialog" tcl="print-ppt-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.Format"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\ttid="print-ppt-selected-size"\n\t\t\t\t\tx-model="selectedFormat"\n\t\t\t\t\tx-options="f.label for f in formats"\n\t\t\t\t\tx-change="onPptFormatChange(selectedFormat)">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-width"\n\t\t\t\tqui-model="print.width" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-height"\n\t\t\t\tqui-model="print.height" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-ppt-dpi">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-ppt-dpi"\n\t\t\t\t\t\tx-model="print.dpi"\n\t\t\t\t\t\tx-options="d as d for d in availablePptDpi">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t{{print.width}} x {{print.height}} px @ {{print.dpi}} dpi\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.CurrentSlideSize"></div>\n\t\t\t<p>\n\t\t\t{{print.currentWidth}} x {{print.currentHeight}} px @ {{print.currentDpi}} dpi\n\t\t\t</p>\n\t\t</div>\n\t\t--\x3e\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Ppt.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n';var S='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="0"\n\t\t\t\t\t\tqui-max="300"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n';var y=n("kXRb");function x(t,e){t=t.toLowerCase()||"image";e=e.toLowerCase();var n="".concat(e,"-").concat(t);function i(){var t;switch(n){case"sheet-pdf":case"object-pdf":t=b;break;case"sheet-image":case"object-image":t=m;break;case"story-ppt":t=w;break;case"story-pdf":t=S;break;default:t=m}return t}var a={template:i(),controller:["$scope","$timeout",function(e,i){e.exportType=t;e.states=l["a"].getStates();e.state=e.states.IDLE;var a={CurrentSize:"0",BestFitPreserveAspectRatio:"1",BestFitNoPreserveAspectRatio:"2"};e.print={fitCriteria:a.CurrentSize};if(e.input.object){var o=e.input.object.model.id;var c={id:o,model:e.input.object.model,options:{id:o,isVisible:true,isOnGrid:false,isZoomed:false}};e.obj=c}switch(n){case"sheet-pdf":case"object-pdf":case"story-pdf":e.sizes=s["a"].sizes;e.layouts=s["a"].layouts;e.selectedSize=e.sizes[1];e.print.dpi=200;e.selectedLayout=e.layouts[1];e.minDpi=72;e.maxDpi=300;i((function(){e.onPrintLayout(e.selectedLayout)}));break;case"sheet-image":case"object-image":e.availableFormats=["Jpeg","Png"];e.print.width=e.input.currentWidth;e.print.height=e.input.currentHeight;e.print.dpi=e.input.currentDpi;e.print.format="Png";e.imageCustomSize=false;break;case"story-ppt":e.availablePptDpi=[96,150,220];e.print.dpi=e.availablePptDpi[2];e.print.currentWidth=e.input.currentWidth;e.print.currentHeight=e.input.currentHeight;e.print.currentDpi=e.input.currentDpi;e.formats=h.formats;e.selectedFormat=e.formats[3];i((function(){e.onPptFormatChange(e.selectedFormat)}));break;default:break}var d=r["a"].create(e);e.confirm=d.confirm;e.onImageCustomSize=d.onImageCustomSize;e.onSizeChange=d.onSizeChange;e.onPrintLayout=d.onPrintLayout;e.onPptFormatChange=d.onPptFormatChange}]};return a}function D(t,e,n,i,a,r){var s="Print.".concat(e,".Title");var c=Object(y["a"])();var d=x(e,n);var u=o["default"].getService("luiDialog").show({controller:d.controller,template:d.template,input:{title:s,object:t,sourceType:"object",exportType:e,currentWidth:i,currentHeight:a,currentDpi:c}});u.closed.then((function(){l["a"].cancel();r&&r()}));return u}function I(t,e,n){var i="Print.".concat(e,".Title");var r;r="story"===n.toLowerCase()?t&&t.inStoryPlayState()?a()("#qv-storytelling .qv-story-slide-active"):a()("#qv-storytelling .qv-grid-story"):t.model&&t.model.isCustomSize()?a()("#grid"):a()(".qvt-sheet > .sheet-grid");var s=Math.round(r.width()||960);var c=Math.round(r.height()||720);var d=Object(y["a"])();var u=x(e,n);var p=o["default"].getService("luiDialog").show({controller:u.controller,template:u.template,input:{title:i,object:t,exportType:e,currentWidth:s,currentHeight:c,currentDpi:d}});p.closed.then((function(){l["a"].cancel()}))}var C=e["a"]={showForObject:D,showForGlobalMenu:I,getScreenDpi:y["a"]}},P2vc:function(t,e,n){"use strict";var i=n("wkj2");var a=n("MoEg");function o(t,e,n){var a=t.length>0?t[0].positions:[];var o=e._style;var s=e._radialOptions;var v=new i["a"];var g=o.ticks.major.length*n;var f=o.label.offset*n*20;var h;var m="far"===e.getAlignment()?"left":"right";var b=[];var w=Math.min(e.rect.height,e.rect.width);var S=0;var y;var x;var D;var I;var C=[];var k=e._radius;var P="left"===m?1:-1;g*=P;h=P>0?0:e.rect.width;e.getShowLine()&&b.push({stroke:o.line.color,shape:{cx:e._centerPoint.x,cy:e._centerPoint.y,radius:k,radianOffset:0,start:s.start,end:s.end},type:"arc"});if(e.getShowLabels())for(var E=0;E<a.length;E++){y=(a[E]-S)/(w-S);D=d(y,e);I=u(D);I.r+=f;I=p(I,e._centerPoint);x=c(y,e);I.angle=x;C.push(I);v.save();v.translate(D.x+e._centerPoint.x,D.y+e._centerPoint.y);v.rotate(x);b.push({stroke:o.ticks.major.color,opacity:e.ticks[E].opacity,transform:v.elements,shape:{x1:0,x2:-g,y1:0,y2:0},type:"line"});v.restore()}h+=o.ticks.major.length*P;if(e._showLabels&&e._layoutMode>1)for(var T=0;T<t.length;T++){b=b.concat(r(t[T],C,h,e));h+=t[T].labelSpace*P}e._showTitle&&e._layoutMode>1&&(b=b.concat(l(e,o)));e._renderer.shapes=b;e._renderer.render()}function r(t,e,n,i){var a=t.labels;var o=e;var r=t.opacities;var l;var s;var c=[];var d=i._style;var u;var p;var v;var g;var f=a?a.length:0;if(0===f)return;var h=f-1;for(var m=0;m<f;m++){p=i.yMirrorMode?a[h-m]:a[m];l=i._renderer.getTextWidth(p,d.label.font);v=o[m];u=v.angle;s=u-.1<3*Math.PI/2&&u+.1>3*Math.PI/2?"center":u<Math.PI/2||u>3*Math.PI/2?"left":"right";c.push({type:"text",fill:d.label.color,opacity:r?r[m]:1,shape:{text:p,x:v.x,y:v.y,maxWidth:v.x-l<0?v.x:v.x+l>i.rect.width?i.rect.width-v.x:l,height:g,maxNumLines:1,font:d.label.font,align:s,baseline:"middle"}})}return c}function l(t,e){var n=[];var i=Math.min(t.rect.width,t.rect.height);var a=s(t);n.push({type:"text",fill:e.title.color,opacity:1,shape:{text:t._title,x:a.x,y:a.y+i*(.06+Math.min(i-300,0)/-300*.04),maxWidth:1.4*t._radius,maxNumLines:1,font:e.title.font,align:"center",baseline:"middle"}});return n}function s(t){var e={x:t.rect.width/2,y:t.rect.height/2};return e}function c(t,e){var n=e._radialOptions;var i=Math.max(Math.min(t,1),0)*(n.end-n.start)+n.start;return i}function d(t,e,n){var i=e._radialOptions;var a=t*(i.end-i.start)+i.start;var o=e._radius;return p({a:a,r:o},n)}function u(t){return{r:Math.sqrt(t.x*t.x+t.y*t.y),a:Math.atan2(t.y,t.x)}}function p(t,e){e||(e={x:0,y:0});return{x:e.x+t.r*Math.cos(t.a),y:e.y+t.r*Math.sin(t.a)}}e["a"]={renderRadial:o,getPointOfValue:d,getPolPos:u,getCartPos:p,getAngleOfNormalizedValue:c}},XiD7:function(t,e,n){"use strict";var i=n("mWu2");var a=n("6uJb");var o=n("sWge");var r=n("Xxft");var l=n("uqsp");function s(t){return t.getProperties().then((function(t){return t.qExtendsId}))}function c(t){var e=new o["a"];s(t).then((function(n){t.copyFrom(n).then((function(){t.getProperties().then((function(n){delete n.qMetaDef;delete n.descriptionExpression;delete n.labelExpression;t.setProperties(n).then((function(){e.resolve(n)}))}))}))}));return e.promise}var d={breakLink:c};var u=n("hE/5");var p=n("UOQJ");var v=n("4nJ1");function g(t){g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return g(t)}function f(t,e){return t.getProperties().then((function(n){return t.destroyAllChildren({qInfo:n.qInfo,qExtendsId:e})}))}function h(){i["default"].$rootScope.$broadcast("openVisualizationSection",u["a"].sectionIDs.visualization)}function m(t,e){return t.getProperties().then((function(n){n.qMetaDef={title:e.name,description:e.description,tags:e.tags};"object"===g(e.descriptionExpression)&&(n.descriptionExpression=e.descriptionExpression);e.labelExpression&&(n.labelExpression=e.labelExpression);n.masterVersion=.96;return t.setProperties(n)}))}function b(t,e){var n={qInfo:{qType:"masterobject"}};return r["a"].create(n).then((function(n){return n.copyFrom(t.qInfo.qId).then((function(){return m(n,e)})).then((function(){return n}))}))}function w(t){t.getVisualization().then((function(t){var e=t.model;return o["a"].all({props:e.getProperties(),layout:e.getLayout()}).then((function(t){var n=t.props;var a=t.layout;l["a"].addMetadata({qMetaDef:{title:a.title,description:"",tags:[]},onSave:function t(a){b(n,a).then((function(t){f(e,t.id).then((function(){i["default"].$rootScope.$emit("clearUndo")}))}));h()}})}))}))}function S(){p["a"].show({title:a["default"].get("Object.Linked.NoEditDialog.Title"),message:a["default"].get("Object.Linked.NoEditDialog.Message")})}function y(t){var e=a["default"].get("Object.Linked.BreakLinkDialog.Text");var n="<div class='link-object-dialog-content'><div class='link'><span class='link-icon  lui-icon  lui-icon--link'></span></div><div class='text'>".concat(e,"</div></div>");var o=i["default"].getService("qvConfirmDialog").show({message:n});o.closed.then((function(e){e&&d.breakLink(t)}))}function x(t){return"auto-chart"!==t}function D(t){var e=v["a"].getValue(t,"model.properties.qStateName");return null===e||void 0===e||""===e}function I(t,e){var n=!t.object.isInvalid&&"auto-chart"!==t.object.ext.type&&e.permissionToCreate("visualization")&&!t.object.isLink&&x(t.object.type.type);if(!n)return o["a"].resolve(n);if(Object.keys(t.model.properties).length)return o["a"].resolve(D(t));return t.model.getProperties().then((function(){return D(t)}))}var C=e["a"]={typeSupportsMasterVisualizations:x,canAddToMasterItems:I,addObjectInCellToLibrary:w,showNotEditableDialog:S,showBreakLinkDialog:y}},"d/Ce":function(t,e,n){"use strict";var i=n("qIEf");var a=n.n(i);var o=n("Z9ZH");var r=n.n(o);var l=n("mWu2");var s=n("sWge");var c=n("z4LI");var d=n("XiD7");var u=n("AWT7");var p=n("MGTR");var v=n("B52N");var g=n("P2vc");var f=n("wIyQ");var h='<div class="touch-object-menu" qva-outside="close()">\n\t<div class="touch-object-menu-decor"></div>\n\t<div class="items">\n\t\t<div ng-repeat="item in menu.items" class="touch-object-menu-item" tid="{{item.tid}}">\n\t\t\t<div class="qv-objectmenu-item-container">\n\t\t\t\t<div ng-if="item.hover" class="touch-object-menu-item-wrapper top">\n\t\t\t\t\t<span class="touch-object-menu-item-label top">{{item.getLabel()}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="lui-icon  lui-icon--{{item.icon}}"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n';var m="objectMenuListView";function b(t,e,n){t.css({display:"block",left:e-100,top:n-100})}function w(t,e,n){var i={start:3*Math.PI/2,end:-Math.PI/2,range:Math.PI,direction:-1,distance:Math.PI/3.5,radius:n};var a={x:t.left+t.width/2,y:t.top+t.height/2};var o=window.innerWidth;var r=window.innerHeight;var l={left:-Math.min(a.x-(e+n),0),right:-Math.min(o-(a.x+e+n),0),top:-Math.min(a.y-(e+n),0),bottom:-Math.min(r-(a.y+e+n),0)};var s=i.start;var c=i.end;var d=function e(n){if(n<=0)return 0;return 2*Math.acos(1+-n/t.height)};if(l.left){i.direction=1;c=s;s+=Math.PI-d(e);l.top?c+=d(l.top):l.bottom&&(s-=d(l.bottom))}else if(l.top){s-=d(l.top);l.right&&(c=Math.abs(c)+d(l.top))}else if(l.right){c+=Math.PI+d(e);l.bottom&&(c+=d(l.bottom))}else if(l.bottom){c+=Math.PI;c+=d(l.bottom+2*e);s+=Math.PI-d(l.bottom+e)}i.start=s;i.end=c;i.range=s-c;return i}function S(t,e){t.distance=Math.max(Math.min(t.range/e,Math.PI/3.5),Math.PI/5)}function y(t,e){var n=e._items;var i=t[0].getBoundingClientRect();var a=n[0].getBoundingClientRect();var o=t.index();var l=n.children().length;var s;var c=e._rimInfo;S(c,l-(l>8?1:2));s=1===c.direction?c.end+o*c.distance:c.start-o*c.distance;var d=g["a"].getCartPos({r:c.radius,a:s},{x:a.width/2,y:a.height/2});t.delay(200).animate({top:d.y-i.height/2,left:d.x-i.width/2},350,"easeOutQuint");r()(t[0]).tap({id:m,end:function e(n,i){t.find(".qv-objectmenu-item-container").trigger("touch-release",i.pagePoints[0]);r.a.preventGestures(this.gestureHandler)}})}function x(t,e,n,i,a,o){t.on("touch-release",r);t.on("touch-in",c);t.on("touch-out",s);function r(t,r){var s=300;e.animate({backgroundColor:"#FF9326",color:"#FFF"},50,"easeInCubic");l["default"].$apply(l["default"].$rootScope,(function(){a(i.args);n((function(){i.select(i.args,r);o()}),s)}));t.stopPropagation()}function s(){if(!i.hover)return;var t=16;e.stop(true,true);var n=e.position();var a=parseFloat(e.css("fontSize").split("px")[0]);e.toggleClass("big");e.animate({height:e.outerHeight()-t,width:e.outerWidth()-t,fontSize:a-t/2,left:n.left+t/2,top:n.top+t/2},200,"easeInCubic");l["default"].$apply(l["default"].$rootScope,(function(){i.hover=false}))}function c(){if(i.hover)return;var t=16;e.stop(true,true);var n=e.position();var a=parseFloat(e.css("fontSize").split("px")[0]);e.toggleClass("big");e.animate({height:e.outerHeight()+t,width:e.outerWidth()+t,fontSize:a+t/2,left:n.left-t/2,top:n.top-t/2},200,"easeInCubic");l["default"].$apply(l["default"].$rootScope,(function(){i.hover=true}))}}var D={template:h,scope:{menu:"=",options:"="},controller:["$scope","$element","$timeout",function(t,e,n){var i={};function o(){return e.children().first()}function l(){"function"===typeof t.options.onClosing&&t.options.onClosing.call(null)}t.close=function(){"function"===typeof t.options.onClosing&&t.options.onClosing.call(null);var e=o();r()(e).off("*",m);i._rimItems.each((function(t,e){r()(e).off("*",m)}));i=null;f["a"].off("start",t.close);a()(document).off("keydown.touch-context-menu");t.destroyComponent()};f["a"].on("start",t.close);o().on("touch-release-outside",t.close);a()(document).on("keydown.touch-context-menu",(function(e){27===e.keyCode&&t.close()}));n((function(){var e=o();b(e,t.options.position.x,t.options.position.y);var r=e.find(".touch-object-menu-decor");i._rimInfo=w(e[0].getBoundingClientRect(),25,80);i._rimItems=e.find(".touch-object-menu-item");i._items=e.find(".items");n((function(){i._rimItems.each((function(e,o){y(a()(o),i);x(a()(o).children(),a()(o),n,t.menu.items[e],l,t.close)}));r.addClass("big")}));"function"===typeof t.options.onOpen&&t.options.onOpen.call(null)}))}]};var I=D;var C=n("G1wx");var k=n("fbWF");var P='<div>\n\t<lui-dialog id="share-dialog">\n\t\t<lui-tab-view>\n\t\t\t<lui-dialog-header class="sd-header" ng-class="{\'with-tabs\': enableOther}">\n\t\t\t\t<lui-dialog-title class="sd-title" q-translation="contextMenu.copyLink"></lui-dialog-title>\n\t\t\t\t<div class="sd-close" qva-activate="$event.preventDefault(); close()" name="cancel" tid="share-cancel">\n\t\t\t\t\t<i class="lui-icon lui-icon--close lui-icon--small"></i>\n\t\t\t\t</div>\n\t\t\t\t<div ng-show="enableOther" class="sd-tabset-wrap">\n\t\t\t\t\t<lui-tabset class="sd-tabset" active-tab="activeTab">\n\t\t\t\t\t\t<lui-tab ref="{{tabList[0].ref}}" class="sd-tab" tabindex="0" aria-label="{{translate(\'Share.Aria.TabCopyLink\')}}. {{getCurrentlyActiveTabAria(activeTab)}}">\n\t\t\t\t\t\t\t<i class="lui-icon lui-icon--link tab-icon"></i>\n\t\t\t\t\t\t\t<span q-translation="Share.Link.Title"></span>\n\t\t\t\t\t\t</lui-tab>\n\t\t\t\t\t\t<lui-tab ref="{{tabList[1].ref}}" class="sd-tab" tabindex="0" aria-label="{{translate(\'Share.Aria.TabOther\')}}. {{getCurrentlyActiveTabAria(activeTab)}}">\n\t\t\t\t\t\t\t<i class="lui-icon lui-icon--more tab-icon"></i>\n\t\t\t\t\t\t\t<span q-translation="Share.Other.Title"></span>\n\t\t\t\t\t\t</lui-tab>\n\t\t\t\t\t</lui-tabset>\n\t\t\t\t</div>\n\t\t\t</lui-dialog-header>\n\n\t\t\t<lui-dialog-body class="sd-body">\n\t\t\t\t<div ng-show="enableSnapshot" class="modeOptions section" style="padding-top: 0;">\n\t\t\t\t\t<div class="main-label" q-translation="Share.ShareAs"></div>\n\t\t\t\t\t<div class="form-element">\n\t\t\t\t\t\t<lui-radiobutton value="{{modeOptions[0].value}}" x-model="currentModeValue" x-change="updateLink(currentModeValue)" \n\t\t\t\t\t\t\taria-label="{{translate(\'Share.Aria.SharingMode\')}}"\n\t\t\t\t\t\t\t>{{modeOptions[0].label}}</lui-radiobutton>\n\t\t\t\t\t\t<lui-radiobutton value="{{modeOptions[1].value}}" x-model="currentModeValue" x-change="updateLink(currentModeValue)" \n\t\t\t\t\t\t\taria-label="{{translate(\'Share.Aria.SharingMode\')}}">\n\t\t\t\t\t\t\t<span>{{modeOptions[1].label}}<span style="color: rgba(0, 0, 0, 0.4)">{{modeOptions[1].label2}}</span></span>\n\t\t\t\t\t\t</lui-radiobutton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<lui-tab-content ref="{{tabList[0].ref}}"><share-link></share-link></lui-tab-content>\n\t\t\t\t<lui-tab-content ref="{{tabList[1].ref}}"><share-other></share-other></lui-tab-content>\n\t\t\t</lui-dialog-body>\n\t\t</lui-tab-view>\n\n\t</lui-dialog>\n</div>\n';var E=n("xN6f");function T(){}var j={directiveLinkFunction:T};var q='<div>\n\t<div style="padding-bottom: 0px;" class="section">\n\t\t<div style="font-weight: bold; display: flex;">\n\t\t\t<span style="margin-right: 5px;" q-translation="Common.Link"></span>\n\t\t\t<div ng-if="parentScope.state === parentScope.states.PENDING" class="loading-screen">\n\t\t\t\t\t<div class="spinner">\n\t\t\t\t\t\t<div class="qv-loader"></div>\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div style="display: flex" ng-if="parentScope.state === parentScope.states.TIMEOUT">{{parentScope.translate(\'Share.Link.Timeout\')}}</div>\n\t\t<div style="display: flex" ng-if="parentScope.statusCode == 413">{{parentScope.translate(\'Download.Error.Selections\')}}</div>\n\t\t<div class="lui-input-group" style="padding-top: 3px;">\n\t\t\t<input class="lui-input-group__item  lui-input-group__input  lui-input" style="width: auto;" ng-model="parentScope.shareUrl" aria-label="{{parentScope.translate(\'Share.Aria.Link.Url\')}}" readonly/>\n\t\t\t<div class="lui-input-group__item  lui-input-group__button">\n\t\t\t\t<button class="lui-button  lui-button--success" ng-click="parentScope.handleCopyClick();" q-translation="Common.Copy" aria-label="{{parentScope.translate(\'Share.Aria.Link.Copy\')}}"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div style="display: flex; margin: 4px 0 0 4px; justify-content: space-between;">\n      <span q-translation="Share.Link.Desc"></span>\n\t\t\t<span class="copiedNotice" ng-if="parentScope.hasCopied === true" q-translation="Share.Link.CopiedNotice"></span>\n    </div>\n\t\t<div style="display: flex">\n      <div class="openInNewTab lui-button" ng-click="parentScope.handleOpenLinkClick()" aria-label="{{parentScope.translate(\'Share.Aria.Link.Open\')}}">\n        <i class="lui-icon lui-icon--goto icon"></i>\n        <span q-translation="Share.Link.Open"></span>\n      </div>\n    </div>\n\t</div>\n</div>';var L=n("/2No");function A(t){var e="".concat(L["a"].staticResourcesPath,"assets/images/ShareIcons_");t.socialList=[{value:0,label:"Facebook",src:"".concat(e,"FB.png"),ariaLabel:t.parentScope.translate("Share.Aria.Other.ShareToFacebook")},{value:1,label:"LinkedIn",src:"".concat(e,"LI.png"),ariaLabel:t.parentScope.translate("Share.Aria.Other.ShareToLinkedIn")},{value:2,label:"Twitter",src:"".concat(e,"TW.png"),ariaLabel:t.parentScope.translate("Share.Aria.Other.ShareToTwitter")}];t.shareOnSocial=n;function n(e){var n;switch(e){case 0:n="http://www.facebook.com/sharer.php?u=";break;case 1:n="http://www.linkedin.com/shareArticle?mini=true&url=";break;case 2:n="http://twitter.com/share?url=";break;default:break}n+=t.parentScope.shareUrl;window.open(n)}}var O={directiveLinkFunction:A};var z='<div>\n\t<div class="section" q-translation="Share.Other.WhereToShare"></div>\n\t<div class="section" style="display: inline-flex; text-align: center;">\n\t\t<div class="social-media" ng-repeat="item in socialList" ng-click="shareOnSocial(item.value)" tabindex="0" aria-label="{{item.ariaLabel}}">\n\t\t\t<img ng-src="{{item.src}}" />\n\t\t\t<div>{{item.label}}</div>\n\t\t</div>\n\t</div>\n</div>\n';var M=n("6uJb");var N=n("acVu");var F=n("RZ9f");var _;R.$inject=["$scope"];function R(t){_=t;t.translate=M["default"].get;t.getCurrentlyActiveTabAria=i;t.tabList=[{ref:"link"},{ref:"other"}];t.hasCopied=false;t.handleCopyClick=function(){E["a"].copyToClipboard(t.shareUrl);t.hasCopied=true;F["a"].trackEvent(F["a"].customEvents.CHART_SHARED,{chart_share_method:"Copy link"})};t.handleOpenLinkClick=function(){window.open(t.shareUrl,"_blank")};t.states=k["a"].getStates();t.state=t.states.PENDING;t.enableOther=Object(N["b"])("CLOUD_SHARING_SERVICE_OTHER");t.enableSnapshot=Object(N["b"])("CLOUD_SHARING_SERVICE_SNAPSHOT");t.shareUrl="";t.shareUrlList=[];k["a"].generateInsights(t.obj).then((function(e){t.showUrl=true;t.state=t.states.COMPLETED;t.shareUrlList=[e.staticUrl,e.directUrl];n("1")}),(function(e){t.statusCode=e.httpStatusCode;t.state=e.status}));t.modeOptions=[{value:"0",label:M["default"].get("Share.QlikSnapshot"),desc:M["default"].get("Share.QlikSnapshotDesc")},{value:"1",label:M["default"].get("Share.DirectLink"),label2:" (".concat(M["default"].get("Share.RequiresLogin"),")"),desc:M["default"].get("Share.DirectLinkDesc")}];t.currentModeValue=t.enableSnapshot?t.modeOptions[0].value:t.modeOptions[1].value;t.updateLink=n;var e=false;function n(n){if(t.showUrl){var i;if(e)i=n;else{i="0"===n?"1":"0";t.enableSnapshot||(i="1")}e=false;t.shareUrl=t.shareUrlList[i]}else e="0"===n}function i(e){switch(e){case t.tabList[0].ref:return t.translate("Share.Aria.TabCurrentlyOnCopyLink");case t.tabList[1].ref:return t.translate("Share.Aria.TabCurrentlyOnOther");default:return}}}var G={link:{directive:"shareLink",template:q,link:j.directiveLinkFunction},other:{directive:"shareOther",template:z,link:O.directiveLinkFunction}};l["default"].directive(G.link.directive,[function(){return U(G.link)}]);l["default"].directive(G.other.directive,[function(){return U(G.other)}]);function U(t){return{restrict:"E",template:t.template,replace:true,scope:{},controller:["$scope",function(e){e.parentScope=_;t.link(e)}]}}function V(t){var e=l["default"].getService("luiDialog").show({controller:R,template:P,input:{obj:t}});e.closed.then((function(){k["a"].cancel()}))}var $={show:V};var W=n("9ZdW");var H=n("tdr+");var B=n("I3M1");var J=n("TLc9");var K='<div class="qv-object-info-mobile">\n\n\t<div class="qui-toolbar qv-mi-toolbar" qva-direction x-dir-setting="{{direction}}">\n\n\t\t<div class="qv-mi-toolbar-title">\n\t\t\t<span q-translation="ObjectInfo.Dialog.Header" class="qv-mi-toolbar-text"></span>\n\t\t</div>\n\n\t\t<qui-toolbarbutton qva-activate="cancel($event)" name="cancel" class="qv-mi-toolbar-close" tid="object-info-close">\n\t\t\t<span q-translation="Common.Close" class="qv-mi-toolbar-text"></span>\n\t\t</qui-toolbarbutton>\n\t</div>\n\n\t<div class="content"></div>\n\n</div>\n\n';var Q={template:K,scope:{},controller:["$scope","$element",function(t,e){e.find(".content").showComponent(J["a"],{input:t.input});t.cancel=function(){t.destroyComponent()};v["default"].ViewChanged.bind(t.destroyComponent);t.$on("$destroy",(function(){v["default"].ViewChanged.unbind(t.destroyComponent)}))}]};var X=n("FdxK");var Z=n("4XJH");var Y=n("jWHD");var tt=n("5/nM");var et=n("EdSF");var nt=n("U7Ny");var it=n("97cA");var at=n("VIxP");var ot=n("0+WI");var rt=n("vtWz");var lt=n("gVPc");var st=n("lyMs");function ct(t,e,n,i,a,o,r){try{var l=t[o](r);var s=l.value}catch(t){n(t);return}l.done?e(s):Promise.resolve(s).then(i,a)}function dt(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){ct(o,i,a,r,l,"next",t)}function l(t){ct(o,i,a,r,l,"throw",t)}r(void 0)}))}}var ut=false;function pt(t){t.currentTarget=a()(".qv-gridcell-empty:not(.qv-gridresize-cell):not(.qv-gridcell-disabled)").first();t.target=t.currentTarget.find(".qv-gridcell-content");var e=a()(t.currentTarget);var n=e.scope();var i=n.cell;var o=n.model;Nt(t,i,o,n.grid)}function vt(t,e,n){t&&e.addItem({translation:"contextMenu.addToMasterItems",tid:"add-to-master-items",icon:"link",select:function t(){d["a"].addObjectInCellToLibrary(n)}},1)}function gt(t,e,n,i){var a,o;!v["default"].isSmallDevice&&Object(N["b"])("DATA_ALERTING")&&"container"!==(null===n||void 0===n||null===(a=n.object)||void 0===a||null===(o=a.type)||void 0===o?void 0:o.type)&&(st["a"].canCreate()||st["a"].canUpdate())&&t.addItem({translation:"Alerting.CreateAlert",tid:"create-alert",icon:"megaphone",select:function t(){p["a"].publish("/alerting-dialog/open",{sheet:e,obj:i})}})}function ft(t,e,n,i,a,o){var r=new s["a"];var l=c["a"].view===c["a"].Views.masterObject;if(c["a"].isInEditMode()&&!l){i.object.isLink&&t.addItem({translation:"Visualization.Unlink",icon:"link",tid:"link",select:function t(){i.getVisualization().then((function(t){d["a"].showBreakLinkDialog(t.model)}))}});d["a"].canAddToMasterItems(i,a).then((function(e){vt(e,t,i)})).then((function(){r.resolve()}))}else c["a"].isInEditMode()||c["a"].state===c["a"].States.play?r.resolve():e.app.getLayout().then((function(e){ht(i)&&e.permissions.createSnapshot&&t.addItem({translation:"contextMenu.takeSnapshot",icon:"camera",tid:"take-snapshot",select:function t(){if(v["default"].isSmallDevice)i.snapshot.take();else{i.snapshot.isAnnotating=true;i.snapshot.take(true,true)}}});ht(i)&&t.addItem({translation:"Storytelling.library.snapshot",tid:"open-snapshot-library",icon:"photo-library",select:function t(){i.snapshot.openLibrary(o,i.options.isZoomed)}});i.object.supportObjectInfo()&&t.addItem({translation:"contextMenu.showDetails",tid:"object-info",icon:"info",select:function t(){v["default"].isSmallDevice?X["a"].show(Q,{object:i.object}):it["a"].show(i.object)}});r.resolve()}));return r.promise}function ht(t){return t.object.supportSnapshot()&&!t.object.ext.showRequirements(t.object)&&!t.object.viewDataToggled}function mt(t,e,n,i,a,o,r){var l=[];var u=c["a"].view===c["a"].Views.masterObject;var p=a.layout.hasExternalChildren;var v=!C["a"].treatAsDesktop();if(u||!c["a"].isInEditMode()||i.object.viewDataToggled)c["a"].isInEditMode()||c["a"].state===c["a"].States.play||i.object.viewDataToggled?i.object.viewDataToggled&&l.push(e.app.getLayout().then((function(e){jt(t,i);if(e.permissions.exportData)return Tt(t,i,true);return}))):l.push(e.app.getLayout().then((function(o){i.object.supportObjectInfo()&&!v&&t.addItem({translation:"contextMenu.showDetails",tid:"object-info",icon:"info",select:function t(){it["a"].show(i.object)}});v||Lt(t,i,n);i.object.canShowExploreMenu()&&!v&&t.addItem({translation:n.zoomCell&&n.zoomCell.showExploreMenu?"contextMenu.closeVisualExploration":"Tooltip.ExplorationMenu",tid:"visual-exploration",icon:"control",select:function t(){n.zoomCell||n.zoom(i);i.toggleExploreMenu(!n.zoomCell.showExploreMenu);i.object.resize()}});i.object.supportViewData()&&!i.options.isActive&&jt(t,i);!p&&o.permissions.createSnapshot&&xt(t,e,i);Dt(t,e,i,p);gt(t,e,i,a);Et(t,e,i,v);v||At(t,o,i,r);return bt(t,i,r,t.items.length,o.permissions.exportData)})));else{a&&o&&!v&&!p&&l.push(d["a"].canAddToMasterItems(i,o).then((function(e){vt(e,t,i)})));v||Lt(t,i,n);a&&i.object.isLink&&t.addItem({translation:"Visualization.Unlink",tid:"unlink",icon:"link",select:function t(){i.getVisualization().then((function(t){d["a"].showBreakLinkDialog(t.model)}))}});Et(t,e,i,v);Ot(n,t,i,a)}return s["a"].all(l)}function bt(t,e,n,i,a){if(!Object(N["b"])("DOWNLOAD_USE_REPORTING"))return wt(t,e,n,a);It(t,e,i);if(a)return"filterpane"===e.object.type.type?wt(t,e,n,a):Tt(t,e,true,++i);return Promise.resolve()}function wt(t,e,n,i){var a=l["default"].getService("qvContextMenu");var o=a.menu();if(!i||e.object&&"container"===e.object.type.type)return Promise.resolve();Pt(o,e,n);return Tt(o,e).then((function(){if(o.items.length){var e;for(var n=0;n<t.items.length;n++)if(t.items[n].divider){e=n;break}void 0===e&&(e=t.items.length);var i=t.addItem({translation:"contextMenu.downloadGroup",tid:"export-group",icon:"download"},e);o.items.forEach((function(t){i.addItem(t)}))}}))}function St(t,e,n){if(ot["a"].chartSharingEnabled()){var i,a,o;var r="container"!==(null===n||void 0===n||null===(i=n.object)||void 0===i||null===(a=i.type)||void 0===a?void 0:a.type);var l=null===n||void 0===n||null===(o=n.object)||void 0===o?void 0:o.supportExport();if(!r||!l)return false;t.addItem({translation:"Download.Image.TabTitle",tid:"share",icon:"image",select:function t(){return dt(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function t(o){while(1)switch(o.prev=o.next){case 0:i={horizontalPadding:20,verticalPadding:5};o.next=3;return n.getVisualization();case 3:a=o.sent;p["a"].publish("/share-chart-dialog/open",{direction:n.options.direction,height:n.object.objectSize.h-i.verticalPadding,visualization:a,sheetId:e.id,width:n.object.objectSize.w-i.horizontalPadding});case 5:case"end":return o.stop()}}),t)})))()}});return true}return false}function yt(t,e){if(Object(N["b"])("CLOUD_SHARING_SERVICE")){t.addItem({translation:"contextMenu.copyLink",tid:"copyLink",icon:"link",select:function t(){$.show(e.object)}});return true}return false}function xt(t,e,n,i){var a,o,r;var l=null===n||void 0===n||null===(a=n.object)||void 0===a||null===(o=a.type)||void 0===o?void 0:o.type;var s="container"!==l&&"filterpane"!==l&&"action-button"!==l&&"qlik-multi-kpi"!==l&&"qlik-word-cloud"!==l&&(null===n||void 0===n||null===(r=n.object)||void 0===r?void 0:r.supportExport());if(s&&Object(N["b"])("CHART_MONITORING")&&(lt["a"].isQCS()||lt["a"].isQSEoK()||lt["a"].isDev())){t.addItem({translation:"contextMenu.addToHub",tid:"addto",icon:"analyze",select:function t(){return dt(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function t(o){while(1)switch(o.prev=o.next){case 0:i={horizontalPadding:20,verticalPadding:5};o.next=3;return n.getVisualization();case 3:a=o.sent;p["a"].publish(rt["a"].OPEN,{direction:n.options.direction,height:n.object.objectSize.h-i.verticalPadding,title:n.model.layout.title,visualization:a,sheetId:e.id,width:n.object.objectSize.w-i.horizontalPadding});case 5:case"end":return o.stop()}}),t)})))()}},i);return true}return false}function Dt(t,e,n,i){var a=l["default"].getService("qvContextMenu");var o=a.menu();St(o,e,n);yt(o,n);i||qt(o,n);if(o.items.length>0){var r=t.addItem({translation:"ContextMenu.ShareChart",icon:"share",tid:"shareGroup"});o.items.forEach((function(t){r.addItem(t)}));return true}return false}function It(t,e,n){var i=H["a"].getMobileDownloadFlag();var a=e.object&&"container"!==e.object.type.type&&"filterpane"!==e.object.type.type;if(a&&(!v["default"].isSmallDevice||i)){if(!e.object.supportExport()&&!e.object.supportExportData())return false;Object(N["b"])("DOWNLOAD_DIALOG_REACT")?t.addItem({translation:"Download.Title",tid:"download",icon:"download",select:function t(){var n=e.object.objectSize&&e.object.objectSize.w?e.object.objectSize.w:"640";var i=e.object.objectSize&&e.object.objectSize.h?e.object.objectSize.h:"480";var a=e.object;var o="visualization";p["a"].publish("/download-dialog/open",{sourceType:o,object:a,w:n,h:i})}},n):t.addItem({translation:"Download.Title",tid:"download",icon:"download",select:function t(){if(v["default"].isSmallDevice)at["a"].toggleMobileDownload(e,"visualization");else{var n=e.object.objectSize&&e.object.objectSize.w?e.object.objectSize.w:"640";var i=e.object.objectSize&&e.object.objectSize.h?e.object.objectSize.h:"480";W["a"].show(e.object,n,i)}}},n);return true}return false}function Ct(t,e){e.object.supportExport()&&!v["default"].isSmallDevice&&t.addItem({translation:"Download.Image.TabTitle",tid:"print-object-image",select:function t(n){var i=e.object.objectSize&&e.object.objectSize.w?e.object.objectSize.w:"640";var a=e.object.objectSize&&e.object.objectSize.h?e.object.objectSize.h:"480";var o="Image";B["a"].showForObject(e.object,o,"object",i,a,n)}})}function kt(t,e){e.object.supportExport()&&!v["default"].isSmallDevice&&t.addItem({translation:"Download.PDF.TabTitle",tid:"print-object-pdf",select:function t(n){var i=e.object.objectSize&&e.object.objectSize.w?e.object.objectSize.w:"640";var a=e.object.objectSize&&e.object.objectSize.h?e.object.objectSize.h:"480";var o="Pdf";B["a"].showForObject(e.object,o,"object",i,a,n)}})}function Pt(t,e,n){Ct(t,e,n);kt(t,e)}function Et(t,e,n,i){var a=Z["a"]._extractOptions(window.location.pathname);!i&&a&&a.indexOf("developer")>-1&&t.addItem({translation:"Developer",tid:"object-developer",icon:"debug",select:function t(){et["a"].show(e,n.object)}})}function Tt(t,e,n,i){if(!e.object.supportExportData())return Promise.resolve();if("function"===typeof e.object.ext.getExportRawDataOptions)return e.object.ext.getExportRawDataOptions.call(this,t,e);t.addItem({translation:"properties.data",tid:"export",icon:n?"export":null,select:function t(n){tt["a"].show(e.model,void 0,n)}},i);return Promise.resolve()}function jt(t,e,n){t.addItem({translation:e.object.viewDataToggled?"contextMenu.viewSource":"contextMenu.viewData",tid:e.object.viewDataToggled?"1f4b8c":"10093a",icon:e.object.viewDataToggled?"back":"table",select:function t(){e.object.toggleDataView()}},n)}function qt(t,e,n){Object(N["b"])("SINGLE_CONFIG")&&!v["default"].isSmallDevice&&t.addItem({translation:"contextMenu.embed",tid:"79f6",icon:"code",suppressOnCloseCall:true,select:function t(n){p["a"].publish("/embed-dialog/open",{type:"object",objectId:e.id,onClose:n})}},n)}function Lt(t,e,n){var i,a;if("action-button"!==(null===e||void 0===e||null===(i=e.object)||void 0===i||null===(a=i.type)||void 0===a?void 0:a.type)){n.zoomCell?t.addItem({translation:"Tooltip.ZoomOut",icon:"collapse",tid:"zoom-out",select:function t(){n.zoom(null);e.object.selectionsApi&&e.object.selectionsApi.active&&e.object.selectionsApi.cancel()}}):t.addItem({translation:"Tooltip.ZoomIn",icon:"expand",tid:"zoom-in",select:function t(){n.zoom(e);e.object.selectionsApi&&e.object.selectionsApi.active&&e.object.selectionsApi.cancel()}});return true}return false}function At(t,e,n,i,a){if(ht(n)){e.permissions.createSnapshot&&t.addItem({translation:"contextMenu.takeSnapshot",icon:"camera",tid:"take-snapshot",select:function t(){if(v["default"].isSmallDevice)n.snapshot.take();else{n.snapshot.isAnnotating=true;n.snapshot.take(true,true)}}},a);t.addItem({translation:"Storytelling.library.snapshot",tid:"open-snapshot-library",icon:"photo-library",select:function t(){n.snapshot.openLibrary(i,n.options.isZoomed)}},a)}}function Ot(t,e,n,i){if(i&&!n.object.isInvalid){e.addItem({translation:"contextMenu.cut",tid:"cut",icon:"cut",select:function t(){p["a"].publish("/activeSheet/cutObject",n)}});e.addItem({translation:"contextMenu.copy",tid:"copy",icon:"copy",select:function t(){p["a"].publish("/activeSheet/copyObject",n)}})}var a=localStorage["QlikView-clipboard"]&&localStorage["QlikView-clipboard"].length>0;a&&e.addItem({translation:t.canInsert||n.object.ext.addChild?"contextMenu.paste":"contextMenu.pasteAndReplace",tid:"paste-and-replace",icon:"paste",select:function t(){p["a"].publish("/activeSheet/pasteObject",n)}});e.addItem({translation:"Common.Delete",tid:"delete",icon:"bin",select:function e(){t.gridService.removeCell(n)}})}function zt(t,e,n,i,a,o){var r=l["default"].getService("qvContextMenu");var s=r.menu();if(a&&a.getContextMenu)return a.getContextMenu(s,i).then((function(){return mt(s,t,e,n,a,o,i).then((function(){return s}))}));return mt(s,t,e,n,a,o,i).then((function(){return s}))}function Mt(t,e,n,i,a,o){var r=l["default"].getService("qvContextMenu");var s;function d(n){r.show(s,{position:{x:t,y:e},component:I,onOpen:function t(){n.showingObjectMenu=true},onClosing:function t(){n.closeMenu();n.showingObjectMenu=false}})}var v=n.target.classList.contains("lui-icon--draggable")||n.target.classList.contains("qv-gridresize-point");c["a"].isInEditMode()&&o.gridService.activateCell(i);if(v){n.stopPropagation();return}if(i.isEmpty){o.gridService.activateCell(null);s=r.menu();if(c["a"].isInEditMode){var g=localStorage["QlikView-clipboard"]&&localStorage["QlikView-clipboard"].length>0;g&&s.addItem({translation:"contextMenu.paste",tid:"paste",icon:"paste",select:function t(){p["a"].publish("/activeSheet/pasteObject",i)}})}d(i)}else i.getVisualization().then((function(t){u["a"].load().then((function(e){s=l["default"].getService("qvContextMenu").menu();var u=c["a"].view===c["a"].Views.masterObject;var p=function t(){if(!i.object.viewDataToggled){!i.object||i.object.type&&"action-button"===i.object.type.type||(o.zoomCell?s.addItem({translation:"Tooltip.ZoomOut",icon:"collapse",tid:"zoom-out",select:function t(){o.zoom(null);i.object.selectionsApi&&i.object.selectionsApi.active&&i.object.selectionsApi.cancel()}}):s.addItem({translation:"Tooltip.ZoomIn",icon:"expand",tid:"zoom-in",select:function t(){o.zoom(i);i.object.selectionsApi&&i.object.selectionsApi.active&&i.object.selectionsApi.cancel()}}));i.object.canShowExploreMenu()&&!c["a"].isInEditMode()&&s.addItem({translation:o.zoomCell&&o.zoomCell.showExploreMenu?"contextMenu.closeVisualExploration":"Tooltip.ExplorationMenu",tid:"visual-exploration",icon:"control",select:function t(){o.zoomCell||o.zoom(i);i.object.selectionsApi&&i.object.selectionsApi.active&&i.object.selectionsApi.cancel();o.exploreMenu(i)}})}ft(s,a,o,i,e,n).then((function(){d(i)}))};t.getObjectMenu&&!u&&t.getObjectMenu(s).then((function(){c["a"].state!==c["a"].States.play?zt(a,o,i,n,t,e).then((function(t){t.items.length&&s.addItem({translation:"contextMenu.title",tid:"more",icon:"more",select:function e(n,i){r.show(t,{position:{x:i.x,y:i.y}})}});p()})):p()}))}))}))}function Nt(t,e,n,i,o){var r;var d=l["default"].getService("qvContextMenu");c["a"].isInEditMode()&&i.gridService.activateCell(e);if(e.isEmpty){r=d.menu();var v=localStorage["QlikView-clipboard"]&&localStorage["QlikView-clipboard"].length>0;c["a"].isInEditMode()&&v&&r.addItem({translation:"contextMenu.paste",tid:"paste",icon:"paste",select:function t(){p["a"].publish("/activeSheet/pasteObject",e)}});d.show(r,{position:{x:t.pageX,y:t.pageY}})}else{r=d.menu();var g=l["default"].getService("$timeout");var f=g((function(){return null}),500);var h=function t(){return null};var m=s["a"].Promise.race([e.getVisualization().catch(h),f]);var b=s["a"].Promise.race([u["a"].load().catch(h),f]);s["a"].all({obj:m,assets:b}).then((function(r){var l=r.obj;var s=r.assets;zt(n,i,e,t,l,s).then((function(e){if("keydown"===t.type){var n=a()(t.target);n.scope().$$postDigest((function(){g((function(){n.find(".lui-popover").find("li")[0].focus()}))}));d.showInline(e,{position:{x:t.pageX,y:t.pageY},onCloseFn:o},t.currentTarget)}else d.show(e,{position:{x:t.pageX,y:t.pageY}})}))}))}}function Ft(t,e,n,i){return t.isSmallDevice&&e!==n.zoomCell&&!e.object.supportQuickMobile()||i.inStoryPlayState()}function _t(t,e,n,i){var o;if(Ft(v["default"],e,i,c["a"]))return;function l(){var n=".objectmenu";var i=[];function l(){e.object&&o&&e.object.on();r()(document.body).off("*",n)}e.closeMenu=l;function s(t){var e=document.elementFromPoint(t.pagePoints[0].x,t.pagePoints[0].y);if(a()(e).hasClass("touch-object-menu-item-label"))return[];return a()(e).closest(".qv-objectmenu-item-container")}function c(){if(e.showingObjectMenu){var t=a()(".touch-object-menu");t.trigger("touch-release-outside");l();r.a.preventGestures(this.gestureHandler);window.event&&window.event.preventDefault()}}function d(t,n){if(e.showingObjectMenu){var i=s(n);if(!i[0]){c.call(this,t);return}i.trigger("touch-release",n.pagePoints[0]);l();r.a.preventGestures(this.gestureHandler);t.preventDefault()}}a()(t.target).trigger("qv-swipecancel");r()(document.body).swipe({id:n,options:{preventDefault:true},start:function t(e){r.a.preventGestures(this.gestureHandler);e.preventDefault()},update:function t(e,n){var a=s(n);if(a[0]){if(a[0]!==i[0]){i[0]&&i.trigger("touch-out");a.trigger("touch-in");i=a}}else if(i[0]){i.trigger("touch-out");i=[]}r.a.preventGestures(this.gestureHandler);e.preventDefault()},end:function t(n,a){i[0]?d.call(this,n,a,e):c.call(this,n,e)},cancel:function t(n){c.call(this,n,e)}})}function s(){e.object&&e.object.isOn().then((function(t){o=t;e.object.off()}));Mt(t.pageX,t.pageY,t,e,n,i);l()}s()}function Rt(t,e,n,i,a){if(ut){ut=false;return}C["a"].treatAsDesktop()?Nt(t,e,n,i,a):_t(t,e,n,i)}function Gt(t,e,n,i){if(!C["a"].treatAsDesktop()){ut=true;_t(t,e,n,i)}}function Ut(t,e,n,i){var a=l["default"].getService("$timeout");var o=a((function(){return null}),500);var r=function t(){return null};var c=s["a"].Promise.race([n.getVisualization().catch(r),o]);var d=s["a"].Promise.race([u["a"].load().catch(r),o]);return s["a"].all({obj:c,assets:d}).then((function(a){return zt(t,e,n,i,a.obj,a.assets)}))}var Vt=e["a"]={onHintContextMenu:pt,onCellContextMenu:Rt,onCellRadialContextMenu:Gt,addDownloadOrExport:bt,addChartShareItem:St,addCopyLinkItem:yt,getObjectMenu:Ut,addFullscreenItem:Lt,addAddToHubItem:xt,addShareSubMenu:Dt,addAlertingItem:gt,_isTouchMenuDisabled:Ft}},fbWF:function(t,e,n){"use strict";var i=n("sWge");var a=n("mWu2");var o=n("PX8M");var r=n("cWJj");var l=n("z4LI");var s=n("vMhA");var c=n("/2No");var d=function t(){return o["a"].getApp().then((function(t){var e=t.layout&&t.layout.qTitle||"";var n=t.id||"";var i={appName:e,appId:n};return i}))};var u=function t(e){var n=d();var a=o["a"].getApp().then((function(t){return r["a"].get().then((function(e){return e.getLayout().then((function(e){return s["a"].get(e,t.enigmaModel)}))}))}));return i["a"].all([n,a]).then((function(t){var n=t[0];var a=t[1];if(!n)return i["a"].reject();var o=l["a"].model&&"sheet"===l["a"].model.genericType?l["a"].model.id:"";var r=e.layout&&e.layout.title?e.layout.title:" ";var s=n.appId.indexOf(".");var c=s>-1?n.appId.substring(0,s):n.appId;var d={appId:c,selections:a,chartId:e.model.id,sheetId:o,chartTitle:r};return{payload:d}}))};var p={generateInsights:function t(e){return u(e).then((function(t){return p.postInsights(t.payload)}))},postInsights:function t(e,n,o){var r=Object(i["a"])();this.cancel();var l=this.getStates();var s="".concat(c["a"].rootPath,"api/v1/insights");var d=a["default"].getService("$http");var u=a["default"].getService("$interval");n=n||15e3;o=o||3e3;var v=n/o;var g=0;var f=null;var h=function t(){g++;if(g>v){u.cancel(f);r.reject({status:l.TIMEOUT});return}d({url:s,method:"POST",data:e}).then((function(t){var e=t.data.StaticEndpointURL;var n=t.data.DirectEndpointURL;var i=0;var a={};n&&d({url:n,method:"GET"}).then((function(t){o("direct",t)}),(function(t){console.error(t)}));function o(t,n){i++;switch(t){case"direct":a.directUrl=n.config.url;break;default:break}if(i>=1){a.staticUrl=e;u.cancel(f);r.resolve(a)}}}),(function(t){if(413===t.status){u.cancel(f);r.reject({status:l.FAILED,data:t.data,httpStatusCode:t.status})}else console.warn("No workers available on service - retrying ...")}))};h();f=u(h,o);p.poolPromise=f;return r.promise},getInsightDetails:function t(e){var n="".concat(c["a"].rootPath,"api/v1/insights/").concat(e,"/details");var i=a["default"].getService("$http");return i.get(n).then((function(t){return t.data}))},cancel:function t(){if(this.poolPromise){var e=a["default"].getService("$interval");e.cancel(this.poolPromise);this.poolPromise=null}},getStates:function t(){return{TIMEOUT:-2,FAILED:-1,PENDING:0,COMPLETED:2}}};e["a"]=p},kXRb:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));function i(){var t=document.createElement("div");t.style.width="1in";var e=document.getElementsByTagName("body")[0];e.appendChild(t);var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("width");e.removeChild(t);var i=n&&Math.round(parseFloat(n));i=i||96;return i>300?300:i}},lyMs:function(t,e,n){"use strict";n.d(e,"b",(function(){return O}));var i=n("zDDU");var a=n("czhI");var o=n.n(a);var r=n("/2No");var l="".concat(r["a"].rootPath,"api/v1/policies/evaluation");var s={get:function t(e){return o.a.post(l,e)}};var c={permissions:s};var d=n("acVu");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),true).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true}):t[e]=n;return t}function g(t,e,n,i,a,o,r){try{var l=t[o](r);var s=l.value}catch(t){n(t);return}l.done?e(s):Promise.resolve(s).then(i,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){g(o,i,a,r,l,"next",t)}function l(t){g(o,i,a,r,l,"throw",t)}r(void 0)}))}}function h(t){return S(t)||w(t)||b(t)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(t,e){if(!t)return;if("string"===typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}function w(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function S(t){if(Array.isArray(t))return y(t)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var x={ENABLE_DATA_ALERTING:false,DATA_ALERTING_LICENSE_STATUS:false,PERMISSIONS:{ALERT:[],RECIPIENT:[]}};var D=function t(e){var n=e.distributionState,i=e.user;return n.currentUser?n.currentUser:{enabled:true,subscribed:true,value:i.id}};var I=function t(e){var n=e.user,i=e.distributionState;if("RRULE:FREQ=SECONDLY"===(null===i||void 0===i?void 0:i.frequency))return{};return{recurrenceRule:i.frequency,initialTokenCount:1,referenceTimestamp:(new Date).toISOString(),timezone:n.zoneinfo}};var C=function t(e){return"SCHEDULED"===(null===e||void 0===e?void 0:e.triggerType)?"SCHEDULED":"RELOAD"};var k=function t(e){var n;if("RELOAD"===(null===e||void 0===e?void 0:e.triggerType))return null;var i={};(null===e||void 0===e?void 0:e.recurrence)&&(null===e||void 0===e||null===(n=e.recurrence)||void 0===n?void 0:n.length)&&(i.recurrence=e.recurrence);(null===e||void 0===e?void 0:e.startDateTime)&&(i.startDateTime=e.startDateTime);(null===e||void 0===e?void 0:e.endDateTime)&&(i.endDateTime=e.endDateTime);(null===e||void 0===e?void 0:e.timezone)&&(i.timezone=e.timezone);return i};var P=function t(e){var n=e.name,a=e.description,o=e.app,r=e.user,l=e.distributionState,s=e.conditionId,c=e.sheetId,u=e.bookmarkId;var p=l.shareWithOthers?l.selectedUsers:[];var v={name:n,description:a,appId:o.id,throttling:I({distributionState:l,user:r}),recipients:{emails:[],userIds:[D({distributionState:l,user:r})].concat(h(p))},conditionId:s,accessMode:"TARGET_ACCESS",sheetId:c,triggerType:C(null===l||void 0===l?void 0:l.scheduler),bookmarkId:u};Object(d["b"])("DATA_ALERTING_SCHEDULED_SCANS")&&(v.scheduleOptions=k(null===l||void 0===l?void 0:l.scheduler));return i["a"].createAlert(v)};var E=function t(e){var n=e.name,a=e.description,o=e.alertId,r=e.user,l=e.distributionState,s=e.originalAlert,c=e.bookmarkId,u=e.conditionId;var p=l.shareWithOthers?[].concat(h(l.selectedUsers),h(s.recipients.userIds.filter((function(t){return!t.subscribed&&l.selectedUsers.findIndex((function(e){return e.value===t.value}))<0})))):[];var v={recipients:[{op:"replace",recipientType:"userid",value:[D({distributionState:l,user:r})].concat(h(p))}],conditionId:u};s.name!==n&&(v.name=n);s.description!==a&&(v.description=a);s.throttling.recurrenceRule!==l.frequency&&(v.throttling=I({distributionState:l,user:r}));s.bookmarkId!==c&&(v.bookmarkId=c);var g=C(l.scheduler);s.triggerType!==g&&(v.triggerType=g);if(Object(d["b"])("DATA_ALERTING_SCHEDULED_SCANS")){var f,m,b,w,S,y,x,P;JSON.stringify(null===s||void 0===s||null===(f=s.scheduleOptions)||void 0===f?void 0:f.recurrence)===JSON.stringify(null===l||void 0===l||null===(m=l.scheduler)||void 0===m?void 0:m.recurrence)&&(null===s||void 0===s||null===(b=s.scheduleOptions)||void 0===b?void 0:b.startDateTime)===(null===l||void 0===l||null===(w=l.scheduler)||void 0===w?void 0:w.startDateTime)&&(null===s||void 0===s||null===(S=s.scheduleOptions)||void 0===S?void 0:S.endDateTime)===(null===l||void 0===l||null===(y=l.scheduler)||void 0===y?void 0:y.endDateTime)&&(null===s||void 0===s||null===(x=s.scheduleOptions)||void 0===x?void 0:x.timezone)===(null===l||void 0===l||null===(P=l.scheduler)||void 0===P?void 0:P.timezone)||(v.scheduleOptions=k(null===l||void 0===l?void 0:l.scheduler))}return i["a"].patchAlert(o,v)};var T=function t(){return x.ENABLE_DATA_ALERTING&&x.DATA_ALERTING_LICENSE_STATUS};var j=function t(){return T()&&x.PERMISSIONS.ALERT.includes("create")};var q=function t(){return T()&&x.PERMISSIONS.ALERT.includes("update")};var L=function t(){return T()&&x.PERMISSIONS.RECIPIENT.includes("add")};var A=function(){var t=f(regeneratorRuntime.mark((function t(e){var n,a;var o,r,l,s;return regeneratorRuntime.wrap((function t(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return i["a"].getSettings();case 2:o=d.sent;x.ENABLE_DATA_ALERTING=o.data["enable-data-alerting"];x.DATA_ALERTING_LICENSE_STATUS="enabled"===o.data["data-alerting-license-status"];r="sharingservicealertingtask";l="alertingtaskrecipients";d.next=9;return c.permissions.get({resources:[{id:r,type:"sharingservicealertingtask",properties:{ownerId:e.id}},{id:l,type:"alertingtaskrecipients",properties:{ownerId:e.id}}]});case 9:s=d.sent;x.PERMISSIONS.ALERT=(null===(n=s.data.find((function(t){return t.id===r})))||void 0===n?void 0:n.actions)||[];x.PERMISSIONS.RECIPIENT=(null===(a=s.data.find((function(t){return t.id===l})))||void 0===a?void 0:a.actions)||[];case 12:case"end":return d.stop()}}),t)})));return function e(n){return t.apply(this,arguments)}}();var O=function t(e,n){switch(n.type){case"reset":return n.newSelectionState;case"setBookmarkList":return p(p({},e),{},{bookmarkList:n.bookmarkList});case"setAndSelectAlertBookmarkFromCurrentSelections":return p(p({},e),{},{currentSelected:n.id,alertBookmarkFromCurrentSelections:n.id,selectedAlertBookmark:n.id});case"setAlertBookmarkFromCurrentSelections":return p(p({},e),{},{alertBookmarkFromCurrentSelections:n.id});case"setAlertBookmarkFromAlert":return p(p({},e),{},{alertBookmarkFromEdit:n.bookmark,currentSelected:n.bookmark.qInfo.qId,selectedAlertBookmark:n.bookmark.qInfo.qId});case"selectNone":return p(p({},e),{},{currentSelected:"none",selectedAlertBookmark:""});case"selectCurrentSelections":return p(p({},e),{},{currentSelected:e.alertBookmarkFromCurrentSelections,selectedAlertBookmark:e.alertBookmarkFromCurrentSelections});case"selectBookmarkFromAlert":return p(p({},e),{},{currentSelected:e.alertBookmarkFromEdit.qInfo.qId,selectedAlertBookmark:e.alertBookmarkFromEdit.qInfo.qId});case"selectBookmarkFromList":return p(p({},e),{},{currentSelected:n.bookmarkId,selectedAlertBookmark:n.alertBookmarkId,bookmarkMap:n.bookmarkMap});default:return e}};var z=e["a"]={createAlert:P,updateAlert:E,isAlertingActive:T,load:A,canCreate:j,canUpdate:q,canAddRecipients:L,getThrottling:I,getTriggerTypeFromScheduler:C,getScheduleOptionsFromScheduler:k}},vtWz:function(t,e,n){"use strict";var i=Object.freeze({OPEN:"/addtohub-dialog/open",CLOSE:"/addtohub-dialog/close",SUCCESS:"/addtohub-dialog/success",CLOSE_TOAST:"/addtohub-dialog/close-toast"});e["a"]=i},zDDU:function(t,e,n){"use strict";var i=n("czhI");var a=n.n(i);var o=n("/2No");function r(t,e,n,i,a,o,r){try{var l=t[o](r);var s=l.value}catch(t){n(t);return}l.done?e(s):Promise.resolve(s).then(i,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function l(t){r(o,i,a,l,s,"next",t)}function s(t){r(o,i,a,l,s,"throw",t)}l(void 0)}))}}var s="".concat(o["a"].rootPath,"api/v1/data-alerts");e["a"]={createAlert:function t(e){return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function t(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",a.a.post("".concat(s),e));case 1:case"end":return n.stop()}}),t)})))()},getAlerts:function t(){return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function t(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.get("".concat(s)));case 1:case"end":return e.stop()}}),t)})))()},getAlert:function t(e){return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function t(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",a.a.get("".concat(s,"/").concat(e)));case 1:case"end":return n.stop()}}),t)})))()},getSettings:function t(){return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function t(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.get("".concat(s,"/settings")));case 1:case"end":return e.stop()}}),t)})))()},patchAlert:function t(e,n){return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function t(i){while(1)switch(i.prev=i.next){case 0:return i.abrupt("return",a.a.patch("".concat(s,"/").concat(e),n));case 1:case"end":return i.stop()}}),t)})))()},getCondition:function t(e){return l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function t(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",a.a.get("".concat(s,"/").concat(e,"/condition")));case 1:case"end":return n.stop()}}),t)})))()}}}}]);